!function(t){"use strict";function e(t,e){function i(){}i.prototype=t;var s=new i;for(var n in e)s[n]=e[n];return e.toString!==Object.prototype.toString&&(s.toString=e.toString),s}function i(t,e){if(null==e)return null;null==e.__id__&&(e.__id__=Ms++);var i;return null==t.hx__closures__?t.hx__closures__={}:i=t.hx__closures__[e.__id__],null==i&&((i=function(){return i.method.apply(i.scope,arguments)}).scope=t,i.method=e,t.hx__closures__[e.__id__]=i),i}var s={},n=function(){return Bs.__string_rec(this,"")},o=function(t,e){this.r=new RegExp(t,e.split("u").join(""))};s.EReg=o,o.__name__=["EReg"],o.prototype={split:function(t){var e="#__delim__#";return t.replace(this.r,e).split(e)},__class__:o};var r=function(){};s.HxOverrides=r,r.__name__=["HxOverrides"],r.strDate=function(t){switch(t.length){case 8:var e=t.split(":"),i=new Date;return i.setTime(0),i.setUTCHours(e[0]),i.setUTCMinutes(e[1]),i.setUTCSeconds(e[2]),i;case 10:var s=t.split("-");return new Date(s[0],s[1]-1,s[2],0,0,0);case 19:var n=t.split(" "),o=n[0].split("-"),r=n[1].split(":");return new Date(o[0],o[1]-1,o[2],r[0],r[1],r[2]);default:throw new Es("Invalid date format : "+t)}},r.cca=function(t,e){var i=t.charCodeAt(e);if(i==i)return i},r.substr=function(t,e,i){if(null==i)i=t.length;else if(i<0){if(0!=e)return"";i=t.length+i}return t.substr(e,i)},r.remove=function(t,e){var i=t.indexOf(e);return-1!=i&&(t.splice(i,1),!0)},r.iter=function(t){return{cur:0,arr:t,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var a=function(){this.length=0};s.List=a,a.__name__=["List"],a.prototype={add:function(t){var e=new l(t,null);null==this.h?this.h=e:this.q.next=e,this.q=e,this.length++},__class__:a};var l=function(t,e){this.item=t,this.next=e};s["_List.ListNode"]=l,l.__name__=["_List","ListNode"],l.prototype={__class__:l},Math.__name__=["Math"];var h=function(){};s.Reflect=h,h.__name__=["Reflect"],h.field=function(t,e){try{return t[e]}catch(t){return null}},h.fields=function(t){var e=[];if(null!=t){var i=Object.prototype.hasOwnProperty;for(var s in t)"__id__"!=s&&"hx__closures__"!=s&&i.call(t,s)&&e.push(s)}return e},h.isFunction=function(t){return"function"==typeof t&&!(t.__name__||t.__ename__)},h.deleteField=function(t,e){return!!Object.prototype.hasOwnProperty.call(t,e)&&(delete t[e],!0)};var c=function(){};s.Std=c,c.__name__=["Std"],c.string=function(t){return Bs.__string_rec(t,"")},c.parseInt=function(t){var e=parseInt(t,10);return 0!=e||120!=r.cca(t,1)&&88!=r.cca(t,1)||(e=parseInt(t)),isNaN(e)?null:e};var _=function(){this.b=""};s.StringBuf=_,_.__name__=["StringBuf"],_.prototype={__class__:_};var u=function(){};s.StringTools=u,u.__name__=["StringTools"],u.htmlEscape=function(t,e){return t=t.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"),e?t.split('"').join("&quot;").split("'").join("&#039;"):t},u.isSpace=function(t,e){var i=r.cca(t,e);return i>8&&i<14||32==i},u.ltrim=function(t){for(var e=t.length,i=0;i<e&&u.isSpace(t,i);)++i;return i>0?r.substr(t,i,e-i):t},u.rtrim=function(t){for(var e=t.length,i=0;i<e&&u.isSpace(t,e-i-1);)++i;return i>0?r.substr(t,0,e-i):t},u.trim=function(t){return u.ltrim(u.rtrim(t))},u.replace=function(t,e,i){return t.split(e).join(i)};var d=s.ValueType={__ename__:["ValueType"],__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]};d.TNull=["TNull",0],d.TNull.toString=n,d.TNull.__enum__=d,d.TInt=["TInt",1],d.TInt.toString=n,d.TInt.__enum__=d,d.TFloat=["TFloat",2],d.TFloat.toString=n,d.TFloat.__enum__=d,d.TBool=["TBool",3],d.TBool.toString=n,d.TBool.__enum__=d,d.TObject=["TObject",4],d.TObject.toString=n,d.TObject.__enum__=d,d.TFunction=["TFunction",5],d.TFunction.toString=n,d.TFunction.__enum__=d,d.TClass=function(t){var e=["TClass",6,t];return e.__enum__=d,e.toString=n,e},d.TEnum=function(t){var e=["TEnum",7,t];return e.__enum__=d,e.toString=n,e},d.TUnknown=["TUnknown",8],d.TUnknown.toString=n,d.TUnknown.__enum__=d;var p=function(){};s.Type=p,p.__name__=["Type"],p.getClassName=function(t){var e=t.__name__;return null==e?null:e.join(".")},p.getEnumName=function(t){return t.__ename__.join(".")},p.resolveClass=function(t){var e=s[t];return null!=e&&e.__name__?e:null},p.resolveEnum=function(t){var e=s[t];return null!=e&&e.__ename__?e:null},p.createInstance=function(t,e){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6]);case 8:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]);case 9:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]);case 10:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9]);case 11:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10]);case 12:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11]);case 13:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12]);case 14:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13]);default:throw new Es("Too many arguments")}},p.createEmptyInstance=function(t){function e(){}return e.prototype=t.prototype,new e},p.createEnum=function(t,e,i){var s=h.field(t,e);if(null==s)throw new Es("No such constructor "+e);if(h.isFunction(s)){if(null==i)throw new Es("Constructor "+e+" need parameters");return s.apply(t,i)}if(null!=i&&0!=i.length)throw new Es("Constructor "+e+" does not need parameters");return s},p.typeof=function(t){switch(typeof t){case"boolean":return d.TBool;case"function":return t.__name__||t.__ename__?d.TObject:d.TFunction;case"number":return Math.ceil(t)==t%2147483648?d.TInt:d.TFloat;case"object":if(null==t)return d.TNull;var e=t.__enum__;if(null!=e)return d.TEnum(e);var i=Bs.getClass(t);return null!=i?d.TClass(i):d.TObject;case"string":return d.TClass(String);case"undefined":return d.TNull;default:return d.TUnknown}};var g=function(t){this.nodeType=t,this.children=[],this.attributeMap=new ys};s.Xml=g,g.__name__=["Xml"],g.parse=function(t){return Ps.parse(t)},g.createElement=function(t){var e=new g(g.Element);if(e.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+e.nodeType);return e.nodeName=t,e},g.createPCData=function(t){var e=new g(g.PCData);if(e.nodeType==g.Document||e.nodeType==g.Element)throw new Es("Bad node type, unexpected "+e.nodeType);return e.nodeValue=t,e},g.createCData=function(t){var e=new g(g.CData);if(e.nodeType==g.Document||e.nodeType==g.Element)throw new Es("Bad node type, unexpected "+e.nodeType);return e.nodeValue=t,e},g.createComment=function(t){var e=new g(g.Comment);if(e.nodeType==g.Document||e.nodeType==g.Element)throw new Es("Bad node type, unexpected "+e.nodeType);return e.nodeValue=t,e},g.createDocType=function(t){var e=new g(g.DocType);if(e.nodeType==g.Document||e.nodeType==g.Element)throw new Es("Bad node type, unexpected "+e.nodeType);return e.nodeValue=t,e},g.createProcessingInstruction=function(t){var e=new g(g.ProcessingInstruction);if(e.nodeType==g.Document||e.nodeType==g.Element)throw new Es("Bad node type, unexpected "+e.nodeType);return e.nodeValue=t,e},g.createDocument=function(){return new g(g.Document)},g.prototype={get:function(t){if(this.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+this.nodeType);var e=this.attributeMap;return null!=Us[t]?e.getReserved(t):e.h[t]},set:function(t,e){if(this.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+this.nodeType);var i=this.attributeMap;null!=Us[t]?i.setReserved(t,e):i.h[t]=e},exists:function(t){if(this.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+this.nodeType);var e=this.attributeMap;return null!=Us[t]?e.existsReserved(t):e.h.hasOwnProperty(t)},attributes:function(){if(this.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.keys()},elementsNamed:function(t){if(this.nodeType!=g.Document&&this.nodeType!=g.Element)throw new Es("Bad node type, expected Element or Document but found "+this.nodeType);for(var e=[],i=0,s=this.children;i<s.length;){var n=s[i];++i;var o;if(n.nodeType==g.Element){if(n.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+n.nodeType);o=n.nodeName==t}else o=!1;o&&e.push(n)}var a=e;return r.iter(a)},addChild:function(t){if(this.nodeType!=g.Document&&this.nodeType!=g.Element)throw new Es("Bad node type, expected Element or Document but found "+this.nodeType);null!=t.parent&&t.parent.removeChild(t),this.children.push(t),t.parent=this},removeChild:function(t){if(this.nodeType!=g.Document&&this.nodeType!=g.Element)throw new Es("Bad node type, expected Element or Document but found "+this.nodeType);return!!r.remove(this.children,t)&&(t.parent=null,!0)},__class__:g};var f=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup"]=f,f.__name__=["com","drderico","flixel","DrPoolGroup"],f.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:f};var m=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_fx_AcidDropsFx"]=m,m.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_fx_AcidDropsFx"],m.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:m};var v=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_fx_BloodDropsFx"]=v,v.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_fx_BloodDropsFx"],v.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:v};var y=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_fx_ChestOpeningFx"]=y,y.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_fx_ChestOpeningFx"],y.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:y};var x=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_fx_GemMovingFx"]=x,x.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_fx_GemMovingFx"],x.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:x};var w=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_fx_GemPickUpFx"]=w,w.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_fx_GemPickUpFx"],w.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:w};var b=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_fx_GravePickedUpFx"]=b,b.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_fx_GravePickedUpFx"],b.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:b};var T=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_fx_KittyPickUpFx"]=T,T.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_fx_KittyPickUpFx"],T.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:T};var S=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_fx_WaterDropsFx"]=S,S.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_fx_WaterDropsFx"],S.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:S};var I=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_fx_WaterRedDropsFx"]=I,I.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_fx_WaterRedDropsFx"],I.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:I};var k=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_stuff_Ladder"]=k,k.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_stuff_Ladder"],k.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:k};var F=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_ui_WindowHelloPlayer"]=F,F.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_ui_WindowHelloPlayer"],F.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:F};var P=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_game_ui_WindowItemFound"]=P,P.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_game_ui_WindowItemFound"],P.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:P};var C=function(t){this._count=0,this._pool=[],this._class=t};s["com.drderico.flixel.DrPoolGroup_com_drderico_towerd_ui_ConfirmScreen"]=C,C.__name__=["com","drderico","flixel","DrPoolGroup_com_drderico_towerd_ui_ConfirmScreen"],C.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},cleanAndDestroy:function(t){if(!(t>=this._pool.length)){for(var e=t,i=this._pool.length;e<i;){var s=e++;null!=this._pool[s]&&(this._pool[s].destroy(),this._pool[s]=null),this._count--}this._pool.splice(t,this._pool.length-t)}},__class__:C};var E=function(){};s["com.drderico.flixel.FlixelHelper"]=E,E.__name__=["com","drderico","flixel","FlixelHelper"],E.loadGraphicFromTexture=function(t,e,i){t.loadTexture(e,i),t.resetFrame()},E.updateFrame=function(t,e){t.frameName=e,t.resetFrame()};var B=function(){};s["com.drderico.haxeutils.DrArray"]=B,B.__name__=["com","drderico","haxeutils","DrArray"],B.createIntArray2D=function(t,e,i){for(var s=[],n=0,o=t;n<o;){n++;for(var r=[],a=0,l=e;a<l;){a++;r.push(i)}s.push(r)}return s},B.inArray=function(t,e){for(var i=0,s=t.length;i<s;)if(t[i++]==e)return!0;return!1},B.truncate=function(t){t.length=0};var L=function(){this.salt=1e5*Math.random()|0,this.val=this.salt};s["com.drderico.haxeutils.DrSecretInt"]=L,L.__name__=["com","drderico","haxeutils","DrSecretInt"],L.prototype={get_value:function(){return this.val-this.salt},set_value:function(t){return this.val=t+this.salt,this.val},setSalt:function(t){this.salt=t},setValue:function(t){this.val=t},__class__:L};var A=function(){};s["com.drderico.haxeutils.DrUtils"]=A,A.__name__=["com","drderico","haxeutils","DrUtils"],A.min=function(t,e){return t<=e?t:e},A.max=function(t,e){return t>=e?t:e},A.minFloat=function(t,e){return t<=e?t:e},A.maxFloat=function(t,e){return t>=e?t:e},A.isIntersects=function(t,e,i,s,n,o,r,a){return!(t>n+r||n>t+i||e>o+a||o>e+s)},A.isDomainMatchesSiteLock=function(t,e){var i=t.indexOf("://");-1==i?i=0:i+=3;var s=t.indexOf("/",i),n=t.substring(i,s).toLowerCase().indexOf(e);if(-1==n)return!1;var o=t.substring(i,n);return-1==o.indexOf("?")&&-1==o.indexOf("&")},A.bound=function(t,e,i){var s=null!=e&&t<e?e:t;return null!=i&&s>i?i:s};var O=function(){};s["com.drderico.haxeutils.DrXor"]=O,O.__name__=["com","drderico","haxeutils","DrXor"],O.XORData=function(t){null==O.XORByte&&(O.XORByte=[],O.ResultByte=[],O.convertToArray(O.XOR_String,O.XORByte));var e=0;O.ResultByte.length=0,O.convertToArray(t,O.ResultByte);for(var i=0,s=O.ResultByte.length;i<s;){var n=i++;e=n%O.XORByteLength,O.ResultByte[n]^=O.XORByte[e]}for(var o="",r=0,a=O.ResultByte;r<a.length;){var l=a[r];++r,o+=String.fromCharCode(l)}return o},O.encodeInt=function(t){return t+540428<<3^11447150},O.decodeInt=function(t){return((11447150^t)>>3)-540428},O.convertToArray=function(t,e){for(var i=0,s=t.length;i<s;){var n=i++;e.push(r.cca(t,n))}};var M=function(){};s["com.drderico.towerd.Achievements"]=M,M.__name__=["com","drderico","towerd","Achievements"],M.unlock=function(t){};var G=function(){};s["com.drderico.towerd.AnimationManager"]=G,G.__name__=["com","drderico","towerd","AnimationManager"],G.scaleUpDown=function(t,e,i,s,n,o,r){return null==n&&(n=0),null==s&&(s=.025),null==i&&(i=1.2),null!=o&&o(null),null!=e&&e(null),null},G.showFromRightToLeft=function(t,e,i){G.showFromRightToLeft_onCompleteCallback=i,G.showFromRightToLeft_object=t,G.showFromRightToLeft_width=e,G.showFromRightToLeft_object.x=ji.game.width,as.tween(G.showFromRightToLeft_object,{x:(ji.game.width-G.showFromRightToLeft_width)/2+20},.4,{ease:Phaser.Easing.Cubic.Out,onComplete:G.step2},G)},G.step2=function(t){as.tween(G.showFromRightToLeft_object,{x:(ji.game.width-G.showFromRightToLeft_width)/2-20},.6,{onComplete:G.step3},G)},G.step3=function(t){as.tween(G.showFromRightToLeft_object,{x:-G.showFromRightToLeft_width-20-Y.screenOffsetX},.4,{ease:Phaser.Easing.Back.In,onComplete:G.onComplete},G)},G.onComplete=function(t){null!=G.showFromRightToLeft_onCompleteCallback&&G.showFromRightToLeft_onCompleteCallback()};var H=function(){this.prevParentBounds=new Phaser.Rectangle(0,0,1,1)};s["com.drderico.towerd.BootState"]=H,H.__name__=["com","drderico","towerd","BootState"],H.__interfaces__=[Phaser.ResizeCallback],H.__super__=Phaser.State,H.prototype=e(Phaser.State.prototype,{create:function(){this.state.start("Preloader")},init:function(){this.input.maxPointers=1,this.stage.disableVisibilityChange=!0,this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.USER_SCALE,this.orientationPortrait=this.game.scale.isPortrait,this.game.scale.refresh(),this.game.device.desktop||this.game.scale.forceOrientation(!0,!1),this.game.scale.setResizeCallback(i(this,this.onResize),this),this.game.scale.onOrientationChange.add(i(this,this.onOrientationChange),this),this.onResize(this.game.scale,null)},onOrientationChange:function(t,e,i){window.document.getElementById("orientation").style.display=i?"none":"block"},onResize:function(t,e){if(this.windowWidth!=window.innerWidth||this.windowHeight!=window.innerHeight||this.orientationPortrait!=t.isPortrait){this.orientationPortrait=t.isPortrait,this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.prevParentBounds.width=this.windowWidth,this.prevParentBounds.height=this.windowHeight;var i=1;i=Math.min(this.windowHeight/480,this.windowWidth/800),this.game.scale.setGameSize(this.windowWidth/i,480),this.game.scale.setUserScale(i,i),this.game.scale.refresh(),null==U.sceneManager||this.orientationPortrait||U.sceneManager.onGameResize()}},preload:function(){this.load.image("preloader","./assets/coolmathGames/splash.png")},__class__:H});var D=function(){};s["com.drderico.towerd.Constants"]=D,D.__name__=["com","drderico","towerd","Constants"];var N=function(){};s["com.drderico.towerd.FlickManager"]=N,N.__name__=["com","drderico","towerd","FlickManager"],N.flicker=function(t,e,i,s,n){null==s&&(s=!0),N.flickerQueue.push(t),0==e?N.flickerQueueRepeats.push(-1):N.flickerQueueRepeats.push(e/i),N.flickerQueueCallbacks.push(n),N.flickerQueueInterval.push(i),N.flickerQueueEndVisibility.push(s),N._flick(t,i)},N.stopFlickering=function(t){var e=N.flickerQueue.indexOf(t);-1!=e&&(t.visible=!0,Y.cancelTween(N.flickerQueueTween[e]),N.deleteFlickValues(e))},N.stopFlickeringAll=function(){for(var t=0,e=N.flickerQueue.length;t<e;){var i=t++;null!=N.flickerQueueTween[i]&&Y.cancelTween(N.flickerQueueTween[i])}N.flickerQueueRepeats.length=0,N.flickerQueueCallbacks.length=0,N.flickerQueueInterval.length=0,N.flickerQueue.length=0,N.flickerQueueEndVisibility.length=0,N.flickerQueueTween.length=0},N.deleteFlickValues=function(t){N.flickerQueueRepeats.splice(t,1),N.flickerQueueCallbacks.splice(t,1),N.flickerQueueInterval.splice(t,1),N.flickerQueue.splice(t,1),N.flickerQueueEndVisibility.splice(t,1),N.flickerQueueTween.splice(t,1)},N._flick=function(t,e){var i=Y.delay(e,function(e){N._flick2(t)},t,N);N.flickerQueueTween[N.flickerQueue.indexOf(t)]=i},N._flick2=function(t){var e=N.flickerQueue.indexOf(t);N.flickerQueueRepeats[e]>0&&N.flickerQueueRepeats[e]--,0!=N.flickerQueueRepeats[e]?(t.visible=!t.visible,N._flick(t,N.flickerQueueInterval[e])):(t.visible=N.flickerQueueEndVisibility[e],null!=N.flickerQueueCallbacks[e]&&N.flickerQueueCallbacks[e](),-1!=(e=N.flickerQueue.indexOf(t))&&N.deleteFlickValues(e))};var R=function(){};s["com.drderico.towerd.GoogleGames"]=R,R.__name__=["com","drderico","towerd","GoogleGames"];var W=function(){var t={width:800,height:480,enableDebug:!1,renderer:Phaser.AUTO,transparent:!1,antialias:!0,resolution:1,preserveDrawingBuffer:!1,physicsConfig:Phaser.Physics.ARCADE,state:{create:i(this,this.create)},multiTextue:!0};ji.createGameFromConfig(t),ji.game.state.add("Boot",H),ji.game.state.add("Preloader",X),ji.game.state.add("PlayState",U),ji.game.state.start("Boot")};s["com.drderico.towerd.Main"]=W,W.__name__=["com","drderico","towerd","Main"],W.main=function(){new W},W.prototype={create:function(){},__class__:W};var U=function(){};s["com.drderico.towerd.PlayState"]=U,U.__name__=["com","drderico","towerd","PlayState"],U.checkAchievements=function(){j.ach_killed_npcs.get_value()>=25&&M.unlock("CgkI_f7-8JsKEAIQDQ"),j.ach_killed_npcs.get_value()>=50&&M.unlock("CgkI_f7-8JsKEAIQDg"),j.ach_killed_npcs.get_value()>=75&&M.unlock("CgkI_f7-8JsKEAIQDw"),j.ach_killed_npcs.get_value()>=100&&M.unlock("CgkI_f7-8JsKEAIQEA"),j.ach_kitties.get_value()>=25&&M.unlock("CgkI_f7-8JsKEAIQFw"),j.ach_kitties.get_value()>=50&&M.unlock("CgkI_f7-8JsKEAIQGA"),j.ach_kitties.get_value()>=75&&M.unlock("CgkI_f7-8JsKEAIQGQ"),j.ach_kitties.get_value()>=100&&M.unlock("CgkI_f7-8JsKEAIQGg"),j.ach_gems_collected_by_magnet.get_value()>=25&&M.unlock("CgkI_f7-8JsKEAIQBQ"),j.ach_gems_collected_by_magnet.get_value()>=50&&M.unlock("CgkI_f7-8JsKEAIQBg"),j.ach_gems_collected_by_magnet.get_value()>=75&&M.unlock("CgkI_f7-8JsKEAIQBw"),j.ach_gems_collected_by_magnet.get_value()>=100&&M.unlock("CgkI_f7-8JsKEAIQCA")},U.changeBgColor=function(){if(U.THIS.stage.backgroundColor!=D.BG_COLORS[j.envSetting.get_value()]){var t=D.BG_COLORS,e=j.envSetting.get_value();U.THIS.stage.backgroundColor=t[e],Rt.changeBg(),null!=Bi.bgLevel&&Bi.bgLevel.changeWallsColor(!0)}},U.onGetPlayerScoreResult=function(t){t>0&&(j.helloPlayerWindow=!1),j.bestScore.get_value()<t&&(j.bestScore.set_value(t),Bi.needUpdateBestScore=!0)},U.changeCssBgColor=function(){var t=D.BG_COLORS[j.envSetting.get_value()];document.body.style.background=t},U.__super__=Phaser.State,U.prototype=e(Phaser.State.prototype,{create:function(){ji.game.input.keyboard.addKeyCapture([Phaser.Keyboard.SPACEBAR]),ji.game.physics.startSystem(Phaser.Physics.ARCADE),U.THIS=this,U.tweenManager=new Phaser.TweenManager(ji.game),U.tweenManager.frameBased=!0,U.gameTweenManager=as.get_globalManager(),U.gameTweenManager.frameBased=!0,U.timeManager=new Phaser.Time(ji.game),U.gameTimeManager=ji.game.time,Y.onResourcesLoaded(),this.stage.backgroundColor=0,q.create(),_e.create(),U.sceneManager=new z,this.add.existing(U.sceneManager),$.create(),U.sceneManager.showTitleScreen(),U.changeBgColor(),ji.get_camera().flash(0,1e3,!0)},update:function(){if(U.needToShowBatchUnlockMessage){U.needToShowBatchUnlockMessage=!1,j.noAds.set_value(1);var t=j.heroLivesMax;t.set_value(t.get_value()+2);var e=j.gems;e.set_value(e.get_value()+100);var i=j.coins;i.set_value(i.get_value()+150),Q.powerup_pickup(),j.save(),Bi.getInstance().updateValues(),U.sceneManager.showConfirmScreen(Bi.getInstance(),Vi.flags(Y.tongue.get("$BATCH_OFFER_UNLOCKED"),["<X>"],[U.appPromoName]),null,!1)}ji.game.device.desktop&&(U.canPressEscape&&ji.game.input.keyboard.isDown(Phaser.Keyboard.ESC)&&ji.game.input.keyboard.downDuration(Phaser.Keyboard.ESC,250)&&(U.canPressEscape=!1,U.sceneManager.onBackBtnPressed(!0)),!ji.game.input.keyboard.isDown(Phaser.Keyboard.ESC)&&ji.game.input.keyboard.upDuration(Phaser.Keyboard.ESC,250)&&(U.canPressEscape=!0)),Phaser.State.prototype.update.call(this)},__class__:U});var X=function(){};s["com.drderico.towerd.PreloaderState"]=X,X.__name__=["com","drderico","towerd","PreloaderState"],X.__super__=Phaser.State,X.prototype=e(Phaser.State.prototype,{preload:function(){this.stage.backgroundColor="#000000";var t=this.add.sprite(0,0,"preloader");Y.setPosUsingCenter(t,ji.game.width/2,240-Y.screenOffsetY),this.load.setPreloadSprite(t),j.load(),Y.loadAssets()},create:function(){this.state.start("PlayState")},__class__:X});var Y=function(){};s["com.drderico.towerd.RM"]=Y,Y.__name__=["com","drderico","towerd","RM"],Y.loadAssets=function(){ji.game.load.atlas(Y.t,"./assets/images/t1.png","./assets/images/t1.json"),ji.game.load.atlas(Y.t2,"./assets/images/t2.png","./assets/images/t2.json");for(var t=0,e=Y.bgTiles;t<e.length;){var i=e[t];++t,ji.game.load.image(i,"./assets/images//no_pack/"+i)}for(var s=0,n=Y.tilemapTiles;s<n.length;){var o=n[s];++s,ji.game.load.image(o,"./assets/images//no_pack/"+o),D.MAP_TEXTURES.push(o)}ji.game.load.image(Y.wmap,"./assets/images//wmap/"+Y.wmap),ji.game.load.bitmapFont(Y.font16_white,"./assets/fonts/font16.png","./assets/fonts/font16.fnt"),ji.game.load.bitmapFont(Y.font24_white,"./assets/fonts/font28.png","./assets/fonts/font28.fnt"),ji.game.load.bitmapFont(Y.font48_white,"./assets/fonts/font48.png","./assets/fonts/font48.fnt"),Q.load(),ji.game.load.text("assets/locales/coolMathEnUS/data.tsv","assets/locales/coolMathEnUS/data.tsv"),ji.game.load.text("assets/locales/index.xml","assets/locales/index.xml"),Y.tongue=new Ui(null,Y.ftCheckFile,Y.ftGetText,Y.getDirectoryContents)},Y.getDirectoryContents=function(t){return[]},Y.ftGetText=function(t){return ji.game.cache.getText(t)},Y.ftCheckFile=function(t){return ji.game.cache.checkTextKey(t)},Y.setPos=function(t,e,i){t.x=e+t.offsetX,t.y=i+t.offsetY},Y.setPosForGroup=function(t,e,i){t.x=e,t.y=i},Y.createButton=function(t,e,i){return new Phaser.Button(ji.game,0,0,Y.t,e,i,t,t,t,t)},Y.setScale=function(t,e,i){null==e?t.scale.set(1,1):t.scale.set(e,e),null==i&&(i=!1),i&&t.anchor.setTo(.5,.5)},Y.cancelTween=function(t){null!=t&&Bs.__cast(t,Phaser.Tween).stop(!1)},Y.cancelTimerEvent=function(t){null!=t&&null!=t.timer&&t.timer.destroy()},Y.getBitmapData=function(t,e,i,s,n){null==n&&(n=!1);var o=ji.game.make.bitmapData(t,e,s,n);return o.ctx.beginPath(),o.ctx.rect(0,0,t,e),o.ctx.fillStyle=i,o.ctx.fill(),o},Y.delay=function(t,e,i,s){var n=as.tween({},{},t,{},s);return null!=i?n.onComplete.addOnce(e,s,0,i):n.onComplete.addOnce(e,s),n},Y.stopClickProp=function(){ji.game.input.reset(!0)},Y.onBtnClicked=function(t,e){Y.stopClickProp(),Q.click(),G.scaleUpDown(t,e)},Y.shake=function(t,e){ji.game.camera.shake(100*t,300*e,!0)},Y.toogleSound=function(){},Y.setPosUsingCenter=function(t,e,i){null==i&&(i=0),null==e&&(e=0),t.x=e-t.width/2+t.offsetX,t.y=i-t.height/2+t.offsetY},Y.arcadeBody=function(t){return t},Y.getText=function(t,e){null==e&&(e="left"),null==t&&(t=20);var i=new We(0,0,Y.font24_white,"",t,e);return i.tint=16501556,Y.setScale(i),i},Y.onResourcesLoaded=function(){Y.tongue.init("coolMathEnUS",null,!1,!0)},Y.isAnyKeyJustPressed=function(){return!!ji.game.input.keyboard.upDuration(Phaser.Keyboard.SPACEBAR)||!!ji.game.input.activePointer.withinGame&&ji.game.input.activePointer.justPressed()},Y.toggleMusicBtns=function(t){switch(j.music){case 0:E.loadGraphicFromTexture(t,Y.t,"musicOnBtn.png");break;case 1:E.loadGraphicFromTexture(t,Y.t,"music2OnBtn.png");break;case 2:E.loadGraphicFromTexture(t,Y.t,"musicOffBtn.png")}},Y._onMusicBtnPressed=function(){var t=j,e=t.music;t.set_music(e+1),j.save(!0)},Y.enableBody=function(t){ji.game.physics.arcade.enable(t,!1)};var V=function(){};s["flixel.util.IFlxDestroyableGroup"]=V,V.__name__=["flixel","util","IFlxDestroyableGroup"],V.prototype={__class__:V};var K=function(){Phaser.Group.call(this,ji.game,null,"",!1,!1)};s["flixel.group.FlxTypedGroup"]=K,K.__name__=["flixel","group","FlxTypedGroup"],K.__interfaces__=[V],K.__super__=Phaser.Group,K.prototype=e(Phaser.Group.prototype,{destroy:function(t,e){Phaser.Group.prototype.destroy.call(this,t,e)},get_active:function(){return this.exists},set_active:function(t){var e=this.visible;return this.exists=t,this.visible=e,t},disableInput:function(){this.disableInput_(this)},disableInput_:function(t){for(var e=0,i=t.children;e<i.length;){var s=i[e];++e,Bs.__instanceof(s,K)?this.disableInput_(Bs.__cast(s,K)):Bs.__instanceof(s,Ye)&&Bs.__cast(s,Ye).disable()}},enableInput:function(){this.enableInput_(this)},enableInput_:function(t){for(var e=0,i=t.children;e<i.length;){var s=i[e];++e,Bs.__instanceof(s,K)?this.enableInput_(Bs.__cast(s,K)):Bs.__instanceof(s,Ye)&&Bs.__cast(s,Ye).enable()}},__class__:K});var z=function(){K.call(this),z.onGameResizeSignal=new Phaser.Signal,z.myGame=new J,z.menu=new Bi,z.hud=new Rt,z.pauseScreen=new wi,z.shopScreen=new Hi,z.shopSkinScreen=new Ri,z.parentScreens=[]};s["com.drderico.towerd.SceneManager"]=z,z.__name__=["com","drderico","towerd","SceneManager"],z.popParentScreen=function(){if(z.parentScreens.length>0){var t=z.parentScreens.pop();t.set_active(!0),t.enableInput()}if(z.parentScreens.length>0)z.parentScreen=z.parentScreens[z.parentScreens.length-1];else z.state},z.__super__=K,z.prototype=e(K.prototype,{showGameScene:function(){this.removeAll_(),as.set_globalManager(U.gameTweenManager),z.backBtnListener=z.hud,this.add(z.myGame),this.add(z.hud),Rt.init(),z.hud.set_active(!0),z.myGame.set_active(!0),z.state=1,z.hud.enableInput(),$.startNewGame(),et.active?Q.tutorial():Q.game()},showTitleScreen:function(){z.state=0,this.removeAll_(),as.set_globalManager(U.tweenManager),this.add(z.menu),z.menu.set_active(!0),z.menu.enableInput(),ji.get_sound().stopAll(),z.backBtnListener=z.menu,Y.delay(.1,Q.menu,null,Q),z.menu.show(),U.changeCssBgColor()},removeAll_:function(){this.remove(z.myGame,!1,!0),this.remove(z.hud,!1,!0),this.remove(z.pauseScreen,!1,!0),this.remove(z.shopScreen,!1,!0),this.remove(z.menu,!1,!0),z.myGame.disableInput(),z.hud.disableInput(),z.pauseScreen.disableInput(),z.shopScreen.disableInput(),z.menu.disableInput(),Fi.remove(this),Pi.hide(this),U.gameTweenManager.removeAll(),U.tweenManager.removeAll(),U.timeManager.removeAll(),U.gameTimeManager.removeAll(),z.menu.onHide(),z.parentScreens.length=0,Y.stopClickProp()},showConfirmScreen:function(t,e,i,s,n){null==s&&(s=!0),Pi.isVisible()?this.pushParentScreen(Pi.curScreen):0==z.state?this.pushParentScreen(t):1==z.state&&($.paused||this.showPause(),this.pushParentScreen(z.pauseScreen)),Pi.show(this,e,i,s,n)},pushParentScreen:function(t){null!=t&&-1==z.parentScreens.indexOf(t)&&(z.parentScreens.push(t),z.parentScreen=t,z.parentScreen.set_active(!1),z.parentScreen.disableInput())},showPause:function(){1!=z.state||$.paused||$.isGameOver||!$.isLevelRunning||et.active||(j.save(),Q.pauseMusic(),z.myGame.set_active(!1),z.hud.set_active(!1),z.hud.disableInput(),$.paused=!0,as.set_globalManager(U.tweenManager),Fi.add(this),this.add(z.pauseScreen),z.pauseScreen.show(),z.backBtnListener=z.pauseScreen)},hidePause:function(){1==z.state&&$.paused&&(z.myGame.set_active(!0),z.hud.set_active(!0),as.set_globalManager(U.gameTweenManager),$.paused=!1,this.remove(z.pauseScreen,!1,!0),z.pauseScreen.disableInput(),Fi.remove(this),z.backBtnListener=z.hud,z.hud.enableInput(),Q.resumeMusic())},hideConfirmScreen:function(){z.popParentScreen(),Pi.hide(this)},onBackBtnPressed:function(t){null==t&&(t=!1),Pi.isVisible()?Pi.onBackBtnPressed():Hi.isVisible?(t&&Q.click(),U.sceneManager.hideShopScreen()):Ri.isVisible?(t&&Q.click(),U.sceneManager.hideShopSkinScreen()):null!=z.backBtnListener&&z.backBtnListener.onBackBtnPressed(t)},onPause:function(){1==z.state&&this.showPause()},showShopScreen:function(t,e){this.pushParentScreen(t),Fi.add(this),this.add(z.shopScreen),z.shopScreen.show(),z.shopScreenOnCloseCallback=e},showShopSkinScreen:function(t){this.pushParentScreen(t),Fi.add(this),this.add(z.shopSkinScreen),z.shopSkinScreen.show(),z.shopSkinScreen.enableInput()},hideShopScreen:function(){Hi.isVisible=!1,z.shopScreen.disableInput(),Fi.remove(this),this.remove(z.shopScreen,!1,!0),z.popParentScreen(),null!=z.shopScreenOnCloseCallback&&z.shopScreenOnCloseCallback()},showNotEnoughCoins:function(t){var e=this;U.sceneManager.showConfirmScreen(t,Y.tongue.get("$NOT_ENOUGH_MONEY_TO_BUY"),i(this,this.hideNotEnoughCoins),!1,function(){e.hideNotEnoughCoins()})},hideNotEnoughCoins:function(){},hideShopSkinScreen:function(){Ri.isVisible=!1,Fi.remove(this),z.shopSkinScreen.disableInput(),this.remove(z.shopSkinScreen,!1,!0),z.popParentScreen()},onAwardRecieved:function(){var t=null;Hi.isVisible?t=z.shopScreen:Ri.isVisible&&(t=z.shopSkinScreen),U.sceneManager.showConfirmScreen(t,Vi.flags(Y.tongue.get("$YOU_GOT_FREE_COINS"),["<X>"],["100"]),null,!1);var e=j.coins;e.set_value(e.get_value()+100),Bi.coinsHud.updateText(!1),j.save(),Q.moneyRewardRecieved()},onGameResize:function(){null!=z.onGameResizeSignal&&z.onGameResizeSignal.dispatch()},__class__:z});var j=function(){};s["com.drderico.towerd.Settings"]=j,j.__name__=["com","drderico","towerd","Settings"],j.load=function(){if(j._gameSave=new cs,j.checkNullSave(),j.bestScore=new L,j.bestLevel=new L,j.score=new L,j.coins=new L,j.level=new L,j.gems=new L,j.heroLivesMax=new L,j.magnetLevel=new L,j.invulnerabilityLevel=new L,j.envSetting=new L,j.ach_gems_collected_by_magnet=new L,j.ach_killed_npcs=new L,j.ach_kitties=new L,j.noAds=new L,j.heroLives=new L,j.heroSkin=new L,j.temp=new L,j.loadSecretInt(j.ach_gems_collected_by_magnet,j._gameSave.data.ach_gems_collected_by_magnet),j.loadSecretInt(j.ach_killed_npcs,j._gameSave.data.ach_killed_npcs),j.loadSecretInt(j.ach_kitties,j._gameSave.data.ach_kitties),j.loadSecretInt(j.envSetting,j._gameSave.data.envSetting,0,0,4),j.loadSecretInt(j.bestScore,j._gameSave.data.bestScore,0,0,1e8),j.loadSecretInt(j.bestLevel,j._gameSave.data.bestLevel,0,0,1e5),j.loadSecretInt(j.coins,j._gameSave.data.coins),j.loadSecretInt(j.gems,j._gameSave.data.gems),j.loadSecretInt(j.magnetLevel,j._gameSave.data.magnetLevel),j.loadSecretInt(j.invulnerabilityLevel,j._gameSave.data.invulnerabilityLevel),j.loadSecretInt(j.heroLivesMax,j._gameSave.data.heroLivesMax,3,3,99),j.loadSecretInt(j.noAds,j._gameSave.data.noAds,0,0,1),j.loadSecretInt(j.level,j._gameSave.data.level,0,0,j.bestLevel.get_value()),j.loadSecretInt(j.score,j._gameSave.data.score,0,0,j.bestScore.get_value()),j.loadSecretInt(j.heroLives,j._gameSave.data.heroLives,0,0,j.heroLivesMax.get_value()),j.loadSecretInt(j.heroSkin,j._gameSave.data.heroSkin,0,0,7),null==j._gameSave.data.music2?j.set_music(0):j.set_music(j._gameSave.data.music2),null==j._gameSave.data.itemShieldFirstTouch?j.itemShieldFirstTouch=!0:j.itemShieldFirstTouch=j._gameSave.data.itemShieldFirstTouch,null==j._gameSave.data.itemMagnetFirstTouch?j.itemMagnetFirstTouch=!0:j.itemMagnetFirstTouch=j._gameSave.data.itemMagnetFirstTouch,null==j._gameSave.data.itemArtefactFirstTouch?j.itemArtefactFirstTouch=!0:j.itemArtefactFirstTouch=j._gameSave.data.itemArtefactFirstTouch,null==j._gameSave.data.itemTombFirstTouch?j.itemTombFirstTouch=!0:j.itemTombFirstTouch=j._gameSave.data.itemTombFirstTouch,null==j._gameSave.data.bgColorIdx?j.bgColorIdx=0:j.bgColorIdx=j._gameSave.data.bgColorIdx,null==j._gameSave.data.shopBtnShown?j.shopBtnShown=!1:j.shopBtnShown=j._gameSave.data.shopBtnShown,null==j._gameSave.data.shopSkinBtnShown?j.shopSkinBtnShown=!1:j.shopSkinBtnShown=j._gameSave.data.shopSkinBtnShown,null==j._gameSave.data.helloPlayerWindow?j.helloPlayerWindow=!0:j.helloPlayerWindow=j._gameSave.data.helloPlayerWindow,null==j._gameSave.data.gameOver?j.gameOver=!0:j.gameOver=j._gameSave.data.gameOver,null==j._gameSave.data.deathLevels)j.deathLevels=[];else try{j.deathLevels=fs.run(j._gameSave.data.deathLevels)}catch(t){j.deathLevels=[]}var t=!1;if(null==j._gameSave.data.heroSkinAvailable2)t=!1;else try{j.heroSkinAvailable=j._gameSave.data.heroSkinAvailable2,t=!0}catch(t){}if(!t){j.heroSkinAvailable=[];for(var e=0;e<12;){var i=e++;j.heroSkinAvailable[i]=0}}j.heroSkinAvailable[0]=128},j.loadSecretInt=function(t,e,i,s,n){null==n&&(n=2147483647),null==s&&(s=0),null==i&&(i=0),null==e?t.set_value(s):(t.set_value(((11447150^c.parseInt(O.XORData(e)))>>3)-540428),(t.get_value()<s||t.get_value()>n)&&t.set_value(i))},j.decodeStringToInt=function(t){return((11447150^c.parseInt(O.XORData(t)))>>3)-540428},j.encodeIntToString=function(t){return O.XORData(c.string(t+540428<<3^11447150))},j.save=function(t,e){null==e&&(e=!0),null==t&&(t=!1),j.saveMusicOnly=t,j.saveAsync()},j.saveAsync=function(){if(j.checkNullSave(),j._gameSave.data.music2=j.music,!j.saveMusicOnly){var t=O.XORData(c.string(j.ach_gems_collected_by_magnet.get_value()+540428<<3^11447150));j._gameSave.data.ach_gems_collected_by_magnet=t;var e=O.XORData(c.string(j.ach_killed_npcs.get_value()+540428<<3^11447150));j._gameSave.data.ach_killed_npcs=e;var i=O.XORData(c.string(j.ach_kitties.get_value()+540428<<3^11447150));j._gameSave.data.ach_kitties=i;var s=O.XORData(c.string(j.bestScore.get_value()+540428<<3^11447150));j._gameSave.data.bestScore=s;var n=O.XORData(c.string(j.bestLevel.get_value()+540428<<3^11447150));j._gameSave.data.bestLevel=n;var o=O.XORData(c.string(j.coins.get_value()+540428<<3^11447150));j._gameSave.data.coins=o;var r=O.XORData(c.string(j.envSetting.get_value()+540428<<3^11447150));j._gameSave.data.envSetting=r;var a=O.XORData(c.string(j.magnetLevel.get_value()+540428<<3^11447150));j._gameSave.data.magnetLevel=a;var l=O.XORData(c.string(j.invulnerabilityLevel.get_value()+540428<<3^11447150));j._gameSave.data.invulnerabilityLevel=l;var h=O.XORData(c.string(j.gems.get_value()+540428<<3^11447150));j._gameSave.data.gems=h;var _=O.XORData(c.string(j.heroLivesMax.get_value()+540428<<3^11447150));j._gameSave.data.heroLivesMax=_;var u=O.XORData(c.string(j.noAds.get_value()+540428<<3^11447150));j._gameSave.data.noAds=u;var d=O.XORData(c.string(j.heroSkin.get_value()+540428<<3^11447150));j._gameSave.data.heroSkin=d;var p=O.XORData(c.string(j.level.get_value()+540428<<3^11447150));j._gameSave.data.level=p;var g=O.XORData(c.string(j.score.get_value()+540428<<3^11447150));j._gameSave.data.score=g;var f=O.XORData(c.string(j.heroLives.get_value()+540428<<3^11447150));j._gameSave.data.heroLives=f,j._gameSave.data.gameOver=j.gameOver,j._gameSave.data.shopBtnShown=j.shopBtnShown,j._gameSave.data.shopSkinBtnShown=j.shopSkinBtnShown,j._gameSave.data.bgColorIdx=j.bgColorIdx,j._gameSave.data.itemShieldFirstTouch=j.itemShieldFirstTouch,j._gameSave.data.itemMagnetFirstTouch=j.itemMagnetFirstTouch,j._gameSave.data.itemArtefactFirstTouch=j.itemArtefactFirstTouch,j._gameSave.data.itemTombFirstTouch=j.itemTombFirstTouch,j._gameSave.data.helloPlayerWindow=j.helloPlayerWindow,j._gameSave.data.deathLevels=ps.run(j.deathLevels),j._gameSave.data.heroSkinAvailable2=j.heroSkinAvailable}j._gameSave.close()},j.checkNullSave=function(){j._gameSave.bind("towerd")},j.set_music=function(t){return j.music=t,3==j.music&&(j.music=0),ji.get_sound().mute=2==j.music,0==j.music?Q.unmuteMusic():1==j.music&&Q.muteMusic(),t},j.showAds=function(){return 0==j.noAds.get_value()},j.isSkinAvailable=function(t){return 0!=(128&j.heroSkinAvailable[t])},j.buySkin=function(t){t<0||t>=12||(j.heroSkinAvailable[t]|=128)};var Q=function(){};s["com.drderico.towerd.SfxManager"]=Q,Q.__name__=["com","drderico","towerd","SfxManager"],Q.load=function(){ji.game.sound.boot(),ji.game.load.audio("assets/sounds/click",["assets/sounds/click.mp3","assets/sounds/click.ogg"]),ji.game.load.audio("assets/sounds/gameover_expl",["assets/sounds/gameover_expl.mp3","assets/sounds/gameover_expl.ogg"]),ji.game.load.audio("assets/sounds/gameover",["assets/sounds/gameover.mp3","assets/sounds/gameover.ogg"]),ji.game.load.audio("assets/sounds/chest",["assets/sounds/chest.mp3","assets/sounds/chest.ogg"]),ji.game.load.audio("assets/sounds/ladder_show",["assets/sounds/ladder_show.mp3","assets/sounds/ladder_show.ogg"]),ji.game.load.audio("assets/sounds/hero_jump",["assets/sounds/hero_jump.mp3","assets/sounds/hero_jump.ogg"]),ji.game.load.audio("assets/sounds/fireball_spawn",["assets/sounds/fireball_spawn.mp3","assets/sounds/fireball_spawn.ogg"]),ji.game.load.audio("assets/sounds/hero_hurt_by_fireball",["assets/sounds/hero_hurt_by_fireball.mp3","assets/sounds/hero_hurt_by_fireball.ogg"]),ji.game.load.audio("assets/sounds/water_sfx",["assets/sounds/water_sfx.mp3","assets/sounds/water_sfx.ogg"]),ji.game.load.audio("assets/sounds/water_hurt",["assets/sounds/water_hurt.mp3","assets/sounds/water_hurt.ogg"]),ji.game.load.audio("assets/sounds/meow1",["assets/sounds/meow1.mp3","assets/sounds/meow1.ogg"]),ji.game.load.audio("assets/sounds/meow2",["assets/sounds/meow2.mp3","assets/sounds/meow2.ogg"]),ji.game.load.audio("assets/sounds/coin",["assets/sounds/coin.mp3","assets/sounds/coin.ogg"]),ji.game.load.audio("assets/sounds/gem_pickup",["assets/sounds/gem_pickup.mp3","assets/sounds/gem_pickup.ogg"]),ji.game.load.audio("assets/sounds/get_kitty",["assets/sounds/get_kitty.mp3","assets/sounds/get_kitty.ogg"]),ji.game.load.audio("assets/sounds/hero_hurt1",["assets/sounds/hero_hurt1.mp3","assets/sounds/hero_hurt1.ogg"]),ji.game.load.audio("assets/sounds/hero_hurt2",["assets/sounds/hero_hurt2.mp3","assets/sounds/hero_hurt2.ogg"]),ji.game.load.audio("assets/sounds/hero_hurt3",["assets/sounds/hero_hurt3.mp3","assets/sounds/hero_hurt3.ogg"]),ji.game.load.audio("assets/sounds/GTC_MagicUp",["assets/sounds/GTC_MagicUp.mp3","assets/sounds/GTC_MagicUp.ogg"]),ji.game.load.audio("assets/sounds/hit_bottom",["assets/sounds/hit_bottom.mp3","assets/sounds/hit_bottom.ogg"]),ji.game.load.audio("assets/sounds/npc_die",["assets/sounds/npc_die.mp3","assets/sounds/npc_die.ogg"]),ji.game.load.audio("assets/sounds/npc_die_voice1",["assets/sounds/npc_die_voice1.mp3","assets/sounds/npc_die_voice1.ogg"]),ji.game.load.audio("assets/sounds/npc_die_voice2",["assets/sounds/npc_die_voice2.mp3","assets/sounds/npc_die_voice2.ogg"]),ji.game.load.audio("assets/sounds/npc_die_voice3",["assets/sounds/npc_die_voice3.mp3","assets/sounds/npc_die_voice3.ogg"]),ji.game.load.audio("assets/sounds/npc_die_voice4",["assets/sounds/npc_die_voice4.mp3","assets/sounds/npc_die_voice4.ogg"]),ji.game.load.audio("assets/sounds/tombExplosion",["assets/sounds/tombExplosion.mp3","assets/sounds/tombExplosion.ogg"]),ji.game.load.audio("assets/sounds/GTC_MagicUp",["assets/sounds/GTC_MagicUp.mp3","assets/sounds/GTC_MagicUp.ogg"]),ji.game.load.audio("assets/music/game",["assets/music/game.mp3","assets/music/game.ogg"]),ji.game.load.audio("assets/music/game2",["assets/music/game2.mp3","assets/music/game2.ogg"]),ji.game.load.audio("assets/music/menu",["assets/music/menu.mp3","assets/music/menu.ogg"]),ji.game.load.audio("assets/music/tutorial",["assets/music/tutorial.mp3","assets/music/tutorial.ogg"])},Q.reset=function(){ji.game.sound.stopAll()},Q.click=function(){ji.get_sound().play("assets/sounds/click",1)},Q.game=function(){Q.stopMusic();var t=(j.level.get_value()+1)/25|0,e=0==j.music?.7:0;Q.musicSound=ji.get_sound().play(t%2==0?"assets/music/game":"assets/music/game2",e,!0)},Q.menu=function(t){Q.stopMusic();var e=0==j.music?1:0;Q.musicSound=ji.get_sound().play("assets/music/menu",e,!0)},Q.tutorial=function(){Q.stopMusic();var t=0==j.music?.7:0;Q.musicSound=ji.get_sound().play("assets/music/tutorial",t,!0)},Q.gameover=function(){Q.water_sfx_cnt=0,ji.get_sound().play("assets/sounds/gameover_expl",.35),ji.get_sound().play("assets/sounds/gameover",1)},Q.chest=function(){ji.get_sound().play("assets/sounds/chest",.7)},Q.ladder_show=function(){ji.get_sound().play("assets/sounds/ladder_show",1)},Q.hero_jump=function(){ji.get_sound().play("assets/sounds/hero_jump",.7)},Q.fireball_spawn=function(){ji.get_sound().play("assets/sounds/fireball_spawn",1)},Q.hero_hurt_by_fireball=function(){ji.get_sound().play("assets/sounds/hero_hurt_by_fireball",1)},Q.water_env=function(){Q.water_sfx_cnt++,null==Q.waterenv_sound&&(Q.waterenv_sound=ji.get_sound().play("assets/sounds/water_sfx",.35,!0))},Q.water_env_stop=function(){0==--Q.water_sfx_cnt&&(Q.waterenv_sound.onFadeComplete.addOnce(Q._water_env_stop),Q.waterenv_sound.fadeOut(1))},Q._water_env_stop=function(t,e){Q.waterenv_sound.stop(),Q.waterenv_sound=null},Q.water_hurt=function(){null==Q.water_hurt_sound&&(Q.water_hurt_sound=ji.get_sound().play("assets/sounds/water_hurt",.7),Q.water_hurt_sound.onStop.addOnce(Q._water_hurt))},Q._water_hurt=function(t,e){Q.water_hurt_sound=null},Q.stopMusic=function(){null!=Q.musicSound&&(Q.musicSound.stop(),Q.musicSound=null)},Q.coin_pickup=function(){ji.get_sound().play("assets/sounds/coin",1)},Q.gem_pickup=function(){ji.get_sound().play("assets/sounds/gem_pickup",.7)},Q.powerup_pickup=function(){ji.get_sound().play("assets/sounds/GTC_MagicUp",.7)},Q.get_kitty=function(){ji.get_sound().play("assets/sounds/get_kitty",.7)},Q.hero_hurt=function(){switch(ji.random.int(0,2)){case 0:ji.get_sound().play("assets/sounds/hero_hurt1",.7);break;case 1:ji.get_sound().play("assets/sounds/hero_hurt2",.7);break;case 2:ji.get_sound().play("assets/sounds/hero_hurt3",.7)}},Q.meow=function(){ji.random.float(0,100)<50?ji.get_sound().play("assets/sounds/meow1",1):ji.get_sound().play("assets/sounds/meow2",1)},Q.touchFloor=function(){ji.get_sound().play("assets/sounds/hit_bottom",1)},Q.tombExplosion=function(){ji.get_sound().play("assets/sounds/tombExplosion",.7)},Q.npcDie=function(){switch(ji.random.int(0,3)){case 0:ji.get_sound().play("assets/sounds/npc_die_voice1",.7);break;case 1:ji.get_sound().play("assets/sounds/npc_die_voice2",.7);break;case 2:ji.get_sound().play("assets/sounds/npc_die_voice3",.7);break;case 3:ji.get_sound().play("assets/sounds/npc_die_voice4",.7)}ji.get_sound().play("assets/sounds/npc_die",.7)},Q.moneyRewardRecieved=function(){ji.get_sound().play("assets/sounds/GTC_MagicUp",.7)},Q.muteMusic=function(){null!=Q.musicSound&&Q.musicSound.pause()},Q.unmuteMusic=function(){null!=Q.musicSound&&Q.musicSound.resume()},Q.resumeMusic=function(){Q.unmuteMusic()},Q.pauseMusic=function(){Q.muteMusic()};var J=function(){K.call(this),z.onGameResizeSignal.add(i(this,this.onGameResize),this),J.THIS=this,this.onGameResize(),J.levels=[],J.levels[0]=new Z,J.levels[1]=new Z,J._fx=new K,J._fxUnderHero=new K,J._fxDead=new K,J._ladderGroup=new K,J.hero=new Mt,J.cameraTargetObject=new at,J.cameraTargetObject.width=2,J.cameraTargetObject.height=2,J.cameraTargetObject.anchor.set(.5,.5),J.cameraTargetObject.set_active(!1),J.cameraTargetObject.renderable=!1,ft.get().kill(),wt.get().kill(),xt.get().kill(),gt.get().kill(),ot.get().kill(),kt.get().kill(),Ft.get().kill(),nt.get().kill(),st.get().kill(),this.add(J.levels[0].bg),this.add(J.levels[1].bg),this.add(J.levels[0].gfx),this.add(J.levels[1].gfx),this.add(J.levels[0].enemies),this.add(J.levels[1].enemies),this.add(J.levels[0].layerSprite),this.add(J.levels[1].layerSprite),this.add(J.levels[0].blackArea),this.add(J.levels[1].blackArea),this.add(J.levels[0]),this.add(J.levels[1]),this.add(J._ladderGroup),this.add(J._fxUnderHero),this.add(J.hero),this.add(J.hero.skin),this.add(J.hero.magnetArea),this.add(J._fx),this.add(J._fxDead),this.add(J.cameraTargetObject)};s["com.drderico.towerd.game.Game"]=J,J.__name__=["com","drderico","towerd","game","Game"],J.startNewGame=function(){U.changeBgColor(),Y.cancelTween(J.onLadderTween),Y.cancelTween(J.cameraTween1),Y.cancelTween(J.cameraTween2),ji.get_camera().bounds=null,ji.get_camera().follow(J.cameraTargetObject,Phaser.Camera.FOLLOW_LOCKON,1,1),J.levelY=(ji.game.height-1*Rt.HEIGHT_BOTTOM-0*Y.screenOffsetY+(0*Y.screenOffsetY+1*Rt.HEIGHT_TOP))/2-16*Z.VISIBLE_LEVEL_HEIGHT/2|0,J.cameraTargetObject.y=J.levelY+160,J.cameraMaxY=0|J.cameraTargetObject.y,J.clearGroup(J._ladderGroup),J.clearGroup(J._fx),J.clearGroup(J._fxUnderHero),J.clearGroup(J._fxDead),J.levels[$.curLevelIdx].create_(_e.get_prevLevel(),0,J.levelY),J.levels[$.curLevelIdx].createNextStep(),J.levels[$.curLevelIdx].createNextStep(),J.levels[$.curLevelIdx].createNextStep(),J.levels[$.curLevelIdx].createNextStep(),J.levels[$.curLevelIdx].createNextStep(),J.levels[$.curLevelIdx].createNextStep(),J.hero.init(J.levels[$.curLevelIdx].x+16*J.levels[$.curLevelIdx].level.heroX,J.levelY+16*J.levels[$.curLevelIdx].level.getFloorY()-3,J.levels[$.curLevelIdx].level.heroFace),J.createNextLevel(),J.levels[$.curLevelIdx].show(),J.correctWorldBounds(),J.calcCameraXBounds(J.levels[$.curLevelIdx]),J.cameraTargetObject.x=J.minScrollX,ji.game.camera.focusOn(J.cameraTargetObject),et.active||Rt.showPauseBtn(),J.canFollowHeroX=!1,J.canFollowHeroY=!1},J.correctWorldBounds=function(){var t=Math.min(J.levels[$.prevLevelIdx].x,J.levels[$.curLevelIdx].x)-128,e=Math.max(J.levels[$.prevLevelIdx].x+16*J.levels[$.prevLevelIdx].level.W,J.levels[$.curLevelIdx].x+16*J.levels[$.curLevelIdx].level.W)+128;ji.game.physics.arcade.bounds.setTo(t,J.levelY,e-t,J.levels[$.prevLevelIdx].level.gfxHeight+J.levels[$.curLevelIdx].level.gfxHeight)},J.showLadder=function(t){null==t&&(t=!1),J.ladder.setPosition(J.levels[$.prevLevelIdx].x+16*J.levels[$.prevLevelIdx].level.ladder.x,J.levels[$.prevLevelIdx].y+16*(J.levels[$.prevLevelIdx].level.ladder.y-1)),J._ladderGroup.add(J.ladder),J.levels[$.curLevelIdx].triggers.add(J.ladder.trigger),J.ladder.show(t),et.active&&et.onLadderPositioned(J.ladder)},J.curGfxLevel=function(){return J.levels[$.curLevelIdx]},J.clearGroup=function(t){t.removeAll(!1,!0,!1)},J.addBonus=function(t){},J.removeBonus=function(t){},J.showBonusPickUpFx=function(t,e){},J.onHeroTouchedLadder=function(t){if(!j.gameOver&&J.hero.y>t.y&&(J.hero.climbOnLadder(t),!t.wasTouchedAlready)){if(J.canFollowHeroY=!1,t.wasTouchedAlready=!0,J.prevLadder=J.ladder,J.levels[$.prevLevelIdx].show(),J.levels[$.curLevelIdx].hide(),J.cameraMaxY=J.cameraMaxY-J.levels[$.curLevelIdx].level.gfxHeight,J.cameraMinY=J.cameraMaxY-J.levels[$.prevLevelIdx].level.gfxHeight,J.canFollowHeroX=!1,J.canFollowHeroX=!0,J.oldMinScrollX=J.minScrollX,J.oldMaxScrollX=J.maxScrollX,J.calcCameraXBounds(J.levels[$.prevLevelIdx]),J.levels[$.prevLevelIdx].level.isWide?(J.canFollowHeroX=!0,J.onLadderTween=as.tween(J.cameraTargetObject,{y:J.cameraMaxY},Mt.climbOnLadderDuration,null,null)):J.onLadderTween=as.tween(J.cameraTargetObject,{x:J.levels[$.prevLevelIdx].x+16*J.levels[$.prevLevelIdx].level.W/2,y:J.cameraMaxY},Mt.climbOnLadderDuration,null,null),J.oldMinScrollX!=J.minScrollX){J.cameraTweenObject1.x=J.oldMinScrollX;var e=J.minScrollX;J.cameraTween1=as.tween(J.cameraTweenObject1,{x:J.minScrollX},Mt.climbOnLadderDuration,{onUpdate:J.onCameraMinScrollXUpdate,onComplete:function(t){J.minScrollX=e}},J),J.minScrollX=J.oldMinScrollX}if(J.oldMaxScrollX!=J.maxScrollX){J.cameraTweenObject2.x=J.oldMaxScrollX;var i=J.maxScrollX;J.cameraTween2=as.tween(J.cameraTweenObject2,{x:J.maxScrollX},Mt.climbOnLadderDuration,{onUpdate:J.onCameraMaxScrollXUpdate,onComplete:function(t){J.maxScrollX=i}},J),J.maxScrollX=J.oldMaxScrollX}$.nextLevel()}},J.onCameraMinScrollXUpdate=function(t){J.minScrollX=Math.round(t.target.x)},J.onCameraMaxScrollXUpdate=function(t){J.maxScrollX=Math.round(t.target.x)},J.onPitAcidTriggerTouched=function(t){J.hero.onLadder||(Q.water_hurt(),$.hurtHero(0))},J.hideLadder=function(){J.prevLadder.hide()},J.prevGfxLevel=function(){return J.levels[$.prevLevelIdx]},J.calcCameraXBounds=function(t){16*t.level.W<ji.get_camera().width?J.maxScrollX=J.minScrollX=t.level.X+16*t.level.W/2|0:(J.minScrollX=t.level.X-64+ji.get_camera().width/2|0,J.maxScrollX=t.level.X+16*t.level.W+64-ji.get_camera().width/2|0)},J.onSpikesTriggerTouched=function(){$.hurtHero(3)},J.createNextLevel=function(t){_e.createLevel(),J.levels[$.prevLevelIdx].create_(_e.get_prevLevel(),0,J.levelY,!0),J.levelY-=J.levels[$.prevLevelIdx].level.gfxHeight,J.ladder=J.levels[$.prevLevelIdx].ladderGfx,J.correctWorldBounds()},J.onSawTriggerTouched=function(){$.hurtHero(5)},J.onSpikesInPitTriggerTouched=function(){$.hurtHero(2)},J.onPitWaterTriggerTouched=function(){J.hero.onLadder||(Q.water_hurt(),$.hurtHero(1))},J.onPitFireTriggerTouched=function(){$.hurtHero(12)},J.onClimbComplete=function(){J.canFollowHeroX=J.levels[$.curLevelIdx].level.isWide;var t=J.hero.body.x,e=J.minScrollX,i=J.maxScrollX,s=null!=e&&t<e?e:t;J.cameraTargetObject.x=null!=i&&s>i?i:s,1==J.levels[$.curLevelIdx].level.type?J.canFollowHeroY=!0:J.canFollowHeroY=!1,null==J.levels[$.curLevelIdx].level.goal&&J.showLadder(!0)},J.cleanGarbage=function(){J.levels[0].cleanGarbage(!0),J.levels[1].cleanGarbage(!0)},J.forceShowFireBeams=function(){for(var t=0,e=J.levels[$.curLevelIdx].enemies.children;t<e.length;){var i=e[t];++t,Bs.__instanceof(i,xe)&&Bs.__cast(i,xe).forceShow()}},J.changeBlackAreasBgColor=function(){J.levels[0].resetBlackArea(),J.levels[1].resetBlackArea()},J.__super__=K,J.prototype=e(K.prototype,{onGameResize:function(){J.GRID_X=(ji.game.width-768)/2|0},update:function(){if(J.levels[0].createNextStep(),J.levels[1].createNextStep(),!$.paused){if($.update(ji.game.time.elapsedMS/1e3),K.prototype.update.call(this),J.hero.alive?(ji.game.physics.arcade.collide(J.hero,J.levels[$.curLevelIdx].collisions,i(this,this.onHeroCollideWalls)),ji.game.physics.arcade.overlap(J.hero,J.levels[$.curLevelIdx].gfx,i(this,this.onTriggerOverlap)),ji.game.physics.arcade.overlap(J.hero,J.levels[$.curLevelIdx].triggers,i(this,this.onTriggerOverlap)),ji.game.physics.arcade.overlap(J.hero,J.levels[$.curLevelIdx].enemies,i(this,this.onTriggerOverlap)),ji.game.physics.arcade.overlap(J.hero.magnetArea,J.levels[$.curLevelIdx].gfx,i(this,this.onMagnetTriggerOverlap))):ji.game.physics.arcade.collide(J._fxDead,J.levels[$.curLevelIdx].collisions,i(this,this.onParticleCollide)),J.hero.onLadder&&(ji.game.physics.arcade.overlap(J.hero,J.levels[$.prevLevelIdx].gfx,i(this,this.onTriggerOverlap)),ji.game.physics.arcade.overlap(J.hero.magnetArea,J.levels[$.prevLevelIdx].gfx,i(this,this.onMagnetTriggerOverlap))),J.hero.updateAfterColliding(),J.canFollowHeroY){var t=J.hero.y,e=J.cameraMinY,s=J.cameraMaxY,n=null!=e&&t<e?e:t;J.cameraTargetObject.y=null!=s&&n>s?s:n}var o=J.hero.body.x,r=J.minScrollX,a=J.maxScrollX,l=null!=r&&o<r?r:o;J.cameraTargetObject.x=null!=a&&l>a?a:l}},onParticleCollide:function(t,e){t.body.touching.down&&(t.body.velocity.x*=.9,Math.abs(t.body.velocity.x)<2&&(t.body.velocity.set(0,0),t.body.gravity.set(0,0),t.body.enable=!1))},onTriggerOverlap:function(t,e){e.onTouched()},onMagnetTriggerOverlap:function(t,e){Bs.__instanceof(e,qt)?Bs.__cast(e,qt).touchedByMagnetArea():Bs.__instanceof(e,Jt)&&Bs.__cast(e,Jt).touchedByMagnetArea()},onHeroCollideWalls:function(t,e){e.isWall&&Math.floor(e.body.y)<Math.floor(J.hero.body.bottom)?J.hero.changeDir(e):e.isFloor&&Math.floor(e.body.y)>=Math.floor(J.hero.body.bottom)&&Math.floor(e.body.x)<=Math.floor(J.hero.body.right)&&Math.floor(e.body.right)>=Math.floor(J.hero.body.x)&&J.hero.onFloorTouch(e)},__class__:J});var $=function(){};s["com.drderico.towerd.game.GameManager"]=$,$.__name__=["com","drderico","towerd","game","GameManager"],$.create=function(){},$.prepareLevelParams=function(){$.stopAllAnimations(),$.curLevelIdx=-1,j.gameOver&&(j.heroLives.set_value(j.heroLivesMax.get_value()),j.score.set_value(0),j.level.set_value(0)),_e.curLevelNum=j.level.get_value(),_e.curLevelEnv=j.envSetting.get_value(),$.changeLevel(),_e.createLevel(!0,!j.gameOver),j.gameOver=!1,$.isGameOver=!1,$.isLevelRunning=!1,$.needToGameOver=!1,J.startNewGame(),Rt.scoreHud.updateText(!1),Rt.levelHud.updateText(),Rt.coinsHud.updateText(!1),Rt.gemsHud.updateText(!1),Rt.livesHud.updateLives(!0)},$.stopAllAnimations=function(){U.gameTweenManager.removeAll(),U.gameTimeManager.removeAll(),ji.get_camera().fx.clear()},$.startNewGame=function(){Fi.add(U.sceneManager).alpha=1,$.paused=!1,j.helloPlayerWindow&&et.create(),$.wasHighScoreShown=!1,Ge.getInstance().kill(),Mt.canMove=!1,U.canPressEscape=!0,$.prepareLevelParams(),q.init(),j.helloPlayerWindow?(Mt.canMove=!1,J.levels[$.curLevelIdx].chest.disableBody(),J.levels[$.curLevelIdx].chest.visible=!1,Y.delay(.3,function(t){$.fadeOutBeforeNewGame(),Ti.show(Y.tongue.get("$WELCOME_MESS"),U.sceneManager,$.onWindowHelloPlayerHided)},null,Rt),j.helloPlayerWindow=!1):Y.delay(.3,function(t){$.fadeOutBeforeNewGame(),Rt.showTapText()},null,Rt)},$.fadeOutBeforeNewGame=function(){Fi.remove(U.sceneManager),ji.get_camera().flash(0,500,!0)},$.onWindowHelloPlayerHided=function(){$.startLevel(),et.nextState()},$.startLevel=function(){$.isLevelRunning=!0,Rt.hideTapText(),Mt.canMove=!1,Y.delay(.1,$._startLevel,null,$)},$._startLevel=function(t){Mt.canMove=!0},$.gameOver=function(){$.isGameOver=!0,$.onEndGame(),Q.stopMusic(),Q.gameover(),Y.delay(2.5,$._gameOver,null,$)},$._gameOver=function(t){$.stopAllAnimations(),U.sceneManager.showTitleScreen()},$.addScore=function(t){var e=j.score;e.set_value(e.get_value()+t),Rt.scoreHud.updateText(),!et.active&&!$.wasHighScoreShown&&0!=j.bestScore.get_value()&&j.score.get_value()>j.bestScore.get_value()&&($.wasHighScoreShown=!0,Ge.getInstance().show(Y.tongue.get("$NEW_HIGH_SCORE"),Rt.THIS,1)),j.score.get_value()>j.bestScore.get_value()&&j.bestScore.set_value(j.score.get_value())},$.update=function(t){Rt.isWaitingForTap&&Y.isAnyKeyJustPressed()&&(Y.stopClickProp(),$.startLevel()),$.isGameOver||!$.isLevelRunning||$.paused||$.needToGameOver&&$.gameOver()},$.setNeedToGameOver=function(){j.gameOver=!0,$.needToGameOver=!0,-1==j.deathLevels.indexOf(j.level.get_value())&&j.deathLevels.push(j.level.get_value()),ji.get_camera().shake(.005,200,!0),ji.get_camera().flash(16777215,300)},$.nextLevel=function(){var t=j.level,e=t.get_value();t.set_value(e+1),Rt.levelHud.updateText(),j.level.get_value()>j.bestLevel.get_value()&&j.bestLevel.set_value(j.level.get_value()),$.addScore(100),$.changeLevel(),j.gameOver=!1},$.onBonusPickedUp=function(t){switch(t._type){case 0:Q.powerup_pickup(),q.activateGemMagnet(),j.itemMagnetFirstTouch&&(Si.show(0,U.sceneManager,null),j.itemMagnetFirstTouch=!1),M.unlock("CgkI_f7-8JsKEAIQBA");break;case 1:Q.powerup_pickup(),q.activateShield(),j.itemShieldFirstTouch&&(Si.show(1,U.sceneManager,null),j.itemShieldFirstTouch=!1),M.unlock("CgkI_f7-8JsKEAIQAw");break;case 5:Q.chest(),J.showLadder();break;case 6:24==j.ach_kitties.get_value()?M.unlock("CgkI_f7-8JsKEAIQFw"):49==j.ach_kitties.get_value()?M.unlock("CgkI_f7-8JsKEAIQGA"):74==j.ach_kitties.get_value()?M.unlock("CgkI_f7-8JsKEAIQGQ"):99==j.ach_kitties.get_value()&&M.unlock("CgkI_f7-8JsKEAIQGg");var e=j.ach_kitties,i=e.get_value();e.set_value(i+1),j.itemArtefactFirstTouch&&(Si.show(6,U.sceneManager,null),j.itemArtefactFirstTouch=!1);break;case 8:j.itemTombFirstTouch&&(Si.show(8,U.sceneManager,null),j.itemTombFirstTouch=!1),M.unlock("CgkI_f7-8JsKEAIQHA")}},$.onEndGame=function(){var t=j.coins;t.set_value(t.get_value()+ri.coinsToAdd),ri.coinsToAdd=0,j.save()},$.hurtHero=function(t){null==t&&(t=3),J.hero.onLadder||(J.hero.unhurtable||q._items[1]||($.addHealth(-1),_i.get().reset_(J.hero.x,J.hero.y+10),5==t||7==t?(nt.get().show(J.hero.x+J.hero.width/2,J.hero.y+J.hero.height/2),ji.get_camera().flash(8388608,200,!0,.5),ji.get_camera().shake(.005,100,!0,Phaser.Camera.SHAKE_HORIZONTAL)):2==t||3==t?(nt.get().show(J.hero.x+J.hero.width/2,J.hero.y+J.hero.height),ji.get_camera().flash(16777215,200,!0,.5),ji.get_camera().shake(.005,100,!0,Phaser.Camera.SHAKE_VERTICAL)):0==t?ji.get_camera().flash(3394560,200,!0,.5):1==t?0==j.envSetting.get_value()?ji.get_camera().flash(16725760,200,!0,1):ji.get_camera().flash(39423,200,!0,.5):12!=t&&13!=t||ji.get_camera().flash(16725760,200,!0,1),J.hero.onHurt()),0==j.heroLives.get_value()&&(J.hero.die(),5==t||7==t?M.unlock("CgkI_f7-8JsKEAIQFQ"):2==t||3==t?M.unlock("CgkI_f7-8JsKEAIQEQ"):0==t?M.unlock("CgkI_f7-8JsKEAIQEg"):1==t?M.unlock(0==j.envSetting.get_value()?"CgkI_f7-8JsKEAIQFA":"CgkI_f7-8JsKEAIQEw"):12!=t&&13!=t||M.unlock("CgkI_f7-8JsKEAIQHQ")),2!=t&&0!=t&&1!=t&&12!=t||(0==t?st.get().show(J.hero.body.center.x,J.hero.body.bottom):1==t&&(0==j.envSetting.get_value()?Ft.get().show(J.hero.body.center.x,J.hero.body.bottom):kt.get().show(J.hero.body.center.x,J.hero.body.bottom)),J.hero.bounceUp()))},$.addCoin=function(t){null==t&&(t=!0);var e=j.coins,i=e.get_value();e.set_value(i+1),t&&Rt.coinsHud.updateText()},$.addGem=function(t){null==t&&(t=!1);var e=j.gems,i=e.get_value();e.set_value(i+1),$.addScore(25),t&&Rt.gemsHud.updateText()},$.addHealth=function(t,e){null==e&&(e=!0),null==t&&(t=1);var i=j.heroLives;i.set_value(i.get_value()+t),e&&Rt.livesHud.updateLives()},$.cleanGarbage=function(){st.cleanGarbage(),Ft.cleanGarbage(),kt.cleanGarbage(),wt.cleanGarbage(),nt.cleanGarbage(),gt.cleanGarbage(),pt.cleanGarbage()},$.changeLevel=function(){$.curLevelIdx++,$.curLevelIdx=$.curLevelIdx%2,$.prevLevelIdx=1-$.curLevelIdx,j.level.get_value()>0&&(j.level.get_value()%25+1==25&&(j.envSetting.set_value(_e.curLevelEnv),J.changeBlackAreasBgColor(),Q.game(),$.cleanGarbage()),25==j.level.get_value()?M.unlock("CgkI_f7-8JsKEAIQCQ"):50==j.level.get_value()?M.unlock("CgkI_f7-8JsKEAIQCg"):75==j.level.get_value()?M.unlock("CgkI_f7-8JsKEAIQCw"):100==j.level.get_value()&&M.unlock("CgkI_f7-8JsKEAIQDA"))},$.prototype={__class__:$};var q=function(){};s["com.drderico.towerd.game.ItemManager"]=q,q.__name__=["com","drderico","towerd","game","ItemManager"],q.create=function(){q._timers=[],q._items=[],q._timersValue=[];for(var t=0;t<2;){var e=t++;q._timers[e]=null,q._items[e]=!1,q._timersValue[e]=0}},q.activateGemMagnet=function(){q._timersValue[0]=q.getItemDuration(j.magnetLevel.get_value())+1,Y.cancelTween(q._timers[0]),q._items[0]=!0,J.hero.activateGemMagnet(),q._onMagnetTimerTick()},q._onMagnetTimerTick=function(t){0==--q._timersValue[0]?q._deactivateGemMagnet():(Rt.itemsHud.updateTimer(0,q._timersValue[0]),q._timers[0]=Y.delay(1,q._onMagnetTimerTick,null,q),q.isItemsPaused&&q._timers[0].pause())},q._deactivateGemMagnet=function(t){Y.cancelTween(q._timers[0]),q._timers[0]=null,q._items[0]=!1,J.hero.deactivateGemMagnet(),Rt.itemsHud.deactivateItem(0)},q.activateShield=function(){q._timersValue[1]=q.getItemDuration(j.invulnerabilityLevel.get_value())+1,Y.cancelTween(q._timers[1]),q._items[1]=!0,J.hero.activateInvulnerability(),q._onShieldTimerTick()},q._onShieldTimerTick=function(t){0==--q._timersValue[1]?q._deactivateShield():(Rt.itemsHud.updateTimer(1,q._timersValue[1]),q._timers[1]=Y.delay(1,q._onShieldTimerTick,null,q),q.isItemsPaused&&q._timers[1].pause())},q._deactivateShield=function(t){Y.cancelTween(q._timers[1]),q._timers[1]=null,q._items[1]=!1,J.hero.deactivateInvulnerability(),Rt.itemsHud.deactivateItem(1)},q.isMagnetActive=function(){return q._items[0]},q.isShieldActive=function(){return q._items[1]},q.getNewItemType=function(t){null==t&&(t=-1),6==q.prevItemId&&(q.prevItemId=-1),ce.itemId=q.prevItemId;for(var e=!1;ce.itemId==q.prevItemId||ce.itemId==t||e;)e=!1,ce.itemId=ji.random.getObject_Int(q.COLLECTABLE_ITEMS),q._items[1]&&1==ce.itemId&&(e=!0),q._items[0]&&0==ce.itemId&&(e=!0);return q.prevItemId=ce.itemId,ce.itemId},q.getItemDuration=function(t){return 10+2*t},q.getItemPrice=function(t){return 50+25*t},q.pauseItems=function(){q._items[0]&&null!=q._timers[0]&&q._timers[0].isRunning&&q._timers[0].pause(),q._items[1]&&null!=q._timers[1]&&q._timers[1].isRunning&&q._timers[1].pause(),q.isItemsPaused=!0},q.unpauseItems=function(){q._items[0]&&null!=q._timers[0]&&q._timers[0].resume(),q._items[1]&&null!=q._timers[1]&&q._timers[1].resume(),q.isItemsPaused=!1},q.init=function(){Y.cancelTween(q._timers[1]),Y.cancelTween(q._timers[0]),q._items[1]=!1,q._items[0]=!1,q.isItemsPaused=!1,q._timers[1]=null,q._timers[0]=null};var Z=function(){this.envValue=0,this.step=0,K.call(this),this.gridMapArray=[],null==Z.gridMapArrayForWalls&&(Z.gridMapArrayForWalls=[]),this.gridMap=new rs(null,16,16,1,1),this.gridMapGroup=new K,this.collisions=new K,this.gfx=new K,this.enemies=new K,this.triggers=new K,this.collisions.renderable=!1,this.triggers.renderable=!1,this.gridMapGroup.inputEnableChildren=!1;this.mapLayer=this.gridMap.create("0",56,68,16,16,this.gridMapGroup),this.mapLayer.resize(896,1088),this.gridMap.fill(0,0,0,56,68,this.mapLayer),this.mapLayer.renderSettings.enableScrollDelta=!1,this.mapLayer.fixedToCamera=!1,this.layerTexure=new Phaser.RenderTexture(ji.game,this.gridMap.widthInPixels,this.gridMap.heightInPixels),this.bg=new De,this.blackArea=ii.get(ji.get_width(),.75*ji.get_height()|0),this.layerSprite=new Phaser.Sprite(ji.game,0,0,this.layerTexure),this.layerSprite.exists=!1,this.layerSprite.visible=!0,this.layerSprite.x=0*this.x-64|0,this.layerSprite.y=0*this.y-64|0,this.layerSprite.scale.set(1,1),this.add(this.collisions),this.add(this.triggers),z.onGameResizeSignal.add(i(this,this.onGameResize),this)};s["com.drderico.towerd.game.LevelGroup"]=Z,Z.__name__=["com","drderico","towerd","game","LevelGroup"],Z.__super__=K,Z.prototype=e(K.prototype,{onGameResize:function(){this.blackArea.changeSize(ji.get_width(),.75*ji.get_height()|0)},create_:function(t,e,i,s){null==s&&(s=!1),this.bg.visible=!1,this.gfx.visible=!1,this.enemies.visible=!1,this.layerSprite.visible=!1,this.cleanGarbage(),this.level=t,this.envValue=this.level.myEnvValue,Z.VISIBLE_LEVEL_WIDTH=this.level.W+8,Z.VISIBLE_LEVEL_HEIGHT=this.level.H+8,this.gridMapArray.length>Z.VISIBLE_LEVEL_HEIGHT&&this.gridMapArray.splice(Z.VISIBLE_LEVEL_HEIGHT,1e3),Z.gridMapArrayForWalls.length>Z.VISIBLE_LEVEL_HEIGHT&&Z.gridMapArrayForWalls.splice(Z.VISIBLE_LEVEL_HEIGHT,1e3);for(var n=0,o=Z.VISIBLE_LEVEL_HEIGHT;n<o;){var r=n++;null==this.gridMapArray[r]?this.gridMapArray[r]=[]:this.gridMapArray[r].length=0,null==Z.gridMapArrayForWalls[r]?Z.gridMapArrayForWalls[r]=[]:Z.gridMapArrayForWalls[r].length=0;for(var a=0,l=Z.VISIBLE_LEVEL_WIDTH;a<l;){var h=a++;this.gridMapArray[r][h]=0,Z.gridMapArrayForWalls[r][h]=0}}this.x=e+this.level.X,this.y=i+(s?-this.level.gfxHeight:0),this.createBounds();for(var c=0,_=this.level.floorParts;c<_.length;){var u=_[c];++c,this.createCollisionBlock(u)}for(var d=0,p=this.level.platforms;d<p.length;){var g=p[d];++d,this.createCollisionBlock(g)}for(var f=0,m=this.level.collisions;f<m.length;){var v=m[f];++f,this.createCollisionBlock(v)}for(var y=0,x=this.level.ceilParts;y<x.length;){var w=x[y];++y;var b=Me.get(0*this.x+16*w.x,0*this.y+16*w.y,16*w.width,16*w.height);b.isFloor=!0,this.collisions.add(b)}this.level.hasLiquid=!1;for(var T=0,S=this.level.ceilPits;T<S.length;){var I=S[T];++T,this.placeCeilPit(I)}this.ladderGfx=ui.get(this.level.ladder.height);var k=$e.get();k.init(this.ladderGfx.x,this.ladderGfx.y,this.ladderGfx.width,this.ladderGfx.height,this.ladderGfx),this.ladderGfx.trigger=k,k.deactivate(),this.ladderGfx.visible=!1;for(var F=0,P=this.level.pits;F<P.length;){var C=P[F];++F,this.placePit(C)}if(this.placeChains(),this.placeWebs(),this.bg.change(this.level.W,this.level.H,this.envValue),this.bg.position.set(this.x,this.y),this.gfx.position.set(this.x,this.y),this.enemies.position.set(this.x,this.y),this.layerSprite.position.set(this.x-64|0,this.y-64|0),this.resetBlackArea(),this.blackArea.alpha=0,this.blackArea.visible=!1,null!=this.level.goal&&(this.chest=jt.get(0*this.x+1*this.level.goal.x,0*this.y+Math.round(1*this.level.goal.y)),this.gfx.add(this.chest)),!et.active){for(var E=0,B=this.level.gems;E<B.length;){var L=B[E];++E;var A=qt.get(0*this.x+1*L.x,0*this.y+1*L.y);this.gfx.add(A)}if(null!=this.level.goal&&0==this.level.gems.length&&ji.random.float(0,100)<5)for(var O=0,M=(this.level.W/3|0)-1;O<M;){var G=O++,H=qt.get(0*this.x+20+50*G*1,0*this.y+ji.random.float(150,200));this.gfx.add(H)}for(var D=0,N=this.level.coins;D<N.length;){var R=N[D];++D;var W=Jt.get(0*this.x+1*R.x,0*this.y+1*R.y);this.gfx.add(W)}if(null!=this.level.item){var U=null;switch(this.level.item.itemType){case 0:U=te.get(0*this.x+16*this.level.item.x,0*this.y+16*this.level.item.y,16*this.level.item.width),Bs.__cast(U,te).itemFx.show(U.x+U.width/2,U.y+U.height/2,this.gfx);break;case 1:U=re.get(0*this.x+16*this.level.item.x,0*this.y+16*this.level.item.y,16*this.level.item.width),Bs.__cast(U,re).itemFx.show(U.x+U.width/2,U.y+U.height/2,this.gfx);break;case 2:U=ne.get(0*this.x+16*this.level.item.x,0*this.y+16*this.level.item.y,16*this.level.item.width),Bs.__cast(U,ne).itemFx.show(U.x+U.width/2,U.y+U.height/2,this.gfx);break;case 6:U=le.get(0*this.x+16*this.level.item.x,0*this.y+16*this.level.item.y,16*this.level.item.width);break;case 8:U=ie.get(0*this.x+16*this.level.item.x,0*this.y+16*this.level.item.y,16*this.level.item.width,this.envValue)}null!=U&&(8==this.level.item.itemType?this.enemies.addAt(U,0):this.gfx.add(U),6==this.level.item.itemType&&this.gfx.add(Bs.__cast(U,le).head))}}this.needToRenderLayer=!0,this.step=0},placeWebs:function(){if(3!=this.envValue){var t=null;ji.random.float(0,100)<50&&((t=xi.get()).reset_(0*this.x+Math.abs(t.width),0*this.y+64),t.set_flipX(!0),this.gfx.add(t)),ji.random.float(0,100)<50&&((t=xi.get()).reset_(0*this.x+Math.round(16*this.level.W)-Math.floor(t.width),0*this.y+64),t.set_flipX(!1),this.gfx.add(t));for(var e=0,i=this.level.ceilPits;e<i.length;){var s=i[e];++e,6!=s.type&&s.height>=2&&(ji.random.float(0,100)<50&&((t=xi.get()).reset_(0*this.x+Math.abs(t.width)+Math.round(16*s.x),0*this.y+Math.floor(16-s.height)),t.set_flipX(!0),this.gfx.add(t)),s.width>3&&ji.random.float(0,100)<50&&((t=xi.get()).reset_(0*this.x+Math.round(16*(s.x+s.width))-Math.floor(t.width),0*this.y+Math.floor(16-s.height)),t.set_flipX(!1),this.gfx.add(t)))}}},placeCeilPit:function(t){if(6==t.type){var e=Me.get(0*this.x+16*t.x,0*this.y+16*(t.y+1),16*t.width,16*t.height);e.isFloor=!0,this.collisions.add(e)}else{var i=Me.get(0*this.x+16*t.x,0*this.y+16*(t.y-t.height-1),16*t.width,16);i.isFloor=!0,this.collisions.add(i)}},placeChains:function(){for(var t=0,e=this.level.ceilParts;t<e.length;){var i=e[t];if(++t,ji.random.float(0,100)<80){var s=ni.get(this.envValue);s.reset_(0*this.x+16*ji.random.int(i.x+1,i.x+i.width-1),0*this.y+16*(i.y+1)),this.gfx.addAt(s,0)}}for(var n=0,o=this.level.ceilPits;n<o.length;){var r=o[n];if(++n,6==r.type&&ji.random.float(0,100)<80){var a=ni.get(this.envValue);a.reset_(0*this.x+16*ji.random.int(r.x+1,r.x+r.width-1),0*this.y+16*(r.y+r.height+1)),this.gfx.addAt(a,0)}}},createBounds:function(){var t=Me.get(0*this.x-16,0*this.y-16,16,16*(this.level.H+1));t.isWall=!0,this.collisions.add(t),(t=Me.get(0*this.x+16*this.level.W,0*this.y-16,16,16*(this.level.H+1))).isWall=!0,this.collisions.add(t),t=Me.get(0*this.x-16,0*this.y-16,16*(this.level.W+2),16),this.collisions.add(t),(t=Me.get(0*this.x-16,0*this.y+16*this.level.H,16*(this.level.W+2),16)).isFloor=!0,this.collisions.add(t)},hide:function(){this.blackArea.show(),this.level.hasLiquid&&Q.water_env_stop()},placePit:function(t){if(pi.isPit(t)){var e=Me.get(0*this.x+16*(t.x-1),0*this.y+16*(t.y+1),16,16*t.height);this.collisions.add(e),e=Me.get(0*this.x+16*(t.x+t.width),0*this.y+16*(t.y+1),16,16*t.height),this.collisions.add(e),e=Me.get(0*this.x+16*t.x,0*this.y+16*(t.y+t.height),16*t.width,16),this.collisions.add(e);var i=$e.get();if(0==t.type||1==t.type||12==t.type){this.level.hasLiquid=12!=t.type,1==t.type?i.init(0*this.x+16*t.x,0*this.y+16*(t.y+1),16*t.width,16*(t.height-1),qe.getInstance(),4):0==t.type?i.init(0*this.x+16*t.x,0*this.y+16*(t.y+1),16*t.width,16*(t.height-1),Le.getInstance(),4):12==t.type&&i.init(0*this.x+16*t.x,0*this.y+16*(t.y+t.height-1),16*t.width,20,He.getInstance(),4);for(var s=ji.random.float(0,100)<50,n=0*this.y+1*(16*t.y+(12==t.type?16*t.height-36:11)),o=0*this.x-8,r=null,a=t.x,l=t.x+t.width+1;a<l;){var h=a++;switch(t.type){case 0:r=ti.get(s);break;case 1:r=vi.get(s,this.envValue);break;case 12:r=li.get()}r.reset_(o+16*h-2,n),this.gfx.add(r)}}else i.init(0*this.x+16*t.x,0*this.y+16*(t.y+t.height-1),16*t.width,16,je.getInstance(),4);this.triggers.add(i)}else switch(t.type){case 3:var c=$e.get();c.init(0*this.x+1*(16*t.x+6),0*this.y+16*t.y-4,1*(16*t.width-12),4,Qe.getInstance(),4),this.triggers.add(c);break;case 5:var _=fi.get();_.reset_(0*this.x+16*t.x,0*this.y+16*t.y),this.gfx.add(_);var u=$e.get();u.init(_.x+10-_.offsetX,_.y+10-_.offsetY,_.width-20,_.height-20,Ke.getInstance(),4),u.linkedObject=_,this.triggers.add(u);break;case 6:var d=Me.get(0*this.x+16*t.x,0*this.y+16*(t.y-t.height),16*t.width,16*t.height);d.isWall=!0,d.isFloor=!0,this.collisions.add(d);break;case 8:Z.npcType=ji.random.int(0,3,Z.movingNpcExcludedArray),Z.movingNpcExcludedArray[0]=Z.npcType;var p=null;switch(Z.npcType){case 0:(p=Ie.get()).place(0*this.x+16*t.x,0*this.y+16*t.y,16*t.width);break;case 1:(p=Fe.get()).place(0*this.x+16*t.x,0*this.y+16*t.y,16*t.width);break;case 2:(p=Ce.get()).place(0*this.x+16*t.x,0*this.y+1*(16*t.y-8),16*t.width);break;case 3:(p=Be.get()).place(0*this.x+16*t.x,0*this.y+16*t.y,16*t.width)}null!=p&&(this.enemies.add(p),null!=p.healthBar&&this.enemies.add(p.healthBar));break;case 9:var g=Te.get();g.place(0*this.x+16*t.x,0*this.y+16*(t.y+.5),16*t.width),this.enemies.add(g);break;case 10:var f=ve.get(this.envValue);f.place(0*this.x+16*t.x,0*this.y+16*t.y,16*t.width),this.enemies.add(f),this.enemies.add(f.cannon);break;case 13:var m=xe.get();m.place(0*this.x+16*t.x,0*this.y+16*(t.y+.5),16*t.width),this.enemies.add(m)}},destroy:function(t,e){},show:function(){this.blackArea.hide(!1),this.level.hasLiquid&&Q.water_env()},cleanGarbage:function(t){null==t&&(t=!1),J.clearGroup(this.collisions),this.gfx.callAll("kill",null),J.clearGroup(this.gfx),J.clearGroup(this.triggers),this.enemies.callAll("kill",null),J.clearGroup(this.enemies),t&&null!=this.ladderGfx&&this.ladderGfx.kill()},drawOnGrid:function(t,e,i,s,n){null==n&&(n=0);for(var o=e,r=e+s;o<r;)for(var a=o++,l=t,h=t+i;l<h;){var c=l++;this.gridMapArray[a][c]=n}},createTileMapGfx:function(){if(0==this.step){for(var t=0,e=Z.VISIBLE_LEVEL_HEIGHT;t<e;)for(var i=t++,s=0,n=Z.VISIBLE_LEVEL_WIDTH;s<n;){var o=s++;Z.gridMapArrayForWalls[i][o]=-1,this.gridMapArray[i][o]=1}for(var r=0,a=this.level.walls;r<a.length;){var l=a[r];++r;for(var h=4+(0|l.x),c=0|l.width,_=4+(0|l.y),u=_,d=_+(0|l.height);u<d;)for(var p=u++,g=h,f=h+c;g<f;){var m=g++;Z.gridMapArrayForWalls[p][m]=1}}for(var v=0,y=0,x=this.level.H;y<x;)for(var w=y++,b=0,T=this.level.W;b<T;){var S=b++;switch(v=this.level.grid[w][S]){case 0:v=0;break;case 1:break;case 2:v=2;break;case 3:v=44;break;case 4:v=43}Z.gridMapArrayForWalls[w+4][S+4]=v}this.step++}else if(1==this.step){for(var I=0,k=0,F=0,P=0,C=0,E=0,B=0,L=0,A=1,O=Z.VISIBLE_LEVEL_HEIGHT-1;A<O;)for(var M=A++,G=1,H=Z.VISIBLE_LEVEL_WIDTH-1;G<H;){var N=G++;1==Z.gridMapArrayForWalls[M][N]&&(I=Z.gridMapArrayForWalls[M-1][N-1],k=Z.gridMapArrayForWalls[M-1][N],F=Z.gridMapArrayForWalls[M-1][N+1],P=Z.gridMapArrayForWalls[M][N-1],C=Z.gridMapArrayForWalls[M][N+1],E=Z.gridMapArrayForWalls[M+1][N-1],B=Z.gridMapArrayForWalls[M+1][N],L=Z.gridMapArrayForWalls[M+1][N+1],-1==I&&-1==k&&-1==P&&1==C&&1==B&&-1!=L?this.gridMapArray[M][N]=ji.random.float(0,100)<50?17:21:-1==k&&1==P&&1==C&&0==B?this.gridMapArray[M][N]=ji.random.int(6,8):-1!=I&&1==k&&-1==F&&-1!=P&&1==C&&0==E&&0==B&&0==L?this.gridMapArray[M][N]=25:-1==I&&1==k&&-1!=F&&1==P&&-1!=C&&0==E&&0==B&&0==L?this.gridMapArray[M][N]=26:-1==I&&-1==k&&-1==F&&1==P&&-1==C&&-1!=E&&1==B?this.gridMapArray[M][N]=ji.random.float(0,100)<50?18:22:1==k&&-1==P&&-1!=C&&1==B?this.gridMapArray[M][N]=ji.random.int(9,11):1==k&&-1!=P&&-1==C&&1==B?this.gridMapArray[M][N]=ji.random.int(12,14):-1!=k&&-1!=F&&1==P&&1!=C&&1==B&&-1!=L?this.gridMapArray[M][N]=24:-1!=I&&-1!=k&&1!=P&&1==C&&-1!=E&&1==B&&-1==L?this.gridMapArray[M][N]=23:-1==B&&1==P&&1==C&&-1!=k?this.gridMapArray[M][N]=ji.random.int(3,5):1==k&&-1!=F&&-1==P&&1==C&&-1==B?this.gridMapArray[M][N]=ji.random.float(0,100)<50?15:19:-1!=I&&1==k&&1==P&&-1==C&&-1==B&&(this.gridMapArray[M][N]=ji.random.float(0,100)<50?16:20))}this.step++}else if(2==this.step){for(var R=0,W=0,U=Z.VISIBLE_LEVEL_HEIGHT;W<U;)for(var X=W++,Y=0,V=Z.VISIBLE_LEVEL_WIDTH;Y<V;){var K=Y++;if(1==(R=Z.gridMapArrayForWalls[X][K])){this.gridMapArray[X][K-1]=ji.random.int(31,32),ji.random.float(0,100)<70&&(this.gridMapArray[X][K-2]=ji.random.int(39,39));break}}for(var z=0,j=Z.VISIBLE_LEVEL_HEIGHT;z<j;)for(var Q=z++,J=0,$=Z.VISIBLE_LEVEL_WIDTH;J<$;){var q=J++,tt=Z.VISIBLE_LEVEL_WIDTH-1-q;if(1==(R=Z.gridMapArrayForWalls[Q][tt])){this.gridMapArray[Q][tt+1]=ji.random.int(33,33),ji.random.float(0,100)<70&&(this.gridMapArray[Q][tt+2]=ji.random.int(41,41));break}}for(var et=0,it=Z.VISIBLE_LEVEL_WIDTH;et<it;)for(var st=et++,nt=0,ot=Z.VISIBLE_LEVEL_HEIGHT;nt<ot;){var rt=nt++;if(1==(R=Z.gridMapArrayForWalls[rt][st])){this.gridMapArray[rt-1][st]=ji.random.int(29,30),ji.random.float(0,100)<70&&(this.gridMapArray[rt-2][st]=ji.random.int(37,37));break}}for(var at=0,lt=Z.VISIBLE_LEVEL_WIDTH;at<lt;)for(var ht=at++,ct=0,_t=Z.VISIBLE_LEVEL_HEIGHT;ct<_t;){var ut=ct++,dt=Z.VISIBLE_LEVEL_HEIGHT-1-ut;if(1==(R=Z.gridMapArrayForWalls[dt][ht])){this.gridMapArray[dt+1][ht]=ji.random.int(27,27),ji.random.float(0,100)<70&&(this.gridMapArray[dt+2][ht]=ji.random.int(35,35));break}}for(var pt=0,gt=Z.VISIBLE_LEVEL_HEIGHT;pt<gt;)for(var ft=pt++,mt=0,vt=Z.VISIBLE_LEVEL_WIDTH;mt<vt;){var yt=mt++;1!=(R=Z.gridMapArrayForWalls[ft][yt])&&-1!=R&&(0==R&&(R=0),this.gridMapArray[ft][yt]=R)}this.step++}else if(3==this.step){for(var xt=0,wt=this.level.platforms;xt<wt.length;){var bt=wt[xt];++xt;var Tt=!0,St=!0;Tt=0!=bt.x&&1!=this.level.grid[bt.y][bt.x-1],St=bt.x+bt.width!=this.level.W&&1!=this.level.grid[bt.y][bt.x+bt.width];for(var It=bt.x+4,kt=bt.x+4+bt.width;It<kt;){var Ft=It++;this.gridMapArray[bt.y+4][Ft]=ji.random.int(3,5),this.gridMapArray[bt.y+4+1][Ft]=ji.random.int(6,8)}Tt||(0==bt.x||1==this.level.grid[bt.y-1][bt.x-1]?this.gridMapArray[bt.y+4][bt.x+4-1]=ji.random.float(0,100)<50?15:19:this.gridMapArray[bt.y+4][bt.x+4-1]=ji.random.int(3,5),0==bt.x||1==this.level.grid[bt.y+2][bt.x-1]?this.gridMapArray[bt.y+4+1][bt.x+4-1]=ji.random.float(0,100)<50?17:21:this.gridMapArray[bt.y+4+1][bt.x+4-1]=ji.random.int(6,8)),St||(bt.x+bt.width==this.level.W||1==this.level.grid[bt.y-1][bt.x+bt.width]?this.gridMapArray[bt.y+4][bt.x+bt.width+4]=ji.random.float(0,100)<50?16:20:this.gridMapArray[bt.y+4][bt.x+bt.width+4]=ji.random.int(3,5),bt.x+bt.width==this.level.W||1==this.level.grid[bt.y+2][bt.x+bt.width]?this.gridMapArray[bt.y+4+1][bt.x+bt.width+4]=ji.random.float(0,100)<50?18:22:this.gridMapArray[bt.y+4+1][bt.x+bt.width+4]=ji.random.int(6,8)),Tt&&(this.gridMapArray[bt.y+4][bt.x+4]=23,this.gridMapArray[bt.y+4+1][bt.x+4]=25),St&&(this.gridMapArray[bt.y+4][bt.x+4+bt.width-1]=24,this.gridMapArray[bt.y+4+1][bt.x+4+bt.width-1]=26)}this.step++}else if(4==this.step){this.gridMap.addTilesetImage("tileset",D.MAP_TEXTURES[this.envValue],16,16);for(var Pt=this.gridMapArray[0].length,Ct=this.gridMapArray.length,Et=0,Bt=0|this.gridMap.height;Et<Bt;)for(var Lt=Et++,At=0,Ot=0|this.gridMap.width;At<Ot;){var Mt=At++;this.gridMap.layers[0].data[Lt][Mt].index=Mt>=Pt||Lt>=Ct?-1:this.gridMapArray[Lt][Mt]}this.gridMap.layers[0].dirty=!0,this.step++}else 5==this.step?(this.layerTexure.renderRawXY(this.mapLayer,0,0,!0),this.step++):6==this.step&&(this.bg.visible=!0,this.gfx.visible=!0,this.enemies.visible=!0,this.layerSprite.visible=!0,this.needToRenderLayer=!1)},createNextStep:function(){this.needToRenderLayer&&this.createTileMapGfx()},createCollisionBlock:function(t){var e=Me.get(0*this.x+16*t.x,0*this.y+16*t.y,16*t.width,16*t.height,t.allowCollisions);e.isFloor=t.isFloor,e.isWall=t.isWall,this.collisions.add(e)},resetBlackArea:function(){this.blackArea.reset_(Y.screenOffsetX,this.y-64)},__class__:Z});var tt=function(){};s["com.drderico.towerd.game.interfaces.ITriggerListener"]=tt,tt.__name__=["com","drderico","towerd","game","interfaces","ITriggerListener"],tt.prototype={__class__:tt};var et=function(){};s["com.drderico.towerd.game.Tutorial"]=et,et.__name__=["com","drderico","towerd","game","Tutorial"],et.__interfaces__=[tt],et.create=function(){et.THIS=new et,et.txt=Y.getText(D.DEFAULT_TEXT_SIZE),et.state=0,et.active=!0,Rt.hidePauseBtn(),et.tutor1=new lt,et.tutor1.set_active(!1),E.loadGraphicFromTexture(et.tutor1,Y.t,"kiziTutor1.png"),Y.setScale(et.tutor1),et.tutor2=new lt,et.tutor2.set_moves(!1),E.loadGraphicFromTexture(et.tutor2,Y.t,"kiziTutor2_src0001.png"),et.tutor2.animation.addByNames("1",["kiziTutor2_src0001.png","kiziTutor2_src0002.png"],4),Y.setScale(et.tutor2)},et.updateText=function(t){et.txt.text=t,Y.setScale(et.txt),Y.setPosUsingCenter(et.txt,et.getMidX(),ji.game.height/2-170),et.txt.alpha=0,Y.cancelTween(et.t),et.t=as.tween(et.txt,{alpha:1},.5,{onComplete:et._updateText},et)},et._updateText=function(t){et.active=!0},et.nextState=function(){if(et.active){switch(et.state){case 0:Rt.THIS.add(et.txt),ji.game.device.desktop?(et.txt.visible=!1,Rt.THIS.add(et.tutor1),Y.setPosUsingCenter(et.tutor1,et.getMidX(),ji.game.height/2-140)):et.updateText(Y.tongue.get("$TUTOR1"));break;case 1:ji.game.device.desktop&&(et.txt.visible=!0,Rt.THIS.remove(et.tutor1,!1,!0),et.tutor1.destroy(),Y.setPosUsingCenter(et.txt,et.getMidX(),ji.game.height/2-70)),Rt.THIS.add(et.tutor2),et.updateText(Y.tongue.get("$TUTOR2")),et.createGem(23,12),et.tutor2.animation.play("1"),Y.setPosUsingCenter(et.tutor2,et.getMidX()+20,ji.game.height/2-105);break;case 2:et.updateText(Y.tongue.get("$TUTOR3")),et.createGem(6,12),Y.setPosUsingCenter(et.tutor2,et.getMidX()-252,ji.game.height/2-105);break;case 3:et.updateText(Y.tongue.get("$TUTOR4")),J.levels[$.curLevelIdx].chest.listeners.length=0,J.levels[$.curLevelIdx].chest.addListener(et.THIS),J.levels[$.curLevelIdx].chest.enableBody(),J.levels[$.curLevelIdx].chest.visible=!0,Y.setPosUsingCenter(et.tutor2,et.getMidX()+311,ji.game.height/2-10);break;case 4:et.updateText(Y.tongue.get("$TUTOR5"));break;case 5:Rt.THIS.remove(et.txt,!1,!0),et.txt.destroy(),Rt.THIS.remove(et.tutor2,!1,!0),et.tutor2.destroy(),Ti.show(Y.tongue.get("$TUTOR_END"),U.sceneManager,et.onWindowHelloPlayerHided)}et.state++}},et.onLadderPositioned=function(t){Y.setPosUsingCenter(et.tutor2,t.x,ji.game.height/2-110),et.tutor2.x+=18},et.onWindowHelloPlayerHided=function(){et.active=!1,Rt.showPauseBtn(),Q.game()},et.onHeroTouchedFloor=function(){1==et.state&&et.nextState()},et.onHeroTouchedLadder=function(){5==et.state&&et.nextState()},et.createGem=function(t,e){et.gem=qt.get(0*J.levels[$.curLevelIdx].x+16*(t+1.5),0*J.levels[$.curLevelIdx].y+16*(e+1)),J.levels[$.curLevelIdx].gfx.add(et.gem),et.gem.addListener(et.THIS)},et.getMidX=function(){return J.levels[$.curLevelIdx].level.X+16*J.levels[$.curLevelIdx].level.W/2},et.prototype={onTriggerTouched:function(){et.state<4&&et.gem.onTriggerTouched(),et.nextState()},onTriggerHurted:function(){},__class__:et};var it=function(t,e,i){Phaser.Particles.Arcade.Emitter.call(this,ji.game,t,e,i)};s["flixel.effects.particles.FlxTypedEmitter"]=it,it.__name__=["flixel","effects","particles","FlxTypedEmitter"],it.__interfaces__=[V],it.__super__=Phaser.Particles.Arcade.Emitter,it.prototype=e(Phaser.Particles.Arcade.Emitter.prototype,{setPosition:function(t,e){null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e},__class__:it});var st=function(){this.aliveParticles=0,it.call(this,0,0,20),this.createParticles()};s["com.drderico.towerd.game.fx.AcidDropsFx"]=st,st.__name__=["com","drderico","towerd","game","fx","AcidDropsFx"],st.get=function(){return st.pool.get()},st.cleanGarbage=function(){st.callSuperDestroy=!0,st.pool.cleanAndDestroy(1),st.callSuperDestroy=!1},st.__super__=it,st.prototype=e(it.prototype,{createParticles:function(){null==st.t&&(st.t=Y.getBitmapData(6,6,"#33CC00","AcidDropsFx",!0));for(var t,e=0;e<20;){e++;(t=new $i(0,0)).loadTexture(st.t),t.exists=!1,this.add(t),t.events.onKilled.add(i(this,this.onParticleKilled),this)}this.setXSpeed(-200,200),this.setYSpeed(-150,-250),this.setScale(.25,1,.25,1),this.setRotation(0,0),this.gravity=600,this.setSize(30,10)},onParticleKilled:function(){0==--this.aliveParticles&&this.kill()},show:function(t,e){J._fx.add(this),this.setPosition(t-this.width,e-this.height),this.start(!0,1500,0,20,!1),this.aliveParticles=20},put:function(){st.pool.put(this)},kill:function(){return it.prototype.kill.call(this),this.put(),J._fx.remove(this,!1,!0),this},destroy:function(t,e){st.callSuperDestroy&&it.prototype.destroy.call(this,t,e)},__class__:st});var nt=function(){it.call(this,0,0,20),this.createParticles()};s["com.drderico.towerd.game.fx.BloodDropsFx"]=nt,nt.__name__=["com","drderico","towerd","game","fx","BloodDropsFx"],nt.get=function(){return nt.pool.get()},nt.cleanGarbage=function(){nt.callSuperDestroy=!0,nt.pool.cleanAndDestroy(1),nt.callSuperDestroy=!1},nt.__super__=it,nt.prototype=e(it.prototype,{createParticles:function(){},show:function(t,e){J._fx.add(this),this.setPosition(t-this.width,e-this.height),this.start(!0)},put:function(){nt.pool.put(this)},kill:function(){return it.prototype.kill.call(this),this.put(),J._fx.remove(this,!1,!0),this},destroy:function(t,e){nt.callSuperDestroy&&it.prototype.destroy.call(this,t,e)},__class__:nt});var ot=function(){this.aliveParticles=0,it.call(this,0,0,20),this.createParticles()};s["com.drderico.towerd.game.fx.ChestOpeningFx"]=ot,ot.__name__=["com","drderico","towerd","game","fx","ChestOpeningFx"],ot.get=function(){return ot.pool.get()},ot.cleanGarbage=function(){ot.pool.cleanAndDestroy(1)},ot.__super__=it,ot.prototype=e(it.prototype,{createParticles:function(){null==ot.t1&&(ot.t1=Y.getBitmapData(3,3,"#FFF200","ChestOpeningFx1",!0),ot.t2=Y.getBitmapData(2,2,"#FFF200","ChestOpeningFx2",!0));for(var t,e=0;e<20;){var s=e++;(t=new $i(0,0)).loadTexture(s%2==0?ot.t1:ot.t2),t.exists=!1,this.add(t),t.events.onKilled.add(i(this,this.onParticleKilled),this)}this.setXSpeed(0,0),this.setYSpeed(-30,-60),this.setAlpha(1,.2,2e3),this.gravity=-200,this.setSize(48,16)},onParticleKilled:function(){0==--this.aliveParticles&&this.kill()},show:function(t,e){J._fxUnderHero.add(this),this.setPosition(t,e),this.start(!1,2e3,.04,20),this.aliveParticles=20},put:function(){ot.pool.put(this)},kill:function(){return it.prototype.kill.call(this),this.put(),J._fxUnderHero.remove(this,!1,!0),this},destroy:function(t,e){},__class__:ot});var rt=function(){};s["flixel.util.IFlxDestroyable"]=rt,rt.__name__=["flixel","util","IFlxDestroyable"],rt.prototype={__class__:rt};var at=function(t,e){null==e&&(e=0),null==t&&(t=0),Phaser.Sprite.call(this,ji.game,t,e)};s["flixel.FlxObject"]=at,at.__name__=["flixel","FlxObject"],at.__interfaces__=[rt],at.__super__=Phaser.Sprite,at.prototype=e(Phaser.Sprite.prototype,{destroy:function(t){Phaser.Sprite.prototype.destroy.call(this,t)},get_allowCollisions:function(){if(null==this.body)return 0;var t=0;return t|=this.body.checkCollision.up?256:t,t|=this.body.checkCollision.down?4096:t,t|=this.body.checkCollision.left?1:t,t|=this.body.checkCollision.right?16:t},set_allowCollisions:function(t){return null==this.body?t:(this.body.checkCollision.up=0!=(256&t),this.body.checkCollision.down=0!=(4096&t),this.body.checkCollision.left=0!=(1&t),this.body.checkCollision.right=0!=(16&t),this.body.checkCollision.none=0==t,this.body.checkCollision.any=4369==t,t)},get_immovable:function(){return null!=this.body&&this.body.immovable},set_immovable:function(t){return null==this.body?t:this.body.immovable=t},get_moves:function(){return null!=this.body&&this.body.moves},set_moves:function(t){return null==this.body?t:this.body.moves=t},setPosition:function(t,e){null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e},reset_:function(t,e){Phaser.Sprite.prototype.reset.call(this,t,e)},get_active:function(){return this.exists},set_active:function(t){var e=this.visible;return this.exists=t,this.visible=e,t},hurt:function(t){this.damage(t)},setBodyPos:function(t,e){this.x=t,this.y=e,null!=this.body&&(this.body.x=this.x,this.body.y=this.y,this.body.prev.set(this.x,this.y))},setBodyX:function(t){null!=this.body&&(this.body.x=t)},setBodyY:function(t){null!=this.body&&(this.body.y=t)},disableBody:function(){null!=this.body&&(this.body.enable=!1)},enableBody:function(){null!=this.body&&(this.body.enable=!0)},__class__:at});var lt=function(t,e){null==e&&(e=0),null==t&&(t=0),this.flipY=!1,this.flipX=!1,at.call(this,t,e),this.animation=new Qi(this)};s["flixel.FlxSprite"]=lt,lt.__name__=["flixel","FlxSprite"],lt.__super__=at,lt.prototype=e(at.prototype,{set_flipX:function(t){return this.scale.x=t?-Math.abs(this.scale.x):Math.abs(this.scale.x),this.flipX=t},set_flipY:function(t){return this.scale.y=t?-Math.abs(this.scale.y):Math.abs(this.scale.y),this.flipY=t},makeGraphic:function(t,e,i,s,n){null==s&&(s=!1),null==i&&(i="#FFFFFF"),this.loadTexture(Y.getBitmapData(t,e,i,n,s))},updateHitbox:function(){},centerOrigin:function(){this.anchor.set(.5,.5)},onTouched:function(){},__class__:lt});var ht=function(){};s["flixel.util.IFlxPool"]=ht,ht.__name__=["flixel","util","IFlxPool"],ht.prototype={__class__:ht};var ct=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_fx_ExplosionFireFx"]=ct,ct.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_fx_ExplosionFireFx"],ct.__interfaces__=[ht],ct.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ct};var _t=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"explosionFire_red_0001.png"),this.animation.addByNames("1",["explosionFire_red_0001.png","explosionFire_red_0002.png","explosionFire_red_0003.png","explosionFire_red_0004.png","explosionFire_red_0005.png","explosionFire_red_0006.png","explosionFire_red_0007.png","explosionFire_red_0008.png","explosionFire_red_0009.png"],25,!1),this.animation.addByNames("2",["explosionFire_blue_0001.png","explosionFire_blue_0002.png","explosionFire_blue_0003.png","explosionFire_blue_0004.png","explosionFire_blue_0005.png","explosionFire_blue_0006.png","explosionFire_blue_0007.png","explosionFire_blue_0008.png","explosionFire_blue_0009.png"],25,!1),this.animation.addByNames("3",["explosionFire_green_0001.png","explosionFire_green_0002.png","explosionFire_green_0003.png","explosionFire_green_0004.png","explosionFire_green_0005.png","explosionFire_green_0006.png","explosionFire_green_0007.png","explosionFire_green_0008.png","explosionFire_green_0009.png"],25,!1),this.set_moves(!1),Y.setScale(this)};s["com.drderico.towerd.game.fx.ExplosionFireFx"]=_t,_t.__name__=["com","drderico","towerd","game","fx","ExplosionFireFx"],_t.show=function(t,e,s,n){var o=_t.pool.get();s.add(o,!0),o.reset_(t-38,e-40),o.animation.play(n,!0),o.animations.currentAnim.onComplete.addOnce(i(o,o.onAnimComplete),o)},_t.__super__=lt,_t.prototype=e(lt.prototype,{onAnimComplete:function(){this.kill()},destroy:function(t){},kill:function(){return lt.prototype.kill.call(this),_t.pool.put(this),this},__class__:_t});var ut=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_fx_ExplosionFx"]=ut,ut.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_fx_ExplosionFx"],ut.__interfaces__=[ht],ut.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ut};var dt=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"hero_explosion0001.png"),this.animation.addByNames("1",["hero_explosion0001.png","hero_explosion0002.png","hero_explosion0003.png","hero_explosion0004.png","hero_explosion0005.png","hero_explosion0006.png","hero_explosion0007.png"],12,!1),this.set_moves(!1)};s["com.drderico.towerd.game.fx.ExplosionFx"]=dt,dt.__name__=["com","drderico","towerd","game","fx","ExplosionFx"],dt.show=function(t,e,i){var s=dt.pool.get();s._parent=i,i.add(s),s.reset_(t-30,e-29),s.animation.play("1",!0)},dt.__super__=lt,dt.prototype=e(lt.prototype,{update:function(){lt.prototype.update.call(this),null!=this.animations.currentAnim&&this.animations.currentAnim.isFinished&&(this._parent.remove(this,!1,!0),this.kill())},kill:function(){return dt.pool.put(this),this},destroy:function(t){this._parent=null},__class__:dt});var pt=function(){it.call(this,0,0,25),this.createParticles()};s["com.drderico.towerd.game.fx.GemMovingFx"]=pt,pt.__name__=["com","drderico","towerd","game","fx","GemMovingFx"],pt.get=function(){return 3==pt.fxCnt?null:(pt.fxCnt++,pt.pool.get())},pt.cleanGarbage=function(){pt.callSuperDestroy=!0,pt.pool.cleanAndDestroy(3),pt.callSuperDestroy=!1},pt.__super__=it,pt.prototype=e(it.prototype,{createParticles:function(){},show:function(t,e){this.alive=!0,this.start(!1,.02)},stop:function(){},setPos:function(t,e){this.setPosition(t-this.width/2,e-this.height/2)},put:function(){--pt.fxCnt<0?pt.fxCnt=0:pt.pool.put(this)},kill:function(){return it.prototype.kill.call(this),z.hud.flyingItems.remove(this,!1,!0),this.put(),this},destroy:function(t,e){pt.callSuperDestroy&&it.prototype.destroy.call(this,t,e)},__class__:pt});var gt=function(){this.aliveParticles=0,it.call(this,20),this.createParticles()};s["com.drderico.towerd.game.fx.GemPickUpFx"]=gt,gt.__name__=["com","drderico","towerd","game","fx","GemPickUpFx"],gt.get=function(){return 3==gt.fxCnt?null:(gt.fxCnt++,gt.pool.get())},gt.cleanGarbage=function(){gt.callSuperDestroy=!0,gt.pool.cleanAndDestroy(3),gt.callSuperDestroy=!1},gt.__super__=it,gt.prototype=e(it.prototype,{createParticles:function(){this.setAlpha(1,0,1e3),this.setXSpeed(-200,200),this.setYSpeed(-200,200),this.setScale(.25),null==gt.t&&(gt.t=Y.getBitmapData(6,6,"#FFFFFF","GemPickUpFx",!0));for(var t=0;t<20;){t++;var e=new $i(0,0);e.loadTexture(gt.t),e.exists=!1,e.events.onKilled.add(i(this,this.onParticleKilled),this),this.add(e)}this.gravity=0,this.setRotation(0,0),this.setSize(10,10)},onParticleKilled:function(){0==--this.aliveParticles&&this.kill()},show:function(t,e,i,s){null==s&&(s=1),this._parent=i,this._parent.add(this),this.setPosition(t-this.width/2,e-this.height/2),this.fixedToCamera=0==s,this.start(!0,1e3,0,20),this.aliveParticles=20},put:function(){--gt.fxCnt<0?gt.fxCnt=0:gt.pool.put(this)},kill:function(){return it.prototype.kill.call(this),null!=this._parent&&this._parent.remove(this,!1,!0),this.put(),this},destroy:function(t,e){gt.callSuperDestroy&&it.prototype.destroy.call(this,t,e),this._parent=null},__class__:gt});var ft=function(){this.aliveParticles=0,it.call(this,0,0,15);var t;ft.prevTextureName=ft.textures[0];for(var e=0;e<15;){e++;t=new $i(0,0),E.loadGraphicFromTexture(t,Y.t,ft.prevTextureName),t.exists=!1,this.add(t),t.events.onKilled.add(i(this,this.onParticleKilled),this)}this.setXSpeed(-300,300),this.setYSpeed(-250,-350),this.setScale(.5,1),this.gravity=600,this.setSize(47,70)};s["com.drderico.towerd.game.fx.GravePickedUpFx"]=ft,ft.__name__=["com","drderico","towerd","game","fx","GravePickedUpFx"],ft.get=function(){return ft.pool.get()},ft.__super__=it,ft.prototype=e(it.prototype,{put:function(){ft.pool.put(this)},onParticleKilled:function(){0==--this.aliveParticles&&this.kill()},show:function(t,e,i){if(null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,ft.prevTextureName!=ft.textures[i]){ft.prevTextureName=ft.textures[i];for(var s=0,n=this.children;s<n.length;){var o=n[s];++s,Bs.__cast(o,Phaser.Particle).frameName=ft.prevTextureName,Bs.__cast(o,Phaser.Particle).body.enable=!0}}else for(var r=0,a=this.children;r<a.length;){var l=a[r];++r,Bs.__cast(l,Phaser.Particle).body.enable=!0}return this.start(!0,4e3,0,15,!1),this.aliveParticles=15,J._fxUnderHero.add(this),this},kill:function(){return it.prototype.kill.call(this),J._fxUnderHero.remove(this,!1,!0),this.put(),this},destroy:function(t,e){},__class__:ft});var mt=function(){lt.call(this),this.set_moves(!1)};s["com.drderico.towerd.game.fx.ItemAroundFx"]=mt,mt.__name__=["com","drderico","towerd","game","fx","ItemAroundFx"],mt.__super__=lt,mt.prototype=e(lt.prototype,{show:function(t,e,i){this.alpha=1,Y.setScale(this,null,!0),this._parent=i,i.add(this),this.reset(t,e),this.animation.play("1",!0)},destroy:function(t){Y.cancelTween(this.t),Y.cancelTween(this.t2),this.t=null,this.t2=null,this._parent=null},fadeOut:function(){this.t=as.tween(this.scale,{x:3,y:3},.6,null,null),this.t2=as.tween(this,{alpha:0},.6,{onComplete:i(this,this._delete)},this)},_delete:function(t){null!=this._parent&&this._parent.remove(this,!1,!0),this.put()},kill:function(){return this.put(),this},put:function(){},__class__:mt});var vt=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_fx_HealthItemFx"]=vt,vt.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_fx_HealthItemFx"],vt.__interfaces__=[ht],vt.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:vt};var yt=function(){mt.call(this),E.loadGraphicFromTexture(this,Y.t,"heartItemFx0001.png"),this.animation.addByNames("1",["heartItemFx0001.png","heartItemFx0002.png","heartItemFx0003.png","heartItemFx0004.png","heartItemFx0005.png","heartItemFx0006.png","heartItemFx0007.png"],20)};s["com.drderico.towerd.game.fx.HealthItemFx"]=yt,yt.__name__=["com","drderico","towerd","game","fx","HealthItemFx"],yt.get=function(){return yt.pool.get()},yt.__super__=mt,yt.prototype=e(mt.prototype,{put:function(){yt.pool.put(this)},__class__:yt});var xt=function(){it.call(this,0,0,30),this.createParticles()};s["com.drderico.towerd.game.fx.HeroDeadPartsFx"]=xt,xt.__name__=["com","drderico","towerd","game","fx","HeroDeadPartsFx"],xt.get=function(){return null==xt.instance&&(xt.instance=new xt),xt.instance},xt.__super__=it,xt.prototype=e(it.prototype,{createParticles:function(){null==xt.t&&(xt.t=Y.getBitmapData(12,12,"#FFFFFF","HeroDeadPartsFx",!0));for(var t,e=0;e<30;){e++;(t=new $i(0,0)).loadTexture(xt.t),t.exists=!1,this.add(t)}this.setXSpeed(-500,500),this.setYSpeed(-150,-400),this.setScale(.5,1),this.setRotation(0,0),this.gravity=600,this.setSize(39,36)},show:function(t,e){J._fxDead.add(this);for(var i=0,s=this.children;i<s.length;){var n=s[i];++i,Bs.__cast(n,$i).body.enable=!0,Bs.__cast(n,$i).exists=!1}this.setPosition(t,e),this.start(!0,0,null,30,!1)},updateColorOfSkin:function(){for(var t=0,e=this.children;t<e.length;){var i=e[t];++t,Bs.__cast(i,$i).tint=ji.random.getObject_Float(D.SKIN_DEATH_COLORS[j.heroSkin.get_value()])}},destroy:function(t,e){},__class__:xt});var wt=function(){this.aliveParticles=0,it.call(this,20),this.createParticles()};s["com.drderico.towerd.game.fx.KittyPickUpFx"]=wt,wt.__name__=["com","drderico","towerd","game","fx","KittyPickUpFx"],wt.get=function(){return wt.pool.get()},wt.cleanGarbage=function(){wt.callSuperDestroy=!0,wt.pool.cleanAndDestroy(1),wt.callSuperDestroy=!1},wt.__super__=it,wt.prototype=e(it.prototype,{createParticles:function(){this.setAlpha(1,0,1e3),this.setXSpeed(-200,200),this.setYSpeed(-200,200),this.setScale(.25);for(var t=0;t<20;){t++;var e=new $i(0,0);E.loadGraphicFromTexture(e,Y.t,"starParticle.png"),e.exists=!1,e.events.onKilled.add(i(this,this.onParticleKilled),this),this.add(e)}this.gravity=0,this.setRotation(0,0),this.setSize(10,10)},onParticleKilled:function(){0==--this.aliveParticles&&this.kill()},show:function(t,e,i,s){null==s&&(s=1),this._parent=i,this._parent.add(this);for(var n=0,o=this.children;n<o.length;){var r=o[n];++n,Bs.__cast(r,$i).fixedToCamera=0==s}this.setPosition(t-this.width/2,e-this.height/2),this.start(!0,1e3,0,20),this.aliveParticles=20},put:function(){wt.pool.put(this)},kill:function(){return it.prototype.kill.call(this),null!=this._parent&&this._parent.remove(this,!1,!0),this.put(),this},destroy:function(t,e){wt.callSuperDestroy&&it.prototype.destroy.call(this,t,e),this._parent=null},__class__:wt});var bt=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_fx_MagnetItemFx"]=bt,bt.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_fx_MagnetItemFx"],bt.__interfaces__=[ht],bt.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:bt};var Tt=function(){mt.call(this),E.loadGraphicFromTexture(this,Y.t,"magnetItemFx0001.png"),this.animation.addByNames("1",["magnetItemFx0001.png","magnetItemFx0002.png","magnetItemFx0003.png","magnetItemFx0004.png","magnetItemFx0005.png","magnetItemFx0006.png","magnetItemFx0007.png"],20)};s["com.drderico.towerd.game.fx.MagnetItemFx"]=Tt,Tt.__name__=["com","drderico","towerd","game","fx","MagnetItemFx"],Tt.get=function(){return Tt.pool.get()},Tt.__super__=mt,Tt.prototype=e(mt.prototype,{put:function(){Tt.pool.put(this)},__class__:Tt});var St=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_fx_ShieldItemFx"]=St,St.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_fx_ShieldItemFx"],St.__interfaces__=[ht],St.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:St};var It=function(){mt.call(this),E.loadGraphicFromTexture(this,Y.t,"shieldItemFx0001.png"),this.animation.addByNames("1",["shieldItemFx0001.png","shieldItemFx0002.png","shieldItemFx0003.png","shieldItemFx0004.png","shieldItemFx0005.png","shieldItemFx0006.png","shieldItemFx0007.png"],20)};s["com.drderico.towerd.game.fx.ShieldItemFx"]=It,It.__name__=["com","drderico","towerd","game","fx","ShieldItemFx"],It.get=function(){return It.pool.get()},It.__super__=mt,It.prototype=e(mt.prototype,{put:function(){It.pool.put(this)},__class__:It});var kt=function(){this.aliveParticles=0,it.call(this,0,0,20),this.createParticles()};s["com.drderico.towerd.game.fx.WaterDropsFx"]=kt,kt.__name__=["com","drderico","towerd","game","fx","WaterDropsFx"],kt.get=function(){return kt.pool.get()},kt.cleanGarbage=function(){kt.callSuperDestroy=!0,kt.pool.cleanAndDestroy(1),kt.callSuperDestroy=!1},kt.__super__=it,kt.prototype=e(it.prototype,{createParticles:function(){null==kt.t&&(kt.t=Y.getBitmapData(6,6,"#0099FF","WaterDropsFx",!0));for(var t,e=0;e<20;){e++;(t=new $i(0,0)).loadTexture(kt.t),t.exists=!1,this.add(t),t.events.onKilled.add(i(this,this.onParticleKilled),this)}this.setXSpeed(-200,200),this.setYSpeed(-150,-250),this.setScale(.25,1,.25,1),this.setRotation(0,0),this.gravity=600,this.setSize(30,10)},onParticleKilled:function(){0==--this.aliveParticles&&this.kill()},show:function(t,e){J._fx.add(this),this.setPosition(t-this.width,e-this.height),this.start(!0,1500,0,20,!1),this.aliveParticles=20},put:function(){kt.pool.put(this)},kill:function(){return it.prototype.kill.call(this),this.put(),J._fx.remove(this,!1,!0),this},destroy:function(t,e){kt.callSuperDestroy&&it.prototype.destroy.call(this,t,e)},__class__:kt});var Ft=function(){this.aliveParticles=0,it.call(this,0,0,20),this.createParticles()};s["com.drderico.towerd.game.fx.WaterRedDropsFx"]=Ft,Ft.__name__=["com","drderico","towerd","game","fx","WaterRedDropsFx"],Ft.get=function(){return Ft.pool.get()},Ft.cleanGarbage=function(){Ft.callSuperDestroy=!0,Ft.pool.cleanAndDestroy(1),Ft.callSuperDestroy=!1},Ft.__super__=it,Ft.prototype=e(it.prototype,{createParticles:function(){null==Ft.t&&(Ft.t=Y.getBitmapData(6,6,"#FF3700","WaterRedDropsFx",!0));for(var t,e=0;e<20;){e++;(t=new $i(0,0)).loadTexture(Ft.t),t.exists=!1,this.add(t),t.events.onKilled.add(i(this,this.onParticleKilled),this)}this.setXSpeed(-200,200),this.setYSpeed(-150,-250),this.setScale(.25,1,.25,1),this.gravity=600,this.setRotation(0,0),this.setSize(30,10)},onParticleKilled:function(){0==--this.aliveParticles&&this.kill()},show:function(t,e){J._fx.add(this),this.setPosition(t-this.width,e-this.height),this.start(!0,1500,0,20,!1),this.aliveParticles=20},put:function(){Ft.pool.put(this)},kill:function(){return it.prototype.kill.call(this),this.put(),J._fx.remove(this,!1,!0),this},destroy:function(t,e){Ft.callSuperDestroy&&it.prototype.destroy.call(this,t,e)},__class__:Ft});var Pt=function(){lt.call(this),this.set_moves(!1)};s["com.drderico.towerd.game.fx.dustForHero.HeroDustFxClass"]=Pt,Pt.__name__=["com","drderico","towerd","game","fx","dustForHero","HeroDustFxClass"],Pt.__super__=lt,Pt.prototype=e(lt.prototype,{onShow:function(){this.animations.currentAnim.onComplete.addOnce(i(this,this.onAnimationComplete))},onAnimationComplete:function(t){this.kill(),this._parent.remove(this,!1,!0)},destroy:function(t){},put:function(){},kill:function(){return lt.prototype.kill.call(this),this.put(),this},__class__:Pt});var Ct=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_fx_dustForHero_HeroJumpedSideDustFx"]=Ct,Ct.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_fx_dustForHero_HeroJumpedSideDustFx"],Ct.__interfaces__=[ht],Ct.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Ct};var Et=function(){Pt.call(this),E.loadGraphicFromTexture(this,Y.t,"jumpUpSideDustFx0001.png"),this.animation.addByNames("1",["jumpUpSideDustFx0001.png","jumpUpSideDustFx0002.png","jumpUpSideDustFx0003.png","jumpUpSideDustFx0004.png","jumpUpSideDustFx0005.png","jumpUpSideDustFx0006.png","jumpUpSideDustFx0006.png","jumpUpSideDustFx0007.png","jumpUpSideDustFx0007.png","jumpUpSideDustFx0008.png","jumpUpSideDustFx0008.png","jumpUpSideDustFx0009.png"],24,!1),Y.setScale(this)};s["com.drderico.towerd.game.fx.dustForHero.HeroJumpedSideDustFx"]=Et,Et.__name__=["com","drderico","towerd","game","fx","dustForHero","HeroJumpedSideDustFx"],Et.show=function(t,e){var i=Et.pool.get();i._parent=t,i.set_flipX(J.hero.skin.flipX),i.flipX?i.reset_(J.hero.body.x+80,e-48):i.reset_(J.hero.body.x-44,e-48),i.animation.play("1",!0),i.onShow(),i._parent.add(i)},Et.__super__=Pt,Et.prototype=e(Pt.prototype,{put:function(){Et.pool.put(this)},__class__:Et});var Bt=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_fx_dustForHero_HeroLandedDustFx"]=Bt,Bt.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_fx_dustForHero_HeroLandedDustFx"],Bt.__interfaces__=[ht],Bt.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Bt};var Lt=function(){Pt.call(this),E.loadGraphicFromTexture(this,Y.t,"jumpDustFx0001.png"),this.animation.addByNames("1",["jumpDustFx0001.png","jumpDustFx0002.png","jumpDustFx0003.png","jumpDustFx0004.png","jumpDustFx0005.png","jumpDustFx0006.png","jumpDustFx0007.png","jumpDustFx0008.png"],13,!1),Y.setScale(this,null,!0)};s["com.drderico.towerd.game.fx.dustForHero.HeroLandedDustFx"]=Lt,Lt.__name__=["com","drderico","towerd","game","fx","dustForHero","HeroLandedDustFx"],Lt.show=function(t,e,i,s){null==s&&(s=!1),null==i&&(i=!1);var n=Lt.pool.get();return n._parent=t,i?(n.set_flipY(s),n.reset_(e+(s?-11:11),J.hero.body.y)):(n.set_flipX(J.hero.skin.flipX),n.set_flipY(!1),n.angle=0,n.reset_(J.hero.body.center.x-(42-n.offsetX*n.scale.x),e-Math.floor(n.offsetY))),n.animation.play("1",!0),n.onShow(),n._parent.add(n),n},Lt.__super__=Pt,Lt.prototype=e(Pt.prototype,{put:function(){Lt.pool.put(this)},__class__:Lt});var At=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_fx_dustForHero_HeroRunDustFx"]=At,At.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_fx_dustForHero_HeroRunDustFx"],At.__interfaces__=[ht],At.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:At};var Ot=function(){Pt.call(this),E.loadGraphicFromTexture(this,Y.t,"runDustFx0001.png"),this.animation.addByNames("1",["runDustFx0001.png","runDustFx0002.png","runDustFx0003.png","runDustFx0004.png","runDustFx0005.png"],8,!1),Y.setScale(this)};s["com.drderico.towerd.game.fx.dustForHero.HeroRunDustFx"]=Ot,Ot.__name__=["com","drderico","towerd","game","fx","dustForHero","HeroRunDustFx"],Ot.show=function(t,e){var i=Ot.pool.get();i._parent=t,i.set_flipX(J.hero.skin.flipX),Ot._offsetY=ji.random.int(-6,3),Ot._offsetX=ji.random.int(-10,10),i.flipX?i.reset_(J.hero.x-(-19.5-Ot._offsetX),e-1*(11+Ot._offsetY)):i.reset_(J.hero.x-(-11.5+Ot._offsetX),e-1*(11+Ot._offsetY)),i.animation.play("1",!0,!1,-1),i._parent.add(i),i.onShow(),Ot._timerEnded=!1},Ot.updateTimer=function(t){Ot._timer<=0?(Ot._timer=.05,Ot._timerEnded=!0):Ot._timer-=t},Ot.__super__=Pt,Ot.prototype=e(Pt.prototype,{put:function(){Ot.pool.put(this),Ot._timerEnded=!0},__class__:Ot});var Mt=function(){this.pointerRect=new Phaser.Rectangle(0,0,8,8),this.speedSumFrame=0,this.speedSum=0,this.inAir=!1,this.speed=0,at.call(this),this.skin=new Gt,Y.enableBody(this),this.renderable=!1,this.body.gravity.y=1600,this.body.drag.x=2e4,this.body.friction.set(0,0),this.body.collideWorldBounds=!1,this.body.allowRotation=!1,this.body.setSize(36,34),this.magnetArea=new at,this.magnetArea.renderable=!1,Y.enableBody(this.magnetArea),this.magnetArea.set_moves(!1),this.magnetArea.body.allowGravity=!1,this.magnetArea.body.setSize(7*this.body.width|0,7*this.body.width|0),this.spaceKey=ji.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)};s["com.drderico.towerd.game.hero.Hero"]=Mt,Mt.__name__=["com","drderico","towerd","game","hero","Hero"],Mt.__super__=at,Mt.prototype=e(at.prototype,{init:function(t,e,i){xt.get().updateColorOfSkin(),this.skin.updateSkinView(),this.skin.revive(),Y.cancelTween(this.angleTween),Y.cancelTween(this.onLadderTween),this.onAngleComplete(),N.stopFlickering(this.skin),this.speed=-630*(1==i?-1:1),this.changeDir(),this.unhurtable=!1,this.inAir=!0,this.isJump=!1,this.onLadder=!1,this.set_moves(!0),Mt.canJump=!0,this.needJump=!1,this.skin.angle=0,this.skin.playWalk(),this.noJumpDust=!0,this.reset(t-this.width/2,e-this.height),this.deactivateGemMagnet(),this.skin.setPosition(this.x+this.skin.offsetX/2,this.y+this.skin.offsetY/2),this.speedSum=0,this.speedSumFrame=0},update:function(){Mt.canMove&&(this.checkJump(),this.inAir||this.isJump||this.body.wasTouching.down||(this.inAir=!0,this.isJump=!1,this._floor=null),this.onLadder||(this.body.velocity.x=this.speed)),at.prototype.update.call(this),this.onLadder&&(this.body.prev.y=this.body.y),Mt.canMove&&!this.onLadder&&(this.speedSumFrame++,this.speedSum+=Math.abs(this.body.x-this.body.prev.x),this.speedSumFrame>=5&&(this.speedSumFrame=0,this.speedSum<10&&this.body.velocity.y>25&&this.body.velocity.y<28&&this.bounceUp(),this.speedSum=0)),q._items[0]&&this.magnetArea.body.position.set(this.body.center.x-this.magnetArea.body.width/2,this.body.center.y-this.magnetArea.body.height/2)},onAngleComplete:function(t){this.skin.angle=0,this.angleTween=null},changeDir:function(t){if(this.speed=-this.speed,this.skin.set_flipX(this.speed>0),this.body.touching.left?this.body.x+=1:this.body.touching.right&&(this.body.x-=1),null!=this.angleTween){var e=this.angleTween.timeline[0].percent;Y.cancelTween(this.angleTween);var s=0;!this.prevFlipX&&this.skin.angle<0?s=360:!this.prevFlipX&&this.skin.angle>=0?s=0:this.prevFlipX&&this.skin.angle<0?s=0:this.prevFlipX&&this.skin.angle>=0&&(s=-360),this.skin.angle=-this.skin.angle,this.angleTween=as.tween(this.skin,{angle:s},.619*(1-e),{onComplete:i(this,this.onAngleComplete)},this),null!=t&&t.body.height>=128&&(Lt.show(J._fxUnderHero,this.speed<0?t.body.x:t.body.right,!0,this.speed<0).angle=90),this.prevFlipX=this.skin.flipX}},onFloorTouch:function(t){this.inAir&&(this.inAir=!1,this.isJump=!1,!this.noJumpDust&&this.body.deltaY()>0?(Q.touchFloor(),Lt.show(J._fxUnderHero,t.body.y),et.active&&et.onHeroTouchedFloor()):this.noJumpDust=!1,this._floor=t,Mt.canJump=!0,this.checkJump())},climbOnLadder:function(t){if(!this.onLadder){this.ladder=t,this.ladder.trigger.deactivate(),this.needJump=!1,this.onLadder=!0,this.isJump=!1,Mt.canJump=!1,this.body.velocity.set(0,0);var e=this.ladder.toY-this.body.height+16;this.set_moves(!1),N.stopFlickering(this.skin),this.unhurtable=!1,Mt.climbOnLadderDuration=Math.abs(e-this.y)/200,as.tween(this,{x:t.x+2},.2,{onComplete:i(this,this.onClimbXComplete)},this),this.onLadderTween=as.tween(this,{y:e},Mt.climbOnLadderDuration,{onComplete:i(this,this.onClimbComplete)},this),Y.delay(Mt.climbOnLadderDuration/2,i(this,this.onClimbPreComplete),null,this),q.pauseItems()}},onClimbXComplete:function(t){Xe.show("+100",J._fx,this.body.center.x,this.body.y),et.active&&et.onHeroTouchedLadder()},onClimbPreComplete:function(t){Mt.canJump=!0,J.forceShowFireBeams(),U.changeBgColor(),U.changeCssBgColor()},die:function(){Y.cancelTween(this.tween),N.stopFlickering(this.skin),this.kill(),this.skin.kill(),xt.get().show(this.body.center.x,this.body.center.y),$.setNeedToGameOver(),this.onLadder&&(Y.cancelTween(this.onLadderTween),Y.cancelTween(J.onLadderTween),Y.cancelTween(J.cameraTween1),Y.cancelTween(J.cameraTween2))},onHurt:function(){this.unhurtable=!0,this.needJump=!1,N.stopFlickering(this.skin),this.skin.playHurt(),this.tween=Y.delay(.1,i(this,this._flash),null,this),Q.hero_hurt()},_flash:function(t){Y.cancelTween(this.tween),this.skin.playWalk(),N.flicker(this.skin,1,.02,!0,i(this,this.onFlashComplete))},onFlashComplete:function(){this.unhurtable=!1},bounceUp:function(t){null==t&&(t=1),this.body.velocity.y<0||(this.body.velocity.y=-530*t,this.isJump=!0,this.inAir=!0,this.needJump=!1,this.body.y-=2,this.body.prev.y=this.body.y)},onClimbComplete:function(t){this.onLadder=!1,this.isJump=!1,this.inAir=!1,this.set_moves(!0),this.ladder=null,this.unhurtable=!1,J.hideLadder(),J.onClimbComplete(),q.unpauseItems(),this.checkJump()},checkJump:function(){this.body.velocity.y>=0&&Mt.canJump&&(this.spaceKey.isDown&&this.spaceKey.downDuration()?this.needJump=!0:ji.game.input.activePointer.justPressed()&&(null==this.btnRect&&(this.btnRect=new Phaser.Rectangle(Rt._pauseBtn.cameraOffset.x,Rt._pauseBtn.cameraOffset.y,Rt._pauseBtn.width,Rt._pauseBtn.height)),this.pointerRect.x=ji.game.input.activePointer.x,this.pointerRect.y=ji.game.input.activePointer.y,this.btnRect.intersects(this.pointerRect,0)||(this.needJump=!0))),this.inAir||this.onLadder||!this.needJump||this.isJump||(this.body.velocity.y=-530,this.inAir=!0,this.isJump=!0,this.needJump=!1,null!=this._floor&&Et.show(J._fxUnderHero,this._floor.body.y),Y.cancelTween(this.angleTween),this.skin.angle=0,this.angleTween=as.tween(this.skin,{angle:this.skin.flipX?360:-360},.619,{onComplete:i(this,this.onAngleComplete)},this),this.prevFlipX=this.skin.flipX,this._floor=null,Q.hero_jump())},updateAfterColliding:function(){this.skin.setPosition(this.x+this.skin.offsetX*this.skin.scale.x,this.y+this.skin.offsetY),0!=this.body.velocity.x&&this.alive},activateGemMagnet:function(){this.magnetArea.exists=!0,this.magnetArea.alive=!0},deactivateGemMagnet:function(){this.magnetArea.exists=!1,this.magnetArea.alive=!1},activateInvulnerability:function(){},deactivateInvulnerability:function(){},__class__:Mt});var Gt=function(){this._offsetY=0,this._offsetX2=0,this._offsetX1=0,lt.call(this),E.loadGraphicFromTexture(this,Y.t,D.HERO_SKIN_TEXTURES[0][1][0]),Y.setScale(this,1,!0)};s["com.drderico.towerd.game.hero.HeroSkin"]=Gt,Gt.__name__=["com","drderico","towerd","game","hero","HeroSkin"],Gt.__super__=lt,Gt.prototype=e(lt.prototype,{destroy:function(t){},updateSkinView:function(){this.animation.remove("1");var t=j.heroSkin.get_value();this.animation.addByNames("1",[D.HERO_SKIN_TEXTURES[t][1][0],D.HERO_SKIN_TEXTURES[t][1][1],D.HERO_SKIN_TEXTURES[t][1][0],D.HERO_SKIN_TEXTURES[t][1][1],D.HERO_SKIN_TEXTURES[t][1][0],D.HERO_SKIN_TEXTURES[t][1][1],D.HERO_SKIN_TEXTURES[t][1][0],D.HERO_SKIN_TEXTURES[t][1][2]],8),this.setWalkOffsets(),this.blendMode=10==t?PIXI.blendModes.ADD:PIXI.blendModes.NORMAL},playWalk:function(){this.setWalkOffsets(),this.animation.play("1",!0)},playHurt:function(){},setPosition:function(t,e){null==e&&(e=0),null==t&&(t=0),lt.prototype.setPosition.call(this,t+(this.flipX?this._offsetX2:this._offsetX1),e+this._offsetY)},setWalkOffsets:function(){this._offsetX1=1*Gt.offsetsWalk[j.heroSkin.get_value()][0],this._offsetX2=1*Gt.offsetsWalk[j.heroSkin.get_value()][1],this._offsetY=1*Gt.offsetsWalk[j.heroSkin.get_value()][2]},__class__:Gt});var Ht=function(){this.cameraOffset=new es,this.coin=new lt(0,-1),E.loadGraphicFromTexture(this.coin,Y.t,"coin0001.png"),this.coin.animation.addByNames("1",["coin0001.png","coin0001.png","coin0001.png","coin0001.png","coin0001.png","coin0001.png","coin0001.png","coin0001.png","coin0001.png","coin0001.png","coin0001.png","coin0001.png","coin0002.png","coin0003.png","coin0004.png","coin0005.png","coin0006.png","coin0007.png","coin0008.png"],16),Y.setScale(this.coin),this.coin.animation.play("1"),this.txt=Y.getText(D.DEFAULT_TEXT_SIZE),this.txt.text="1234",this.txt.setPosition(this.coin.width+12,-6),this.coin.fixedToCamera=!0,this.txt.fixedToCamera=!0};s["com.drderico.towerd.game.hud.CoinsHud"]=Ht,Ht.__name__=["com","drderico","towerd","game","hud","CoinsHud"],Ht.prototype={updateText:function(t){null==t&&(t=!0);var e=j.coins.get_value();this.txt.text=c.string(e),Y.setScale(this.txt),t&&this.bounce()},setPosition:function(t,e){this.cameraOffset.set(t,e),this.txt.cameraOffset.x=this.coin.width+12+t,this.txt.cameraOffset.y=-6+e,this.coin.cameraOffset.x=t,this.coin.cameraOffset.y=-1+e},bounce:function(){Y.cancelTween(this._tween),this._tween=G.scaleUpDown(this.txt,null,1.2,.05)},__class__:Ht};var Dt=function(){this.cameraOffset=new es,this.gem=new lt(0,-3),this.gem.set_moves(!1),E.loadGraphicFromTexture(this.gem,Y.t,"gem2_0001.png"),this.gem.animation.addByNames("1",["gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0002.png","gem2_0003.png","gem2_0004.png","gem2_0005.png","gem2_0006.png","gem2_0007.png","gem2_0008.png"],12),Y.setScale(this.gem),this.gem.animation.play("1"),this.txt=Y.getText(D.DEFAULT_TEXT_SIZE),this.txt.text="1234",this.txt.setPosition(this.gem.width+13,-6),this.gem.fixedToCamera=!0,this.txt.fixedToCamera=!0};s["com.drderico.towerd.game.hud.GemsHud"]=Dt,Dt.__name__=["com","drderico","towerd","game","hud","GemsHud"],Dt.prototype={setPosition:function(t,e){this.cameraOffset.set(t,e),this.txt.cameraOffset.x=this.gem.width+13+t,this.txt.cameraOffset.y=-6+e,this.gem.cameraOffset.x=t,this.gem.cameraOffset.y=-3+e},updateText:function(t){null==t&&(t=!0);var e=j.gems.get_value();this.txt.text=c.string(e),Y.setScale(this.txt),t&&this.bounce()},bounce:function(){Y.cancelTween(this._tween),this._tween=G.scaleUpDown(this.txt,null,1.2,.05)},__class__:Dt};var Nt=function(){};s["com.drderico.towerd.ui.BackBtnListener"]=Nt,Nt.__name__=["com","drderico","towerd","ui","BackBtnListener"],Nt.prototype={__class__:Nt};var Rt=function(){K.call(this),Rt.THIS=this,z.onGameResizeSignal.add(i(this,this.onGameResize),this),Rt.bg=new lt(Y.screenOffsetX-2,0*Y.screenOffsetY-2),Rt.bg.set_active(!1),Rt.bg.fixedToCamera=!0,this.add(Rt.bg),Rt.HEIGHT_TOP=1*Rt.HEIGHT_TOP|0,Rt.HEIGHT_BOTTOM=1*Rt.HEIGHT_BOTTOM|0,Rt._pauseBtn=new Ve(0,0,i(this,this.onPauseBtnPressed),this),E.loadGraphicFromTexture(Rt._pauseBtn,Y.t,"hud_pause_btn.png"),Y.setScale(Rt._pauseBtn,null,!0);Rt._pauseBtn;Rt._pauseBtn.fixedToCamera=!0,this.add(Rt._pauseBtn),Rt.scoreHud=new Yt,Rt.coinsHud=new Ht,Rt.levelHud=new Ut,Rt.gemsHud=new Dt,Rt.livesHud=new Xt,Rt.itemsHud=new Wt,this.add(Rt.coinsHud.coin),Rt.livesHud.addHeartsTo(this),this.add(Rt.gemsHud.gem),Rt.itemsHud.addGfxTo(this),this.add(Rt.coinsHud.txt),this.add(Rt.scoreHud.txt),this.add(Rt.livesHud.txt),this.add(Rt.levelHud.txt),this.add(Rt.gemsHud.txt),this.add(Rt.levelHud.staticTxt),this.add(Rt.scoreHud.staticTxt),Rt.itemsHud.addTxtTo(this),Rt.tapText=Y.getText(48,"center"),Rt.tapText.font=Y.font48_white,ji.game.device.desktop?Rt.tapText.text=Y.tongue.get("$CLICK_TO_START"):Rt.tapText.text=Y.tongue.get("$TAP_TO_START"),Y.setScale(Rt.tapText),Rt.tapText.fixedToCamera=!0,this.add(Rt.tapText),Rt.hideTapText(),this.flyingItems=new K,this.add(this.flyingItems),this.onGameResize()};s["com.drderico.towerd.game.hud.HUD"]=Rt,Rt.__name__=["com","drderico","towerd","game","hud","HUD"],Rt.__interfaces__=[Nt],Rt.hideTapText=function(){N.stopFlickering(Rt.tapText),Rt.tapText.visible=!1,Mt.canMove=!0,Rt.isWaitingForTap=!1},Rt.showTapText=function(t){Rt.tapText.visible=!0,N.flicker(Rt.tapText,0,.5),Mt.canMove=!1,Rt.isWaitingForTap=!0},Rt.init=function(){Rt.itemsHud.hideAll(),Y.setScale(Rt._pauseBtn),Rt.THIS.flyingItems.removeAll()},Rt.onExitConfirmed=function(){j.gameOver=!1,$.onEndGame(),U.sceneManager.showTitleScreen()},Rt.showFx=function(t){Rt.THIS.add(t)},Rt.removeFx=function(t){Rt.THIS.remove(t,!1,!0)},Rt.changeBg=function(){null!=Rt.bg&&Rt.bg.makeGraphic(0|Rt.bg.width,0|Rt.bg.height,D.BG_COLORS[j.envSetting.get_value()])},Rt.hidePauseBtn=function(){Rt._pauseBtn.visible=!1,Rt._pauseBtn.disable()},Rt.showPauseBtn=function(){Rt._pauseBtn.visible=!0,Rt._pauseBtn.enable()},Rt.__super__=K,Rt.prototype=e(K.prototype,{onGameResize:function(){Rt._pauseBtn.fixedToCamera=!1,Rt._pauseBtn.x=ji.game.width-10-Y.screenOffsetX-Rt._pauseBtn.width/2|0,Rt._pauseBtn.y=ji.game.height-10-Y.screenOffsetY-Rt._pauseBtn.height/2|0,Rt._pauseBtn.fixedToCamera=!0,Rt.levelHud.setPosition(Bi.levelHud.cameraOffset.x,Bi.levelHud.cameraOffset.y),Rt.scoreHud.setPosition(Rt.levelHud.cameraOffset.x+170,Rt.levelHud.cameraOffset.y),Rt.coinsHud.setPosition(Bi.coinsHud.cameraOffset.x,Rt.levelHud.cameraOffset.y),Rt.gemsHud.setPosition(Bi.gemsHud.cameraOffset.x,Rt.levelHud.cameraOffset.y),Rt.livesHud.setPosition(Bi.livesHud.cameraOffset.x,Rt.levelHud.cameraOffset.y+2),Rt.itemsHud.setPosition(Y.screenOffsetX+9,ji.game.height-Y.screenOffsetY-70),Rt.bg.makeGraphic(ji.get_width()+4,2+(2*Rt.HEIGHT_TOP*1|0),D.BG_COLORS[0],!0,"HUD_bg"),Rt.tapText.fixedToCamera=!1,Y.setPosUsingCenter(Rt.tapText,ji.game.width/2,ji.game.height/2),Rt.tapText.fixedToCamera=!0},onPauseBtnPressed:function(t){!$.isLevelRunning||$.isGameOver||et.active||Y.onBtnClicked(Rt._pauseBtn,(Os=U.sceneManager,i(Os,Os.showPause)))},onBackBtnPressed:function(t){null==t&&(t=!1),t&&Q.click(),Rt._pauseBtn.disable(),U.sceneManager.showPause()},__class__:Rt});var Wt=function(){this.timersTxtSrcPos=[[0,0],[0,0]],this.itemSrcPos=[[0,0],[0,0]],this.cameraOffset=new es,this.slots=[],this.items=[],this.itemSlotId=[0,0],this.timersTxt=[],this.items[0]=new lt,E.loadGraphicFromTexture(this.items[0],Y.t,"magnet_hud.png"),Y.setScale(this.items[0]),this.items[0].set_active(!1),this.items[1]=new lt,E.loadGraphicFromTexture(this.items[1],Y.t,"shield_hud.png"),Y.setScale(this.items[1]),this.items[1].set_active(!1);for(var t=0;t<2;){var e=t++;this.timersTxt[e]=new We(0,0,Y.font16_white,"20",12,"center"),Y.setScale(this.timersTxt[e],null,!0),Y.setPosUsingCenter(this.timersTxt[e],1*(53+77*e),14),this.timersTxt[e].set_active(!1),this.timersTxt[e].tint=16777215,this.timersTxt[e].fixedToCamera=!0,this.timersTxtSrcPos[e][0]=this.timersTxt[e].x,this.timersTxtSrcPos[e][1]=this.timersTxt[e].y}this.items[0].fixedToCamera=!0,this.items[1].fixedToCamera=!0};s["com.drderico.towerd.game.hud.ItemsHud"]=Wt,Wt.__name__=["com","drderico","towerd","game","hud","ItemsHud"],Wt.prototype={setPosition:function(t,e){this.cameraOffset.set(t,e);for(var i=0;i<2;){var s=i++;this.timersTxt[s].cameraOffset.x=this.timersTxtSrcPos[s][0]+t,this.timersTxt[s].cameraOffset.y=this.timersTxtSrcPos[s][1]+e}this.items[0].cameraOffset.x=this.itemSrcPos[0][0]+t,this.items[0].cameraOffset.y=this.itemSrcPos[0][1]+e,this.items[1].cameraOffset.x=this.itemSrcPos[1][0]+t,this.items[1].cameraOffset.y=this.itemSrcPos[1][1]+e},activateItem:function(t){null==this.slots[0]||this.slots[0]==this.items[t]?this.activateInSlot(this.items[t],0,t):this.activateInSlot(this.items[t],1,t),this.itemSlotId[t]=this.slots.indexOf(this.items[t]),0==t?this.timersTxt[this.itemSlotId[t]].tint=13947204:1==t&&(this.timersTxt[this.itemSlotId[t]].tint=3269886)},activateInSlot:function(t,e,i){this.slots[e]=t,t.visible=!0,Y.setScale(t),G.scaleUpDown(t,null,1.1),this.timersTxt[e].visible=!0,this.itemSrcPos[i][0]=77*e*1|0,t.cameraOffset.x=this.cameraOffset.x+(77*e*1|0)},deactivateBonus:function(t){var e=this.slots.indexOf(t);e<0||(this.slots[e]=null,t.visible=!1,this.timersTxt[e].visible=!1)},hideAll:function(){this.items[0].visible=!1,this.items[1].visible=!1,this.slots[0]=null,this.slots[1]=null,this.timersTxt[0].visible=!1,this.timersTxt[1].visible=!1},deactivateItem:function(t){this.deactivateBonus(this.items[t])},getEmptySlotX:function(t){return null==this.slots[0]&&null==this.slots[1]?this.cameraOffset.x+38:null==this.slots[0]&&null!=this.slots[1]?this.slots[1]==this.items[t]?this.cameraOffset.x+115:this.cameraOffset.x+38:null==this.slots[1]&&null!=this.slots[0]?this.slots[0]==this.items[t]?this.cameraOffset.x+38:this.cameraOffset.x+115:this.cameraOffset.x+38},updateTimer:function(t,e){this.timersTxt[this.itemSlotId[t]].text=null==e?"null":""+e},addGfxTo:function(t){t.add(this.items[0]),t.add(this.items[1])},addTxtTo:function(t){for(var e=0;e<2;){var i=e++;t.add(this.timersTxt[i])}},__class__:Wt};var Ut=function(t){null==t&&(t=!1),this.cameraOffset=new es,this.staticTxt=Y.getText(D.DEFAULT_TEXT_SIZE),this.staticTxt.text=Y.tongue.get("$STAGE"),Y.setScale(this.staticTxt),this.staticTxt.y=-6,this.staticTxt.anchor.x=0,this.staticTxt.width>86&&(this.staticTxt.width=86),this.txt=Y.getText(D.DEFAULT_TEXT_SIZE),Y.setScale(this.txt),this.txt.text="1234",this.txt.tint=3269886,this.txt.setPosition(this.staticTxt.width+10,-6),this.staticTxt.fixedToCamera=!0,this.txt.fixedToCamera=!0};s["com.drderico.towerd.game.hud.LevelHud"]=Ut,Ut.__name__=["com","drderico","towerd","game","hud","LevelHud"],Ut.prototype={setPosition:function(t,e){this.cameraOffset.set(t,e),this.txt.cameraOffset.x=this.staticTxt.width+10+t,this.txt.cameraOffset.y=-6+e,this.staticTxt.cameraOffset.x=t,this.staticTxt.cameraOffset.y=-6+e},updateText:function(t){null==t&&(t=j.level.get_value()),this.txt.text=c.string(t+1)},__class__:Ut};var Xt=function(){this.cameraOffset=new es,this.hearts=[],this.hideStack=[],this.heartTweens=[];for(var t=0;t<4;){var e=t++;this.hearts[e]=new lt(28*e*1,1),this.hearts[e].set_active(!1),this.hearts[e].visible=!1,E.loadGraphicFromTexture(this.hearts[e],Y.t,"heart.png"),Y.setScale(this.hearts[e]),this.hearts[e].fixedToCamera=!0,this.heartTweens[e]=[]}this.txt=Y.getText(D.DEFAULT_TEXT_SIZE),this.txt.text="99",this.txt.setPosition(this.hearts[2].x+this.hearts[2].width+10,-7),this.txt.fixedToCamera=!0};s["com.drderico.towerd.game.hud.LivesHud"]=Xt,Xt.__name__=["com","drderico","towerd","game","hud","LivesHud"],Xt.prototype={setPosition:function(t,e){this.cameraOffset.set(t,e);for(var i=0;i<4;){var s=i++;this.hearts[s].cameraOffset.x=28*s*1+t,this.hearts[s].cameraOffset.y=1+e}this.txt.cameraOffset.x=this.hearts[2].cameraOffset.x+this.hearts[2].width+10,this.txt.cameraOffset.y=-7+e},addHeartsTo:function(t){for(var e=0;e<4;){var i=e++;t.add(this.hearts[i])}},updateLives:function(t,e){if(null==t&&(t=!1),null==e&&(e=j.heroLives.get_value()),t&&(this.hideStack.length=0),e>4){for(var s=0;s<4;){var n=s++;Y.setScale(this.hearts[n]),this.hearts[n].visible=!1}this.hearts[2].alpha=1,this.hearts[2].visible=!0,this.txt.visible=!0,this.txt.text=null==e?"null":""+e,Y.setScale(this.txt)}else{this.txt.visible=!1;for(var o=0;o<4;){var r=o++;r<4-e?!t&&this.hearts[r].visible?(this.cancelTweens(r),this.heartTweens[r].push(as.tween(this.hearts[r],{alpha:0},.4,null,this)),this.heartTweens[r].push(as.tween(this.hearts[r].scale,{x:2,y:2},.4,{onComplete:i(this,this.hideHeart)},this)),this.hideStack.push(r)):this.hearts[r].visible=!1:(Y.setScale(this.hearts[r]),t||this.hearts[r].visible||(this.cancelTweens(r),this.heartTweens[r].push(G.scaleUpDown(this.hearts[r]))),this.hearts[r].alpha=1,this.hearts[r].visible=!0)}}},hideHeart:function(t){this.hideStack.length>0&&(this.hearts[this.hideStack.shift()].visible=!1)},cancelTweens:function(t){for(var e=0,i=this.heartTweens[t];e<i.length;){var s=i[e];++e,null!=s&&s.stop(!1)}this.heartTweens[t].length=0},__class__:Xt};var Yt=function(t){null==t&&(t=!1),this.cameraOffset=new es,this.staticTxt=Y.getText(D.DEFAULT_TEXT_SIZE),this.staticTxt.text=Y.tongue.get("$SCORE"),Y.setScale(this.staticTxt),this.staticTxt.y=-6,this.staticTxt.anchor.x=0,this.staticTxt.width>85&&(this.staticTxt.scale.x*=85/this.staticTxt.width),this.txt=Y.getText(D.DEFAULT_TEXT_SIZE),this.txt.text="1234",this.txt.tint=3269886,this.txt.setPosition(108,-6),this.staticTxt.fixedToCamera=!0,this.txt.fixedToCamera=!0};s["com.drderico.towerd.game.hud.ScoreHud"]=Yt,Yt.__name__=["com","drderico","towerd","game","hud","ScoreHud"],Yt.prototype={setPosition:function(t,e){this.cameraOffset.set(t,e),this.txt.cameraOffset.x=108+t,this.txt.cameraOffset.y=-6+e,this.staticTxt.cameraOffset.x=t,this.staticTxt.cameraOffset.y=-6+e},updateText:function(t,e){null==e&&(e=!1),null==t&&(t=!0);var i=e?j.bestScore.get_value():j.score.get_value();this.txt.text=c.string(i),Y.setScale(this.txt),t&&this.bounce()},bounce:function(){Y.cancelTween(this._tween),this._tween=G.scaleUpDown(this.txt,null,1.2,.05)},__class__:Yt};var Vt=function(){};s["com.drderico.towerd.game.interfaces.IPoolable"]=Vt,Vt.__name__=["com","drderico","towerd","game","interfaces","IPoolable"],Vt.prototype={__class__:Vt};var Kt=function(){this._type=0,this._initY=0,lt.call(this),Y.enableBody(this),this.set_moves(!1),this.listeners=[]};s["com.drderico.towerd.game.items.Item"]=Kt,Kt.__name__=["com","drderico","towerd","game","items","Item"],Kt.__interfaces__=[tt,Vt],Kt.__super__=lt,Kt.prototype=e(lt.prototype,{destroy:function(t){this.disableBody(),this.stopTween(),this.listeners.length=0},kill:function(){return lt.prototype.kill.call(this),this.put(),this},put:function(){},pickUp:function(){},touchedByMagnetArea:function(){},reset_:function(t,e){Y.setScale(this),this.alpha=1,this.stopTween(),this.pickedUp=!1,this.enableBody(),lt.prototype.reset_.call(this,0|t,Math.round(e)-Math.floor(this.height)),this.body.setSize(Math.abs(this.width),Math.abs(this.height)),this._initY=this.y},stopTween:function(){null!=this._tween&&(this._tween.stop(),this._tween=null)},_moveUp:function(){this._tween=as.tween(this,{y:this._initY+10},ji.random.float(.8,1.2),{type:5},null)},onTriggerTouched:function(){this.stopTween(),this.pickedUp=!0,this.pickUp(),$.onBonusPickedUp(this),this.disableBody()},onTriggerHurted:function(){},update:function(){if(lt.prototype.update.call(this),null!=this.trailFx){if(!this.trailFx.alive)return void this.killTrailFx();this.trailFx.setPos(this.cameraOffset.x+this.width/2,this.cameraOffset.y+this.height/2)}},callBack:function(t){this.onMoveFinishedCallback(),this._moveUp()},killTrailFx:function(){null!=this.trailFx&&(this.trailFx.kill(),this.trailFx=null)},createTrailFx:function(){null!=this.trailFx&&this.trailFx.alive||(this.killTrailFx(),this.trailFx=pt.get(),null!=this.trailFx&&(this.trailFx.show(this.world.x+this.width/2,this.world.y+this.height/2),z.hud.flyingItems.add(this.trailFx)))},onTouched:function(){for(var t=0,e=this.listeners;t<e.length;){var i=e[t];++t,null!=i&&i.onTriggerTouched()}this.onTriggerTouched()},addListener:function(t){this.listeners.push(t)},__class__:Kt});var zt=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_items_Chest"]=zt,zt.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_items_Chest"],zt.__interfaces__=[ht],zt.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:zt};var jt=function(){Kt.call(this),this.set_active(!0),this._type=5,E.loadGraphicFromTexture(this,Y.t,"chest_closed_ready0001.png"),this.animation.addByNames("closed",["chest_closed_ready0001.png","chest_closed_ready0002.png","chest_closed_ready0003.png","chest_closed_ready0004.png","chest_closed_ready0005.png","chest_closed_ready0006.png","chest_closed_ready0007.png","chest_closed_ready0008.png","chest_closed_ready0009.png","chest_closed_ready0010.png","chest_closed_ready0001.png","chest_closed_ready0001.png","chest_closed_ready0001.png","chest_closed_ready0001.png","chest_closed_ready0001.png","chest_closed_ready0001.png","chest_closed_ready0001.png","chest_closed_ready0001.png","chest_closed_ready0001.png"],12,!0),this.animation.addByNames("opened",["chest0002.png"],0,!1),Y.setScale(this)};s["com.drderico.towerd.game.items.Chest"]=jt,jt.__name__=["com","drderico","towerd","game","items","Chest"],jt.get=function(t,e){var i=jt.pool.get();return i.reset_(t,e),i},jt.__super__=Kt,jt.prototype=e(Kt.prototype,{put:function(){jt.pool.put(this)},reset_:function(t,e){Kt.prototype.reset_.call(this,t,e),this.visible=!0,this.animation.play("closed")},pickUp:function(){Kt.prototype.pickUp.call(this),ot.get().show(this.body.center.x,this.body.y),this.animation.play("opened"),ri.startDelay=0;for(var t=0,e=ji.random.int(1,3);t<e;){t++;ri.get().reset_(this.worldPosition.x+this.width/2+1*ji.random.int(-5,5),this.worldPosition.y+1*ji.random.int(-10,10)),ri.startDelay+=.1}},killBonus:function(t){this.kill()},__class__:jt});var Qt=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_items_CoinItem"]=Qt,Qt.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_items_CoinItem"],Qt.__interfaces__=[ht],Qt.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Qt};var Jt=function(){this.isMagnetActivated=!1,Kt.call(this),this.set_active(!0),this._type=7,E.loadGraphicFromTexture(this,Y.t,"coin0001.png"),Y.setScale(this),this.animation.addByNames("1",["coin0001.png","coin0002.png","coin0003.png","coin0004.png","coin0005.png","coin0006.png","coin0007.png","coin0008.png"],16)};s["com.drderico.towerd.game.items.CoinItem"]=Jt,Jt.__name__=["com","drderico","towerd","game","items","CoinItem"],Jt.get=function(t,e){var i=Jt.pool.get();return i.fixedToCamera=!1,i.reset_(t,e),i.isMagnetActivated=!1,i},Jt.__super__=Kt,Jt.prototype=e(Kt.prototype,{put:function(){Jt.pool.put(this)},reset_:function(t,e){Kt.prototype.reset_.call(this,0|t,Math.round(e)),this.animation.play("1",!0,!1,-1),this.killTrailFx(),Y.setScale(this,.8)},pickUp:function(){this.createTrailFx(),this.isMagnetActivated=!1,Q.coin_pickup(),ri.coinsToAdd++,this._tween=as.tween(this,{y:this.y-100},.3,{ease:Phaser.Easing.Sinusoidal.Out,onComplete:i(this,this._hideCoin)},this)},_hideCoin:function(t){J.levels[$.curLevelIdx].gfx.remove(this,!1,!0),this.fixedToCamera=!0,this.cameraOffset.set(this.worldPosition.x,this.worldPosition.y),this._tween=as.tween(this.cameraOffset,{x:Rt.coinsHud.cameraOffset.x,y:Rt.coinsHud.cameraOffset.y},.6,{onComplete:i(this,this._hideCoin2)},this),z.hud.flyingItems.add(this)},_hideCoin2:function(t){z.hud.flyingItems.remove(this,!1,!0),this.kill(),$.addCoin(),ri.coinsToAdd--,null!=this.trailFx&&this.trailFx.stop()},killBonus:function(t){this.kill()},touchedByMagnetArea:function(){this.isMagnetActivated||(this.isMagnetActivated=!0,this.stopTween(),this.createTrailFx())},update:function(){Kt.prototype.update.call(this),this.isMagnetActivated&&J.hero.visible&&(J.hero.body.center.x<this.body.center.x?this.x-=400*ji.game.time.elapsedMS/1e3:this.x+=400*ji.game.time.elapsedMS/1e3,J.hero.body.center.y+5<this.body.center.y?this.y-=400*ji.game.time.elapsedMS/1e3:J.hero.body.center.y-5>this.body.center.y&&(this.y+=400*ji.game.time.elapsedMS/1e3))},__class__:Jt});var $t=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_items_Gem"]=$t,$t.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_items_Gem"],$t.__interfaces__=[ht],$t.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:$t};var qt=function(){this.id=0,this.isMagnetActivated=!1,Kt.call(this),this.set_active(!0),this._type=4,E.loadGraphicFromTexture(this,Y.t,qt.frameNames[0]),Y.setScale(this),this.animation.addByNames("0",["gem1_0001.png","gem1_0001.png","gem1_0001.png","gem1_0001.png","gem1_0001.png","gem1_0001.png","gem1_0001.png","gem1_0001.png","gem1_0001.png","gem1_0001.png","gem1_0002.png","gem1_0003.png","gem1_0004.png","gem1_0005.png","gem1_0006.png","gem1_0007.png","gem1_0008.png"],12),this.animation.addByNames("1",["gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0001.png","gem2_0002.png","gem2_0003.png","gem2_0004.png","gem2_0005.png","gem2_0006.png","gem2_0007.png","gem2_0008.png"],12),this.animation.addByNames("2",["gem3_0001.png","gem3_0001.png","gem3_0001.png","gem3_0001.png","gem3_0001.png","gem3_0001.png","gem3_0001.png","gem3_0001.png","gem3_0001.png","gem3_0001.png","gem3_0002.png","gem3_0003.png","gem3_0004.png","gem3_0005.png","gem3_0006.png","gem3_0007.png","gem3_0008.png"],12),this.animation.addByNames("3",["gem4_0001.png","gem4_0001.png","gem4_0001.png","gem4_0001.png","gem4_0001.png","gem4_0001.png","gem4_0001.png","gem4_0001.png","gem4_0001.png","gem4_0001.png","gem4_0002.png","gem4_0003.png","gem4_0004.png","gem4_0005.png","gem4_0006.png","gem4_0007.png","gem4_0008.png"],12)};s["com.drderico.towerd.game.items.Gem"]=qt,qt.__name__=["com","drderico","towerd","game","items","Gem"],qt.get=function(t,e){var i=qt.pool.get();return i.reset_(t,e),i.fixedToCamera=!1,i.isMagnetActivated=!1,i.id=qt.ids++,i},qt.__super__=Kt,qt.prototype=e(Kt.prototype,{put:function(){qt.pool.put(this)},reset_:function(t,e){Kt.prototype.reset_.call(this,0|t,Math.round(e)-Math.floor(this.height));for(var i=qt.prevIdx;i==qt.prevIdx;)i=ji.random.int(0,3);this.animation.play(null==i?"null":""+i,!0,!1,-1),qt.prevIdx=i,this._moveUp(),this.killTrailFx()},pickUp:function(){this.createTrailFx(),this.isMagnetActivated=!1,Q.gem_pickup();var t=gt.get();null!=t&&t.show(this.body.center.x,this.body.center.y,J._fxUnderHero),Xe.show("+25",J._fx,this.world.x+this.width/2,this.world.y+0*this.height/2),J.levels[$.curLevelIdx].gfx.remove(this,!1,!0),this.fixedToCamera=!0,this.cameraOffset.set(this.worldPosition.x,this.worldPosition.y),as.tween(this.cameraOffset,{x:Rt.gemsHud.cameraOffset.x,y:Rt.gemsHud.cameraOffset.y},.6,{onComplete:i(this,this._hideGem)},this),z.hud.flyingItems.add(this),$.addGem()},_hideGem:function(t){z.hud.flyingItems.remove(this,!1,!0),this.kill(),Rt.gemsHud.updateText(),null!=this.trailFx&&this.trailFx.stop()},killBonus:function(t){this.kill()},touchedByMagnetArea:function(){if(!this.isMagnetActivated){this.isMagnetActivated=!0,this.stopTween(),this.createTrailFx(),24==j.ach_gems_collected_by_magnet.get_value()?M.unlock("CgkI_f7-8JsKEAIQBQ"):49==j.ach_gems_collected_by_magnet.get_value()?M.unlock("CgkI_f7-8JsKEAIQBg"):74==j.ach_gems_collected_by_magnet.get_value()?M.unlock("CgkI_f7-8JsKEAIQBw"):99==j.ach_gems_collected_by_magnet.get_value()&&M.unlock("CgkI_f7-8JsKEAIQCA");var t=j.ach_gems_collected_by_magnet,e=t.get_value();t.set_value(e+1)}},update:function(){Kt.prototype.update.call(this),this.isMagnetActivated&&J.hero.visible&&(J.hero.body.center.x<this.body.center.x?this.x-=400*ji.game.time.elapsedMS/1e3:this.x+=400*ji.game.time.elapsedMS/1e3,J.hero.body.center.y+5<this.body.center.y?this.y-=400*ji.game.time.elapsedMS/1e3:J.hero.body.center.y-5>this.body.center.y&&(this.y+=400*ji.game.time.elapsedMS/1e3))},__class__:qt});var Zt=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_items_GemMagnetItem"]=Zt,Zt.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_items_GemMagnetItem"],Zt.__interfaces__=[ht],Zt.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Zt};var te=function(){Kt.call(this),this.set_active(!0),this._type=0,E.loadGraphicFromTexture(this,Y.t,"magnetItem_.png"),this.animation.addByNames("1",["magnetItem_.png"],0),Y.setScale(this)};s["com.drderico.towerd.game.items.GemMagnetItem"]=te,te.__name__=["com","drderico","towerd","game","items","GemMagnetItem"],te.get=function(t,e,i){var s=te.pool.get();return s.fixedToCamera=!1,s.reset_(ji.random.float(t,t+i-s.width),e),s.animation.play("1"),s.itemFx=Tt.get(),s},te.__super__=Kt,te.prototype=e(Kt.prototype,{put:function(){te.pool.put(this)},reset_:function(t,e){Kt.prototype.reset_.call(this,t,Math.round(e)-Math.floor(this.height+20)),this._moveUp()},pickUp:function(){null!=this.itemFx&&(this.itemFx.fadeOut(),this.itemFx=null),this.createTrailFx();var t=gt.get();null!=t&&t.show(this.body.center.x,this.body.center.y,J._fxUnderHero),J.levels[$.curLevelIdx].gfx.remove(this,!1,!0),this.fixedToCamera=!0,this.cameraOffset.set(this.worldPosition.x,this.worldPosition.y),as.tween(this.cameraOffset,{x:Rt.itemsHud.getEmptySlotX(0)-this.width/2,y:Rt.itemsHud.cameraOffset.y+this.height/2+26},.6,{onComplete:i(this,this._hideItem),ease:Phaser.Easing.Back.In},this),z.hud.flyingItems.add(this)},_hideItem:function(t){Rt.itemsHud.activateItem(0),z.hud.flyingItems.remove(this,!1,!0),this.kill(),null!=this.trailFx&&this.trailFx.stop()},killBonus:function(t){this.kill()},update:function(){if(Kt.prototype.update.call(this),null!=this.trailFx){if(!this.trailFx.alive)return void(this.trailFx=null);this.trailFx.setPos(this.cameraOffset.x+this.width/2,this.cameraOffset.y+this.height/2)}null!=this.itemFx&&this.itemFx.setPosition(this.x+12,this.y+15)},__class__:te});var ee=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_items_GraveItem"]=ee,ee.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_items_GraveItem"],ee.__interfaces__=[ht],ee.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ee};var ie=function(){this.environmentValue=0,Kt.call(this),this.set_active(!0),this._type=8,E.loadGraphicFromTexture(this,Y.t,"grave_blue.png"),Y.setScale(this)};s["com.drderico.towerd.game.items.GraveItem"]=ie,ie.__name__=["com","drderico","towerd","game","items","GraveItem"],ie.get=function(t,e,i,s){var n=ie.pool.get();return n.frameName=ie.textures[s],n.reset_(ji.random.float(t,t+i-n.width),e),n.fixedToCamera=!1,n.environmentValue=s,n},ie.__super__=Kt,ie.prototype=e(Kt.prototype,{put:function(){ie.pool.put(this)},reset_:function(t,e){Kt.prototype.reset_.call(this,Math.round(t),e)},pickUp:function(){ft.get().show(this.body.center.x,this.body.center.y,this.environmentValue),this.y+=this.height,this.frameName=ie.texturesDestroyed[this.environmentValue],this.x+=1*ie.texturesDestroyedOffsetX[this.environmentValue],this.y-=this.height,r.remove(j.deathLevels,j.level.get_value()),Q.tombExplosion(),ri.startDelay=0;for(var t=0,e=ji.random.int(2,6);t<e;){t++;ri.get().reset_(this.worldPosition.x+this.width/2+1*ji.random.int(-5,5),this.worldPosition.y+25+1*ji.random.int(-10,10)),ri.startDelay+=.1}},killBonus:function(t){this.kill()},__class__:ie});var se=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_items_HealthItem"]=se,se.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_items_HealthItem"],se.__interfaces__=[ht],se.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:se};var ne=function(){Kt.call(this),this.set_active(!0),this._type=2,E.loadGraphicFromTexture(this,Y.t,"heartItem0001.png"),this.animation.addByNames("1",["heartItem0001.png","heartItem0002.png","heartItem0001.png","heartItem0001.png","heartItem0001.png"],16),Y.setScale(this)};s["com.drderico.towerd.game.items.HealthItem"]=ne,ne.__name__=["com","drderico","towerd","game","items","HealthItem"],ne.get=function(t,e,i){var s=ne.pool.get();return s.reset_(ji.random.float(t,t+i-s.width),e),s.fixedToCamera=!1,s.animation.play("1"),s.itemFx=yt.get(),s},ne.__super__=Kt,ne.prototype=e(Kt.prototype,{put:function(){ne.pool.put(this)},reset_:function(t,e){Kt.prototype.reset_.call(this,Math.round(t),Math.round(e)-Math.floor(this.height+20)),this._moveUp()},pickUp:function(){null!=this.itemFx&&(this.itemFx.fadeOut(),this.itemFx=null),this.createTrailFx(),Q.powerup_pickup();var t=gt.get();null!=t&&t.show(this.body.center.x,this.body.center.y,J._fxUnderHero),J.levels[$.curLevelIdx].gfx.remove(this,!1,!0),this.fixedToCamera=!0,this.cameraOffset.set(this.worldPosition.x,this.worldPosition.y),as.tween(this.cameraOffset,{x:Rt.livesHud.cameraOffset.x,y:Rt.livesHud.cameraOffset.y},.6,{onComplete:i(this,this._hideItem),ease:Phaser.Easing.Back.In},this),z.hud.flyingItems.add(this),$.addHealth(1,!1)},_hideItem:function(t){$.addHealth(0),z.hud.flyingItems.remove(this,!1,!0),this.kill(),null!=this.trailFx&&this.trailFx.stop()},killBonus:function(t){this.kill()},update:function(){if(Kt.prototype.update.call(this),null!=this.trailFx){if(!this.trailFx.alive)return void(this.trailFx=null);this.trailFx.setPos(this.cameraOffset.x+this.width/2,this.cameraOffset.y+this.height/2)}null!=this.itemFx&&this.itemFx.setPosition(this.x+13,this.y+13)},__class__:ne});var oe=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_items_ShieldItem"]=oe,oe.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_items_ShieldItem"],oe.__interfaces__=[ht],oe.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:oe};var re=function(){Kt.call(this),this.set_active(!0),this._type=1,E.loadGraphicFromTexture(this,Y.t,"shieldItem_0001.png"),this.animation.addByNames("1",["shieldItem_0001.png","shieldItem_0001.png","shieldItem_0001.png","shieldItem_0001.png","shieldItem_0002.png","shieldItem_0003.png","shieldItem_0004.png","shieldItem_0005.png"],8),Y.setScale(this)};s["com.drderico.towerd.game.items.ShieldItem"]=re,re.__name__=["com","drderico","towerd","game","items","ShieldItem"],re.get=function(t,e,i){var s=re.pool.get();return s.reset_(ji.random.float(t,t+i-s.width),e),s.fixedToCamera=!1,s.animation.play("1"),s.itemFx=It.get(),s},re.__super__=Kt,re.prototype=e(Kt.prototype,{put:function(){re.pool.put(this)},reset_:function(t,e){Kt.prototype.reset_.call(this,t,Math.round(e)-Math.floor(this.height+20)),this._moveUp()},pickUp:function(){null!=this.itemFx&&(this.itemFx.fadeOut(),this.itemFx=null),this.createTrailFx();var t=gt.get();null!=t&&t.show(this.body.center.x,this.body.center.y,J._fxUnderHero),J.levels[$.curLevelIdx].gfx.remove(this,!1,!0),this.fixedToCamera=!0,this.cameraOffset.set(this.worldPosition.x,this.worldPosition.y),as.tween(this.cameraOffset,{x:Rt.itemsHud.getEmptySlotX(1)-this.width/2,y:Rt.itemsHud.cameraOffset.y+this.height/2+26},.6,{onComplete:i(this,this._hideItem),ease:Phaser.Easing.Back.In},this),z.hud.flyingItems.add(this)},_hideItem:function(t){Rt.itemsHud.activateItem(1),z.hud.flyingItems.remove(this,!1,!0),this.kill(),null!=this.trailFx&&this.trailFx.stop()},killBonus:function(t){this.kill()},update:function(){if(Kt.prototype.update.call(this),null!=this.trailFx){if(!this.trailFx.alive)return void(this.trailFx=null);this.trailFx.setPos(this.cameraOffset.x+this.width/2,this.cameraOffset.y+this.height/2)}null!=this.itemFx&&this.itemFx.setPosition(this.x+14,this.y+15)},__class__:re});var ae=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_items_kitty_Kitty"]=ae,ae.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_items_kitty_Kitty"],ae.__interfaces__=[ht],ae.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ae};var le=function(){Kt.call(this),this.set_active(!0),this._type=6,E.loadGraphicFromTexture(this,Y.t,"kitty1_body_anim_0001.png"),this.animation.addByNames("1",["kitty1_body_anim_0001.png","kitty1_body_anim_0002.png","kitty1_body_anim_0003.png","kitty1_body_anim_0004.png"],8),this.animation.addByNames("2",["kitty2_body_anim_0001.png","kitty2_body_anim_0002.png","kitty2_body_anim_0003.png","kitty2_body_anim_0004.png"],8),this.animation.addByNames("3",["kitty3_body_anim_0001.png","kitty3_body_anim_0002.png","kitty3_body_anim_0003.png","kitty3_body_anim_0004.png"],8),this.animation.addByNames("4",["kitty4_body_anim_0001.png","kitty4_body_anim_0002.png","kitty4_body_anim_0003.png","kitty4_body_anim_0004.png"],8),Y.setScale(this),this.head=new he};s["com.drderico.towerd.game.items.kitty.Kitty"]=le,le.__name__=["com","drderico","towerd","game","items","kitty","Kitty"],le.get=function(t,e,i){var s=le.pool.get();return s.reset_(ji.random.float(t,t+i-s.width),e),s},le.__super__=Kt,le.prototype=e(Kt.prototype,{put:function(){le.pool.put(this)},reset_:function(t,e){Kt.prototype.reset_.call(this,t,e),this.head.animName=ji.random.getObject_String(le.t),this.animation.play(this.head.animName,!0),this.head.reset_(this.x+this.width/2-this.head.width/2-8|0,this.y-this.head.height+8|0),this._moveUp()},_moveUp:function(){this._tween=Y.delay(ji.random.float(1,2),i(this,this.changeHeadAnim),null,this)},changeHeadAnim:function(t){this.head.changeHeadAngle(),this._moveUp(),this.inCamera&&(Xe.show(Y.tongue.get("$MEOW"),J._fx,this.head.world.x+30,this.head.world.y-6),Q.meow())},pickUp:function(){Q.get_kitty(),Xe.show("+250",J._fx,this.head.world.x+this.head.body.width/2,this.head.world.y),$.addScore(250),wt.get().show(this.head.world.x+30,this.world.y-10,J._fxUnderHero),this.kill(),this.head.kill()},killBonus:function(){this.kill(),this.head.kill()},__class__:le});var he=function(){this.animName="",lt.call(this),Y.enableBody(this),this.set_moves(!1),this.set_immovable(!0),E.loadGraphicFromTexture(this,Y.t,"kitty1_head_anim_0001.png"),this.animation.addByNames("lr1",["kitty1_head_anim_0002.png","kitty1_head_anim_0001.png","kitty1_head_anim_0003.png"],8,!1),this.animation.addByNames("rl1",["kitty1_head_anim_0003.png","kitty1_head_anim_0001.png","kitty1_head_anim_0002.png"],8,!1),this.animation.addByNames("lr2",["kitty2_head_anim_0002.png","kitty2_head_anim_0001.png","kitty2_head_anim_0003.png"],8,!1),this.animation.addByNames("rl2",["kitty2_head_anim_0003.png","kitty2_head_anim_0001.png","kitty2_head_anim_0002.png"],8,!1),this.animation.addByNames("lr3",["kitty3_head_anim_0002.png","kitty3_head_anim_0001.png","kitty3_head_anim_0003.png"],8,!1),this.animation.addByNames("rl3",["kitty3_head_anim_0003.png","kitty3_head_anim_0001.png","kitty3_head_anim_0002.png"],8,!1),this.animation.addByNames("lr4",["kitty4_head_anim_0002.png","kitty4_head_anim_0001.png","kitty4_head_anim_0003.png"],8,!1),this.animation.addByNames("rl4",["kitty4_head_anim_0003.png","kitty4_head_anim_0001.png","kitty4_head_anim_0002.png"],8,!1),Y.setScale(this)};s["com.drderico.towerd.game.items.kitty.KittyHead"]=he,he.__name__=["com","drderico","towerd","game","items","kitty","KittyHead"],he.__super__=lt,he.prototype=e(lt.prototype,{destroy:function(t){},reset_:function(t,e){this.animation.play("rl"+this.animName),lt.prototype.reset_.call(this,t,e)},changeHeadAngle:function(){this.animations.currentAnim.name=="lr"+this.animName?this.animation.play("rl"+this.animName):this.animation.play("lr"+this.animName)},__class__:he});var ce=function(){};s["com.drderico.towerd.game.levelGen.LCV"]=ce,ce.__name__=["com","drderico","towerd","game","levelGen","LCV"];var _e=function(){};s["com.drderico.towerd.game.levelGen.LG"]=_e,_e.__name__=["com","drderico","towerd","game","levelGen","LG"],_e.create=function(){_e.levels=[],_e.levelSimple1=new pe,_e.levelSimple2=new pe,_e.levelSimple3=new pe,_e.levelTall=new de,_e.levels[0]=_e.levelSimple1,_e.levels[1]=_e.levelSimple2,_e.levels[2]=_e.levelSimple3;for(var t=0,e=D.MAX_ENV_AMOUNT;t<e;){var i=t++;_e.envShuffle[i]=i}_e.curLevelEnv=j.envSetting.get_value(),_e.shuffleEnvValues()},_e.createLevel=function(t,e,i){if(null==i&&(i=!1),null==e&&(e=!1),null==t&&(t=!1),!t&&_e.get_prevLevel()==_e.levelTall&&!i)return _e.curLevelNum--,void _e.goToNextLevel();var s=_e.curLevelNum<10||_e.simpleLevelsCnt<6||et.active||t||ji.random.float(0,100)<60;_e.curLevelNum>=10&&_e.simpleLevelsCnt>=8&&!e&&!t&&(s=!1),et.active&&t&&ji.game.rnd.sow([8]),i||(s?(_e.levels[0]=_e.levelSimple1,_e.levels[1]=_e.levelSimple2,_e.levels[2]=_e.levelSimple3,_e.simpleLevelsCnt++):(_e.levels[0]=_e.levelSimple1,_e.levels[1]=_e.levelSimple2,_e.levels[2]=_e.levelSimple3,_e.levels[_e.curLevelIdx]=_e.levelTall,_e.simpleLevelsCnt=0)),e||t?_e.get_curLevel().generate(null,t,e):_e.get_curLevel().generate(_e.get_prevLevel(),t,e),_e.setLevelGfxHeight(),_e.get_prevLevel()==_e.levelTall&&-1==--_e.curLevelIdx&&(_e.curLevelIdx=2),i||_e.goToNextLevel()},_e.setLevelGfxHeight=function(){var t=16*(_e.get_curLevel().H+6);_e.get_curLevel().gfxHeight=Math.floor(t)},_e.shuffleEnvValues=function(){for(;;)if(ji.random.shuffle_Int(_e.envShuffle),_e.envShuffleIdx=_e.envShuffle.indexOf(_e.curLevelEnv),_e.envShuffleIdx!=_e.envShuffle.length-1)break},_e.goToNextLevel=function(){_e.curLevelNum++,_e.curLevelIdx++,_e.curLevelIdx=_e.curLevelIdx%3,_e.curLevelNum%25+1==25&&(++_e.envShuffleIdx==D.MAX_ENV_AMOUNT&&(_e.curLevelEnv=_e.envShuffle[0],_e.shuffleEnvValues()),_e.curLevelEnv=_e.envShuffle[_e.envShuffleIdx])},_e.get_prevLevel=function(){return _e.curLevelIdx<0?null:0==_e.curLevelIdx?_e.levels[2]:_e.levels[_e.curLevelIdx-1]},_e.get_curLevel=function(){return _e.levels[_e.curLevelIdx]},_e.get_nextLevel=function(){return 2==_e.curLevelIdx?_e.levels[0]:_e.levels[_e.curLevelIdx+1]};var ue=function(){this.isWide=!1,this.myEnvValue=0,this.levelHasBlocks=!1,this.lookId=0,this.futureXBoundMax=0,this.futureXBoundMin=0,this.futureXtiled=0,this.Xtiled=0,this.hasLiquid=!1,this.type=0,this.fireBallOrFlyingEnemyLevel=!1,this.pits=[],this.gems=[],this.coins=[],this.ceilPits=[],this.floorParts=[],this.canPlaceItemsParts=[],this.collisions=[],this.ceilParts=[],this.grid=[],this.platforms=[],this.walls=[],this.prevLevelSaws=[],this.prevLevelPits=[]};s["com.drderico.towerd.game.levelGen.Level"]=ue,ue.__name__=["com","drderico","towerd","game","levelGen","Level"],ue.prototype={createGridArray:function(){for(var t=0,e=this.H;t<e;){var i=t++;null==this.grid[i]&&(this.grid[i]=[]);for(var s=0,n=this.W;s<n;){var o=s++;this.grid[i][o]=0}}},clear:function(){this.recycleBeforeRegeneration(),this.canPlaceItemsParts.length=0,this.floorParts.length=0,this.pits.length=0,this.ceilPits.length=0,this.gems.length=0,this.coins.length=0,this.ceilParts.length=0,this.platforms.length=0,this.walls.length=0,this.collisions.length=0,this.goal=null,this.item=null},recycleBeforeRegeneration:function(){for(var t=0,e=this.floorParts;t<e.length;){var i=e[t];++t,i.put()}for(var s=0,n=this.ceilParts;s<n.length;){var o=n[s];++s,o.put()}null!=this.ladder&&(this.ladder.put(),this.ladder=null);for(var r=0,a=this.pits;r<a.length;){var l=a[r];++r,l.put()}for(var h=0,c=this.ceilPits;h<c.length;){var _=c[h];++h,_.put()}for(var u=0,d=this.gems;u<d.length;){var p=d[u];++u,p.put()}for(var g=0,f=this.coins;g<f.length;){var m=f[g];++g,m.put()}for(var v=0,y=this.walls;v<y.length;){var x=y[v];++v,x._inPool||(x._inPool=!0,x._weak=!1,ss._pool.putUnsafe(x))}for(var w=0,b=this.collisions;w<b.length;){var T=b[w];++w,T.put()}null!=this.goal&&this.goal.put(),null!=this.item&&this.item.put()},setX:function(){this.Xtiled=this.futureXtiled,this.X=16*this.Xtiled|0},makeCollisions:function(t,e,i,s){null==s&&(s=!0),null==i&&(i=273);for(var n=0,o=0,r=1==this.grid[t][0],a=0,l=this.W+1;a<l;){var h=a++;if(r)if(h!=this.W&&1==this.grid[t][h])++n;else{0!=o&&++n;var c=pi.get();c.isFloor=!0,c.canPlaceLadder=s,c.x=o,c.width=n,c.height=1,c.y=t,c.type=-1,c.allowCollisions=i,e.push(c),o=h,r=!1,n=0}else 1!=this.grid[t][h]?++o:(++o,r=!0)}},createGrid:function(){},drawOnGrid:function(t,e,i,s,n){null==n&&(n=1);for(var o=e,r=e+s;o<r;)for(var a=o++,l=t,h=t+i;l<h;){var c=l++;this.grid[a][c]=n}},getFloorY:function(){return this.H-4-1},afterWork:function(){},createWalls:function(){},drawCeil:function(){for(var t=0,e=this.ceilPits;t<e.length;){var i=e[t];++t,6==i.type?(this.drawOnGrid(i.x,i.y,i.width,i.height,-1),this.drawOnGrid(i.x,i.y+i.height,i.width,1),this.drawOnGrid(i.x,i.y,1,i.height),this.drawOnGrid(i.x+i.width-1,i.y,1,i.height)):(this.drawOnGrid(i.x,i.y-i.height,i.width,i.height+1,0),this.drawOnGrid(i.x-1,i.y-i.height,1,i.height),this.drawOnGrid(i.x+i.width,i.y-i.height,1,i.height),this.drawOnGrid(i.x-1,i.y-i.height-1,i.width+2,1))}},drawFloor:function(t){null==t&&(t=!0);for(var e=0,i=this.pits;e<i.length;){var s=i[e];switch(++e,s.type){case 0:this.drawOnGrid(s.x,s.y,s.width,s.height,0),this.drawOnGrid(s.x,s.y+1,s.width,s.height-1,4);break;case 1:this.drawOnGrid(s.x,s.y,s.width,s.height,0),this.drawOnGrid(s.x,s.y+1,s.width,s.height-1,3);break;case 2:this.drawOnGrid(s.x,s.y,s.width,s.height,0),this.drawOnGrid(s.x,s.y+s.height-1,s.width,1,2);break;case 3:this.drawOnGrid(s.x,s.y-1,s.width,1,2);break;case 6:this.drawOnGrid(s.x,s.y-s.height,s.width,s.height+1,-1),this.drawOnGrid(s.x,s.y-s.height,s.width,1),this.drawOnGrid(s.x,s.y-s.height,1,s.height+1),this.drawOnGrid(s.x+s.width-1,s.y-s.height,1,s.height+1);break;case 12:this.drawOnGrid(s.x,s.y,s.width,s.height,0)}pi.isPit(s)&&(this.drawOnGrid(s.x-1,s.y+1,1,s.height),this.drawOnGrid(s.x+s.width,s.y+1,1,s.height),this.drawOnGrid(s.x,s.y+s.height,s.width,1))}},generate:function(t,e,i){if(null==i&&(i=!1),this.myEnvValue=_e.curLevelEnv,this.prevLevel=t,this.chestFloorPart=null,this.prevLevelSaws.length=0,this.prevLevelPits.length=0,null!=t)for(var s=0,n=this.prevLevel.pits;s<n.length;){var o=n[s];++s,5==o.type&&o.y<=this.getFloorY()-3&&this.prevLevelSaws.push(o),this.prevLevelPits.push(o)}},getCeilY:function(){return 3},placeItems:function(t){if(null==t&&(t=-1),(j.level.get_value()+1)%3==0||-1!=t){ce.itemId=t,ce.placeItemsPartsArray.length=0,-1==ce.itemId&&(j.heroLives.get_value()==j.heroLivesMax.get_value()?ce.itemId=q.getNewItemType(2):ce.itemId=q.getNewItemType());for(var e=0,i=this.canPlaceItemsParts;e<i.length;){var s=i[e];++e,s!=this.ladderFloorPart&&s!=this.chestFloorPart&&ce.placeItemsPartsArray.push(s)}for(var n=0,o=this.pits;n<o.length;){var r=o[n];if(++n,r!=this.chestFloorPart&&6==r.type){for(var a=!0,l=0,h=this.pits;l<h.length;){var c=h[l];if(++l,c!=r&&3==c.type&&c.x==r.x){a=!1;break}}a&&ce.placeItemsPartsArray.push(r)}}0!=ce.placeItemsPartsArray.length&&(ce.itemPart=ji.random.getObject_com_drderico_towerd_game_stuff_LgObject(ce.placeItemsPartsArray),this.item=pi.get(),this.item.type=11,this.item.itemType=ce.itemId,this.item.x=ce.itemPart.x+1,this.item.width=ce.itemPart.width-2,this.item.y=ce.itemPart.y,6==ce.itemPart.type&&(this.item.y-=ce.itemPart.height))}},placeEnemies:function(){for(var t=this.fireBallOrFlyingEnemyLevel,e=this.fireBallOrFlyingEnemyLevel,i=[],s=!1,n=[],o=!1,a=0,l=this.pits;a<l.length;){var h=l[a];++a,6==h.type&&(o=!0,n.push(h))}o||(t=!1);var c=pi.get();c.x=0,c.width=0,n.push(c),(c=pi.get()).x=this.W,c.width=0,n.push(c);for(var _=[],u=0,d=this.canPlaceItemsParts;u<d.length;){var p=d[u];if(++u,p!=this.ladderFloorPart&&p!=this.chestFloorPart&&p!=ce.itemPart)for(var g=0;g<n.length;){var f=n[g];if(++g,f.x==p.x+p.width||p.x==f.x+f.width){if(p.x==f.x+f.width)for(var m=0,v=this.pits;m<v.length;){var y=v[m];if(++m,(pi.isPit(y)||6==y.type)&&(y.x==p.x+p.width||p.x+p.width==this.W)){s=!0,6==y.type&&y.hasSaw&&(s=!1),s&&p.width>=1&&_.push(p);break}}else for(var x=0,w=this.pits;x<w.length;){var b=w[x];if(++x,(pi.isPit(b)||6==b.type)&&(0==p.x||p.x==b.x+b.width)){s=!0,6==b.type&&b.hasSaw&&(s=!1),s&&p.width>=1&&_.push(p);break}}break}}}if(this.isWide)for(var T=0;T<n.length;){var S=n[T];++T,S!=this.ladderFloorPart&&S!=this.chestFloorPart&&S!=ce.itemPart&&(S.width>8&&!S.hasSaw&&!S.hasSpikes&&_.push(S))}if(0==_.length)!1;else for(var I=0,k=this.isWide?2:1;I<k;){I++;if(0==_.length)break;var F=ji.random.getObject_com_drderico_towerd_game_stuff_LgObject(_),P=pi.get();P.x=F.x,P.width=F.width,6==F.type?P.y=F.y-F.height:P.y=F.y,P.type=8,i.push(P),r.remove(_,F)}if(t){for(var C=0,E=this.pits;C<E.length;){var B=E[C];if(++C,5==B.type&&this.getFloorY()-B.y>=5){t=!1,e=!1;break}}if(t){var L=pi.get();L.x=0,L.width=this.W,L.y=this.getFloorY()-ji.random.int(5,6),L.type=9,i.push(L)}}if(e){var A=pi.get();A.x=0,A.width=this.W,A.y=this.getFloorY()-ji.random.int(5,7),A.type=10,i.push(A)}if(0!=i.length){var O=null;if(i.length>=2&&ji.random.float(0,100)<30&&(O=ji.random.getObject_com_drderico_towerd_game_stuff_LgObject(i),r.remove(i,O),this.pits.push(O)),O=ji.random.getObject_com_drderico_towerd_game_stuff_LgObject(i),r.remove(i,O),this.pits.push(O),i.length>0)for(var M=0;M<i.length;){var G=i[M];++M,G.put()}i.length=0}},placeHero:function(){for(var t=[],e=0,i=this.canPlaceItemsParts;e<i.length;){var s=i[e];++e,s!=this.chestFloorPart&&t.push(s)}for(var n=t[0],o=n.width,r=0;r<t.length;){var a=t[r];++r,a.width>o&&(n=a,o=a.width)}this.heroX=n.x+n.width/2|0,this.heroFace=this.heroX>=this.W-this.heroX?1:16},placeGems:function(t,e,i){if(null==i&&(i=4),null==e&&(e=3),null==t&&(t=0),ce.gem=null,ce.prevGemX=2147483647,0==t&&(t=ji.random.int(0,2)),t>0){ce.parts.length=0;for(var s=0,n=this.pits;s<n.length;){var o=n[s];++s,o!=this.chestFloorPart&&o!=this.ladderFloorPart&&(5==o.type||o.hasSaw||ce.parts.push(o))}for(var a=0,l=this.canPlaceItemsParts;a<l.length;){var h=l[a];++a,h!=this.chestFloorPart&&h!=this.ladderFloorPart&&ce.parts.push(h)}for(ce.parts.length<t&&(t=ce.parts.length);0!=t&&0!=ce.parts.length;){var c=ji.random.getObject_com_drderico_towerd_game_stuff_LgObject(ce.parts);if(c.isFloor){for(ce.gem=pi.get(),ce.tries=5;;){if(ce.gem.x=ji.random.int(16*c.x,16*(c.x+c.width-2)),Math.abs(ce.gem.x-ce.prevGemX)>=60)break;if(0==--ce.tries){ce.gem.put(),ce.gem=null;break}}if(null!=ce.gem){var _=c.y-ji.random.int(e,i);ce.gem.y=16*_,this.gems.push(ce.gem),--t}}else if(6==c.type){for(ce.gem=pi.get(),ce.tries=5;;){if(ce.gem.x=ji.random.int(16*c.x,16*(c.x+c.width-2)),Math.abs(ce.gem.x-ce.prevGemX)>60)break;if(0==--ce.tries){ce.gem.put(),ce.gem=null;break}}if(null!=ce.gem){ce.gem.x<16?ce.gem.x=16:ce.gem.x>16*(this.W-1)&&(ce.gem.x=16*(this.W-2));var u=16*(c.y-c.height-ji.random.int(e,i))|0;ce.gem.y=u,this.gems.push(ce.gem),--t}}else{ce.gem=pi.get(),ce.gem.x=16*(c.x+c.width/2)|0;var d=c.y-ji.random.int(e,i);ce.gem.y=16*d,this.gems.push(ce.gem),--t}null!=ce.gem&&(ce.gem.x+=4,ce.prevGemX=ce.gem.x),r.remove(ce.parts,c)}}},placeCoins:function(t){null==t&&(t=0),ce.coin=null,ce.coinsPerPlatform=0,ce.parts.length=0;for(var e=0,i=this.canPlaceItemsParts;e<i.length;){var s=i[e];++e,s!=this.chestFloorPart&&s!=this.ladderFloorPart&&ce.parts.push(s)}for(var n=0,o=ce.parts;n<o.length;){var r=o[n];if(++n,ce.coinsPerPlatform=0==t?ji.random.int(1,5):t,ce.coinsPerPlatform>0){ce.maxCoins=(16*r.width/24|0)-1;var a=ce.coinsPerPlatform,l=ce.maxCoins;ce.coinsPerPlatform=a>l?l:a,ce.deltaX=(16*r.width-24)/ce.coinsPerPlatform;for(var h=0,c=ce.coinsPerPlatform;h<c;){var _=h++;ji.random.float(0,100)<70&&(ce.coin=pi.get(),ce.coin.x=16*r.x+ce.deltaX/2+_*ce.deltaX|0,r.isFloor||6!=r.type?ce.coin.y=16*r.y:ce.coin.y=16*(r.y-r.height),this.coins.push(ce.coin))}}}ce.coin=null},createCeilPits:function(){if(!(this.ceilParts.length<2))for(ce.blockChance=50,this.fireBallOrFlyingEnemyLevel||this.levelHasBlocks||(ce.blockChance=80);;){for(var t=0,e=this.ceilParts.length-1;t<e;){var i=t++;if(ce.p1=this.ceilParts[i],ce.p2=this.ceilParts[i+1],ce.p2.y==ce.p1.y){ce.pit=pi.get(),ce.pit.x=ce.p1.x+ce.p1.width,ce.pit.y=ce.p1.y,ce.pit.width=ce.p2.x-(ce.p1.x+ce.p1.width),ce.pit.type=0;var s,n=ce.blockChance;s=ji.random.float(0,100)<n?0:ji.random.int(1,2),ce.pit.height=s,this.ceilPits.push(ce.pit),0==ce.pit.height&&(ce.pit.type=6,this.fireBallOrFlyingEnemyLevel||this.levelHasBlocks||0!=this.type?ce.pit.height=ji.random.int(1,1):ce.pit.height=ji.random.int(1,4))}}if(this.ceilPits.length>0)break}},createCeil:function(t,e,i){for(null==i&&(i=-1),null==e&&(e=-1),null==t&&(t=0),ce.prevPlatfMadeLong=!1,ce.wallGapsNum=0,ce.startX=t,ce.floorWidth=e,-1==e&&(ce.floorWidth=this.W),-1==i&&(i=3),ce.prevFloor=null;ce.floorWidth>0;){if(ce.partWidth=ji.random.int(4,12),ce.partWidth>ce.floorWidth){if(ce.floorWidth<8){ce.prevFloor.width+=ce.floorWidth;break}ce.partWidth=ce.floorWidth}if(ce.prevPlatfMadeLong=!1,null!=ce.prevFloor&&ce.startX==ce.prevFloor.x+ce.prevFloor.width&&(ce.prevFloor.width+=ce.partWidth,ce.prevPlatfMadeLong=!0),ce.prevPlatfMadeLong||(ce.prevFloor=pi.get(),ce.prevFloor.x=ce.startX,ce.prevFloor.y=i,ce.prevFloor.width=ce.partWidth,ce.prevFloor.height=1,ce.prevFloor.isFloor=!0,this.ceilParts.push(ce.prevFloor)),ce.startX+=ce.partWidth,ce.floorWidth-=ce.partWidth,ce.gapWidth=ji.random.int(3,12),ce.gapWidth>ce.floorWidth-8){ce.prevFloor.width+=ce.floorWidth;break}ce.floorWidth-=ce.gapWidth,ce.startX+=ce.gapWidth}},placeGoal:function(){if(null==this.goal){if(this.goal=pi.get(),et.active){var t=this.getFloorY();return this.goal.y=16*t,void(this.goal.x=16*(this.W-6))}if(ce.placed=!1,ji.random.float(0,100)<50)for(var e=0,i=this.pits;e<i.length;){var s=i[e];if(++e,6==s.type&&0==this.grid[s.y-s.height-1][s.x])return ce.placed=!0,this.goal.x=ji.random.int(16*s.x+4|0,16*(s.x+s.width-3)),this.goal.y=16*(s.y-s.height),void(this.chestFloorPart=s)}if(!ce.placed){if(ce.maxP=null,ce.maxDist=0,ce.placeX=0,this.canPlaceItemsParts.length>1&&ji.random.float(0,100)<50){for(;;)if(ce.maxP=ji.random.getObject_com_drderico_towerd_game_stuff_LgObject(this.canPlaceItemsParts),ce.maxP!=this.ladderFloorPart)break;ce.placeX=ji.random.int(16*ce.maxP.x+4|0,16*(ce.maxP.x+ce.maxP.width-3))}else for(var n=0,o=this.canPlaceItemsParts;n<o.length;){var r=o[n];++n,Math.abs(r.x-this.ladder.x)>ce.maxDist&&(ce.maxP=r,ce.maxDist=Math.abs(r.x-this.ladder.x),ce.placeX=r.x),Math.abs(r.x+r.width-this.ladder.x)>ce.maxDist&&(ce.maxP=r,ce.maxDist=Math.abs(r.x+r.width-this.ladder.x),ce.placeX=r.x+r.width-3)}ce.placeX=ji.random.float(16*ce.maxP.x+4,16*(ce.maxP.x+ce.maxP.width-3)),ce.placeX=Math.min(16*(this.W-3),ce.placeX),this.goal.x=0|ce.placeX,this.goal.y=16*ce.maxP.y,this.chestFloorPart=ce.maxP,ce.maxP=null}}},createFloorPits:function(t,e){if(null==e&&(e=!1),null==t&&(t=!1),!(this.floorParts.length<2)){this.levelHasBlocks=!1,ce.prevPitH=0;for(var i=0,s=this.floorParts.length-1;i<s;){var n=i++;if(ce.p1=this.floorParts[n],ce.p2=this.floorParts[n+1],ce.p2.y==ce.p1.y&&ce.p2.x-(ce.p1.x+ce.p1.width)>=4){if(ce.pit=pi.get(),ce.pit.x=ce.p1.x+ce.p1.width,ce.pit.y=ce.p1.y,ce.pit.width=ce.p2.x-(ce.p1.x+ce.p1.width),this.fireBallOrFlyingEnemyLevel)ce.pit.height=0;else if(ce.pit.width>8)ce.pit.height=0;else{var o=ji.random.float(0,100)<50?0:ji.random.int(2,4);ce.pit.height=o}if(this.pits.push(ce.pit),0==ce.pit.height)switch(this.drawOnGrid(ce.pit.x,ce.pit.y,ce.pit.width,1),ce.pitContentArray.length=0,this.fireBallOrFlyingEnemyLevel||(e||ce.pitContentArray.push(3),ce.pitContentArray.push(5)),t||ce.pitContentArray.push(6),ce.pit.width>8?ce.pit.type=6:ce.pit.type=ji.random.getObject_Int(ce.pitContentArray),ce.pit.type){case 3:var r=ji.random.int(2,6),a=ce.pit.width;ce.pit.width=r>a?a:r;break;case 5:ce.pit.y-=t&&!e?3:3+(ji.random.float(0,100)<50?ji.random.int(2,5):0);break;case 6:for(this.levelHasBlocks=!0;;)if(ce.pit.height=ji.random.int(1,3),ce.pit.height!=ce.prevPitH)break;if(ce.prevPitH=ce.pit.height,ce.spikesPlaced=!1,ce.pit.height<=2&&ce.pit.width<=4&&(ce.pit.hasSpikes=!0,ce.pit1=pi.get(),ce.pit1.type=3,ce.pit1.x=ce.pit.x,ce.pit1.y=ce.pit.y-ce.pit.height,ce.pit1.width=ce.pit.width,this.pits.push(ce.pit1),ce.spikesPlaced=!0),ce.pit.height>=3&&ji.random.float(0,100)<50){ce.pit.hasSaw=!0,ce.pit1=pi.get(),ce.pit1.type=5,ce.pit1.x=ji.random.int(ce.pit.x-1,ce.pit.x+ce.pit.width);var l=ce.pit.y-ce.pit.height-ji.random.int(4,5);ce.pit1.y=l-3,this.pits.push(ce.pit1)}3!=_e.curLevelEnv&&!ce.spikesPlaced&&!ce.pit.hasSaw&&_e.curLevelNum>=15&&ji.random.float(0,100)<30&&(ce.pit.hasSaw=!0,ce.pit1=pi.get(),ce.pit1.type=13,ce.pit1.x=ce.pit.x,ce.pit1.y=ce.pit.y-ce.pit.height,ce.pit1.width=ce.pit.width,this.pits.push(ce.pit1))}else this.setPitContent(ce.pit)}}}},placeLadder:function(t){ce.tries=0;var e=0,i=!1,s=null!=this.prevLevel;for(this.futureXtiled=0,null!=this.prevLevel&&0==this.prevLevel.type&&0==this.type&&3!=this.prevLevel.lookId&&3!=this.lookId&&(s=!1,this.futureXtiled=this.prevLevel.Xtiled);;)if(this.ladderFloorPart=ji.random.getObject_com_drderico_towerd_game_stuff_LgObject(t),this.ladderFloorPart.canPlaceLadder&&!(this.ladderFloorPart.width<6)){s&&(this.futureXBoundMax=this.prevLevel.Xtiled+this.prevLevel.W-this.ladderFloorPart.x-this.ladderFloorPart.width,this.futureXBoundMin=this.prevLevel.Xtiled-this.ladderFloorPart.x,this.futureXtiled=ji.random.int(this.futureXBoundMin,this.futureXBoundMax)),e=this.futureXtiled+ji.random.int(this.ladderFloorPart.x+2,this.ladderFloorPart.x+this.ladderFloorPart.width-2-2),i=!1;for(var n=0,o=this.prevLevelSaws;n<o.length;){var r=o[n];if(++n,!(e>=this.prevLevel.Xtiled+r.x+3||e+2<this.prevLevel.Xtiled+r.x)){i=!0;break}}for(var a=0,l=this.pits;a<l.length;){var h=l[a];if(++a,5==h.type&&h.y==this.getFloorY()-3||3==h.type){if(this.futureXtiled+h.x>=e+2+2||this.futureXtiled+h.x+h.width+2<=e-2)continue;i=!0;break}}if(!i){if(this.ladder=pi.get(),this.ladder.x=e,this.ladder.y=this.getFloorY(),this.ladder.height=0,null!=this.prevLevel)if(1==this.prevLevel.type&&0==this.prevLevel.lookId)this.ladder.height=-2;else for(var c=0,_=this.prevLevelPits;c<_.length;){var u=_[c];if(++c,6==u.type&&!u.hasSaw&&!u.hasSpikes&&this.ladder.x+2>=this.prevLevel.Xtiled+u.x-4&&this.ladder.x<this.prevLevel.Xtiled+u.x+u.width+4){var d=!0;if(this.ladder.x==u.x+1&&4==u.width&&(d=!1),d){var p=this.ladder.height,g=u.height;this.ladder.height=p>g?p:g}}}break}if(5==++ce.tries)return!1}return this.ladder.x-=this.futureXtiled,!0},createFloors:function(t,e,i,s){for(null==s&&(s=!0),null==i&&(i=-1),null==e&&(e=-1),null==t&&(t=0),-1==e&&(e=this.W),-1==i&&(i=this.getFloorY()),ce.gapChance=50,this.isWide&&(ce.gapChance=100),ce.tries=5,ce.parts.length=0;;){for(ce.prevPlatfMadeLong=!1,ce.wallGapsNum=0,ce.startX=t,ce.floorWidth=e,ce.prevFloor=null;ce.floorWidth>0;){if(ce.partWidth=ji.random.int(8,12),ce.partWidth>ce.floorWidth){if(ce.floorWidth<8){ce.prevFloor.width+=ce.floorWidth;break}ce.partWidth=ce.floorWidth}ce.prevPlatfMadeLong=!1,null!=ce.prevFloor&&ce.startX==ce.prevFloor.x+ce.prevFloor.width&&(ce.prevFloor.width+=ce.partWidth,ce.prevPlatfMadeLong=!0),ce.prevPlatfMadeLong||(ce.prevFloor=pi.get(),ce.prevFloor.x=ce.startX,ce.prevFloor.y=i,ce.prevFloor.width=ce.partWidth,ce.prevFloor.height=1,ce.prevFloor.allowCollisions=273,ce.prevFloor.isFloor=!0,ce.prevFloor.type=-1,ce.parts.push(ce.prevFloor)),ce.startX+=ce.partWidth,ce.floorWidth-=ce.partWidth;var n=ce.gapChance;if(ji.random.float(0,100)<n){if(this.isWide&&ji.random.float(0,100)<70?ce.gapWidth=ji.random.int(8,16):ce.gapWidth=ji.random.int(4,8),4>ce.floorWidth-8){ce.prevFloor.width+=ce.floorWidth;break}ce.gapWidth>ce.floorWidth-8&&(ce.gapWidth=4),ce.floorWidth-=ce.gapWidth,ce.startX+=ce.gapWidth}}if(!(ce.tries>=0&&ce.parts.length<3||ce.parts.length<2))break;for(var o=0,r=ce.parts;o<r.length;){var a=r[o];++o,a.put()}ce.parts.length=0,ce.tries--}for(var l=0,h=ce.parts;l<h.length;){var c=h[l];++l,this.floorParts.push(c),ce.placeItemPart=pi.get(),ce.placeItemPart.x=c.x,ce.placeItemPart.y=c.y,ce.placeItemPart.width=c.width,ce.placeItemPart.type=c.type,ce.placeItemPart.canPlaceLadder=s,this.canPlaceItemsParts.push(ce.placeItemPart)}ce.placeItemPart=null},placeGraves:function(){if(-1!=j.deathLevels.indexOf(_e.curLevelNum)){ce.placeItemsPartsArray.length=0;for(var t=0,e=this.canPlaceItemsParts;t<e.length;){var i=e[t];++t,i!=this.ladderFloorPart&&i!=this.chestFloorPart&&ce.placeItemsPartsArray.push(i)}for(var s=0,n=this.pits;s<n.length;){var o=n[s];++s,o==this.chestFloorPart||6!=o.type&&3!=o.type||ce.placeItemsPartsArray.push(o)}0!=ce.placeItemsPartsArray.length&&(ce.itemPart=ji.random.getObject_com_drderico_towerd_game_stuff_LgObject(ce.placeItemsPartsArray),this.item=pi.get(),this.item.type=11,this.item.itemType=8,this.item.x=ce.itemPart.x+1,this.item.width=ce.itemPart.width-2,this.item.y=ce.itemPart.y,6==ce.itemPart.type&&(this.item.y-=ce.itemPart.height))}},setPitContent:function(t){ji.random.float(0,100)<50?t.type=2:4==this.myEnvValue?t.type=12:t.type=ji.random.float(0,100)<50?0:1},__class__:ue};var de=function(){this.prevLookId=-1,ue.call(this),this.type=1};s["com.drderico.towerd.game.levelGen.LevelComplex"]=de,de.__name__=["com","drderico","towerd","game","levelGen","LevelComplex"],de.__super__=ue,de.prototype=e(ue.prototype,{generate:function(t,e,i){for(null==i&&(i=!1),ue.prototype.generate.call(this,t,e,i),this.fireBallOrFlyingEnemyLevel=!1;;)if(this.clear(),this.gen1(),2==this.lookId?(this.createCeil(),this.isMirrorLevel?this.createFloors(0,this.W-18,this.getFloorY()-15,!1):this.createFloors(18,this.W-18,this.getFloorY()-15,!1),this.createCeilPits(),this.createFloorPits(!0)):3==this.lookId?(this.createCeil(),this.isMirrorLevel?(this.createCeil(0,this.W-15,this.getFloorY()-9),this.createCeil(16,this.W-16,this.getFloorY()-9-19),this.createFloors(0,this.W-15),this.createFloors(0,this.W-15,this.getFloorY()-19,!1),this.createFloors(16,this.W-15,this.getFloorY()-19-19,!1)):(this.createCeil(16,this.W-15,this.getFloorY()-9),this.createCeil(0,this.W-16,this.getFloorY()-9-19),this.createFloors(16,this.W-15),this.createFloors(16,this.W-15,this.getFloorY()-19,!1),this.createFloors(0,this.W-15,this.getFloorY()-19-19,!1)),this.createCeilPits(),this.createFloorPits(!0)):4!=this.lookId&&5!=this.lookId||(this.createCeil(),this.createFloors(0,this.W),this.createCeilPits(),4==this.lookId&&this.createFloorPits(!0)),this.gen2(),this.placeLadder(null))break;this.setX(),3==this.lookId?this.placeCoins(1):this.placeCoins(),this.placeGems(0,1,1),2==this.lookId?this.placeItems(6):this.placeItems(),_e.goToNextLevel(),_e.createLevel(!1,!1,!0)},gen1:function(){for(this.isMirrorLevel=ji.random.float(0,100)<50;;)if(this.lookId=ji.random.int(0,5),this.lookId!=this.prevLookId)break;switch(this.prevLookId=this.lookId,this.lookId){case 0:this.W=22,this.H=46;break;case 1:this.W=30,this.H=46;break;case 2:this.W=48,this.H=35;break;case 3:this.W=48,this.H=58;break;case 4:this.W=38,this.H=46;break;case 5:this.W=42,this.H=60}switch(this.createGridArray(),this.lookId){case 2:for(var t=this.H-20,e=this.H;t<e;)for(var i=t++,s=this.W-30,n=this.W;s<n;){var o=s++,r=this.isMirrorLevel?this.W-1-o:o;this.grid[i][r]=-1}this.drawOnGrid(this.isMirrorLevel?0:18,this.getFloorY()-15,this.W-18,1),this.drawOnGrid(this.isMirrorLevel?this.W-18:0,this.getFloorY(),18,1);break;case 3:this.isMirrorLevel?(this.drawOnGrid(0,this.getFloorY()-19,this.W-15,11,-1),this.drawOnGrid(15,this.getFloorY()-19-19,this.W-15,11,-1),this.drawOnGrid(0,this.getFloorY()-9,this.W-15,1),this.drawOnGrid(15,this.getFloorY()-9-19,this.W-15,1),this.drawOnGrid(0,this.getFloorY()-19,this.W-15,1),this.drawOnGrid(15,this.getFloorY()-19-19,this.W-15,1)):(this.drawOnGrid(15,this.getFloorY()-19,this.W-15,11,-1),this.drawOnGrid(0,this.getFloorY()-19-19,this.W-15,11,-1),this.drawOnGrid(15,this.getFloorY()-9,this.W-15,1),this.drawOnGrid(0,this.getFloorY()-9-19,this.W-15,1),this.drawOnGrid(15,this.getFloorY()-19,this.W-15,1),this.drawOnGrid(0,this.getFloorY()-19-19,this.W-15,1))}},gen2:function(){if(this.createGrid(),0==this.lookId)ji.random.float(0,100)<50?(this.addPlatform(0,this.getFloorY()-5,8,2),this.addPlatform(this.W-8,this.getFloorY()-10,8,2),this.addPlatform(0,this.getFloorY()-15,8,2),this.addPlatform(this.W-8,this.getFloorY()-20,8,2)):(this.addPlatform(this.W-8,this.getFloorY()-5,8,2),this.addPlatform(0,this.getFloorY()-10,8,2),this.addPlatform(this.W-8,this.getFloorY()-15,8,2),this.addPlatform(0,this.getFloorY()-20,8,2)),this.addPlatform(6,this.getFloorY()-25,12,2);else if(1==this.lookId)ji.random.float(0,100)<50?(this.addPlatform(0,this.getFloorY()-5,8,2),this.addPlatform(10,this.getFloorY()-10,8,2),this.addPlatform(this.W-8,this.getFloorY()-15,8,2),this.addPlatform(10,this.getFloorY()-20,8,2),this.addPlatform(0,this.getFloorY()-25,8,2),this.addPlatform(10,this.getFloorY()-30,8,2)):(this.addPlatform(this.W-8,this.getFloorY()-5,8,2),this.addPlatform(10,this.getFloorY()-10,8,2),this.addPlatform(0,this.getFloorY()-15,8,2),this.addPlatform(10,this.getFloorY()-20,8,2),this.addPlatform(this.W-8,this.getFloorY()-25,8,2),this.addPlatform(10,this.getFloorY()-30,8,2));else if(2==this.lookId){this.addPlatform(this.isMirrorLevel?this.W-18:10,this.getFloorY()-5,8,2),this.addPlatform(this.isMirrorLevel?this.W-8:0,this.getFloorY()-10,8,2),this.addPlatform(this.isMirrorLevel?this.W-18:10,this.getFloorY()-15,8,2),this.makeCollisions(this.getFloorY()-15,this.floorParts,256,!1),this.makeCollisions(this.getFloorY(),this.floorParts,256),this.drawOnGrid(this.isMirrorLevel?this.W-1-18:18,this.getFloorY()-15,1,16);var t=pi.get();t.isFloor=!1,t.isWall=!0,t.x=this.isMirrorLevel?this.W-1-18:18,t.width=1,t.height=15,t.y=this.getFloorY()-15,t.type=6,t.allowCollisions=4369,this.collisions.push(t)}else if(3==this.lookId)if(this.isMirrorLevel){this.addPlatform(this.W-6,this.getFloorY()-5,6,2),this.addPlatform(this.W-6-9,this.getFloorY()-10,6,2),this.addPlatform(this.W-6,this.getFloorY()-15,6,2),this.addPlatform(this.W-6-9,this.getFloorY()-19,6,2),this.addPlatform(0,this.getFloorY()-5-19,6,2),this.addPlatform(9,this.getFloorY()-10-19,6,2),this.addPlatform(0,this.getFloorY()-15-19,6,2),this.addPlatform(9,this.getFloorY()-19-19,6,2),this.drawOnGrid(this.W-16,this.getFloorY()-19,1,11),this.drawOnGrid(15,this.getFloorY()-19-19,1,11);var e=pi.get();e.isFloor=!1,e.isWall=!0,e.x=this.W-16,e.width=1,e.height=7,e.y=this.getFloorY()-19,e.type=6,e.allowCollisions=4369,this.collisions.push(e);var i=pi.get();i.isFloor=!1,i.isWall=!0,i.x=15,i.width=1,i.height=7,i.y=this.getFloorY()-19-19,i.type=6,i.allowCollisions=4369,this.collisions.push(i)}else{this.addPlatform(0,this.getFloorY()-5,6,2),this.addPlatform(9,this.getFloorY()-10,6,2),this.addPlatform(0,this.getFloorY()-15,6,2),this.addPlatform(9,this.getFloorY()-19,6,2),this.addPlatform(this.W-6,this.getFloorY()-5-19,6,2),this.addPlatform(this.W-6-9,this.getFloorY()-10-19,6,2),this.addPlatform(this.W-6,this.getFloorY()-15-19,6,2),this.addPlatform(this.W-6-9,this.getFloorY()-19-19,6,2),this.drawOnGrid(15,this.getFloorY()-19,1,11),this.drawOnGrid(this.W-16,this.getFloorY()-19-19,1,11);var s=pi.get();s.isFloor=!1,s.isWall=!0,s.x=15,s.width=1,s.height=7,s.y=this.getFloorY()-19,s.type=6,s.allowCollisions=4369,this.collisions.push(s);var n=pi.get();n.isFloor=!1,n.isWall=!0,n.x=this.W-16,n.width=1,n.height=7,n.y=this.getFloorY()-19-19,n.type=6,n.allowCollisions=4369,this.collisions.push(n)}else if(4==this.lookId)this.addPlatform(0,this.getFloorY()-5,6,2),this.addPlatform(11,this.getFloorY()-10,5,2),this.addPlatform(this.W-6-10,this.getFloorY()-10,5,2),this.addPlatform(this.W-6,this.getFloorY()-5,6,2),this.addPlatform(16,this.getFloorY()-15,6,2),this.addPlatform(0,this.getFloorY()-15,8,2),this.addPlatform(this.W-8,this.getFloorY()-15,8,2),this.addPlatform(6,this.getFloorY()-20,6,2),this.addPlatform(this.W-6-6,this.getFloorY()-20,6,2),this.addPlatform(11,this.getFloorY()-25,16,2),this.addPlatform(3,this.getFloorY()-30,6,2),this.addPlatform(this.W-3-6,this.getFloorY()-30,6,2);else if(5==this.lookId)if(this.isMirrorLevel){this.addPlatform(36,this.getFloorY()-5,6,2),this.addPlatform(24,this.getFloorY()-10,6,2),this.addPlatform(12,this.getFloorY()-15,6,2),this.addPlatform(0,this.getFloorY()-20,6,2),this.addPlatform(12,this.getFloorY()-25,6,2),this.addPlatform(24,this.getFloorY()-30,6,2),this.addPlatform(36,this.getFloorY()-35,6,2),this.addPlatform(0,this.getFloorY()-40,this.W-12,2),this.addPlatform(this.W-16,this.getFloorY()-20,16,2,!1);var o=pi.get();o.type=3,o.x=this.W-16,o.y=this.getFloorY()-20,o.height=1,o.width=16,this.pits.push(o),this.drawOnGrid(o.x,o.y-1,o.width,1,2)}else{this.addPlatform(0,this.getFloorY()-5,6,2),this.addPlatform(12,this.getFloorY()-10,6,2),this.addPlatform(24,this.getFloorY()-15,6,2),this.addPlatform(36,this.getFloorY()-20,6,2),this.addPlatform(24,this.getFloorY()-25,6,2),this.addPlatform(12,this.getFloorY()-30,6,2),this.addPlatform(0,this.getFloorY()-35,6,2),this.addPlatform(12,this.getFloorY()-40,this.W-12,2),this.addPlatform(0,this.getFloorY()-20,16,2,!1);var r=pi.get();r.type=3,r.x=0,r.y=this.getFloorY()-20,r.height=1,r.width=16,this.pits.push(r),this.drawOnGrid(r.x,r.y-1,r.width,1,2)}},addPlatform:function(t,e,i,s,n){null==n&&(n=!0),this.drawOnGrid(t,e,i,s);var o=pi.get();o.isFloor=!0,o.x=t,o.width=i,o.height=s,o.y=e,o.allowCollisions=256,o.type=-1,o.canPlaceLadder=!1,this.platforms.push(o),n&&this.canPlaceItemsParts.push(o)},createGrid:function(){if(this.drawOnGrid(0,this.getFloorY()+1,this.W,4,-1),2!=this.lookId&&this.drawOnGrid(0,this.getFloorY(),this.W,1),2!=this.lookId&&3!=this.lookId&&4!=this.lookId&&5!=this.lookId||this.drawFloor(),this.drawOnGrid(0,0,this.W,3,-1),this.drawOnGrid(0,3,this.W,1),2!=this.lookId&&3!=this.lookId&&4!=this.lookId&&5!=this.lookId||this.drawCeil(),2!=this.lookId){for(var t=0,e=this.floorParts;t<e.length;){var i=e[t];++t,i.put()}this.floorParts.length=0,this.makeCollisions(this.getFloorY(),this.floorParts),3==this.lookId&&(this.makeCollisions(this.getFloorY()-19,this.floorParts),this.makeCollisions(this.getFloorY()-19-19,this.floorParts))}this.createWalls()},afterWork:function(){},createWalls:function(){if(0==this.lookId||1==this.lookId||4==this.lookId||5==this.lookId){var t=this.walls,e=this.H-3-4,i=ss._pool.get();i.setTo(-1,3,1,e),i._inPool=!1,t.push(i);var s=this.walls,n=this.W,o=this.H-3-4,r=ss._pool.get();r.setTo(n,3,1,o),r._inPool=!1,s.push(r)}else if(2==this.lookId)if(this.isMirrorLevel){var a=this.walls,l=this.W,h=this.H-3-4,c=ss._pool.get();c.setTo(l,3,1,h),c._inPool=!1,a.push(c);var _=this.walls,u=this.H-15-3-4,d=ss._pool.get();d.setTo(-1,3,1,u),d._inPool=!1,_.push(d)}else{var p=this.walls,g=this.H-3-4,f=ss._pool.get();f.setTo(-1,3,1,g),f._inPool=!1,p.push(f);var m=this.walls,v=this.W,y=this.H-15-3-4,x=ss._pool.get();x.setTo(v,3,1,y),x._inPool=!1,m.push(x)}else if(3==this.lookId)if(this.isMirrorLevel){var w=this.walls,b=this.W,T=this.H-3-4-19-19,S=ss._pool.get();S.setTo(b,3,1,T),S._inPool=!1,w.push(S);var I=this.walls,k=this.H-3-4-19,F=ss._pool.get();F.setTo(-1,3,1,k),F._inPool=!1,I.push(F);var P=this.walls,C=this.W,E=this.getFloorY()-19-9,B=ss._pool.get();B.setTo(C,E,1,29),B._inPool=!1,P.push(B);var L=this.walls,A=this.getFloorY()-9,O=ss._pool.get();O.setTo(-1,A,1,10),O._inPool=!1,L.push(O)}else{var M=this.walls,G=this.H-3-4-19-19,H=ss._pool.get();H.setTo(-1,3,1,G),H._inPool=!1,M.push(H);var D=this.walls,N=this.W,R=this.H-3-4-19,W=ss._pool.get();W.setTo(N,3,1,R),W._inPool=!1,D.push(W);var U=this.walls,X=this.getFloorY()-19-9,Y=ss._pool.get();Y.setTo(-1,X,1,29),Y._inPool=!1,U.push(Y);var V=this.walls,K=this.W,z=this.getFloorY()-9,j=ss._pool.get();j.setTo(K,z,1,10),j._inPool=!1,V.push(j)}},placeLadder:function(t){if(1==this.lookId||2==this.lookId||0==this.lookId){for(var e=[],i=0,s=this.floorParts;i<s.length;){var n=s[i];++i,n.y==this.getFloorY()&&n.canPlaceLadder&&e.push(n)}return ue.prototype.placeLadder.call(this,e)}return ue.prototype.placeLadder.call(this,this.canPlaceItemsParts)},__class__:de});var pe=function(){ue.call(this),this.H=22,this.type=0,this.Xtiled=0};s["com.drderico.towerd.game.levelGen.LevelSimple"]=pe,pe.__name__=["com","drderico","towerd","game","levelGen","LevelSimple"],pe.__super__=ue,pe.prototype=e(ue.prototype,{generate:function(t,e,i){for(null==i&&(i=!1),ue.prototype.generate.call(this,t,e,i),e&&(this.lookId=0);;){for(;;){if(!e&&_e.curLevelNum>10&&ji.random.float(0,100)<40&&null!=t&&1!=t.lookId&&2!=t.lookId&&3!=t.lookId){for(pe.newLook=0;;)if(pe.newLook=ji.random.int(1,2),pe.prevComplexLook!=pe.newLook)break;this.lookId=pe.newLook,pe.prevComplexLook=pe.newLook}else this.lookId=0;if(3==this.lookId?(this.W=48+ji.random.int(10,48),this.isWide=!0):(this.W=48,this.isWide=!1),this.needToRegenarate=!1,this.createGridArray(),this.clear(),this.fireBallOrFlyingEnemyLevel=0==this.lookId&&ji.random.float(0,100)<50,this.createFloors(),!this.needToRegenarate){e&&et.active&&!i||(2!=this.lookId?this.createFloorPits(1==this.lookId,e||i):this.createFloorPits2());break}}if(this.createCeil(),this.createCeilPits(),this.createGrid(),this.placeLadder(this.canPlaceItemsParts))break}this.setX(),this.placeGoal(),this.placeGems(),e&&et.active||(e||this.placeItems(),0!=this.lookId&&3!=this.lookId||e||this.placeEnemies()),this.placeGraves(),e&&this.placeHero()},createFloorPits2:function(){var t=pi.get();t.x=1,t.y=this.getFloorY(),t.width=this.W-2,this.setPitContent(t),t.height=4,this.pits.push(t)},createGrid:function(){if(this.drawOnGrid(0,this.getFloorY(),this.W,5,-1),2!=this.lookId&&this.drawOnGrid(0,this.getFloorY(),this.W,1),this.drawFloor(2!=this.lookId),2==this.lookId)for(var t=0,e=this.floorParts;t<e.length;){var i=e[t];++t,this.drawOnGrid(i.x,i.y,i.width,2)}this.drawOnGrid(0,0,this.W,3,-1),this.drawOnGrid(0,3,this.W,1),this.drawCeil();for(var s=0,n=this.floorParts;s<n.length;){var o=n[s];++s,o.put()}this.floorParts.length=0,this.makeCollisions(this.getFloorY(),this.floorParts),this.createWalls()},createWalls:function(){var t=this.walls,e=this.H-3-4,i=ss._pool.get();i.setTo(-1,3,1,e),i._inPool=!1,t.push(i);var s=this.walls,n=this.W,o=this.H-3-4,r=ss._pool.get();r.setTo(n,3,1,o),r._inPool=!1,s.push(r)},createFloors:function(t,e,i,s){switch(null==s&&(s=!0),null==i&&(i=-1),null==e&&(e=-1),null==t&&(t=0),this.lookId){case 0:ue.prototype.createFloors.call(this,t,e,i,s);break;case 1:this.createFloorsHardLevel(t,e,i,s);break;case 2:this.createFloorsHardLevel(t,e,-1,s);break;case 3:ue.prototype.createFloors.call(this,t,e,i,s)}},createFloorsHardLevel:function(t,e,i,s){for(null==s&&(s=!0),null==i&&(i=-1),null==e&&(e=-1),null==t&&(t=0),-1==e&&(e=this.W),-1==i&&(i=this.getFloorY()),ce.parts.length=0;;){for(ce.prevPlatfMadeLong=!1,ce.wallGapsNum=0,ce.startX=t,ce.floorWidth=e,ce.prevFloor=null;ce.floorWidth>0;){if(2==this.lookId?ce.partWidth=ji.random.int(5,6):ce.partWidth=ji.random.int(6,8),ce.partWidth>ce.floorWidth){if(ce.floorWidth<6){ce.prevFloor.width+=ce.floorWidth;break}ce.partWidth=ce.floorWidth}if(ce.prevPlatfMadeLong=!1,null!=ce.prevFloor&&ce.startX==ce.prevFloor.x+ce.prevFloor.width&&(ce.prevFloor.width+=ce.partWidth,ce.prevPlatfMadeLong=!0),ce.prevPlatfMadeLong||(ce.prevFloor=pi.get(),ce.prevFloor.x=ce.startX,ce.prevFloor.y=i,ce.prevFloor.width=ce.partWidth,ce.prevFloor.height=1,ce.prevFloor.allowCollisions=273,ce.prevFloor.isFloor=!0,ce.prevFloor.type=-1,ce.parts.push(ce.prevFloor)),ce.startX+=ce.partWidth,ce.floorWidth-=ce.partWidth,2==this.lookId?ce.gapWidth=ji.random.int(6,8):ce.gapWidth=ji.random.int(4,6),4>ce.floorWidth-6){ce.prevFloor.width+=ce.floorWidth;break}ce.gapWidth>ce.floorWidth-6&&(ce.gapWidth=4),ce.floorWidth-=ce.gapWidth,ce.startX+=ce.gapWidth}break}for(var n=0,o=ce.parts;n<o.length;){var r=o[n];++n,this.floorParts.push(r),2==this.lookId&&this.platforms.push(r),ce.placeItemPart=pi.get(),ce.placeItemPart.x=r.x,ce.placeItemPart.y=r.y,ce.placeItemPart.width=r.width,ce.placeItemPart.type=r.type,ce.placeItemPart.canPlaceLadder=s,this.canPlaceItemsParts.push(ce.placeItemPart)}ce.placeItemPart=null},__class__:pe});var ge=function(){this.initScaleY=0,this.initScaleX=0,this.animName="",this.diedFromHero=!1,this.hurtable=!0,this.canHurtHero=!0,lt.call(this),Y.enableBody(this),this.set_moves(!1),this.set_immovable(!0),this.body.allowRotation=!1,this.score=50};s["com.drderico.towerd.game.npcs.NPC"]=ge,ge.__name__=["com","drderico","towerd","game","npcs","NPC"],ge.__interfaces__=[tt],ge.__super__=lt,ge.prototype=e(lt.prototype,{destroy:function(t){this.deactivateTrigger(),this.set_moves(!1),this.healthBar=null,Y.cancelTween(this._tween),Y.cancelTween(this._tweenNotHurtHero),Y.cancelTween(this._tween2),Y.cancelTween(this._tween3),this._tween=null,this._tween2=null,this._tween3=null,this._tweenNotHurtHero=null},onTriggerHurted:function(){},deactivateTrigger:function(){this.disableBody()},onTriggerTouched:function(){J.hero.onLadder||(this.hurtable&&J.hero.body.bottom<=this.body.y+this.body.height/2&&J.hero.body.velocity.y>=0?this.damage(1):this.canHurtHero&&$.hurtHero(this._type),this.canHurtHero=!1,this._tweenNotHurtHero=Y.delay(.2,i(this,this._allowHurtHero),null,this))},_allowHurtHero:function(t){this.canHurtHero=!0,this._tweenNotHurtHero=null},damage:function(t){if(this.health-=t,J.hero.bounceUp(.7),this.health<=0){Q.npcDie(),this.diedFromHero=!0,this.kill(),dt.show(this.body.center.x,this.body.center.y,J._fx),$.addScore(this.score),24==j.ach_killed_npcs.get_value()?M.unlock("CgkI_f7-8JsKEAIQDQ"):49==j.ach_killed_npcs.get_value()?M.unlock("CgkI_f7-8JsKEAIQDg"):74==j.ach_killed_npcs.get_value()?M.unlock("CgkI_f7-8JsKEAIQDw"):99==j.ach_killed_npcs.get_value()&&M.unlock("CgkI_f7-8JsKEAIQEA");var e=j.ach_killed_npcs,i=e.get_value();e.set_value(i+1)}else this.onHurtFromHero();return this},onHurtFromHero:function(){},createHeathBar:function(t,e){this.healthBar=Re.get(this,t,e)},kill:function(){return lt.prototype.kill.call(this),this.diedFromHero&&null!=this.healthBar&&this.healthBar.kill(),this},onTouched:function(){this.onTriggerTouched()},__class__:ge});var fe=function(t,e,i){null==i&&(i=!0),null==e&&(e=!0),this.speed=0,this.needToFlip=!0,ge.call(this),this.set_moves(!1),this.speed=1*t,this.needToFlip=e,this.hurtable=i,this.type=8,this.animName="1"};s["com.drderico.towerd.game.npcs.MovingNpc"]=fe,fe.__name__=["com","drderico","towerd","game","npcs","MovingNpc"],fe.__super__=ge,fe.prototype=e(ge.prototype,{put:function(){},place:function(t,e,i){Y.setScale(this,1,!0),this.dir=ji.random.float(0,100)<50?1:16,this.needToFlip&&this.set_flipX(1==this.dir),t+=this.offsetX*this.scale.x,this.startX=0|t,this.endX=Math.floor(t+i-Math.abs(this.width)),this.animation.play(this.animName,!0),this.reset_(ji.random.int(this.startX+5,this.endX-5),Math.round(e-this.height)+this.offsetY),this.angle=0,this.set_moves(!1),this.diedFromHero=!1,this.body.velocity.set(0,0),this.body.gravity.set(0,0),this.enableBody(),this.health=1,this.createTrigger(),this.startMove(),this.initScaleX=this.scale.x,this.initScaleY=this.scale.y},startMove:function(){1==this.dir?(this._tween=as.tween(this,{x:this.startX},Math.abs(this.x-this.startX)/this.speed,{onComplete:i(this,this.onStartXCompleted)},this),this.needToFlip&&this.set_flipX(!1)):(this._tween=as.tween(this,{x:this.endX},Math.abs(this.x-this.endX)/this.speed,{onComplete:i(this,this.onEndXCompleted)},this),this.needToFlip&&this.set_flipX(!0))},onEndXCompleted:function(t){this.dir=1,this.startMove()},onStartXCompleted:function(t){this.dir=16,this.startMove()},createTrigger:function(){this.body.setSize(Math.abs(this.width)-6|0,0|this.height,3,0)},kill:function(){return ge.prototype.kill.call(this),this.put(),this},__class__:fe});var me=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_npcs_FireBallNpc"]=me,me.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_npcs_FireBallNpc"],me.__interfaces__=[ht],me.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:me};var ve=function(){this.explOffset=0,this.envValue=0,fe.call(this,400,!1,!1),E.loadGraphicFromTexture(this,Y.t,"fireBall_0001.png"),this.animation.addByNames("1",["fireBall_0001.png","fireBall_0002.png"],8),this.animation.addByNames("3",["fireBall_green0001.png","fireBall_green0002.png"],8),this.animation.addByNames("2",["fireBall_ice.png"],0),Y.setScale(this,null,!0),this.cannon=new Ae};s["com.drderico.towerd.game.npcs.FireBallNpc"]=ve,ve.__name__=["com","drderico","towerd","game","npcs","FireBallNpc"],ve.get=function(t){var e=ve.pool.get();return e.envValue=t,e},ve.__super__=fe,ve.prototype=e(fe.prototype,{place:function(t,e,i){switch(t+=16,this.dir=ji.random.float(0,100)<50?1:16,this.cannon.setView(this.envValue),1==this.dir?(this.startX=t+i-24|0,this.endX=t-12|0,this.set_flipX(!1),this.cannon.reset_(Math.round(this.startX-3),e-this.cannon.height/2-this.offsetY|0),this.cannon.set_flipX(!1)):(this.startX=t-16|0,this.endX=t+i-16|0,this.set_flipX(!0),this.cannon.reset_(Math.round(t-6),e-this.cannon.height/2-this.offsetY|0),this.cannon.set_flipX(!0)),this.speed=0|ji.random.float(400,600),this.reset_(this.startX,e-this.height/2|0),this.envValue){case 2:this.animation.play("3",!0),this.explOffset=1==this.dir?34:-34;break;case 3:this.animation.play("2",!0),this.explOffset=1==this.dir?24:-34;break;default:this.animation.play("1",!0),this.explOffset=1==this.dir?40:-36}this.body.setSize(Math.abs(this.width)-6|0,0|this.height,-Math.abs(this.offsetX),0),this.startMove()},startMove:function(){Y.cancelTween(this._tween),this.x=this.startX,this.visible=!0,this.enableBody(),this._tween=as.tween(this,{x:this.endX},Math.abs(this.x-this.endX)/this.speed,{onComplete:i(this,this.onEndXCompleted)},this),this.inCamera&&Q.fireball_spawn()},onEndXCompleted:function(t){this.showExplosion(this.explOffset),this.startMove()},onStartXCompleted:function(t){},put:function(){ve.pool.put(this)},onTriggerTouched:function(){$.hurtHero(this._type),this.showExplosion(),this.visible=!1,this.disableBody(),this.x=this.startX,Y.cancelTween(this._tween),this._tween=Y.delay(1,i(this,this.startMove_),null,this),Q.hero_hurt_by_fireball()},showExplosion:function(t){null==t&&(t=0),_t.show(t+(1==this.dir?this.body.x-this.body.width/2:this.body.x+38),this.body.y+this.height,J._fx,this.animations.currentAnim.name)},startMove_:function(t){this.startMove()},__class__:ve});var ye=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_npcs_FireBeam"]=ye,ye.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_npcs_FireBeam"],ye.__interfaces__=[ht],ye.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ye};var xe=function(){this.state=0,this.touchedTimer=0,this.delayBetweenShows=0,lt.call(this),Y.enableBody(this),E.loadGraphicFromTexture(this,Y.t,"firebeam0001.png"),this.animation.addByNames("1",["firebeam0001.png","firebeam0002.png","firebeam0003.png","firebeam0004.png","firebeam0005.png","firebeam0006.png","firebeam0003.png","firebeam0004.png","firebeam0005.png","firebeam0006.png","firebeam0003.png","firebeam0004.png","firebeam0005.png","firebeam0006.png","firebeam0002.png","firebeam0001.png"],16,!1),this.animation.addByNames("2",["firebeam0001.png","firebeam0002.png","firebeam0003.png","firebeam0004.png","firebeam0005.png","firebeam0006.png","firebeam0003.png","firebeam0004.png","firebeam0005.png","firebeam0006.png","firebeam0002.png","firebeam0001.png"],16,!1),this.animations.getAnimation("1").onComplete.add(i(this,this.onAnimationFinished)),this.animations.getAnimation("2").onComplete.add(i(this,this.onAnimationFinished)),this.set_moves(!1),this.set_immovable(!0),Y.setScale(this)};s["com.drderico.towerd.game.npcs.FireBeam"]=xe,xe.__name__=["com","drderico","towerd","game","npcs","FireBeam"],xe.__interfaces__=[tt],xe.get=function(){return xe.pool.get()},xe.__super__=lt,xe.prototype=e(lt.prototype,{onAnimationFinished:function(t){this.hide()},place:function(t,e,i){this.reset(0|ji.random.float(t,t+i-Math.abs(this.width)),Math.round(e)-110),this.blendMode=PIXI.blendModes.ADD,this.hide(),this.delayBetweenShows=ji.random.float(1.5,2.5),this.touchedTimer=0,this.createTrigger()},createTrigger:function(){this.body.setSize(Math.abs(this.width)/2|0,0|this.height,10,6)},hide:function(){this.state=1,this.touchedTimer=this.delayBetweenShows,this.visible=!1,this.disableBody()},kill:function(){return lt.prototype.kill.call(this),this.put(),this},put:function(){xe.pool.put(this)},destroy:function(t){},update:function(){1==this.state&&this.downTimer(ji.game.time.elapsedMS/1e3)&&(this.visible=!0,this.enableBody(),this.state=0,this.touchedTimer=.5,this.animation.play(ji.random.float(0,100)<50?"1":"2",!0)),lt.prototype.update.call(this)},onTriggerTouched:function(){J.hero.onLadder||1!=this.state&&$.hurtHero(13)},onTriggerHurted:function(){},onTouched:function(){this.onTriggerTouched()},downTimer:function(t){return this.touchedTimer-=t,this.touchedTimer<=0},forceShow:function(){this.touchedTimer=0,this.state=1},__class__:xe});var we=function(t,e,i){this.speedX=0,fe.call(this,t,e,i)};s["com.drderico.towerd.game.npcs.MovingNpcOnFloor"]=we,we.__name__=["com","drderico","towerd","game","npcs","MovingNpcOnFloor"],we.__super__=fe,we.prototype=e(fe.prototype,{kill:function(){return this.diedFromHero?(this.centerOrigin(),Y.cancelTween(this._tween),Y.cancelTween(this._tween2),Y.cancelTween(this._tween3),this.x=this.world.x,this.y=this.world.y,Xe.show("+"+c.string(this.score),J._fx,this.x+this.body.width/2,this.y),J.levels[$.curLevelIdx].enemies.remove(this,!1,!0),J._fx.add(this,!0),this.set_moves(!0),this.body.gravity.y=1600,this.body.velocity.y=-600,this.speedX=1*ji.random.int(-50,50),this.body.velocity.x=this.speedX,this.set_flipX(this.speedX>0),as.tween(this,{angle:this.speedX<0?-720:720},1,{type:2},null),as.tween(this.scale,{x:2*this.scale.x,y:2*this.scale.y},1,null,null),this.animations.stop(),null!=this.healthBar&&this.healthBar.kill()):this.get_moves()||fe.prototype.kill.call(this),this},update:function(){this.get_moves()&&(this.body.velocity.x=this.speedX),fe.prototype.update.call(this),this.get_moves()&&!this.inCamera&&(J._fx.remove(this,!1,!0),fe.prototype.kill.call(this))},onHurtFromHero:function(){Q.hero_hurt_by_fireball(),this._tween.pause(),this.initScaleX=this.scale.x,this._tween2=as.tween(this.scale,{y:.6*this.initScaleY,x:1.2*this.initScaleX},.06,{onComplete:i(this,this._onHurtFromHero)},this),this.animations.paused=!0,dt.show(this.x+this.width/2,this.y,J._fx),Xe.show("+15",J._fx,this.x+this.width/2,this.y+this.height/2),$.addScore(15)},_onHurtFromHero:function(t){this._tween2=as.tween(this.scale,{y:this.initScaleY,x:this.initScaleX},.06,{onComplete:i(this,this._onHurtFromHero2)},this)},_onHurtFromHero2:function(t){this._tween2=Y.delay(1,i(this,this._onHurtFromHero3),null,this)},_onHurtFromHero3:function(t){this.centerOrigin(),this._tween.resume(),this.animations.paused=!1},__class__:we});var be=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_npcs_FlyingNpc"]=be,be.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_npcs_FlyingNpc"],be.__interfaces__=[ht],be.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:be};var Te=function(){we.call(this,100),E.loadGraphicFromTexture(this,Y.t,"bat_0001.png"),this.animation.addByNames("1",["bat_0001.png","bat_0002.png","bat_0003.png","bat_0002.png"],10),this.animation.addByNames("2",["bat2_0001.png","bat2_0002.png","bat2_0003.png","bat2_0002.png"],10),this.animation.addByNames("3",["bat3_0001.png","bat3_0002.png","bat3_0003.png","bat3_0002.png"],10),this.animation.addByNames("4",["bat4_0001.png","bat4_0002.png","bat4_0003.png","bat4_0002.png"],10),Y.setScale(this,1,!0),this.score=1e3};s["com.drderico.towerd.game.npcs.FlyingNpc"]=Te,Te.__name__=["com","drderico","towerd","game","npcs","FlyingNpc"],Te.get=function(){return Te.pool.get()},Te.__super__=we,Te.prototype=e(we.prototype,{place:function(t,e,i){this.animName=ji.random.getObject_String(Te.t),Y.setScale(this,1,!0),we.prototype.place.call(this,t,e,i),this._tween2=as.tween(this,{y:this.y-24},ji.random.float(.5,.8),{type:5},null)},createTrigger:function(){this.body.setSize(Math.abs(this.width)-6|0,this.height-12|0,3,9)},kill:function(){return we.prototype.kill.call(this),this.diedFromHero&&Y.cancelTween(this._tween2),this},destroy:function(t){we.prototype.destroy.call(this),Y.cancelTween(this._tween2),this._tween2=null},put:function(){Te.pool.put(this)},__class__:Te});var Se=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_npcs_Npc1"]=Se,Se.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_npcs_Npc1"],Se.__interfaces__=[ht],Se.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Se};var Ie=function(){we.call(this,40),E.loadGraphicFromTexture(this,Y.t,"enemy1_0001.png"),this.animation.addByNames("1",["enemy1_0001.png","enemy1_0002.png"],4),this.animation.addByNames("2",["enemy1_1_0001.png","enemy1_1_0002.png"],4),this.animation.addByNames("3",["enemy1_2_0001.png","enemy1_2_0002.png"],4),Y.setScale(this,null,!0)};s["com.drderico.towerd.game.npcs.Npc1"]=Ie,Ie.__name__=["com","drderico","towerd","game","npcs","Npc1"],Ie.get=function(){return Ie.pool.get()},Ie.__super__=we,Ie.prototype=e(we.prototype,{createTrigger:function(){this.body.setSize(Math.abs(this.width)-10|0,0|this.height,5,2==Ie.view?14:0)},place:function(t,e,i){for(;;)if(Ie.view=_e.curLevelNum>=15&&ji.random.float(0,100)<25?2:ji.random.int(0,1),Ie.view!=Ie.prevView)break;Ie.prevView=Ie.view,this.animName=Ie.t[Ie.view],2==Ie.view?this.score=500:this.score=50,we.prototype.place.call(this,t,e,i)},put:function(){Ie.pool.put(this)},__class__:Ie});var ke=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_npcs_Npc2"]=ke,ke.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_npcs_Npc2"],ke.__interfaces__=[ht],ke.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ke};var Fe=function(){we.call(this,40),E.loadGraphicFromTexture(this,Y.t,"enemy2_0001.png"),this.animation.addByNames("1",["enemy2_0001.png","enemy2_0002.png"],4),this.animation.addByNames("2",["enemy2_2_0001.png","enemy2_2_0002.png"],4),this.animation.addByNames("3",["enemy2_1_0001.png","enemy2_1_0002.png"],4),Y.setScale(this,null,!0)};s["com.drderico.towerd.game.npcs.Npc2"]=Fe,Fe.__name__=["com","drderico","towerd","game","npcs","Npc2"],Fe.get=function(){return Fe.pool.get()},Fe.__super__=we,Fe.prototype=e(we.prototype,{place:function(t,e,i){for(;;)if(Fe.view=_e.curLevelNum>=15&&ji.random.float(0,100)<25?2:ji.random.int(0,1),Fe.view!=Fe.prevView)break;Fe.prevView=Fe.view,this.animName=Fe.t[Fe.view],2==Fe.view?this.score=500:this.score=50,we.prototype.place.call(this,t,e+1,i)},put:function(){Fe.pool.put(this)},createTrigger:function(){this.body.setSize(Math.abs(this.width)-10|0,0|(2==Fe.view?this.height-23:this.height),5,2==Fe.view?23:0)},__class__:Fe});var Pe=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_npcs_Npc3"]=Pe,Pe.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_npcs_Npc3"],Pe.__interfaces__=[ht],Pe.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Pe};var Ce=function(){we.call(this,60),E.loadGraphicFromTexture(this,Y.t,"enemy3_0001.png"),this.animation.addByNames("1",["enemy3_0001.png","enemy3_0002.png"],4),this.animation.addByNames("2",["enemy3_1_0001.png","enemy3_1_0002.png"],4),this.animation.addByNames("3",["enemy3_3_0001.png","enemy3_3_0002.png"],4),this.animation.addByNames("4",["enemy3_2_0001.png","enemy3_2_0002.png"],4),Y.setScale(this,null,!0)};s["com.drderico.towerd.game.npcs.Npc3"]=Ce,Ce.__name__=["com","drderico","towerd","game","npcs","Npc3"],Ce.get=function(){return Ce.pool.get()},Ce.__super__=we,Ce.prototype=e(we.prototype,{createTrigger:function(){this.body.setSize(0|(3==Ce.view?Math.abs(this.width)-16:Math.abs(this.width)-8),0|(3==Ce.view?this.height-15:this.height),this.flipX?Ce.offX1:Ce.offX2,Ce.offY)},place:function(t,e,i){for(;;)if(Ce.view=_e.curLevelNum>=15&&ji.random.float(0,100)<25?3:ji.random.int(0,2),Ce.view!=Ce.prevView)break;Ce.prevView=Ce.view,this.animName=Ce.t[Ce.view],3==Ce.view?(this.score=500,Ce.offY=15,Ce.offX1=5,Ce.offX2=10):(this.score=50,Ce.offY=2,Ce.offX1=5,Ce.offX2=5),we.prototype.place.call(this,t,e,i),this._tween3=as.tween(this,{y:this.y-10},ji.random.float(.8,1.2),{type:5},null)},put:function(){Ce.pool.put(this)},__class__:Ce});var Ee=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_npcs_Npc4"]=Ee,Ee.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_npcs_Npc4"],Ee.__interfaces__=[ht],Ee.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Ee};var Be=function(){we.call(this,20),E.loadGraphicFromTexture(this,Y.t,"snail0001.png"),this.animation.addByNames("1",["snail0001.png","snail0002.png"],4),this.animation.addByNames("2",["snail2_0001.png","snail2_0002.png"],4),this.animation.addByNames("3",["snail3_0001.png","snail3_0002.png"],4),Y.setScale(this,null,!0)};s["com.drderico.towerd.game.npcs.Npc4"]=Be,Be.__name__=["com","drderico","towerd","game","npcs","Npc4"],Be.get=function(){return Be.pool.get()},Be.__super__=we,Be.prototype=e(we.prototype,{place:function(t,e,i){for(;;)if(Be.view=ji.random.int(0,2),Be.view!=Be.prevView)break;Be.prevView=Be.view,this.animName=Be.t[Be.view],we.prototype.place.call(this,t,e,i)},put:function(){Be.pool.put(this)},__class__:Be});var Le=function(){};s["com.drderico.towerd.game.other.AcidTouchListener"]=Le,Le.__name__=["com","drderico","towerd","game","other","AcidTouchListener"],Le.__interfaces__=[tt],Le.getInstance=function(){return null==Le.instance&&(Le.instance=new Le),Le.instance},Le.prototype={onTriggerTouched:function(){J.onPitAcidTriggerTouched()},onTriggerHurted:function(){},__class__:Le};var Ae=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"fireCannon.png"),Y.setScale(this),this.set_active(!1)};s["com.drderico.towerd.game.other.CannonForFireball"]=Ae,Ae.__name__=["com","drderico","towerd","game","other","CannonForFireball"],Ae.__super__=lt,Ae.prototype=e(lt.prototype,{setView:function(t){switch(t){case 0:this.frameName="fireCannon_red.png";break;case 1:this.frameName="fireCannon.png";break;case 2:this.frameName="fireCannon_green.png";break;case 3:this.frameName="fireCannon_ice.png";break;case 4:this.frameName="fireCannon_red.png"}},destroy:function(t){},__class__:Ae});var Oe=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_other_CollideBlock"]=Oe,Oe.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_other_CollideBlock"],Oe.__interfaces__=[ht],Oe.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Oe};var Me=function(){this.isFloor=!1,this.isWall=!1,at.call(this),Y.enableBody(this),this.set_immovable(!0),this.set_moves(!1),this.renderable=!1,this.body.allowGravity=!1,this.body.allowRotation=!1};s["com.drderico.towerd.game.other.CollideBlock"]=Me,Me.__name__=["com","drderico","towerd","game","other","CollideBlock"],Me.get=function(t,e,i,s,n){null==n&&(n=4369),null==s&&(s=1),null==i&&(i=1),null==e&&(e=0),null==t&&(t=0);var o=Me.pool.get();return o.exists=!0,o.alive=!0,o.reset(0|t,0|e),o.isWall=!1,o.isFloor=!1,o.body.setSize(i,s),o.body.position.set(0|t,0|e),o.set_allowCollisions(n),o},Me.__super__=at,Me.prototype=e(at.prototype,{kill:function(){return Me.pool.put(this),this},destroy:function(t){},setPosition:function(t,e){null==e&&(e=0),null==t&&(t=0),this.body.x=t,this.body.y=e,this.body.prev.set(t,e)},__class__:Me});var Ge=function(){K.call(this),this.fixedToCamera=!0,this.set_active(!1),this.bg=new lt,this.bg.makeGraphic(350,56,D.BG_COLORS[0]),Y.setScale(this.bg),Y.setPosUsingCenter(this.bg),this.bg.x=0,this.bg.alpha=1,this.add(this.bg),this.text=Y.getText(36,"center"),this.text.font=Y.font48_white,Y.setScale(this.text),this.text.y=-22,this.add(this.text)};s["com.drderico.towerd.game.other.ComboText"]=Ge,Ge.__name__=["com","drderico","towerd","game","other","ComboText"],Ge.getInstance=function(){return null==Ge.INSTANCE&&(Ge.INSTANCE=new Ge),Ge.INSTANCE},Ge.__super__=K,Ge.prototype=e(K.prototype,{show:function(t,e,s,n){null==s&&(s=0),this.onCompleteCallback=n,this.text.text!=t&&(this.text.text=t,this.text.x=this.bg.width/2-this.text.width/2),this._layer=e,e.add(this),0==s?(Y.setPosUsingCenter(this.cameraOffset,ji.game.width/2,0),this.cameraOffset.y=-100,as.tween(this.cameraOffset,{y:Y.screenOffsetY},.8,{onComplete:i(this,this.startTween2),ease:Phaser.Easing.Back.Out},this)):1==s&&(this.cameraOffset.y=Y.screenOffsetY+200,G.showFromRightToLeft(this.cameraOffset,this.width,i(this,this._onComplete)))},startTween2:function(t){var e=this.cameraOffset,s=Phaser.Easing.Back.In;as.tween(e,{y:-100},.8,{startDelay:.2,onComplete:i(this,this.onComplete),ease:s},this)},onComplete:function(t){this._onComplete()},_onComplete:function(){null!=this.onCompleteCallback&&this.onCompleteCallback(),this.kill()},kill:function(){null!=this._layer&&this._layer.remove(this,!1,!0),this._layer=null},destroy:function(t,e){this.onCompleteCallback=null},__class__:Ge});var He=function(){};s["com.drderico.towerd.game.other.FireTouchListener"]=He,He.__name__=["com","drderico","towerd","game","other","FireTouchListener"],He.__interfaces__=[tt],He.getInstance=function(){return null==He.instance&&(He.instance=new He),He.instance},He.prototype={onTriggerTouched:function(){J.onPitFireTriggerTouched()},onTriggerHurted:function(){},__class__:He};var De=function(){lt.call(this),this.set_active(!1),this.g=new K;this.map=new rs(null,64,64,1,1),this.mapLayer=this.map.create("0",13,16,64,64,this.g),this.mapLayer.resize(832,1024),this.mapLayer.renderSettings.enableScrollDelta=!1,this.mapLayer.fixedToCamera=!1,this.layerTexure=new Phaser.RenderTexture(ji.game,this.map.widthInPixels,this.map.heightInPixels),this.loadTexture(this.layerTexure),this.scale.set(1,1)};s["com.drderico.towerd.game.other.GameBG"]=De,De.__name__=["com","drderico","towerd","game","other","GameBG"],De.__super__=lt,De.prototype=e(lt.prototype,{change:function(t,e,i){this.map.addTilesetImage("tileset",ji.random.getObject_haxe_extern_EitherType_String_phaser_BitmapData(D.BG_TILES[i]),64,64);for(var s=1+(t/4|0),n=1+(e/4|0),o=0,r=0|this.map.height;o<r;)for(var a=o++,l=0,h=0|this.map.width;l<h;){var c=l++;this.map.layers[0].data[a][c].index=c>=s||a>=n?-1:0}this.map.layers[0].dirty=!0,this.layerTexure.renderRawXY(this.mapLayer,0,0,!0)},destroy:function(t){},__class__:De});var Ne=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_other_HealthBar"]=Ne,Ne.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_other_HealthBar"],Ne.__interfaces__=[ht],Ne.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Ne};var Re=function(){lt.call(this)};s["com.drderico.towerd.game.other.HealthBar"]=Re,Re.__name__=["com","drderico","towerd","game","other","HealthBar"],Re.__interfaces__=[Vt],Re.get=function(t,e,i){return Re.pool.get()},Re.__super__=lt,Re.prototype=e(lt.prototype,{kill:function(){return lt.prototype.kill.call(this),this.put(),this},put:function(){Re.pool.put(this)},destroy:function(t){},__class__:Re});var We=function(t,e,i,s,n,o){Phaser.BitmapText.call(this,ji.game,t,e,i,s,n,o)};s["flixel.text.FlxText"]=We,We.__name__=["flixel","text","FlxText"],We.__interfaces__=[rt],We.__super__=Phaser.BitmapText,We.prototype=e(Phaser.BitmapText.prototype,{destroy:function(t){Phaser.BitmapText.prototype.destroy.call(this,t)},setPosition:function(t,e){null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e},get_active:function(){return this.exists},set_active:function(t){var e=this.visible;return this.exists=t,this.visible=e,t},__class__:We});var Ue=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_other_HitPoints"]=Ue,Ue.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_other_HitPoints"],Ue.__interfaces__=[ht],Ue.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Ue};var Xe=function(){We.call(this,0,0,Y.font24_white,"",20,"center"),this.text="1",this.tint=16501556,this.set_active(!1)};s["com.drderico.towerd.game.other.HitPoints"]=Xe,Xe.__name__=["com","drderico","towerd","game","other","HitPoints"],Xe.show=function(t,e,i,s){var n=Xe.pool.get();n.text=t,n._show(e,i,s)},Xe.__super__=We,Xe.prototype=e(We.prototype,{_show:function(t,e,s){Y.setScale(this),this._layer=t,t.add(this),this.reset(e-this.width/2,s),as.tween(this,{y:s-50},.8,{onComplete:i(this,this.onComplete)},this)},onComplete:function(t){this.kill()},kill:function(){We.prototype.kill.call(this),null!=this._layer&&this._layer.remove(this,!1,!0),Xe.pool.put(this),this._layer=null},destroy:function(t){},__class__:Xe});var Ye=function(t,e,i,s){this.ID=0,Phaser.Button.call(this,ji.game,t,e,null,i,s),null!=i&&(this.onInputUp.removeAll(),this.onInputUp.add(i,s,0,[this]))};s["flixel.ui.FlxButton"]=Ye,Ye.__name__=["flixel","ui","FlxButton"],Ye.__super__=Phaser.Button,Ye.prototype=e(Phaser.Button.prototype,{disable:function(){this.input.enabled=!1},enable:function(){this.input.enabled=!0},__class__:Ye});var Ve=function(t,e,i,s){null==e&&(e=0),null==t&&(t=0),Ye.call(this,t,e,i,s)};s["com.drderico.towerd.game.other.MyButton"]=Ve,Ve.__name__=["com","drderico","towerd","game","other","MyButton"],Ve.setupStates=function(t,e,i,s){null==s&&(s=""),null==i&&(i=""),null==e&&(e="")},Ve.__super__=Ye,Ve.prototype=e(Ye.prototype,{get_disabled:function(){return!this.input.enabled},set_disabled:function(t){return this.input.enabled=!t},__class__:Ve});var Ke=function(){};s["com.drderico.towerd.game.other.SawListener"]=Ke,Ke.__name__=["com","drderico","towerd","game","other","SawListener"],Ke.__interfaces__=[tt],Ke.getInstance=function(){return null==Ke.instance&&(Ke.instance=new Ke),Ke.instance},Ke.prototype={onTriggerTouched:function(){J.hero.onLadder||J.onSawTriggerTouched()},onTriggerHurted:function(){},__class__:Ke};var ze=function(t,e,i,s){null==s&&(s=0),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),this.midX=0,at.call(this),this.x=t,this.y=e,this.width=i,this.height=s,this.set_moves(!1)};s["com.drderico.towerd.game.other.SimpleObject"]=ze,ze.__name__=["com","drderico","towerd","game","other","SimpleObject"],ze.__super__=at,ze.prototype=e(at.prototype,{setPosition:function(t,e){null==e&&(e=0),null==t&&(t=0),at.prototype.setPosition.call(this,t,e),this.midX=this.x+this.width/2},__class__:ze});var je=function(){};s["com.drderico.towerd.game.other.SpikesInPitListener"]=je,je.__name__=["com","drderico","towerd","game","other","SpikesInPitListener"],je.__interfaces__=[tt],je.getInstance=function(){return null==je.instance&&(je.instance=new je),je.instance},je.prototype={onTriggerTouched:function(){J.onSpikesInPitTriggerTouched()},onTriggerHurted:function(){},__class__:je};var Qe=function(){};s["com.drderico.towerd.game.other.SpikesListener"]=Qe,Qe.__name__=["com","drderico","towerd","game","other","SpikesListener"],Qe.__interfaces__=[tt],Qe.getInstance=function(){return null==Qe.instance&&(Qe.instance=new Qe),Qe.instance},Qe.prototype={onTriggerTouched:function(){J.onSpikesTriggerTouched()},onTriggerHurted:function(){},__class__:Qe};var Je=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_other_Trigger"]=Je,Je.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_other_Trigger"],Je.__interfaces__=[ht],Je.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Je};var $e=function(){this.type_=0,at.call(this),this.listeners=[],Y.enableBody(this),this.set_immovable(!0),this.set_moves(!1),this.renderable=!1,this.body.allowGravity=!1,this.body.allowRotation=!1};s["com.drderico.towerd.game.other.Trigger"]=$e,$e.__name__=["com","drderico","towerd","game","other","Trigger"],$e.get=function(){return $e.pool.get()},$e.__super__=at,$e.prototype=e(at.prototype,{init:function(t,e,i,s,n,o,r){null==r&&(r=4369),null==o&&(o=3),this.addListener(n),this.reset_(t,e),this.activate(),this.body.setSize(i,s),this.body.position.set(t,e),this.set_allowCollisions(r),this.type_=o},addListener:function(t){this.listeners.push(t)},onTouched:function(){for(var t=0,e=this.listeners;t<e.length;){var i=e[t];++t,null!=i&&i.onTriggerTouched()}},onHurtedByHero:function(){for(var t=0,e=this.listeners;t<e.length;){var i=e[t];++t,null!=i&&i.onTriggerHurted()}},onNpcTouchedHero:function(){},kill:function(){return at.prototype.kill.call(this),this.put(),this},put:function(){$e.pool.put(this)},deactivate:function(){this.exists=!1,this.alive=!1},activate:function(){this.exists=!0,this.alive=!0},destroy:function(t){this.listeners.length=0,this.linkedObject=null},__class__:$e});var qe=function(){};s["com.drderico.towerd.game.other.WaterTouchListener"]=qe,qe.__name__=["com","drderico","towerd","game","other","WaterTouchListener"],qe.__interfaces__=[tt],qe.getInstance=function(){return null==qe.instance&&(qe.instance=new qe),qe.instance},qe.prototype={onTriggerTouched:function(){J.onPitWaterTriggerTouched()},onTriggerHurted:function(){},__class__:qe};var Ze=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_AcidPart"]=Ze,Ze.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_AcidPart"],Ze.__interfaces__=[ht],Ze.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:Ze};var ti=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"acid_wave0001.png"),this.animation.addByNames("1",["acid_wave0001.png","acid_wave0002.png","acid_wave0003.png","acid_wave0004.png","acid_wave0005.png","acid_wave0006.png","acid_wave0007.png","acid_wave0008.png"],12,!0),this.set_moves(!1),Y.setScale(this)};s["com.drderico.towerd.game.stuff.AcidPart"]=ti,ti.__name__=["com","drderico","towerd","game","stuff","AcidPart"],ti.__interfaces__=[Vt],ti.get=function(t){var e=ti.pool.get();return e.animation.play("1",!0,t),e},ti.__super__=lt,ti.prototype=e(lt.prototype,{put:function(){ti.pool.put(this)},destroy:function(t){},kill:function(){return this.put(),this},__class__:ti});var ei=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_BlackArea"]=ei,ei.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_BlackArea"],ei.__interfaces__=[ht],ei.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ei};var ii=function(){this._key="",this.currentColor="",this._globalY=0,lt.call(this),this._key="BlackAreaSprite"+c.string(ii._id++)};s["com.drderico.towerd.game.stuff.BlackArea"]=ii,ii.__name__=["com","drderico","towerd","game","stuff","BlackArea"],ii.get=function(t,e){var i=ii.pool.get();return i.currentColor!=D.BG_COLORS[j.envSetting.get_value()]&&(i.currentColor=D.BG_COLORS[j.envSetting.get_value()],i.makeGraphic(t,e,i.currentColor,!0,i._key)),i.alpha=1,i.visible=!0,i},ii.__super__=lt,ii.prototype=e(lt.prototype,{reset_:function(t,e){this.x=ji.get_camera().view.x,this.y=e,this.currentColor=D.BG_COLORS[j.envSetting.get_value()],this.makeGraphic(0|this.width,0|this.height,this.currentColor,!0,this._key)},hide:function(t){null==t&&(t=!0),t?as.tween(this,{alpha:0},.2,{onComplete:i(this,this._hide)},this):(this.visible=!1,this.alpha=0)},postUpdate:function(){this.x=ji.game.camera.view.x/ji.game.camera.scale.x},_hide:function(t){this.visible=!1},show:function(){this.visible=!0,as.tween(this,{alpha:1},Mt.climbOnLadderDuration/4,{onComplete:J.createNextLevel,startDelay:.7},this)},kill:function(){return ii.pool.put(this),this},destroy:function(t){},changeSize:function(t,e){this.currentColor=D.BG_COLORS[j.envSetting.get_value()],this.makeGraphic(t,e,this.currentColor,!0,this._key)},__class__:ii});var si=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_Chain"]=si,si.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_Chain"],si.__interfaces__=[ht],si.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:si};var ni=function(){this.envValue=0,lt.call(this),E.loadGraphicFromTexture(this,Y.t,"chain1.png"),Y.setScale(this,null,!0)};s["com.drderico.towerd.game.stuff.Chain"]=ni,ni.__name__=["com","drderico","towerd","game","stuff","Chain"],ni.get=function(t){var e=ni.pool.get();return e.envValue=t,e},ni.__super__=lt,ni.prototype=e(lt.prototype,{reset_:function(t,e){lt.prototype.reset_.call(this,t,e),this.changeLook(this.envValue)},changeLook:function(t){this.resetFrame(),this.frameName=ji.random.getObject_String(ni.textures[t]),4==t&&(this.x-=Math.abs(this.width)/2+10,this.set_flipX(ji.random.float(0,100)<50))},kill:function(){return ni.pool.put(this),this},destroy:function(t){},__class__:ni});var oi=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_CoinSprite"]=oi,oi.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_CoinSprite"],oi.__interfaces__=[ht],oi.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:oi};var ri=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"coin0001.png"),this.fixedToCamera=!0,this.animation.addByNames("1",["coin0001.png","coin0002.png","coin0003.png","coin0004.png","coin0005.png","coin0006.png","coin0007.png","coin0008.png"],16),Y.setScale(this,.8)};s["com.drderico.towerd.game.stuff.CoinSprite"]=ri,ri.__name__=["com","drderico","towerd","game","stuff","CoinSprite"],ri.get=function(){return ri.pool.get()},ri.__super__=lt,ri.prototype=e(lt.prototype,{reset_:function(t,e){lt.prototype.reset_.call(this,t,e),this.cameraOffset.set(t,e),this.animation.play("1",!0,!1,-1),this._tween=as.tween(this.cameraOffset,{y:this.cameraOffset.y-100},.3,{startDelay:ri.startDelay,ease:Phaser.Easing.Sinusoidal.Out,onComplete:i(this,this._hideCoin)},this),z.hud.flyingItems.add(this),ri.coinsToAdd++},_hideCoin:function(t){this._tween=as.tween(this.cameraOffset,{x:Rt.coinsHud.cameraOffset.x,y:Rt.coinsHud.cameraOffset.y},.6,{onComplete:i(this,this._hideCoin2)},this)},_hideCoin2:function(t){z.hud.flyingItems.remove(this,!1,!0),this.kill(),$.addCoin(),ri.coinsToAdd--},kill:function(){return Y.cancelTween(this._tween),this._tween=null,ri.pool.put(this),this},destroy:function(t){},__class__:ri});var ai=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_FirePart"]=ai,ai.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_FirePart"],ai.__interfaces__=[ht],ai.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ai};var li=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"fire_wave0001.png"),this.animation.addByNames("1",["fire_wave0001.png","fire_wave0002.png","fire_wave0003.png","fire_wave0004.png"],12,!0),this.set_moves(!1),Y.setScale(this)};s["com.drderico.towerd.game.stuff.FirePart"]=li,li.__name__=["com","drderico","towerd","game","stuff","FirePart"],li.__interfaces__=[Vt],li.get=function(){var t=li.pool.get();return t.animation.play("1",!0,!1,li.startFrame),li.startFrame++,li.startFrame%=4,t},li.__super__=lt,li.prototype=e(lt.prototype,{put:function(){li.pool.put(this)},destroy:function(t){},kill:function(){return this.put(),this},__class__:li});var hi=function(){};s["com.drderico.towerd.game.stuff.GfxTile"]=hi,hi.__name__=["com","drderico","towerd","game","stuff","GfxTile"];var ci=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_Heart"]=ci,ci.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_Heart"],ci.__interfaces__=[ht],ci.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ci};var _i=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"heart.png"),Y.setScale(this)};s["com.drderico.towerd.game.stuff.Heart"]=_i,_i.__name__=["com","drderico","towerd","game","stuff","Heart"],_i.get=function(){return _i.pool.get()},_i.__super__=lt,_i.prototype=e(lt.prototype,{reset_:function(t,e){lt.prototype.reset_.call(this,t,e),this.alpha=1,as.tween(this,{y:this.y-100},.8,{ease:Phaser.Easing.Sinusoidal.Out,onComplete:i(this,this._hideHeart)},this),as.tween(this,{alpha:0},.3,{startDelay:.5},null),J._fxUnderHero.add(this)},_hideHeart:function(t){J._fxUnderHero.remove(this,!1,!0),this.kill()},kill:function(){return _i.pool.put(this),this},destroy:function(t){},__class__:_i});var ui=function(){this.toY=0,this.wasTouchedAlready=!1,this.stageID=0,K.call(this);var t=new lt;t.set_active(!1),E.loadGraphicFromTexture(t,Y.t,"ladder_ready.png"),Y.setScale(t),this.add(t),ui.oneLadderSpriteHeight=t.height,(t=new lt).set_active(!1),E.loadGraphicFromTexture(t,Y.t,"ladder_ready.png"),Y.setScale(t),this.add(t)};s["com.drderico.towerd.game.stuff.Ladder"]=ui,ui.__name__=["com","drderico","towerd","game","stuff","Ladder"],ui.__interfaces__=[tt],ui.get=function(t){var e=ui.pool.get();return e.init(t),e},ui.__super__=K,ui.prototype=e(K.prototype,{init:function(t){this.wasTouchedAlready=!1,this.visible=!0,Bs.__cast(this.children[0],lt).setPosition(),Bs.__cast(this.children[1],lt).setPosition(0,ui.oneLadderSpriteHeight-1*(80+16*t))},kill:function(){this.put()},destroy:function(t,e){null!=this.trigger&&this.trigger.kill(),this.trigger=null},put:function(){ui.pool.put(this)},onTriggerTouched:function(){this.trigger.deactivate(),J.onHeroTouchedLadder(this)},onTriggerHurted:function(){},show:function(t){null==t&&(t=!1),this.set_active(!0),this.visible=!0,this.alpha=1,t||(this.y=this.toY-this.height,as.tween(this,{y:this.toY},1,{ease:Phaser.Easing.Back.Out},null),Q.ladder_show()),this.trigger.activate(),this.trigger.body.y=this.toY,this.trigger.body.x=this.x},update:function(){K.prototype.update.call(this),null!=this.trigger&&this.trigger.setBodyPos(this.x,this.y)},hide:function(){this.set_active(!1),as.tween(this,{alpha:0},.3,{onComplete:i(this,this._hide)},this)},_hide:function(t){this.put()},setPosition:function(t,e){null==e&&(e=0),null==t&&(t=0),this.x=t,this.y=e,this.toY=this.y},__class__:ui});var di=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_LgObject"]=di,di.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_LgObject"],di.__interfaces__=[ht],di.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:di};var pi=function(){this.canPlaceLadder=!0,this.hasSpikes=!1,this.hasSaw=!1,this.allowCollisions=0,this.itemType=0,this.type=0,this.isFloor=!1,this.isWall=!1,this.stageID=0,this.height=0,this.width=0,this.y=0,this.x=0};s["com.drderico.towerd.game.stuff.LgObject"]=pi,pi.__name__=["com","drderico","towerd","game","stuff","LgObject"],pi.__interfaces__=[rt,Vt],pi.get=function(){var t=pi.pool.get();return t.canPlaceLadder=!0,t.hasSaw=!1,t.hasSpikes=!1,t},pi.isPit=function(t){return 0==t.type||1==t.type||2==t.type||12==t.type},pi.prototype={put:function(){pi.pool.put(this)},destroy:function(t){},__class__:pi};var gi=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_Saw"]=gi,gi.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_Saw"],gi.__interfaces__=[ht],gi.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:gi};var fi=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"blockSaw_0001.png"),this.animation.addByNames("1",["blockSaw_0001.png","blockSaw_0002.png","blockSaw_0003.png","blockSaw_0004.png","blockSaw_0005.png","blockSaw_0006.png"],36),this.animation.addByNames("2",["blockSawBlue_0001.png","blockSawBlue_0002.png","blockSawBlue_0003.png","blockSawBlue_0004.png","blockSawBlue_0005.png","blockSawBlue_0006.png"],36),this.animation.addByNames("3",["blockSawVoilet_0001.png","blockSawVoilet_0002.png","blockSawVoilet_0003.png","blockSawVoilet_0004.png","blockSawVoilet_0005.png","blockSawVoilet_0006.png"],36),Y.setScale(this,null,!0),this.set_moves(!1)};s["com.drderico.towerd.game.stuff.Saw"]=fi,fi.__name__=["com","drderico","towerd","game","stuff","Saw"],fi.get=function(){return fi.pool.get()},fi.__super__=lt,fi.prototype=e(lt.prototype,{reset_:function(t,e){lt.prototype.reset_.call(this,t,e-6),this.animation.play(ji.random.getObject_String(fi.t),!0,ji.random.float(0,100)<30)},kill:function(){return fi.pool.put(this),this},destroy:function(t){},__class__:fi});var mi=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_WaterPart"]=mi,mi.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_WaterPart"],mi.__interfaces__=[ht],mi.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:mi};var vi=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"water_wave0001.png"),this.animation.addByNames("1",["water_wave0001.png","water_wave0002.png","water_wave0003.png","water_wave0004.png","water_wave0005.png","water_wave0006.png","water_wave0007.png","water_wave0008.png"],12,!0),this.animation.addByNames("2",["water_wave20001.png","water_wave20002.png","water_wave20003.png","water_wave20004.png","water_wave20005.png","water_wave20006.png","water_wave20007.png","water_wave20008.png"],12,!0),this.set_moves(!1),Y.setScale(this)};s["com.drderico.towerd.game.stuff.WaterPart"]=vi,vi.__name__=["com","drderico","towerd","game","stuff","WaterPart"],vi.__interfaces__=[Vt],vi.get=function(t,e){var i=vi.pool.get();return i.animation.play(0==e?"2":"1",!0,t),i},vi.__super__=lt,vi.prototype=e(lt.prototype,{put:function(){vi.pool.put(this)},destroy:function(t){},kill:function(){return this.put(),this},__class__:vi});var yi=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_game_stuff_Web"]=yi,yi.__name__=["flixel","util","FlxPool_com_drderico_towerd_game_stuff_Web"],yi.__interfaces__=[ht],yi.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:yi};var xi=function(){lt.call(this),E.loadGraphicFromTexture(this,Y.t,"web.png"),Y.setScale(this),this.set_active(!1)};s["com.drderico.towerd.game.stuff.Web"]=xi,xi.__name__=["com","drderico","towerd","game","stuff","Web"],xi.get=function(){return xi.pool.get()},xi.__super__=lt,xi.prototype=e(lt.prototype,{kill:function(){return xi.pool.put(this),this},destroy:function(t){},__class__:xi});var wi=function(){K.call(this),z.onGameResizeSignal.add(i(this,this.onGameResize),this),wi.title=Y.getText(60,"center"),wi.title.font=Y.font48_white,wi.title.text=Y.tongue.get("$PAUSE"),Y.setScale(wi.title),wi.title.fixedToCamera=!0,this.add(wi.title),wi.playBtn=new Ve(0,0,i(this,this.onPlayBtnPressed),this),E.loadGraphicFromTexture(wi.playBtn,Y.t2,"play_btn.png"),Y.setScale(wi.playBtn);wi.playBtn;wi.playBtn.fixedToCamera=!0,this.add(wi.playBtn),wi.musicOnBtn=new Ve(0,0,i(this,this.onMusicBtnPressed),this),E.loadGraphicFromTexture(wi.musicOnBtn,Y.t,"musicOnBtn.png"),Y.setScale(wi.musicOnBtn);wi.musicOnBtn;wi.musicOnBtn.fixedToCamera=!0,this.add(wi.musicOnBtn),wi.quitBtn=new Ve(0,0,i(this,this.onQuitBtnPressed),this),E.loadGraphicFromTexture(wi.quitBtn,Y.t,"menuBtn.png"),Y.setScale(wi.quitBtn);wi.quitBtn;wi.quitBtn.fixedToCamera=!0,this.add(wi.quitBtn),this.backBtnExecutionReady=!0,this.onGameResize()};s["com.drderico.towerd.game.ui.PauseScreen"]=wi,wi.__name__=["com","drderico","towerd","game","ui","PauseScreen"],wi.__interfaces__=[Nt],wi.__super__=K,wi.prototype=e(K.prototype,{onGameResize:function(){wi.title.fixedToCamera=!1,wi.playBtn.fixedToCamera=!1,wi.musicOnBtn.fixedToCamera=!1,wi.quitBtn.fixedToCamera=!1,Y.setPosUsingCenter(wi.title,ji.game.width/2,(Y.screenOffsetY+240)/2-12),Y.setPosUsingCenter(wi.playBtn,ji.game.width/2,260),Y.setPosUsingCenter(wi.musicOnBtn,ji.game.width/2+130,260),Y.setPosUsingCenter(wi.quitBtn,ji.game.width/2-130,260),wi.title.fixedToCamera=!0,wi.playBtn.fixedToCamera=!0,wi.musicOnBtn.fixedToCamera=!0,wi.quitBtn.fixedToCamera=!0},onMusicBtnPressed:function(t){Y.onBtnClicked(wi.musicOnBtn,i(this,this._onMusicBtnPressed))},_onMusicBtnPressed:function(){Y._onMusicBtnPressed(),Y.toggleMusicBtns(wi.musicOnBtn)},onQuitBtnPressed:function(t){Y.onBtnClicked(wi.quitBtn,i(this,this._onQuitBtnPressed))},_onQuitBtnPressed:function(){U.sceneManager.showConfirmScreen(this,Y.tongue.get("$QUIT_THE_TOWER"),function(){Rt.onExitConfirmed()})},show:function(){Y.toggleMusicBtns(wi.musicOnBtn),N.flicker(wi.title,0,.5),this.enableInput()},onBackBtnPressed:function(t){null==t&&(t=!1),t&&Q.click(),this._onPlayBtnPressed()},_showMusicBtn:function(t){wi.musicOnBtn.visible=!0},_showCloseBtn:function(t){wi.quitBtn.visible=!0},onPlayBtnPressed:function(t){Y.onBtnClicked(wi.playBtn,i(this,this._onPlayBtnPressed))},_onPlayBtnPressed:function(){Y.delay(.1,i(this,this.__onPlayBtnPressed),null,this)},__onPlayBtnPressed:function(t){U.sceneManager.hidePause(),N.stopFlickering(wi.title)},__class__:wi});var bi=function(){We.call(this,0,0,Y.font24_white,"",D.DEFAULT_TEXT_SIZE,"center"),this.set_active(!1),z.onGameResizeSignal.add(i(this,this.onGameResize),this),ji.game.device.desktop?this.text=Y.tongue.get("$CLICK_TO_CONTINUE"):this.text=Y.tongue.get("$TAP_TO_CONTINUE"),Y.setScale(this),this.fixedToCamera=!0,this.tint=16501556};s["com.drderico.towerd.game.ui.TapToContinueText"]=bi,bi.__name__=["com","drderico","towerd","game","ui","TapToContinueText"],bi.getInstance=function(){return null==bi.instance&&(bi.instance=new bi),bi.instance},bi.show=function(t){t.add(bi.getInstance()),bi.getInstance().layer=t,bi.getInstance().onGameResize(),N.stopFlickering(bi.getInstance()),N.flicker(bi.getInstance(),0,.5)},bi.hide=function(){bi.getInstance().layer.remove(bi.getInstance(),!1,!0),N.stopFlickering(bi.getInstance())},bi.__super__=We,bi.prototype=e(We.prototype,{onGameResize:function(){this.fixedToCamera=!1,Y.setPosUsingCenter(this,ji.game.width/2,ji.game.height-Y.screenOffsetY-30),this.fixedToCamera=!0},__class__:bi});var Ti=function(){this.readyToTouch=!1,K.call(this),z.onGameResizeSignal.add(i(this,this.onGameResize),this),this.fixedToCamera=!0,this.title=Y.getText(28,"center"),this.add(this.title)};s["com.drderico.towerd.game.ui.WindowHelloPlayer"]=Ti,Ti.__name__=["com","drderico","towerd","game","ui","WindowHelloPlayer"],Ti.show=function(t,e,i){Rt.THIS.set_active(!1),J.THIS.set_active(!1),$.paused=!0,as.set_globalManager(U.tweenManager);var s=Ti.pool.get();s.title.text=t,Y.setScale(s.title),Y.setPosUsingCenter(s.title,ji.game.width/2,ji.game.height/2),s._layer=e,s._onHideCallback=i,Fi.add(e),e.add(s),s._show()},Ti.__super__=K,Ti.prototype=e(K.prototype,{onGameResize:function(){Y.setPosUsingCenter(this.title,ji.game.width/2,ji.game.height/2)},_show:function(){this.readyToTouch=!1,Y.cancelTween(this.t),this.title.alpha=0,this.t=as.tween(this.title,{alpha:1},1,{onComplete:i(this,this._show2)},this)},_show2:function(t){this.readyToTouch=!0,bi.show(this._layer)},update:function(){K.prototype.update.call(this),this.readyToTouch&&Y.isAnyKeyJustPressed()&&(Y.stopClickProp(),Q.click(),as.set_globalManager(U.gameTweenManager),Rt.THIS.set_active(!0),J.THIS.set_active(!0),this._layer.remove(this,!1,!0),Fi.remove(this._layer),this._layer=null,$.paused=!1,bi.hide(),null!=this._onHideCallback&&this._onHideCallback())},put:function(){Ti.pool.put(this)},destroy:function(t,e){},__class__:Ti});var Si=function(){this.readyToTouch=!1,K.call(this),z.onGameResizeSignal.add(i(this,this.onGameResize),this),this.bg=new Li,this.add(this.bg),this.title=Y.getText(24,"center"),this.title.text=Y.tongue.get("$YOU_FOUND"),this.title.fixedToCamera=!0,this.add(this.title),this.itemName=Y.getText(36,"center"),this.itemName.text=Y.tongue.get("$MAGNET_ITEM_NAME"),this.itemName.fixedToCamera=!0,this.add(this.itemName),this.desc=Y.getText(20,"center"),this.desc.text=Y.tongue.get("$MAGNET_ITEM_DESC"),this.desc.fixedToCamera=!0,this.add(this.desc),this.set_active(!1)};s["com.drderico.towerd.game.ui.WindowItemFound"]=Si,Si.__name__=["com","drderico","towerd","game","ui","WindowItemFound"],Si.show=function(t,e,i){Rt.THIS.set_active(!1),J.THIS.set_active(!1),Rt.THIS.disableInput(),as.set_globalManager(U.tweenManager),$.paused=!0;var s=Si.pool.get();switch(s._layer=e,s._onHideCallback=i,Fi.add(e),e.add(s),t){case 0:s.desc.text=Y.tongue.get("$MAGNET_ITEM_DESC"),s.itemName.text=Y.tongue.get("$MAGNET_ITEM_NAME");break;case 1:s.desc.text=Y.tongue.get("$SHIELD_ITEM_DESC"),s.itemName.text=Y.tongue.get("$SHIELD_ITEM_NAME");break;case 6:s.desc.text=Y.tongue.get("$ARTEFACT_ITEM_DESC"),s.itemName.text=Y.tongue.get("$ARTEFACT_ITEM_NAME");break;case 8:s.desc.text=Y.tongue.get("$TOMB_ITEM_DESC"),s.itemName.text=Y.tongue.get("$TOMB_ITEM_NAME")}s._show()},Si.__super__=K,Si.prototype=e(K.prototype,{onGameResize:function(){this.title.fixedToCamera=!1,this.itemName.fixedToCamera=!1,this.desc.fixedToCamera=!1,Y.setPosUsingCenter(this.title,ji.game.width/2,ji.game.height/2-110),Y.setPosUsingCenter(this.itemName,ji.game.width/2,ji.game.height/2-20),Y.setPosUsingCenter(this.desc,ji.game.width/2,ji.game.height/2+80),this.title.fixedToCamera=!0,this.itemName.fixedToCamera=!0,this.desc.fixedToCamera=!0,this.bg.position.set(ji.game.width/2-this.bg.width/2+Y.screenOffsetX,ji.game.height/2-this.bg.height/2+Y.screenOffsetY)},_show:function(){this.readyToTouch=!1,Y.cancelTween(this.t1),Y.cancelTween(this.t2),Y.cancelTween(this.t3),this.title.fixedToCamera=!1,this.itemName.fixedToCamera=!1,this.desc.fixedToCamera=!1,Y.setPosUsingCenter(this.title,ji.game.width/2,ji.game.height/2-110),Y.setPosUsingCenter(this.itemName,ji.game.width/2,ji.game.height/2-20),Y.setPosUsingCenter(this.desc,ji.game.width/2,ji.game.height/2+80),this.title.fixedToCamera=!0,this.itemName.fixedToCamera=!0,this.desc.fixedToCamera=!0,this.title.alpha=0,this.desc.alpha=0,this.itemName.alpha=0,this.t1=as.tween(this.title,{alpha:1},.4,{onComplete:i(this,this._show2)},this),this.t2=as.tween(this.desc,{alpha:1},.4,null,null),this.t3=as.tween(this.itemName,{alpha:1},.4,null,null);var t=this.bg;Y.setScale(this.itemName),Y.setScale(this.desc),this.desc.cameraOffset.x=(ji.game.width-this.desc.width)/2,this.itemName.cameraOffset.x=(ji.game.width-this.itemName.width)/2,t.show(Math.max(this.desc.width,this.itemName.width)/1+100,(this.desc.cameraOffset.y+this.desc.height-this.title.cameraOffset.y)/1+80)},getMaxWidth:function(){return Y.setScale(this.itemName),Y.setScale(this.desc),this.desc.cameraOffset.x=(ji.game.width-this.desc.width)/2,this.itemName.cameraOffset.x=(ji.game.width-this.itemName.width)/2,Math.max(this.desc.width,this.itemName.width)},getMaxHeight:function(){return this.desc.cameraOffset.y+this.desc.height-this.title.cameraOffset.y},_show2:function(t){this.readyToTouch=!0,bi.show(this._layer)},update:function(){K.prototype.update.call(this),this.readyToTouch&&Y.isAnyKeyJustPressed()&&(Y.stopClickProp(),Q.click(),as.set_globalManager(U.gameTweenManager),Rt.THIS.set_active(!0),J.THIS.set_active(!0),Rt.THIS.enableInput(),this._layer.remove(this,!1,!0),Fi.remove(this._layer),bi.hide(),$.paused=!1,this._layer=null,null!=this._onHideCallback&&this._onHideCallback(),this.put())},put:function(){Si.pool.put(this)},destroy:function(t,e){},__class__:Si});var Ii=function(){Ve.call(this,0,0,null,i(this,this.goToVideo)),Y.setScale(this),Y.setPosUsingCenter(this,ji.game.width/2,ji.game.height-30)};s["com.drderico.towerd.sponsored.WalkthroughBtn"]=Ii,Ii.__name__=["com","drderico","towerd","sponsored","WalkthroughBtn"],Ii.__super__=Ve,Ii.prototype=e(Ve.prototype,{goToVideo:function(){},__class__:Ii});var ki=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_com_drderico_towerd_ui_BlackBg"]=ki,ki.__name__=["flixel","util","FlxPool_com_drderico_towerd_ui_BlackBg"],ki.__interfaces__=[ht],ki.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ki};var Fi=function(){Phaser.Image.call(this,ji.game,Y.screenOffsetX,Y.screenOffsetY,Y.getBitmapData(ji.game.width-2*Y.screenOffsetX|0,ji.game.height-2*Y.screenOffsetY|0,"000000")),null==Fi.stack&&(Fi.stack=[]),this.fixedToCamera=!0,this.alpha=.43529411764705883,z.onGameResizeSignal.add(i(this,this.onGameResize),this)};s["com.drderico.towerd.ui.BlackBg"]=Fi,Fi.__name__=["com","drderico","towerd","ui","BlackBg"],Fi.__interfaces__=[rt,Vt],Fi.add=function(t){var e=Fi.pool.get();return e.resizeFrame(e,ji.game.width-2*Y.screenOffsetX|0,ji.game.height-2*Y.screenOffsetY|0),e.exists=!0,t.add(e),Fi.stack.push(e),e},Fi.remove=function(t){if(null!=Fi.stack&&Fi.stack.length>0){var e=Fi.stack.pop();t.remove(e,!1,!0),e.alpha=.43529411764705883,e.put()}},Fi.__super__=Phaser.Image,Fi.prototype=e(Phaser.Image.prototype,{onGameResize:function(){this.resizeFrame(this,ji.game.width-2*Y.screenOffsetX|0,ji.game.height-2*Y.screenOffsetY|0)},kill:function(){return this.put(),this},put:function(){Fi.pool.put(this)},destroy:function(t){},__class__:Fi});var Pi=function(){K.call(this),z.onGameResizeSignal.add(i(this,this.onGameResize),this),this.bg=new Li,this.add(this.bg),this.bg.show(416,200),this.text=Y.getText(28,"center"),this.text.text=Y.tongue.get("$YOU_FOUND"),Y.setPosUsingCenter(this.text,ji.game.width/2,240),this.text.fixedToCamera=!0,this.add(this.text),this.closeBtn=new Ve(0,0,i(this,this._onBackBtnPressed),this),E.loadGraphicFromTexture(this.closeBtn,Y.t,"closeBtn.png");this.closeBtn;Y.setScale(this.closeBtn,.8,!0),this.closeBtn.y=150-0*this.closeBtn.height/2|0,this.closeBtn.x=ji.game.width/2+202-0*this.closeBtn.width/2|0,this.closeBtn.fixedToCamera=!0,this.add(this.closeBtn),this.yesBtn=new Ve(0,0,i(this,this.onYesBtnPressed),this),E.loadGraphicFromTexture(this.yesBtn,Y.t,"okBtn.png"),Y.setScale(this.yesBtn,null,!0),Y.setPosUsingCenter(this.yesBtn,ji.game.width/2,334),this.yesBtn.fixedToCamera=!0;this.yesBtn;this.add(this.yesBtn)};s["com.drderico.towerd.ui.ConfirmScreen"]=Pi,Pi.__name__=["com","drderico","towerd","ui","ConfirmScreen"],Pi.__interfaces__=[Vt],Pi.show=function(t,e,i,s,n){null==s&&(s=!0),Pi.curScreen=Pi.pool.get(),Pi.curScreen._show(e,i,s,n),Fi.add(t),t.add(Pi.curScreen),Pi.stack.push(Pi.curScreen)},Pi.hide=function(t){if(null!=Pi.stack&&Pi.stack.length>0){var e=Pi.stack.pop();t.remove(e,!1,!0),Fi.remove(t),e.disableInput(),e.put(),Pi.stack.length>0?(Pi.curScreen=Pi.stack[Pi.stack.length-1],Pi.curScreen.enableInput()):Pi.curScreen=null}},Pi.onBackBtnPressed=function(){Pi.curScreen._onBackBtnPressed()},Pi.isVisible=function(){return 0!=Pi.stack.length},Pi.__super__=K,Pi.prototype=e(K.prototype,{onGameResize:function(){this.bg.position.set(ji.game.width/2-this.bg.width/2+Y.screenOffsetX,240-this.bg.height/2+Y.screenOffsetY),this.closeBtn.fixedToCamera=!1,this.closeBtn.y=150-0*this.closeBtn.height/2|0,this.closeBtn.x=ji.game.width/2+202-0*this.closeBtn.width/2|0,this.closeBtn.fixedToCamera=!0,this.yesBtn.fixedToCamera=!1,Y.setPosUsingCenter(this.yesBtn,ji.game.width/2,334),this.yesBtn.fixedToCamera=!0,this.text.fixedToCamera=!1,Y.setPosUsingCenter(this.text,ji.game.width/2,240+(this.yesBtn.visible?-18:0)),this.text.fixedToCamera=!0},_onBackBtnPressed:function(t){this.closeBtn.visible?Y.onBtnClicked(this.closeBtn,i(this,this.__onBackBtnPressed)):this.__onBackBtnPressed()},__onBackBtnPressed:function(){U.sceneManager.hideConfirmScreen(),null!=this._onCloseCallback&&this._onCloseCallback()},onYesBtnPressed:function(t){Y.onBtnClicked(this.yesBtn,i(this,this._onYesBtnPressed))},_onYesBtnPressed:function(){U.sceneManager.hideConfirmScreen(),null!=this._onYesCallback&&this._onYesCallback()},_show:function(t,e,i,s){if(null==i&&(i=!0),this.exists=!0,this.enableInput(),null==e?i&&(this.yesBtn.visible=!1,this.yesBtn.set_disabled(!0)):(this.yesBtn.visible=!0,this.yesBtn.set_disabled(!1)),this._onYesCallback=e,this._onCloseCallback=s,this.text.text=t,Y.setPosUsingCenter(this.text,ji.game.width/2,240+(this.yesBtn.visible?-18:0)),this.text.cameraOffset.x=this.text.x,this.text.cameraOffset.y=this.text.y,i){this.closeBtn.visible=!0,this.closeBtn.scale.set(.1,.1);var n=this.closeBtn.scale,o=Phaser.Easing.Bounce.Out;as.tween(n,{y:.8,x:.8},.3,{ease:o},null)}else this.closeBtn.visible=!1;this.yesBtn.scale.set(.1,.1);var r=this.yesBtn.scale,a=Phaser.Easing.Bounce.Out;as.tween(r,{y:1,x:1},.3,{ease:a},null)},put:function(){Pi.pool.put(this)},destroy:function(t,e){},__class__:Pi});var Ci=function(){K.call(this)};s["com.drderico.towerd.ui.ScreenGroup"]=Ci,Ci.__name__=["com","drderico","towerd","ui","ScreenGroup"],Ci.__super__=K,Ci.prototype=e(K.prototype,{show:function(){Bi.getInstance().showBackBtn()},__class__:Ci});var Ei=function(){Ci.call(this),this.playBtn=new Ve(0,0,i(this,this.onPlayBtnPressed),this),E.loadGraphicFromTexture(this.playBtn,Y.t2,"play_btn.png"),Y.setScale(this.playBtn,null,!0);this.playBtn;this.add(this.playBtn),this.musicOnBtn=new Ve(0,0,i(this,this.onMusicBtnPressed),this),E.loadGraphicFromTexture(this.musicOnBtn,Y.t,"musicOnBtn.png"),Y.setScale(this.musicOnBtn,null,!0);this.musicOnBtn;this.add(this.musicOnBtn),this.shopBtn=new Ve(0,0,i(this,this.onShopBtnPressed),this),E.loadGraphicFromTexture(this.shopBtn,Y.t2,"shop_btn.png"),Y.setScale(this.shopBtn,null,!0);this.shopBtn;this.add(this.shopBtn),Ei.shopSkinBtn=new Ni(i(this,this.onShopSkinBtnPressed),this),this.add(Ei.shopSkinBtn.btnBg),this.add(Ei.shopSkinBtn.hero),this.onGameResize()};s["com.drderico.towerd.ui.MainMenu"]=Ei,Ei.__name__=["com","drderico","towerd","ui","MainMenu"],Ei.__super__=Ci,Ei.prototype=e(Ci.prototype,{onGameResize:function(){this.playBtn.fixedToCamera=!1,Y.setPosUsingCenter(this.playBtn,ji.game.width/2,Bi.levelY+224),this.playBtn.fixedToCamera=!0,this.musicOnBtn.fixedToCamera=!1,Y.setPosUsingCenter(this.musicOnBtn,ji.game.width/2+284,Bi.levelY+190+114-this.musicOnBtn.offsetY),this.musicOnBtn.fixedToCamera=!0,this.shopBtn.fixedToCamera=!1,Y.setPosUsingCenter(this.shopBtn,ji.game.width/2+284,Bi.levelY+70),this.shopBtn.fixedToCamera=!0,Ei.shopSkinBtn.setPos(ji.game.width/2-284,Bi.levelY+70)},onPlayBtnPressed:function(t){this.showAnimation||Y.onBtnClicked(this.playBtn,i(this,this._onPlayBtnPressed))},_onPlayBtnPressed:function(){var t=this;!j.gameOver&&j.level.get_value()>0?U.sceneManager.showConfirmScreen(this,Vi.flags(Y.tongue.get("$CONTINUE_SAVED_GAME"),["<X>"],[c.string(j.level.get_value()+1)]),function(){t.startGame()},!0):this.startNewGame()},startNewGame:function(){void 0!=window.parent&&void 0!=window.parent.cmgGameEvent&&window.parent.cmgGameEvent("start"),j.gameOver=!0,this.startGame()},startGame:function(){var t=c.string(j.level.get_value()+1);void 0!=window.parent&&void 0!=window.parent.cmgGameEvent&&window.parent.cmgGameEvent("start",t),U.sceneManager.showGameScene()},onMusicBtnPressed:function(t){this.showAnimation||Y.onBtnClicked(this.musicOnBtn,i(this,this._onMusicBtnPressed))},_onMusicBtnPressed:function(){Y._onMusicBtnPressed(),Y.toggleMusicBtns(this.musicOnBtn)},show:function(){this.showAnimation=!0,Y.toggleMusicBtns(this.musicOnBtn),this.playBtn.visible=!1,this.musicOnBtn.visible=!1,this.shopBtn.visible=!1,Ei.shopSkinBtn.btnBg.visible=!1,Ei.shopSkinBtn.hero.visible=!1,Y.setScale(this.playBtn,null,!0),Y.setScale(this.musicOnBtn,null,!0),Y.setScale(this.shopBtn,null,!0),Bi.getInstance().hideBackBtn(),G.scaleUpDown(this.playBtn,null,1.3,.05,.1,i(this,this._showPlayBtn),this),G.scaleUpDown(this.musicOnBtn,null,1.3,.05,.24000000000000002,i(this,this._showMusicBtn),this)},_showPlayBtn:function(t){this.playBtn.visible=!0},_showLbBtn:function(t){j.helloPlayerWindow?this.showAnimation=!1:(j.shopBtnShown||j.shopSkinBtnShown?j.shopSkinBtnShown?this.showAnimation=!1:this.showSkinBtnAtFirstTime():(this.shopBtn.visible=!0,G.scaleUpDown(this.shopBtn,i(this,this._onShopBtnShow),1.3,.05,0,null,this)),j.shopBtnShown&&(this.shopBtn.visible=!0,G.scaleUpDown(this.shopBtn,null,1.3,.05)),j.shopSkinBtnShown&&(Ei.shopSkinBtn.btnBg.visible=!0,Ei.shopSkinBtn.hero.visible=!0,G.scaleUpDown(Ei.shopSkinBtn.btnBg,null,1.3,.05),G.scaleUpDown(Ei.shopSkinBtn.hero,null,1.3,.05),this.showAnimation=!1))},_onShopBtnShow:function(t){Q.powerup_pickup(),wt.get().show(this.shopBtn.centerX,this.shopBtn.centerY,this),wt.get().show(this.shopBtn.centerX,this.shopBtn.centerY,this),Y.delay(.8,i(this,this._onShopBtnShow2),null,this)},_onShopSkinBtnShow:function(t){Q.powerup_pickup(),wt.get().show(Ei.shopSkinBtn.heroMiddleX,Ei.shopSkinBtn.heroMiddleY,this),wt.get().show(Ei.shopSkinBtn.heroMiddleX,Ei.shopSkinBtn.heroMiddleY,this),Y.delay(.8,i(this,this._onShopSkinBtnShow2),null,this)},_onShopBtnShow2:function(t){j.shopBtnShown=!0,U.sceneManager.showShopScreen(Bi.getInstance(),i(this,this.showSkinBtnAtFirstTime)),U.sceneManager.showConfirmScreen(z.shopScreen,Y.tongue.get("$SHOP_BTN_TUTORIAL"),null,!1)},_onShopSkinBtnShow2:function(t){this.showAnimation=!1,j.shopSkinBtnShown=!0,U.sceneManager.showShopSkinScreen(Bi.getInstance()),U.sceneManager.showConfirmScreen(z.shopSkinScreen,Y.tongue.get("$SHOP_SKIN_BTN_TUTORIAL"),null,!1),j.save()},showSkinBtnAtFirstTime:function(){Ei.shopSkinBtn.btnBg.visible=!0,Ei.shopSkinBtn.hero.visible=!0,G.scaleUpDown(Ei.shopSkinBtn.btnBg,i(this,this._onShopSkinBtnShow),1.3,.05,0,null,this),G.scaleUpDown(Ei.shopSkinBtn.hero,null,1.3,.05)},_showMusicBtn:function(t){this.musicOnBtn.visible=!0,this._showLbBtn()},onShopBtnPressed:function(t){this.showAnimation||Y.onBtnClicked(this.shopBtn,i(this,this._onShopBtnPressed))},_onShopBtnPressed:function(){this.showAnimation||U.sceneManager.showShopScreen(Bi.getInstance())},onShopSkinBtnPressed:function(t){this.showAnimation||U.sceneManager.showShopSkinScreen(Bi.getInstance())},forceShowShopBtns:function(){this.shopBtn.visible=!0,Ei.shopSkinBtn.btnBg.visible=!0,Ei.shopSkinBtn.hero.visible=!0},__class__:Ei});var Bi=function(){this.state=0,this.confirmationScreenShowed=!1,K.call(this),z.onGameResizeSignal.add(i(this,this.onGameResize),this),Bi.instance=this,Bi.gemsHud=new Dt,Bi.coinsHud=new Ht,Bi.scoreHud=new Yt(!0),Bi.livesHud=new Xt,Bi.levelHud=new Ut(!0),Bi.bgLevel=new Ai,Bi.bgLevel.level=new pe,Bi.bgLevel.level.createGridArray(),Bi.bgLevel.level.drawOnGrid(0,0,48,22,-1),Bi.bgLevel.level.drawOnGrid(2,0,44,20,0),Bi.bgLevel.level.drawOnGrid(2,0,44,1,1),Bi.bgLevel.level.drawOnGrid(2,20,44,1,1),Bi.bgLevel.level.drawOnGrid(2,0,1,20,1),Bi.bgLevel.level.drawOnGrid(45,0,1,20,1),Bi.bgLevel.level.createCeil(2,44,0),Bi.levelY=(ji.game.height-1*Rt.HEIGHT_BOTTOM-Y.screenOffsetY+(Y.screenOffsetY+1*Rt.HEIGHT_TOP))/2-1*(Z.VISIBLE_LEVEL_HEIGHT-12)*16/2|0,Bi.bgLevel.create_(J.GRID_X,Bi.levelY),this.add(Bi.bgLevel),this.title=new lt,E.loadGraphicFromTexture(this.title,Y.t2,"title.png"),Y.setScale(this.title),this.add(this.title),this.torch1=new Oi,this.add(this.torch1),this.torch2=new Oi,this.add(this.torch2),this.add(Bi.coinsHud.txt),this.add(Bi.scoreHud.txt),this.add(Bi.livesHud.txt),this.add(Bi.levelHud.txt),this.add(Bi.gemsHud.txt),this.add(Bi.levelHud.staticTxt),this.add(Bi.scoreHud.staticTxt),this.add(Bi.coinsHud.coin),Bi.livesHud.addHeartsTo(this),this.add(Bi.gemsHud.gem),this.screens=[],this.screens[0]=new Ei,this.state=0,this.onGameResize()};s["com.drderico.towerd.ui.TitleScreen"]=Bi,Bi.__name__=["com","drderico","towerd","ui","TitleScreen"],Bi.__interfaces__=[Nt],Bi.getInstance=function(){return null==Bi.instance&&(Bi.instance=new Bi),Bi.instance},Bi.__super__=K,Bi.prototype=e(K.prototype,{_onBackBtnPressed:function(){Y.onBtnClicked(this.backBtn,i(this,this.onBackBtnPressed1))},onBackBtnPressed1:function(){this.onBackBtnPressed()},show:function(){Q.reset(),ji.get_camera().follow(null),ji.get_camera().setPosition(0,0),ji.get_camera().flash(0,600,!0),this.title.y=Bi.TITLE_Y,as.tween(this.title,{y:Bi.TITLE_Y-6},1.3,{type:5},null),this.confirmationScreenShowed=!1,this.switchScreen(0),this.backBtnExecutionReady=!0,this.updateValues(),$.cleanGarbage(),J.cleanGarbage()},switchScreen:function(t){this.remove(this.screens[this.state],!1,!0),this.state=t,this.add(this.screens[this.state],!0),this.screens[this.state].show()},onBackBtnPressed:function(t){if(null==t&&(t=!1),this.backBtnExecutionReady)switch(t&&Q.click(),this.state){case 0:break;case 1:this.backToMainMenu()}},showExitConfirmScreen:function(){var t=this;j.save(),U.sceneManager.showConfirmScreen(this,Y.tongue.get("$QUIT_THE_GAME"),function(){t.onExitConfirmed()})},onExitConfirmed:function(){},backToMainMenu:function(){this.switchScreen(0),this.hideBackBtn()},updateValues:function(){Bi.gemsHud.updateText(!1),Bi.livesHud.updateLives(!0,j.heroLivesMax.get_value()),Bi.coinsHud.updateText(!1),Bi.scoreHud.updateText(!1,!0),Bi.levelHud.updateText(j.bestLevel.get_value())},update:function(){K.prototype.update.call(this),Bi.needUpdateValues&&(this.updateValues(),Bi.needUpdateValues=!1,U.changeBgColor(),U.sceneManager.showConfirmScreen(Bi.getInstance(),Y.tongue.get("$GOOGLE_SAVE_LOADED"),null,!1),z.shopSkinScreen.updateAllValues(),Bs.__cast(this.screens[0],Ei).forceShowShopBtns()),Bi.needUpdateBestScore&&(Bi.needUpdateBestScore=!1,Bi.scoreHud.updateText(!1,!0))},showBackBtn:function(){},hideBackBtn:function(){},onHide:function(){},destroy:function(t,e){},onGameResize:function(){if(null!=this.screens){Y.setPosUsingCenter(this.title,ji.game.width/2,Bi.levelY+96),Bi.TITLE_Y=this.title.y,this.torch1.x=ji.game.width/2-200,this.torch2.x=ji.game.width/2+200,this.torch1.y=this.title.y+50,this.torch2.y=this.title.y+50;var t=0;t=ji.game.width/2-380,Bi.levelHud.setPosition(t,0*Y.screenOffsetY+10),t=Bi.levelHud.cameraOffset.x+180,Bi.scoreHud.setPosition(t,Bi.levelHud.cameraOffset.y),Bi.coinsHud.setPosition(ji.game.width/2+25,Bi.scoreHud.cameraOffset.y),Bi.gemsHud.setPosition(ji.game.width/2+150,Bi.scoreHud.cameraOffset.y),Bi.livesHud.setPosition(ji.game.width/2+264,Bi.scoreHud.cameraOffset.y+2),Bs.__cast(this.screens[0],Ei).onGameResize(),Bi.levelY=(ji.game.height-1*Rt.HEIGHT_BOTTOM-Y.screenOffsetY+(Y.screenOffsetY+1*Rt.HEIGHT_TOP))/2-1*(Z.VISIBLE_LEVEL_HEIGHT-12)*16/2|0,Bi.bgLevel.onGameResize(J.GRID_X,Bi.levelY)}},__class__:Bi});var Li=function(){K.call(this),this.set_active(!1),this.map=new rs(null,8,8,1,1),this.map.addTilesetImage("t",Y.wmap,8,8)};s["com.drderico.towerd.ui.WindowBg"]=Li,Li.__name__=["com","drderico","towerd","ui","WindowBg"],Li.__super__=K,Li.prototype=e(K.prototype,{show:function(t,e,i,s){null==i&&(i=ji.game.width/2),null==s&&(s=240),this.create_(t,e),this.position.set(i-this.width/2+Y.screenOffsetX,s-this.height/2+Y.screenOffsetY)},create_:function(t,e){var i=t/8|0,s=e/8|0;if(this.map.width!=i||this.map.height!=s){this.removeAll(!1),this.layer=this.map.create("0",i,s,8,8,this),this.layer.resize(8*i,8*s),this.map.fill(0,0,0,i,s,0),this.layer.renderSettings.enableScrollDelta=!1,this.layer.scale.set(1,1);for(var n=0,o=s;n<o;)for(var r=n++,a=0,l=i;a<l;){var h=a++;0==h?this.map.layers[0].data[r][h].index=1:h==i-1&&(this.map.layers[0].data[r][h].index=2),0==r?this.map.layers[0].data[r][h].index=4:r==s-1&&(this.map.layers[0].data[r][h].index=3)}this.map.putTile(5,0,0,0),this.map.putTile(5,i-1,0,0),this.map.putTile(5,0,s-1,0),this.map.putTile(5,i-1,s-1,0)}},destroy:function(t,e){},__class__:Li});var Ai=function(){K.call(this),this.gridMapArray=[],null==Ai.gridMapArrayForWalls&&(Ai.gridMapArrayForWalls=[]);for(var t=0;t<30;){var e=t++;this.gridMapArray[e]=[],Ai.gridMapArrayForWalls[e]=[];for(var i=0;i<56;){var s=i++;this.gridMapArray[e][s]=0,Ai.gridMapArrayForWalls[e][s]=0}}this.gridMap=new rs,this.gfx=new K,this.gridMapGroup=new K,this.bg=new De,this.add(this.bg),this.add(this.gfx),this.add(this.gridMapGroup)};s["com.drderico.towerd.ui.decor.TitleLevelGroup"]=Ai,Ai.__name__=["com","drderico","towerd","ui","decor","TitleLevelGroup"],Ai.__super__=K,Ai.prototype=e(K.prototype,{create_:function(t,e){J.clearGroup(this.gfx),this.x=t,this.y=e,this.placeChains(),this.placeWebs(),this.createTileMapGfx(),this.bg.change(48,22,j.envSetting.get_value())},placeWebs:function(){var t=null;ji.random.float(0,100)<50&&((t=xi.get()).reset_(0*this.x+48,0*this.y+16),t.set_flipX(!0),this.gfx.add(t)),ji.random.float(0,100)<50&&((t=xi.get()).reset_(0*this.x+Math.round(720)-Math.floor(t.width),0*this.y+16),t.set_flipX(!1),this.gfx.add(t))},placeChains:function(){for(var t=0,e=this.level.ceilParts;t<e.length;){var i=e[t];if(++t,ji.random.float(0,100)<70){var s=ni.get(j.envSetting.get_value());s.reset_(0*this.x+16*ji.random.int(i.x+2,i.x+i.width-3),0*this.y+16*(i.y+1)),this.gfx.add(s)}}},destroy:function(t,e){},drawOnGrid:function(t,e,i,s,n){null==n&&(n=0);for(var o=e,r=e+s;o<r;)for(var a=o++,l=t,h=t+i;l<h;){var c=l++;this.gridMapArray[a][c]=n}},createTileMapGfx:function(){for(var t=0;t<30;)for(var e=t++,i=0;i<56;){var s=i++;Ai.gridMapArrayForWalls[e][s]=-1,this.gridMapArray[e][s]=1}for(var n=0,o=0;o<22;)for(var r=o++,a=0;a<48;){var l=a++;switch(n=this.level.grid[r][l]){case 0:n=0;break;case 1:break;case 2:n=2;break;case 3:n=44;break;case 4:n=43}Ai.gridMapArrayForWalls[r+4][l+4]=n}for(var h=0,c=0,_=0,u=0,d=0,p=0,g=0,f=0,m=0,v=1;v<29;)for(var y=v++,x=1;x<55;){var w=x++;1==(h=Ai.gridMapArrayForWalls[y][w])&&(c=Ai.gridMapArrayForWalls[y-1][w-1],_=Ai.gridMapArrayForWalls[y-1][w],u=Ai.gridMapArrayForWalls[y-1][w+1],d=Ai.gridMapArrayForWalls[y][w-1],p=Ai.gridMapArrayForWalls[y][w+1],g=Ai.gridMapArrayForWalls[y+1][w-1],f=Ai.gridMapArrayForWalls[y+1][w],m=Ai.gridMapArrayForWalls[y+1][w+1],-1==c&&-1==_&&-1==d&&1==p&&1==f&&-1!=m?this.gridMapArray[y][w]=ji.random.float(0,100)<50?17:21:-1==_&&1==d&&1==p&&0==f?this.gridMapArray[y][w]=ji.random.int(6,8):-1!=c&&1==_&&-1==u&&-1!=d&&1==p&&0==g&&0==f&&0==m?this.gridMapArray[y][w]=25:-1==c&&1==_&&-1!=u&&1==d&&-1!=p&&0==g&&0==f&&0==m?this.gridMapArray[y][w]=26:-1==c&&-1==_&&-1==u&&1==d&&-1==p&&-1!=g&&1==f?this.gridMapArray[y][w]=ji.random.float(0,100)<50?18:22:1==_&&-1==d&&-1!=p&&1==f?this.gridMapArray[y][w]=ji.random.int(9,11):1==_&&-1!=d&&-1==p&&1==f?this.gridMapArray[y][w]=ji.random.int(12,14):-1!=_&&-1!=u&&1==d&&1!=p&&1==f&&-1!=m?this.gridMapArray[y][w]=24:-1!=c&&-1!=_&&1!=d&&1==p&&-1!=g&&1==f&&-1==m?this.gridMapArray[y][w]=23:-1==f&&1==d&&1==p&&-1!=_?this.gridMapArray[y][w]=ji.random.int(3,5):1==_&&-1!=u&&-1==d&&1==p&&-1==f?this.gridMapArray[y][w]=ji.random.float(0,100)<50?15:19:-1!=c&&1==_&&1==d&&-1==p&&-1==f&&(this.gridMapArray[y][w]=ji.random.float(0,100)<50?16:20))}for(var b=0;b<30;)for(var T=b++,S=0;S<56;){var I=S++;if(1==(h=Ai.gridMapArrayForWalls[T][I])){this.gridMapArray[T][I-1]=ji.random.int(31,32),ji.random.float(0,100)<70&&(this.gridMapArray[T][I-2]=ji.random.int(39,39));break}}for(var k=0;k<30;)for(var F=k++,P=0;P<56;){var C=55-P++;if(1==(h=Ai.gridMapArrayForWalls[F][C])){this.gridMapArray[F][C+1]=ji.random.int(33,33),ji.random.float(0,100)<70&&(this.gridMapArray[F][C+2]=ji.random.int(41,41));break}}for(var E=0;E<56;)for(var B=E++,L=0;L<30;){var A=L++;if(1==(h=Ai.gridMapArrayForWalls[A][B])){this.gridMapArray[A-1][B]=ji.random.int(29,30),ji.random.float(0,100)<70&&(this.gridMapArray[A-2][B]=ji.random.int(37,37));break}}for(var O=0;O<56;)for(var M=O++,G=0;G<30;){var H=29-G++;if(1==(h=Ai.gridMapArrayForWalls[H][M])){this.gridMapArray[H+1][M]=ji.random.int(27,27),ji.random.float(0,100)<70&&(this.gridMapArray[H+2][M]=ji.random.int(35,35));break}}for(var D=0;D<30;)for(var N=D++,R=0;R<56;){var W=R++;1!=(h=Ai.gridMapArrayForWalls[N][W])&&-1!=h&&(0==h&&(h=0),this.gridMapArray[N][W]=h)}this.changeWallsColor(),this.gridMapGroup.x=-64,this.gridMapGroup.y=-64},changeWallsColor:function(t){if(null==t&&(t=!1),this.gridMap.addTilesetImage("tileset",D.MAP_TEXTURES[j.envSetting.get_value()],16,16),Ai.firstDraw){this.gridMapGroup.removeAll();var e=this.gridMapArray[0].length,i=this.gridMapArray.length,s=this.gridMap.create("layer",e,i,16,16,this.gridMapGroup);s.resize(16*e,16*i),s.scale.set(1,1);for(var n=0,o=this.gridMapArray.length;n<o;)for(var r=n++,a=0,l=this.gridMapArray[0].length;a<l;){var h=a++;this.gridMap.layers[0].data[r][h].index=this.gridMapArray[r][h]}Ai.firstDraw=!1}if(this.gridMap.layers[0].dirty=!0,t){this.bg.change(48,22,j.envSetting.get_value());for(var c=0,_=this.gfx.children;c<_.length;){var u=_[c];++c,Bs.__instanceof(u,ni)&&Bs.__cast(u,ni).changeLook(j.envSetting.get_value())}}},onGameResize:function(t,e){this.x=t,this.y=e},__class__:Ai});var Oi=function(){K.call(this);var t=new lt;E.loadGraphicFromTexture(t,Y.t2,"torch0001.png"),Y.setScale(t),t.animation.addByNames("1",["torch0001.png","torch0002.png","torch0003.png","torch0004.png","torch0005.png"],12),Y.setPosUsingCenter(t),t.animation.play("1"),t.set_moves(!1),this.add(t),t=new lt,E.loadGraphicFromTexture(t,Y.t2,"fakel_light0001.png"),Y.setScale(t),t.animation.addByNames("1",["fakel_light0001.png","fakel_light0002.png"],12),Y.setPosUsingCenter(t,0,-0),t.animation.play("1"),t.blendMode=PIXI.blendModes.ADD,t.set_moves(!1),this.add(t)};s["com.drderico.towerd.ui.decor.Torch"]=Oi,Oi.__name__=["com","drderico","towerd","ui","decor","Torch"],Oi.__super__=K,Oi.prototype=e(K.prototype,{__class__:Oi});var Mi=function(t,e,i){lt.call(this),this.set_moves(!1),this.fixedToCamera=!0,E.loadGraphicFromTexture(this,Y.t2,D.HERO_SKIN_TEXTURES[t][0][0]),this.animation.addByNames("1",[D.HERO_SKIN_TEXTURES[t][0][0],D.HERO_SKIN_TEXTURES[t][0][1]],6),Y.setScale(this),this.setPosition(e-this.width/2,i-this.height)};s["com.drderico.towerd.ui.shop.HeroSkinSprite"]=Mi,Mi.__name__=["com","drderico","towerd","ui","shop","HeroSkinSprite"],Mi.__super__=lt,Mi.prototype=e(lt.prototype,{activate:function(){this.animation.play("1",!0)},deactivate:function(){null!=this.animations.currentAnim&&this.animations.currentAnim.stop(!0)},__class__:Mi});var Gi=function(t,e){K.call(this),this.scale.set(1,1),this._cb=e,this.btnBg=new Ve(0,0,i(this,this.onBtnPressed),this),this.btnBg.ID=t,E.loadGraphicFromTexture(this.btnBg,Y.t2,"shop_buy_btn.png"),Y.setScale(this.btnBg);this.btnBg;switch(Y.setPosUsingCenter(this.btnBg,-this.btnBg.width/2-13,0),this.add(this.btnBg),this.addedValue=Y.getText(),t){case 0:case 1:this.addedValue.text=Y.tongue.get("$PLUS_2_SECONDS");break;case 2:this.addedValue.text=Y.tongue.get("$PLUS_1_LIFE")}Y.setScale(this.addedValue),Y.setPosUsingCenter(this.addedValue,this.btnBg.x+this.btnBg.width/2,this.btnBg.y+14),this.addedValue.fixedToCamera=!0,this.add(this.addedValue),this.price=Y.getText(),this.price.text="300",Y.setScale(this.price),Y.setPosUsingCenter(this.price,this.btnBg.x+this.btnBg.width/2+15,this.btnBg.y+this.btnBg.height-28),this.add(this.price),this.coin=new lt,2==t?E.loadGraphicFromTexture(this.coin,Y.t2,"gem_shop.png"):E.loadGraphicFromTexture(this.coin,Y.t2,"coin_shop.png"),Y.setScale(this.coin),2==t?this.coin.setPosition(this.price.x-28,this.price.y+2):this.coin.setPosition(this.price.x-28,this.price.y+3),this.price.fixedToCamera=!0,this.coin.fixedToCamera=!0,this.add(this.coin)};s["com.drderico.towerd.ui.shop.ShopButton"]=Gi,Gi.__name__=["com","drderico","towerd","ui","shop","ShopButton"],Gi.__super__=K,Gi.prototype=e(K.prototype,{onBtnPressed:function(t){Q.click(),G.scaleUpDown(this,i(this,this._onBtnPressed),1.2,.025,0,null,this)},_onBtnPressed:function(t){null!=this._cb&&this._cb(this.btnBg)},__class__:Gi});var Hi=function(){this.valueDescs=[],this.itemDescs=[],this.itemTitles=[],this.itemIcons=[],this.itemBgs=[],K.call(this),z.onGameResizeSignal.add(i(this,this.onGameResize),this),this.btns=[],this.values=[],this.bg=new Li,this.add(this.bg),this.bg.show(592,384),this.bg.y-=15,this.text=Y.getText(32,"center"),this.text.text=Y.tongue.get("$SHOP_TITLE"),this.text.tint=3269886,Y.setScale(this.text),Y.setPosUsingCenter(this.text,ji.game.width/2,this.bg.y+38),this.text.fixedToCamera=!0,this.add(this.text);for(var t=0;t<3;){var e=t++,s=new lt;E.loadGraphicFromTexture(s,Y.t2,"shop_item_bg.png"),Y.setScale(s),s.set_active(!1),Y.setPosUsingCenter(s,ji.game.width/2,ji.game.height/2-90+100*e*1),s.fixedToCamera=!0,this.add(s),this.itemBgs.push(s),this.btns[e]=new Gi(e,i(this,this.onBuyBtnPressed)),this.btns[e].x=s.x+s.width,this.btns[e].y=s.y+s.height/2,this.add(this.btns[e]);var n=new lt;switch(e){case 0:E.loadGraphicFromTexture(n,Y.t2,"shop_magnet.png");break;case 1:E.loadGraphicFromTexture(n,Y.t2,"shop_shield.png");break;case 2:E.loadGraphicFromTexture(n,Y.t2,"shop_lives.png")}Y.setScale(n),n.set_active(!1),Y.setPosUsingCenter(n,s.x+n.width/2+13,s.y+s.height/2),n.fixedToCamera=!0,this.add(n),this.itemIcons.push(n);var o=Y.getText(D.DEFAULT_TEXT_SIZE);switch(e){case 0:o.text=Y.tongue.get("$SHOP_MAGNET_ITEM_NAME");break;case 1:o.text=Y.tongue.get("$SHOP_SHIELD_ITEM_NAME");break;case 2:o.text=Y.tongue.get("$LIVES_ITEM_NAME")}Y.setScale(o),o.setPosition(n.x+n.width+13,n.y+2),o.fixedToCamera=!0,o.width>320&&(o.scale.x*=320/o.width),this.add(o),this.itemTitles.push(o);var r=Y.getText();switch(e){case 0:case 1:r.text=Y.tongue.get("$SHOP_ACTION_TIME");break;case 2:r.text=Y.tongue.get("$SHOP_LIVES_AMOUNT")}if(Y.setScale(r),r.setPosition(n.x+n.width+13,o.y+o.height+10),r.fixedToCamera=!0,this.add(r),this.itemDescs.push(r),this.values[e]=Y.getText(24),this.values[e].setPosition(r.x+r.width+10,r.y-2),this.values[e].tint=3269886,this.values[e].text="300",Y.setScale(this.values[e]),this.values[e].fixedToCamera=!0,this.add(this.values[e]),2!=e){var a=Y.getText();a.text=Y.tongue.get("$SECONDS"),Y.setScale(a),a.setPosition(this.values[e].x+40,r.y),a.fixedToCamera=!0,this.add(a),this.valueDescs.push(a)}}Hi.closeBtn=new Ve(0,0,i(this,this.onBackBtnPressed),this),E.loadGraphicFromTexture(Hi.closeBtn,Y.t,"closeBtn.png");Hi.closeBtn;Y.setScale(Hi.closeBtn,.8,!0),Hi.closeBtn.y=this.bg.y+10|0,Hi.closeBtn.x=ji.game.width/2+290|0,Hi.closeBtn.fixedToCamera=!0,this.add(Hi.closeBtn)};s["com.drderico.towerd.ui.shop.ShopScreen"]=Hi,Hi.__name__=["com","drderico","towerd","ui","shop","ShopScreen"],Hi.__super__=K,Hi.prototype=e(K.prototype,{onBuyBtnPressed:function(t){var e=this;switch(this.btnID=t.ID,this.itemPrice=0,this.btnID){case 0:this.itemPrice=q.getItemPrice(j.magnetLevel.get_value()),j.coins.get_value()>=this.itemPrice?U.sceneManager.showConfirmScreen(this,Vi.flags(Y.tongue.get("$BUY_MAGNET_CONFIRM"),["<X>"],[c.string(this.itemPrice)]),function(){e.onBuyConfirmed()}):U.sceneManager.showNotEnoughCoins(this);break;case 1:this.itemPrice=q.getItemPrice(j.invulnerabilityLevel.get_value()),j.coins.get_value()>=this.itemPrice?U.sceneManager.showConfirmScreen(this,Vi.flags(Y.tongue.get("$BUY_SHIELD_CONFIRM"),["<X>"],[c.string(this.itemPrice)]),function(){e.onBuyConfirmed()}):U.sceneManager.showNotEnoughCoins(this);break;case 2:this.itemPrice=this.getHealthPrice(),j.gems.get_value()>=this.itemPrice?U.sceneManager.showConfirmScreen(this,Vi.flags(Y.tongue.get("$BUY_HEALTH_CONFIRM"),["<X>"],[c.string(this.itemPrice)]),function(){e.onBuyConfirmed()}):U.sceneManager.showConfirmScreen(this,Y.tongue.get("$NOT_ENOUGH_GEMS_TO_BUY"),null,!1)}},onBuyConfirmed:function(){switch(this.btnID){case 0:var t=j.magnetLevel,e=t.get_value();t.set_value(e+1);var i=j.coins;i.set_value(i.get_value()-this.itemPrice),Bi.coinsHud.updateText(!1);break;case 1:var s=j.invulnerabilityLevel,n=s.get_value();s.set_value(n+1);var o=j.coins;o.set_value(o.get_value()-this.itemPrice),Bi.coinsHud.updateText(!1);break;case 2:var r=j.heroLivesMax,a=r.get_value();r.set_value(a+1),Bi.livesHud.updateLives(!1,j.heroLivesMax.get_value());var l=j.gems;l.set_value(l.get_value()-this.itemPrice),Bi.gemsHud.updateText(!1)}Q.powerup_pickup(),this.updateValues(),j.save(),ji.get_camera().flash(16777215,500)},onBackBtnPressed:function(t){Y.onBtnClicked(Hi.closeBtn,(Os=U.sceneManager,i(Os,Os.hideShopScreen)))},show:function(){this.onGameResize(),Hi.isVisible=!0,this.enableInput(),Hi.closeBtn.scale.set(.1,.1);var t=Hi.closeBtn.scale,e=Phaser.Easing.Bounce.Out;as.tween(t,{y:.8,x:.8},.3,{ease:e},null),this.updateValues()},onGameResize:function(){this.bg.x=ji.game.width/2-this.bg.width/2,this.text.fixedToCamera=!1,Y.setPosUsingCenter(this.text,ji.game.width/2,this.bg.y+38),this.text.fixedToCamera=!0;for(var t=0;t<3;){var e=t++,i=this.itemBgs[e];i.fixedToCamera=!1,Y.setPosUsingCenter(i,ji.game.width/2,ji.game.height/2-90+100*e*1),i.fixedToCamera=!0,this.btns[e].x=i.x+i.width,this.btns[e].y=i.y+i.height/2;var s=this.itemIcons[e];s.fixedToCamera=!1,Y.setPosUsingCenter(s,i.x+s.width/2+13,i.y+i.height/2),s.fixedToCamera=!0;var n=this.itemTitles[e];n.fixedToCamera=!1,n.setPosition(s.x+s.width+13,s.y+2),n.fixedToCamera=!0;var o=this.itemDescs[e];if(o.fixedToCamera=!1,o.setPosition(s.x+s.width+13,n.y+n.height+10),o.fixedToCamera=!0,this.values[e].fixedToCamera=!1,this.values[e].setPosition(o.x+o.width+10,o.y-2),this.values[e].fixedToCamera=!0,2!=e){var r=this.valueDescs[e];r.fixedToCamera=!1,r.setPosition(this.values[e].x+40,o.y),r.fixedToCamera=!0}}Hi.closeBtn.fixedToCamera=!1,Hi.closeBtn.y=this.bg.y+10|0,Hi.closeBtn.x=ji.game.width/2+290|0,Hi.closeBtn.fixedToCamera=!0},updateValues:function(){var t=q.getItemDuration(j.magnetLevel.get_value());this.values[0].text=c.string(t);var e=q.getItemDuration(j.invulnerabilityLevel.get_value());if(this.values[1].text=c.string(e),99==j.heroLivesMax.get_value())this.btns[2].set_active(!1),this.btns[2].visible=!1,this.btns[2].btnBg.set_disabled(!0);else{var i=this.getHealthPrice();this.btns[2].price.text=c.string(i)}var s=j.heroLivesMax.get_value();this.values[2].text=c.string(s);var n=q.getItemPrice(j.magnetLevel.get_value());this.btns[0].price.text=c.string(n);var o=q.getItemPrice(j.invulnerabilityLevel.get_value());this.btns[1].price.text=c.string(o)},getHealthPrice:function(){return 25+25*(j.heroLivesMax.get_value()-3)},__class__:Hi});var Di=function(t,e,s,n){K.call(this),this._cb=e,this.btnBg=new Ve(0,0,i(this,this.onBtnPressed),this),this.btnBg.ID=t,E.loadGraphicFromTexture(this.btnBg,Y.t2,"hero_item_ramka0002.png"),Y.setScale(this.btnBg),Y.setPosUsingCenter(this.btnBg,s-this.btnBg.width/2-13,n),this.btnBg.fixedToCamera=!0,this.add(this.btnBg),this.priceBg=new lt,this.priceBg.set_active(!1),E.loadGraphicFromTexture(this.priceBg,Y.t2,"hero_item_price_bg.png"),Y.setScale(this.priceBg),Y.setPosUsingCenter(this.priceBg,this.btnBg.x+this.btnBg.width/2,this.btnBg.y+this.btnBg.height+4),this.priceBg.fixedToCamera=!0,this.add(this.priceBg),this.price=Y.getText(16),this.price.fixedToCamera=!0,this.price.text="200",Y.setScale(this.price),Y.setPosUsingCenter(this.price,this.priceBg.x+this.priceBg.width/2+8,this.priceBg.y+this.priceBg.height/2-5),this.price.fixedToCamera=!0,this.add(this.price),this.coin=new lt,E.loadGraphicFromTexture(this.coin,Y.t2,"coin_shop.png"),Y.setScale(this.coin,.8),this.coin.set_active(!1),this.coin.setPosition(this.priceBg.x+7,this.price.y+3),this.coin.fixedToCamera=!0,this.add(this.coin),this.hero=new Mi(t,this.btnBg.x+this.btnBg.width/2,n+26),this.hero.fixedToCamera=!0,this.add(this.hero),this.updateBgView(),this.updatePos(s,n)};s["com.drderico.towerd.ui.shop.ShopSkinButton"]=Di,Di.__name__=["com","drderico","towerd","ui","shop","ShopSkinButton"],Di.__super__=K,Di.prototype=e(K.prototype,{updatePos:function(t,e){this.btnBg.fixedToCamera=!1,Y.setPosUsingCenter(this.btnBg,t-this.btnBg.width/2-13,e),this.btnBg.fixedToCamera=!0,this.priceBg.fixedToCamera=!1,Y.setPosUsingCenter(this.priceBg,this.btnBg.x+this.btnBg.width/2,this.btnBg.y+this.btnBg.height+4),this.priceBg.fixedToCamera=!0,this.price.fixedToCamera=!1,Y.setPosUsingCenter(this.price,this.priceBg.x+this.priceBg.width/2+8,this.priceBg.y+this.priceBg.height/2-5),this.price.fixedToCamera=!0,this.coin.fixedToCamera=!1,this.coin.setPosition(this.priceBg.x+7,this.price.y+3),this.coin.fixedToCamera=!0,this.hero.fixedToCamera=!1,this.hero.x=this.btnBg.x+this.btnBg.width/2-this.hero.width/2,this.hero.y=e+26-this.hero.height,this.hero.fixedToCamera=!0},updateBgView:function(){if(j.isSkinAvailable(this.btnBg.ID)){E.loadGraphicFromTexture(this.btnBg,Y.t2,"hero_item_ramka0002.png");this.btnBg;null!=this.priceBg&&(this.priceBg.visible=!1,this.price.visible=!1,this.coin.visible=!1)}else{E.loadGraphicFromTexture(this.btnBg,Y.t2,"hero_item_ramka0001.png");this.btnBg;null!=this.priceBg&&(this.priceBg.visible=!0,this.price.visible=!0,this.coin.visible=!0,this.price.text=c.string(Ri.skinPriceStr))}j.heroSkin.get_value()==this.btnBg.ID?this.hero.activate():this.hero.deactivate(),Y.setScale(this.btnBg)},onBtnPressed:function(t){t.ID!=j.heroSkin.get_value()&&(Q.click(),G.scaleUpDown(this.btnBg,i(this,this._onBtnPressed),1.1,.025,0,null,this),G.scaleUpDown(this.hero,null,1.1))},_onBtnPressed:function(t){null!=this._cb&&this._cb(this.btnBg)},__class__:Di});var Ni=function(t,e){this.heroMiddleY=0,this.heroMiddleX=0,this._context=e,this._cb=t,this.btnBg=new Ve(0,0,i(this,this.onBtnPressed),e),E.loadGraphicFromTexture(this.btnBg,Y.t2,"shop_skins_btn.png");this.btnBg;Y.setScale(this.btnBg),Y.setPosUsingCenter(this.btnBg,0,0),this.hero=new lt,this.hero.set_moves(!1),E.loadGraphicFromTexture(this.hero,Y.t,D.HERO_SKIN_TEXTURES[0][1][0]),Y.setScale(this.hero),this.hero.set_flipX(!0)};s["com.drderico.towerd.ui.shop.ShopSkinButtonInMainMenu"]=Ni,Ni.__name__=["com","drderico","towerd","ui","shop","ShopSkinButtonInMainMenu"],Ni.prototype={updateHeroView:function(){this.hero.animation.remove("1");var t=j.heroSkin.get_value();this.hero.animation.addByNames("1",[D.HERO_SKIN_TEXTURES[t][1][0],D.HERO_SKIN_TEXTURES[t][1][1]],6),Y.setPosUsingCenter(this.hero,this.heroMiddleX,this.heroMiddleY),this.hero.x+=1*Ni.offsetsWalk[t][1],this.hero.y+=1*Ni.offsetsWalk[t][2],this.hero.animation.play("1",!0)},setPos:function(t,e){this.heroMiddleX=t,this.heroMiddleY=e,Y.setPosUsingCenter(this.btnBg,t,e),this.updateHeroView()},onBtnPressed:function(t){Q.click(),G.scaleUpDown(this.btnBg,this._cb,1.2,.025,0,null,this._context),G.scaleUpDown(this.hero)},__class__:Ni};var Ri=function(){K.call(this),z.onGameResizeSignal.add(i(this,this.onGameResize),this),this.btns=[],this.skinPrice=new L,this.bg=new Li,this.add(this.bg),this.bg.show(736,384),this.bg.y-=15,this.title=Y.getText(32,"center"),this.title.text=Y.tongue.get("$SHOP_SKINS_TITLE"),this.title.tint=3269886,Y.setScale(this.title),Y.setPosUsingCenter(this.title,ji.game.width/2,this.bg.y+38),this.add(this.title);for(var t=170+0*Y.screenOffsetY,e=ji.game.width/2-349,s=e,n=0;n<12;){var o=n++;this.btns[o]=new Di(o,i(this,this.onSkinBtnPressed),s+118,t),this.add(this.btns[o]),5==o?(s=e,t+=136):s+=118}Ri.closeBtn=new Ve(0,0,i(this,this.onBackBtnPressed),this),E.loadGraphicFromTexture(Ri.closeBtn,Y.t,"closeBtn.png");Ri.closeBtn;Y.setScale(Ri.closeBtn,.8,!0),Ri.closeBtn.y=this.bg.y+10|0,Ri.closeBtn.x=ji.game.width/2+362|0,this.add(Ri.closeBtn)};s["com.drderico.towerd.ui.shop.ShopSkinsScreen"]=Ri,Ri.__name__=["com","drderico","towerd","ui","shop","ShopSkinsScreen"],Ri.__super__=K,Ri.prototype=e(K.prototype,{onSkinBtnPressed:function(t){var e=this;if(this.btnID=t.ID,j.isSkinAvailable(this.btnID)){var i=j.heroSkin.get_value();j.heroSkin.set_value(this.btnID),this.btns[i].updateBgView(),this.btns[j.heroSkin.get_value()].updateBgView(),Ei.shopSkinBtn.updateHeroView()}else j.coins.get_value()>=this.skinPrice.get_value()?U.sceneManager.showConfirmScreen(this,Vi.flags(Y.tongue.get("$SHOP_SKIN_BUY_CONFIRM"),["<X>"],[Ri.skinPriceStr]),function(){e.onBuyConfirmed()}):U.sceneManager.showNotEnoughCoins(this)},onBuyConfirmed:function(){j.buySkin(this.btnID);var t=j.coins;t.set_value(t.get_value()-this.skinPrice.get_value()),this.updateAllValues(),Q.powerup_pickup(),this.btns[this.btnID].updateBgView(),Bi.coinsHud.updateText(!1),j.save(),ji.get_camera().flash(16777215,500,!0)},onBackBtnPressed:function(t){Y.onBtnClicked(Ri.closeBtn,(Os=U.sceneManager,i(Os,Os.hideShopSkinScreen)))},show:function(){Ri.isVisible=!0,Ri.closeBtn.scale.set(.1,.1);var t=Ri.closeBtn.scale,e=Phaser.Easing.Bounce.Out;as.tween(t,{y:.8,x:.8},.3,{ease:e},null),this.updateAllValues(),this.onGameResize()},updateValues:function(){for(var t=0;t<12;){var e=t++;this.btns[e].updateBgView()}},getSkinPrice:function(){for(var t=0,e=0;e<12;){var i=e++;j.isSkinAvailable(i)&&++t}return 50+50*t},updateSkinPrice:function(){this.skinPrice.set_value(this.getSkinPrice()),Ri.skinPriceStr=c.string(this.skinPrice.get_value())},updateAllValues:function(){this.updateSkinPrice(),this.updateValues()},onGameResize:function(){this.bg.x=ji.game.width/2-this.bg.width/2,Y.setPosUsingCenter(this.title,ji.game.width/2,this.bg.y+38);for(var t=170+0*Y.screenOffsetY,e=ji.game.width/2-349,i=e,s=0;s<12;){var n=s++;this.btns[n].updatePos(i+118,t),5==n?(i=e,t+=136):i+=118}Ri.closeBtn.y=this.bg.y+10|0,Ri.closeBtn.x=ji.game.width/2+362|0},__class__:Ri});var Wi=function(t,e,i){null==i&&(i=!0),null==e&&(e=","),this._delimeter="",this._delimeter=e,this._quoted=i,""!=t&&this.processRows(this.getRows(t))};s["firetongue.CSV"]=Wi,Wi.__name__=["firetongue","CSV"],Wi.prototype={destroy:function(){this.clearArray(this.grid),this.clearArray(this.fields),this.grid=null,this.fields=null},clearArray:function(t){if(null!=t){for(var e=t.length-1;e>=0;)this.destroyThing(t[e]),t[e]=null,t.splice(e,1),--e;t=null}},destroyThing:function(t){null!=t&&(t instanceof Array&&null==t.__enum__&&this.clearArray(t),t=null)},getCells:function(t){return null==this._rgx&&(t.charAt(t.length-1)==this._delimeter&&(t=r.substr(t,0,t.length-1)),","==this._delimeter?this._rgx=new o(",(?=(?:[^\\x22]*\\x22[^\\x22]*\\x22)*(?![^\\x22]*\\x22))","gm"):this._rgx=new o(this._delimeter+'(?=(?:[^"]*"[^"]*")*(?![^"]*"))',"gm")),this._rgx.split(t)},getRows:function(t){var e="\r\n";return-1==t.indexOf("\r\n")&&(e="\n"),t.split(e)},processCells:function(t,e){null==e&&(e=0);var i=null;null==this.grid&&(this.grid=[],this.fields=[]),i=[];for(var s=0,n=t.length;s<n;){var o=s++,a="";a=this._quoted?r.substr(t[o],1,t[o].length-2):t[o],0==e?this.fields.push(a):i.push(a)}this.grid.push(i),this.clearArray(t),t=null},processRows:function(t){for(var e=0,i=t.length;e<i;){var s=e++;this.processCells(this.getCells(t[s]),s)}},__class__:Wi};var Ui=function(t,e,i,s){this.directory="./assets/locales",this.replaceMissing=!1,this.checkMissing=!1,this.filesLoaded=0,this.getter=new Yi(t,e,i,s)};s["firetongue.FireTongue"]=Ui,Ui.__name__=["firetongue","FireTongue"],Ui.prototype={clear:function(t){this.clearData(t)},init:function(t,e,i,s,n,o){null==o&&(o="assets/locales/"),null==s&&(s=!1),null==i&&(i=!1),this.locale=this.localeFormat(t),this.directory=o,this.isLoaded&&this.clearData(),this.callbackFinished=e,this.checkMissing=!1,this.replaceMissing=!1,this.locale!=Ui.defaultLocale&&(this.checkMissing=i,this.replaceMissing=s),this.checkMissing&&(this.missingFiles=[],this.missingFlags=new ys),this.startLoad()},get:function(t,e,i){null==i&&(i=!0),null==e&&(e="data");var s=t;if(t=t.toUpperCase(),"index"==e)return this.matchIndexString(t);var n,o=this.indexData;if(null==(n=null!=Us[e]?o.getReserved(e):o.h[e]))return t;var a="";try{if(null!=(a=null!=Us[t]?n.getReserved(t):n.h[t])&&""!=a){for(;-1!=a.indexOf("<RE>[");){var l=a.indexOf("<RE>["),h=a.indexOf("]"),c="",_="";if(1!=l&&-1!=h){if(_=r.substr(a,l,h+1),""==(c=a.substring(l+5,h))||null==c)break;var d=null!=Us[c]?n.getReserved(c):n.h[c];null!=d&&""!=d||!0,a=u.replace(a,_,d)}}if(0==a.indexOf("<RE>")&&-1==a.indexOf("<RE>[")){var p=!1,g=0;for(a=u.replace(a,"<RE>","");!p;){var f=null!=Us[a]?n.getReserved(a):n.h[a];null!=f&&""!=f?0!=(a=f).indexOf("<RE>")?p=!0:a=u.replace(a,"<RE>",""):(p=!0,a=f),++g>100&&(p=!0,a=f)}}var m=["<N>","<T>","<LQ>","<RQ>","<C>","<Q>"],v=["\n","\t","“","”",",",'"'];if(null!=a&&""!=a)for(var y=0,x=m.length;y<x;)for(var w=y++;-1!=a.indexOf(m[w]);)a=u.replace(a,m[w],v[w])}}catch(n){if(i)return s;throw new Es("LocaleData.getText("+t+","+e+")")}return n=null,null==a&&i?s:a},getFont:function(t){var e="";try{var i=this.indexFont,s=null!=Us[t]?i.getReserved(t):i.h[t];null!=s&&s.hasNode.resolve("font")&&(e=s.node.resolve("font").att.resolve("replace")),""!=e&&null!=e||(e=t)}catch(i){e=t}return e},getFontSize:function(t,e){var i=e;try{var s=this.indexFont,n=null!=Us[t]?s.getReserved(t):s.h[t];if(null!=n&&n.hasNode.resolve("font")&&n.node.resolve("font").hasNode.resolve("size"))for(var o=n.node.resolve("font").nodes.resolve("size").h;null!=o;){var r=o.item;o=o.next;var a=r,l=null==e?"null":""+e;if(a.att.resolve("value")==l){var h=a.att.resolve("replace");""!=h&&null!=h&&0==(i=c.parseInt(h))&&(i=e)}}}catch(t){i=e}return i},getIcon:function(t){var e=this.indexIcons;return null!=Us[t]?e.getReserved(t):e.h[t]},getIndexString:function(t,e){null==e&&(e=""),""==e&&(e=this.locale);var i=this.indexLocales,s=null!=Us[e]?i.getReserved(e):i.h[e],n=null,o=null;if(s.hasNode.resolve("label"))for(var r=s.nodes.resolve("label").h;null!=r;){var a=r.item;r=r.next;var l=a;if(l.has.resolve("id")){var h=l.att.resolve("id");if(-1!=h.indexOf(this.locale)&&(n=l),-1!=h.indexOf(e)&&(o=l),null!=n&&null!=o)break}}switch(t){case"$LANGUAGE":if(null!=n&&n.has.resolve("language"))return n.att.resolve("language");break;case"$LANGUAGE_BILINGUAL":var _="",u="";return null!=o&&o.has.resolve("language")&&(u=o.att.resolve("language")),null!=n&&n.has.resolve("language")&&(_=n.att.resolve("language")),_==u?_:_+" ("+u+")";case"$LANGUAGE_NATIVE":if(null!=o&&o.has.resolve("language"))return o.att.resolve("language");break;case"$LANGUAGE_REGION":return this.getIndexString(e,"$LANGUAGE")+"("+this.getIndexString(e,"$REGION")+")";case"$LANGUAGE_REGION_NATIVE":return this.getIndexString(e,"$LANGUAGE_NATIVE")+"("+this.getIndexString(e,"$REGION_NATIVE")+")";case"$REGION":if(null!=n&&o.has.resolve("region"))return n.att.resolve("region");break;case"$REGION_NATIVE":if(null!=o&&o.has.resolve("region"))return o.att.resolve("region");break;case"$UI_LANGUAGE":if(o.hasNode.resolve("ui")&&o.node.resolve("ui").has.resolve("language"))return n.node.resolve("ui").att.resolve("language");break;case"$UI_REGION":if(o.hasNode.resolve("ui")&&o.node.resolve("ui").has.resolve("region"))return n.node.resolve("ui").att.resolve("region")}return c.string(t)},getNoteBody:function(t,e){try{var i=this.indexNotes,s=e+"_"+t+"_body",n=null!=Us[s]?i.getReserved(s):i.h[s];return Vi.flags(n,["$N"],["\n"])}catch(i){if(i instanceof Es&&(i=i.val),Bs.__instanceof(i,String))return"ERROR:("+e+") for ("+t+") body not found";throw i}},getNoteTitle:function(t,e){try{var i=this.indexNotes,s=e+"_"+t+"_title",n=null!=Us[s]?i.getReserved(s):i.h[s];return Vi.flags(n,["$N"],["\n"])}catch(i){if(i instanceof Es&&(i=i.val),Bs.__instanceof(i,String))return"ERROR:("+e+") for ("+t+") title not found";throw i}},clearData:function(t){if(null==t&&(t=!1),this.callbackFinished=null,null!=this.listFiles){for(;this.listFiles.length>0;)this.listFiles.pop();this.listFiles=null}this.isLoaded=!1,this.filesLoaded=0;for(var e=this.indexData.keys();e.hasNext();){var i=e.next(),s=this.indexData,n=null!=Us[i]?s.getReserved(i):s.h[i];this.indexData.remove(i),this.clearMap(n),n=null}if(this.clearMap(this.indexImages),this.clearMap(this.indexFont),this.indexImages=null,this.indexFont=null,t&&(this.clearMap(this.indexLocales),this.clearMap(this.indexIcons),this.clearMap(this.indexNotes),this.indexLocales=null,this.indexIcons=null,this.indexNotes=null),this.clearMap(this.missingFlags),null!=this.missingFiles)for(;this.missingFiles.length>0;)this.missingFiles.pop();this.missingFiles=null,this.missingFlags=null},clearMap:function(t,e){if(null!=t)for(var i=t.keys();i.hasNext();){var s=i.next(),n=t.get(s);null!=e&&e(n),t.remove(s)}},copyFast:function(t){return new ks(g.parse(Cs.print(t.x)))},doTasks:function(t){for(var e=0,i=t.length;e<i;){var s=t[e++];this.loadFile(s.fileNode,s.check),this.onLoadFile()}},findClosestExistingLocale:function(t,e){var i=null,s="",n=1/0;if(null!=(i=this.getDirectoryContents(""))){for(var o=[],r=0;r<i.length;){var a=i[r];++r;var l=u.replace(a,this.directory,""),h=(l=u.replace(l,"\\","/")).split("/");null!=h&&h.length>0&&0==(5==(l=h[0]).length&&"-"==l.charAt(2))&&(l=""),0!=l.indexOf("_")&&-1==l.indexOf(".")&&-1==o.indexOf(l)&&o.push(l)}s=t,n=1/0;for(var c=0;c<o.length;){var _=o[c];++c;var d=this.stringDiff(t,_,!1);d<n&&(n=d,s=_)}}return s},get_locales:function(){for(var t=[],e=this.indexLocales.keys();e.hasNext();){var i=e.next();t.push(i)}return t},getDirectoryContents:function(t){return this.getter.getDirectoryContents(this.directory+t)},loadFile:function(t,e){null==e&&(e=!1);var i=t.node.resolve("file").att.resolve("value"),s=r.substr(i,i.length-3,3),n=t.node.resolve("file").att.resolve("id"),o=this.locale;switch(e&&(o=Ui.defaultLocale),s){case"csv":var a=this.loadText(o+"/"+i),l=",";if(t.node.resolve("file").has.resolve("delimeter")&&(l=t.node.resolve("file").att.resolve("delimeter")),""!=a&&null!=a){var h=new Wi(a,l);this.processCSV(h,n,e)}else this.checkMissing&&this.logMissingFile(i);break;case"png":var c=this.directory+o+"/"+i;this.loadImage(c)?this.processPNG(c,n,e):this.checkMissing&&this.logMissingFile(i);break;case"tsv":case"txt":var _=this.loadText(o+"/"+i);if(""!=_&&null!=_){var u=new Ki(_);this.processCSV(u,n,e)}else this.checkMissing&&this.logMissingFile(i);break;case"xml":if(!e){var d=this.loadText(o+"/"+i);if(""!=d&&null!=d){var p=new ks(g.parse(d));this.processXML(p,n)}else this.checkMissing&&this.logMissingFile(i)}}return i},loadImage:function(t){return!!this.getter.checkFile(t)||(this.checkMissing&&this.logMissingFile(t),!1)},loadIndex:function(){var t=this.loadText("index.xml"),e=null;if(this.listFiles=[],""==t||null==t)throw new Es("Couldn't load index.xml!");if((e=new ks(g.parse(t))).hasNode.resolve("data")&&e.node.resolve("data").hasNode.resolve("file"))for(var i=e.node.resolve("data").nodes.resolve("file").h;null!=i;){var s=i.item;i=i.next;var n=s;this.listFiles.push(new ks(g.parse(Cs.print(n.x))))}null==this.indexLocales&&(this.indexLocales=new ys),null==this.indexNotes&&(this.indexNotes=new ys),null==this.indexIcons&&(this.indexIcons=new ys),null==this.indexImages&&(this.indexImages=new ys);for(var o="",r=e.node.resolve("data").nodes.resolve("locale").h;null!=r;){var a=r.item;r=r.next;var l=a;o=l.att.resolve("id");var h=this.indexLocales;null!=Us[o]?h.setReserved(o,l):h.h[o]=l;var c=this.directory+"_flags/"+o+".png";if(this.loadImage(c)){var _=this.indexIcons;null!=Us[o]?_.setReserved(o,c):_.h[o]=c}else{var u=this.indexIcons;null!=Us[o]?u.setReserved(o,null):u.h[o]=null}l.has.resolve("is_default")&&"true"==l.att.resolve("is_default")&&(Ui.defaultLocale=o)}""==Ui.defaultLocale&&(Ui.defaultLocale="en-US"),""==this.locale&&(this.locale=Ui.defaultLocale);for(var d=e.node.resolve("data").nodes.resolve("note").h;null!=d;){var p=d.item;d=d.next;var f=p;o=f.att.resolve("id");for(var m=f.nodes.resolve("text").h;null!=m;){var v=m.item;m=m.next;var y=v,x=y.att.resolve("id"),w=null;w=-1!=x.indexOf(",")?x.split(","):[x];for(var b=y.att.resolve("title"),T=y.att.resolve("body"),S=0;S<w.length;){var I=w[S];++S;var k=this.indexNotes,F=o+"_"+I+"_title";null!=Us[F]?k.setReserved(F,b):k.h[F]=b;var P=this.indexNotes,C=o+"_"+I+"_body";null!=Us[C]?P.setReserved(C,T):P.h[C]=T}}}},loadRootDirectory:function(){var t=this.listFiles[0],e="";if(t.hasNode.resolve("file")&&t.node.resolve("file").has.resolve("value")&&(e=t.node.resolve("file").att.resolve("value")),""!=e){var i=this.loadText(this.locale+"/"+e);if(""==i||null==i){var s=this.findClosestExistingLocale(this.locale,e);""!=s&&(this.locale=s)}}},loadText:function(t){return this.getter.getText(this.directory+t)},localeFormat:function(t){var e=t.split("-");return null!=e&&2==e.length&&(t=e[0].toLowerCase()+"-"+e[1].toUpperCase()),t},logMissingFile:function(t){null==this.missingFiles&&(this.missingFiles=[]),this.missingFiles.push(t)},logMissingFlag:function(t,e){null==this.missingFlags&&(this.missingFlags=new ys);var i=this.missingFlags;if(0==(null!=Us[t]?i.existsReserved(t):i.h.hasOwnProperty(t))){var s=[],n=this.missingFlags;null!=Us[t]?n.setReserved(t,s):n.h[t]=s}var o=this.missingFlags;(null!=Us[t]?o.getReserved(t):o.h[t]).push(e)},matchIndexString:function(t){for(var e=t,i=["$LANGUAGE","$LANGUAGE_BILINGUAL","$LANGUAGE_NATIVE","$LANGUAGE_REGION","$LANGUAGE_REGION_NATIVE","$REGION","$REGION_NATIVE","$UI_LANGUAGE","$UI_REGION"],s=0;s<i.length;){var n=i[s];if(++s,0==t.indexOf(n)){var o=u.replace(e,n,"");if(""!=o&&0==o.indexOf(":")){o=r.substr(o,1,o.length-1);for(var a="",l=this.indexLocales.keys();l.hasNext();){var h=l.next();h.toUpperCase()==o.toUpperCase()&&(a=h)}if(""!=a)return this.getIndexString(n,a)}}}return e},onLoadFile:function(){if(++this.filesLoaded==this.listFiles.length){if(this.isLoaded=!0,this.checkMissing){0==this.missingFiles.length&&(this.missingFiles=null);for(var t=0,e=this.missingFlags.keys();e.hasNext();){e.next();++t}0==t&&(this.missingFlags=null)}if(null!=this.callbackFinished)try{this.callbackFinished()}catch(t){if(t instanceof Es&&(t=t.val),!Bs.__instanceof(t,String))throw t}}},printIndex:function(t,e){},processCSV:function(t,e,i){null==i&&(i=!1);var s="",n=(t.fields.length,this.indexData);if(0==(null!=Us[e]?n.existsReserved(e):n.h.hasOwnProperty(e))){var o=this.indexData,r=new ys,a=o;null!=Us[e]?a.setReserved(e,r):a.h[e]=r}for(var l=this.indexData,h=null!=Us[e]?l.getReserved(e):l.h[e],c=1,_=1,u=t.fields.length;_<u;){var d=_++;"comment"!=t.fields[d]&&++c}for(var p=0,g=t.grid.length;p<g;){var f=p++,m=t.grid[f];if(s=m[0],c>2)for(var v=1,y=t.fields.length;v<y;){var x=v++,w=t.fields[x];"comment"!=w&&this.writeIndex(h,(s+"_"+w).toUpperCase(),m[x],e,i)}else 2==c&&this.writeIndex(h,s,m[1],e,i)}t.destroy(),t=null},processFonts:function(t){if(null!=t&&t.hasNode.resolve("data")&&t.node.resolve("data").hasNode.resolve("font"))for(var e=t.node.resolve("data").nodes.resolve("font").h;null!=e;){var i=e.item;e=e.next;var s=i,n=s.att.resolve("value"),o=this.indexFont,r=new ks(g.parse(Cs.print(s.x))),a=o;null!=Us[n]?a.setReserved(n,r):a.h[n]=r}},processPNG:function(t,e,i){if(null==i&&(i=!1),i&&this.checkMissing){var s=this.indexImages;if(0==(null!=Us[e]?s.existsReserved(e):s.h.hasOwnProperty(e))&&(this.logMissingFile(e),this.replaceMissing)){var n=this.indexImages;null!=Us[e]?n.setReserved(e,t):n.h[e]=t}}else{var o=this.indexImages;null!=Us[e]?o.setReserved(e,t):o.h[e]=t}},processXML:function(t,e){"fonts"==e&&this.processFonts(t)},startLoad:function(t){null==this.listFiles&&this.loadIndex(),this.indexData=new ys,this.indexFont=new ys,this.loadRootDirectory();for(var e=[],i=0,s=this.listFiles;i<s.length;){var n=s[i];++i;var o="";if(n.hasNode.resolve("file")&&n.node.resolve("file").has.resolve("value")&&(o=n.node.resolve("file").att.resolve("value")),""!=o){var r={fileNode:n,check:!1};e.push(r),this.checkMissing&&(r={fileNode:n,check:!0},e.push(r))}}null!=t?t(e):this.doTasks(e)},stringDiff:function(t,e,i){null==i&&(i=!0);var s=0;if(""!=t&&""==e)return 1/0;0==i&&(t=t.toLowerCase(),e=e.toLowerCase());for(var n=1,o=0,r=0|Math.max(t.length,e.length);o<r;){o++;n*=10}for(var a=0,l=t.length;a<l;){var h=a++,c=t.charAt(h),_="";e.length>h&&(_=e.charAt(h));var u=0;c!=_&&(u=0|Math.abs(c.charCodeAt(0)-_.charCodeAt(0))),s+=u*n,n=n/10|0}return s},writeIndex:function(t,e,i,s,n){null==n&&(n=!1),null!=e&&(n&&this.checkMissing?0==(null!=Us[e]?t.existsReserved(e):t.h.hasOwnProperty(e))&&(this.logMissingFlag(s,e),this.replaceMissing&&(null!=Us[e]?t.setReserved(e,i):t.h[e]=i)):null!=Us[e]?t.setReserved(e,i):t.h[e]=i)},__class__:Ui};var Xi=s["firetongue.Framework"]={__ename__:["firetongue","Framework"],__constructs__:["VanillaSys","OpenFL","Lime","NME","Custom"]};Xi.VanillaSys=["VanillaSys",0],Xi.VanillaSys.toString=n,Xi.VanillaSys.__enum__=Xi,Xi.OpenFL=["OpenFL",1],Xi.OpenFL.toString=n,Xi.OpenFL.__enum__=Xi,Xi.Lime=["Lime",2],Xi.Lime.toString=n,Xi.Lime.__enum__=Xi,Xi.NME=["NME",3],Xi.NME.toString=n,Xi.NME.__enum__=Xi,Xi.Custom=["Custom",4],Xi.Custom.toString=n,Xi.Custom.__enum__=Xi;var Yi=function(t,e,i,s){this.framework=null==t?Xi.Custom:t,this.checkFile_Custom=e,this.getText_Custom=i,this.getDirectoryContents_Custom=s};s["firetongue.Getter"]=Yi,Yi.__name__=["firetongue","Getter"],Yi.prototype={destroy:function(){this.checkFile_Custom=null,this.getText_Custom=null,this.getDirectoryContents_Custom=null},checkFile:function(t){if(null!=this.checkFile_Custom)return this.checkFile_Custom(t);switch(this.framework[1]){case 0:return this.checkFile_VanillaSys(t);case 1:return this.checkFile_OpenFL(t);case 2:return this.checkFile_Lime(t);case 3:return this.checkFile_NME(t);default:return!1}},getText:function(t){if(null!=this.getText_Custom)return this.getText_Custom(t);switch(this.framework[1]){case 0:return this.getText_VanillaSys(t);case 1:return this.getText_OpenFL(t);case 2:return this.getText_Lime(t);case 3:return this.getText_NME(t);default:return null}},getDirectoryContents:function(t){if(null!=this.getDirectoryContents_Custom)return this.getDirectoryContents_Custom(t);switch(this.framework[1]){case 0:return this.getDirectoryContents_VanillaSys(t);case 1:return this.getDirectoryContents_OpenFL(t);case 2:return this.getDirectoryContents_Lime(t);case 3:return this.getDirectoryContents_NME(t);default:return[]}},getDirectoryContents_OpenFL:function(t){return null},getText_OpenFL:function(t){return null},checkFile_OpenFL:function(t){return!1},getDirectoryContents_Lime:function(t){return null},getText_Lime:function(t){return null},checkFile_Lime:function(t){return!1},getDirectoryContents_NME:function(t){return null},getText_NME:function(t){return null},checkFile_NME:function(t){return!1},getDirectoryContents_VanillaSys:function(t){return null},getText_VanillaSys:function(t){return null},checkFile_VanillaSys:function(t){return!1},limitPath:function(t,e){var i=[];e=u.replace(e,"\\","/");for(var s=0;s<t.length;){var n=t[s];++s,0==(n=u.replace(n,"\\","/")).indexOf(e)&&i.push(n)}return i},__class__:Yi};var Vi=function(){};s["firetongue.Replace"]=Vi,Vi.__name__=["firetongue","Replace"],Vi.flags=function(t,e,i){for(var s=0;s<e.length;){for(var n=e[s],o=i[s];-1!=t.indexOf(n);)t=u.replace(t,n,o);++s}return t},Vi.prototype={__class__:Vi};var Ki=function(t){Wi.call(this,t,"\t",!1)};s["firetongue.TSV"]=Ki,Ki.__name__=["firetongue","TSV"],Ki.__super__=Wi,Ki.prototype=e(Wi.prototype,{processRows:function(t){for(var e=0,i=t.length;e<i;){for(var s=e++,n=t[s];"\t"==n.charAt(n.length-1);)n=r.substr(n,0,n.length-1);this.processCells(this.getCells(n),s)}},getCells:function(t){return t.split("\t")},__class__:Ki});var zi=function(){};s["flixel.math.FlxRandom"]=zi,zi.__name__=["flixel","math","FlxRandom"],zi.prototype={getObject_haxe_extern_EitherType_String_phaser_BitmapData:function(t,e,i,s){return null==i&&(i=0),ji.game.rnd.pick(t)},getObject_com_drderico_towerd_game_stuff_LgObject:function(t,e,i,s){return null==i&&(i=0),ji.game.rnd.pick(t)},shuffle_Int:function(t){for(var e=t.length-1,i=0,s=t.length;i<s;){var n=i++,o=this.int(n,e),r=t[n];t[n]=t[o],t[o]=r}},getObject_String:function(t,e,i,s){return null==i&&(i=0),ji.game.rnd.pick(t)},getObject_Int:function(t,e,i,s){return null==i&&(i=0),ji.game.rnd.pick(t)},getObject_Float:function(t,e,i,s){return null==i&&(i=0),ji.game.rnd.pick(t)},int:function(t,e,i){if(null==e&&(e=2147483647),null==t&&(t=0),0==t&&2147483647==e&&null==i)return 0|ji.game.rnd.integer();if(t==e)return t;if(t>e&&(t+=e,t-=e=t-e),null==i)return Math.floor(ji.game.rnd.integerInRange(t,e));for(var s=0;;)if(s=Math.floor(ji.game.rnd.integerInRange(t,e)),!(i.indexOf(s)>=0))break;return s},float:function(t,e,i){null==e&&(e=1),null==t&&(t=0);var s=0;if(0==t&&1==e&&null==i)return ji.game.rnd.frac();if(t==e)s=t;else if(t>e&&(t+=e,t-=e=t-e),null==i)s=ji.game.rnd.realInRange(t,e);else for(;;)if(s=ji.game.rnd.realInRange(t,e),!(i.indexOf(s)>=0))break;return s},bool:function(t){return null==t&&(t=50),this.float(0,100)<t},sign:function(t){return null==t&&(t=50),this.float(0,100)<t?1:-1},weightedPick:function(t){return 0|ji.game.rnd.weightedPick(t)},__class__:zi};var ji=function(){};s["flixel.FlxG"]=ji,ji.__name__=["flixel","FlxG"],ji.createGame=function(t,e,i,s,n,o,r,a){ji.game=new Phaser.Game(t,e,i,s,n,o,r,a)},ji.createGameFromConfig=function(t){ji.game=new Phaser.Game(t)},ji.get_sound=function(){return ji.game.sound},ji.get_camera=function(){return ji.game.camera},ji.get_width=function(){return 0|ji.game.camera.view.width},ji.get_height=function(){return 0|ji.game.camera.view.height};var Qi=function(t){this.object=t};s["flixel.animation.FlxAnimationController"]=Qi,Qi.__name__=["flixel","animation","FlxAnimationController"],Qi.prototype={addByNames:function(t,e,i,s,n,o){null==o&&(o=!1),null==n&&(n=!1),null==s&&(s=!0),null==i&&(i=30),this.object.animations.add(t,e,i,s)},play:function(t,e,i,s){null==s&&(s=0),null==i&&(i=!1),null==e&&(e=!1),this.object.animations.play(t),e&&this.object.animations.currentAnim.restart(),-1==s&&(s=ji.random.int(0,0|this.object.animations.currentAnim.frameTotal)),this.object.animations.currentAnim.setFrame(s,!0),this.object.animations.currentAnim.reversed=i},remove:function(t){},__class__:Qi};var Ji=s["flixel.effects.particles.FlxEmitterMode"]={__ename__:["flixel","effects","particles","FlxEmitterMode"],__constructs__:["SQUARE","CIRCLE"]};Ji.SQUARE=["SQUARE",0],Ji.SQUARE.toString=n,Ji.SQUARE.__enum__=Ji,Ji.CIRCLE=["CIRCLE",1],Ji.CIRCLE.toString=n,Ji.CIRCLE.__enum__=Ji;var $i=function(t,e,i,s){this.keepAspectRatio=!0,Phaser.Particle.call(this,ji.game,t,e,i,s),Y.enableBody(this)};s["flixel.effects.particles.FlxParticle"]=$i,$i.__name__=["flixel","effects","particles","FlxParticle"],$i.__super__=Phaser.Particle,$i.prototype=e(Phaser.Particle.prototype,{makeGraphic:function(t,e,i,s,n){null==s&&(s=!1),null==i&&(i="#FFFFFF"),this.loadTexture(Y.getBitmapData(t,e,i,n,s))},onEmit:function(){this.keepAspectRatio&&(this.scale.x=this.scale.y=Math.min(this.scale.x,this.scale.y)),this.body.setSize(Math.abs(this.width)*this.scale.x,Math.abs(this.height)*this.scale.y)},__class__:$i});var qi=function(){};s["flixel.math.FlxMath"]=qi,qi.__name__=["flixel","math","FlxMath"],qi.roundDecimal=function(t,e){for(var i=1,s=0,n=e;s<n;){s++;i*=10}return Math.round(t*i)/i},qi.bound=function(t,e,i){var s=null!=e&&t<e?e:t;return null!=i&&s>i?i:s},qi.lerp=function(t,e,i){return t+i*(e-t)},qi.inBounds=function(t,e,i){return(null==e||t>=e)&&(null==i||t<=i)},qi.isOdd=function(t){return 0!=(1&(0|t))},qi.isEven=function(t){return 0==(1&(0|t))},qi.numericComparison=function(t,e){return e>t?-1:t>e?1:0},qi.pointInCoordinates=function(t,e,i,s,n,o){return t>=i&&t<=i+n&&e>=s&&e<=s+o},qi.getDecimals=function(t){var e=(null==t?"null":""+t).split("."),i=0;return e.length>1&&(i=e[1].length),i},qi.equal=function(t,e,i){return null==i&&(i=1e-7),Math.abs(t-e)<=i},qi.signOf=function(t){return t<0?-1:1},qi.sameSign=function(t,e){return(t<0?-1:1)==(e<0?-1:1)},qi.fastSin=function(t){return t*=.3183098862,t>1?t-=Math.ceil(t)>>1<<1:t<-1&&(t+=Math.ceil(-t)>>1<<1),t>0?t*(3.1+t*(.5+t*(3.6*t-7.2))):t*(3.1-t*(.5+t*(7.2+3.6*t)))},qi.fastCos=function(t){var e=t+1.570796327;return e*=.3183098862,e>1?e-=Math.ceil(e)>>1<<1:e<-1&&(e+=Math.ceil(-e)>>1<<1),e>0?e*(3.1+e*(.5+e*(3.6*e-7.2))):e*(3.1-e*(.5+e*(7.2+3.6*e)))},qi.sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},qi.maxInt=function(t,e){return t>e?t:e},qi.minInt=function(t,e){return t>e?e:t},qi.absInt=function(t){return t>0?t:-t};var Zi=function(){};s["flixel.util.IFlxPooled"]=Zi,Zi.__name__=["flixel","util","IFlxPooled"],Zi.__interfaces__=[rt],Zi.prototype={__class__:Zi};var ts=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_flixel_math_FlxPoint"]=ts,ts.__name__=["flixel","util","FlxPool_flixel_math_FlxPoint"],ts.__interfaces__=[ht],ts.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:ts};var es=function(t,e){null==e&&(e=0),null==t&&(t=0),this._inPool=!1,this._weak=!1,Phaser.Point.call(this,t,e)};s["flixel.math.FlxPoint"]=es,es.__name__=["flixel","math","FlxPoint"],es.__interfaces__=[Zi],es.get=function(t,e){null==e&&(e=0),null==t&&(t=0);var i=es._pool.get();return i.set(t,e),i._inPool=!1,i},es.weak=function(t,e){null==e&&(e=0),null==t&&(t=0);var i=es._pool.get();i.set(t,e),i._inPool=!1;var s=i;return s._weak=!0,s},es.get_pool=function(){return es._pool},es.__super__=Phaser.Point,es.prototype=e(Phaser.Point.prototype,{put:function(){this._inPool||(this._inPool=!0,this._weak=!1,es._pool.putUnsafe(this))},putWeak:function(){this._weak&&this.put()},destroy:function(t){},__class__:es});var is=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool_flixel_math_FlxRect"]=is,is.__name__=["flixel","util","FlxPool_flixel_math_FlxRect"],is.__interfaces__=[ht],is.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:is};var ss=function(t,e,i,s){null==s&&(s=0),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0),this._inPool=!1,this._weak=!1,Phaser.Rectangle.call(this,t,e,i,s)};s["flixel.math.FlxRect"]=ss,ss.__name__=["flixel","math","FlxRect"],ss.__interfaces__=[Zi],ss.get=function(t,e,i,s){null==s&&(s=0),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0);var n=ss._pool.get();return n.setTo(t,e,i,s),n._inPool=!1,n},ss.weak=function(t,e,i,s){null==s&&(s=0),null==i&&(i=0),null==e&&(e=0),null==t&&(t=0);var n=ss._pool.get();n.setTo(t,e,i,s),n._inPool=!1;var o=n;return o._weak=!0,o},ss.get_pool=function(){return ss._pool},ss.__super__=Phaser.Rectangle,ss.prototype=e(Phaser.Rectangle.prototype,{put:function(){this._inPool||(this._inPool=!0,this._weak=!1,ss._pool.putUnsafe(this))},putWeak:function(){this._weak&&(this._inPool||(this._inPool=!0,this._weak=!1,ss._pool.putUnsafe(this)))},destroy:function(t){},__class__:ss});var ns=function(t,e,i,s,n,o,r){Phaser.BitmapText.call(this,t,e,i,s,n,o,r)};s["flixel.text.FlxBitmapText"]=ns,ns.__name__=["flixel","text","FlxBitmapText"],ns.__super__=Phaser.BitmapText,ns.prototype=e(Phaser.BitmapText.prototype,{__class__:ns});var os=function(){};s["flixel.text.FlxTextAlign"]=os,os.__name__=["flixel","text","FlxTextAlign"];var rs=function(t,e,i,s,n){Phaser.Tilemap.call(this,ji.game,t,e,i,s,n)};s["flixel.tile.FlxTilemap"]=rs,rs.__name__=["flixel","tile","FlxTilemap"],rs.__super__=Phaser.Tilemap,rs.prototype=e(Phaser.Tilemap.prototype,{__class__:rs});var as=function(t){Phaser.Tween.call(this,t,ji.game,as.get_globalManager())};s["flixel.tweens.FlxTween"]=as,as.__name__=["flixel","tweens","FlxTween"],as.__interfaces__=[rt],as.tween=function(t,e,i,s,n){null==i&&(i=1);var o=ji.game.add.tween(t);return null!=(s=as.resolveTweenOptions(s)).onComplete&&o.onComplete.addOnce(s.onComplete,n),null!=s.onStart&&o.onStart.addOnce(s.onStart,n),null!=s.onUpdate&&o.onUpdateCallback(s.onUpdate,n),0!=(8&s.type)&&null==s.repeat&&(s.repeat=0),0!=(1&s.type)&&(s.repeat=-1),o.to(e,1e3*i,s.ease,!0,1e3*s.startDelay,s.repeat,0!=(4&s.type)),o},as.resolveTweenOptions=function(t){return null==t&&(t={type:8}),null==t.type&&(t.type=8),t},as.get_globalManager=function(){return ji.game.tweens},as.set_globalManager=function(t){return ji.game.tweens=t},as.__super__=Phaser.Tween,as.prototype=e(Phaser.Tween.prototype,{destroy:function(t){},cancel:function(){this.stop(!1)},__class__:as});var ls={};s["flixel.util._FlxColor.FlxColor_Impl_"]=ls,ls.__name__=["flixel","util","_FlxColor","FlxColor_Impl_"];var hs=function(t){this._count=0,this._pool=[],this._class=t};s["flixel.util.FlxPool"]=hs,hs.__name__=["flixel","util","FlxPool"],hs.__interfaces__=[ht],hs.prototype={get:function(){return 0==this._count?p.createInstance(this._class,[]):this._pool[--this._count]},put:function(t){if(null!=t){var e=this._pool.indexOf(t);(-1==e||e>=this._count)&&(t.destroy(),this._pool[this._count++]=t)}},putUnsafe:function(t){null!=t&&(t.destroy(),this._pool[this._count++]=t)},preAllocate:function(t){for(;t-- >0;)this._pool[this._count++]=p.createInstance(this._class,[])},clear:function(){this._count=0;var t=this._pool;return this._pool=[],t},get_length:function(){return this._count},__class__:hs};var cs=function(){this._closeRequested=!1};s["flixel.util.FlxSave"]=cs,cs.__name__=["flixel","util","FlxSave"],cs.prototype={destroy:function(){this.name=null,this.data=null,this._onComplete=null,this._closeRequested=!1,this._localStorage=null},bind:function(t){if(this.destroy(),!ji.game.device.localStorage)return this.destroy(),!1;if(this._localStorage=localStorage,this.name=t,""==this._localStorage.getItem(this.name))this.data={};else try{this.data=fs.run(this._localStorage.getItem(this.name))}catch(t){this.data={},this._localStorage.removeItem(this.name)}return!0},close:function(t,e){return null==t&&(t=0),this._closeRequested=!0,this.flush(t,e)},flush:function(t,e){if(null==t&&(t=0),!this.checkBinding())return!1;this._onComplete=e;try{this._localStorage.setItem(this.name,ps.run(this.data))}catch(t){return this.onDone(_s.ERROR)}return this.onDone(_s.SUCCESS)},erase:function(){return!!this.checkBinding()&&(this._localStorage.clear(),this.data={},!0)},onDone:function(t){return t[1],null!=this._onComplete&&this._onComplete(t==_s.SUCCESS),this._closeRequested&&this.destroy(),t==_s.SUCCESS},checkBinding:function(){return null!=this._localStorage},__class__:cs};var _s=s["flixel.util.FlxSaveStatus"]={__ename__:["flixel","util","FlxSaveStatus"],__constructs__:["SUCCESS","PENDING","ERROR"]};_s.SUCCESS=["SUCCESS",0],_s.SUCCESS.toString=n,_s.SUCCESS.__enum__=_s,_s.PENDING=["PENDING",1],_s.PENDING.toString=n,_s.PENDING.__enum__=_s,_s.ERROR=["ERROR",2],_s.ERROR.toString=n,_s.ERROR.__enum__=_s;var us=function(t,e){Phaser.Timer.call(this,t,e)};s["flixel.util.FlxTimer"]=us,us.__name__=["flixel","util","FlxTimer"],us.__super__=Phaser.Timer,us.prototype=e(Phaser.Timer.prototype,{__class__:us});var ds=function(){};s["haxe.IMap"]=ds,ds.__name__=["haxe","IMap"],ds.prototype={__class__:ds};var ps=function(){this.buf=new _,this.cache=[],this.useCache=ps.USE_CACHE,this.useEnumIndex=ps.USE_ENUM_INDEX,this.shash=new ys,this.scount=0};s["haxe.Serializer"]=ps,ps.__name__=["haxe","Serializer"],ps.run=function(t){var e=new ps;return e.serialize(t),e.toString()},ps.prototype={toString:function(){return this.buf.b},serializeString:function(t){var e=this.shash,i=null!=Us[t]?e.getReserved(t):e.h[t];if(null!=i)return this.buf.b+="R",void(this.buf.b+=null==i?"null":""+i);var s=this.shash,n=this.scount++;null!=Us[t]?s.setReserved(t,n):s.h[t]=n,this.buf.b+="y",t=encodeURIComponent(t),this.buf.b+=c.string(t.length),this.buf.b+=":",this.buf.b+=null==t?"null":""+t},serializeRef:function(t){for(var e=typeof t,i=0,s=this.cache.length;i<s;){var n=i++,o=this.cache[n];if(typeof o==e&&o==t)return this.buf.b+="r",this.buf.b+=null==n?"null":""+n,!0}return this.cache.push(t),!1},serializeFields:function(t){for(var e=0,i=h.fields(t);e<i.length;){var s=i[e];++e,this.serializeString(s),this.serialize(h.field(t,s))}this.buf.b+="g"},serialize:function(t){var e=p.typeof(t);switch(e[1]){case 0:this.buf.b+="n";break;case 1:var i=t;if(0==i)return void(this.buf.b+="z");this.buf.b+="i",this.buf.b+=null==i?"null":""+i;break;case 2:var s=t;isNaN(s)?this.buf.b+="k":isFinite(s)?(this.buf.b+="d",this.buf.b+=null==s?"null":""+s):this.buf.b+=s<0?"m":"p";break;case 3:this.buf.b+=t?"t":"f";break;case 4:if(Bs.__instanceof(t,Rs)){var n=p.getClassName(t);this.buf.b+="A",this.serializeString(n)}else if(Bs.__instanceof(t,Ws))this.buf.b+="B",this.serializeString(p.getEnumName(t));else{if(this.useCache&&this.serializeRef(t))return;this.buf.b+="o",this.serializeFields(t)}break;case 5:throw new Es("Cannot serialize function");case 6:var o=e[2];if(o==String)return void this.serializeString(t);if(this.useCache&&this.serializeRef(t))return;switch(o){case Array:var l=0;this.buf.b+="a";for(var _=0,u=t.length;_<u;){var d=_++;null==t[d]?++l:(l>0&&(1==l?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==l?"null":""+l),l=0),this.serialize(t[d]))}l>0&&(1==l?this.buf.b+="n":(this.buf.b+="u",this.buf.b+=null==l?"null":""+l)),this.buf.b+="h";break;case Date:var g=t;this.buf.b+="v",this.buf.b+=c.string(g.getTime());break;case a:this.buf.b+="l";for(var f=t.h;null!=f;){var m=f.item;f=f.next;var v=m;this.serialize(v)}this.buf.b+="h";break;case ms:this.buf.b+="q";for(var y=t,x=y.keys();x.hasNext();){var w=x.next();this.buf.b+=":",this.buf.b+=null==w?"null":""+w,this.serialize(y.h[w])}this.buf.b+="h";break;case vs:this.buf.b+="M";for(var b=t,T=b.keys();T.hasNext();){var S=T.next(),I=h.field(S,"__id__");h.deleteField(S,"__id__"),this.serialize(S),S.__id__=I,this.serialize(b.h[S.__id__])}this.buf.b+="h";break;case ys:this.buf.b+="b";for(var k=t,F=k.keys();F.hasNext();){var P=F.next();this.serializeString(P),this.serialize(null!=Us[P]?k.getReserved(P):k.h[P])}this.buf.b+="h";break;case xs:var C=t;this.buf.b+="s",this.buf.b+=c.string(Math.ceil(8*C.length/6)),this.buf.b+=":";var E=0,B=C.length-2,L=ps.BASE64_CODES;if(null==L){var A=ps.BASE64.length;L=new Array(A);for(var O=0,M=ps.BASE64.length;O<M;){var G=O++;L[G]=r.cca(ps.BASE64,G)}ps.BASE64_CODES=L}for(;E<B;){var H=C.b[E++],D=C.b[E++],N=C.b[E++];this.buf.b+=String.fromCharCode(L[H>>2]),this.buf.b+=String.fromCharCode(L[63&(H<<4|D>>4)]),this.buf.b+=String.fromCharCode(L[63&(D<<2|N>>6)]),this.buf.b+=String.fromCharCode(L[63&N])}if(E==B){var R=C.b[E++],W=C.b[E++];this.buf.b+=String.fromCharCode(L[R>>2]),this.buf.b+=String.fromCharCode(L[63&(R<<4|W>>4)]),this.buf.b+=String.fromCharCode(L[W<<2&63])}else if(E==B+1){var U=C.b[E++];this.buf.b+=String.fromCharCode(L[U>>2]),this.buf.b+=String.fromCharCode(L[U<<4&63])}break;default:this.useCache&&this.cache.pop(),null!=t.hxSerialize?(this.buf.b+="C",this.serializeString(p.getClassName(o)),this.useCache&&this.cache.push(t),t.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(p.getClassName(o)),this.useCache&&this.cache.push(t),this.serializeFields(t))}break;case 7:var X=e[2];if(this.useCache){if(this.serializeRef(t))return;this.cache.pop()}this.buf.b+=c.string(this.useEnumIndex?"j":"w"),this.serializeString(p.getEnumName(X)),this.useEnumIndex?(this.buf.b+=":",this.buf.b+=c.string(t[1])):this.serializeString(t[0]),this.buf.b+=":";var Y=t.length;this.buf.b+=c.string(Y-2);for(var V=2,K=Y;V<K;){var z=V++;this.serialize(t[z])}this.useCache&&this.cache.push(t);break;default:throw new Es("Cannot serialize "+c.string(t))}},__class__:ps};var gs=function(){};s["haxe._Unserializer.DefaultResolver"]=gs,gs.__name__=["haxe","_Unserializer","DefaultResolver"],gs.prototype={resolveClass:function(t){return p.resolveClass(t)},resolveEnum:function(t){return p.resolveEnum(t)},__class__:gs};var fs=function(t){this.buf=t,this.length=t.length,this.pos=0,this.scache=[],this.cache=[];var e=fs.DEFAULT_RESOLVER;null==e&&(e=new gs,fs.DEFAULT_RESOLVER=e),this.resolver=e};s["haxe.Unserializer"]=fs,fs.__name__=["haxe","Unserializer"],fs.initCodes=function(){for(var t=[],e=0,i=fs.BASE64.length;e<i;){var s=e++;t[fs.BASE64.charCodeAt(s)]=s}return t},fs.run=function(t){return new fs(t).unserialize()},fs.prototype={readDigits:function(){for(var t=0,e=!1,i=this.pos;;){var s=this.buf.charCodeAt(this.pos);if(s!=s)break;if(45!=s){if(s<48||s>57)break;t=10*t+(s-48),this.pos++}else{if(this.pos!=i)break;e=!0,this.pos++}}return e&&(t*=-1),t},readFloat:function(){for(var t=this.pos;;){var e=this.buf.charCodeAt(this.pos);if(e!=e)break;if(!(e>=43&&e<58||101==e||69==e))break;this.pos++}return parseFloat(r.substr(this.buf,t,this.pos-t))},unserializeObject:function(t){for(;;){if(this.pos>=this.length)throw new Es("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var e=this.unserialize();if("string"!=typeof e)throw new Es("Invalid object key");var i=this.unserialize();t[e]=i}this.pos++},unserializeEnum:function(t,e){if(58!=this.buf.charCodeAt(this.pos++))throw new Es("Invalid enum format");var i=this.readDigits();if(0==i)return p.createEnum(t,e);for(var s=[];i-- >0;)s.push(this.unserialize());return p.createEnum(t,e,s)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var t=this.unserialize(),e=this.resolver.resolveClass(t);if(null==e)throw new Es("Class not found "+t);return e;case 66:var i=this.unserialize(),s=this.resolver.resolveEnum(i);if(null==s)throw new Es("Enum not found "+i);return s;case 67:var n=this.unserialize(),o=this.resolver.resolveClass(n);if(null==o)throw new Es("Class not found "+n);var l=p.createEmptyInstance(o);if(this.cache.push(l),l.hxUnserialize(this),103!=this.buf.charCodeAt(this.pos++))throw new Es("Invalid custom data");return l;case 77:var h=new vs;this.cache.push(h);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var c=this.unserialize();h.set(c,this.unserialize())}return this.pos++,h;case 82:var _=this.readDigits();if(_<0||_>=this.scache.length)throw new Es("Invalid string reference");return this.scache[_];case 97:this.buf;var u=[];for(this.cache.push(u);;){var d=this.buf.charCodeAt(this.pos);if(104==d){this.pos++;break}if(117==d){this.pos++;var g=this.readDigits();u[u.length+g-1]=null}else u.push(this.unserialize())}return u;case 98:var f=new ys;this.cache.push(f);for(this.buf;104!=this.buf.charCodeAt(this.pos);){var m=this.unserialize(),v=this.unserialize();null!=Us[m]?f.setReserved(m,v):f.h[m]=v}return this.pos++,f;case 99:var y=this.unserialize(),x=this.resolver.resolveClass(y);if(null==x)throw new Es("Class not found "+y);var w=p.createEmptyInstance(x);return this.cache.push(w),this.unserializeObject(w),w;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:var b=this.unserialize(),T=this.resolver.resolveEnum(b);if(null==T)throw new Es("Enum not found "+b);this.pos++;var S=this.readDigits(),I=T.__constructs__.slice()[S];if(null==I)throw new Es("Unknown enum index "+b+"@"+S);var k=this.unserializeEnum(T,I);return this.cache.push(k),k;case 107:return NaN;case 108:var F=new a;this.cache.push(F);for(this.buf;104!=this.buf.charCodeAt(this.pos);)F.add(this.unserialize());return this.pos++,F;case 109:return-1/0;case 110:return null;case 111:var P={};return this.cache.push(P),this.unserializeObject(P),P;case 112:return 1/0;case 113:var C=new ms;this.cache.push(C);this.buf;for(var E=this.buf.charCodeAt(this.pos++);58==E;){var B=this.readDigits(),L=this.unserialize();C.h[B]=L,E=this.buf.charCodeAt(this.pos++)}if(104!=E)throw new Es("Invalid IntMap format");return C;case 114:var A=this.readDigits();if(A<0||A>=this.cache.length)throw new Es("Invalid reference");return this.cache[A];case 115:var O=this.readDigits(),M=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<O)throw new Es("Invalid bytes length");var G=fs.CODES;null==G&&(G=fs.initCodes(),fs.CODES=G);for(var H=this.pos,D=3&O,N=H+(O-D),R=new xs(new Xs(3*(O>>2)+(D>=2?D-1:0))),W=0;H<N;){var U=G[M.charCodeAt(H++)],X=G[M.charCodeAt(H++)];R.b[W++]=255&(U<<2|X>>4);var Y=G[M.charCodeAt(H++)];R.b[W++]=255&(X<<4|Y>>2);var V=G[M.charCodeAt(H++)];R.b[W++]=255&(Y<<6|V)}if(D>=2){var K=G[M.charCodeAt(H++)],z=G[M.charCodeAt(H++)];if(R.b[W++]=255&(K<<2|z>>4),3==D){var j=G[M.charCodeAt(H++)];R.b[W++]=255&(z<<4|j>>2)}}return this.pos+=O,this.cache.push(R),R;case 116:return!0;case 118:var Q;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&45==this.buf.charCodeAt(this.pos+4))Q=r.strDate(r.substr(this.buf,this.pos,19)),this.pos+=19;else{var J=this.readFloat();Q=new Date(J)}return this.cache.push(Q),Q;case 119:var $=this.unserialize(),q=this.resolver.resolveEnum($);if(null==q)throw new Es("Enum not found "+$);var Z=this.unserializeEnum(q,this.unserialize());return this.cache.push(Z),Z;case 120:throw Es.wrap(this.unserialize());case 121:var tt=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<tt)throw new Es("Invalid string length");var et=r.substr(this.buf,this.pos,tt);return this.pos+=tt,et=decodeURIComponent(et.split("+").join(" ")),this.scache.push(et),et;case 122:return 0}throw this.pos--,new Es("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:fs};var ms=function(){this.h={}};s["haxe.ds.IntMap"]=ms,ms.__name__=["haxe","ds","IntMap"],ms.__interfaces__=[ds],ms.prototype={get:function(t){return this.h[t]},remove:function(t){return!!this.h.hasOwnProperty(t)&&(delete this.h[t],!0)},keys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(0|e);return r.iter(t)},__class__:ms};var vs=function(){this.h={__keys__:{}}};s["haxe.ds.ObjectMap"]=vs,vs.__name__=["haxe","ds","ObjectMap"],vs.__interfaces__=[ds],vs.assignId=function(t){return t.__id__=++vs.count},vs.getId=function(t){return t.__id__},vs.prototype={set:function(t,e){var i=t.__id__||(t.__id__=++vs.count);this.h[i]=e,this.h.__keys__[i]=t},get:function(t){return this.h[t.__id__]},remove:function(t){var e=t.__id__;return null!=this.h.__keys__[e]&&(delete this.h[e],delete this.h.__keys__[e],!0)},keys:function(){var t=[];for(var e in this.h.__keys__)this.h.hasOwnProperty(e)&&t.push(this.h.__keys__[e]);return r.iter(t)},__class__:vs};var ys=function(){this.h={}};s["haxe.ds.StringMap"]=ys,ys.__name__=["haxe","ds","StringMap"],ys.__interfaces__=[ds],ys.prototype={get:function(t){return null!=Us[t]?this.getReserved(t):this.h[t]},setReserved:function(t,e){null==this.rh&&(this.rh={}),this.rh["$"+t]=e},getReserved:function(t){return null==this.rh?null:this.rh["$"+t]},existsReserved:function(t){return null!=this.rh&&this.rh.hasOwnProperty("$"+t)},remove:function(t){return null!=Us[t]?(t="$"+t,!(null==this.rh||!this.rh.hasOwnProperty(t))&&(delete this.rh[t],!0)):!!this.h.hasOwnProperty(t)&&(delete this.h[t],!0)},keys:function(){return r.iter(this.arrayKeys())},arrayKeys:function(){var t=[];for(var e in this.h)this.h.hasOwnProperty(e)&&t.push(e);if(null!=this.rh)for(var e in this.rh)36==e.charCodeAt(0)&&t.push(e.substr(1));return t},__class__:ys};var xs=function(t){this.length=t.byteLength,this.b=new Ys(t),this.b.bufferValue=t,t.hxBytes=this,t.bytes=this.b};s["haxe.io.Bytes"]=xs,xs.__name__=["haxe","io","Bytes"],xs.alloc=function(t){return new xs(new Xs(t))},xs.ofString=function(t){for(var e=[],i=0;i<t.length;){var s=t.charCodeAt(i++);55296<=s&&s<=56319&&(s=s-55232<<10|1023&t.charCodeAt(i++)),s<=127?e.push(s):s<=2047?(e.push(192|s>>6),e.push(128|63&s)):s<=65535?(e.push(224|s>>12),e.push(128|s>>6&63),e.push(128|63&s)):(e.push(240|s>>18),e.push(128|s>>12&63),e.push(128|s>>6&63),e.push(128|63&s))}return new xs(new Ys(e).buffer)},xs.ofData=function(t){var e=t.hxBytes;return null!=e?e:new xs(t)},xs.fastGet=function(t,e){return t.bytes[e]},xs.prototype={__class__:xs};var ws=function(t){this.__x=t};s["haxe.xml._Fast.NodeAccess"]=ws,ws.__name__=["haxe","xml","_Fast","NodeAccess"],ws.prototype={resolve:function(t){var e=this.__x.elementsNamed(t).next();if(null==e){var i;if(this.__x.nodeType==g.Document)i="Document";else{var s=this.__x;if(s.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+s.nodeType);i=s.nodeName}throw new Es(i+" is missing element "+t)}return new ks(e)},__class__:ws};var bs=function(t){this.__x=t};s["haxe.xml._Fast.AttribAccess"]=bs,bs.__name__=["haxe","xml","_Fast","AttribAccess"],bs.prototype={resolve:function(t){if(this.__x.nodeType==g.Document)throw new Es("Cannot access document attribute "+t);var e=this.__x.get(t);if(null==e){var i=this.__x;if(i.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+i.nodeType);throw new Es(i.nodeName+" is missing attribute "+t)}return e},__class__:bs};var Ts=function(t){this.__x=t};s["haxe.xml._Fast.HasAttribAccess"]=Ts,Ts.__name__=["haxe","xml","_Fast","HasAttribAccess"],Ts.prototype={resolve:function(t){if(this.__x.nodeType==g.Document)throw new Es("Cannot access document attribute "+t);return this.__x.exists(t)},__class__:Ts};var Ss=function(t){this.__x=t};s["haxe.xml._Fast.HasNodeAccess"]=Ss,Ss.__name__=["haxe","xml","_Fast","HasNodeAccess"],Ss.prototype={resolve:function(t){return this.__x.elementsNamed(t).hasNext()},__class__:Ss};var Is=function(t){this.__x=t};s["haxe.xml._Fast.NodeListAccess"]=Is,Is.__name__=["haxe","xml","_Fast","NodeListAccess"],Is.prototype={resolve:function(t){for(var e=new a,i=this.__x.elementsNamed(t);i.hasNext();){var s=i.next();e.add(new ks(s))}return e},__class__:Is};var ks=function(t){if(t.nodeType!=g.Document&&t.nodeType!=g.Element)throw new Es("Invalid nodeType "+t.nodeType);this.x=t,this.node=new ws(t),this.nodes=new Is(t),this.att=new bs(t),this.has=new Ts(t),this.hasNode=new Ss(t)};s["haxe.xml.Fast"]=ks,ks.__name__=["haxe","xml","Fast"],ks.prototype={__class__:ks};var Fs=function(t,e,i){this.xml=e,this.message=t,this.position=i,this.lineNumber=1,this.positionAtLine=0;for(var s=0,n=i;s<n;){var o=s++,r=e.charCodeAt(o);10==r?(this.lineNumber++,this.positionAtLine=0):13!=r&&this.positionAtLine++}};s["haxe.xml.XmlParserException"]=Fs,Fs.__name__=["haxe","xml","XmlParserException"],Fs.prototype={toString:function(){return p.getClassName(Bs.getClass(this))+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:Fs};var Ps=function(){};s["haxe.xml.Parser"]=Ps,Ps.__name__=["haxe","xml","Parser"],Ps.parse=function(t,e){null==e&&(e=!1);var i=g.createDocument();return Ps.doParse(t,e,0,i),i},Ps.doParse=function(t,e,i,s){null==i&&(i=0);for(var n=null,o=1,a=1,l=null,h=0,u=0,d=0,p=t.charCodeAt(i),f=new _,m=1,v=-1;p==p;){switch(o){case 0:switch(p){case 9:case 10:case 13:case 32:break;default:o=a;continue}break;case 1:if(60!=p){h=i,o=13;continue}o=0,a=2;break;case 2:switch(p){case 33:if(91==t.charCodeAt(i+1)){if(i+=2,"CDATA["!=r.substr(t,i,6).toUpperCase())throw new Es(new Fs("Expected <![CDATA[",t,i));o=17,h=(i+=5)+1}else if(68==t.charCodeAt(i+1)||100==t.charCodeAt(i+1)){if("OCTYPE"!=r.substr(t,i+2,6).toUpperCase())throw new Es(new Fs("Expected <!DOCTYPE",t,i));o=16,h=(i+=8)+1}else{if(45!=t.charCodeAt(i+1)||45!=t.charCodeAt(i+2))throw new Es(new Fs("Expected \x3c!--",t,i));o=15,h=(i+=2)+1}break;case 47:if(null==s)throw new Es(new Fs("Expected node name",t,i));h=i+1,o=0,a=10;break;case 63:o=14,h=i;break;default:o=3,h=i;continue}break;case 3:if(!(p>=97&&p<=122||p>=65&&p<=90||p>=48&&p<=57||58==p||46==p||95==p||45==p)){if(i==h)throw new Es(new Fs("Expected node name",t,i));n=g.createElement(r.substr(t,h,i-h)),s.addChild(n),++u,o=0,a=4;continue}break;case 4:switch(p){case 47:o=11;break;case 62:o=9;break;default:o=5,h=i;continue}break;case 5:if(!(p>=97&&p<=122||p>=65&&p<=90||p>=48&&p<=57||58==p||46==p||95==p||45==p)){var y;if(h==i)throw new Es(new Fs("Expected attribute name",t,i));if(y=r.substr(t,h,i-h),l=y,n.exists(l))throw new Es(new Fs("Duplicate attribute ["+l+"]",t,i));o=0,a=6;continue}break;case 6:if(61!=p)throw new Es(new Fs("Expected =",t,i));o=0,a=7;break;case 7:switch(p){case 34:case 39:f=new _,o=8,h=i+1,v=p;break;default:throw new Es(new Fs('Expected "',t,i))}break;case 8:switch(p){case 38:var x=i-h;f.b+=null==x?r.substr(t,h,null):r.substr(t,h,x),o=18,m=8,h=i+1;break;case 60:case 62:if(e)throw new Es(new Fs("Invalid unescaped "+String.fromCharCode(p)+" in attribute value",t,i));if(p==v){var w=i-h;f.b+=null==w?r.substr(t,h,null):r.substr(t,h,w);var b=f.b;f=new _,n.set(l,b),o=0,a=4}break;default:if(p==v){var T=i-h;f.b+=null==T?r.substr(t,h,null):r.substr(t,h,T);var S=f.b;f=new _,n.set(l,S),o=0,a=4}}break;case 9:h=i=Ps.doParse(t,e,i,n),o=1;break;case 10:if(!(p>=97&&p<=122||p>=65&&p<=90||p>=48&&p<=57||58==p||46==p||95==p||45==p)){if(h==i)throw new Es(new Fs("Expected node name",t,i));var I=r.substr(t,h,i-h);if(s.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+s.nodeType);if(I!=s.nodeName){if(s.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+s.nodeType);throw new Es(new Fs("Expected </"+s.nodeName+">",t,i))}o=0,a=12;continue}break;case 11:if(62!=p)throw new Es(new Fs("Expected >",t,i));o=1;break;case 12:if(62==p)return 0==u&&s.addChild(g.createPCData("")),i;throw new Es(new Fs("Expected >",t,i));case 13:if(60==p){var k=i-h;f.b+=null==k?r.substr(t,h,null):r.substr(t,h,k);var F=g.createPCData(f.b);f=new _,s.addChild(F),++u,o=0,a=2}else if(38==p){var P=i-h;f.b+=null==P?r.substr(t,h,null):r.substr(t,h,P),o=18,m=13,h=i+1}break;case 14:if(63==p&&62==t.charCodeAt(i+1)){++i;var C=r.substr(t,h+1,i-h-2);s.addChild(g.createProcessingInstruction(C)),++u,o=1}break;case 15:45==p&&45==t.charCodeAt(i+1)&&62==t.charCodeAt(i+2)&&(s.addChild(g.createComment(r.substr(t,h,i-h))),++u,i+=2,o=1);break;case 16:91==p?++d:93==p?--d:62==p&&0==d&&(s.addChild(g.createDocType(r.substr(t,h,i-h))),++u,o=1);break;case 17:if(93==p&&93==t.charCodeAt(i+1)&&62==t.charCodeAt(i+2)){var E=g.createCData(r.substr(t,h,i-h));s.addChild(E),++u,i+=2,o=1}break;case 18:if(59==p){var B=r.substr(t,h,i-h);if(35==B.charCodeAt(0)){var L=c.parseInt(120==B.charCodeAt(1)?"0"+r.substr(B,1,B.length-1):r.substr(B,1,B.length-1));f.b+=String.fromCharCode(L)}else{var A=Ps.escapes;if(null!=Us[B]?A.existsReserved(B):A.h.hasOwnProperty(B)){var O=Ps.escapes,M=null!=Us[B]?O.getReserved(B):O.h[B];f.b+=c.string(M)}else{if(e)throw new Es(new Fs("Undefined entity: "+B,t,i));f.b+=c.string("&"+B+";")}}h=i+1,o=m}else if(!(p>=97&&p<=122||p>=65&&p<=90||p>=48&&p<=57||58==p||46==p||95==p||45==p)&&35!=p){if(e)throw new Es(new Fs("Invalid character in entity: "+String.fromCharCode(p),t,i));f.b+="&";var G=i-h;f.b+=null==G?r.substr(t,h,null):r.substr(t,h,G),h=i--,o=m}}p=t.charCodeAt(++i)}if(1==o&&(h=i,o=13),13==o){if(i!=h||0==u){var H=i-h;f.b+=null==H?r.substr(t,h,null):r.substr(t,h,H),s.addChild(g.createPCData(f.b)),++u}return i}if(!e&&18==o&&13==m){f.b+="&";var D=i-h;return f.b+=null==D?r.substr(t,h,null):r.substr(t,h,D),s.addChild(g.createPCData(f.b)),++u,i}throw new Es(new Fs("Unexpected end",t,i))};var Cs=function(t){this.output=new _,this.pretty=t};s["haxe.xml.Printer"]=Cs,Cs.__name__=["haxe","xml","Printer"],Cs.print=function(t,e){null==e&&(e=!1);var i=new Cs(e);return i.writeNode(t,""),i.output.b},Cs.prototype={writeNode:function(t,e){switch(t.nodeType){case 0:if(this.output.b+=c.string(e+"<"),t.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+t.nodeType);this.output.b+=c.string(t.nodeName);for(var i=t.attributes();i.hasNext();){var s=i.next();this.output.b+=c.string(" "+s+'="');var n=u.htmlEscape(t.get(s),!0);this.output.b+=c.string(n),this.output.b+='"'}if(this.hasChildren(t)){if(this.output.b+=">",this.pretty&&(this.output.b+="\n"),t.nodeType!=g.Document&&t.nodeType!=g.Element)throw new Es("Bad node type, expected Element or Document but found "+t.nodeType);for(var o=r.iter(t.children);o.hasNext();){var a=o.next();this.writeNode(a,this.pretty?e+"\t":e)}if(this.output.b+=c.string(e+"</"),t.nodeType!=g.Element)throw new Es("Bad node type, expected Element but found "+t.nodeType);this.output.b+=c.string(t.nodeName),this.output.b+=">",this.pretty&&(this.output.b+="\n")}else this.output.b+="/>",this.pretty&&(this.output.b+="\n");break;case 1:if(t.nodeType==g.Document||t.nodeType==g.Element)throw new Es("Bad node type, unexpected "+t.nodeType);var l=t.nodeValue;if(0!=l.length){var h=e+u.htmlEscape(l);this.output.b+=c.string(h),this.pretty&&(this.output.b+="\n")}break;case 2:if(this.output.b+=c.string(e+"<![CDATA["),t.nodeType==g.Document||t.nodeType==g.Element)throw new Es("Bad node type, unexpected "+t.nodeType);var _=u.trim(t.nodeValue);this.output.b+=c.string(_),this.output.b+="]]>",this.pretty&&(this.output.b+="\n");break;case 3:if(t.nodeType==g.Document||t.nodeType==g.Element)throw new Es("Bad node type, unexpected "+t.nodeType);var d=t.nodeValue,p=new RegExp("[\n\r\t]+","g".split("u").join(""));d="\x3c!--"+(d=d.replace(p,""))+"--\x3e",this.output.b+=null==e?"null":""+e;var f=u.trim(d);this.output.b+=c.string(f),this.pretty&&(this.output.b+="\n");break;case 4:if(t.nodeType==g.Document||t.nodeType==g.Element)throw new Es("Bad node type, unexpected "+t.nodeType);this.output.b+=c.string("<!DOCTYPE "+t.nodeValue+">"),this.pretty&&(this.output.b+="\n");break;case 5:if(t.nodeType==g.Document||t.nodeType==g.Element)throw new Es("Bad node type, unexpected "+t.nodeType);this.output.b+=c.string("<?"+t.nodeValue+"?>"),this.pretty&&(this.output.b+="\n");break;case 6:if(t.nodeType!=g.Document&&t.nodeType!=g.Element)throw new Es("Bad node type, expected Element or Document but found "+t.nodeType);for(var m=r.iter(t.children);m.hasNext();){var v=m.next();this.writeNode(v,e)}}},hasChildren:function(t){if(t.nodeType!=g.Document&&t.nodeType!=g.Element)throw new Es("Bad node type, expected Element or Document but found "+t.nodeType);for(var e=r.iter(t.children);e.hasNext();){var i=e.next();switch(i.nodeType){case 0:case 1:return!0;case 2:case 3:if(i.nodeType==g.Document||i.nodeType==g.Element)throw new Es("Bad node type, unexpected "+i.nodeType);if(0!=u.ltrim(i.nodeValue).length)return!0}}return!1},__class__:Cs};var Es=function(t){Error.call(this),this.val=t,this.message=String(t),Error.captureStackTrace&&Error.captureStackTrace(this,Es)};s["js._Boot.HaxeError"]=Es,Es.__name__=["js","_Boot","HaxeError"],Es.wrap=function(t){return t instanceof Error?t:new Es(t)},Es.__super__=Error,Es.prototype=e(Error.prototype,{__class__:Es});var Bs=function(){};s["js.Boot"]=Bs,Bs.__name__=["js","Boot"],Bs.getClass=function(t){if(t instanceof Array&&null==t.__enum__)return Array;var e=t.__class__;if(null!=e)return e;var i=Bs.__nativeClassName(t);return null!=i?Bs.__resolveNativeClass(i):null},Bs.__string_rec=function(t,e){if(null==t)return"null";if(e.length>=5)return"<...>";var i=typeof t;switch("function"==i&&(t.__name__||t.__ename__)&&(i="object"),i){case"function":return"<function>";case"object":if(t instanceof Array){if(t.__enum__){if(2==t.length)return t[0];var s=t[0]+"(";e+="\t";for(var n=2,o=t.length;n<o;){var r=n++;s+=2!=r?","+Bs.__string_rec(t[r],e):Bs.__string_rec(t[r],e)}return s+")"}var a="[";e+="\t";for(var l=0,h=t.length;l<h;){var c=l++;a+=(c>0?",":"")+Bs.__string_rec(t[c],e)}return a+="]"}var _;try{_=t.toString}catch(t){return"???"}if(null!=_&&_!=Object.toString&&"function"==typeof _){var u=t.toString();if("[object Object]"!=u)return u}var d=null,p="{\n";e+="\t";var g=null!=t.hasOwnProperty;for(var d in t)g&&!t.hasOwnProperty(d)||"prototype"!=d&&"__class__"!=d&&"__super__"!=d&&"__interfaces__"!=d&&"__properties__"!=d&&(2!=p.length&&(p+=", \n"),p+=e+d+" : "+Bs.__string_rec(t[d],e));return e=e.substring(1),p+="\n"+e+"}";case"string":return t;default:return String(t)}},Bs.__interfLoop=function(t,e){if(null==t)return!1;if(t==e)return!0;var i=t.__interfaces__;if(null!=i)for(var s=0,n=i.length;s<n;){var o=i[s++];if(o==e||Bs.__interfLoop(o,e))return!0}return Bs.__interfLoop(t.__super__,e)},Bs.__instanceof=function(t,e){if(null==e)return!1;switch(e){case Array:return t instanceof Array&&null==t.__enum__;case Ns:return"boolean"==typeof t;case Hs:return!0;case Ds:return"number"==typeof t;case Gs:return"number"==typeof t&&(0|t)===t;case String:return"string"==typeof t;default:if(null==t)return!1;if("function"==typeof e){if(t instanceof e)return!0;if(Bs.__interfLoop(Bs.getClass(t),e))return!0}else if("object"==typeof e&&Bs.__isNativeObj(e)&&t instanceof e)return!0;return e==Rs&&null!=t.__name__||(e==Ws&&null!=t.__ename__||t.__enum__==e)}},Bs.__cast=function(t,e){if(Bs.__instanceof(t,e))return t;throw new Es("Cannot cast "+c.string(t)+" to "+c.string(e))},Bs.__nativeClassName=function(t){var e=Bs.__toStr.call(t).slice(8,-1);return"Object"==e||"Function"==e||"Math"==e||"JSON"==e?null:e},Bs.__isNativeObj=function(t){return null!=Bs.__nativeClassName(t)},Bs.__resolveNativeClass=function(e){return t[e]};var Ls=function(t){if(t instanceof Array&&null==t.__enum__)this.a=t,this.byteLength=t.length;else{var e=t;this.a=[];for(var i=0,s=e;i<s;){var n=i++;this.a[n]=0}this.byteLength=e}};s["js.html.compat.ArrayBuffer"]=Ls,Ls.__name__=["js","html","compat","ArrayBuffer"],Ls.sliceImpl=function(t,e){var i=new Ys(this,t,null==e?null:e-t),s=new Xs(i.byteLength);return new Ys(s).set(i),s},Ls.prototype={slice:function(t,e){return new Ls(this.a.slice(t,e))},__class__:Ls};var As=function(){};s["js.html.compat.Uint8Array"]=As,As.__name__=["js","html","compat","Uint8Array"],As._new=function(t,e,i){var s;if("number"==typeof t){s=[];for(var n=0,o=t;n<o;)s[n++]=0;s.byteLength=s.length,s.byteOffset=0,s.buffer=new Ls(s)}else if(Bs.__instanceof(t,Ls)){var r=t;null==e&&(e=0),null==i&&(i=r.byteLength-e),(s=0==e?r.a:r.a.slice(e,e+i)).byteLength=s.length,s.byteOffset=e,s.buffer=r}else{if(!(t instanceof Array&&null==t.__enum__))throw new Es("TODO "+c.string(t));(s=t.slice()).byteLength=s.length,s.byteOffset=0,s.buffer=new Ls(s)}return s.subarray=As._subarray,s.set=As._set,s},As._set=function(t,e){if(Bs.__instanceof(t.buffer,Ls)){var i=t;if(t.byteLength+e>this.byteLength)throw new Es("set() outside of range");for(var s=0,n=t.byteLength;s<n;){var o=s++;this[o+e]=i[o]}}else{if(!(t instanceof Array&&null==t.__enum__))throw new Es("TODO");var r=t;if(r.length+e>this.byteLength)throw new Es("set() outside of range");for(var a=0,l=r.length;a<l;){var h=a++;this[h+e]=r[h]}}},As._subarray=function(t,e){var i=As._new(this.slice(t,e));return i.byteOffset=t,i};var Os,Ms=0;s.Math=Math,String.prototype.__class__=s.String=String,String.__name__=["String"],s.Array=Array,Array.__name__=["Array"],Date.prototype.__class__=s.Date=Date,Date.__name__=["Date"];var Gs=s.Int={__name__:["Int"]},Hs=s.Dynamic={__name__:["Dynamic"]},Ds=s.Float=Number;Ds.__name__=["Float"];var Ns=s.Bool=Boolean;Ns.__ename__=["Bool"];var Rs=s.Class={__name__:["Class"]},Ws={},Us={},Xs=t.ArrayBuffer||Ls;null==Xs.prototype.slice&&(Xs.prototype.slice=Ls.sliceImpl);var Ys=t.Uint8Array||As._new;g.Element=0,g.PCData=1,g.CData=2,g.Comment=3,g.DocType=4,g.ProcessingInstruction=5,g.Document=6,O.XOR_String="!@^$&(%)_=|2bS3vv5%a-=+}[{",O.XORByteLength=O.XOR_String.length,G.showFromRightToLeft_width=0,D.PACKAGE_NAME="com.drderico.towerd",D.SAVE_GAME_NAME="towerd",D.BLACK_COLOR="#090C0E",D.TILE_SIZE=16,D.TILE_SIZE_SCALED=16,D.DEFAULT_TEXT_SIZE=28,D.GRID_HEIGHT=14,D.GRID_WIDTH=48,D.GRAVITY=1600,D.HERO_INIT_SPEED=630,D.HERO_JUMP_SPEED=530,D.HERO_LIVES_DEFAULT=3,D.HERO_LIVES_MAXIMUM=99,D.LEVELS_NUM=2,D.HUD_BOUNCE_DURATION=.05,D.SCORE_FOR_NEW_LEVEL=100,D.SCORE_FOR_ENEMY=50,D.SCORE_FOR_ENEMY_HURT=15,D.SCORE_FOR_KING_ENEMY=500,D.SCORE_FOR_FLYING_ENEMY=1e3,D.SCORE_FOR_ARTEFACT=250,D.SCORE_FOR_GEM=25,D.MAX_ENV_AMOUNT=5,D.ENV_RED=0,D.ENV_BLUE=1,D.ENV_GREEN=2,D.ENV_ICE=3,D.ENV_HELL=4,D.BG_COLORS=["#0E0000","#000307","#000000","#02080A","#110000"],D.MAP_TEXTURES=[],D.SPEED_TO_MAGNET=400,D.BG_TILES=[["tileBg4_2.png","tileBg4_1.png","tileBg4.png","tileBg3_2.png","tileBg3_1.png","tileBg3.png"],["tileBg5_2.png","tileBg5_1.png","tileBg5.png","tileBg2_2.png","tileBg2_1.png","tileBg2.png","tileBg1_2.png","tileBg1_1.png","tileBg1.png"],["tileBg6_2.png","tileBg6_1.png","tileBg6.png","tileBg5_2.png","tileBg5_1.png","tileBg5.png"],["tileBg1_2.png","tileBg1_1.png","tileBg1.png","tileBg5_2.png","tileBg5_1.png","tileBg5.png"],["tileBg4_2.png","tileBg4_1.png","tileBg4.png","tileBg3_2.png","tileBg3_1.png","tileBg3.png"]],D.MAX_HERO_SKINS_AMOUNT=12,D.HERO_SKIN_TEXTURES=[[["hero1_shop_0001.png","hero1_shop_0002.png"],["hero1_0001.png","hero1_0002.png","hero1_0003.png"],["hero1_back0001.png","hero1_back0002.png"]],[["hero2_shop_0001.png","hero2_shop_0002.png"],["hero2_0001.png","hero2_0002.png","hero2_0002.png"],["hero2_back0001.png","hero2_back0002.png"]],[["hero3_shop_0001.png","hero3_shop_0002.png"],["hero3_0001.png","hero3_0002.png","hero3_0003.png"],["hero3_back0001.png","hero3_back0002.png"]],[["hero4_shop_0001.png","hero4_shop_0002.png"],["hero4_0001.png","hero4_0002.png","hero4_0003.png"],["hero4_back0001.png","hero4_back0002.png"]],[["hero5_shop_0001.png","hero5_shop_0002.png"],["hero5_0001.png","hero5_0002.png","hero5_0003.png"],["hero5_back0001.png","hero5_back0002.png"]],[["hero6_shop_0001.png","hero6_shop_0002.png"],["hero6_0001.png","hero6_0002.png","hero6_0002.png"],["hero6_back0001.png","hero6_back0002.png"]],[["hero7_shop_0001.png","hero7_shop_0002.png"],["hero7_0001.png","hero7_0002.png","hero7_0003.png"],["hero7_back0001.png","hero7_back0002.png"]],[["hero8_shop_0001.png","hero8_shop_0002.png"],["hero8_0001.png","hero8_0002.png","hero8_0002.png"],["hero8_back0001.png","hero8_back0002.png"]],[["hero9_shop_0001.png","hero9_shop_0002.png"],["hero9_0001.png","hero9_0002.png","hero9_0003.png"],["hero9_back0001.png","hero9_back0002.png"]],[["hero10_shop_0001.png","hero10_shop_0002.png"],["hero10_0001.png","hero10_0002.png","hero10_0003.png"],["hero10_back0001.png","hero10_back0002.png"]],[["hero11_shop_0001.png","hero11_shop_0002.png"],["hero11_0001.png","hero11_0002.png","hero11_0002.png"],["hero11_back0001.png","hero11_back0002.png"]],[["hero12_shop_0001.png","hero12_shop_0002.png"],["hero12_0001.png","hero12_0002.png","hero12_0002.png"],["hero12_back0001.png","hero12_back0002.png"]]],D.REWARD_FOR_VIDEO=15683822,D.SKIN_DEATH_COLORS=[[16753886,16732067],[13619156,13158607],[14277081,11337983,0],[16119060,11250445],[15329774,12237502],[3126732,1995914,7030531],[16315674,10622562],[13637401,16661821],[12851159,14077444],[9555236,6595353,4470298],[15329774,13421782,0],[4048039,9109246,2790037]],N.flickerQueue=[],N.flickerQueueRepeats=[],N.flickerQueueCallbacks=[],N.flickerQueueInterval=[],N.flickerQueueEndVisibility=[],N.flickerQueueTween=[],R.ACH_SHIELD_FOUND="CgkI_f7-8JsKEAIQAw",R.ACH_MAGNET_FOUND="CgkI_f7-8JsKEAIQBA",R.ACH_TOMB_FOUND="CgkI_f7-8JsKEAIQHA",R.ACH_MAGNET_25_GEMS_COLLETED="CgkI_f7-8JsKEAIQBQ",R.ACH_MAGNET_50_GEMS_COLLETED="CgkI_f7-8JsKEAIQBg",R.ACH_MAGNET_75_GEMS_COLLETED="CgkI_f7-8JsKEAIQBw",R.ACH_MAGNET_100_GEMS_COLLETED="CgkI_f7-8JsKEAIQCA",R.ACH_DIED_FROM_SPIKES="CgkI_f7-8JsKEAIQEQ",R.ACH_DIED_FROM_ACID="CgkI_f7-8JsKEAIQEg",R.ACH_DIED_FROM_LAVA="CgkI_f7-8JsKEAIQFA",R.ACH_DIED_FROM_WATER="CgkI_f7-8JsKEAIQEw",R.ACH_DIED_FROM_FIRE="CgkI_f7-8JsKEAIQHQ",R.ACH_DIED_FROM_SAW="CgkI_f7-8JsKEAIQFQ",R.ACH_CREDITS="CgkI_f7-8JsKEAIQFg",R.ACH_LEVEL_25="CgkI_f7-8JsKEAIQCQ",R.ACH_LEVEL_50="CgkI_f7-8JsKEAIQCg",R.ACH_LEVEL_75="CgkI_f7-8JsKEAIQCw",R.ACH_LEVEL_100="CgkI_f7-8JsKEAIQDA",R.ACH_KILL_25_NPCS="CgkI_f7-8JsKEAIQDQ",R.ACH_KILL_50_NPCS="CgkI_f7-8JsKEAIQDg",R.ACH_KILL_75_NPCS="CgkI_f7-8JsKEAIQDw",R.ACH_KILL_100_NPCS="CgkI_f7-8JsKEAIQEA",R.ACH_SAVE_25_KITTIES="CgkI_f7-8JsKEAIQFw",R.ACH_SAVE_50_KITTIES="CgkI_f7-8JsKEAIQGA",R.ACH_SAVE_75_KITTIES="CgkI_f7-8JsKEAIQGQ",R.ACH_SAVE_100_KITTIES="CgkI_f7-8JsKEAIQGg",W.gameWidth=800,W.gameHeight=480,U.needToShowBatchUnlockMessage=!1,Y.LOCALE_COOLMATH_KEY="assets/locales/coolMathEnUS/data.tsv",Y.ASSETS_PATH="./assets/",Y.ASSETS_IMAGES_PATH="./assets/images/",Y.ASSETS_FONTS_PATH="./assets/fonts/",Y.screenOffsetX=0,Y.screenOffsetY=0,Y.scale=1,Y.t="t1",Y.t2="t2",Y.font16_white="font16white",Y.font24_white="font24white",Y.font48_white="font48white",Y.wmap="wmap.png",Y.bgTiles=["tileBg1.png","tileBg1_1.png","tileBg1_2.png","tileBg2.png","tileBg2_1.png","tileBg2_2.png","tileBg3.png","tileBg3_1.png","tileBg3_2.png","tileBg4.png","tileBg4_1.png","tileBg4_2.png","tileBg5.png","tileBg5_1.png","tileBg5_2.png","tileBg6.png","tileBg6_1.png","tileBg6_2.png"],Y.tilemapTiles=["tilemap2.png","tilemap3.png","tilemap4.png","tilemap_ice.png","tilemap5.png"],Y.TIME_FACTOR=1e3,z.MENU=0,z.GAME=1,z.state=0,j.bgColorIdx=0,j.forceSaveToCloud=!1,j.itemShieldFirstTouch=!0,j.itemMagnetFirstTouch=!0,j.itemArtefactFirstTouch=!0,j.itemTombFirstTouch=!0,j.SKIN_AVAILABLE=128,j.gameOver=!0,Q.sfxVolume=.7,Q.starIdx=0,Q.mp3=".mp3",Q.ogg=".ogg",Q.clickSfx="assets/sounds/click",Q.gameover_explSfx="assets/sounds/gameover_expl",Q.gameoverSfx="assets/sounds/gameover",Q.chestSfx="assets/sounds/chest",Q.ladder_showSfx="assets/sounds/ladder_show",Q.hero_jumpSfx="assets/sounds/hero_jump",Q.fireball_spawnSfx="assets/sounds/fireball_spawn",Q.hero_hurt_by_fireballSfx="assets/sounds/hero_hurt_by_fireball",Q.water_sfx="assets/sounds/water_sfx",Q.water_hurtSfx="assets/sounds/water_hurt",Q.meow1Sfx="assets/sounds/meow1",Q.meow2Sfx="assets/sounds/meow2",Q.coin_pickupSfx="assets/sounds/coin",Q.gem_pickupSfx="assets/sounds/gem_pickup",Q.get_kittySfx="assets/sounds/get_kitty",Q.hero_hurt1Sfx="assets/sounds/hero_hurt1",Q.hero_hurt2Sfx="assets/sounds/hero_hurt2",Q.hero_hurt3Sfx="assets/sounds/hero_hurt3",Q.powerupPickedUpSfx="assets/sounds/GTC_MagicUp",Q.touchFloorSfx="assets/sounds/hit_bottom",Q.npc_dieSfx="assets/sounds/npc_die",Q.npc_die_voice1Sfx="assets/sounds/npc_die_voice1",Q.npc_die_voice2Sfx="assets/sounds/npc_die_voice2",Q.npc_die_voice3Sfx="assets/sounds/npc_die_voice3",Q.npc_die_voice4Sfx="assets/sounds/npc_die_voice4",Q.tombExplosionSfx="assets/sounds/tombExplosion",Q.moneyRewardRecievedSfx="assets/sounds/GTC_MagicUp",Q.gameMusic="assets/music/game",Q.gameMusic2="assets/music/game2",Q.menuMusic="assets/music/menu",Q.tutorialMusic="assets/music/tutorial",Q.water_sfx_cnt=0,J.GRID_X=0,J.levelY=0,J.cameraDeltaY=0,J.cameraMaxY=0,J.cameraMinY=0,J.minScrollX=0,J.maxScrollX=0,J.oldMinScrollX=0,J.oldMaxScrollX=0,J.cameraTweenObject1={x:0,y:0},J.cameraTweenObject2={x:0,y:0},$.isGameOver=!1,$.isLevelRunning=!1,$.needToGameOver=!1,$.curLevelIdx=0,$.prevLevelIdx=0,q.BONUSES_CNT=2,q.GEM_MAGNET=0,q.SHIELD=1,q.HEALTH=2,q.TELEPORT=3,q.GEM=4,q.CHEST=5,q.KITTY=6,q.COIN=7,q.GRAVE=8,q.COLLECTABLE_ITEMS=[0,1,2,6],q.prevItemId=0,q.isItemsPaused=!1,Z.AROUND_SIZE=8,Z.AROUND_SIZE_DIV2=4,Z.VISIBLE_LEVEL_WIDTH=56,Z.VISIBLE_LEVEL_HEIGHT=30,Z.movingNpcExcludedArray=[],et.state=0,et.active=!1,st.pool=new m(st),st.PARTICLES=20,st.callSuperDestroy=!1,nt.pool=new v(nt),nt.PARTICLES=20,nt.callSuperDestroy=!1,ot.pool=new y(ot),ot.PARTICLES=20,at.LEFT=1,at.RIGHT=16,at.UP=256,at.DOWN=4096,at.NONE=0,at.CEILING=256,at.FLOOR=4096,at.WALL=17,at.ANY=4369,_t.pool=new ct(_t),_t.WIDTH=76,_t.HEIGHT=80,dt.pool=new ut(dt),dt.WIDTH=60,dt.HEIGHT=58,pt.pool=new x(pt),pt.PARTICLES=25,pt.MAX_FX=3,pt.fxCnt=0,pt.callSuperDestroy=!1,gt.pool=new w(gt),gt.PARTICLES=20,gt.MAX_FX=3,gt.fxCnt=0,gt.callSuperDestroy=!1,ft.pool=new b(ft),ft.PARTICLES=15,ft.prevTextureName="",ft.textures=["grave_particle_red.png","grave_particle_blue.png","grave_particle_green.png","grave_particle_ice.png","grave_particle_red.png"],yt.pool=new vt(yt),xt.PARTICLES=30,xt.colors=[-23330,-45149],wt.pool=new T(wt),wt.PARTICLES=20,wt.callSuperDestroy=!1,Tt.pool=new bt(Tt),It.pool=new St(It),kt.pool=new S(kt),kt.PARTICLES=20,kt.callSuperDestroy=!1,Ft.pool=new I(Ft),Ft.PARTICLES=20,Ft.callSuperDestroy=!1,Et.WIDTH=72,Et.HEIGHT=48,Et.pool=new Ct(Et),Lt.WIDTH=84,Lt.HEIGHT=22,Lt.pool=new Bt(Lt),Ot.WIDTH=9,Ot.HEIGHT=11,Ot.TIMER_VALUE=.05,Ot.pool=new At(Ot),Ot._timer=0,Ot._timerEnded=!1,Mt.WIDTH=36,Mt.HEIGHT=34,Mt.ROTATION_TIME=.619,Mt.canMove=!0,Mt.canJump=!0,Mt.climbOnLadderDuration=0,Gt.WALK_ANIM="1",Gt.CLIMB_ANIM="2",Gt.offsetsWalk=[[0,1,-1],[1,-1,3],[-4,-2,1],[-1,-5,-4],[0,1,-2],[-5,0,3],[-3,-4,-1],[-3,2,-2],[-3,2,-2],[-2,-1,0],[1,2,0],[1,0,-1]],Rt.HEIGHT_TOP=24,Rt.HEIGHT_BOTTOM=80,Rt.WIDTH_BETWEEN=0,Rt.isWaitingForTap=!1,Wt.SHIELD_COLOR=3269886,Wt.MAGNET_COLOR=13947204,Wt.DIST_BEETWEN_SLOTS=77,Ut.TEXT_WIDTH=86,Yt.TEXT_WIDTH=85,Kt.time=0,jt.WIDTH=3,jt.pool=new zt(jt),Jt.pool=new Qt(Jt),qt.pool=new $t(qt),qt.frameNames=["gem1_0001.png","gem2_0001.png","gem3_0001.png","gem4_0001.png"],qt.prevIdx=0,qt.ids=0,te.pool=new Zt(te),ie.WIDTH=47,ie.HEIGHT=70,ie.pool=new ee(ie),ie.textures=["grave_red.png","grave_blue.png","grave_green.png","grave_ice.png","grave_red.png"],ie.texturesDestroyed=["grave_red_destroyed.png","grave_blue_destroyed.png","grave_green_destroyed.png","grave_ice_destroyed.png","grave_red_destroyed.png"],ie.texturesDestroyedOffsetX=[2,2,2,12,2],ne.pool=new se(ne),re.pool=new oe(re),le.pool=new ae(le),le.prevIdx=0,le.t=["1","2","3","4"],ce.gapWidth=0,ce.partWidth=0,ce.floorWidth=0,ce.startX=0,ce.wallGapsNum=0,ce.prevPlatfMadeLong=!1,ce.gapChance=50,ce.tries=0,ce.parts=[],ce.prevGemX=0,ce.coinsPerPlatform=0,ce.maxCoins=0,ce.deltaX=0,ce.blockChance=0,ce.maxDist=0,ce.placeX=0,ce.pitContentArray=[],ce.prevPitH=0,ce.itemId=0,ce.placeItemsPartsArray=[],_e.MIN_GAP=4,_e.MAX_GAP=8,_e.MAX_GAP2=16,_e.MIN_CEIL_GAP=3,_e.MAX_CEIL_GAP=12,_e.MIN_FLOOR_WIDTH=8,_e.MAX_FLOOR_WIDTH=12,_e.MIN_CEIL_WIDTH=4,_e.MAX_CEIL_WIDTH=12,_e.LADDER_WIDTH=2,_e.PIT_MIN_WIDTH=4,_e.PIT_HEIGHT_MIN=2,_e.PIT_HEIGHT_MAX=4,_e.PIT_CEIL_HEIGHT_MIN=1,_e.PIT_CEIL_HEIGHT_MAX=2,_e.SPIKES_MIN_WIDTH=2,_e.SPIKES_MAX_WIDTH=6,_e.BLOCK_MIN_HEIGHT=1,_e.BLOCK_MAX_HEIGHT=3,_e.BLOCK_CEIL_MIN_HEIGHT=1,_e.BLOCK_CEIL_MAX_HEIGHT=1,_e.BLOCK_CEIL_MAX_HEIGHT2=4,_e.LADDER_OFFSET_FROM_EDGES=2,_e.LEVEL_WIDTH=48,_e.LEVEL_HEIGHT=22,_e.VERTICAL_DISTANCE_BETWEEN_LEVELS=6,_e.TILE_BG=-1,_e.TILE_EMPTY=0,_e.TILE_WALL=1,_e.TILE_SPIKES=2,_e.TILE_WATER=3,_e.TILE_ACID=4,_e.curLevelIdx=0,_e.simpleLevelsCnt=0,_e.envShuffle=[],_e.envShuffleIdx=0,_e.curLevelNum=0,_e.curLevelEnv=0,ue.SIMPLE_LEVEL=0,ue.COMPLEX_LEVEL=1,ue.RESULT_X=0,ue.RESULT_WIDTH=1,ue.GOAL_HEIGHT=2,de.HEIGHT=46,pe.HARD_MIN_FLOOR_WIDTH=6,pe.HARD_MAX_FLOOR_WIDTH=8,pe.PIT_CONTENT_FOR_LOOK2=[0,12,2,1],pe.newLook=0,pe.prevComplexLook=0,ve.MOVE_SPEED=400,ve.pool=new me(ve),ve.RED_ANIM="1",ve.BLUE_ANIM="2",ve.GREEN_ANIM="3",xe.pool=new ye(xe),xe.STATE_SHOW=0,xe.STATE_HIDE=1,xe.SHOW_DURATION=.5,we.SCORE_FOR_ENEMY_HURT="+15",Te.MOVE_SPEED=100,Te.pool=new be(Te),Te.t=["1","2","3","4"],Ie.MOVE_SPEED=40,Ie.pool=new Se(Ie),Ie.t=["1","2","3"],Ie.view=0,Ie.prevView=0,Fe.MOVE_SPEED=40,Fe.pool=new ke(Fe),Fe.t=["1","2","3"],Fe.view=0,Fe.prevView=0,Ce.MOVE_SPEED=60,Ce.pool=new Pe(Ce),Ce.t=["1","2","3","4"],Ce.view=0,Ce.prevView=0,Ce.offX1=0,Ce.offX2=0,Ce.offY=0,Be.MOVE_SPEED=20,Be.pool=new Ee(Be),Be.t=["1","2","3"],Be.view=0,Be.prevView=0,Me.pool=new Oe(Me),Ge.WIDTH=350,Ge.STYLE_VERTICAL=0,Ge.STYLE_HORIZONTAL=1,De.BG_TILE_SIZE=64,Re.BAR_WIDTH=32,Re.pool=new Ne(Re),Xe.pool=new Ue(Xe),ze.OVERLAP_TRIGGER_BOX=0,ze.OVERLAP_TRIGGER_BOX_NORMAL=1,ze.OVERLAP_ITEM_BOX=2,ze.TRIGGER_SIMPLE=3,ze.TRIGGER_DANGER=4,$e.pool=new Je($e),ti.pool=new Ze(ti),ii.pool=new ei(ii),ii._id=0,ni.pool=new si(ni),ni.textures=[["chain1.png","chain2.png","chain3.png"],["chain1.png","chain2.png","chain3.png"],["chain_green1.png","chain_green2.png","chain_green3.png"],["chain1_ice.png","chain2_ice.png","chain3_ice.png"],["chain_hell1.png","chain_hell2.png","chain_hell3.png"]],ri.pool=new oi(ri),ri.startDelay=0,ri.coinsToAdd=0,li.pool=new ai(li),li.startFrame=0,hi.EMPTY=0,hi.BG=1,hi.SPIKES=2,hi.ACID=43,hi.WATER=44,hi.WALL_FLOOR_1=3,hi.WALL_FLOOR_2=4,hi.WALL_FLOOR_3=5,hi.WALL_CEIL_1=6,hi.WALL_CEIL_2=7,hi.WALL_CEIL_3=8,hi.WALL_L_1=9,hi.WALL_L_2=10,hi.WALL_L_3=11,hi.WALL_R_1=12,hi.WALL_R_2=13,hi.WALL_R_3=14,hi.WALL_LB_1=15,hi.WALL_RB_1=16,hi.WALL_LT_1=17,hi.WALL_RT_1=18,hi.WALL_LB_2=19,hi.WALL_RB_2=20,hi.WALL_LT_2=21,hi.WALL_RT_2=22,hi.WALL_LT=23,hi.WALL_RT=24,hi.WALL_LB=25,hi.WALL_RB=26,hi.BG_FLOOR_1=27,hi.BG_FLOOR_2=28,hi.BG_CEIL_1=29,hi.BG_CEIL_2=30,hi.BG_LEFT_1=31,hi.BG_LEFT_2=32,hi.BG_RIGHT_1=33,hi.BG_RIGHT_2=34,hi.BG_2_FLOOR_1=35,hi.BG_2_FLOOR_2=36,hi.BG_2_CEIL_1=37,hi.BG_2_CEIL_2=38,hi.BG_2_LEFT_1=39,hi.BG_2_LEFT_2=40,hi.BG_2_RIGHT_1=41,hi.BG_2_RIGHT_2=42,_i.pool=new ci(_i),ui.pool=new k(ui),ui.oneLadderSpriteHeight=0,pi.pool=new di(pi),pi.FLOOR=-1,pi.PIT_CONTENT_ACID=0,pi.PIT_CONTENT_WATER=1,pi.PIT_CONTENT_SPIKES=2,pi.SPIKES=3,pi.GOAL=4,pi.SAW=5,pi.BLOCK=6,pi.FLOOR_SAW=7,pi.MOVING_ENEMY=8,pi.FLYING_ENEMY=9,pi.FIREBALL=10,pi.ITEM=11,pi.PIT_CONTENT_FIRE=12,pi.FIREBEAM=13,fi.HEIGHT=3,fi.WIDTH=3,fi.pool=new gi(fi),fi.t=["1","2","3"],vi.pool=new mi(vi),xi.pool=new yi(xi),Ti.pool=new F(Ti),Ti.TEXT_WIDTH=300,Si.pool=new P(Si),Si.TEXT_WIDTH=300,Fi.pool=new ki(Fi),Pi.pool=new C(Pi),Pi.stack=[],Pi.WIDTH=416,Pi.HEIGHT=200,Ei.TOTAL_DELAY_BEFORE_SHOW_BTN=.1,Ei.DELAY_BEFORE_SHOW_BTN=.07,Bi.MAIN_MENU=0,Bi.CREDITS=1,Bi.TITLE_Y=0,Bi.BACK_BTN_Y=0,Bi.HISCORE_TXT_Y=0,Bi.HISCORE_VALUE_TXT_Y=0,Bi.BIG_BLOCK_Y=0,Bi.BOTTOM_Y=0,Bi.needUpdateValues=!1,Bi.needUpdateBestScore=!1,Ai.AROUND_SIZE=8,Ai.VISIBLE_LEVEL_WIDTH=56,Ai.VISIBLE_LEVEL_HEIGHT=30,Ai.firstDraw=!0,Hi.isVisible=!1,Hi.WIDTH=592,Hi.HEIGHT=384,Ni.offsetsWalk=[[0,1,-1],[1,-1,3],[-4,0,1],[-1,1,-4],[0,-2,-2],[-5,2,3],[-3,3,-1],[-3,2,-2],[-3,2,-2],[-2,0,0],[1,-1,0],[1,0,-1]],Ri.isVisible=!1,Ri.WIDTH=736,Ri.HEIGHT=384,Ri.skinPriceStr="",Ui.defaultLocale="en-US",ji.random=new zi,qi.MIN_VALUE_FLOAT=1e-16,qi.MAX_VALUE_FLOAT=1.79e308,qi.MIN_VALUE_INT=-2147483647,qi.MAX_VALUE_INT=2147483647,qi.SQUARE_ROOT_OF_TWO=1.41421356237,qi.EPSILON=1e-7,es._pool=new ts(es),ss._pool=new is(ss),os.LEFT="left",os.CENTER="center",os.RIGHT="right",as.PERSIST=1,as.LOOPING=2,as.PINGPONG=4,as.ONESHOT=8,as.BACKWARD=16,as.o=new at,ls.WHITE="#FFFFFF",ls.GRAY="#808080",ls.BLACK="#000000",ls.GREEN="#008000",ls.LIME="#00FF00",ls.YELLOW="#FFFF00",ls.ORANGE="#FFA500",ls.RED="#FF0000",ls.PURPLE="#800080",ls.BLUE="#0000FF",ls.BROWN="#8B4513",ls.PINK="#FFC0CB",ls.MAGENTA="#FF00FF",ls.CYAN="#00FFFF",ps.USE_CACHE=!1,ps.USE_ENUM_INDEX=!1,ps.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",fs.DEFAULT_RESOLVER=new gs,fs.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:",vs.count=0,Ps.escapes=function(t){var e=new ys;return null!=Us.lt?e.setReserved("lt","<"):e.h.lt="<",null!=Us.gt?e.setReserved("gt",">"):e.h.gt=">",null!=Us.amp?e.setReserved("amp","&"):e.h.amp="&",null!=Us.quot?e.setReserved("quot",'"'):e.h.quot='"',null!=Us.apos?e.setReserved("apos","'"):e.h.apos="'",e}(),Bs.__toStr={}.toString,As.BYTES_PER_ELEMENT=1,W.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);