var LoaderState = {preload: function(){addFocusAndDesktopDetection(); game.renderer.renderSession.roundPixels = true; Phaser.Canvas.setImageRenderingCrisp(game.canvas); game.stage.smoothed = false; world = this; this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL; this.scale.pageAlignHorizontally = true; this.scale.pageAlignVertically = true; game.stage.backgroundColor = "#000000"; this.lode = this.add.sprite(this.game.world.centerX,this.game.world.centerY, 'loading1'); this.lode.anchor.setTo(0.5); this.preloadBar = this.add.sprite(this.game.world.centerX - 120, this.game.world.centerY, 'preloadBar'); this.preloadBar.anchor.setTo(0, 0.5); this.preloadBar.sendToBack(); this.lode.sendToBack(); this.load.setPreloadSprite(this.preloadBar); game.load.image('joint1', 'assets/pics/joint1.gif'); game.load.image('sprt_korpus', 'assets/pics/sprt_korpus.gif'); game.load.image('sprt_head', 'assets/pics/sprt_head.gif'); game.load.image('sprt_leg1', 'assets/pics/sprt_leg1.gif'); game.load.image('sprt_arm1', 'assets/pics/sprt_arm1.gif'); game.load.image('dspBG', 'assets/pics/dspBG.gif'); game.load.image('btn_replay', 'assets/pics/btn_replay.gif'); game.load.image('btn_LS', 'assets/pics/btn_LS.gif'); game.load.image('btn_Title', 'assets/pics/btn_Title.gif'); game.load.image('btn_lnr', 'assets/pics/btn_lnr.gif'); game.load.image('btn_play', 'assets/pics/btn_play.gif'); game.load.image('xHair', 'assets/pics/xHair.gif'); game.load.image('wood_140x20', 'assets/pics/wood_140x20.gif'); game.load.image('barrel1', 'assets/pics/barrel1.gif'); game.load.image('domino1', 'assets/pics/domino1.gif'); game.load.image('ice30x30', 'assets/pics/ice30x30.gif'); game.load.image('iceBar1', 'assets/pics/iceBar1.gif'); game.load.image('iceBar2', 'assets/pics/iceBar2.gif'); game.load.image('iceBar3', 'assets/pics/iceBar3.gif'); game.load.image('iceBlock', 'assets/pics/iceBlock.gif'); game.load.image('metalBar1', 'assets/pics/metalBar1.gif'); game.load.image('metalBar2', 'assets/pics/metalBar2.gif'); game.load.image('metalBar3', 'assets/pics/metalBar3.gif'); game.load.image('box30', 'assets/pics/box30x30.gif'); game.load.image('box40', 'assets/pics/box40.gif'); game.load.image('snowBall1', 'assets/pics/snowBall1.gif'); game.load.image('chimBG', 'assets/pics/chimBG.gif'); game.load.image('chimFront', 'assets/pics/chimFront.png'); game.load.image('santa1', 'assets/pics/santa1.gif'); game.load.image('sleight', 'assets/pics/sleight.gif'); game.load.image('seesaw', 'assets/pics/seesaw.gif'); game.load.image('snowMan1', 'assets/pics/snowMan1.gif'); game.load.image('snowMan2', 'assets/pics/snowMan2.gif'); game.load.image('snowMan3', 'assets/pics/snowMan3.gif'); game.load.image('cake1', 'assets/pics/cake1.gif'); game.load.image('cake2', 'assets/pics/cake2.gif'); game.load.image('cherry', 'assets/pics/cherry.gif'); game.load.image('plate190x10', 'assets/pics/plate190x10.gif'); game.load.image('wheel1', 'assets/pics/wheel1.gif'); game.load.image('candyBar', 'assets/pics/candyBar.gif'); game.load.image('bgTitle', 'assets/pics/bgTitle.png'); game.load.image('bgLS', 'assets/pics/bgLS.png'); game.load.image('bgGo', 'assets/pics/bgGo.png'); game.load.image('grxTitleFront', 'assets/pics/grxTitleFront.gif'); game.load.image('grxTitleLogo', 'assets/pics/grxTitleLogo.gif'); game.load.spritesheet('grxTitleSantaAni', 'assets/pics/grxTitleSantaAni.gif', 120, 50); game.load.spritesheet('trampo', 'assets/pics/trampoAni.gif', 128, 40); game.load.spritesheet('xitSign', 'assets/pics/xitSign.gif', 50, 40); game.load.spritesheet('hohoho', 'assets/pics/hohoho.gif', 70, 32); game.load.spritesheet('deerAni', 'assets/pics/deerAni.gif', 66, 66); game.load.spritesheet('BGs', 'assets/pics/BGs.png', 640, 440); game.load.spritesheet('lsBtn', 'assets/pics/lsBtn.gif', 70, 70); game.load.spritesheet('btn_fx', 'assets/pics/btn_fx.gif', 80, 80); game.load.spritesheet('btn_mu', 'assets/pics/btn_mu.gif', 80, 80); game.load.spritesheet('c2c', 'assets/pics/c2c.gif', 108, 55); game.load.spritesheet('flicker', 'assets/pics/flicker.gif', 15, 15); game.load.image('plat', 'assets/pics/plat.gif'); game.load.audio('fxClick', 'assets/fx/fxClick.wav'); game.load.audio('hohoho', 'assets/fx/hohoho.wav'); game.load.audio('fxKick', 'assets/fx/fxKick.wav'); game.load.audio('fxBoing', 'assets/fx/fxBoing.wav'); game.load.audio('fxAaa', 'assets/fx/fxAaa.wav'); game.load.audio('fxBonk', 'assets/fx/fxBonk.wav'); game.load.audio('muTitle', 'assets/msc/muTitle.mp3'); game.load.audio('mLevel1', 'assets/msc/mLevel1.mp3'); game.load.audio('mLevel2', 'assets/msc/mLevel2.mp3'); game.load.audio('mLevel3', 'assets/msc/mLevel3.mp3'); game.load.audio('mLevel4', 'assets/msc/mLevel4.mp3'); for (var i = 1; i < 37; i++) {var lnr = 100 + i; game.load.image('grfxLev'+lnr, 'assets/pics/grfxLev'+lnr+'.gif'); } }, create: function() {world.lode.destroy(); world.preloadBar.destroy(); clickFX = game.add.audio('fxClick'); game.btnPlay = world.game.add.sprite(this.game.world.centerX,this.game.world.centerY, 'btn_play'); game.btnPlay.anchor.setTo(0.5, 0.5); game.btnPlay.sendToBack(); game.btnPlay.inputEnabled = true; game.btnPlay.events.onInputDown.add(startGame, this); var topURL = 'run';try {topURL = window.top.location.hostname.split(".").splice(-2).join('.');}catch(err) {} if(arr.indexOf(topURL) < 0){} var style = { font: 'gameFont', fill: '#625E44', wordWrap: false, wordWrapWidth: null, align: 'center', backgroundColor: null }; var t = game.add.text(0, 0, '1234567890',style); t.fontSize = 50; t.addColor('#625E44'); t.anchor.setTo(0.5); t.visible = false; }, update: function(){} }; function startGame(pointer){newState(); }