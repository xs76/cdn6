var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(D,bb,w){D!=Array.prototype&&D!=Object.prototype&&(D[bb]=w.value)};$jscomp.getGlobal=function(D){return"undefined"!=typeof window&&window===D?D:"undefined"!=typeof global&&null!=global?global:D};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var D=0;return function(bb){return $jscomp.SYMBOL_PREFIX+(bb||"")+D++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var D=$jscomp.global.Symbol.iterator;D||(D=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[D]&&$jscomp.defineProperty(Array.prototype,D,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(D){var bb=0;return $jscomp.iteratorPrototype(function(){return bb<D.length?{done:!1,value:D[bb++]}:{done:!0}})};$jscomp.iteratorPrototype=function(D){$jscomp.initSymbolIterator();D={next:D};D[$jscomp.global.Symbol.iterator]=function(){return this};return D};
$jscomp.iteratorFromArray=function(D,bb){$jscomp.initSymbolIterator();D instanceof String&&(D+="");var w=0,l={next:function(){if(w<D.length){var k=w++;return{value:bb(k,D[k]),done:!1}}l.next=function(){return{done:!0,value:void 0}};return l.next()}};l[Symbol.iterator]=function(){return l};return l};
$jscomp.polyfill=function(D,bb,w,l){if(bb){w=$jscomp.global;D=D.split(".");for(l=0;l<D.length-1;l++){var k=D[l];k in w||(w[k]={});w=w[k]}D=D[D.length-1];l=w[D];bb=bb(l);bb!=l&&null!=bb&&$jscomp.defineProperty(w,D,{configurable:!0,writable:!0,value:bb})}};$jscomp.polyfill("Array.prototype.keys",function(D){return D?D:function(){return $jscomp.iteratorFromArray(this,function(D){return D})}},"es6","es3");
$jscomp.checkStringArgs=function(D,bb,w){if(null==D)throw new TypeError("The 'this' value for String.prototype."+w+" must not be null or undefined");if(bb instanceof RegExp)throw new TypeError("First argument to String.prototype."+w+" must not be a regular expression");return D+""};
$jscomp.polyfill("String.prototype.startsWith",function(D){return D?D:function(D,w){var l=$jscomp.checkStringArgs(this,D,"startsWith");D+="";var k=l.length,I=D.length;w=Math.max(0,Math.min(w|0,l.length));for(var bb=0;bb<I&&w<k;)if(l[w++]!=D[bb++])return!1;return bb>=I}},"es6","es3");
$jscomp.polyfill("String.prototype.codePointAt",function(D){return D?D:function(D){var w=$jscomp.checkStringArgs(this,null,"codePointAt"),l=w.length;D=Number(D)||0;if(0<=D&&D<l){D|=0;var k=w.charCodeAt(D);if(55296>k||56319<k||D+1===l)return k;D=w.charCodeAt(D+1);return 56320>D||57343<D?k:1024*(k-55296)+D+9216}}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(D){return D?D:function(D,w){var l=$jscomp.checkStringArgs(this,D,"endsWith");D+="";void 0===w&&(w=l.length);w=Math.max(0,Math.min(w|0,l.length));for(var k=D.length;0<k&&0<w;)if(l[--w]!=D[--k])return!1;return 0>=k}},"es6","es3");$jscomp.polyfill("Object.is",function(D){return D?D:function(D,w){return D===w?0!==D||1/D===1/w:D!==D&&w!==w}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(D){return D?D:function(D,w){var l=this;l instanceof String&&(l=String(l));var k=l.length;for(w=w||0;w<k;w++)if(l[w]==D||Object.is(l[w],D))return!0;return!1}},"es7","es3");$jscomp.polyfill("String.prototype.includes",function(D){return D?D:function(D,w){return-1!==$jscomp.checkStringArgs(this,D,"includes").indexOf(D,w||0)}},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(D){return D?D:function(D,w,l){var k=this.length||0;0>w&&(w=Math.max(0,k+w));if(null==l||l>k)l=k;l=Number(l);0>l&&(l=Math.max(0,k+l));for(w=Number(w||0);w<l;w++)this[w]=D;return this}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(D){return D?D:function(){return $jscomp.iteratorFromArray(this,function(D,w){return w})}},"es6","es3");
$jscomp.findInternal=function(D,bb,w){D instanceof String&&(D=String(D));for(var l=D.length,k=0;k<l;k++){var I=D[k];if(bb.call(w,I,k,D))return{i:k,v:I}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(D){return D?D:function(D,w){return $jscomp.findInternal(this,D,w).v}},"es6","es3");
(function(D,bb){function w(a,b){function c(){}c.prototype=a;a=new c;for(var d in b)a[d]=b[d];b.toString!==Object.prototype.toString&&(a.toString=b.toString);return a}function l(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Ol++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}D.lime=D.lime||{};var k={},I=function(){return n.__string_rec(this,
"")},Ag=function(){};k["lime.app.IModule"]=Ag;Ag.__name__=["lime","app","IModule"];Ag.prototype={addRenderer:null,addWindow:null,registerModule:null,setPreloader:null,__class__:Ag};var ce=function(){this.onExit=new Of;this.__renderers=[];this.__windows=[]};k["lime.app.Module"]=ce;ce.__name__=["lime","app","Module"];ce.__interfaces__=[Ag];ce.prototype={onExit:null,__application:null,__preloader:null,__renderers:null,__windows:null,addRenderer:function(a){var b=l(this,this.render);a.onRender.add(function(){b(a)});
var c=l(this,this.onRenderContextLost);a.onContextLost.add(function(){c(a)});var d=l(this,this.onRenderContextRestored);a.onContextRestored.add(function(b){d(a,b)});this.__renderers.push(a)},addWindow:function(a){var b=l(this,this.onWindowActivate);a.onActivate.add(function(){b(a)});var c=l(this,this.__onWindowClose);a.onClose.add(function(){c(a)},!1,-1E4);var d=l(this,this.onWindowCreate);a.onCreate.add(function(){d(a)});var e=l(this,this.onWindowDeactivate);a.onDeactivate.add(function(){e(a)});
var f=l(this,this.onWindowDropFile);a.onDropFile.add(function(b){f(a,b)});var m=l(this,this.onWindowEnter);a.onEnter.add(function(){m(a)});var h=l(this,this.onWindowFocusIn);a.onFocusIn.add(function(){h(a)});var q=l(this,this.onWindowFocusOut);a.onFocusOut.add(function(){q(a)});var y=l(this,this.onWindowFullscreen);a.onFullscreen.add(function(){y(a)});var g=l(this,this.onKeyDown);a.onKeyDown.add(function(b,c){g(a,b,c)});var k=l(this,this.onKeyUp);a.onKeyUp.add(function(b,c){k(a,b,c)});var n=l(this,
this.onWindowLeave);a.onLeave.add(function(){n(a)});var p=l(this,this.onWindowMinimize);a.onMinimize.add(function(){p(a)});var z=l(this,this.onMouseDown);a.onMouseDown.add(function(b,c,d){z(a,b,c,d)});var u=l(this,this.onMouseMove);a.onMouseMove.add(function(b,c){u(a,b,c)});var t=l(this,this.onMouseMoveRelative);a.onMouseMoveRelative.add(function(b,c){t(a,b,c)});var v=l(this,this.onMouseUp);a.onMouseUp.add(function(b,c,d){v(a,b,c,d)});var w=l(this,this.onMouseWheel);a.onMouseWheel.add(function(b,
c){w(a,b,c)});var x=l(this,this.onWindowMove);a.onMove.add(function(b,c){x(a,b,c)});var A=l(this,this.onWindowResize);a.onResize.add(function(b,c){A(a,b,c)});var B=l(this,this.onWindowRestore);a.onRestore.add(function(){B(a)});var r=l(this,this.onTextEdit);a.onTextEdit.add(function(b,c,d){r(a,b,c,d)});var J=l(this,this.onTextInput);a.onTextInput.add(function(b){J(a,b)});if(-1<a.id)this.onWindowCreate(a);this.__windows.push(a)},registerModule:function(a){this.__application=a;a.onExit.add(l(this,this.onModuleExit),
!1,0);a.onUpdate.add(l(this,this.update));for(a=tb.devices.iterator();a.hasNext();){var b=a.next();this.__onGamepadConnect(b)}tb.onConnect.add(l(this,this.__onGamepadConnect));for(a=fb.devices.iterator();a.hasNext();)b=a.next(),this.__onJoystickConnect(b);fb.onConnect.add(l(this,this.__onJoystickConnect));gb.onCancel.add(l(this,this.onTouchCancel));gb.onStart.add(l(this,this.onTouchStart));gb.onMove.add(l(this,this.onTouchMove));gb.onEnd.add(l(this,this.onTouchEnd))},removeRenderer:function(a){null!=
a&&-1<this.__renderers.indexOf(a)&&P.remove(this.__renderers,a)},setPreloader:function(a){null!=this.__preloader&&(this.__preloader.onProgress.remove(l(this,this.onPreloadProgress)),this.__preloader.onComplete.remove(l(this,this.onPreloadComplete)));this.__preloader=a;if(null==a||a.complete)this.onPreloadComplete();else a.onProgress.add(l(this,this.onPreloadProgress)),a.onComplete.add(l(this,this.onPreloadComplete))},onGamepadAxisMove:function(a,b,c){},onGamepadButtonDown:function(a,b){},onGamepadButtonUp:function(a,
b){},onGamepadConnect:function(a){},onGamepadDisconnect:function(a){},onJoystickAxisMove:function(a,b,c){},onJoystickButtonDown:function(a,b){},onJoystickButtonUp:function(a,b){},onJoystickConnect:function(a){},onJoystickDisconnect:function(a){},onJoystickHatMove:function(a,b,c){},onJoystickTrackballMove:function(a,b,c,d){},onKeyDown:function(a,b,c){},onKeyUp:function(a,b,c){},onModuleExit:function(a){},onMouseDown:function(a,b,c,d){},onMouseMove:function(a,b,c){},onMouseMoveRelative:function(a,b,
c){},onMouseUp:function(a,b,c,d){},onMouseWheel:function(a,b,c){},onPreloadComplete:function(){},onPreloadProgress:function(a,b){},onRenderContextLost:function(a){},onRenderContextRestored:function(a,b){},onTextEdit:function(a,b,c,d){},onTextInput:function(a,b){},onTouchCancel:function(a){},onTouchEnd:function(a){},onTouchMove:function(a){},onTouchStart:function(a){},onWindowActivate:function(a){},onWindowClose:function(a){},onWindowCreate:function(a){},onWindowDeactivate:function(a){},onWindowDropFile:function(a,
b){},onWindowEnter:function(a){},onWindowFocusIn:function(a){},onWindowFocusOut:function(a){},onWindowFullscreen:function(a){},onWindowLeave:function(a){},onWindowMove:function(a,b,c){},onWindowMinimize:function(a){},onWindowResize:function(a,b,c){},onWindowRestore:function(a){},render:function(a){},update:function(a){},__onGamepadConnect:function(a){this.onGamepadConnect(a);var b=l(this,this.onGamepadAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=l(this,this.onGamepadButtonDown);a.onButtonDown.add(function(b){c(a,
b)});var d=l(this,this.onGamepadButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=l(this,this.onGamepadDisconnect);a.onDisconnect.add(function(){e(a)})},__onJoystickConnect:function(a){this.onJoystickConnect(a);var b=l(this,this.onJoystickAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=l(this,this.onJoystickButtonDown);a.onButtonDown.add(function(b){c(a,b)});var d=l(this,this.onJoystickButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=l(this,this.onJoystickDisconnect);a.onDisconnect.add(function(){e(a)});
var f=l(this,this.onJoystickHatMove);a.onHatMove.add(function(b,c){f(a,b,c)});var m=l(this,this.onJoystickTrackballMove);a.onTrackballMove.add(function(b,c,d){m(a,b,c,d)})},__onWindowClose:function(a){this.onWindowClose(a);P.remove(this.__windows,a)},__class__:ce};var qi=function(a){this.gameDeviceCache=new Cb;this.parent=a;this.nextUpdate=this.lastUpdate=this.currentUpdate=0;this.framePeriod=-1;Pf.init()};k["lime._backend.html5.HTML5Application"]=qi;qi.__name__=["lime","_backend","html5","HTML5Application"];
qi.prototype={gameDeviceCache:null,currentUpdate:null,deltaTime:null,framePeriod:null,lastUpdate:null,nextUpdate:null,parent:null,convertKeyCode:function(a){if(65<=a&&90>=a)return a+32;switch(a){case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;
case 45:return 1073741897;case 46:return 127;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 109:return 1073741910;case 110:return 1073741923;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;
case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 144:return 1073741907;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;
case 220:return 92;case 221:return 93;case 222:return 39}return a},create:function(a){},exec:function(){M.get_window().addEventListener("keydown",l(this,this.handleKeyEvent),!1);M.get_window().addEventListener("keyup",l(this,this.handleKeyEvent),!1);M.get_window().addEventListener("focus",l(this,this.handleWindowEvent),!1);M.get_window().addEventListener("blur",l(this,this.handleWindowEvent),!1);M.get_window().addEventListener("resize",l(this,this.handleWindowEvent),!1);M.get_window().addEventListener("beforeunload",
l(this,this.handleWindowEvent),!1);CanvasRenderingContext2D.prototype.isPointInStroke||(CanvasRenderingContext2D.prototype.isPointInStroke=function(a,b,c){return!1});CanvasRenderingContext2D.prototype.isPointInPath||(CanvasRenderingContext2D.prototype.isPointInPath=function(a,b,c){return!1});0=="performance"in window&&(window.performance={});if(0=="now"in window.performance){var a=Date.now();performance.timing&&performance.timing.navigationStart&&(a=performance.timing.navigationStart);window.performance.now=
function(){return Date.now()-a}}for(var b=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-b));c=window.setTimeout(function(){a(d+e)},e);b=d+e;return c});window.cancelAnimationFrame||
(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimFrame=window.requestAnimationFrame;this.lastUpdate=(new Date).getTime();this.handleApplicationEvent();return 0},exit:function(){},getFrameRate:function(){return 0>this.framePeriod?60:1E3==this.framePeriod?0:1E3/this.framePeriod},handleApplicationEvent:function(a){null!=this.parent.get_window()&&this.parent.get_window().backend.updateSize();this.updateGameDevices();this.currentUpdate=(new Date).getTime();this.currentUpdate>=
this.nextUpdate&&(this.deltaTime=this.currentUpdate-this.lastUpdate,this.parent.onUpdate.dispatch(u["int"](this.deltaTime)),null!=this.parent.get_renderer()&&null!=this.parent.get_renderer().context&&(this.parent.get_renderer().render(),this.parent.get_renderer().onRender.dispatch(),this.parent.get_renderer().onRender.canceled||this.parent.get_renderer().flip()),this.nextUpdate=0>this.framePeriod?this.currentUpdate:this.currentUpdate+this.framePeriod,this.lastUpdate=this.currentUpdate);M.get_window().requestAnimationFrame(l(this,
this.handleApplicationEvent))},handleKeyEvent:function(a){if(null!=this.parent.get_window()){var b=this.convertKeyCode(null!=a.keyCode?a.keyCode:a.which),c=(a.shiftKey?3:0)|(a.ctrlKey?192:0)|(a.altKey?768:0)|(a.metaKey?3072:0);"keydown"==a.type?(this.parent.get_window().onKeyDown.dispatch(b,c),this.parent.get_window().onKeyDown.canceled&&a.preventDefault()):(this.parent.get_window().onKeyUp.dispatch(b,c),this.parent.get_window().onKeyUp.canceled&&a.preventDefault())}},handleWindowEvent:function(a){if(null!=
this.parent.get_window())switch(a.type){case "beforeunload":a.defaultPrevented||(this.parent.get_window().onClose.dispatch(),this.parent.get_window().onClose.canceled&&a.preventDefault());break;case "blur":this.parent.get_window().onFocusOut.dispatch();this.parent.get_window().onDeactivate.dispatch();break;case "focus":this.parent.get_window().onFocusIn.dispatch();this.parent.get_window().onActivate.dispatch();break;case "resize":this.parent.get_window().backend.handleResizeEvent(a)}},setFrameRate:function(a){this.framePeriod=
60<=a?-1:0<a?1E3/a:1E3;return a},updateGameDevices:function(){var a=fb.__getDeviceData();if(null!=a)for(var b,c,d,e,f,m=0,h=a.length;m<h;)if(b=m++,e=a[b],null!=e){if(!this.gameDeviceCache.exists(b)){f=new ri;f.id=b;f.connected=e.connected;c=0;for(d=e.buttons.length;c<d;){var q=c++;f.buttons.push(e.buttons[q].value)}c=0;for(d=e.axes.length;c<d;)q=c++,f.axes.push(e.axes[q]);"standard"==e.mapping&&(f.isGamepad=!0);this.gameDeviceCache.set(b,f);e.connected&&(fb.__connect(b),f.isGamepad&&tb.__connect(b))}f=
this.gameDeviceCache.get(b);d=fb.devices.get(b);c=tb.devices.get(b);if(e.connected){for(var y=0,g=e.buttons.length;y<g;){var k=y++;q=e.buttons[k].value;if(q!=f.buttons[k]){if(6==k)d.onAxisMove.dispatch(e.axes.length,q),null!=c&&c.onAxisMove.dispatch(4,q);else if(7==k)d.onAxisMove.dispatch(e.axes.length+1,q),null!=c&&c.onAxisMove.dispatch(5,q);else if(0<q?d.onButtonDown.dispatch(k):d.onButtonUp.dispatch(k),null!=c){switch(k){case 0:b=0;break;case 1:b=1;break;case 2:b=2;break;case 3:b=3;break;case 4:b=
9;break;case 5:b=10;break;case 8:b=4;break;case 9:b=6;break;case 10:b=7;break;case 11:b=8;break;case 12:b=11;break;case 13:b=12;break;case 14:b=13;break;case 15:b=14;break;case 16:b=5;break;default:continue}0<q?c.onButtonDown.dispatch(b):c.onButtonUp.dispatch(b)}f.buttons[k]=q}}b=0;for(q=e.axes.length;b<q;)y=b++,e.axes[y]!=f.axes[y]&&(d.onAxisMove.dispatch(y,e.axes[y]),null!=c&&c.onAxisMove.dispatch(y,e.axes[y]),f.axes[y]=e.axes[y])}else f.connected&&(f.connected=!1,fb.__disconnect(b),tb.__disconnect(b))}},
__class__:qi};var dc=function(){this.onUpdate=new Of;ce.call(this);null==dc.current&&(dc.current=this);this.modules=[];this.windowByID=new Cb;this.backend=new qi(this);this.registerModule(this)};k["lime.app.Application"]=dc;dc.__name__=["lime","app","Application"];dc.__super__=ce;dc.prototype=w(ce.prototype,{config:null,modules:null,onUpdate:null,window:null,backend:null,windowByID:null,addModule:function(a){a.registerModule(this);this.modules.push(a);if(0<this.__renderers.length)for(var b=0,c=this.__renderers;b<
c.length;){var d=c[b];++b;a.addRenderer(d)}if(0<this.__windows.length)for(b=0,c=this.__windows;b<c.length;)d=c[b],++b,a.addWindow(d);a.setPreloader(this.__preloader)},addRenderer:function(a){ce.prototype.addRenderer.call(this,a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.addRenderer(a)}},createWindow:function(a){ce.prototype.addWindow.call(this,a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.addWindow(a)}null==a.renderer&&(b=new si(a),this.addRenderer(b));a.create(this);
this.windowByID.set(a.id,a);a.onCreate.dispatch()},exec:function(){dc.current=this;return this.backend.exec()},onModuleExit:function(a){this.backend.exit()},onWindowClose:function(a){this.removeWindow(a)},removeWindow:function(a){null!=a&&this.windowByID.exists(a.id)&&(P.remove(this.__windows,a),this.windowByID.remove(a.id),a.close(),null!=a.renderer&&this.removeRenderer(a.renderer),this.get_window()==a&&(this.window=null),0==this.__windows.length&&wa.exit(0))},setPreloader:function(a){ce.prototype.setPreloader.call(this,
a);for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.setPreloader(a)}},get_frameRate:function(){return this.backend.getFrameRate()},set_frameRate:function(a){return this.backend.setFrameRate(a)},get_preloader:function(){return this.__preloader},get_renderer:function(){return this.__renderers[0]},get_window:function(){return this.__windows[0]},get_windows:function(){return this.__windows},__class__:dc,__properties__:{get_windows:"get_windows",get_renderer:"get_renderer",get_preloader:"get_preloader",
get_window:"get_window",set_frameRate:"set_frameRate",get_frameRate:"get_frameRate"}});var Qf=function(){};k.ApplicationMain=Qf;Qf.__name__=["ApplicationMain"];Qf.main=function(){wa.__registerEntryPoint("truckLoader5",Qf.create,{build:"7938",company:"adgard",file:"truckLoader5",fps:30,name:"Truck Loader 5",orientation:"landscape",packageName:"com.bestphysics.TruckLoader5",version:"1.0.0",windows:[{allowHighDPI:!1,alwaysOnTop:!1,antialiasing:4,background:0,borderless:!1,depthBuffer:!1,display:0,fullscreen:!1,
hardware:!0,height:0,hidden:!1,maximized:!1,minimized:!1,parameters:{},resizable:!0,stencilBuffer:!0,title:"Truck Loader 5",vsync:!1,width:0,x:null,y:null}]})};Qf.create=function(a){var b=new Cg;b.create(a);Md.init(a);var c=new Dg(new Eg);b.setPreloader(c);c.create(a);a=c.onComplete;var d=b.get_window().stage;a.add(function(){Qf.start(d)});a=0;for(var e=Md.preloadLibraries;a<e.length;){var f=e[a];++a;c.addLibrary(f)}a=0;for(e=Md.preloadLibraryNames;a<e.length;)f=e[a],++a,c.addLibraryName(f);c.load();
b.exec()};Qf.start=function(a){try{de.main(),a.dispatchEvent(new R("resize",!1,!1)),a.window.get_fullscreen()&&a.dispatchEvent(new Rf("fullScreen",!1,!1,!0,!0))}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),a.__handleError(b)}};var pl=function(){};k["openfl.events.IEventDispatcher"]=pl;pl.__name__=["openfl","events","IEventDispatcher"];var ca=function(a){null!=a&&(this.__targetDispatcher=a)};k["openfl.events.EventDispatcher"]=ca;ca.__name__=["openfl","events","EventDispatcher"];ca.__interfaces__=
[pl];ca.prototype={__eventMap:null,__iterators:null,__targetDispatcher:null,addEventListener:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=!1);if(null!=b)if(null==this.__eventMap&&(this.__eventMap=new ea,this.__iterators=new ea),this.__eventMap.exists(a)){e=this.__eventMap.get(a);for(var f=0,m=e.length;f<m;){var h=f++;if(e[h].match(b,c))return}a=this.__iterators.get(a);for(f=0;f<a.length;)m=a[f],++f,m.active&&m.copy();this.__addListenerByPriority(e,new Fg(b,c,d))}else e=[],e.push(new Fg(b,c,d)),
b=new Gg(e),this.__eventMap.set(a,e),this.__iterators.set(a,[b])},dispatchEvent:function(a){a.target=null!=this.__targetDispatcher?this.__targetDispatcher:this;return this.__dispatchEvent(a)},hasEventListener:function(a){return null==this.__eventMap?!1:this.__eventMap.exists(a)},removeEventListener:function(a,b,c){null==c&&(c=!1);if(null!=this.__eventMap&&null!=b){var d=this.__eventMap.get(a);if(null!=d){for(var e=this.__iterators.get(a),f=0,m=d.length;f<m;){var h=f++;if(d[h].match(b,c)){for(b=0;b<
e.length;)c=e[b],++b,c.remove(d[h],h);d.splice(h,1);break}}0==d.length&&(this.__eventMap.remove(a),this.__iterators.remove(a));this.__eventMap.iterator().hasNext()||(this.__iterators=this.__eventMap=null)}}},__dispatchEvent:function(a){if(null==this.__eventMap||null==a)return!0;var b=a.type,c=this.__eventMap.get(b);if(null==c)return!0;null==a.target&&(a.target=null!=this.__targetDispatcher?this.__targetDispatcher:this);a.currentTarget=this;var d=1==a.eventPhase;b=this.__iterators.get(b);var e=b[0];
e.active&&(e=new Gg(c),b.push(e));e.reset(c);for(c=e;c.hasNext();){var f=c.next();if(null!=f&&f.useCapture==d&&(f.callback(a),a.__isCanceledNow))break}e!=b[0]&&P.remove(b,e);return!0},__addListenerByPriority:function(a,b){for(var c=a.length,d=c,e=0;e<c;){var f=e++;if(a[f].priority<b.priority){d=f;break}}a.splice(d,0,b)},__class__:ca};var Hg=function(){};k["openfl.display.IBitmapDrawable"]=Hg;Hg.__name__=["openfl","display","IBitmapDrawable"];Hg.prototype={__transform:null,__worldTransform:null,__getBounds:null,
__renderCanvas:null,__renderGL:null,__updateChildren:null,__updateTransforms:null,__class__:Hg};var hb={};k["openfl._Vector.Vector_Impl_"]=hb;hb.__name__=["openfl","_Vector","Vector_Impl_"];hb.toIntVector=function(a,b,c,d){return new yc(new gf(b,c),d)};hb.toFloatVector=function(a,b,c,d){return new yc(new jg(b,c),d)};hb.toObjectVector=function(a,b,c,d){return new yc(new kg(b,c),d)};var ti=function(a,b,c){null!=a&&(this.create=a);null!=b&&(this.clean=b);null!=c&&this.set_size(c);this.__pool=new rb;
this.inactiveObjects=this.activeObjects=0;this.__inactiveObject1=this.__inactiveObject0=null;this.__inactiveObjectList=new Db};k["lime.utils.ObjectPool_openfl_Vector_openfl_display_DisplayObject"]=ti;ti.__name__=["lime","utils","ObjectPool_openfl_Vector_openfl_display_DisplayObject"];ti.prototype={activeObjects:null,inactiveObjects:null,__inactiveObject0:null,__inactiveObject1:null,__inactiveObjectList:null,__pool:null,__size:null,clean:function(a){},create:function(){return null},get:function(){var a=
null;if(0<this.inactiveObjects)a=this.__getInactive();else if(null==this.__size||this.activeObjects<this.__size)a=this.create(),null!=a&&(this.__pool.set(a,!0),this.activeObjects++);return a},release:function(a){this.activeObjects--;null==this.__size||this.activeObjects+this.inactiveObjects<this.__size?(this.clean(a),this.__addInactive(a)):this.__pool.remove(a)},__addInactive:function(a){null==this.__inactiveObject0?this.__inactiveObject0=a:null==this.__inactiveObject1?this.__inactiveObject1=a:this.__inactiveObjectList.add(a);
this.inactiveObjects++},__getInactive:function(){if(null!=this.__inactiveObject0){var a=this.__inactiveObject0;this.__inactiveObject0=null}else null!=this.__inactiveObject1?(a=this.__inactiveObject1,this.__inactiveObject1=null):(a=this.__inactiveObjectList.pop(),0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop()));this.inactiveObjects--;this.activeObjects++;return a},
__removeInactive:function(a){if(!(0>=a||0==this.inactiveObjects)&&(null!=this.__inactiveObject0&&(this.__pool.remove(this.__inactiveObject0),this.__inactiveObject0=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects&&(null!=this.__inactiveObject1&&(this.__pool.remove(this.__inactiveObject1),this.__inactiveObject1=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects)))for(var b=this.__inactiveObjectList.iterator();b.hasNext();){var c=b.next();this.__pool.remove(c);this.__inactiveObjectList.remove(c);
this.inactiveObjects--;--a;if(0==a||0==this.inactiveObjects)break}},set_size:function(a){if(null==a)this.__size=null;else{var b=this.inactiveObjects+this.activeObjects;this.__size=a;if(b>a)this.__removeInactive(b-a);else if(a>b)for(var c=0,d=a-b;c<d;)if(c++,b=this.create(),null!=b)this.__pool.set(b,!1),this.__inactiveObjectList.add(b),this.inactiveObjects++;else break}return a},__class__:ti,__properties__:{set_size:"set_size"}};var lg=function(){};k["haxe.IMap"]=lg;lg.__name__=["haxe","IMap"];lg.prototype=
{get:null,set:null,exists:null,remove:null,__class__:lg};var rb=function(){this.h={__keys__:{}}};k["haxe.ds.ObjectMap"]=rb;rb.__name__=["haxe","ds","ObjectMap"];rb.__interfaces__=[lg];rb.assignId=function(a){return a.__id__=++rb.count};rb.getId=function(a){return a.__id__};rb.prototype={h:null,set:function(a,b){var c=rb.getId(a)||rb.assignId(a);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[rb.getId(a)]},exists:function(a){return null!=this.h.__keys__[rb.getId(a)]},remove:function(a){a=
rb.getId(a);if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return P.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[rb.getId(a)]}}},__class__:rb};var Db=function(){this.length=0};k.List=Db;Db.__name__=["List"];Db.prototype={h:null,q:null,length:null,
add:function(a){a=new ui(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;this.length++},pop:function(){if(null==this.h)return null;var a=this.h.item;this.h=this.h.next;null==this.h&&(this.q=null);this.length--;return a},remove:function(a){for(var b=null,c=this.h;null!=c;){if(c.item==a)return null==b?this.h=c.next:b.next=c.next,this.q==c&&(this.q=b),this.length--,!0;b=c;c=c.next}return!1},iterator:function(){return new vi(this.h)},__class__:Db};var xa=function(){ca.call(this);this.__alpha=1;this.__blendMode=
10;this.__cacheAsBitmap=!1;this.__transform=new sa;this.__visible=!0;this.__rotationSine=this.__rotation=0;this.__worldAlpha=this.__scaleY=this.__scaleX=this.__rotationCosine=1;this.__worldBlendMode=10;this.__worldTransform=new sa;this.__worldColorTransform=new ib;this.__renderTransform=new sa;this.__worldVisible=!0;this.set_name("instance"+ ++xa.__instanceCount)};k["openfl.display.DisplayObject"]=xa;xa.__name__=["openfl","display","DisplayObject"];xa.__interfaces__=[Hg];xa.__super__=ca;xa.prototype=
w(ca.prototype,{opaqueBackground:null,parent:null,stage:null,__alpha:null,__blendMode:null,__cacheAsBitmap:null,__cacheBitmap:null,__cacheBitmapBackground:null,__cacheBitmapColorTransform:null,__cacheBitmapData:null,__cacheBitmapRender:null,__cairo:null,__children:null,__filters:null,__graphics:null,__isMask:null,__loaderInfo:null,__mask:null,__name:null,__objectTransform:null,__renderable:null,__renderDirty:null,__renderParent:null,__renderTransform:null,__renderTransformCache:null,__renderTransformChanged:null,
__rotation:null,__rotationCosine:null,__rotationSine:null,__scaleX:null,__scaleY:null,__scrollRect:null,__transform:null,__transformDirty:null,__visible:null,__worldAlpha:null,__worldAlphaChanged:null,__worldBlendMode:null,__worldClip:null,__worldClipChanged:null,__worldColorTransform:null,__worldTransform:null,__worldVisible:null,__worldVisibleChanged:null,__worldTransformInvalid:null,__worldZ:null,__canvas:null,__context:null,__style:null,addEventListener:function(a,b,c,d,e){null==e&&(e=!1);null==
d&&(d=0);null==c&&(c=!1);switch(a){case "activate":case "deactivate":case "enterFrame":case "exitFrame":case "frameConstructed":case "render":xa.__broadcastEvents.exists(a)||xa.__broadcastEvents.set(a,[]);var f=xa.__broadcastEvents.get(a);-1==f.indexOf(this)&&f.push(this)}ca.prototype.addEventListener.call(this,a,b,c,d,e)},dispatchEvent:function(a){u.is(a,Fa)?(a.stageX=this.__getRenderTransform().__transformX(a.localX,a.localY),a.stageY=this.__getRenderTransform().__transformY(a.localX,a.localY)):
u.is(a,Eb)&&(a.stageX=this.__getRenderTransform().__transformX(a.localX,a.localY),a.stageY=this.__getRenderTransform().__transformY(a.localX,a.localY));return this.__dispatchWithCapture(a)},getBounds:function(a){var b=!1;if(null!=a){var c=this.__getWorldTransform().clone();c.concat(a.__getWorldTransform().clone().invert())}else b=!0,c=sa.__pool.get(),c.identity();a=new X;this.__getBounds(a,c);b&&sa.__pool.release(c);return a},hitTestObject:function(a){if(null!=a&&null!=a.parent&&null!=this.parent){var b=
this.getBounds(this);a=a.getBounds(this);return b.intersects(a)}return!1},removeEventListener:function(a,b,c){null==c&&(c=!1);ca.prototype.removeEventListener.call(this,a,b,c);switch(a){case "activate":case "deactivate":case "enterFrame":case "exitFrame":case "frameConstructed":case "render":this.hasEventListener(a)||xa.__broadcastEvents.exists(a)&&P.remove(xa.__broadcastEvents.get(a),this)}},__cleanup:function(){this.__context=this.__canvas=this.__cairo=null;null!=this.__graphics&&this.__graphics.__cleanup()},
__dispatch:function(a){if(null!=this.__eventMap&&this.hasEventListener(a.type)){var b=ca.prototype.__dispatchEvent.call(this,a);return a.__isCanceled?!0:b}return!0},__dispatchChildren:function(a){},__dispatchEvent:function(a){var b=ca.prototype.__dispatchEvent.call(this,a);if(a.__isCanceled)return!0;a.bubbles&&null!=this.parent&&this.parent!=this&&(a.eventPhase=3,null==a.target&&(a.target=this),this.parent.__dispatchEvent(a));return b},__dispatchStack:function(a,b){var c=b.length;if(0==c){a.eventPhase=
2;var d=a.target;d.__dispatch(a)}else{a.eventPhase=1;a.target=b[b.length-1];d=0;for(var e=c-1;d<e;){var f=d++;b[f].__dispatch(a);if(a.__isCanceled)return}a.eventPhase=2;d=a.target;d.__dispatch(a);if(!a.__isCanceled&&a.bubbles)for(a.eventPhase=3,c-=2;0<=c;){b[c].__dispatch(a);if(a.__isCanceled)break;--c}}},__dispatchWithCapture:function(a){null==a.target&&(a.target=this);if(null!=this.parent)if(a.eventPhase=1,this.parent==this.stage)this.parent.__dispatch(a);else{for(var b=xa.__tempStack.get(),c=this.parent,
d=0;null!=c;)b.data.set(d,c),c=c.parent,++d;c=0;for(var e=d;c<e;){var f=c++;b.data.get(d-f-1).__dispatch(a)}xa.__tempStack.release(b)}a.eventPhase=2;return this.__dispatchEvent(a)},__enterFrame:function(a){},__getBounds:function(a,b){null!=this.__graphics&&this.__graphics.__getBounds(a,b)},__getCursor:function(){return null},__getFilterBounds:function(a,b){this.__getBounds(a,b);if(null!=this.__filters&&0<this.__filters.length){b=X.__pool.get();for(var c=0,d=this.__filters;c<d.length;){var e=d[c];
++c;b.__expand(-e.__leftExtension,-e.__topExtension,e.__leftExtension+e.__rightExtension,e.__topExtension+e.__bottomExtension)}a.width+=b.width;a.height+=b.height;a.x+=b.x;a.y+=b.y;X.__pool.release(b)}},__getInteractive:function(a){return!1},__getLocalBounds:function(a){this.__getBounds(a,this.__transform);a.x-=this.__transform.tx;a.y-=this.__transform.ty},__getRenderTransform:function(){this.__getWorldTransform();return this.__renderTransform},__getWorldTransform:function(){if(this.__transformDirty||
this.__worldTransformInvalid){var a=[],b=this;if(null==this.parent)this.__update(!0,!1);else for(;b!=this.stage&&(a.push(b),b=b.parent,null!=b););for(var c=a.length;0<=--c;)b=a[c],b.__update(!0,!1),b.__worldTransformInvalid=!1}return this.__worldTransform},__globalToLocal:function(a,b){this.__getRenderTransform();a==b?this.__renderTransform.__transformInversePoint(a):(b.x=this.__renderTransform.__transformInverseX(a.x,a.y),b.y=this.__renderTransform.__transformInverseY(a.x,a.y));return b},__hitTest:function(a,
b,c,d,e,f){if(null!=this.__graphics){if(!f.get_visible()||this.__isMask||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;if(this.__graphics.__hitTest(a,b,c,this.__getRenderTransform()))return null==d||e||d.push(f),!0}return!1},__hitTestMask:function(a,b){return null!=this.__graphics&&this.__graphics.__hitTest(a,b,!0,this.__getRenderTransform())?!0:!1},__renderCanvas:function(a){if(null==this.get_mask()||0<this.get_mask().get_width()&&0<this.get_mask().get_height())this.__updateCacheBitmap(a,
!this.__worldColorTransform.__isDefault()),null==this.__cacheBitmap||this.__cacheBitmapRender?pk.render(this,a):Ig.render(this.__cacheBitmap,a)},__renderCanvasMask:function(a){null!=this.__graphics&&p.renderMask(this.__graphics,a)},__renderDOM:function(a){this.__updateCacheBitmap(a,!this.__worldColorTransform.__isDefault());null==this.__cacheBitmap||this.__cacheBitmapRender?Jg.render(this,a):(this.__renderDOMClear(a),this.__cacheBitmap.stage=this.stage,oc.render(this.__cacheBitmap,a))},__renderDOMClear:function(a){Jg.clear(this,
a)},__renderGL:function(a){this.__updateCacheBitmap(a,!1);null==this.__cacheBitmap||this.__cacheBitmapRender?qk.render(this,a):Kg.render(this.__cacheBitmap,a)},__setParentRenderDirty:function(){var a=null!=this.__renderParent?this.__renderParent:this.parent;null==a||a.__renderDirty||(a.__renderDirty=!0,a.__setParentRenderDirty())},__setRenderDirty:function(){this.__renderDirty||(this.__renderDirty=!0,this.__setParentRenderDirty())},__setStageReference:function(a){this.stage=a},__setTransformDirty:function(){this.__transformDirty||
(this.__transformDirty=!0,this.__setWorldTransformInvalid(),this.__setParentRenderDirty())},__setWorldTransformInvalid:function(){this.__worldTransformInvalid=!0},__update:function(a,b,c){b=null!=this.__renderParent?this.__renderParent:this.parent;this.__renderable=this.get_visible()&&0!=this.__scaleX&&0!=this.__scaleY&&!this.__isMask&&(null==b||!b.__isMask);this.__updateTransforms();this.__transformDirty=!1;null!=c&&this.__updateMask(c);a||(this.__renderTransformChanged=!this.__renderTransform.equals(this.__renderTransformCache),
null==this.__renderTransformCache?this.__renderTransformCache=this.__renderTransform.clone():this.__renderTransformCache.copyFrom(this.__renderTransform),this.__worldColorTransform.__equals(this.get_transform().get_colorTransform())||(this.__worldColorTransform=this.get_transform().get_colorTransform().__clone()),null!=b?(a=b.__worldVisible&&this.get_visible(),this.__worldVisibleChanged=this.__worldVisible!=a,this.__worldVisible=a,a=this.get_alpha()*b.__worldAlpha,this.__worldAlphaChanged=this.__worldAlpha!=
a,this.__worldAlpha=a):(this.__worldAlpha=this.get_alpha(),this.__worldVisibleChanged=this.__worldVisible!=this.get_visible(),this.__worldVisible=this.get_visible(),this.__worldAlphaChanged=this.__worldAlpha!=this.get_alpha()))},__updateCacheBitmap:function(a,b){if(!this.__cacheBitmapRender)if(this.get_cacheAsBitmap()){var c=null,d=null;this.__update(!1,!0);var e=null==this.__cacheBitmap||this.__renderDirty&&(b||null!=this.__children&&0<this.__children.length)||this.opaqueBackground!=this.__cacheBitmapBackground||
!this.__cacheBitmapColorTransform.__equals(this.__worldColorTransform);b=e||!this.__cacheBitmap.__worldTransform.equals(this.__worldTransform);var f=null!=this.__filters&&0<this.__filters.length,m=0,h=0;if(b||f)c=sa.__pool.get(),d=X.__pool.get(),c.identity(),this.__getFilterBounds(d,this.__renderTransform),m=Math.ceil(d.width),h=Math.ceil(d.height);if(f)if(null==this.__cacheBitmap||m==this.__cacheBitmap.get_width()&&h==this.__cacheBitmap.get_height())for(var q=0,y=this.__filters;q<y.length;){var g=
y[q];++q;if(g.__renderDirty){e=!0;break}}else e=!0;if(e)if(this.__cacheBitmapBackground=this.opaqueBackground,q=null!=this.opaqueBackground?-16777216|this.opaqueBackground:0,.5<=d.width&&.5<=d.height)null==this.__cacheBitmap||m!=this.__cacheBitmap.get_width()||h!=this.__cacheBitmap.get_height()?(this.__cacheBitmapData=new ba(m,h,!0,q),null==this.__cacheBitmap&&(this.__cacheBitmap=new Ia),this.__cacheBitmap.set_bitmapData(this.__cacheBitmapData)):this.__cacheBitmapData.fillRect(this.__cacheBitmapData.rect,
q);else{this.__cacheBitmapData=this.__cacheBitmap=null;return}if(b||e)this.__cacheBitmap.__worldTransform.copyFrom(this.__worldTransform),this.__cacheBitmap.__renderTransform.identity(),this.__cacheBitmap.__renderTransform.tx=d.x,this.__cacheBitmap.__renderTransform.ty=d.y,c.concat(this.__renderTransform),c.tx-=Math.round(d.x),c.ty-=Math.round(d.y);this.__cacheBitmap.smoothing=a.allowSmoothing;this.__cacheBitmap.__renderable=this.__renderable;this.__cacheBitmap.__worldAlpha=this.__worldAlpha;this.__cacheBitmap.__worldBlendMode=
this.__worldBlendMode;this.__cacheBitmap.__scrollRect=this.__scrollRect;if(e){this.__cacheBitmapRender=!0;this.__cacheBitmapData.__draw(this,c,null,null,null,a.allowSmoothing);if(f){h=a=!1;e=0;for(f=this.__filters;e<f.length;)m=f[e],++e,m.__needSecondBitmapData&&(a=!0),m.__preserveObject&&(h=!0);e=this.__cacheBitmapData;m=null;f=a?new ba(e.width,e.height,!0,0):e;h&&(m=new ba(e.width,e.height,!0,0));h=e.rect;q=new za;y=0;for(g=this.__filters;y<g.length;){var k=g[y];++y;k.__preserveObject&&m.copyPixels(e,
e.rect,q);var l=k.__applyFilter(f,e,h,q);k.__preserveObject&&l.draw(m,null,this.get_transform().get_colorTransform());k.__renderDirty=!1;a&&l==f&&(l=e,e=f,f=l)}this.__cacheBitmap.set_bitmapData(e)}this.__cacheBitmapRender=!1;null==this.__cacheBitmapColorTransform&&(this.__cacheBitmapColorTransform=new ib);this.__cacheBitmapColorTransform.__copyFrom(this.__worldColorTransform);this.__cacheBitmapColorTransform.__isDefault()||this.__cacheBitmapData.colorTransform(this.__cacheBitmapData.rect,this.__cacheBitmapColorTransform)}b&&
(this.__update(!1,!0),sa.__pool.release(c),X.__pool.release(d))}else null!=this.__cacheBitmap&&(this.__cacheBitmap.__renderDOMClear(a),this.__cacheBitmapColorTransform=this.__cacheBitmapData=this.__cacheBitmap=null)},__updateChildren:function(a){a=null!=this.__renderParent?this.__renderParent:this.parent;this.__renderable=this.get_visible()&&0!=this.__scaleX&&0!=this.__scaleY&&!this.__isMask&&(null==a||!a.__isMask);this.__worldAlpha=this.get_alpha();this.__worldBlendMode=this.get_blendMode();this.__transformDirty&&
(this.__transformDirty=!1)},__updateMask:function(a){null!=this.__graphics&&(a.__commands.overrideMatrix(this.__worldTransform),a.__commands.append(this.__graphics.__commands),a.set___dirty(!0),a.__visible=!0,null==a.__bounds&&(a.__bounds=new X),this.__graphics.__getBounds(a.__bounds,sa.__identity))},__updateTransforms:function(a){var b=null!=a;a=b?a:this.__transform;null==this.__worldTransform&&(this.__worldTransform=new sa);null==this.__renderTransform&&(this.__renderTransform=new sa);var c=null!=
this.__renderParent?this.__renderParent:this.parent;if(b||null==this.parent)this.__worldTransform.copyFrom(a);else{var d=this.parent.__worldTransform;this.__worldTransform.a=a.a*d.a+a.b*d.c;this.__worldTransform.b=a.a*d.b+a.b*d.d;this.__worldTransform.c=a.c*d.a+a.d*d.c;this.__worldTransform.d=a.c*d.b+a.d*d.d;this.__worldTransform.tx=a.tx*d.a+a.ty*d.c+d.tx;this.__worldTransform.ty=a.tx*d.b+a.ty*d.d+d.ty}b||null==c?this.__renderTransform.copyFrom(a):(d=c.__renderTransform,this.__renderTransform.a=a.a*
d.a+a.b*d.c,this.__renderTransform.b=a.a*d.b+a.b*d.d,this.__renderTransform.c=a.c*d.a+a.d*d.c,this.__renderTransform.d=a.c*d.b+a.d*d.d,this.__renderTransform.tx=a.tx*d.a+a.ty*d.c+d.tx,this.__renderTransform.ty=a.tx*d.b+a.ty*d.d+d.ty);null!=this.__scrollRect&&this.__renderTransform.__translateTransformed(-this.__scrollRect.x,-this.__scrollRect.y)},get_alpha:function(){return this.__alpha},set_alpha:function(a){1<a&&(a=1);a!=this.__alpha&&this.__setRenderDirty();return this.__alpha=a},get_blendMode:function(){return this.__blendMode},
set_blendMode:function(a){null==a&&(a=10);a!=this.__blendMode&&this.__setRenderDirty();return this.__blendMode=a},get_cacheAsBitmap:function(){return null==this.__filters?this.__cacheAsBitmap:!0},set_cacheAsBitmap:function(a){this.__setRenderDirty();return this.__cacheAsBitmap=a},get_filters:function(){return null==this.__filters?[]:this.__filters.slice()},set_filters:function(a){this.__filters=null!=a&&0<a.length?a:null;this.__setRenderDirty();return a},get_height:function(){var a=X.__pool.get();
this.__getLocalBounds(a);var b=a.height;X.__pool.release(a);return b},set_height:function(a){var b=X.__pool.get(),c=sa.__pool.get();c.identity();this.__getBounds(b,c);a!=b.height?this.set_scaleY(a/b.height):this.set_scaleY(1);X.__pool.release(b);sa.__pool.release(c);return a},get_loaderInfo:function(){return null!=this.stage?H.current.__loaderInfo:null},get_mask:function(){return this.__mask},set_mask:function(a){a!=this.__mask&&(this.__setTransformDirty(),this.__setRenderDirty());null!=this.__mask&&
(this.__mask.__isMask=!1,this.__mask.__setTransformDirty(),this.__mask.__setRenderDirty());null!=a&&(a.__isMask=!0);return this.__mask=a},get_mouseX:function(){var a=null!=this.stage?this.stage.__mouseX:H.current.stage.__mouseX,b=null!=this.stage?this.stage.__mouseY:H.current.stage.__mouseY;return this.__getRenderTransform().__transformInverseX(a,b)},get_mouseY:function(){var a=null!=this.stage?this.stage.__mouseX:H.current.stage.__mouseX,b=null!=this.stage?this.stage.__mouseY:H.current.stage.__mouseY;
return this.__getRenderTransform().__transformInverseY(a,b)},get_name:function(){return this.__name},set_name:function(a){return this.__name=a},get_rotation:function(){return this.__rotation},set_rotation:function(a){if(a!=this.__rotation){this.__rotation=a;var b=Math.PI/180*this.__rotation;this.__rotationSine=Math.sin(b);this.__rotationCosine=Math.cos(b);this.__transform.a=this.__rotationCosine*this.__scaleX;this.__transform.b=this.__rotationSine*this.__scaleX;this.__transform.c=-this.__rotationSine*
this.__scaleY;this.__transform.d=this.__rotationCosine*this.__scaleY;this.__setTransformDirty()}return a},get_scaleX:function(){return this.__scaleX},set_scaleX:function(a){if(a!=this.__scaleX)if(this.__scaleX=a,0==this.__transform.b)a!=this.__transform.a&&this.__setTransformDirty(),this.__transform.a=a;else{var b=this.__rotationCosine*a,c=this.__rotationSine*a;this.__transform.a==b&&this.__transform.b==c||this.__setTransformDirty();this.__transform.a=b;this.__transform.b=c}return a},get_scaleY:function(){return this.__scaleY},
set_scaleY:function(a){if(a!=this.__scaleY)if(this.__scaleY=a,0==this.__transform.c)a!=this.__transform.d&&this.__setTransformDirty(),this.__transform.d=a;else{var b=-this.__rotationSine*a,c=this.__rotationCosine*a;this.__transform.d==c&&this.__transform.c==b||this.__setTransformDirty();this.__transform.c=b;this.__transform.d=c}return a},get_transform:function(){null==this.__objectTransform&&(this.__objectTransform=new wi(this));return this.__objectTransform},get_visible:function(){return this.__visible},
set_visible:function(a){a!=this.__visible&&this.__setRenderDirty();return this.__visible=a},get_width:function(){var a=X.__pool.get();this.__getLocalBounds(a);var b=a.width;X.__pool.release(a);return b},set_width:function(a){var b=X.__pool.get(),c=sa.__pool.get();c.identity();this.__getBounds(b,c);a!=b.width?this.set_scaleX(a/b.width):this.set_scaleX(1);X.__pool.release(b);sa.__pool.release(c);return a},get_x:function(){return this.__transform.tx},set_x:function(a){a!=this.__transform.tx&&this.__setTransformDirty();
return this.__transform.tx=a},get_y:function(){return this.__transform.ty},set_y:function(a){a!=this.__transform.ty&&this.__setTransformDirty();return this.__transform.ty=a},__class__:xa,__properties__:{set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_width:"set_width",get_width:"get_width",set_visible:"set_visible",get_visible:"get_visible",get_transform:"get_transform",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_rotation:"set_rotation",
get_rotation:"get_rotation",set_name:"set_name",get_name:"get_name",get_mouseY:"get_mouseY",get_mouseX:"get_mouseX",set_mask:"set_mask",get_mask:"get_mask",get_loaderInfo:"get_loaderInfo",set_height:"set_height",get_height:"get_height",set_filters:"set_filters",get_filters:"get_filters",set_cacheAsBitmap:"set_cacheAsBitmap",get_cacheAsBitmap:"get_cacheAsBitmap",set_blendMode:"set_blendMode",get_blendMode:"get_blendMode",set_alpha:"set_alpha",get_alpha:"get_alpha"}});var la=function(){xa.call(this);
this.doubleClickEnabled=!1;this.mouseEnabled=!0;this.needsSoftKeyboard=!1;this.__tabEnabled=null;this.tabIndex=-1};k["openfl.display.InteractiveObject"]=la;la.__name__=["openfl","display","InteractiveObject"];la.__super__=xa;la.prototype=w(xa.prototype,{doubleClickEnabled:null,mouseEnabled:null,needsSoftKeyboard:null,tabIndex:null,__tabEnabled:null,__allowMouseFocus:function(){return this.get_tabEnabled()},__getInteractive:function(a){null!=a&&(a.push(this),null!=this.parent&&this.parent.__getInteractive(a));
return!0},__hitTest:function(a,b,c,d,e,f){return!f.get_visible()||this.__isMask||e&&!this.mouseEnabled?!1:xa.prototype.__hitTest.call(this,a,b,c,d,e,f)},get_tabEnabled:function(){return 1==this.__tabEnabled?!0:!1},__class__:la,__properties__:w(xa.prototype.__properties__,{get_tabEnabled:"get_tabEnabled"})});var Fb=function(){la.call(this);this.mouseChildren=!0;this.__children=[];this.__removedChildren=hb.toObjectVector(null)};k["openfl.display.DisplayObjectContainer"]=Fb;Fb.__name__=["openfl","display",
"DisplayObjectContainer"];Fb.__super__=la;Fb.prototype=w(la.prototype,{mouseChildren:null,__removedChildren:null,addChild:function(a){return this.addChildAt(a,this.get_numChildren())},addChildAt:function(a,b){if(null==a)throw a=new Lg("Error #2007: Parameter child must be non-null."),a.errorID=2007,new K(a);if(b>this.__children.length||0>b)throw new K("Invalid index position "+b);if(a.parent==this)this.__children[b]!=a&&(P.remove(this.__children,a),this.__children.splice(b,0,a),this.__setRenderDirty());
else{null!=a.parent&&a.parent.removeChild(a);this.__children.splice(b,0,a);a.parent=this;(b=null!=this.stage&&null==a.stage)&&this.__setStageReference(this.stage);a.__setTransformDirty();a.__setRenderDirty();this.__setRenderDirty();var c=new R("added",!0);c.target=a;a.__dispatchWithCapture(c);b&&(b=new R("addedToStage",!1,!1),a.__dispatchWithCapture(b),a.__dispatchChildren(b))}return a},contains:function(a){for(;a!=this&&null!=a;)a=a.parent;return a==this},getChildAt:function(a){return 0<=a&&a<this.__children.length?
this.__children[a]:null},getChildByName:function(a){for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;if(d.get_name()==a)return d}return null},removeChild:function(a){if(null!=a&&a.parent==this){a.__setTransformDirty();a.__setRenderDirty();this.__setRenderDirty();var b=new R("removed",!0);a.__dispatchWithCapture(b);null!=this.stage&&(null!=a.stage&&this.stage.get_focus()==a&&this.stage.set_focus(null),b=new R("removedFromStage",!1,!1),a.__dispatchWithCapture(b),a.__dispatchChildren(b),a.__setStageReference(null));
a.parent=null;P.remove(this.__children,a);this.__removedChildren.data.push(a);a.__setTransformDirty()}return a},removeChildAt:function(a){return 0<=a&&a<this.__children.length?this.removeChild(this.__children[a]):null},__dispatchChildren:function(a){if(null!=this.__children)for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;a.target=d;if(!d.__dispatchWithCapture(a))break;d.__dispatchChildren(a)}},__enterFrame:function(a){for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__enterFrame(a)}},
__getBounds:function(a,b){la.prototype.__getBounds.call(this,a,b);if(0!=this.__children.length){null!=b&&(this.__updateTransforms(b),this.__updateChildren(!0));for(var c=0,d=this.__children;c<d.length;){var e=d[c];++c;0!=e.__scaleX&&0!=e.__scaleY&&e.__getBounds(a,e.__worldTransform)}null!=b&&(this.__updateTransforms(),this.__updateChildren(!0))}},__getFilterBounds:function(a,b){la.prototype.__getFilterBounds.call(this,a,b);if(0!=this.__children.length){null!=b&&(this.__updateTransforms(b),this.__updateChildren(!0));
for(var c=0,d=this.__children;c<d.length;){var e=d[c];++c;0==e.__scaleX||0==e.__scaleY||e.__isMask||e.__getFilterBounds(a,e.__worldTransform)}null!=b&&(this.__updateTransforms(),this.__updateChildren(!0))}},__hitTest:function(a,b,c,d,e,f){if(!f.get_visible()||this.__isMask||e&&!this.mouseEnabled&&!this.mouseChildren||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;if(null!=this.__scrollRect){var m=za.__pool.get();m.setTo(a,b);this.__getRenderTransform().__transformInversePoint(m);
if(!this.__scrollRect.containsPoint(m))return za.__pool.release(m),!1;za.__pool.release(m)}m=this.__children.length;if(e)if(null==d||!this.mouseChildren)for(;0<=--m;){if(this.__children[m].__hitTest(a,b,c,null,!0,this.__children[m]))return null!=d&&d.push(f),!0}else{if(null!=d){e=d.length;for(var h,q=!1;0<=--m&&!(((h=this.__children[m].__getInteractive(null))||this.mouseEnabled&&!q)&&this.__children[m].__hitTest(a,b,c,d,!0,this.__children[m])&&(q=!0,h)););if(q)return d.splice(e,0,f),!0}}else for(;0<=
--m;)this.__children[m].__hitTest(a,b,c,d,!1,this.__children[m]);return!1},__hitTestMask:function(a,b){for(var c=this.__children.length;0<=--c;)if(this.__children[c].__hitTestMask(a,b))return!0;return!1},__renderCanvas:function(a){if(!(!this.__renderable||0>=this.__worldAlpha||null!=this.get_mask()&&(0>=this.get_mask().get_width()||0>=this.get_mask().get_height()))&&(la.prototype.__renderCanvas.call(this,a),null==this.__cacheBitmap||this.__cacheBitmapRender)){a.maskManager.pushObject(this);if(a.clearRenderDirty){for(var b=
0,c=this.__children;b<c.length;){var d=c[b];++b;d.__renderCanvas(a);d.__renderDirty=!1}this.__renderDirty=!1}else for(b=0,c=this.__children;b<c.length;)d=c[b],++b,d.__renderCanvas(a);b=0;for(c=this.__removedChildren;b<c.data.get_length();)d=c.data.get(b),++b,null==d.stage&&d.__cleanup();this.__removedChildren.data.set_length(0);a.maskManager.popObject(this)}},__renderCanvasMask:function(a){null!=this.__graphics&&p.renderMask(this.__graphics,a);var b=X.__pool.get();this.__getLocalBounds(b);a.context.rect(0,
0,b.width,b.height);X.__pool.release(b)},__renderDOM:function(a){la.prototype.__renderDOM.call(this,a);if(null==this.__cacheBitmap||this.__cacheBitmapRender){a.maskManager.pushObject(this);if(a.clearRenderDirty){for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__renderDOM(a);d.__renderDirty=!1}this.__renderDirty=!1}else for(b=0,c=this.__children;b<c.length;)d=c[b],++b,d.__renderDOM(a);b=0;for(c=this.__removedChildren;b<c.data.get_length();)d=c.data.get(b),++b,null==d.stage&&d.__renderDOM(a);
this.__removedChildren.data.set_length(0);a.maskManager.popObject(this)}},__renderDOMClear:function(a){for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__renderDOMClear(a)}b=0;for(c=this.__removedChildren;b<c.data.get_length();)d=c.data.get(b),++b,null==d.stage&&d.__renderDOMClear(a)},__renderGL:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)&&(la.prototype.__renderGL.call(this,a),null==this.__cacheBitmap||this.__cacheBitmapRender)){a.maskManager.pushObject(this);a.filterManager.pushObject(this);
if(a.clearRenderDirty){for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__renderGL(a);d.__renderDirty=!1}this.__renderDirty=!1}else for(b=0,c=this.__children;b<c.length;)d=c[b],++b,d.__renderGL(a);b=0;for(c=this.__removedChildren;b<c.data.get_length();)d=c.data.get(b),++b,null==d.stage&&d.__cleanup();this.__removedChildren.data.set_length(0);a.filterManager.popObject(this);a.maskManager.popObject(this)}},__setStageReference:function(a){la.prototype.__setStageReference.call(this,a);if(null!=
this.__children)for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__setStageReference(a)}},__setWorldTransformInvalid:function(){if(!this.__worldTransformInvalid&&(this.__worldTransformInvalid=!0,null!=this.__children))for(var a=0,b=this.__children;a<b.length;){var c=b[a];++a;c.__setWorldTransformInvalid()}},__update:function(a,b,c){la.prototype.__update.call(this,a,b,c);if(b){b=0;for(var d=this.__children;b<d.length;){var e=d[b];++b;e.__update(a,!0,c)}}},__updateChildren:function(a){la.prototype.__updateChildren.call(this,
a);for(var b=0,c=this.__children;b<c.length;){var d=c[b];++b;d.__update(a,!0)}},get_numChildren:function(){return this.__children.length},__class__:Fb,__properties__:w(la.prototype.__properties__,{get_numChildren:"get_numChildren"})});var ia=function(){Fb.call(this);this.buttonMode=!1;this.useHandCursor=!0};k["openfl.display.Sprite"]=ia;ia.__name__=["openfl","display","Sprite"];ia.__super__=Fb;ia.prototype=w(Fb.prototype,{buttonMode:null,dropTarget:null,hitArea:null,useHandCursor:null,__getCursor:function(){return this.buttonMode&&
this.useHandCursor?T.POINTER:null},__hitTest:function(a,b,c,d,e,f){if(!f.get_visible()||this.__isMask||e&&!this.mouseEnabled&&!this.mouseChildren||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return this.__hitTestHitArea(a,b,c,d,e,f);if(null!=this.__scrollRect){var m=za.__pool.get();m.setTo(a,b);this.__getRenderTransform().__transformInversePoint(m);if(!this.__scrollRect.containsPoint(m))return za.__pool.release(m),this.__hitTestHitArea(a,b,c,d,!0,f);za.__pool.release(m)}return Fb.prototype.__hitTest.call(this,
a,b,c,d,e,f)?e:null!=this.hitArea||e&&!this.mouseEnabled||null==this.__graphics||!this.__graphics.__hitTest(a,b,c,this.__getRenderTransform())?this.__hitTestHitArea(a,b,c,d,e,f):(null!=d&&d.push(f),!0)},__hitTestHitArea:function(a,b,c,d,e,f){return null==this.hitArea||this.hitArea.mouseEnabled?!1:(this.hitArea.mouseEnabled=!0,a=this.hitArea.__hitTest(a,b,c,null,!0,f),this.hitArea.mouseEnabled=!1,a&&(d[d.length]=f),a)},__hitTestMask:function(a,b){return Fb.prototype.__hitTestMask.call(this,a,b)||null!=
this.__graphics&&this.__graphics.__hitTest(a,b,!0,this.__getRenderTransform())?!0:!1},get_graphics:function(){null==this.__graphics&&(this.__graphics=new Sf(this));return this.__graphics},get_tabEnabled:function(){return null==this.__tabEnabled?this.buttonMode:this.__tabEnabled},__class__:ia,__properties__:w(Fb.prototype.__properties__,{get_graphics:"get_graphics"})});var de=function(){this.gravity=new v(0,500);ia.call(this);this.addEventListener("addedToStage",l(this,this.added))};k.Main=de;de.__name__=
["Main"];de.main=function(){ka.trace("main",{fileName:"Main.hx",lineNumber:152,className:"Main",methodName:"main"});H.current.stage.align=6;H.current.stage.scaleMode=2;H.current.addChild(new de)};de.__super__=ia;de.prototype=w(ia.prototype,{inited:null,menu:null,space:null,gravity:null,resize:function(a){this.inited||this.init()},init:function(){this.inited||(this.inited=!0,B.init(),B.play("SoundGameMusic"),g.init(H.current.stage,u["int"](H.current.stage.stageWidth),u["int"](H.current.stage.stageHeight),
u["int"](H.current.stage.get_frameRate())),window.resume=g.resumeGame,this.space=new Mg(this.gravity),g.setSpace(this.space),g.theGame=new ia,g.theMenu=new ia,g.theMenu.set_alpha(1),g.theGame.set_alpha(.01),this.menu=new Ng(this,1),g.theMenu=this.menu,g.curSprite=this.menu,this.checkScaling(),H.current.stage.addChild(g.theGame),H.current.stage.addChild(this.menu))},checkScaling:function(){g.setXY(u["int"](H.current.stage.stageWidth),u["int"](H.current.stage.stageHeight));g.resizeGame();g.resizeStage(g.curSprite);
g.offsetPage();H.trace("windows displayed")},added:function(a){this.removeEventListener("addedToStage",l(this,this.added));this.stage.addEventListener("resize",l(this,this.resize));this.init()},__class__:de});var xi=function(a){a.addChild(this);de.call(this);this.dispatchEvent(new R("addedToStage",!1,!1))};k.DocumentClass=xi;xi.__name__=["DocumentClass"];xi.__super__=de;xi.prototype=w(de.prototype,{__class__:xi});var ee=function(a,b){null==b&&(b="k");null==a&&(a="GreenButton");this.hitPoints=0;this.sw=
"none";this.animB=this.glowB=this.button=null;this.colorB="none";ia.call(this);this.colorB=a;this.sw=b;switch(this.colorB){case "BlueButton":this.animB=g.initAnimation("blueLightB","ui",!0);this.animB.showBehavior("on");this.addChild(this.animB);a=this.animB;a.set_y(a.get_y());this.glowB=g.initAnimation("lightBlue","ui",!0);this.glowB.showBehavior("enable");a=this.glowB;a.set_y(a.get_y()-21);this.addChild(this.glowB);break;case "GreenButton":this.animB=g.initAnimation("greenLightB","ui",!0);this.animB.showBehavior("off");
a=this.animB;a.set_y(a.get_y());this.addChild(this.animB);this.glowB=g.initAnimation("lightGreen","ui",!0);this.glowB.showBehavior("enable");a=this.glowB;a.set_y(a.get_y()-21);this.addChild(this.glowB);break;case "OrangeButton":this.animB=g.initAnimation("orangeLightB","ui",!0),this.animB.showBehavior("on"),this.addChild(this.animB),a=this.animB,a.set_y(a.get_y()),this.glowB=g.initAnimation("lightOrange","ui",!0),this.glowB.showBehavior("enable"),a=this.glowB,a.set_y(a.get_y()-21),this.addChild(this.glowB)}a=
this.button=g.initSpriteUI("cbutton");a.set_y(a.get_y()+7);this.addChild(this.button)};k.CButton=ee;ee.__name__=["CButton"];ee.__super__=ia;ee.prototype=w(ia.prototype,{colorB:null,animB:null,glowB:null,button:null,sw:null,hitPoints:null,__class__:ee});var yi=function(a,b,c){this.lastTime=this.cLevel=this.star=0;this._parent=null;ia.call(this);this._parent=a;this.cLevel=b;this.star=c;g.previousLevel=null;this.init()};k.CompletedGameState=yi;yi.__name__=["CompletedGameState"];yi.__super__=ia;yi.prototype=
w(ia.prototype,{mainBackGround:null,menu:null,_parent:null,lastTime:null,cLevel:null,star:null,init:function(){this._parent.addEventListener("enterFrame",l(this,this.onEnterFrame));var a=this.mainBackGround=g.initSpriteUI("gameCompleted");a.set_x(a.get_x()+(this.mainBackGround.get_width()/2-89));this.mainBackGround.set_y(this.mainBackGround.get_height()/2);g.theGame.addChild(this.mainBackGround);this.menu=g.initAnimation("back","ui");g.theGame.addChild(this.menu);this.menu.showBehavior("out");this.menu.buttonMode=
!0;this.menu.addEventListener("mouseOver",l(this,this.overMouse));this.menu.addEventListener("mouseOut",l(this,this.outMouse));this.menu.addEventListener("mouseDown",l(this,this.goToMenu));this.menu.set_x(50);this.menu.set_y(444);this.menu.set_scaleX(1);this.menu.set_scaleY(1)},clearState:function(){g.theGame.removeEventListener("enterFrame",l(this,this.onEnterFrame));g.clear();for(g.previousLevel=this;0<g.theGame.get_numChildren();)g.theGame.removeChildAt(0);Ja.reset()},overMouse:function(a){n.__cast(a.currentTarget,
A).showBehavior("out");ka.trace("overMouse",{fileName:"CompletedGameState.hx",lineNumber:138,className:"CompletedGameState",methodName:"overMouse"})},outMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("over");ka.trace("outMouse",{fileName:"CompletedGameState.hx",lineNumber:143,className:"CompletedGameState",methodName:"outMouse"})},goToMenu:function(a){this.clearState();g.clear();a=new hf(this._parent);g.curSprite=a;g.blackScreenTween(a);g.resizeGame();g.resizeStage(g.curSprite);g.offsetPage();
H.trace("windows displayed")},onEnterFrame:function(a){a=H.getTimer()-this.lastTime;this.menu.update(a);this.mainBackGround.update(a);this.lastTime=H.getTimer()},__class__:yi});var Og=D.CompletedState=function(a,b,c){this.score=0;this.stars=null;this.scoreArray=[null,null,null,null];this.lastTime=this.cLevel=0;this._parent=null;ia.call(this);this.cLevel=b;this._parent=a;g.previousLevel=null;this.score=c;this.init()};k.CompletedState=Og;Og.__name__=["CompletedState"];Og.__super__=ia;Og.prototype=w(ia.prototype,
{mainBackGround:null,mainBackGround2:null,mainBackGround3:null,next:null,menu:null,restart:null,_parent:null,lastTime:null,cLevel:null,scoreArray:null,stars:null,score:null,init:function(){var a=this.mainBackGround2=g.initSpriteUI("menu");a.set_x(a.get_x()+(this.mainBackGround2.get_width()/2-200));a=this.mainBackGround2;a.set_y(a.get_y()+this.mainBackGround2.get_height()/2);this.mainBackGround2.set_cacheAsBitmap(!0);g.theGame.addChild(this.mainBackGround2);this._parent.addEventListener("enterFrame",
l(this,this.onEnterFrame));a=this.mainBackGround=30!=g.currentLevel?g.initSpriteUI("levelCompleted"):g.initSpriteUI("gameCompleted");a.set_x(a.get_x()+(this.mainBackGround.get_width()/2-89));this.mainBackGround.set_y(this.mainBackGround.get_height()/2);this.mainBackGround.smoothing=!0;this.mainBackGround.set_cacheAsBitmap(!0);g.theGame.addChild(this.mainBackGround);this.stars=g.initAnimation("star","ui");this.stars.showBehavior(u.string(g.starCounter));this.stars.set_x(330);this.stars.set_y(260);
this.stars.set_scaleX(1);this.stars.set_scaleY(1);this.stars.mouseEnabled=!1;g.theGame.addChild(this.stars);for(a=0;4>a;){var b=a++;this.scoreArray[b]=g.initAnimation("digit","ui");this.scoreArray[b].set_x(293+26*b);this.scoreArray[b].set_y(202);this.scoreArray[b].set_scaleX(.7);this.scoreArray[b].set_scaleY(.7);this.scoreArray[b].mouseEnabled=!1;this.scoreArray[b].showBehavior("0");g.theGame.addChild(this.scoreArray[b])}this.showScores(this.scoreArray,this.score);this.next=30!=g.currentLevel?g.initAnimation("next",
"ui"):g.initAnimation("back","ui");g.theGame.addChild(this.next);this.next.showBehavior("out");this.next.buttonMode=!0;this.next.addEventListener("mouseOver",l(this,this.overMouse));this.next.addEventListener("mouseOut",l(this,this.outMouse));30!=g.currentLevel?this.next.addEventListener("mouseDown",l(this,this.goToNext)):this.next.addEventListener("mouseDown",l(this,this.goToMenuBefore));this.next.set_x(503);this.next.set_y(377);this.menu=g.initAnimation("lmenu","ui");g.theGame.addChild(this.menu);
this.menu.showBehavior("out");this.menu.buttonMode=!0;this.menu.addEventListener("mouseOver",l(this,this.overMouse));this.menu.addEventListener("mouseOut",l(this,this.outMouse));this.menu.addEventListener("mouseDown",l(this,this.goToMenuBefore));this.menu.set_x(342);this.menu.set_y(445);this.restart=g.initAnimation("replay","ui");g.theGame.addChild(this.restart);this.restart.showBehavior("out");this.restart.buttonMode=!0;this.restart.addEventListener("mouseOver",l(this,this.overMouse));this.restart.addEventListener("mouseOut",
l(this,this.outMouse));this.restart.addEventListener("mouseDown",l(this,this.goToRestartBefore));this.restart.set_x(188);this.restart.set_y(377);H.current.stage.addEventListener("keyDown",l(this,this.checkKey))},checkKey:function(a){32==a.keyCode&&this.goToNext(null)},showScores:function(a,b){var c=null==b?"null":""+b;var d=0<c.length?u.parseInt(P.substr(c,c.length-1,1)):0;var e=1<c.length?u.parseInt(P.substr(c,c.length-2,1)):0;b=2<c.length?u.parseInt(P.substr(c,c.length-3,1)):0;c=3<c.length?u.parseInt(P.substr(c,
c.length-4,1)):0;if(0>d||9<d)d=0;if(0>e||9<e)e=0;if(0>b||9<b)b=0;if(0>c||9<c)c=0;a[0].showBehavior(null==c?"null":""+c);a[0].update(1);a[1].showBehavior(null==b?"null":""+b);a[1].update(1);a[2].showBehavior(null==e?"null":""+e);a[2].update(1);a[3].showBehavior(null==d?"null":""+d);a[3].update(1);ka.trace([c,b,e,d],{fileName:"CompletedState.hx",lineNumber:272,className:"CompletedState",methodName:"showScores"});return[c,b,e,d]},goToNext:function(a){H.current.stage.removeEventListener("keyDown",l(this,
this.checkKey));g.showInterstital("df");a=this.mainBackGround3=g.initSpriteUI("menu");a.set_x(a.get_x()+this.mainBackGround3.get_width()/2);a=this.mainBackGround3;a.set_y(a.get_y()+this.mainBackGround3.get_height()/2);this.mainBackGround3.set_cacheAsBitmap(!0);g.theGame.addChild(this.mainBackGround3)},afterAdsNext:function(){this.clearState();null!=this.mainBackGround3&&g.theGame.removeChild(this.mainBackGround3);var a=new od(this._parent,this.cLevel+1);g.resizeGame();g.resizeStage(g.theGame);g.theGame.addChild(a);
g.blackScreenTween(a);g.offsetPage();H.trace("windows displayed")},clearState:function(){g.theGame.removeEventListener("enterFrame",l(this,this.onEnterFrame));this.removeEventListener("enterFrame",l(this,this.onEnterFrame));Ja.reset();g.clear();for(g.previousLevel=this;0<g.theGame.get_numChildren();)g.theGame.removeChildAt(0)},afterAdsRestart:function(){this.clearState();null!=this.mainBackGround3&&g.theGame.removeChild(this.mainBackGround3);var a=new od(this._parent,this.cLevel);g.resizeGame();g.resizeStage(g.theGame);
g.offsetPage();H.trace("windows displayed");g.theGame.addChild(a);g.blackScreenTween(a)},goToRestartBefore:function(a){H.current.stage.removeEventListener("keyDown",l(this,this.checkKey));g.showInterstital("restart")},goToRestart:function(a){this.afterAdsRestart()},overMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("over");ka.trace("overMouse",{fileName:"CompletedState.hx",lineNumber:442,className:"CompletedState",methodName:"overMouse"})},outMouse:function(a){n.__cast(a.currentTarget,
A).showBehavior("out");ka.trace("outMouse",{fileName:"CompletedState.hx",lineNumber:447,className:"CompletedState",methodName:"outMouse"})},goToMenuBefore:function(a){H.current.stage.removeEventListener("keyDown",l(this,this.checkKey));g.showInterstital("levels")},goToMenu:function(a){this.clearState();g.clear();a=new hf(this._parent);g.curSprite=a;g.blackScreenTween(a);g.resizeGame();g.resizeStage(g.curSprite);g.offsetPage();H.trace("windows displayed")},onEnterFrame:function(a){a=H.getTimer()-this.lastTime;
this.restart.update(a);this.menu.update(a);this.next.update(a);this.mainBackGround.update(a);this.lastTime=H.getTimer()},__class__:Og});var ma=function(a,b){this.r=new RegExp(a,b.split("u").join(""))};k.EReg=ma;ma.__name__=["EReg"];ma.prototype={r:null,match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new K("EReg::matched");},matchedRight:function(){if(null==
this.r.m)throw new K("No string matched");var a=this.r.m.index+this.r.m[0].length;return P.substr(this.r.s,a,this.r.s.length-a)},matchedPos:function(){if(null==this.r.m)throw new K("No string matched");return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(a,b,c){null==c&&(c=-1);if(this.r.global){this.r.lastIndex=b;var d=this.r;b=0>c?a:P.substr(a,0,b+c);this.r.m=d.exec(b);if(b=null!=this.r.m)this.r.s=a;return b}if(d=this.match(0>c?P.substr(a,b,null):P.substr(a,b,c)))this.r.s=a,this.r.m.index+=
b;return d},split:function(a){return a.replace(this.r,"#__delim__#").split("#__delim__#")},replace:function(a,b){return a.replace(this.r,b)},__class__:ma};var zi=function(a,b){this.lastTime=this.cLevel=0;this._parent=null;ia.call(this);this.cLevel=b;this._parent=a;g.previousLevel=null;this.init()};k.FailedState=zi;zi.__name__=["FailedState"];zi.__super__=ia;zi.prototype=w(ia.prototype,{mainBackGround:null,restart:null,_parent:null,lastTime:null,cLevel:null,init:function(){this._parent.addEventListener("enterFrame",
l(this,this.onEnterFrame));this.mainBackGround=new Ia(Na.getBitmapData("img/ui/failedState.png"));this.mainBackGround.smoothing=!0;this.mainBackGround.set_cacheAsBitmap(!0);this.mainBackGround.set_x(0);this.mainBackGround.set_y(0);g.theGame.addChild(this.mainBackGround);this.restart=g.initAnimation("restartMaxi","ui");g.theGame.addChild(this.restart);this.restart.showBehavior("out");this.restart.buttonMode=!0;this.restart.addEventListener("mouseOver",l(this,this.overMouse));this.restart.addEventListener("mouseOut",
l(this,this.outMouse));this.restart.addEventListener("mouseDown",l(this,this.goToRestart));this.restart.set_x(450);this.restart.set_y(260);this.restart.set_scaleX(.9);this.restart.set_scaleY(.9)},clearState:function(){g.theGame.removeEventListener("enterFrame",l(this,this.onEnterFrame));this.removeEventListener("enterFrame",l(this,this.onEnterFrame));Ja.reset();g.clear();for(g.previousLevel=this;0<g.theGame.get_numChildren();)g.theGame.removeChildAt(0)},goToRestart:function(a){this.clearState();a=
new od(this._parent,this.cLevel);g.resizeGame();g.resizeStage(g.theGame);g.offsetPage();H.trace("windows displayed");g.theGame.addChild(a);g.blackScreenTween(a)},overMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("out");ka.trace("overMouse",{fileName:"FailedState.hx",lineNumber:252,className:"FailedState",methodName:"overMouse"})},outMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("over");ka.trace("outMouse",{fileName:"FailedState.hx",lineNumber:257,className:"FailedState",
methodName:"outMouse"})},onEnterFrame:function(a){a=H.getTimer()-this.lastTime;this.restart.update(a);this.lastTime=H.getTimer()},__class__:zi});var rk=function(a,b,c,d){this.fadeTimer=new ec(50,0);this.fractionId=d;this.fractionBody=new da(Aa.get_DYNAMIC(),a);this.fractionPolygon=new Za(b,new Oa(.1,7.2,7.2,5.2),new Qa(4,-1));this.fractionPolygon.validity()==Xa.get_VALID()?(this.fractionBody.get_shapes().add(this.fractionPolygon),a=this.fractionBody.get_localCOM().mul(-1),this.fractionBody.align(),
this.fractionBody.graphic=c,this.fractionBody.graphicOffset=a,this.fractionBody.graphic.set_x(0),this.fractionBody.graphic.set_y(0),this.fadeTimer.addEventListener("timer",l(this,this.fadeFractions))):this.fractionBody=null};k.Fraction=rk;rk.__name__=["Fraction"];rk.prototype={fractionBody:null,fractionPolygon:null,fractionId:null,fadeTimer:null,fadeFractions:function(a){a=n.__cast(this.fractionBody.graphic,ia);a.set_alpha(a.get_alpha()-.1);0>=n.__cast(this.fractionBody.graphic,ia).get_alpha()&&(this.fadeTimer.stop(),
g.theGame.removeChild(this.fractionBody.graphic),g.space.get_bodies().remove(this.fractionBody),this.fractionBody=null)},__class__:rk};var Ai=function(){this.sparksTimer=new ec(7E3,0);this.sparksTimer.addEventListener("timer",l(this,this.sparksGo))};k.GameTransformator=Ai;Ai.__name__=["GameTransformator"];Ai.prototype={sparksTimer:null,transSwitch:null,transBroken:null,transGraphic:null,sparksGo:function(a){},__class__:Ai};var Bi=function(){this.counter=0;this.going=!1;this.boxSum=0;this.truckGo=
new ec(50,0);this.truckGo.addEventListener("timer",l(this,this.goTruck))};k.GameTruck=Bi;Bi.__name__=["GameTruck"];Bi.prototype={truckBody:null,leftWheelTruck:null,rightWheelTruck:null,cargo:null,truckGo:null,boxCount:null,boxSum:null,cargoLoad:null,going:null,counter:null,stopSignal:null,goTruck:function(a){a=this.rightWheelTruck;a.set_angularVel(a.get_angularVel()+2);ka.trace("going here",{fileName:"GameTruck.hx",lineNumber:44,className:"GameTruck",methodName:"goTruck"});this.going=!0;14<this.rightWheelTruck.get_angularVel()&&
this.truckGo.stop()},__class__:Bi};var P=function(){};k.HxOverrides=P;P.__name__=["HxOverrides"];P.strDate=function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw new K("Invalid date format : "+a);}};P.cca=function(a,b){a=
a.charCodeAt(b);return a!=a?Ci.get_undefined():a};P.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};P.remove=function(a,b){b=a.indexOf(b);if(-1==b)return!1;a.splice(b,1);return!0};P.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var hf=function(a,b){null==b&&(b=!1);this.scoreArray=[null,null,null,null];this.total=null;this.timerBeforeStartUI=new ec(300,
1);this.iconArray=[];this.firstB=!1;this.lastTime=0;this._parent=null;ia.call(this);this._parent=a;this.firstB=b;g.iconsState=this;a=this.mainBackGround=g.initSpriteUI("bg");a.set_x(a.get_x()+(this.mainBackGround.get_width()/2-89));a=this.mainBackGround;a.set_y(a.get_y()+this.mainBackGround.get_height()/2);this.mainBackGround.smoothing=!0;this.mainBackGround.set_cacheAsBitmap(!0);g.theGame.addChild(this.mainBackGround);this.timerBeforeStartUI.start();this.timerBeforeStartUI.addEventListener("timerComplete",
l(this,this.init));1==g.isAppleCheck&&(M.get_window().addEventListener("orientationchange",l(this,this.onOrientationChange)),Ja.timer(1).onComplete(l(this,this.fixSafariMobile)))};k.IconsState=hf;hf.__name__=["IconsState"];hf.__super__=ia;hf.prototype=w(ia.prototype,{mainBackGround:null,icon:null,starIcon:null,_parent:null,lastTime:null,firstB:null,iconArray:null,timerBeforeStartUI:null,total:null,scoreArray:null,onOrientationChange:function(){if(-90==M.get_window().orientation||90==M.get_window().orientation)Ja.timer(1).onComplete(l(this,
this.fixSafariMobile))},fixSafariMobile:function(){this.resizeStage(null);M.get_document().body.scrollIntoView();var a=u.string(M.get_window().innerHeight);M.get_document().body.style.height=a+"px"},init:function(a){ka.trace("init icon",{fileName:"IconsState.hx",lineNumber:118,className:"IconsState",methodName:"init"});this.addEventListener("enterFrame",l(this,this.onEnterFrame));for(a=0;3>a;)for(var b=a++,c=0;10>c;){var d=c++;this.icon=g.initAnimation("LevelBtn","ui");this.icon.showBehavior("out");
this.iconArray.push(this.icon);var e=g.initAnimation("levelNumbers","ui");e.showBehavior(u.string(10*b+d));e.update(1);this.starIcon=g.initAnimation("star","ui");this.starIcon.showBehavior(u.string(g.starArray[10*b+d]));this.starIcon.set_scaleX(.7);this.starIcon.set_scaleY(.7);this.starIcon.mouseEnabled=!1;this.starIcon.update(1);e.set_x(0);e.set_y(0);e.mouseEnabled=!1;this.icon.addChild(e);0==g.levelStateArray[10*b+d]?(this.icon.showBehavior("over"),this.icon.buttonMode=!1):(this.icon.showBehavior("out"),
this.icon.addEventListener("mouseOver",l(this,this.overMouse)),this.icon.addEventListener("mouseOut",l(this,this.outMouse)),this.icon.addEventListener("mouseDown",l(this,this.goToIconBefore)),this.icon.buttonMode=!0);this.icon.set_scaleX(1);this.icon.set_scaleY(1);this.icon.set_name(u.string(10*b+d+1));this.icon.set_x(40+68*d);this.icon.set_y(124+104*b);this.starIcon.set_x(40+68*d);this.starIcon.set_y(86+104*b);g.theGame.addChild(this.icon);g.theGame.addChild(this.starIcon)}this.total=g.initSpriteUI("total");
this.total.set_x(170);this.total.set_y(40);g.theGame.addChild(this.total);for(a=0;4>a;)b=a++,this.scoreArray[b]=g.initAnimation("digit","ui"),this.scoreArray[b].set_x(360+36*b),this.scoreArray[b].set_y(35),this.scoreArray[b].set_scaleX(.75),this.scoreArray[b].set_scaleY(.75),this.scoreArray[b].showBehavior("0"),g.theGame.addChild(this.scoreArray[b]);b=a=0;for(c=g.scoresArray.length;b<c;)d=b++,a+=g.scoresArray[d];this.showScores(this.scoreArray,a);this.removeEventListener("resize",l(this,this.resizeStage));
this.addEventListener("resize",l(this,this.resizeStage));g.blackScreenTween(this._parent);if(1==this.firstB){ka.trace("open it",{fileName:"IconsState.hx",lineNumber:296,className:"IconsState",methodName:"init"});for(b=a=0;29>b;)c=b++,0!=g.levelStateArray[c]&&(a=c);g.currentIcon=a+1;g.showInterstital("icons")}},showScores:function(a,b){var c=null==b?"null":""+b;var d=0<c.length?u.parseInt(P.substr(c,c.length-1,1)):0;var e=1<c.length?u.parseInt(P.substr(c,c.length-2,1)):0;b=2<c.length?u.parseInt(P.substr(c,
c.length-3,1)):0;c=3<c.length?u.parseInt(P.substr(c,c.length-4,1)):0;a[0].showBehavior(null==c?"null":""+c);a[0].update(1);a[1].showBehavior(null==b?"null":""+b);a[1].update(1);a[2].showBehavior(null==e?"null":""+e);a[2].update(1);a[3].showBehavior(null==d?"null":""+d);a[3].update(1);ka.trace([c,b,e,d],{fileName:"IconsState.hx",lineNumber:362,className:"IconsState",methodName:"showScores"});return[c,b,e,d]},resizeStage:function(a){g.setXY(u["int"](H.current.stage.stageWidth),u["int"](H.current.stage.stageHeight));
g.resizeGame();g.resizeStage(g.curSprite);g.offsetPage();H.trace("windows displayed")},goToIconBefore:function(a){g.currentIcon=u.parseInt(n.__cast(a.currentTarget,A).get_name());g.showInterstital("icons")},goToIcon:function(a){ka.trace("before clear",{fileName:"IconsState.hx",lineNumber:393,className:"IconsState",methodName:"goToIcon"});this.clearState();a=new od(this._parent,g.currentIcon);ka.trace("after clear",{fileName:"IconsState.hx",lineNumber:398,className:"IconsState",methodName:"goToIcon"});
this.removeEventListener("enterFrame",l(this,this.onEnterFrame));g.blackScreenTween(a);g.resizeGame();g.resizeStage(g.theGame);g.offsetPage();H.trace("windows displayed");g.theGame.addChild(a)},clearState:function(){g.theGame.removeEventListener("enterFrame",l(this,this.onEnterFrame));this.removeEventListener("enterFrame",l(this,this.onEnterFrame));Ja.reset();g.clear();for(g.previousLevel=this;0<g.theGame.get_numChildren();){var a=g.theGame.getChildAt(0);g.theGame.removeChild(a);u.is(a,Ia)&&n.__cast(a,
Ia).bitmapData.dispose()}},overMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("over");ka.trace("overMouse",{fileName:"IconsState.hx",lineNumber:523,className:"IconsState",methodName:"overMouse"})},outMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("out");ka.trace("outMouse",{fileName:"IconsState.hx",lineNumber:528,className:"IconsState",methodName:"outMouse"})},onEnterFrame:function(a){a=H.getTimer()-this.lastTime;this.mainBackGround.update(a);for(var b=0,c=this.iconArray.length;b<
c;){var d=b++;this.iconArray[d].update(a)}this.lastTime=H.getTimer()},__class__:hf});var ui=function(a,b){this.item=a;this.next=b};k["_List.ListNode"]=ui;ui.__name__=["_List","ListNode"];ui.prototype={item:null,next:null,__class__:ui};var vi=function(a){this.head=a};k["_List.ListIterator"]=vi;vi.__name__=["_List","ListIterator"];vi.prototype={head:null,hasNext:function(){return null!=this.head},next:function(){var a=this.head.item;this.head=this.head.next;return a},__class__:vi};var Md=function(){};
k.ManifestResources=Md;Md.__name__=["ManifestResources"];Md.init=function(a){Md.preloadLibraries=[];Md.preloadLibraryNames=[];var b=null;null!=a&&C.hasField(a,"rootPath")&&(b=C.field(a,"rootPath"));null==b&&(b="");aa.defaultRootPath=b;a=Ua.parse('{"name":null,"assets":"aoy4:pathy20:img%2Fplay%2Fba1.pngy4:sizei191757y4:typey5:IMAGEy2:idR1y7:preloadtgoR0y21:img%2Fplay%2Fba10.pngR2i161392R3R4R5R7R6tgoR0y21:img%2Fplay%2Fba11.pngR2i174905R3R4R5R8R6tgoR0y21:img%2Fplay%2Fba12.pngR2i188041R3R4R5R9R6tgoR0y21:img%2Fplay%2Fba13.pngR2i190475R3R4R5R10R6tgoR0y21:img%2Fplay%2Fba14.pngR2i142664R3R4R5R11R6tgoR0y21:img%2Fplay%2Fba15.pngR2i168772R3R4R5R12R6tgoR0y21:img%2Fplay%2Fba16.pngR2i162699R3R4R5R13R6tgoR0y21:img%2Fplay%2Fba17.pngR2i161521R3R4R5R14R6tgoR0y21:img%2Fplay%2Fba18.pngR2i205512R3R4R5R15R6tgoR0y21:img%2Fplay%2Fba19.pngR2i172511R3R4R5R16R6tgoR0y20:img%2Fplay%2Fba2.pngR2i129648R3R4R5R17R6tgoR0y21:img%2Fplay%2Fba20.pngR2i140690R3R4R5R18R6tgoR0y21:img%2Fplay%2Fba21.pngR2i150987R3R4R5R19R6tgoR0y21:img%2Fplay%2Fba22.pngR2i144597R3R4R5R20R6tgoR0y21:img%2Fplay%2Fba23.pngR2i124611R3R4R5R21R6tgoR0y21:img%2Fplay%2Fba24.pngR2i160592R3R4R5R22R6tgoR0y21:img%2Fplay%2Fba25.pngR2i171177R3R4R5R23R6tgoR0y21:img%2Fplay%2Fba26.pngR2i165648R3R4R5R24R6tgoR0y21:img%2Fplay%2Fba27.pngR2i118712R3R4R5R25R6tgoR0y21:img%2Fplay%2Fba28.pngR2i216045R3R4R5R26R6tgoR0y21:img%2Fplay%2Fba29.pngR2i193443R3R4R5R27R6tgoR0y20:img%2Fplay%2Fba3.pngR2i206207R3R4R5R28R6tgoR0y21:img%2Fplay%2Fba30.pngR2i198650R3R4R5R29R6tgoR0y20:img%2Fplay%2Fba4.pngR2i152872R3R4R5R30R6tgoR0y20:img%2Fplay%2Fba5.pngR2i159031R3R4R5R31R6tgoR0y20:img%2Fplay%2Fba6.pngR2i139267R3R4R5R32R6tgoR0y20:img%2Fplay%2Fba7.pngR2i174649R3R4R5R33R6tgoR0y20:img%2Fplay%2Fba8.pngR2i146209R3R4R5R34R6tgoR0y20:img%2Fplay%2Fba9.pngR2i177868R3R4R5R35R6tgoR0y18:img%2Fui%2Farm.pngR2i2518R3R4R5R36R6tgoR0y19:img%2Fui%2Farm2.pngR2i5208R3R4R5R37R6tgoR0y19:img%2Fui%2Farm3.pngR2i4846R3R4R5R38R6tgoR0y26:img%2Fui%2FarrowBottom.pngR2i407R3R4R5R39R6tgoR0y25:img%2Fui%2FarrowRight.pngR2i362R3R4R5R40R6tgoR0y20:img%2Fui%2Fback.jsonR2i973R3y4:TEXTR5R41R6tgoR0y28:img%2Fui%2FbackAnimation.pngR2i7984R3R4R5R43R6tgoR0y26:img%2Fui%2FBasketball.jsonR2i575R3R42R5R44R6tgoR0y34:img%2Fui%2FBasketballAnimation.pngR2i2156R3R4R5R45R6tgoR0y17:img%2Fui%2Fbg.pngR2i105469R3R4R5R46R6tgoR0y25:img%2Fui%2FBigBarel1.jsonR2i764R3R42R5R47R6tgoR0y33:img%2Fui%2FBigBarel1Animation.pngR2i6093R3R4R5R48R6tgoR0y22:img%2Fui%2FBigBox.jsonR2i765R3R42R5R49R6tgoR0y30:img%2Fui%2FBigBoxAnimation.pngR2i4743R3R4R5R50R6tgoR0y21:img%2Fui%2Fblades.pngR2i1159R3R4R5R51R6tgoR0y20:img%2Fui%2Fblank.pngR2i83R3R4R5R52R6tgoR0y22:img%2Fui%2Fblinds1.pngR2i18539R3R4R5R53R6tgoR0y22:img%2Fui%2Fblinds2.pngR2i18488R3R4R5R54R6tgoR0y26:img%2Fui%2FblueLightB.jsonR2i4084R3R42R5R55R6tgoR0y34:img%2Fui%2FblueLightBAnimation.pngR2i730R3R4R5R56R6tgoR0y24:img%2Fui%2FboardWall.pngR2i1998R3R4R5R57R6tgoR0y22:img%2Fui%2FBtnGoo.jsonR2i998R3R42R5R58R6tgoR0y30:img%2Fui%2FBtnGooAnimation.pngR2i2331R3R4R5R59R6tgoR0y23:img%2Fui%2FBtnLeft.jsonR2i1002R3R42R5R60R6tgoR0y31:img%2Fui%2FBtnLeftAnimation.pngR2i1918R3R4R5R61R6tgoR0y24:img%2Fui%2FBtnRight.jsonR2i1007R3R42R5R62R6tgoR0y32:img%2Fui%2FBtnRightAnimation.pngR2i1944R3R4R5R63R6tgoR0y21:img%2Fui%2FBtnUp.jsonR2i992R3R42R5R64R6tgoR0y29:img%2Fui%2FBtnUpAnimation.pngR2i1939R3R4R5R65R6tgoR0y20:img%2Fui%2Fcargo.pngR2i10279R3R4R5R66R6tgoR0y22:img%2Fui%2Fcbutton.pngR2i388R3R4R5R67R6tgoR0y21:img%2Fui%2FChain1.pngR2i647R3R4R5R68R6tgoR0y21:img%2Fui%2FChain2.pngR2i626R3R4R5R69R6tgoR0y21:img%2Fui%2FClinch.pngR2i351R3R4R5R70R6tgoR0y34:img%2Fui%2FCollectedStarsPanel.pngR2i769R3R4R5R71R6tgoR0y23:img%2Fui%2Fcooller2.pngR2i2684R3R4R5R72R6tgoR0y26:img%2Fui%2FcoollerMain.pngR2i2620R3R4R5R73R6tgoR0y25:img%2Fui%2FcoollerTop.pngR2i383R3R4R5R74R6tgoR0y25:img%2Fui%2FDangerBox1.pngR2i1548R3R4R5R75R6tgoR0y21:img%2Fui%2Fdigit.jsonR2i2094R3R42R5R76R6tgoR0y29:img%2Fui%2FdigitAnimation.pngR2i8529R3R4R5R77R6tgoR0y27:img%2Fui%2FelevatorBody.pngR2i744R3R4R5R78R6tgoR0y31:img%2Fui%2FelevatorCogwheel.pngR2i738R3R4R5R79R6tgoR0y26:img%2Fui%2FElevatorEnd.pngR2i553R3R4R5R80R6tgoR0y26:img%2Fui%2FelevatorTop.pngR2i237R3R4R5R81R6tgoR0y23:img%2Fui%2FelevLine.pngR2i2455R3R4R5R82R6tgoR0y24:img%2Fui%2FelevLine2.pngR2i2463R3R4R5R83R6tgoR0y24:img%2Fui%2FelevLine3.pngR2i2645R3R4R5R84R6tgoR0y24:img%2Fui%2FelevLine4.pngR2i4947R3R4R5R85R6tgoR0y28:img%2Fui%2FgameCompleted.pngR2i13452R3R4R5R86R6tgoR0y32:img%2Fui%2Fgfx_gameMenuPanel.pngR2i892R3R4R5R87R6tgoR0y27:img%2Fui%2FgreenLightB.jsonR2i4105R3R42R5R88R6tgoR0y35:img%2Fui%2FgreenLightBAnimation.pngR2i904R3R4R5R89R6tgoR0y26:img%2Fui%2FHalfShadow.jsonR2i2189R3R42R5R90R6tgoR0y34:img%2Fui%2FHalfShadowAnimation.pngR2i1415R3R4R5R91R6tgoR0y20:img%2Fui%2Fhint1.pngR2i17783R3R4R5R92R6tgoR0y20:img%2Fui%2Fhint2.pngR2i1322R3R4R5R93R6tgoR0y20:img%2Fui%2Fhint3.pngR2i626R3R4R5R94R6tgoR0y20:img%2Fui%2Fhint4.pngR2i5365R3R4R5R95R6tgoR0y20:img%2Fui%2Fhint5.pngR2i2072R3R4R5R96R6tgoR0y20:img%2Fui%2Fjump2.pngR2i760R3R4R5R97R6tgoR0y17:img%2Fui%2Fl1.pngR2i1356R3R4R5R98R6tgoR0y17:img%2Fui%2Fl2.pngR2i1568R3R4R5R99R6tgoR0y20:img%2Fui%2FLamp.jsonR2i570R3R42R5R100R6tgoR0y28:img%2Fui%2FLampAnimation.pngR2i3671R3R4R5R101R6tgoR0y24:img%2Fui%2Flamp_over.pngR2i249R3R4R5R102R6tgoR0y21:img%2Fui%2FLEVEL.jsonR2i5951R3R42R5R103R6tgoR0y29:img%2Fui%2FLEVELAnimation.pngR2i43695R3R4R5R104R6tgoR0y24:img%2Fui%2FLevelBtn.jsonR2i757R3R42R5R105R6tgoR0y32:img%2Fui%2FLevelBtnAnimation.pngR2i5233R3R4R5R106R6tgoR0y29:img%2Fui%2FlevelCompleted.pngR2i18632R3R4R5R107R6tgoR0y28:img%2Fui%2FlevelNumbers.jsonR2i12112R3R42R5R108R6tgoR0y36:img%2Fui%2FlevelNumbersAnimation.pngR2i10282R3R4R5R109R6tgoR0y22:img%2Fui%2Flevels.jsonR2i795R3R42R5R110R6tgoR0y30:img%2Fui%2FlevelsAnimation.pngR2i10927R3R4R5R111R6tgoR0y25:img%2Fui%2FlightBlue.jsonR2i8058R3R42R5R112R6tgoR0y33:img%2Fui%2FlightBlueAnimation.pngR2i14068R3R4R5R113R6tgoR0y26:img%2Fui%2FlightGreen.jsonR2i8095R3R42R5R114R6tgoR0y34:img%2Fui%2FlightGreenAnimation.pngR2i14039R3R4R5R115R6tgoR0y27:img%2Fui%2FlightOrange.jsonR2i8146R3R42R5R116R6tgoR0y35:img%2Fui%2FlightOrangeAnimation.pngR2i14625R3R4R5R117R6tgoR0y21:img%2Fui%2Flmenu.jsonR2i794R3R42R5R118R6tgoR0y29:img%2Fui%2FlmenuAnimation.pngR2i10927R3R4R5R119R6tgoR0y33:img%2Fui%2FLoad%20the%20truck.pngR2i1691R3R4R5R120R6tgoR0y25:img%2Fui%2FLoaderBody.pngR2i1238R3R4R5R121R6tgoR0y19:img%2Fui%2Flock.pngR2i1313R3R4R5R122R6tgoR0y21:img%2Fui%2FMagnet.pngR2i809R3R4R5R123R6tgoR0y23:img%2Fui%2Fmagnetic.pngR2i125R3R4R5R124R6tgoR0y27:img%2Fui%2FmagneticBeam.pngR2i75R3R4R5R125R6tgoR0y19:img%2Fui%2Fmenu.pngR2i538331R3R4R5R126R6tgoR0y24:img%2Fui%2FmenuMaxi.jsonR2i949R3R42R5R127R6tgoR0y32:img%2Fui%2FmenuMaxiAnimation.pngR2i4020R3R4R5R128R6tgoR0y24:img%2Fui%2FminingImg.pngR2i3358R3R4R5R129R6tgoR0y30:img%2Fui%2FMiningTruckBody.pngR2i1944R3R4R5R130R6tgoR0y31:img%2Fui%2FMiningTruckWheel.pngR2i1065R3R4R5R131R6tgoR0y20:img%2Fui%2FMount.pngR2i563R3R4R5R132R6tgoR0y25:img%2Fui%2FmusicMini.jsonR2i958R3R42R5R133R6tgoR0y33:img%2Fui%2FmusicMiniAnimation.pngR2i2542R3R4R5R134R6tgoR0y24:img%2Fui%2FnearTruck.pngR2i41842R3R4R5R135R6tgoR0y20:img%2Fui%2Fnext.jsonR2i790R3R42R5R136R6tgoR0y28:img%2Fui%2FnextAnimation.pngR2i10354R3R4R5R137R6tgoR0y28:img%2Fui%2ForangeLightB.jsonR2i4126R3R42R5R138R6tgoR0y36:img%2Fui%2ForangeLightBAnimation.pngR2i659R3R4R5R139R6tgoR0y24:img%2Fui%2FoutLight.jsonR2i6033R3R42R5R140R6tgoR0y32:img%2Fui%2FoutLightAnimation.pngR2i15687R3R4R5R141R6tgoR0y20:img%2Fui%2Fplay.jsonR2i787R3R42R5R142R6tgoR0y28:img%2Fui%2FplayAnimation.pngR2i10370R3R4R5R143R6tgoR0y22:img%2Fui%2Freplay.jsonR2i783R3R42R5R144R6tgoR0y30:img%2Fui%2FreplayAnimation.pngR2i9566R3R4R5R145R6tgoR0y19:img%2Fui%2Fresh.pngR2i1765R3R4R5R146R6tgoR0y27:img%2Fui%2FrestartMaxi.jsonR2i980R3R42R5R147R6tgoR0y35:img%2Fui%2FrestartMaxiAnimation.pngR2i2100R3R4R5R148R6tgoR0y34:img%2Fui%2FrightLoaderCogwheel.pngR2i631R3R4R5R149R6tgoR0y18:img%2Fui%2Frob.pngR2i4475R3R4R5R150R6tgoR0y19:img%2Fui%2Frob2.pngR2i2717R3R4R5R151R6tgoR0y22:img%2Fui%2Fscript1.pngR2i5768R3R4R5R152R6tgoR0y21:img%2Fui%2FSeesaw.pngR2i581R3R4R5R153R6tgoR0y22:img%2Fui%2FShadow.jsonR2i2155R3R42R5R154R6tgoR0y30:img%2Fui%2FShadowAnimation.pngR2i832R3R4R5R155R6tgoR0y21:img%2Fui%2Fshrink.pngR2i478R3R4R5R156R6tgoR0y20:img%2Fui%2Fskip.jsonR2i551R3R42R5R157R6tgoR0y28:img%2Fui%2FskipAnimation.pngR2i13888R3R4R5R158R6tgoR0y22:img%2Fui%2FskipNo.jsonR2i551R3R42R5R159R6tgoR0y30:img%2Fui%2FskipNoAnimation.pngR2i12688R3R4R5R160R6tgoR0y25:img%2Fui%2FskipWindow.pngR2i18856R3R4R5R161R6tgoR0y23:img%2Fui%2FskipYes.jsonR2i551R3R42R5R162R6tgoR0y31:img%2Fui%2FskipYesAnimation.pngR2i13578R3R4R5R163R6tgoR0y27:img%2Fui%2FSmallBarel1.jsonR2i764R3R42R5R164R6tgoR0y35:img%2Fui%2FSmallBarel1Animation.pngR2i2876R3R4R5R165R6tgoR0y27:img%2Fui%2FSmallBarel2.jsonR2i764R3R42R5R166R6tgoR0y35:img%2Fui%2FSmallBarel2Animation.pngR2i2876R3R4R5R167R6tgoR0y25:img%2Fui%2FsoundMini.jsonR2i958R3R42R5R168R6tgoR0y33:img%2Fui%2FsoundMiniAnimation.pngR2i2582R3R4R5R169R6tgoR0y26:img%2Fui%2FSquareBox1.jsonR2i770R3R42R5R170R6tgoR0y34:img%2Fui%2FSquareBox1Animation.pngR2i1301R3R4R5R171R6tgoR0y26:img%2Fui%2FSquareBox2.jsonR2i770R3R42R5R172R6tgoR0y34:img%2Fui%2FSquareBox2Animation.pngR2i1146R3R4R5R173R6tgoR0y26:img%2Fui%2FSquareBox3.jsonR2i770R3R42R5R174R6tgoR0y34:img%2Fui%2FSquareBox3Animation.pngR2i732R3R4R5R175R6tgoR0y20:img%2Fui%2Fstar.jsonR2i946R3R42R5R176R6tgoR0y28:img%2Fui%2FstarAnimation.pngR2i2609R3R4R5R177R6tgoR0y20:img%2Fui%2Fstarr.pngR2i425R3R4R5R178R6tgoR0y20:img%2Fui%2FStick.pngR2i524R3R4R5R179R6tgoR0y23:img%2Fui%2FTFXBoom.jsonR2i9597R3R42R5R180R6tgoR0y31:img%2Fui%2FTFXBoomAnimation.pngR2i226087R3R4R5R181R6tgoR0y24:img%2Fui%2FTFXSpark.jsonR2i8937R3R42R5R182R6tgoR0y32:img%2Fui%2FTFXSparkAnimation.pngR2i19049R3R4R5R183R6tgoR0y25:img%2Fui%2FTFXSparkL.jsonR2i8978R3R42R5R184R6tgoR0y33:img%2Fui%2FTFXSparkLAnimation.pngR2i18840R3R4R5R185R6tgoR0y27:img%2Fui%2FThinLongDoor.pngR2i325R3R4R5R186R6tgoR0y28:img%2Fui%2FThinShortDoor.pngR2i283R3R4R5R187R6tgoR0y29:img%2Fui%2FThinShortDoor2.pngR2i516R3R4R5R188R6tgoR0y20:img%2Fui%2Fticon.pngR2i9746R3R4R5R189R6tgoR0y19:img%2Fui%2Ftime.pngR2i2550R3R4R5R190R6tgoR0y20:img%2Fui%2Ftitle.pngR2i48799R3R4R5R191R6tgoR0y24:img%2Fui%2FTO%20JUMP.pngR2i2440R3R4R5R192R6tgoR0y27:img%2Fui%2FTO%20RESTART.pngR2i4068R3R4R5R193R6tgoR0y20:img%2Fui%2Ftotal.pngR2i7996R3R4R5R194R6tgoR0y28:img%2Fui%2FTPFXLighting.jsonR2i7661R3R42R5R195R6tgoR0y36:img%2Fui%2FTPFXLightingAnimation.pngR2i73021R3R4R5R196R6tgoR0y32:img%2Fui%2FTransformerVault.jsonR2i759R3R42R5R197R6tgoR0y40:img%2Fui%2FTransformerVaultAnimation.pngR2i4668R3R4R5R198R6tgoR0y30:img%2Fui%2FTransporterBase.pngR2i2202R3R4R5R199R6tgoR0y30:img%2Fui%2FTransporterRoll.pngR2i1158R3R4R5R200R6tgoR0y25:img%2Fui%2FTruckBody2.pngR2i7538R3R4R5R201R6tgoR0y30:img%2Fui%2FTruckStopSignal.pngR2i717R3R4R5R202R6tgoR0y24:img%2Fui%2FTruckWeel.pngR2i2371R3R4R5R203R6tgoR0y28:img%2Fui%2FVerticalBox1.jsonR2i770R3R42R5R204R6tgoR0y36:img%2Fui%2FVerticalBox1Animation.pngR2i3289R3R4R5R205R6tgoR0y28:img%2Fui%2FVerticalBox2.jsonR2i788R3R42R5R206R6tgoR0y36:img%2Fui%2FVerticalBox2Animation.pngR2i2896R3R4R5R207R6tgoR0y28:img%2Fui%2FVerticalBox3.jsonR2i788R3R42R5R208R6tgoR0y36:img%2Fui%2FVerticalBox3Animation.pngR2i2928R3R4R5R209R6tgoR0y28:img%2Fui%2FVerticalBox4.jsonR2i782R3R42R5R210R6tgoR0y36:img%2Fui%2FVerticalBox4Animation.pngR2i2715R3R4R5R211R6tgoR0y22:img%2Fui%2Fwarning.pngR2i8666R3R4R5R212R6tgoR0y20:img%2Fui%2FWheel.pngR2i1318R3R4R5R213R6tgoR0y26:img%2Fui%2FWheelSensor.pngR2i124R3R4R5R214R6tgoR0y27:img%2Fui%2FWideLongDoor.pngR2i1139R3R4R5R215R6tgoR0y28:img%2Fui%2FWideLongDoor2.pngR2i1713R3R4R5R216R6tgoR0y28:img%2Fui%2FWideShortDoor.pngR2i771R3R4R5R217R6tgoR0y41:json%2Fcommon%2Fgfx_ftc_lvl17_btnGoo.jsonR2i998R3R42R5R218R6tgoR0y49:json%2Fcommon%2Fgfx_ftc_lvl17_btnGooAnimation.pngR2i2210R3R4R5R219R6tgoR0y42:json%2Fcommon%2Fgfx_ftc_lvl17_BtnLeft.jsonR2i1002R3R42R5R220R6tgoR0y50:json%2Fcommon%2Fgfx_ftc_lvl17_BtnLeftAnimation.pngR2i1792R3R4R5R221R6tgoR0y43:json%2Fcommon%2Fgfx_ftc_lvl17_BtnRight.jsonR2i1007R3R42R5R222R6tgoR0y51:json%2Fcommon%2Fgfx_ftc_lvl17_BtnRightAnimation.pngR2i1835R3R4R5R223R6tgoR0y40:json%2Fcommon%2Fgfx_ftc_lvl17_BtnUp.jsonR2i992R3R42R5R224R6tgoR0y48:json%2Fcommon%2Fgfx_ftc_lvl17_BtnUpAnimation.pngR2i1859R3R4R5R225R6tgoR0y20:levels%2Flevel1.jsonR2i10662R3R42R5R226R6tgoR0y21:levels%2Flevel10.jsonR2i15409R3R42R5R227R6tgoR0y21:levels%2Flevel11.jsonR2i16829R3R42R5R228R6tgoR0y21:levels%2Flevel12.jsonR2i12687R3R42R5R229R6tgoR0y21:levels%2Flevel13.jsonR2i13735R3R42R5R230R6tgoR0y21:levels%2Flevel14.jsonR2i17476R3R42R5R231R6tgoR0y21:levels%2Flevel15.jsonR2i15421R3R42R5R232R6tgoR0y21:levels%2Flevel16.jsonR2i14104R3R42R5R233R6tgoR0y21:levels%2Flevel17.jsonR2i13839R3R42R5R234R6tgoR0y21:levels%2Flevel18.jsonR2i14581R3R42R5R235R6tgoR0y21:levels%2Flevel19.jsonR2i16344R3R42R5R236R6tgoR0y20:levels%2Flevel2.jsonR2i10502R3R42R5R237R6tgoR0y21:levels%2Flevel20.jsonR2i15374R3R42R5R238R6tgoR0y21:levels%2Flevel21.jsonR2i17406R3R42R5R239R6tgoR0y21:levels%2Flevel22.jsonR2i12999R3R42R5R240R6tgoR0y21:levels%2Flevel23.jsonR2i16022R3R42R5R241R6tgoR0y21:levels%2Flevel24.jsonR2i12245R3R42R5R242R6tgoR0y21:levels%2Flevel25.jsonR2i19163R3R42R5R243R6tgoR0y21:levels%2Flevel26.jsonR2i17626R3R42R5R244R6tgoR0y21:levels%2Flevel27.jsonR2i18028R3R42R5R245R6tgoR0y21:levels%2Flevel28.jsonR2i17515R3R42R5R246R6tgoR0y21:levels%2Flevel29.jsonR2i19626R3R42R5R247R6tgoR0y20:levels%2Flevel3.jsonR2i11405R3R42R5R248R6tgoR0y21:levels%2Flevel30.jsonR2i17537R3R42R5R249R6tgoR0y20:levels%2Flevel4.jsonR2i10557R3R42R5R250R6tgoR0y20:levels%2Flevel5.jsonR2i13534R3R42R5R251R6tgoR0y20:levels%2Flevel6.jsonR2i14638R3R42R5R252R6tgoR0y20:levels%2Flevel7.jsonR2i18897R3R42R5R253R6tgoR0y20:levels%2Flevel8.jsonR2i12187R3R42R5R254R6tgoR0y20:levels%2Flevel9.jsonR2i17921R3R42R5R255R6tgoR0y19:levels%2Fscore.jsonR2i41R3R42R5R256R6tgoR0y19:loader%2Floader.cssR2i385R3R42R5R257R6tgoR0y18:loader%2Floader.jsR2i2458R3R42R5R258R6tgoR0y20:loader%2Floading.pngR2i277948R3R4R5R259R6tgoR0y21:loader%2Floading.webpR2i71440R3R4R5R260R6tgoR0y24:loader%2Fload_bar_bg.pngR2i5662R3R4R5R261R6tgoR0y24:loader%2Fload_bar_fg.pngR2i10010R3R4R5R262R6tgoR0y28:loader%2Fmodernizr-custom.jsR2i3401R3R42R5R263R6tgh","version":2,"libraryArgs":[],"libraryType":null}',
b);a=Yc.fromManifest(a);aa.registerLibrary("default",a);a=aa.getLibrary("default");null!=a?Md.preloadLibraries.push(a):Md.preloadLibraryNames.push("default")};Math.__name__=["Math"];var Ng=function(a,b){this.timerSplash=new ec(10,1);this._parent=null;this.lastTime=0;ia.call(this);this._parent=a;g.curSprite=this;g.menuState=this;this.preinit()};k.MenuState=Ng;Ng.__name__=["MenuState"];Ng.__super__=ia;Ng.prototype=w(ia.prototype,{mainBackGround:null,splash:null,title:null,play:null,playState:null,lastTime:null,
_parent:null,timerSplash:null,mask1:null,mask2:null,mask3:null,mask4:null,preinit:function(){var a=this.splash=g.initSpriteUI("menu");a.set_x(a.get_x()+this.splash.get_width()/2);a=this.splash;a.set_y(a.get_y()+this.splash.get_height()/2);this.splash.update(1);this.addChild(this.splash);g.checkUrl(["crazygames.com",""])&&(this.timerSplash.addEventListener("timerComplete",l(this,this.init)),this.timerSplash.start())},init:function(a){this.timerSplash.removeEventListener("timerComplete",l(this,this.init));
this.removeEventListener("enterFrame",l(this,this.onEnterFrame));this.addEventListener("enterFrame",l(this,this.onEnterFrame));this.mainBackGround=g.initSpriteUI("bg");ka.trace("mainBackGround.width = "+this.mainBackGround.get_width(),{fileName:"MenuState.hx",lineNumber:106,className:"MenuState",methodName:"init"});ka.trace("mainBackGround.height = "+this.mainBackGround.get_height(),{fileName:"MenuState.hx",lineNumber:107,className:"MenuState",methodName:"init"});a=this.mainBackGround;a.set_x(a.get_x()+
(this.mainBackGround.get_width()/2-89));a=this.mainBackGround;a.set_y(a.get_y()+this.mainBackGround.get_height()/2);g.theMenu.addChild(this.mainBackGround);this.mainBackGround.set_alpha(.8);this.removeChild(this.splash);this.play=g.initAnimation("play","ui");this.play.set_x(350);this.play.set_y(360);this.play.showBehavior("out");this.addChild(this.play);this.play.buttonMode=!0;this.play.addEventListener("mouseDown",l(this,this.goToPlayBefore));this.play.addEventListener("mouseOver",l(this,this.overMouse));
this.play.addEventListener("mouseOut",l(this,this.outMouse));H.current.stage.removeEventListener("resize",l(this,this.resizeStage));H.current.stage.addEventListener("resize",l(this,this.resizeStage));this.title=new Ia(Na.getBitmapData("img/ui/title.png"));this.addChild(this.title);this.title.set_x(230);this.title.set_y(30);this.addMask();ka.trace("afterinit",{fileName:"MenuState.hx",lineNumber:201,className:"MenuState",methodName:"init"})},addMask:function(){if(1==g.maskesAddedM){var a=g.theMenu.getChildByName("mask1"),
b=g.theMenu.getChildByName("mask2"),c=g.theMenu.getChildByName("mask3"),d=g.theMenu.getChildByName("mask4");null!=a&&this.removeChild(n.__cast(a,Ia));null!=b&&this.removeChild(n.__cast(b,Ia));null!=c&&this.removeChild(n.__cast(c,Ia));null!=d&&this.removeChild(n.__cast(c,Ia));g.maskesAddedM=!1}this.mask1=new Ia(Na.getBitmapData("img/ui/blank.png"));this.mask2=new Ia(Na.getBitmapData("img/ui/blank.png"));this.mask3=new Ia(Na.getBitmapData("img/ui/blank.png"));this.mask4=new Ia(Na.getBitmapData("img/ui/blank.png"));
this.mask1.set_name("mask1");this.mask2.set_name("mask2");this.mask3.set_name("mask3");this.mask4.set_name("mask4");H.current.stage.stageHeight>H.current.stage.stageWidth?(this.mask1.set_width(700),this.mask1.set_height(g.offSetY/g.W),this.mask1.set_y(-g.offSetY/g.W),this.mask1.set_x(0),this.mask2.set_width(700),this.mask2.set_height(g.offSetY/g.W),this.mask2.set_y(500),this.mask2.set_x(0),this.mask3.set_width(400),this.mask3.set_height(480),this.mask3.set_y(0),this.mask3.set_x(-400),this.mask4.set_width(500),
this.mask4.set_height(480),this.mask4.set_y(0),this.mask4.set_x(700)):(this.mask1.set_width(g.offSetX/g.W),this.mask1.set_height(480),this.mask1.set_y(0),this.mask1.set_x(-g.offSetX/g.W-77),this.mask2.set_width(g.offSetX/g.W),this.mask2.set_height(480),this.mask2.set_x(773),this.mask2.set_y(0),this.mask3.set_width(700),this.mask3.set_height(400),this.mask3.set_y(-400),this.mask3.set_x(0),this.mask4.set_width(700),this.mask4.set_height(400),this.mask4.set_y(480),this.mask4.set_x(0));this.addChild(this.mask1);
this.addChild(this.mask2);this.addChild(this.mask3);this.addChild(this.mask4);g.maskesAddedM=!0},resizeStage:function(a){ka.trace("resize menu",{fileName:"MenuState.hx",lineNumber:307,className:"MenuState",methodName:"resizeStage"});g.setXY(u["int"](H.current.stage.stageWidth),u["int"](H.current.stage.stageHeight));ka.trace(u["int"](H.current.stage.stageWidth),{fileName:"MenuState.hx",lineNumber:313,className:"MenuState",methodName:"resizeStage"});ka.trace(u["int"](H.current.stage.stageHeight),{fileName:"MenuState.hx",
lineNumber:314,className:"MenuState",methodName:"resizeStage"});g.resizeGame();g.resizeStage(g.theMenu);g.offsetPage();H.trace("windows displayed")},overMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("over");B.play("SoundRollver")},outMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("out")},clearState:function(){for(this.removeEventListener("enterFrame",l(this,this.onEnterFrame));0<g.theGame.get_numChildren();)g.theGame.removeChildAt(0);g.previousLevel=this;g.theMenu.set_alpha(.01);
g.theGame.set_alpha(1);g.theMenu.mouseEnabled=!1;g.theMenu.mouseChildren=!1;g.theGame.mouseEnabled=!0;g.theGame.mouseChildren=!0},goToPlayBefore:function(a){this.goToPlay(!0)},goToPlay:function(a){null==a&&(a=!1);ka.trace("play",{fileName:"MenuState.hx",lineNumber:408,className:"MenuState",methodName:"goToPlay"});this.clearState();this.playState=new hf(this._parent,a);g.maskesAddedM=!1;B.play("SoundGameButonsClick");g.curSprite=this.playState;g.resizeGame();g.resizeStage(g.curSprite);g.offsetPage();
H.trace("windows displayed");g.blackScreenTween(this.playState)},onEnterFrame:function(a){a=H.getTimer()-this.lastTime;this.mainBackGround.update(a);this.play.update(a);this.play.update(a);this.lastTime=H.getTimer()},__class__:Ng});var od=function(a,b){this.dataFromJsonForParsing=[];this.stars=null;this.scoreArray=[null,null,null,null];this.timeA=null;this.leftKey=this.rightKey=this.downKey=this.upKey=!1;this.waitTimer=new ec(1E3,0);this.doorTimer=new ec(1E3,0);this.endTimer=new ec(2E3,0);this.stopwatchTimer=
new ec(1E3,0);this.boomTimer=new ec(60,0);this.rollsCollisionMask=-11;this.rollsCollisionGroup=10;this.elevatorCollisionMask=-2;this.elevatorCollisionGroup=3;this.objectsCollisionMask=-1;this.objectsCollisionGroup=4;this.loaderCollisionMask=-3;this.loaderCollisionGroup=2;this.constraintType=new ua;this.loaderType=new ua;this.elevatorType=new ua;this.boxType=new ua;this.wallType=new ua;this.loaderSensorType=new ua;this.fracArray=[];this.oPieces=[];this.boxArray=[];this.loaderBoom=!1;this.bombForceDefault=
0;this.scores=new Di;this.boomSprite=[];this.bombZone=75;this.gameMovieClips=[];this.shadows=[];this.lamps=[];this.transporters=[];this.elevatorsCons=[];this.elevatorsEnd=[];this.elevators=[];this.doorsCons=[];this.doors=[];this.transformators=[];this.coolers=[];this.buttons=[];this.loaderInCargo=this.craneMagnetInCargo=!1;this.cargoBox=[];this.loaderSpeed=6;this.magnetActivate=this.craneMagnetActivate=this.loaderJump=this.loaderWithBox=!1;this.trucks=[];this.counterUpdater=0;this.currentControl=
"loader";this.oldMousePosition=new v(0,0);this.gameScreen=new ia;this._parent=null;this.timerBeforeStart=new ec(200,1);this.lastTime=0;this.Score2=new Lb;this.Score=new Lb;this.skipButton=this.skipWindow=this.skipYes=this.skipNo=null;this.gravity=new v(0,350);ia.call(this);PokiSDK.gameplayStart();this._parent=a;this.cLevel=b;g.playState=this;g.previousLevel=null;g.currentLevel=b;g.space=new Mg(this.gravity);this.gameScreen=g.theGame;this.bombForceDefault=3500*this.bombZone/2;g.curSprite=this._parent;
this.loadUI();this.init();window.gameHere=this;this.counterUpdater=0};k.PlayState=od;od.__name__=["PlayState"];od.__super__=ia;od.prototype=w(ia.prototype,{handJoint:null,mainBackGround:null,mainBackGroundUI:null,blind1:null,blind2:null,back:null,gravity:null,skipButton:null,skipWindow:null,skipYes:null,skipNo:null,Score:null,Score2:null,sound:null,menu:null,music:null,restart:null,mask1:null,mask2:null,mask3:null,mask4:null,levelData:null,lastTime:null,cLevel:null,timerBeforeStart:null,_parent:null,
gameScreen:null,oldMousePosition:null,currentLevelNumber:null,gameOver:null,currentControl:null,counterUpdater:null,mx:null,my:null,truckLoaderBody:null,loaderLeftWheel:null,loaderRightWheel:null,tk1:null,tk2:null,magnet:null,mount:null,craneBody:null,craneMagnetBody:null,dxb:null,dyb:null,rastb:null,MiningBody:null,MiningLeftWheel:null,MiningRightWheel:null,wallBody:null,magnetJointPoint:null,magnetJointPoint2:null,pvLoaderSensor:null,clawDistance:null,lineJointLoaderLeftWheel:null,lineJointLoaderRightWheel:null,
mountCons:null,trucks:null,currentTruck:null,magnetActivate:null,craneMagnetActivate:null,loaderJump:null,loaderWithBox:null,loaderSpeed:null,outLight:null,cargoBox:null,loaderInCargo:null,craneMagnetInCargo:null,cargoString:null,craneMagnetTouch:null,craneSensorLeftTouch:null,craneSensorRightTouch:null,craneBoxId:null,clinchCount:null,buttons:null,coolers:null,transformators:null,doors:null,doorsCons:null,elevators:null,elevatorsEnd:null,elevatorsCons:null,transporters:null,lamps:null,shadows:null,
gameMovieClips:null,elevatorTimer1:null,elevatorTimer2:null,elevatorTimer3:null,elevatorForCheck:null,elevatorsMove:null,bombZone:null,boomSprite:null,scores:null,bombForceDefault:null,boomX:null,boomY:null,loaderBoom:null,boxArray:null,oPieces:null,fracArray:null,groundLoaderJoint:null,mouseJoint:null,mouseJoint2:null,magnetJoint:null,magnetJoint2:null,magnetJoint3:null,craneMagnetJoint:null,loaderSensorType:null,wallType:null,boxType:null,elevatorType:null,loaderType:null,constraintType:null,loaderCollisionGroup:null,
loaderCollisionMask:null,objectsCollisionGroup:null,objectsCollisionMask:null,elevatorCollisionGroup:null,elevatorCollisionMask:null,rollsCollisionGroup:null,rollsCollisionMask:null,pastTime:null,boomTimer:null,stopwatchTimer:null,endTimer:null,doorTimer:null,waitTimer:null,boxListener:null,boxListenerEnd:null,elevatorLoaderListener:null,elevatorBoxesListener:null,loaderSensorListener:null,loaderSensorListener2:null,boxSensorListener:null,consListener:null,leftKey:null,rightKey:null,downKey:null,
upKey:null,boxVelocity:null,leftBtn:null,rightBtn:null,upBtn:null,actBtn:null,timeA:null,scoreArray:null,stars:null,mainBackGround3:null,dataFromJsonForParsing:null,loadJsonDataWall:function(a){this.levelData=fe.parse(Na.getText("levels/level"+u.string(this.cLevel)+".json"));a=[];for(var b=[],c,d,e=[],f=[],m=this.levelData.data.stage.shape,h=0;h<m.length;)if(d=m[h],++h,"verts"==d.name){var q=u.string(d.xy1).split(" : ");c=[];for(var y=0;y<q.length;){var k=q[y];++y;k=new v(u.parseFloat(k.split(",")[0]),
u.parseFloat(k.split(",")[1]));c.push(k)}q=u.string(d.xy2).split(" : ");d=[];for(y=0;y<q.length;)k=q[y],++y,k=new v(u.parseFloat(k.split(",")[0]),u.parseFloat(k.split(",")[1])),d.push(k);a.push(c);b.push(d)}else{f.push(d.name);f.push(new v(u.parseFloat(d.x),u.parseFloat(d.y)));f.push(d.text);f.push(d.level);null!=d.Angle?f.push(g.roundBy(100,u.parseFloat(d.Angle))):f.push(0);f.push(d.Switch);f.push(d.OpenDirection);"true"==d.Closed?f.push(!0):f.push(!1);"true"==d.Enabled?f.push(!0):f.push(!1);if(null!=
d.truckPoints){c=(":"==u.string(d.truckPoints).charAt(u.string(d.truckPoints).length-1)?P.substr(u.string(d.truckPoints),0,u.string(d.truckPoints).length-1):u.string(d.truckPoints)).split(":");q=[];for(y=0;y<c.length;)k=c[y],++y,k=new v(u.parseFloat(k.split(",")[0]),u.parseFloat(k.split(",")[1])),q.push(k);f.push(q)}f.push(d.alpha);c=new v(0,0);q=d.WidthHeight;null!=q?(q=q.split(" "),c.set_x(u.parseFloat(q[0])),c.set_y(u.parseFloat(q[1])),f.push(c)):f.push(null);f.push(d.Activate);"false"==d.AutoChange?
f.push(!1):f.push(!0);f.push(u.string(d.End));f.push(d.EndPoint);f.push(u.parseFloat(d.Speed));f.push(u.parseFloat(d.Try));f.push(u.parseFloat(d.Start));f.push(u.parseFloat(d.StopTime));f.push(d.ChangeDirection);f.push(d.ename);if(null!=d.mtPoints){c=(":"==u.string(d.mtPoints).charAt(u.string(d.mtPoints).length-1)?P.substr(u.string(d.mtPoints),0,u.string(d.mtPoints).length-1):u.string(d.mtPoints)).split(":");q=[];for(y=0;y<c.length;)k=c[y],++y,k=new v(u.parseFloat(k.split(",")[0]),u.parseFloat(k.split(",")[1])),
q.push(k);f.push(q)}else f.push(null);if(null!=d.transPoint){c=(":"==u.string(d.transPoint).charAt(u.string(d.transPoint).length-1)?P.substr(u.string(d.transPoint),0,u.string(d.transPoint).length-1):u.string(d.transPoint)).split(":");q=[];for(y=0;y<c.length;)k=c[y],++y,k=new v(u.parseFloat(k.split(",")[0]),u.parseFloat(k.split(",")[1])),q.push(k);f.push(q)}else f.push(null);f.push(d.Direction);f.push(d.Broken);e.push(f);f=[]}this.wallBody=this.createWallBody(b);this.wallBody.set_space(g.space);this.wallBody.get_cbTypes().add(this.wallType);
return e},createWallBody:function(a){for(var b=new da(Aa.get_STATIC()),c=0;c<a.length;){var d=a[c];++c;d=new Za(d);b.get_shapes().add(d)}return b},init:function(){this.dataFromJsonForParsing=this.loadJsonDataWall(g.currentLevel);switch(g.currentLevel){case 7:g.addKoef=.84;break;case 18:g.addKoef=10;g.addKoef2=0;break;default:g.addKoef=0,g.addKoef2=0}this.createLevel(1);this.handJoint=new Wb(g.space.get_world(),null,v.weak(),v.weak());g.handJoint=this.handJoint;this.handJoint.set_space(g.space);this.handJoint.set_active(!1);
this.handJoint.set_stiff(!1);g.initLevel(this);1==g.isAppleCheck&&(M.get_window().addEventListener("orientationchange",l(this,this.onOrientationChange)),Ja.timer(1).onComplete(l(this,this.fixSafariMobile)));H.current.stage.addEventListener("resize",l(this,this.resizeStage));this.timerBeforeStart.start();this.timerBeforeStart.addEventListener("timerComplete",l(this,this.startTheGame));g.run=!0;this.loadButtonPanel();g.resizeGame();B.setLevelSounds(g.currentLevel);this.addMask();var a=this.mainBackGroundUI=
new Ia(Na.getBitmapData("img/ui/bg.png"));a.set_x(a.get_x()-89);g.theGame.addChild(this.mainBackGroundUI)},onOrientationChange:function(){if(-90==M.get_window().orientation||90==M.get_window().orientation)Ja.timer(1).onComplete(l(this,this.fixSafariMobile))},fixSafariMobile:function(){this.resizeStage(null);M.get_document().body.scrollIntoView();var a=u.string(M.get_window().innerHeight);M.get_document().body.style.height=a+"px"},createLevel:function(a,b){null==b&&(b="buttons");for(var c=null,d=0,
e=0,f=0,m=this.trucks.length;f<m;){var h=f++;this.trucks[h].cargoLoad=!1}this.clawDistance=0;this.craneSensorLeftTouch=this.craneSensorRightTouch=this.craneMagnetTouch=this.craneMagnetInCargo=this.loaderInCargo=!1;this.currentLevelNumber=a;this.MiningBody=new da(Aa.get_DYNAMIC(),new v(d,e));this.MiningBody.graphic=g.initSpriteUI("MiningTruckWheel");this.MiningLeftWheel=new da(Aa.get_DYNAMIC(),new v(d,e));this.MiningLeftWheel.get_shapes().add(new Gb(1,new v(0,0),new Oa(.4,3.5,3.5,7.5),new Qa(this.objectsCollisionGroup,
this.objectsCollisionMask)));this.MiningLeftWheel.graphic=g.initSpriteUI("MiningTruckWheel");this.MiningRightWheel=new da(Aa.get_DYNAMIC(),new v(d,e));this.MiningRightWheel.get_shapes().add(new Gb(1,new v(0,0),new Oa(.4,3.5,3.5,7.5),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));this.MiningRightWheel.graphic=g.initSpriteUI("MiningTruckWheel");this.MiningRightWheel.graphic=g.initSpriteUI("MiningTruckWheel");this.clinchCount=0;for(var q,y=this.dataFromJsonForParsing.length-1,k=null,
we="",p=0,t=y+1;p<t;){var z=p++;g.arrayWall[this.cLevel-1]==y+2-z&&this.gameScreen.addChild(this.back);q=this.dataFromJsonForParsing[y-z][0];"Shape"==q&&(we=this.dataFromJsonForParsing[y-z][2],"toDo"!=we&&(k=g.initSpriteUI(we),k.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x())+k.get_width()/2),k.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y())+k.get_height()/2),null!=this.dataFromJsonForParsing[y-z][4]&&k.set_rotation(g.roundBy(100,u.parseFloat(this.dataFromJsonForParsing[y-
z][4]))),this.gameScreen.addChild(k)));"StaticText"==q&&(we=this.dataFromJsonForParsing[y-z][2],"toDo"!=we&&("LEVEL"==P.substr(we,0,5)?(k=g.initAnimation("LEVEL","ui"),k.showBehavior(u.string(g.currentLevel-1)),k.update(1),k.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x())),k.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y())),k.update(1)):(k=g.initSpriteUI(we),k.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x())+k.get_width()/
2),k.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y())+k.get_height()/2)),this.gameScreen.addChild(k)));"MovieClip"==q&&(we=this.dataFromJsonForParsing[y-z][2],"toDo"!=we&&(k=g.initSpriteUI(we),k.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()+k.get_width()/2)),k.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()+k.get_height()/2)),k.set_rotation(g.roundBy(100,u.parseFloat(this.dataFromJsonForParsing[y-z][4]))),this.gameScreen.addChild(k)));
"LeaveTheTruck"==q&&(we="outLight","toDo"!=we&&(this.outLight=g.initAnimation(we,"ui"),this.outLight.showBehavior("disable"),this.outLight.update(1),this.outLight.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x())-this.outLight.get_width()),this.outLight.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y())-this.outLight.get_height()),this.gameScreen.addChild(this.outLight)));if("Seesaw"==q){var w=g.initSpriteUI(q);w.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-
z][1],v).get_x()));w.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));var x=new da(Aa.get_DYNAMIC(),new v(w.get_x(),w.get_y()));x.get_shapes().add(new Za(Za.rect(.5*-w.get_width(),.5*-w.get_height(),w.get_width(),w.get_height()),Oa.wood(),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));x.graphic=w;x.align();x.get_cbTypes().add(this.wallType);x.get_userData().gameData=q;g.space.get_bodies().add(x);this.gameScreen.addChild(w);this.clinchCount++;var B=g.initSpriteUI("Clinch");
w.addChild(B);d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y());var r=new Wb(g.space.get_world(),x,g.space.get_world().worldPointToLocal(new v(d,e)),x.worldPointToLocal(new v(d,e)));r.set_ignore(!0);g.space.get_constraints().add(r)}if("Stick"==q){var C=u.parseFloat(this.dataFromJsonForParsing[y-z][4]),E=g.initSpriteUI(q);E.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()));E.set_y(g.roundBy(100,
n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));E.set_rotation(0);var D=new da(Aa.get_DYNAMIC(),new v(E.get_x(),E.get_y()));D.get_shapes().add(new Za(Za.rect(.5*-E.get_width(),.5*-E.get_height(),E.get_width(),E.get_height()),Oa.wood(),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));0!=C&&(D.set_rotation(C/od.DEGREE),E.set_rotation(C));D.graphic=E;D.align();D.get_cbTypes().add(this.wallType);D.get_userData().gameData=q;g.space.get_bodies().add(D);this.gameScreen.addChild(E);
g.initSpriteUI("Clinch");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y());D.get_position().set(v.weak(d,e));90==Math.round(C)&&(d=D.get_position().get_x(),e=D.get_position().get_y()-60);-90==Math.round(C)&&(d=D.get_position().get_x(),e=D.get_position().get_y()+60);0==Math.round(C)&&(d=D.get_position().get_x()-60,e=D.get_position().get_y());180==Math.round(C)&&(d=D.get_position().get_x()+60,e=D.get_position().get_y());
var tl=new Wb(g.space.get_world(),D,g.space.get_world().worldPointToLocal(new v(d,e)),D.worldPointToLocal(new v(d,e)));tl.set_ignore(!0);g.space.get_constraints().add(tl)}if("WideLongDoor"==q||"ThinLongDoor"==q||"WideShortDoor"==q||"ThinShortDoor"==q||"WideLongDoor2"==q||"ThinShortDoor2"==q){var J=u.parseFloat(this.dataFromJsonForParsing[y-z][4]),G=g.initSpriteUI(q);G.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()));G.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-
z][1],v).get_y()));G.Switch=this.dataFromJsonForParsing[y-z][5];G.Closed=this.dataFromJsonForParsing[y-z][7];G.OpenDirection=this.dataFromJsonForParsing[y-z][6];g.theGame.addChild(G);G.set_rotation(0);var F=new da(Aa.get_DYNAMIC(),new v(G.get_x(),G.get_y()));var H=0,I=0;switch(q){case "ThinLongDoor":H=9.95;I=109.1;break;case "ThinShortDoor":H=9.95;I=54.9;break;case "ThinShortDoor2":H=9.95;I=67.8;break;case "WideLongDoor":H=29.8;I=109.35;break;case "WideLongDoor2":H=29.8;I=72.85;break;case "WideShortDoor":H=
29.8;I=54.7;break;default:H=Math.ceil(G.get_width()/2),I=Math.ceil(G.get_height()/2)}F.get_shapes().add(new Za(Za.rect(.5*-H,.5*-I,H,I),Oa.steel(),new Qa(this.elevatorCollisionGroup,this.elevatorCollisionMask)));0!=J&&(F.set_rotation(J/od.DEGREE),G.set_rotation(J));F.graphic=G;F.align();F.get_cbTypes().add(this.wallType);F.set_allowRotation(!1);F.get_userData().gameData=q;g.space.get_bodies().add(F);this.doors.push(F);var K=new mg(g.space.get_world(),F,g.space.get_world().worldPointToLocal(new v(F.get_position().get_x(),
F.get_position().get_y())),F.worldPointToLocal(new v(F.get_position().get_x(),F.get_position().get_y())));K.set_ignore(!0);K.set_stiff(!0);K.set_damping(8.2);g.space.get_constraints().add(K);this.doorsCons.push(K)}if("Lamp"==q){var L=g.initAnimation("Lamp","ui",!0);this.lamps.push(L);this.gameScreen.addChild(L);L.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()));L.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));L.Activate=this.dataFromJsonForParsing[y-
z][11];L.Enabled=this.dataFromJsonForParsing[y-z][8];L.set_rotation(g.roundBy(100,u.parseFloat(this.dataFromJsonForParsing[y-z][4])));1==L.Enabled?L.showBehavior("enable"):L.showBehavior("disable")}if("Shadow"==q||"HalfShadow"==q){var M=g.initAnimation(q,"ui",!0);null!=this.dataFromJsonForParsing[y-z][10]&&(M.set_scaleX(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][10],v).get_x()/100)),M.set_scaleY(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][10],v).get_y()/100)));M.showBehavior("enable");
this.shadows.push(M);this.gameScreen.addChild(M);M.Switch=this.dataFromJsonForParsing[y-z][5];M.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()+n.__cast(this.dataFromJsonForParsing[y-z][10],v).get_x()/2));M.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()+n.__cast(this.dataFromJsonForParsing[y-z][10],v).get_y()/2));M.set_rotation(g.roundBy(100,u.parseFloat(this.dataFromJsonForParsing[y-z][4])))}if("GreenButton"==q||"OrangeButton"==q||"BlueButton"==
q){var Q=new ee(q,this.dataFromJsonForParsing[y-z][5]);this.buttons.push(Q);Q.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()));Q.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));Q.set_rotation(g.roundBy(100,u.parseFloat(this.dataFromJsonForParsing[y-z][4])))}if("TransformerVault"==q){var W=new Ai;c=g.initAnimation("TransformerVault","ui");c.showBehavior("enable");c.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x())-
17);c.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));W.transGraphic=c;this.transformators.push(W);this.gameScreen.addChild(W.transGraphic);this.transformators[this.transformators.length-1].transSwitch=this.dataFromJsonForParsing[y-z][5];this.transformators[this.transformators.length-1].transBroken="false"==this.dataFromJsonForParsing[y-z][24]?!1:!0}if("ElevatorEnd"==q){var R=g.initSpriteUI("ElevatorEnd");R.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],
v).get_x()));R.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));R.set_name(this.dataFromJsonForParsing[y-z][20]);this.elevatorsEnd.push(R);this.gameScreen.addChild(R)}if("Cooler"==q){var U=g.initSpriteUI("coollerMain"),O=g.initSpriteUI("blades");U.addChild(O);U.blades=O;var Y=g.initSpriteUI("coollerTop");U.addChild(Y);U.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()));U.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));
this.coolers.push(U)}if("Elevator"==q){var N=g.initSpriteUI("elevatorBody");N.set_x(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()));N.set_y(g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));N.Enabled=this.dataFromJsonForParsing[y-z][8];N.AutoChange=this.dataFromJsonForParsing[y-z][12];N.End=this.dataFromJsonForParsing[y-z][13];N.EndPoint=this.dataFromJsonForParsing[y-z][14];N.Speed=this.dataFromJsonForParsing[y-z][15];N.Try=this.dataFromJsonForParsing[y-
z][16];N.Start=this.dataFromJsonForParsing[y-z][17];N.StopTime=this.dataFromJsonForParsing[y-z][18];N.Activate=this.dataFromJsonForParsing[y-z][11];N.ChangeDirection=this.dataFromJsonForParsing[y-z][19];var X=g.initSpriteUI("elevatorCogwheel");X.set_y(0);X.set_x(-25);N.addChild(X);N.w1=X;var aa=g.initSpriteUI("elevatorCogwheel");aa.set_y(0);aa.set_x(24);N.addChild(aa);N.w2=aa;var ca=g.initSpriteUI("elevatorTop");ca.set_y(-N.get_height()/2+3);N.addChild(ca);var T=new da(Aa.get_DYNAMIC(),new v(N.get_x(),
N.get_y()));T.get_shapes().add(new Za(Za.rect(.5*-N.get_width(),.5*-N.get_height(),N.get_width(),N.get_height()),Oa.steel(),new Qa(this.elevatorCollisionGroup,this.elevatorCollisionMask)));T.graphic=N;T.align();T.get_cbTypes().add(this.elevatorType);T.set_allowRotation(!1);T.get_userData().started=N.Enabled;var fa=g.initAnimation("TFXSparkL","ui");fa.showBehavior("disable");fa.set_y(20);fa.set_x(-54);N.addChild(fa);N.spark1=fa;var ja=g.initAnimation("TFXSpark","ui");ja.showBehavior("disable");ja.set_y(20);
ja.set_x(54);N.addChild(ja);N.spark2=ja;N.Enabled&&N.AutoChange?T.get_userData().moving=!0:T.get_userData().moving=!1;g.space.get_bodies().add(T);0==this.elevators.length&&(this.elevatorTimer1=new ec(N.StopTime,0),this.elevatorTimer1.addEventListener("timer",l(this,this.elev1)),this.elevatorTimer1.stop());1==this.elevators.length&&(this.elevatorTimer2=new ec(N.StopTime,0),this.elevatorTimer2.addEventListener("timer",l(this,this.elev2)),this.elevatorTimer2.stop());2==this.elevators.length&&(this.elevatorTimer3=
new ec(N.StopTime,0),this.elevatorTimer3.addEventListener("timer",l(this,this.elev3)),this.elevatorTimer3.stop());T.get_userData().gameData="elevator"+this.elevators.length;this.elevators.push(T);var ha=new mg(g.space.get_world(),T,g.space.get_world().worldPointToLocal(new v(T.get_position().get_x(),T.get_position().get_y())),T.worldPointToLocal(new v(T.get_position().get_x(),T.get_position().get_y())));ha.set_ignore(!0);ha.set_stiff(!1);ha.set_damping(9.3);g.space.get_constraints().add(ha);this.elevatorsCons.push(ha)}if("Transporter"==
q){var ba=g.initSpriteUI("TransporterBase"),ma=new Ei;ba.Activate=this.dataFromJsonForParsing[y-z][11];ba.Enabled=this.dataFromJsonForParsing[y-z][8];ba.ChangeDirection=this.dataFromJsonForParsing[y-z][19];ba.Direction=this.dataFromJsonForParsing[y-z][23];ba.Speed=this.dataFromJsonForParsing[y-z][15];for(var oa=0;6>oa;){var Ga=oa++;c=g.initSpriteUI("TransporterRoll");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][22][Ga],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-
z][22][Ga],v).get_y());this.gameScreen.addChild(c);var V=new da(Aa.get_DYNAMIC(),new v(d,e));V.get_shapes().add(new Gb(.5*c.get_width(),new v(0,0),new Oa(.1,5.5,5.5,3.5),new Qa(this.rollsCollisionGroup,this.rollsCollisionMask)));V.graphic=c;V.align();V.get_cbTypes().add(this.wallType);g.space.get_bodies().add(V);V.get_userData().gameData="rollBody";ma.transporterRolls.push(V)}var ea=g.initSpriteUI("TransporterBase");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][22][6],v).get_x());e=g.roundBy(100,
n.__cast(this.dataFromJsonForParsing[y-z][22][6],v).get_y());ea.set_x(d);ea.set_y(e);var pa=new da(Aa.get_KINEMATIC(),new v(d,e));pa.get_shapes().add(new Za(Za.rect(.5*-ea.get_width(),.5*-ea.get_height(),ea.get_width(),ea.get_height()),Oa.steel()));ea.Activate=ba.Activate;ea.Enabled=ba.Enabled;ea.ChangeDirection=ba.ChangeDirection;ea.Direction=ba.Direction;ea.Speed=ba.Speed;this.gameScreen.addChild(ea);pa.graphic=ea;pa.align();pa.get_cbTypes().add(this.wallType);g.space.get_bodies().add(pa);ma.base=
pa;this.transporters.push(ma);for(var sa,Z=0,Fa=ma.transporterRolls.length;Z<Fa;){var za=Z++;sa=new v(ma.transporterRolls[za].get_position().get_x(),ma.transporterRolls[za].get_position().get_y());var ua=new Wb(pa,ma.transporterRolls[za],pa.worldPointToLocal(sa),ma.transporterRolls[za].worldPointToLocal(sa));ua.set_ignore(!0);g.space.get_constraints().add(ua)}}if("SmallBarel"==P.substr(q,0,q.length-1)||"Basketball"==q||"BigBarel"==P.substr(q,0,q.length-1)){var va=this.boxArray.length,zb=g.initAnimation(q,
"ui",!0);zb.showBehavior("0");zb.set_rotation(g.roundBy(100,u.parseFloat(this.dataFromJsonForParsing[y-z][4])));this.gameScreen.addChild(zb);var ra=42;if("SmallBarel"==P.substr(q,0,q.length-1))if(9!=g.currentLevel){var Ba=.6;var ka=.4;ra=40.2}else ka=Ba=1,ra=42;"BigBarel"==P.substr(q,0,q.length-1)?(Ba=.2,3==g.currentLevel&&(Ba=.4),ka=.3):(Ba=.1,ka=.4);if("1"==this.dataFromJsonForParsing[y-z][9]){var ta=new da(Aa.get_DYNAMIC(),new v(zb.get_x(),zb.get_y()));"Basketball"==q?ta.get_shapes().add(new Gb(20.1,
new v(0,0),new Oa(.9,.1,ka,Ba),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask))):"SmallBarel"==P.substr(q,0,q.length-1)?ta.get_shapes().add(new Gb(.5*ra,new v(0,0),new Oa(.1,ka,ka,.55),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask))):"BigBarel"==P.substr(q,0,q.length-1)&&ta.get_shapes().add(new Gb(39.5,new v(0,0),new Oa(.1,ka,ka,Ba),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));e=d=-2;var xa=new Gb(1,new v(d,e),new Oa(.1,5.5,5.5,.01),new Qa(this.objectsCollisionGroup,
this.objectsCollisionMask));ta.get_position().set(v.weak(n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x(),n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));ta.get_shapes().add(xa);this.oPieces.push(xa);zb.BoxId=va;ta.graphic=zb;ta.align();ta.get_userData().boxId=va;g.space.get_bodies().add(ta);var Ja=P.substr(q,0,q.length-1);ta.get_userData().gameData=Ja;ta.get_userData().isCargo=!1;ta.get_cbTypes().add(this.boxType);this.boxArray.push(ta)}else zb.set_x(n.__cast(this.dataFromJsonForParsing[y-
z][1],v).get_x()),zb.set_y(n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()),this.cargoBox.push(zb),zb.showBehavior("1"),zb.update(1)}if("SquareBox"==P.substr(q,0,q.length-1)||"DangerBox"==P.substr(q,0,q.length-1)||"VerticalBox"==P.substr(q,0,q.length-1)||"BigBox"==q){var La=this.boxArray.length,S=null;"DangerBox"!=P.substr(q,0,q.length-1)?(S=g.initAnimation(q,"ui",!0),S.showBehavior("0")):S=g.initSpriteUI(q);S.set_rotation(g.roundBy(100,u.parseFloat(this.dataFromJsonForParsing[y-z][4])));
this.gameScreen.addChild(S);if("VerticalBox"==P.substr(q,0,q.length-2)){var la=.01;var na=.4}"BigBox"==q?(la=.4,na=.3,9==g.currentLevel&&(na=.2)):na=la=.4;var Ra=0,Ea=0;if("1"==this.dataFromJsonForParsing[y-z][9]){var qa=new da(Aa.get_DYNAMIC(),new v(n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x(),n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()));switch(P.substr(q,0,q.length-1)){case "BigBo":case "BigBox":Ea=Ra=40;break;case "DangerBo":case "DangerBox":case "SquareBox":case "SquareBox2":case "SquareBox3":case "SquareBox4":Ea=
Ra=20;break;case "VerticalBox":Ra=29==g.currentLevel?39.8:40;Ea=20;break;default:Ra=Math.ceil(S.get_width()/2),Ea=Math.ceil(S.get_height()/2)}qa.get_shapes().add(new Za(Za.rect(-Ra,-Ea,2*Ra,2*Ea),new Oa(.1,na,na,la),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));d=-6.65;e=-4.35;var Pa=new Gb(1,new v(d-10,e-10),new Oa(.1,5.5,5.5,.01),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask));qa.get_shapes().add(Pa);this.oPieces.push(Pa);S.BoxId=La;qa.graphic=S;qa.graphicOffset.set_x(S.get_width()/
2);qa.graphicOffset.set_y(S.get_height()/2);qa.align();qa.get_userData().boxId=La;g.space.get_bodies().add(qa);var Ka=P.substr(q,0,q.length-1);qa.get_userData().gameData=Ka;qa.get_userData().isCargo=!1;qa.get_cbTypes().add(this.boxType);this.boxArray.push(qa)}else S.set_alpha(u.parseFloat(this.dataFromJsonForParsing[y-z][9])),S.set_x(n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()),S.set_y(n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y()),this.cargoBox.push(S),S.showBehavior("1"),S.update(1)}if("MiningTruck"==
q){g.initSpriteUI("MiningTruckBody");var Va=g.initSpriteUI("MiningTruckBody");this.gameScreen.addChild(Va);for(var Da=new Nb,wa=new Nb,Ca=new Nb,Sa,ya=1;5>ya;){var Ha=ya++;Sa=n.__cast(this.dataFromJsonForParsing[y-z][21][Ha-1],v);Da.push(Sa)}for(var Tf=5;9>Tf;){var $a=Tf++;Sa=n.__cast(this.dataFromJsonForParsing[y-z][21][$a-1],v);wa.push(Sa)}for(var Ya=9;13>Ya;){var jb=Ya++;Sa=n.__cast(this.dataFromJsonForParsing[y-z][21][jb-1],v);Ca.push(Sa)}d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-
z][21][12],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][21][12],v).get_y());this.MiningBody=new da(Aa.get_DYNAMIC(),new v(d,e-3));this.MiningBody.get_shapes().add(new Za(Da,new Oa(.4,.2,.38,.7),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));this.MiningBody.get_shapes().add(new Za(wa,new Oa(.4,.2,.38,.7),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));this.MiningBody.get_shapes().add(new Za(Ca,new Oa(.4,.2,.38,.7),new Qa(this.objectsCollisionGroup,
this.objectsCollisionMask)));this.MiningBody.graphic=Va;this.MiningBody.get_cbTypes().add(this.wallType);g.space.get_bodies().add(this.MiningBody);this.MiningBody.get_userData().gameData="MiningTruckBody";c=g.initSpriteUI("MiningTruckWheel");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][21][13],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][21][13],v).get_y());this.gameScreen.addChild(c);this.MiningLeftWheel=new da(Aa.get_DYNAMIC(),new v(d,e));this.MiningLeftWheel.get_shapes().add(new Gb(.5*
c.get_width()-1,new v(0,0),new Oa(.4,3.5,3.5,7.5),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));this.MiningLeftWheel.graphic=c;this.MiningLeftWheel.align();g.space.get_bodies().add(this.MiningLeftWheel);this.MiningLeftWheel.get_userData().gameData="MiningLeftWheel";var Fi=new v(d,e);var cb=new Fd(this.MiningBody,this.MiningLeftWheel,this.MiningBody.worldPointToLocal(Fi),new v,new v(0,1),0,20);cb.set_ignore(!0);g.space.get_constraints().add(cb);var bb=Fi;bb.set_y(bb.get_y()-24);var Ma=
new Pg(this.MiningBody,this.MiningLeftWheel,this.MiningBody.worldPointToLocal(Fi),new v,24,26);Ma.set_stiff(!1);Ma.set_maxForce(15001);Ma.set_frequency(5);Ma.set_damping(21.2);g.space.get_constraints().add(Ma);c=g.initSpriteUI("MiningTruckWheel");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][21][14],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][21][14],v).get_y());this.gameScreen.addChild(c);this.MiningRightWheel=new da(Aa.get_DYNAMIC(),new v(d,e));this.MiningRightWheel.get_shapes().add(new Gb(.5*
c.get_width()-1,new v(0,0),new Oa(.4,3.5,3.5,7.5),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));this.MiningRightWheel.graphic=c;this.MiningRightWheel.align();g.space.get_bodies().add(this.MiningRightWheel);this.MiningRightWheel.get_userData().gameData="MiningRightWheel";Fi=new v(d,e);var eb=new Wb(this.MiningBody,this.MiningRightWheel,this.MiningBody.worldPointToLocal(Fi),new v);eb.set_ignore(!0);g.space.get_constraints().add(eb)}if("TruckLoader"==q){var nb=g.initSpriteUI("LoaderBody");
this.gameScreen.addChild(nb);for(var ul=new Nb,Ta,rb=1;7>rb;){var ib=rb++;Ta=n.__cast(this.dataFromJsonForParsing[y-z][9][ib-1],v);ul.push(Ta)}d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][6],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][6],v).get_y());this.truckLoaderBody=new da(Aa.get_DYNAMIC(),new v(d,e));this.truckLoaderBody.get_shapes().add(new Za(ul,new Oa(.4,.1,.1,.2),new Qa(this.loaderCollisionGroup,this.loaderCollisionMask)));this.truckLoaderBody.graphic=
nb;this.truckLoaderBody.align();this.truckLoaderBody.get_cbTypes().add(this.loaderType);g.space.get_bodies().add(this.truckLoaderBody);this.truckLoaderBody.get_userData().gameData="truckLoaderBody";var Ua=new da(Aa.get_DYNAMIC(),new v(d,e));Ua.get_shapes().add(new Gb(5,new v(0,0),new Oa(.1,13.5,13.5,.1),new Qa(this.loaderCollisionGroup,this.loaderCollisionMask)));Ua.get_cbTypes().add(this.loaderSensorType);Ua.align();Ua.set_gravMass(.02);g.space.get_bodies().add(Ua);Ua.get_userData().gameData="loaderSensor";
var vb=new v(d,e);this.pvLoaderSensor=new Wb(this.truckLoaderBody,Ua,this.truckLoaderBody.worldPointToLocal(vb),new v(0,-44));this.pvLoaderSensor.set_ignore(!0);g.space.get_constraints().add(this.pvLoaderSensor);c=g.initSpriteUI("Wheel");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][7],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][7],v).get_y());var kb=g.initSpriteUI("WheelSensor");kb.set_x(0);kb.set_y(0);c.sensor=kb;c.addChild(kb);kb.set_alpha(.01);this.gameScreen.addChild(c);
this.loaderLeftWheel=new da(Aa.get_DYNAMIC(),new v(d,e));this.loaderLeftWheel.get_shapes().add(new Gb(20.85,new v(0,0),new Oa(.1,5.5,5.5,3.5),new Qa(this.loaderCollisionGroup,this.loaderCollisionMask)));this.loaderLeftWheel.graphic=c;this.loaderLeftWheel.align();this.loaderLeftWheel.get_cbTypes().add(this.loaderType);g.space.get_bodies().add(this.loaderLeftWheel);this.loaderLeftWheel.get_userData().gameData="loaderLeftWheel";var fb=new v(d,e+3);this.lineJointLoaderLeftWheel=new Fd(this.truckLoaderBody,
this.loaderLeftWheel,this.truckLoaderBody.worldPointToLocal(fb),new v,new v(0,2),0,4);this.lineJointLoaderLeftWheel.set_ignore(!0);g.space.get_constraints().add(this.lineJointLoaderLeftWheel);c=g.initSpriteUI("Wheel");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][8],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][8],v).get_y());this.gameScreen.addChild(c);var db=g.initSpriteUI("WheelSensor");db.set_x(0);db.set_y(0);c.sensor=db;c.addChild(db);db.set_alpha(.01);
this.loaderRightWheel=new da(Aa.get_DYNAMIC(),new v(d,e));this.loaderRightWheel.get_shapes().add(new Gb(20.85,new v(0,0),new Oa(.1,5.5,5.5,3.5),new Qa(this.loaderCollisionGroup,this.loaderCollisionMask)));this.loaderRightWheel.graphic=c;this.loaderRightWheel.align();this.loaderRightWheel.get_cbTypes().add(this.loaderType);g.space.get_bodies().add(this.loaderRightWheel);this.loaderLeftWheel.get_userData().gameData="loaderRightWheel";fb=new v(d,e+3);this.lineJointLoaderRightWheel=new Fd(this.truckLoaderBody,
this.loaderRightWheel,this.truckLoaderBody.worldPointToLocal(fb),new v,new v(0,2),0,4);this.lineJointLoaderRightWheel.set_ignore(!0);g.space.get_constraints().add(this.lineJointLoaderRightWheel);c=g.initSpriteUI("Chain1");this.gameScreen.addChild(c);d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][9],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][9],v).get_y());this.tk1=new da(Aa.get_DYNAMIC(),new v(d,e));this.tk1.get_shapes().add(new Za(Za.rect(-9.3,-24.325,
18.6,48.65),new Oa(.1,.5,.5,.1),new Qa(this.loaderCollisionGroup,this.loaderCollisionMask)));this.tk1.graphic=c;this.tk1.align();this.tk1.get_cbTypes().add(this.loaderType);g.space.get_bodies().add(this.tk1);this.tk1.get_userData().gameData="tk1";d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][10],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][10],v).get_y());var Uf=new v(d,e);this.groundLoaderJoint=new Wb(g.space.get_world(),this.tk1,g.space.get_world().worldPointToLocal(Uf),
this.tk1.worldPointToLocal(Uf));this.groundLoaderJoint.set_ignore(!0);this.groundLoaderJoint.set_stiff(!1);this.groundLoaderJoint.set_maxForce(25E3);this.groundLoaderJoint.set_frequency(33.7);this.groundLoaderJoint.set_damping(.3);this.groundLoaderJoint.get_cbTypes().add(this.constraintType);g.space.get_constraints().add(this.groundLoaderJoint);this.clawDistance+=c.get_height();c=g.initSpriteUI("Mount");this.gameScreen.addChild(c);d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][11],v).get_x());
e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][11],v).get_y());this.mount=new da(Aa.get_DYNAMIC(),new v(d,e));this.mount.get_shapes().add(new Za(Za.rect(-11.3,-11.35,c.get_width(),c.get_height()),Oa.steel(),new Qa(this.loaderCollisionGroup,this.loaderCollisionMask)));this.mount.graphic=c;this.mount.align();this.mount.set_allowRotation(!1);g.space.get_bodies().add(this.mount);Uf=new v(d,e);this.mountCons=new Wb(this.truckLoaderBody,this.mount,this.truckLoaderBody.worldPointToLocal(Uf),
this.mount.worldPointToLocal(Uf));this.mountCons.set_ignore(!0);g.space.get_constraints().add(this.mountCons);c=g.initSpriteUI("Chain2");this.gameScreen.addChild(c);d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][12],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][12],v).get_y());this.tk2=new da(Aa.get_DYNAMIC(),new v(d,e));this.tk2.get_shapes().add(new Za(Za.rect(-9.275,-26.175,18.55,52.35),new Oa(.1,.5,.5,.1),new Qa(this.loaderCollisionGroup,this.loaderCollisionMask)));
this.tk2.graphic=c;this.tk2.align();this.tk2.get_cbTypes().add(this.loaderType);this.tk2.set_gravMass(-.5);g.space.get_bodies().add(this.tk2);this.tk2.get_userData().gameData="tk2";d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][13],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][13],v).get_y());Uf=new v(d,e);var ub=new Wb(this.tk1,this.tk2,this.tk1.worldPointToLocal(Uf),this.tk2.worldPointToLocal(Uf));ub.set_ignore(!0);ub.set_breakUnderForce(!0);g.space.get_constraints().add(ub);
this.clawDistance+=c.get_height();c=g.initSpriteUI("Magnet");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][14],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][14],v).get_y());this.magnet=new da(Aa.get_DYNAMIC(),new v(d,e));this.magnet.get_shapes().add(new Za(Za.rect(-16.45,-18.525,32.9,37.05),new Oa(.1,.5,.5,.1),new Qa(this.loaderCollisionGroup,this.loaderCollisionMask)));this.magnet.get_shapes().add(this.magnetJointPoint=new Gb(2,new v(-10,-15),Oa.wood(),new Qa(this.loaderCollisionGroup,
this.loaderCollisionMask)));this.magnet.get_shapes().add(this.magnetJointPoint2=new Gb(2,new v(10,-15),Oa.wood(),new Qa(this.loaderCollisionGroup,this.loaderCollisionMask)));var vl=g.initSpriteUI("Magnet");this.magnet.graphic=g.initSpriteUI("Magnet");var pb=g.initAnimation("TPFXLighting","ui"),ql=g.initSpriteUI("magneticBeam"),mb=g.initSpriteUI("magnetic"),sk=g.initSpriteUI("magnetic");mb.set_x(-12);mb.set_y(-15.4);sk.set_x(12);sk.set_y(-15.4);this.magnet.graphic.beam=ql;this.magnet.graphic.magnetic1=
mb;this.magnet.graphic.magnetic2=sk;this.magnet.graphic.addChild(vl);this.magnet.graphic.magnet=vl;pb.showBehavior("disable");pb.set_y(-36);pb.set_visible(!1);this.magnet.graphic.light=pb;this.magnet.graphic.addChild(pb);ql.set_y(-41.2);this.magnet.graphic.addChild(ql);this.magnet.graphic.addChild(mb);this.magnet.graphic.addChild(sk);this.magnet.graphic.mouseChildren=!1;this.magnet.align();this.magnet.get_cbTypes().add(this.loaderType);this.magnet.set_gravMass(-.5);g.space.get_bodies().add(this.magnet);
this.magnet.get_userData().gameData="magnet";this.gameScreen.addChild(this.magnet.graphic);d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][15],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][15],v).get_y());Uf=new v(d,e);var tb=new Wb(this.tk2,this.magnet,this.tk2.worldPointToLocal(Uf),this.magnet.worldPointToLocal(Uf));tb.set_ignore(!0);tb.set_breakUnderForce(!0);g.space.get_constraints().add(tb);this.clawDistance+=c.get_height()}if("Truck"==q){this.currentTruck=
new Bi;var hb=g.initSpriteUI("nearTruck");this.gameScreen.addChildAt(hb,1);c=g.initSpriteUI("TruckBody2");c.set_alpha(1);this.gameScreen.addChild(c);var Xa=g.initSpriteUI("TruckStopSignal");Xa.set_x(-180);Xa.set_y(57);this.currentTruck.stopSignal=Xa;this.currentTruck.stopSignal.set_visible(!1);this.currentTruck.stopSignal=Xa;c.addChild(Xa);var jc=g.initSpriteUI("cargo");jc.set_x(-97);jc.set_y(-27);c.cargo=jc;this.currentTruck.cargo=jc;jc.set_alpha(1);c.addChild(jc);for(var lb=new Nb,ab=new Nb,Qg,
Cb=1;6>Cb;){var Eb=Cb++;Qg=n.__cast(this.dataFromJsonForParsing[y-z][9][Eb-1],v);lb.push(Qg)}for(var Lb=6;11>Lb;){var Kb=Lb++;Qg=n.__cast(this.dataFromJsonForParsing[y-z][9][Kb-1],v);ab.push(Qg)}d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_x()-4);e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][1],v).get_y());hb.set_x(d+62);hb.set_y(e+4);var Fb=Aa.get_DYNAMIC();this.currentTruck.truckBody=new da(Fb,new v(d,e));this.currentTruck.truckBody.get_shapes().add(new Za(lb,
new Oa(.2,.2,.38,.7),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));this.currentTruck.truckBody.get_shapes().add(new Za(ab,new Oa(.2,.2,.38,.7),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));this.currentTruck.truckBody.get_userData().truck=1;this.currentTruck.truckBody.graphic=c;this.currentTruck.truckBody.graphic.set_x(this.currentTruck.truckBody.get_position().get_x());this.currentTruck.truckBody.graphic.set_y(this.currentTruck.truckBody.get_position().get_y());this.currentTruck.truckBody.graphic.set_rotation(180*
this.currentTruck.truckBody.get_rotation()/Math.PI%360);this.currentTruck.truckBody.align();this.currentTruck.truckBody.get_cbTypes().add(this.wallType);g.space.get_bodies().add(this.currentTruck.truckBody);this.currentTruck.truckBody.get_userData().gameData="truckBody";c=g.initSpriteUI("TruckWeel");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][10],v).get_x());e=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][10],v).get_y());this.gameScreen.addChild(c);var Pb=Aa.get_DYNAMIC();
this.currentTruck.leftWheelTruck=new da(Pb,new v(d,e));this.currentTruck.leftWheelTruck.get_shapes().add(new Gb(.5*c.get_width(),new v(0,0),new Oa(.4,5.5,5.5,7.5),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));this.currentTruck.leftWheelTruck.graphic=c;this.currentTruck.leftWheelTruck.align();g.space.get_bodies().add(this.currentTruck.leftWheelTruck);this.currentTruck.leftWheelTruck.get_userData().gameData="leftWheelTruck";this.currentTruck.leftWheelTruck.get_userData().truck=1;var Wa=
new v(d,e);var wb=new Fd(this.currentTruck.truckBody,this.currentTruck.leftWheelTruck,this.currentTruck.truckBody.worldPointToLocal(Wa),new v,new v(0,1),0,4);wb.set_ignore(!0);wb.set_stiff(!1);wb.set_frequency(5.3);wb.set_damping(.4);g.space.get_constraints().add(wb);this.currentTruck.leftWheelTruck.set_allowMovement(!1);this.currentTruck.leftWheelTruck.set_allowRotation(!1);c=g.initSpriteUI("TruckWeel");d=g.roundBy(100,n.__cast(this.dataFromJsonForParsing[y-z][9][11],v).get_x());e=g.roundBy(100,
n.__cast(this.dataFromJsonForParsing[y-z][9][11],v).get_y());this.gameScreen.addChild(c);var Mb=Aa.get_DYNAMIC();this.currentTruck.rightWheelTruck=new da(Mb,new v(d,e));this.currentTruck.rightWheelTruck.get_shapes().add(new Gb(.5*c.get_width(),new v(0,0),new Oa(.4,5.5,5.5,7.5),new Qa(this.objectsCollisionGroup,this.objectsCollisionMask)));this.currentTruck.rightWheelTruck.graphic=c;this.currentTruck.rightWheelTruck.align();g.space.get_bodies().add(this.currentTruck.rightWheelTruck);this.currentTruck.rightWheelTruck.get_userData().gameData=
"rightWheelTruck";Wa=new v(d,e);var gb=new Fd(this.currentTruck.truckBody,this.currentTruck.rightWheelTruck,this.currentTruck.truckBody.worldPointToLocal(Wa),new v,new v(0,1),0,4);gb.set_ignore(!0);gb.set_stiff(!1);gb.set_frequency(5.3);gb.set_damping(.4);g.space.get_constraints().add(gb);this.currentTruck.rightWheelTruck.set_allowMovement(!1);this.currentTruck.rightWheelTruck.set_allowRotation(!1);this.currentTruck.rightWheelTruck.get_userData().truck=1;this.trucks.push(this.currentTruck)}}new v(this.magnet.get_position().get_x(),
this.magnet.get_position().get_y());this.mouseJoint=new Wb(g.space.get_world(),this.magnet,g.space.get_world().worldPointToLocal(new v(this.magnetJointPoint.get_worldCOM().get_x(),this.magnetJointPoint.get_worldCOM().get_y())),this.magnet.worldPointToLocal(new v(this.magnet.get_position().get_x()-20,this.magnet.get_position().get_y())));this.mouseJoint.set_maxForce(472);this.mouseJoint.set_stiff(!1);this.mouseJoint.set_frequency(1.6);this.mouseJoint.set_damping(.4);g.space.get_constraints().add(this.mouseJoint);
this.mouseJoint2=new Wb(g.space.get_world(),this.magnet,g.space.get_world().worldPointToLocal(new v(this.magnetJointPoint.get_worldCOM().get_x(),this.magnetJointPoint.get_worldCOM().get_y())),this.magnet.worldPointToLocal(new v(this.magnet.get_position().get_x()+20,this.magnet.get_position().get_y())));this.mouseJoint2.set_maxForce(472);this.mouseJoint2.set_stiff(!1);this.mouseJoint2.set_frequency(1.6);this.mouseJoint2.set_damping(.4);g.space.get_constraints().add(this.mouseJoint2);for(var mc=0,Tb=
this.elevators.length;mc<Tb;)for(var ge=mc++,Ub=0,Vb=this.elevatorsEnd.length;Ub<Vb;){var Bb=Ub++;n.__cast(this.elevators[ge].graphic,A).EndPoint==u.string(this.elevatorsEnd[Bb].get_name())&&(this.elevators[ge].get_position().get_y()<this.elevatorsEnd[Bb].get_y()?(n.__cast(this.elevators[ge].graphic,A).Start=this.elevators[ge].get_position().get_y(),n.__cast(this.elevators[ge].graphic,A).End=this.elevatorsEnd[Bb].get_y(),n.__cast(this.elevators[ge].graphic,A).Direction="down"):(n.__cast(this.elevators[ge].graphic,
A).Start=this.elevatorsEnd[Bb].get_y(),n.__cast(this.elevators[ge].graphic,A).End=this.elevators[ge].get_position().get_y(),n.__cast(this.elevators[ge].graphic,A).Direction="up"),0==n.__cast(this.elevators[ge].graphic,A).Enabled&&0==n.__cast(this.elevators[ge].graphic,A).AutoChange&&""!=n.__cast(this.elevators[ge].graphic,A).ChangeDirection&&("down"==n.__cast(this.elevators[ge].graphic,A).Direction?n.__cast(this.elevators[ge].graphic,A).Direction="up":n.__cast(this.elevators[ge].graphic,A).Direction=
"down"))}for(var Hb=0,Jb=this.trucks.length;Hb<Jb;){var ob=Hb++;this.trucks[ob].cargo=new ia;this.gameScreen.addChild(this.trucks[ob].cargo);this.trucks[ob].cargo.set_x(this.trucks[ob].truckBody.get_position().get_x()-96.5);this.trucks[ob].cargo.set_y(this.trucks[ob].truckBody.get_position().get_y()-27);for(var Yb=0,Xb=this.cargoBox.length;Yb<Xb;){var yb=Yb++;n.__cast(this.trucks[ob].truckBody.graphic,A).hitTestObject(this.cargoBox[yb])&&(this.trucks[ob].cargo.addChild(this.cargoBox[yb]),this.cargoBox[yb].set_x(this.cargoBox[yb].get_x()-
this.trucks[ob].cargo.get_x()),this.cargoBox[yb].set_y(this.cargoBox[yb].get_y()-this.trucks[ob].cargo.get_y()),this.trucks[ob].boxSum++)}}for(var fc=0,ac=this.shadows.length;fc<ac;)fc++;for(var Ob=0,Qb=this.buttons.length;Ob<Qb;){var bc=Ob++;this.gameScreen.addChild(this.buttons[bc])}for(var Rb=0,cc=this.elevators.length;Rb<cc;){var Ab=Rb++;this.gameScreen.addChild(this.elevators[Ab].graphic)}for(var xb=0,ic=this.coolers.length;xb<ic;){var $b=xb++;this.gameScreen.addChild(this.coolers[$b])}this.leftKey=
this.rightKey=this.downKey=this.upKey=this.gameOver=!1;this.pastTime=0;var xl=this.blind1=new Ia(Na.getBitmapData("img/ui/blinds2.png"));xl.set_x(xl.get_x()-120);this.gameScreen.addChild(this.blind1);this.blind2=new Ia(Na.getBitmapData("img/ui/blinds1.png"));this.blind2.set_x(700);this.gameScreen.addChild(this.blind2)},elev1:function(a){n.__cast(this.elevators[0].graphic,A).Enabled=!0;0==B.checkOneSound("SoundLiftOn")&&B.play("SoundLiftOn");this.elevators[0].get_userData().moving=!0;this.elevatorTimer1.stop();
3==n.__cast(this.elevators[0].graphic,A).Try&&(n.__cast(this.elevators[0].graphic,A).Try=0,this.elevatorTimer1.set_delay(n.__cast(this.elevators[0].graphic,A).StopTime));1==n.__cast(this.elevators[0].graphic,A).Try&&(n.__cast(this.elevators[0].graphic,A).Try+=1)},elev2:function(a){n.__cast(this.elevators[1].graphic,A).Enabled=!0;0==B.checkOneSound("SoundLiftOn")&&B.play("SoundLiftOn");this.elevators[1].get_userData().moving=!0;this.elevatorTimer2.stop();3==n.__cast(this.elevators[1].graphic,A).Try&&
(n.__cast(this.elevators[1].graphic,A).Try=0,this.elevatorTimer2.set_delay(n.__cast(this.elevators[1].graphic,A).StopTime));1==n.__cast(this.elevators[1].graphic,A).Try&&(n.__cast(this.elevators[1].graphic,A).Try+=1)},elev3:function(a){n.__cast(this.elevators[2].graphic,A).Enabled=!0;0==B.checkOneSound("SoundLiftOn")&&B.play("SoundLiftOn");this.elevators[2].get_userData().moving=!0;this.elevatorTimer3.stop();3==n.__cast(this.elevators[2].graphic,A).Try&&(n.__cast(this.elevators[2].graphic,A).Try=
0,this.elevatorTimer3.set_delay(n.__cast(this.elevators[2].graphic,A).StopTime));1==n.__cast(this.elevators[2].graphic,A).Try&&(n.__cast(this.elevators[2].graphic,A).Try+=1)},startTheGame:function(a){g.theGame.removeChild(this.mainBackGroundUI);this.removeEventListener("enterFrame",l(this,this.updateWorld));this.addEventListener("enterFrame",l(this,this.updateWorld));this.boxListener=new fd(ta.get_BEGIN(),na.get_COLLISION(),this.boxType,this.wallType,l(this,this.beginCollisionBoxHandler));g.space.get_listeners().add(this.boxListener);
this.boxListenerEnd=new fd(ta.get_END(),na.get_COLLISION(),this.boxType,this.wallType,l(this,this.endCollisionBoxHandler));g.space.get_listeners().add(this.boxListenerEnd);this.elevatorLoaderListener=new fd(ta.get_BEGIN(),na.get_COLLISION(),this.elevatorType,this.loaderType,l(this,this.beginCollisionElevator));g.space.get_listeners().add(this.elevatorLoaderListener);this.elevatorBoxesListener=new fd(ta.get_BEGIN(),na.get_COLLISION(),this.elevatorType,this.boxType,l(this,this.beginCollisionElevator));
g.space.get_listeners().add(this.elevatorBoxesListener);this.loaderSensorListener=new fd(ta.get_BEGIN(),na.get_COLLISION(),this.loaderSensorType,this.wallType,l(this,this.beginCollisionLoaderWallHandler));g.space.get_listeners().add(this.loaderSensorListener);this.loaderSensorListener2=new fd(ta.get_BEGIN(),na.get_COLLISION(),this.loaderSensorType,this.elevatorType,l(this,this.beginCollisionLoaderWallHandler));g.space.get_listeners().add(this.loaderSensorListener2);this.boxSensorListener=new fd(ta.get_BEGIN(),
na.get_COLLISION(),this.loaderSensorType,this.boxType,l(this,this.beginCollisionLoaderWallHandler));g.space.get_listeners().add(this.boxSensorListener);this.consListener=new Rg(ta.get_BREAK(),this.constraintType,l(this,this.ConstraintBreakHandler));g.space.get_listeners().add(this.consListener);this.boomTimer.addEventListener("timer",l(this,this.bah));this.stopwatchTimer.addEventListener("timer",l(this,this.countSeconds));this.endTimer.addEventListener("timer",l(this,this.endLevel));this.doorTimer.addEventListener("timer",
l(this,this.doorStiff));this.waitTimer.addEventListener("timer",l(this,this.waitForEnd));g.theGame.addEventListener("mouseDown",l(this,this.mouseDown));g.theGame.addEventListener("mouseUp",l(this,this.mouseUp));0==g.isMobileCheck?H.current.stage.addEventListener("mouseMove",l(this,this.mouseMove)):H.current.stage.addEventListener("touchMove",l(this,this.touchMove));0==g.isMobileCheck&&(H.current.stage.addEventListener("keyDown",l(this,this.keyPressed)),H.current.stage.addEventListener("keyUp",l(this,
this.keyReleased)));this.addEventListener("enterFrame",l(this,this.updateWorld));this.stopwatchTimer.start();this.gameOver&&this.endTimer.start();a=0;for(var b=this.trucks.length;a<b;){var c=a++;this.trucks[c].cargoLoad=!1}},touchMove:function(a){this.mx=this.get_mouseX();this.my=this.get_mouseY();a.preventDefault();1==g.isMobileCheck&&420<this.my||(-20>this.get_mouseX()||720<this.get_mouseX()||-20>this.get_mouseY()||520<this.get_mouseY()?(this.magnetActivate=!1,B.stopOneSound("SoundLoaderMagnet"),
B.stopOneSound("SoundLoaderMove")):(this.oldMousePosition.set(v.weak(this.mount.get_position().get_x()-this.mx,this.mount.get_position().get_y()-this.my)),null==a.target&&(n.__cast(this.truckLoaderBody.graphic,A).w1.set_rotation(this.tk1.graphic.get_rotation()),n.__cast(this.truckLoaderBody.graphic,A).w2.set_rotation(-this.tk1.graphic.get_rotation()))))},ConstraintBreakHandler:function(a){this.loaderDestroy()},loaderDestroy:function(){this.boomX=this.truckLoaderBody.get_position().get_x();this.boomY=
this.truckLoaderBody.get_position().get_y();this.rightKey=this.leftKey=this.upKey=!1;g.theGame.removeEventListener("mouseDown",l(this,this.mouseDown));g.theGame.removeEventListener("mouseUp",l(this,this.mouseUp));0==g.isMobileCheck?H.current.stage.removeEventListener("mouseMove",l(this,this.mouseMove)):H.current.stage.removeEventListener("touchMove",l(this,this.touchMove));g.space.get_constraints().remove(this.mouseJoint);this.mouseJoint=null;g.space.get_constraints().remove(this.mouseJoint2);this.mouseJoint2=
null;g.space.get_constraints().remove(this.groundLoaderJoint);g.space.get_constraints().remove(this.lineJointLoaderLeftWheel);g.space.get_constraints().remove(this.lineJointLoaderRightWheel);g.space.get_constraints().remove(this.mountCons);g.space.get_constraints().remove(this.pvLoaderSensor);this.gameScreen.removeChild(this.mount.graphic);this.mount.graphic=null;g.space.get_bodies().remove(this.mount);this.loaderBoom=!0;this.tk2.set_gravMass(.2);this.magnet.set_gravMass(.2);this.boomTimer.start();
this.Boom(this.boomX,this.boomY,!1,this.loaderBoom);this.gameOver=!0;this.endTimer.start();this.magnetActivate=!1;n.__cast(this.truckLoaderBody.graphic,A).get_transform().set_colorTransform(Cf.setTint(0,.1));n.__cast(this.tk1.graphic,A).get_transform().set_colorTransform(Cf.setTint(0,.1));n.__cast(this.tk2.graphic,A).get_transform().set_colorTransform(Cf.setTint(0,.1));n.__cast(this.magnet.graphic,A).get_transform().set_colorTransform(Cf.setTint(0,.1));n.__cast(this.loaderLeftWheel.graphic,A).get_transform().set_colorTransform(Cf.setTint(0,
.1));n.__cast(this.loaderRightWheel.graphic,A).get_transform().set_colorTransform(Cf.setTint(0,.1))},beginCollisionElevator:function(a){this.elevatorForCheck=a.get_arbiters().at(0).get_body2();a=a.get_arbiters().at(0).get_body1();"down"==n.__cast(this.elevatorForCheck.graphic,A).Direction&&this.elevatorForCheck.get_position().get_y()<a.get_position().get_y()&&this.elevatorForCheck.get_position().get_y()<n.__cast(this.elevatorForCheck.graphic,A).End-5&&this.elevatorsBlockCheck();"up"==n.__cast(this.elevatorForCheck.graphic,
A).Direction&&3E3<this.pressure(a)&&"magnet"!=a.get_userData().gameData&&this.elevatorsBlockCheck()},pressure:function(a){var b=0;a.get_arbiters().foreach(function(c){c=c.totalImpulse(a).xy();b+=c.get_length()});a.get_constraints().foreach(function(c){c=c.bodyImpulse(a).xy();b+=c.get_length()});return b},elevatorsBlockCheck:function(){n.__cast(this.elevatorForCheck.graphic,A).Enabled&&(0==B.pause&&(0==B.checkOneSound("SoundBoxHit")&&B.play("SoundBoxHit"),0==B.checkOneSound("SoundSparks")&&B.play("SoundSparks"),
"elevator0"==this.elevatorForCheck.get_userData().gameData&&(this.elevators[0].get_userData().moving=!1),"elevator1"==this.elevatorForCheck.get_userData().gameData&&(this.elevators[1].get_userData().moving=!1),"elevator2"==this.elevatorForCheck.get_userData().gameData&&(this.elevators[2].get_userData().moving=!1)),"elevator0"==this.elevatorForCheck.get_userData().gameData&&("up"==n.__cast(this.elevatorForCheck.graphic,A).Direction?this.elevatorsCons[0].get_anchor1().set_y(this.elevatorForCheck.get_position().get_y()+
7):this.elevatorsCons[0].get_anchor1().set_y(this.elevatorForCheck.get_position().get_y()-7),n.__cast(this.elevatorForCheck.graphic,A).Enabled=!1,n.__cast(this.elevatorForCheck.graphic,A).spark1.showBehavior("enable"),n.__cast(this.elevatorForCheck.graphic,A).spark2.showBehavior("enable"),0==n.__cast(this.elevatorForCheck.graphic,A).Try&&(this.elevatorTimer1.set_delay(1999),n.__cast(this.elevatorForCheck.graphic,A).Try+=1),2==n.__cast(this.elevatorForCheck.graphic,A).Try&&("down"==n.__cast(this.elevatorForCheck.graphic,
A).Direction?n.__cast(this.elevatorForCheck.graphic,A).Direction="up":n.__cast(this.elevatorForCheck.graphic,A).Direction="down",this.elevatorTimer1.set_delay(333),n.__cast(this.elevatorForCheck.graphic,A).Try+=1),this.elevatorTimer1.start()),"elevator1"==this.elevatorForCheck.get_userData().gameData&&("up"==n.__cast(this.elevatorForCheck.graphic,A).Direction?this.elevatorsCons[1].get_anchor1().set_y(this.elevatorForCheck.get_position().get_y()+7):this.elevatorsCons[1].get_anchor1().set_y(this.elevatorForCheck.get_position().get_y()-
7),n.__cast(this.elevatorForCheck.graphic,A).Enabled=!1,n.__cast(this.elevatorForCheck.graphic,A).spark1.showBehavior("enable"),n.__cast(this.elevatorForCheck.graphic,A).spark2.showBehavior("enable"),0==n.__cast(this.elevatorForCheck.graphic,A).Try&&(this.elevatorTimer2.set_delay(1999),n.__cast(this.elevatorForCheck.graphic,A).Try+=1),2==n.__cast(this.elevators[1].graphic,A).Try&&("down"==n.__cast(this.elevators[1].graphic,A).Direction?n.__cast(this.elevators[1].graphic,A).Direction="up":n.__cast(this.elevators[1].graphic,
A).Direction="down",this.elevatorTimer2.set_delay(333),n.__cast(this.elevatorForCheck.graphic,A).Try+=1),this.elevatorTimer2.start()),"elevator2"==this.elevatorForCheck.get_userData().gameData&&("up"==n.__cast(this.elevatorForCheck.graphic,A).Direction?this.elevatorsCons[2].get_anchor1().set_y(this.elevatorForCheck.get_position().get_y()+7):this.elevatorsCons[2].get_anchor1().set_y(this.elevatorForCheck.get_position().get_y()-7),n.__cast(this.elevatorForCheck.graphic,A).Enabled=!1,n.__cast(this.elevatorForCheck.graphic,
A).spark1.showBehavior("enable"),n.__cast(this.elevatorForCheck.graphic,A).spark2.showBehavior("enable"),0==n.__cast(this.elevatorForCheck.graphic,A).Try&&(this.elevatorTimer3.set_delay(1999),n.__cast(this.elevatorForCheck.graphic,A).Try+=1),2==n.__cast(this.elevators[2].graphic,A).Try&&("down"==n.__cast(this.elevators[2].graphic,A).Direction?n.__cast(this.elevators[2].graphic,A).Direction="up":n.__cast(this.elevators[2].graphic,A).Direction="down",this.elevatorTimer3.set_delay(333),n.__cast(this.elevatorForCheck.graphic,
A).Try+=1),this.elevatorTimer3.start()))},waitForEnd:function(a){ka.trace("waitForEnd",{fileName:"PlayState.hx",lineNumber:2887,className:"PlayState",methodName:"waitForEnd"});this.waitTimer.stop();this.stopTheGame();a=this.scores.getScore(this.pastTime,this.currentLevelNumber);this.goToNext(a)},stopTheGame:function(){g.space.get_listeners().remove(this.boxListener);g.space.get_listeners().remove(this.boxListenerEnd);g.space.get_listeners().remove(this.elevatorLoaderListener);g.space.get_listeners().remove(this.elevatorBoxesListener);
g.space.get_listeners().remove(this.loaderSensorListener);g.space.get_listeners().remove(this.loaderSensorListener2);g.space.get_listeners().remove(this.boxSensorListener);g.space.get_listeners().remove(this.consListener);for(var a=0,b=this.trucks.length;a<b;){var c=a++;this.trucks[c].truckGo.stop()}this.boomTimer.stop();this.endTimer.stop();this.doorTimer.stop();this.boomTimer.removeEventListener("timer",l(this,this.bah));this.stopwatchTimer.removeEventListener("timer",l(this,this.countSeconds));
this.endTimer.removeEventListener("timer",l(this,this.endLevel));this.doorTimer.removeEventListener("timer",l(this,this.doorStiff));this.waitTimer.removeEventListener("timer",l(this,this.waitForEnd));0<this.elevators.length&&(1<=this.elevators.length&&this.elevatorTimer1.stop(),2<=this.elevators.length&&this.elevatorTimer2.stop(),3<=this.elevators.length&&this.elevatorTimer3.stop());g.theGame.removeEventListener("mouseDown",l(this,this.mouseDown));g.theGame.removeEventListener("mouseUp",l(this,this.mouseUp));
0==g.isMobileCheck?H.current.stage.removeEventListener("mouseMove",l(this,this.mouseMove)):H.current.stage.removeEventListener("touchMove",l(this,this.touchMove));0==g.isMobileCheck&&(H.current.stage.removeEventListener("keyDown",l(this,this.keyPressed)),H.current.stage.removeEventListener("keyUp",l(this,this.keyReleased)));this.removeEventListener("enterFrame",l(this,this.updateWorld));this.stopwatchTimer.stop();this.downKey=this.upKey=this.rightKey=this.leftKey=!1;a=0;for(b=this.fracArray.length;a<
b;)c=a++,this.fracArray[c].fadeTimer.stop(),null!=this.fracArray[c].fractionBody&&(this.gameScreen.contains(this.fracArray[c].fractionBody.graphic)&&(this.gameScreen.removeChild(this.fracArray[c].fractionBody.graphic),this.fracArray[c].fractionBody.graphic=null),g.space.get_bodies().remove(this.fracArray[c].fractionBody));a=[];b=0;for(c=this.gameScreen.get_numChildren();b<c;){var d=b++;(800<Math.abs(this.gameScreen.getChildAt(d).get_x())||800<Math.abs(this.gameScreen.getChildAt(d).get_y()))&&a.push(this.gameScreen.getChildAt(d))}for(b=
0;b<a.length;)c=a[b],++b,this.gameScreen.removeChild(c);this.truckLoaderBody=null},doorStiff:function(a){this.doorTimer.stop();a=0;for(var b=this.doors.length;a<b;){var c=a++;this.doorsCons[c].set_stiff(!0)}},endLevel:function(a){this.endTimer.stop();this.goToRestart(null)},countSeconds:function(a){this.pastTime++;a=u["int"](this.pastTime/1E3);var b=u["int"]((this.pastTime-1E3*a)/100),c=u["int"]((this.pastTime-1E3*a-100*b)/10);this.scoreArray[0].showBehavior(null==a?"null":""+a);this.scoreArray[1].showBehavior(null==
b?"null":""+b);this.scoreArray[2].showBehavior(null==c?"null":""+c);this.scoreArray[3].showBehavior(u.string(this.pastTime-1E3*a-100*b-10*c));a=this.scores.getStars(this.pastTime,g.currentLevel);1==g.starCounter&&0==a&&this.goToSkip(null);g.starCounter=a;this.stars.showBehavior(null==a?"null":""+a)},mouseUp:function(a){a.preventDefault();0==g.isMobileCheck&&(this.magnetActivate=!1);this.craneMagnetActivate=!1;null!=this.craneBody&&(this.magnet.graphic.light.set_visible(!1),this.magnet.graphic.light.showBehavior("disable"));
B.stopOneSound("SoundLoaderMagnet");if(6>this.get_mouseX()||694<this.get_mouseX()||6>this.get_mouseY()||494<this.get_mouseY())this.magnetActivate=!1,B.stopOneSound("SoundLoaderMagnet"),B.stopOneSound("SoundLoaderMove"),this.upKey=this.rightKey=this.leftKey=!1},mouseDown:function(a){a.preventDefault();0==g.soundFirst&&(this.goToMusic(null),this.goToMusic(null),g.soundFirst=!0);"loader"==this.currentControl?0==g.isMobileCheck&&(this.magnetActivate=!0,0==B.checkOneSound("SoundLoaderMagnet")&&B.play("SoundLoaderMagnet",
!0)):(this.craneMagnetActivate=!0,this.craneMagnetBody.graphic.light.set_visible(!0),"disable"==this.craneMagnetBody.graphic.light.currentBehavior.name&&this.craneMagnetBody.graphic.light.showBehavior("enable"))},mouseMove:function(a){this.mx=this.get_mouseX();this.my=this.get_mouseY();a.preventDefault();if(!(1==g.isMobileCheck&&420<this.my))if(-90>this.get_mouseX()||860<this.get_mouseX()||6>this.get_mouseY()||494<this.get_mouseY())this.magnetActivate=!1,B.stopOneSound("SoundLoaderMagnet"),B.stopOneSound("SoundLoaderMove");
else if(null!=this.mouseJoint&&"loader"==this.currentControl){var b=this.mx-this.mount.get_position().get_x(),c=this.my-this.mount.get_position().get_y(),d=Math.atan2(b,c);b=Math.sqrt(b*b+c*c);c=this.clawDistance*Math.sin(d);d=this.clawDistance*Math.cos(d);b>this.clawDistance?(this.mouseJoint.get_anchor1().set_x(this.mount.get_position().get_x()+c),this.mouseJoint.get_anchor1().set_y(this.mount.get_position().get_y()+d),this.mouseJoint2.get_anchor1().set_x(this.mount.get_position().get_x()+c),this.mouseJoint2.get_anchor1().set_y(this.mount.get_position().get_y()+
d),this.tk2.set_gravMass(0),this.magnet.set_gravMass(0)):(this.mouseJoint.get_anchor1().set_x(this.mx),this.mouseJoint.get_anchor1().set_y(this.my),this.mouseJoint2.get_anchor1().set_x(this.mx),this.mouseJoint2.get_anchor1().set_y(this.my),this.tk2.set_gravMass(-.5),this.magnet.set_gravMass(-.5));b=this.magnet.get_position().get_x()-this.mount.get_position().get_x();c=this.magnet.get_position().get_y()-this.mount.get_position().get_y();b=Math.sqrt(b*b+c*c);30>b&&(this.tk2.set_gravMass(0),this.magnet.set_gravMass(0));
null==a.target&&(n.__cast(this.truckLoaderBody.graphic,A).w1.set_rotation(this.tk1.graphic.get_rotation()),n.__cast(this.truckLoaderBody.graphic,A).w2.set_rotation(-this.tk1.graphic.get_rotation()))}},newJointPosition:function(){this.mx=this.mount.get_position().get_x()-this.oldMousePosition.get_x();this.my=this.mount.get_position().get_y()-this.oldMousePosition.get_y();if(null!=this.mouseJoint&&"loader"==this.currentControl){var a=this.mx-this.mount.get_position().get_x(),b=this.my-this.mount.get_position().get_y(),
c=Math.atan2(a,b);a=Math.sqrt(a*a+b*b);b=this.clawDistance*Math.sin(c);c=this.clawDistance*Math.cos(c);a>this.clawDistance?(this.mouseJoint.get_anchor1().set_x(this.mount.get_position().get_x()+b),this.mouseJoint.get_anchor1().set_y(this.mount.get_position().get_y()+c),this.mouseJoint2.get_anchor1().set_x(this.mount.get_position().get_x()+b),this.mouseJoint2.get_anchor1().set_y(this.mount.get_position().get_y()+c),this.tk2.set_gravMass(0),this.magnet.set_gravMass(0)):(this.mouseJoint.get_anchor1().set_x(this.mx),
this.mouseJoint.get_anchor1().set_y(this.my),this.mouseJoint2.get_anchor1().set_x(this.mx),this.mouseJoint2.get_anchor1().set_y(this.my),this.tk2.set_gravMass(-.5),this.magnet.set_gravMass(-.5));a=this.magnet.get_position().get_x()-this.mount.get_position().get_x();b=this.magnet.get_position().get_y()-this.mount.get_position().get_y();a=Math.sqrt(a*a+b*b);30>a&&(this.tk2.set_gravMass(0),this.magnet.set_gravMass(0))}},beginCollisionLoaderWallHandler:function(a){this.loaderJump=!0;this.loaderWithBox=
!1;null!=this.magnetJoint2&&a.get_int2().get_userData().gameData==this.magnetJoint2.get_body2().get_userData().gameData&&(this.loaderWithBox=!0)},keyReleased:function(a){if(37==a.keyCode||65==a.keyCode)this.leftKey=!1,1==B.checkOneSound("SoundLoaderMove")&&B.stopOneSound("SoundLoaderMove");if(39==a.keyCode||68==a.keyCode)this.rightKey=!1,1==B.checkOneSound("SoundLoaderMove")&&B.stopOneSound("SoundLoaderMove");if(38==a.keyCode||87==a.keyCode||32==a.keyCode)this.upKey=!1;if(40==a.keyCode||83==a.keyCode)this.downKey=
!1;a.preventDefault()},keyPressed:function(a){if(1!=g.reward){82==a.keyCode&&(this.gameOver?(this.endTimer.stop(),this.goToRestart(null)):this.loaderDestroy());if(!this.gameOver){if(69==a.keyCode||17==a.keyCode)this.magnetActivate=this.magnetActivate?!1:!0;if(37==a.keyCode||65==a.keyCode)this.leftKey=!0,0==B.checkOneSound("SoundLoaderMove")&&B.play("SoundLoaderMove",!0);if(39==a.keyCode||68==a.keyCode)this.rightKey=!0,0==B.checkOneSound("SoundLoaderMove")&&B.play("SoundLoaderMove",!0);if(38==a.keyCode||
87==a.keyCode||32==a.keyCode)this.upKey=!0;if(40==a.keyCode||83==a.keyCode)this.downKey=!0}a.preventDefault()}},addMask:function(){1==g.maskesAddedM?(g.theGame.getChildByName("mask1"),g.theGame.getChildByName("mask2"),g.theGame.getChildByName("mask3"),g.theGame.getChildByName("mask4")):(this.mask1=new Ia(Na.getBitmapData("img/ui/blank.png")),this.mask2=new Ia(Na.getBitmapData("img/ui/blank.png")),this.mask3=new Ia(Na.getBitmapData("img/ui/blank.png")),this.mask4=new Ia(Na.getBitmapData("img/ui/blank.png")),
this.mask1.set_name("mask1"),this.mask2.set_name("mask2"),this.mask3.set_name("mask3"),this.mask4.set_name("mask4"),g.theGame.addChild(this.mask1),g.theGame.addChild(this.mask2),g.theGame.addChild(this.mask3),g.theGame.addChild(this.mask4));H.current.stage.stageHeight>H.current.stage.stageWidth?(this.mask1.set_width(853),this.mask1.set_height(g.offSetY/g.W),this.mask1.set_y(-g.offSetY/g.W),this.mask1.set_x(0),this.mask2.set_width(853),this.mask2.set_height(g.offSetY/g.W),this.mask2.set_y(480),this.mask2.set_x(0),
this.mask3.set_width(426.5),this.mask3.set_height(480),this.mask3.set_y(0),this.mask3.set_x(-400),this.mask4.set_width(853),this.mask4.set_height(480),this.mask4.set_y(0),this.mask4.set_x(853)):(this.mask1.set_width(g.offSetX/g.W),this.mask1.set_height(480),this.mask1.set_y(0),this.mask1.set_x(-g.offSetX/g.W-77),this.mask2.set_width(g.offSetX/g.W),this.mask2.set_height(480),this.mask2.set_x(773),this.mask2.set_y(0),this.mask3.set_visible(!1),this.mask4.set_visible(!1));g.maskesAddedM=!0},loadButtonPanel:function(){this.sound=
g.initAnimation("musicMini","ui");this.sound.buttonMode=!0;this.sound.addEventListener("mouseDown",l(this,this.goToSound));this.sound.addEventListener("mouseOver",l(this,this.overMouseSound));this.sound.addEventListener("mouseOut",l(this,this.outMouseSound));0==B.pause?this.sound.showBehavior("noSelectEnable"):this.sound.showBehavior("noSelectDisable");this.sound.set_x(-47);this.sound.set_y(190);this.sound.set_scaleX(1);this.sound.set_scaleY(1);this.sound.set_visible(!0);g.theGame.addChild(this.sound);
this.menu=g.initAnimation("menuMaxi","ui");g.theGame.addChild(this.menu);this.menu.showBehavior("out");this.menu.buttonMode=!0;this.menu.addEventListener("mouseOver",l(this,this.overMouse));this.menu.addEventListener("mouseOut",l(this,this.outMouse));this.menu.addEventListener("mouseDown",l(this,this.goToMenu));this.menu.set_x(-47);this.menu.set_y(90);this.menu.set_scaleX(1);this.menu.set_scaleY(1);this.music=g.initAnimation("soundMini","ui");g.theGame.addChild(this.music);this.music.showBehavior("out");
this.music.buttonMode=!0;this.music.addEventListener("mouseOver",l(this,this.overMouseSoundM));this.music.addEventListener("mouseOut",l(this,this.outMouseSoundM));this.music.addEventListener("mouseDown",l(this,this.goToMusic));0==B.loopPaused?this.music.showBehavior("noSelectEnable"):this.music.showBehavior("noSelectDisable");this.music.set_x(-47);this.music.set_y(140);this.music.set_scaleX(1);this.music.set_scaleY(1);this.restart=g.initAnimation("restartMaxi","ui");g.theGame.addChild(this.restart);
this.restart.showBehavior("out");this.restart.buttonMode=!0;this.restart.addEventListener("mouseOver",l(this,this.overMouse));this.restart.addEventListener("mouseOut",l(this,this.outMouse));this.restart.addEventListener("mouseDown",l(this,this.goToRestart));this.restart.set_x(-47);this.restart.set_y(40);this.restart.set_scaleX(1);this.restart.set_scaleY(1);1==g.isMobileCheck&&(this.leftBtn=g.initAnimation("BtnLeft","ui"),g.theGame.addChild(this.leftBtn),this.leftBtn.showBehavior("out"),this.leftBtn.buttonMode=
!0,this.leftBtn.addEventListener("touchBegin",l(this,this.goToLeft)),this.leftBtn.addEventListener("touchEnd",l(this,this.upLeft)),this.leftBtn.addEventListener("touchOut",l(this,this.upLeft)),this.leftBtn.addEventListener("touchOver",l(this,this.goToLeft)),this.leftBtn.set_x(40),this.leftBtn.set_y(440),this.leftBtn.set_scaleX(1.6),this.leftBtn.set_scaleY(1.6),this.leftBtn.set_alpha(.5),this.rightBtn=g.initAnimation("BtnRight","ui"),g.theGame.addChild(this.rightBtn),this.rightBtn.showBehavior("out"),
this.rightBtn.buttonMode=!0,this.rightBtn.addEventListener("touchBegin",l(this,this.goToRight)),this.rightBtn.addEventListener("touchEnd",l(this,this.upRight)),this.rightBtn.addEventListener("touchOut",l(this,this.upRight)),this.rightBtn.addEventListener("touchOver",l(this,this.goToRight)),this.rightBtn.set_x(120),this.rightBtn.set_y(440),this.rightBtn.set_scaleX(1.6),this.rightBtn.set_scaleY(1.6),this.rightBtn.set_alpha(.5),this.upBtn=g.initAnimation("BtnUp","ui"),g.theGame.addChild(this.upBtn),
this.upBtn.showBehavior("out"),this.upBtn.buttonMode=!0,this.upBtn.addEventListener("touchBegin",l(this,this.goToUp)),this.upBtn.addEventListener("touchEnd",l(this,this.upUp)),this.upBtn.set_x(560),this.upBtn.set_y(440),this.upBtn.set_scaleX(1.6),this.upBtn.set_scaleY(1.6),this.upBtn.set_alpha(.5),this.actBtn=g.initAnimation("BtnGoo","ui"),g.theGame.addChild(this.actBtn),this.actBtn.showBehavior("out"),this.actBtn.buttonMode=!0,this.actBtn.addEventListener("mouseOver",l(this,this.overMouse)),this.actBtn.addEventListener("mouseOut",
l(this,this.outMouse)),this.actBtn.addEventListener("touchBegin",l(this,this.goToAct)),this.actBtn.addEventListener("touchEnd",l(this,this.actUp)),this.actBtn.set_x(660),this.actBtn.set_y(440),this.actBtn.set_scaleX(1.6),this.actBtn.set_scaleY(1.6),this.actBtn.set_alpha(.5));this.timeA=g.initSpriteUI("ticon");this.timeA.set_x(745);this.timeA.set_y(30);this.timeA.set_scaleX(.5);this.timeA.set_scaleY(.5);this.timeA.mouseEnabled=!1;g.theGame.addChild(this.timeA);this.skipButton=g.initAnimation("skip",
"ui");this.skipButton.set_x(745);this.skipButton.set_y(150);this.skipButton.set_scaleX(.76);this.skipButton.set_scaleY(.76);this.skipButton.mouseEnabled=!0;this.skipButton.showBehavior("out");g.theGame.addChild(this.skipButton);this.skipButton.addEventListener("mouseOver",l(this,this.overMouse));this.skipButton.addEventListener("mouseOut",l(this,this.outMouse));this.skipButton.addEventListener("mouseDown",l(this,this.goToSkip));this.skipWindow=g.initSpriteUI("skipWindow");this.skipWindow.set_x(620);
this.skipWindow.set_y(150);this.skipWindow.set_scaleX(.76);this.skipWindow.set_scaleY(.76);this.skipWindow.mouseEnabled=!1;this.skipWindow.set_alpha(1);g.theGame.addChild(this.skipWindow);this.skipWindow.set_visible(!1);this.skipYes=g.initAnimation("skipYes","ui");this.skipYes.set_x(580);this.skipYes.set_y(175);this.skipYes.set_scaleX(.76);this.skipYes.set_scaleY(.76);this.skipYes.mouseEnabled=!0;this.skipYes.showBehavior("out");g.theGame.addChild(this.skipYes);this.skipYes.addEventListener("mouseOver",
l(this,this.overMouse));this.skipYes.addEventListener("mouseOut",l(this,this.outMouse));this.skipYes.addEventListener("mouseDown",l(this,this.goToYes));this.skipYes.set_visible(!1);this.skipNo=g.initAnimation("skipNo","ui");this.skipNo.set_x(660);this.skipNo.set_y(175);this.skipNo.set_scaleX(.76);this.skipNo.set_scaleY(.76);this.skipNo.mouseEnabled=!0;this.skipNo.showBehavior("out");g.theGame.addChild(this.skipNo);this.skipNo.addEventListener("mouseOver",l(this,this.overMouse));this.skipNo.addEventListener("mouseOut",
l(this,this.outMouse));this.skipNo.addEventListener("mouseDown",l(this,this.goToNo));this.skipNo.set_visible(!1);for(var a=0;4>a;){var b=a++;this.scoreArray[b]=g.initAnimation("digit","ui");this.scoreArray[b].set_x(726+12*b);this.scoreArray[b].set_y(60);this.scoreArray[b].set_scaleX(.3);this.scoreArray[b].set_scaleY(.3);this.scoreArray[b].mouseEnabled=!1;this.scoreArray[b].showBehavior("0");g.theGame.addChild(this.scoreArray[b])}this.stars=g.initAnimation("star","ui");this.stars.showBehavior("3");
this.stars.set_x(745);this.stars.set_y(90);this.stars.set_scaleX(.5);this.stars.set_scaleY(.5);this.stars.mouseEnabled=!1;g.theGame.addChild(this.stars);this.Score.set_text("something very long");this.Score.set_textColor(16777215);this.Score.set_width(700);this.Score.set_x(40);this.Score.set_y(40);this.Score2.set_text("something very long");this.Score2.set_width(700);this.Score2.set_textColor(16777215);this.Score2.set_x(100);this.Score2.set_y(40);this.Score2.mouseEnabled=!1;this.Score.mouseEnabled=
!1},upLeft:function(a){this.rightKey=this.leftKey=!1;1==B.checkOneSound("SoundLoaderMove")&&B.stopOneSound("SoundLoaderMove")},upRight:function(a){this.leftKey=this.rightKey=!1;1==B.checkOneSound("SoundLoaderMove")&&B.stopOneSound("SoundLoaderMove")},actUp:function(a){},upUp:function(a){this.upKey=!1;1==B.checkOneSound("SoundLoaderJump")&&B.stopOneSound("SoundLoaderJump")},goToRight:function(a){this.rightKey=!0;this.leftKey=!1;0==B.checkOneSound("SoundLoaderMove")&&B.play("SoundLoaderMove",!0)},goToLeft:function(a){this.leftKey=
!0;this.rightKey=!1;0==B.checkOneSound("SoundLoaderMove")&&B.play("SoundLoaderMove",!0)},goToUp:function(a){this.upKey=!0},goToAct:function(a){this.magnetActivate=this.magnetActivate?!1:!0},resizeStage:function(a){g.setXY(u["int"](H.current.stage.stageWidth),u["int"](H.current.stage.stageHeight));g.resizeGame();g.resizeStage(g.theGame);g.offsetPage()},loadUI:function(){var a=this.mainBackGround=new Ia(Na.getBitmapData("img/ui/bg.png"));a.set_x(a.get_x()-89);g.theGame.addChild(this.mainBackGround);
this.back=g.initSpriteBack(u.string(this.cLevel));a=new v(g.offsetBack[this.cLevel-1][0],g.offsetBack[this.cLevel-1][1]);this.back.set_x(-2+a.get_x());this.back.set_y(-2+a.get_y());this.back.smoothing=!0;this.back.set_visible(!0)},destroyLevel:function(a){this.dataFromJsonForParsing=this.gameScreen=this.mainBackGroundUI=this.mainBackGround=this.back=null},goToRestart:function(a){B.play("SoundGameButonsClick");PokiSDK.gameplayStop();g.showInterstital("restartPlay");a=this.mainBackGround3=g.initSpriteUI("menu");
a.set_x(a.get_x()+this.mainBackGround3.get_width()/2);a=this.mainBackGround3;a.set_y(a.get_y()+this.mainBackGround3.get_height()/2);this.mainBackGround3.set_cacheAsBitmap(!0);g.theGame.addChild(this.mainBackGround3)},goToRestartAfter:function(){B.play("SoundGameButonsClick");null!=this.mainBackGround3&&g.theGame.removeChild(this.mainBackGround3);this.stopTheGame();this.refreshWorld();this.clearState();g.offsetPage();H.trace("windows displayed");B.play("SoundGameButonsClick");var a=new od(this._parent,
this.cLevel);g.resizeGame();g.resizeStage(g.theGame);g.offsetPage();H.trace("windows displayed");g.theGame.addChild(a);g.blackScreenTween(a)},goToMusic:function(a){B.play("SoundGameButonsClick");0==B.loopPaused?(this.music.showBehavior("selectDisable"),B.stopLoop()):(B.resumeLoop(),this.music.showBehavior("selectEnable"))},goToNext:function(a){0==a&&(a=this.scores.getScore(this.pastTime,this.currentLevelNumber));PokiSDK.gameplayStop();B.stopOneSound("SoundLoaderMagnet");B.stopOneSound("SoundFeedGo");
B.stopOneSound("SoundLoaderMove");1==B.checkOneSound("SoundTruckEngineOn")&&B.stopOneSound("SoundTruckEngineOn");g.run=!1;this.stopTheGame();this.refreshWorld();this.clearState();31>this.cLevel&&(g.levelStateArray[this.cLevel]=1);var b=new Og(this._parent,this.cLevel,a);g.completedState=b;g.blackScreenTween(g.theGame);g.resizeGame();g.resizeStage(g.theGame);g.offsetPage();g.scoresArray[this.cLevel-1]<=a&&(g.scoresArray[this.cLevel-1]=a);g.starArray[this.cLevel-1]=g.starCounter;g.updateSaves();B.play("SoundGameButonsClick")},
goToMenu:function(a){PokiSDK.gameplayStop();this.stopTheGame();this.refreshWorld();this.clearState();a=new hf(this._parent);g.curSprite=a;g.blackScreenTween(a);g.offsetPage();g.resizeGame();g.resizeStage(g.curSprite);B.play("SoundGameButonsClick")},elevatorsCheck:function(a){for(var b=0,c=this.elevators.length;b<c;){var d=b++;n.__cast(this.elevators[d].graphic,A).spark1.update(a);n.__cast(this.elevators[d].graphic,A).spark2.update(a);if(n.__cast(this.elevators[d].graphic,A).Enabled){if("up"==u.string(n.__cast(this.elevators[d].graphic,
A).Direction))if(this.elevators[d].get_position().get_y()<n.__cast(this.elevators[d].graphic,A).Start+10.1*n.__cast(this.elevators[d].graphic,A).Speed)this.elevators[d].get_userData().moving=!1,n.__cast(this.elevators[d].graphic,A).Enabled=!1,n.__cast(this.elevators[d].graphic,A).AutoChange&&(n.__cast(this.elevators[d].graphic,A).Direction="down",n.__cast(this.elevators[d].graphic,A).Enabled=!1,0==d&&(this.elevatorTimer1.set_delay(n.__cast(this.elevators[d].graphic,A).StopTime),n.__cast(this.elevators[d].graphic,
A).Try=0,this.elevatorTimer1.start()),1==d&&(this.elevatorTimer2.set_delay(n.__cast(this.elevators[d].graphic,A).StopTime),n.__cast(this.elevators[d].graphic,A).Try=0,this.elevatorTimer2.start()),2==d&&(this.elevatorTimer3.set_delay(n.__cast(this.elevators[d].graphic,A).StopTime),n.__cast(this.elevators[d].graphic,A).Try=0,this.elevatorTimer3.start()));else{var e=this.elevatorsCons[d].get_anchor1();e.set_y(e.get_y()-n.__cast(this.elevators[d].graphic,A).Speed);e=n.__cast(this.elevators[d].graphic,
A).w1;e.set_rotation(e.get_rotation()+3*n.__cast(this.elevators[d].graphic,A).Speed);e=n.__cast(this.elevators[d].graphic,A).w2;e.set_rotation(e.get_rotation()-3*n.__cast(this.elevators[d].graphic,A).Speed)}"down"==u.string(n.__cast(this.elevators[d].graphic,A).Direction)&&(this.elevators[d].get_position().get_y()>n.__cast(this.elevators[d].graphic,A).End-10.1*n.__cast(this.elevators[d].graphic,A).Speed?(this.elevators[d].get_userData().moving=!1,n.__cast(this.elevators[d].graphic,A).Enabled=!1,n.__cast(this.elevators[d].graphic,
A).AutoChange&&(n.__cast(this.elevators[d].graphic,A).Direction="up",n.__cast(this.elevators[d].graphic,A).Enabled=!1,0==d&&(this.elevatorTimer1.set_delay(n.__cast(this.elevators[d].graphic,A).StopTime),n.__cast(this.elevators[d].graphic,A).Try=0,this.elevatorTimer1.start()),1==d&&(this.elevatorTimer2.set_delay(n.__cast(this.elevators[d].graphic,A).StopTime),n.__cast(this.elevators[d].graphic,A).Try=0,this.elevatorTimer2.start()),2==d&&(this.elevatorTimer3.set_delay(n.__cast(this.elevators[d].graphic,
A).StopTime),n.__cast(this.elevators[d].graphic,A).Try=0,this.elevatorTimer3.start()))):(e=this.elevatorsCons[d].get_anchor1(),e.set_y(e.get_y()+n.__cast(this.elevators[d].graphic,A).Speed),e=n.__cast(this.elevators[d].graphic,A).w1,e.set_rotation(e.get_rotation()-3*n.__cast(this.elevators[d].graphic,A).Speed),e=n.__cast(this.elevators[d].graphic,A).w2,e.set_rotation(e.get_rotation()+3*n.__cast(this.elevators[d].graphic,A).Speed)))}}},clearState:function(){B.stopLevelSounds(g.currentLevel);g.clear();
Ja.reset();g.previousLevel=this;for(ka.trace(g.theGame.get_numChildren(),{fileName:"PlayState.hx",lineNumber:4563,className:"PlayState",methodName:"clearState"});0<g.theGame.get_numChildren();){var a=g.theGame.getChildAt(0);g.theGame.removeChild(a);u.is(a,Ia)&&n.__cast(a,Ia).bitmapData.dispose()}this.destroyLevel(null);g.maskesAddedM=!1},overMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("over")},outMouse:function(a){n.__cast(a.currentTarget,A).showBehavior("out")},goToSkip:function(a){ka.trace("skip win",
{fileName:"PlayState.hx",lineNumber:4652,className:"PlayState",methodName:"goToSkip"});this.skipWindow.set_visible(!0);this.skipYes.set_visible(!0);this.skipNo.set_visible(!0);B.play("SoundGameButonsClick")},goToYes:function(a){ka.trace("skip yes",{fileName:"PlayState.hx",lineNumber:4661,className:"PlayState",methodName:"goToYes"});this.skipWindow.set_visible(!1);this.skipYes.set_visible(!1);this.skipNo.set_visible(!1);B.play("SoundGameButonsClick");PokiSDK.gameplayStop();g.showReward("reward")},
goToNo:function(a){ka.trace("skip no",{fileName:"PlayState.hx",lineNumber:4674,className:"PlayState",methodName:"goToNo"});this.skipWindow.set_visible(!1);this.skipYes.set_visible(!1);this.skipNo.set_visible(!1);B.play("SoundGameButonsClick")},refreshWorld:function(){g.space.get_constraints().clear();for(g.space.get_bodies().clear();0<this.gameScreen.get_numChildren();){var a=g.theGame.getChildAt(0);g.theGame.removeChild(a);u.is(a,Ia)&&n.__cast(a,Ia).bitmapData.dispose()}this.boxArray=[];this.fracArray=
[];this.buttons=[];this.coolers=[];this.transformators=[];this.doors=[];this.doorsCons=[];this.elevators=[];this.elevatorsEnd=[];this.elevatorsCons=[];this.cargoBox=[];this.transporters=[];this.lamps=[];this.shadows=[];this.trucks=[];this.gameMovieClips=[];this.craneMagnetActivate=this.magnetActivate=!1},endCollisionBoxHandler:function(a){if(a.get_int1().get_userData().boxId==this.craneBoxId||a.get_int2().get_userData().boxId==this.craneBoxId)this.craneMagnetTouch=!1},beginCollisionBoxHandler:function(a){B.play("SoundBoxHit");
if(0<a.get_arbiters().get_length()){if("DangerBox"==a.get_arbiters().at(0).get_body1().get_userData().gameData){var b=a.get_arbiters().at(0).get_body1();var c=new v(b.normalImpulse(a.get_arbiters().at(0).get_body2()).get_x(),b.normalImpulse(a.get_arbiters().at(0).get_body2()).get_y())}else b=a.get_arbiters().at(0).get_body2(),c=new v(b.normalImpulse(a.get_arbiters().at(0).get_body1()).get_x(),b.normalImpulse(a.get_arbiters().at(0).get_body1()).get_y());a.get_arbiters().at(0).get_body1().get_userData().boxId!=
this.craneBoxId&&a.get_arbiters().at(0).get_body2().get_userData().boxId!=this.craneBoxId||null==this.craneMagnetJoint||(this.craneMagnetTouch=!0);a=Math.sqrt(c.get_x()*c.get_x()+c.get_y()*c.get_y())/800*382.5;if(50<u["int"](a)&&"DangerBox"==b.get_userData().gameData){this.magnetActivate=!1;null!=this.magnetJoint&&(g.space.get_constraints().remove(this.magnetJoint),this.magnetJoint=null);null!=this.magnetJoint2&&(g.space.get_constraints().remove(this.magnetJoint2),this.magnetJoint2=null);null!=this.magnetJoint3&&
(g.space.get_constraints().remove(this.magnetJoint3),this.magnetJoint3=null);this.boomX=b.get_position().get_x();this.boomY=b.get_position().get_y();c=n.__cast(b.graphic,A).BoxId;a=n.__cast(b.graphic,A).get_rotation();this.boxVelocity=b.get_velocity();this.gameScreen.removeChild(b.graphic);g.space.get_bodies().remove(b);for(var d=0,e=this.boxArray.length;d<e;){var f=d++;if(c==n.__cast(this.boxArray[f].graphic,A).BoxId){this.boxArray[f]=this.boxArray[0];this.boxArray.shift();break}}b.graphic=null;
this.loaderBoom=!1;b=0;for(c=this.transformators.length;b<c;)d=b++,e=this.transformators[d].transGraphic.get_x()-this.boomX,f=this.transformators[d].transGraphic.get_y()-this.boomY,90>Math.sqrt(e*e+f*f)&&0==this.transformators[d].transBroken&&(this.transformators[d].transGraphic.showBehavior("disable"),this.transformators[d].transGraphic.update(1),this.transformators[d].transBroken=!0,this.transformators[d].sparksTimer.start(),this.doorsCheck(this.transformators[d].transSwitch),this.rollsSwitch(this.transformators[d].transSwitch),
this.lampsSwitch(this.transformators[d].transSwitch));this.boomTimer.start();this.Boom(this.boomX,this.boomY,!1,!1,a)}}},bah:function(a){this.boomTimer.stop();a=g.initAnimation("TFXBoom","ui");a.showBehavior("enable");this.boomSprite.push(a);this.Boom(this.boomX,this.boomY+10,!0,this.loaderBoom);this.gameScreen.addChild(a);a.set_x(this.boomX);a.set_y(this.boomY);a.set_visible(!0);a.mouseEnabled=!1;B.play("SoundBlast");B.play("SoundBlast")},Boom:function(a,b,c,d,e){null==d&&(d=!1);if(c){c=0;for(e=
this.fracArray.length;c<e;){var f=c++;f=this.fracArray[f].fractionBody;if(null!=f&&(f.get_position().get_x()!=a||f.get_position().get_y()!=b)){var m=f.get_position().get_x()-a,h=f.get_position().get_y()-b;Math.sqrt(m*m+h*h)<this.bombZone/2+20&&(m=this.bombForceDefault/m,h=this.bombForceDefault/h,f.applyImpulse(new v(m,h),new v(0,0)))}}d&&(this.truckLoaderBody.applyImpulse(new v(0,-50),new v(0,0)),this.tk1.applyImpulse(new v(-50,-50),new v(0,0)),this.loaderLeftWheel.applyImpulse(new v(-600,-450),new v(-10,
0)),this.loaderRightWheel.applyImpulse(new v(600,-450),new v(10,0)))}},updateWorld:function(a){this.counterUpdater++;if(0==g.isMobileCheck){if(-90>this.get_mouseX()||870<this.get_mouseX()||4>this.get_mouseY()||494<this.get_mouseY()){this.magnetActivate=!1;B.stopOneSound("SoundLoaderMagnet");B.stopOneSound("SoundLoaderMove");this.upKey=this.rightKey=this.leftKey=!1;return}}else if(-100>this.get_mouseX()||860<this.get_mouseX()||-20>this.get_mouseY()||520<this.get_mouseY()){this.magnetActivate=!1;B.stopOneSound("SoundLoaderMagnet");
B.stopOneSound("SoundLoaderMove");this.upKey=this.rightKey=this.leftKey=!1;return}a=H.getTimer();var b=a-this.lastTime;this.sound.update(b);this.menu.update(b);this.music.update(b);this.restart.update(b);for(var c=0;4>c;){var d=c++;this.scoreArray[d].update(b)}this.stars.update(b);this.Score.set_text(u.string(g.frameRate));for(c=g.space.get_bodies().iterator();c.hasNext();)d=c.next(),d.isStatic()||null==d.graphic||(d.graphic.set_x(d.get_position().get_x()),d.graphic.set_y(d.get_position().get_y()),
d.graphic.set_rotation(180*d.get_rotation()/Math.PI%360));g.mousePoint=new v(u["int"](this.get_mouseX()),u["int"](this.get_mouseY()));if(1==g.run){g.space.step(1/g.frameRate);c=0;for(d=this.shadows;c<d.length;){var e=d[c];++c;e.update(b)}c=0;for(d=this.lamps;c<d.length;)e=d[c],++c,e.update(b);c=0;for(d=this.boomSprite;c<d.length;)e=d[c],++c,e.update(b);null!=this.magnet&&this.magnet.graphic.light.update(b)}if(0==g.isMobileCheck&&0!=this.counterUpdater%3||1==g.isMobileCheck&&0==this.counterUpdater%
2||9==g.currentLevel)0<this.buttons.length&&this.ButtonsCheck(b),this.dxb=this.groundLoaderJoint.get_anchor1().get_x()-this.tk1.get_position().get_x(),this.dyb=this.groundLoaderJoint.get_anchor1().get_y()-this.tk1.get_position().get_y(),this.rastb=Math.sqrt(this.dxb*this.dxb+this.dyb*this.dyb);0<this.coolers.length&&this.coolersCheck();0<this.elevators.length&&this.elevatorsCheck(b);0<this.transporters.length&&this.rollsCheck();this.elevatorsMove=!1;c=0;for(d=this.elevators.length;c<d;)e=c++,this.elevators[e].get_userData().moving&&
(this.elevatorsMove=!0);40<this.rastb&&0==this.gameOver&&this.loaderDestroy();c=0;for(d=this.trucks.length;c<d;){e=c++;if(1==this.trucks[e].going&&(this.trucks[e].counter++,1<this.trucks[e].counter)){var f=this.trucks[e].leftWheelTruck.get_position();f.set_x(f.get_x()+this.trucks[e].counter/2);f=this.trucks[e].rightWheelTruck.get_position();f.set_x(f.get_x()+this.trucks[e].counter/2);ka.trace("update tic"+this.trucks[e].leftWheelTruck.get_position().get_x(),{fileName:"PlayState.hx",lineNumber:5116,
className:"PlayState",methodName:"updateWorld"})}this.trucks[e].stopSignal.update(b);this.trucks[e].cargo.set_x(this.trucks[e].truckBody.get_position().get_x()+n.__cast(this.trucks[e].truckBody.graphic,A).cargo.get_x());this.trucks[e].cargo.set_y(this.trucks[e].truckBody.get_position().get_y()+n.__cast(this.trucks[e].truckBody.graphic,A).cargo.get_y());n.__cast(this.trucks[e].truckBody.graphic,A).set_x(this.trucks[e].truckBody.get_position().get_x()+13);n.__cast(this.trucks[e].truckBody.graphic,A).set_y(this.trucks[e].truckBody.get_position().get_y()-
12);n.__cast(this.truckLoaderBody.graphic,A).hitTestObject(n.__cast(this.trucks[e].truckBody.graphic,A).cargo)?this.loaderInCargo=!0:this.loaderInCargo=!1;this.trucks[e].boxCount=0;this.checkTruckCargo(e);this.trucks[e].boxCount==this.trucks[e].boxSum?(0==this.trucks[e].cargoLoad&&0==B.checkOneSound("SoundTruckEngineOn")&&B.play("SoundTruckEngineOn"),this.trucks[e].cargoLoad=!0,this.trucks[e].stopSignal.set_visible(!0),1<this.trucks.length?null!=this.outLight&&(this.trucks[0].cargoLoad||this.trucks[1].cargoLoad)&&
"enable"!=this.outLight.currentBehavior.name&&this.outLight.showBehavior("enable"):null!=this.outLight&&"enable"!=this.outLight.currentBehavior.name&&this.outLight.showBehavior("enable")):(this.trucks[e].cargoLoad&&1==B.checkOneSound("SoundTruckEngineOn")&&B.stopOneSound("SoundTruckEngineOn"),this.trucks[e].cargoLoad=!1,this.trucks[e].stopSignal.set_visible(!1),1<this.trucks.length?null!=this.outLight&&0==this.trucks[0].cargoLoad&&0==this.trucks[1].cargoLoad&&this.outLight.showBehavior("disable"):
null!=this.outLight&&this.outLight.showBehavior("disable"));this.outLight.update(b);if(this.trucks[e].cargoLoad&&!this.loaderInCargo&&!this.craneMagnetInCargo){0==this.trucks[e].leftWheelTruck.get_allowMovement()&&0==B.checkOneSound("SoundTruckSignal")&&B.play("SoundTruckSignal");this.trucks[e].leftWheelTruck.set_allowMovement(!0);this.trucks[e].leftWheelTruck.set_allowRotation(!0);this.trucks[e].rightWheelTruck.set_allowMovement(!0);this.trucks[e].leftWheelTruck.set_allowRotation(!0);this.trucks[e].rightWheelTruck.set_allowRotation(!0);
this.trucks[e].stopSignal.set_visible(!1);null!=this.outLight&&this.outLight.showBehavior("disable");f=0;for(var m=this.boxArray;f<m.length;){var h=m[f];++f;1==h.get_userData().isCargo&&null==h.get_userData().con&&9==g.currentLevel&&(h.get_userData().con=!0,h=new Wb(h,this.trucks[e].truckBody,h.worldPointToLocal(h.get_position(),!0),this.trucks[e].truckBody.worldPointToLocal(h.get_position(),!0)),h.set_stiff(!0),g.space.get_constraints().add(h),h.set_ignore(!0))}this.trucks[e].truckGo.start();e=0;
for(f=this.boxArray.length;e<f;)m=e++,this.boxArray[m].get_userData().isCargo&&(this.boxArray[m].set_gravMass(20),this.boxArray[m].get_shapes().at(0).get_material().set_staticFriction(20),this.boxArray[m].get_shapes().at(0).get_material().set_dynamicFriction(20))}this.checkTrucksPosition()&&!this.gameOver&&this.waitTimer.start()}this.groundLoaderJoint.get_anchor1().set_x(this.mount.get_position().get_x());this.groundLoaderJoint.get_anchor1().set_y(this.mount.get_position().get_y());this.rightKey?
(this.loaderLeftWheel.set_angularVel(this.loaderSpeed-1),this.loaderRightWheel.set_angularVel(this.loaderSpeed-1)):this.leftKey?(this.loaderLeftWheel.set_angularVel(-this.loaderSpeed+1),this.loaderRightWheel.set_angularVel(-this.loaderSpeed+1)):this.stopLoaderWheelsRotation();1==g.isMobileCheck&&0==b%2&&this.newJointPosition();this.upKey&&this.loaderJump&&0==this.loaderWithBox&&(this.loaderJump=!1,B.play("SoundLoaderJump"),this.leftKey?90>Math.abs(n.__cast(this.truckLoaderBody.graphic,A).get_rotation())?
this.truckLoaderBody.applyImpulse(new v(0,-2300),this.truckLoaderBody.localPointToWorld(new v(-9,-1))):this.loaderRightWheel.get_position().get_y()>this.loaderLeftWheel.get_position().get_y()&&120>Math.abs(n.__cast(this.truckLoaderBody.graphic,A).get_rotation())?this.truckLoaderBody.applyImpulse(new v(500,-2300),this.truckLoaderBody.localPointToWorld(new v(10,0))):this.truckLoaderBody.applyImpulse(new v(0,-2300),this.truckLoaderBody.localPointToWorld(new v(9,-1))):this.rightKey?90>Math.abs(n.__cast(this.truckLoaderBody.graphic,
A).get_rotation())?this.truckLoaderBody.applyImpulse(new v(0,-2300),this.truckLoaderBody.localPointToWorld(new v(9,-1))):this.loaderRightWheel.get_position().get_y()<this.loaderLeftWheel.get_position().get_y()&&120>Math.abs(n.__cast(this.truckLoaderBody.graphic,A).get_rotation())?this.truckLoaderBody.applyImpulse(new v(500,-2300),this.truckLoaderBody.localPointToWorld(new v(-10,0))):this.truckLoaderBody.applyImpulse(new v(0,-2300),this.truckLoaderBody.localPointToWorld(new v(-9,-1))):this.truckLoaderBody.applyImpulse(new v(0,
-2300),this.truckLoaderBody.localPointToWorld(new v(-1.5,0))),this.upKey=!1);if(this.magnetActivate&&null==this.magnetJoint&&null==this.magnetJoint2)for(this.magnet.graphic.light.set_visible(!0),"disable"==this.magnet.graphic.light.currentBehavior.name&&this.magnet.graphic.light.showBehavior("enable"),b=0,c=this.boxArray.length;b<c;)if(d=b++,this.magnet.graphic.beam.hitTestObject(this.boxArray[d].graphic)){this.magnetJoint=new Wb(this.magnet,this.boxArray[d],this.magnet.worldPointToLocal(new v(this.magnet.get_position().get_x(),
this.magnet.get_position().get_y())),this.boxArray[d].worldPointToLocal(new v(this.boxArray[d].get_position().get_x(),this.boxArray[d].get_position().get_y())));this.magnetJoint.set_stiff(!1);this.magnetJoint.set_maxForce(901);this.magnetJoint.set_damping(.3);g.space.get_constraints().add(this.magnetJoint);break}null==this.magnetJoint||this.magnet.graphic.beam.hitTestObject(this.magnetJoint.get_body2().graphic)||(g.space.get_constraints().remove(this.magnetJoint),this.magnetJoint=null);null!=this.magnetJoint&&
this.magnet.graphic.magnetic1.hitTestObject(this.magnetJoint.get_body2().graphic)&&this.magnet.graphic.magnetic2.hitTestObject(this.magnetJoint.get_body2().graphic)&&(this.magnet.graphic.light.set_visible(!1),this.magnet.graphic.light.showBehavior("disable"),this.magnetJoint2=new Wb(this.magnet,this.magnetJoint.get_body2(),this.magnet.worldPointToLocal(new v(this.magnetJointPoint.get_worldCOM().get_x(),this.magnetJointPoint.get_worldCOM().get_y())),this.magnetJoint.get_body2().worldPointToLocal(new v(this.magnetJointPoint.get_worldCOM().get_x(),
this.magnetJointPoint.get_worldCOM().get_y()))),this.magnetJoint2.set_maxForce(5E3),g.space.get_constraints().add(this.magnetJoint2),this.magnetJoint3=new Wb(this.magnet,this.magnetJoint.get_body2(),this.magnet.worldPointToLocal(new v(this.magnetJointPoint2.get_worldCOM().get_x(),this.magnetJointPoint2.get_worldCOM().get_y())),this.magnetJoint.get_body2().worldPointToLocal(new v(this.magnetJointPoint2.get_worldCOM().get_x(),this.magnetJointPoint2.get_worldCOM().get_y()))),this.magnetJoint3.set_maxForce(5E3),
g.space.get_constraints().add(this.magnetJoint3),g.space.get_constraints().remove(this.magnetJoint),this.magnetJoint=null,B.stopOneSound("SoundLoaderMagnet"));this.magnetActivate||(this.magnet.graphic.light.set_visible(!1),this.magnet.graphic.light.showBehavior("disable"),null!=this.magnetJoint&&(g.space.get_constraints().remove(this.magnetJoint),this.magnetJoint=null),null!=this.magnetJoint2&&(g.space.get_constraints().remove(this.magnetJoint2),this.magnetJoint2=null),null!=this.magnetJoint3&&(g.space.get_constraints().remove(this.magnetJoint3),
this.magnetJoint3=null));700<this.truckLoaderBody.get_position().get_y()&&this.goToRestart(null);this.lastTime=a},coolersCheck:function(){for(var a=0,b=this.coolers.length;a<b;){var c=a++;c=this.coolers[c].blades;c.set_rotation(c.get_rotation()+10)}},stopLoaderWheelsRotation:function(){this.loaderLeftWheel.set_angularVel(0);this.loaderRightWheel.set_angularVel(0)},checkTrucksPosition:function(){for(var a=!0,b=0,c=this.trucks.length;b<c;){var d=b++;810>this.trucks[d].leftWheelTruck.get_position().get_x()&&
(a=!1)}return a},doorsCheck:function(a){for(var b=g.addKoef,c=0,d=this.doors.length;c<d;){var e=c++;if(n.__cast(this.doors[e].graphic,A).Switch==a)if(this.doorTimer.stop(),this.doorsCons[e].set_stiff(!1),this.doorTimer.start(),B.play("SoundDoor"),1==this.doors[e].graphic.Closed){if("down"==n.__cast(this.doors[e].graphic,A).OpenDirection){var f=this.doorsCons[e].get_anchor1();f.set_y(f.get_y()+(n.__cast(this.doors[e].graphic,A).get_height()-2))}"up"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),
f.set_y(f.get_y()-(this.doors[e].graphic.get_height()-2)));"left"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()-(this.doors[e].graphic.get_width()-2)));"right"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()+(this.doors[e].graphic.get_width()+b-2)));"upright"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()-(this.doors[e].graphic.get_height()-2)),f=this.doorsCons[e].get_anchor1(),
f.set_x(f.get_x()+(this.doors[e].graphic.get_width()-2)));"downleft"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()+(this.doors[e].graphic.get_height()-2)),f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()-(this.doors[e].graphic.get_width()-2)));"upleft"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()-(this.doors[e].graphic.get_height()-2)),f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()-(this.doors[e].graphic.get_width()-
2)));"downright"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()+(this.doors[e].graphic.get_height()-2)),f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()+(this.doors[e].graphic.get_width()-2)));this.doors[e].graphic.Closed=!1}else"down"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()-(this.doors[e].graphic.get_height()-2))),"up"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()+
(this.doors[e].graphic.get_height()-2))),"left"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()+(this.doors[e].graphic.get_width()-2))),"right"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()-(this.doors[e].graphic.get_width()+b-2))),"upright"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()+(this.doors[e].graphic.get_height()-2)),f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()-
(this.doors[e].graphic.get_width()-2))),"downleft"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()-(this.doors[e].graphic.get_height()-2)),f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()+(this.doors[e].graphic.get_width()-2))),"upleft"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()+(this.doors[e].graphic.get_height()-2)),f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()+(this.doors[e].graphic.get_width()-
2))),"downright"==this.doors[e].graphic.OpenDirection&&(f=this.doorsCons[e].get_anchor1(),f.set_y(f.get_y()-(this.doors[e].graphic.get_height()-2)),f=this.doorsCons[e].get_anchor1(),f.set_x(f.get_x()-(this.doors[e].graphic.get_width()-2))),this.doors[e].graphic.Closed=!0}},checkTruckCargo:function(a){for(var b=0,c=this.trucks[a].cargo.get_numChildren();b<c;)for(var d=b++,e=0,f=this.boxArray.length;e<f;){var m=e++;this.cargoString=u.string(n.__cast(this.trucks[a].cargo.getChildAt(d),A).get_name()).substring(0,
u.string(n.__cast(this.trucks[a].cargo.getChildAt(d),A).get_name()).length-1);if("SquareBox"==this.cargoString||"VerticalBox"==this.cargoString||"BigBo"==this.cargoString||"SmallBarel"==this.cargoString||"BigBarel"==this.cargoString){var h=this.trucks[a].cargo.get_x()+this.trucks[a].cargo.getChildAt(d).get_x(),q=this.trucks[a].cargo.get_y()+this.trucks[a].cargo.getChildAt(d).get_y();this.trucks[a].cargo.getChildAt(d).get_transform().get_colorTransform();if(3>=Math.abs(this.boxArray[m].get_position().get_x()-
h)&&3>=Math.abs(this.boxArray[m].get_position().get_y()-q)&&this.boxArray[m].get_userData().gameData==this.cargoString){this.trucks[a].boxCount++;this.boxArray[m].setShapeMaterials(new Oa(.2,.2,.38,.7));this.boxArray[m].get_userData().isCargo=!0;n.__cast(this.trucks[a].cargo.getChildAt(d),A).showBehavior("2");n.__cast(this.trucks[a].cargo.getChildAt(d),A).update(1);break}else n.__cast(this.trucks[a].cargo.getChildAt(d),A).showBehavior("1"),n.__cast(this.trucks[a].cargo.getChildAt(d),A).update(1)}}},
elevatorsSwitch:function(a){for(var b=0,c=this.elevators.length;b<c;){var d=b++;n.__cast(this.elevators[d].graphic,A).Activate==a&&(0==d&&(this.elevatorTimer1.running?this.elevatorTimer1.stop():(n.__cast(this.elevators[d].graphic,A).Enabled=!n.__cast(this.elevators[d].graphic,A).Enabled,this.elevators[d].get_userData().started=n.__cast(this.elevators[d].graphic,A).Enabled,n.__cast(this.elevators[d].graphic,A).Enabled?(0==B.checkOneSound("SoundLiftOn")&&B.play("SoundLiftOn"),this.elevators[d].get_userData().moving=
!0):(1==B.checkOneSound("SoundLiftOff")&&B.stopOneSound("SoundLiftOff"),this.elevators[d].get_userData().moving=!1))),1==d&&(this.elevatorTimer2.running?this.elevatorTimer2.stop():(n.__cast(this.elevators[d].graphic,A).Enabled=!n.__cast(this.elevators[d].graphic,A).Enabled,this.elevators[d].get_userData().started=n.__cast(this.elevators[d].graphic,A).Enabled,n.__cast(this.elevators[d].graphic,A).Enabled?(0==B.checkOneSound("SoundLiftOn")&&B.play("SoundLiftOn"),this.elevators[d].get_userData().moving=
!0):(1==B.checkOneSound("SoundLiftOff")&&B.stopOneSound("SoundLiftOff"),this.elevators[d].get_userData().moving=!1))),2==d&&(this.elevatorTimer3.running?this.elevatorTimer3.stop():(n.__cast(this.elevators[d].graphic,A).Enabled=!n.__cast(this.elevators[d].graphic,A).Enabled,this.elevators[d].get_userData().started=n.__cast(this.elevators[d].graphic,A).Enabled,n.__cast(this.elevators[d].graphic,A).Enabled?(0==B.checkOneSound("SoundLiftOn")&&B.play("SoundLiftOn"),this.elevators[d].get_userData().moving=
!0):(1==B.checkOneSound("SoundLiftOff")&&B.stopOneSound("SoundLiftOff"),this.elevators[d].get_userData().moving=!1))));n.__cast(this.elevators[d].graphic,A).ChangeDirection==a&&(0==d&&this.elevatorTimer1.stop(),1==d&&this.elevatorTimer2.stop(),2==d&&this.elevatorTimer3.stop(),"down"==n.__cast(this.elevators[d].graphic,A).Direction?n.__cast(this.elevators[d].graphic,A).Direction="up":n.__cast(this.elevators[d].graphic,A).Direction="down",n.__cast(this.elevators[d].graphic,A).Enabled=!0)}},rollsSwitch:function(a){for(var b=
0,c=this.transporters.length;b<c;){var d=b++;n.__cast(this.transporters[d].base.graphic,A).Activate==a&&(n.__cast(this.transporters[d].base.graphic,A).Enabled=!n.__cast(this.transporters[d].base.graphic,A).Enabled);n.__cast(this.transporters[d].base.graphic,A).ChangeDirection==a&&("left"==n.__cast(this.transporters[d].base.graphic,A).Direction?n.__cast(this.transporters[d].base.graphic,A).Direction="right":n.__cast(this.transporters[d].base.graphic,A).Direction="left")}},ButtonsCheck:function(a){for(var b=
0,c=this.buttons.length;b<c;){for(var d=b++,e=n.__cast(this.buttons[d],ee).hitPoints=0,f=this.boxArray.length;e<f;){var m=e++;n.__cast(this.boxArray[m].graphic,A).hitTestObject(n.__cast(this.buttons[d].animB,A))&&(n.__cast(this.buttons[d],ee).hitPoints++,0==this.buttons[d].animB.currentFrameIndex&&"GreenButton"==this.buttons[d].colorB&&"off"==this.buttons[d].animB.currentBehavior.name&&(this.buttons[d].animB.showBehavior("on"),this.doorsCheck(this.buttons[d].sw),this.elevatorsSwitch(this.buttons[d].sw),
this.rollsSwitch(this.buttons[d].sw),this.lampsSwitch(this.buttons[d].sw)),(0==this.buttons[d].animB.currentFrameIndex&&"on"==this.buttons[d].animB.currentBehavior.name||9==this.buttons[d].animB.currentFrameIndex&&"offon"==this.buttons[d].animB.currentBehavior.name)&&"OrangeButton"==this.buttons[d].colorB&&(this.buttons[d].animB.showBehavior("active"),this.doorsCheck(this.buttons[d].sw),this.elevatorsSwitch(this.buttons[d].sw),this.rollsSwitch(this.buttons[d].sw),this.lampsSwitch(this.buttons[d].sw)),
10<=this.buttons[d].animB.currentFrameIndex&&"OrangeButton"==this.buttons[d].colorB&&this.buttons[d].animB.showBehavior("off"),(0==this.buttons[d].animB.currentFrameIndex&&"on"==this.buttons[d].animB.currentBehavior.name||9==this.buttons[d].animB.currentFrameIndex&&"offon"==this.buttons[d].animB.currentBehavior.name)&&"BlueButton"==this.buttons[d].colorB&&(this.buttons[d].animB.showBehavior("active"),this.doorsCheck(this.buttons[d].sw),this.elevatorsSwitch(this.buttons[d].sw),this.rollsSwitch(this.buttons[d].sw),
this.lampsSwitch(this.buttons[d].sw)),10<=this.buttons[d].animB.currentFrameIndex&&"BlueButton"==this.buttons[d].colorB&&this.buttons[d].animB.showBehavior("off"))}if(n.__cast(this.loaderLeftWheel.graphic,A).sensor.hitTestObject(this.buttons[d].animB)||n.__cast(this.loaderRightWheel.graphic,A).sensor.hitTestObject(this.buttons[d].animB)||n.__cast(this.magnet.graphic.magnet,A).hitTestObject(this.buttons[d].animB)||this.truckLoaderBody.graphic.hitTestObject(this.buttons[d].animB)||this.MiningLeftWheel.graphic.hitTestObject(this.buttons[d].animB)||
this.MiningRightWheel.graphic.hitTestObject(this.buttons[d].animB)||this.MiningBody.graphic.hitTestObject(this.buttons[d].animB))n.__cast(this.buttons[d],ee).hitPoints++,0==this.buttons[d].animB.currentFrameIndex&&"GreenButton"==this.buttons[d].colorB&&"off"==this.buttons[d].animB.currentBehavior.name&&(this.buttons[d].animB.showBehavior("on"),this.doorsCheck(this.buttons[d].sw),this.elevatorsSwitch(this.buttons[d].sw),this.rollsSwitch(this.buttons[d].sw),this.lampsSwitch(this.buttons[d].sw)),(0==
this.buttons[d].animB.currentFrameIndex&&"on"==this.buttons[d].animB.currentBehavior.name||9==this.buttons[d].animB.currentFrameIndex&&"offon"==this.buttons[d].animB.currentBehavior.name)&&"OrangeButton"==this.buttons[d].colorB&&(this.buttons[d].animB.showBehavior("active"),this.doorsCheck(this.buttons[d].sw),this.elevatorsSwitch(this.buttons[d].sw),this.rollsSwitch(this.buttons[d].sw),this.lampsSwitch(this.buttons[d].sw)),10<=this.buttons[d].animB.currentFrameIndex&&"OrangeButton"==this.buttons[d].colorB&&
this.buttons[d].animB.showBehavior("off"),(0==this.buttons[d].animB.currentFrameIndex&&"on"==this.buttons[d].animB.currentBehavior.name||9==this.buttons[d].animB.currentFrameIndex&&"offon"==this.buttons[d].animB.currentBehavior.name)&&"BlueButton"==this.buttons[d].colorB&&(this.buttons[d].animB.showBehavior("active"),this.doorsCheck(this.buttons[d].sw),this.elevatorsSwitch(this.buttons[d].sw),this.rollsSwitch(this.buttons[d].sw),this.lampsSwitch(this.buttons[d].sw)),10<=this.buttons[d].animB.currentFrameIndex&&
"BlueButton"==this.buttons[d].colorB&&this.buttons[d].animB.showBehavior("off");0==n.__cast(this.buttons[d],ee).hitPoints&&("off"==this.buttons[d].animB.currentBehavior.name&&"OrangeButton"==this.buttons[d].colorB&&(this.buttons[d].animB.showBehavior("offon"),this.doorsCheck(this.buttons[d].sw),this.elevatorsSwitch(this.buttons[d].sw),this.rollsSwitch(this.buttons[d].sw),this.lampsSwitch(this.buttons[d].sw)),"off"==this.buttons[d].animB.currentBehavior.name&&"BlueButton"==this.buttons[d].colorB&&
this.buttons[d].animB.showBehavior("offon"),"active"==this.buttons[d].animB.currentBehavior.name&&19<=this.buttons[d].animB.currentFrameIndex&&"OrangeButton"==this.buttons[d].colorB&&(this.buttons[d].animB.showBehavior("on"),this.doorsCheck(this.buttons[d].sw),this.elevatorsSwitch(this.buttons[d].sw),this.rollsSwitch(this.buttons[d].sw),this.lampsSwitch(this.buttons[d].sw)),"active"==this.buttons[d].animB.currentBehavior.name&&19<=this.buttons[d].animB.currentFrameIndex&&"BlueButton"==this.buttons[d].colorB&&
this.buttons[d].animB.showBehavior("on"));this.buttons[d].glowB.update(a);this.buttons[d].animB.update(a)}},rollsCheck:function(){for(var a=0,b=this.transporters.length;a<b;){var c=a++;if(n.__cast(this.transporters[c].base.graphic,A).Enabled){for(var d=0,e=this.transporters[c].transporterRolls.length;d<e;){var f=d++;if("right"==n.__cast(this.transporters[c].base.graphic,A).Direction&&2>this.transporters[c].transporterRolls[f].get_angularVel()){var m=this.transporters[c].transporterRolls[f];m.set_angularVel(m.get_angularVel()+
n.__cast(this.transporters[c].base.graphic,A).Speed)}"left"==n.__cast(this.transporters[c].base.graphic,A).Direction&&-2<this.transporters[c].transporterRolls[f].get_angularVel()&&(f=this.transporters[c].transporterRolls[f],f.set_angularVel(f.get_angularVel()-n.__cast(this.transporters[c].base.graphic,A).Speed))}0==B.checkOneSound("SoundFeedGo")&&B.play("SoundFeedGo",!0)}else{d=0;for(e=this.transporters[c].transporterRolls.length;d<e;)f=d++,"right"==n.__cast(this.transporters[c].base.graphic,A).Direction&&
0<this.transporters[c].transporterRolls[f].get_angularVel()&&(m=this.transporters[c].transporterRolls[f],m.set_angularVel(m.get_angularVel()-.005)),"left"==n.__cast(this.transporters[c].base.graphic,A).Direction&&0>this.transporters[c].transporterRolls[f].get_angularVel()&&(f=this.transporters[c].transporterRolls[f],f.set_angularVel(f.get_angularVel()+.005));1==B.checkOneSound("SoundFeedGo")&&B.stopOneSound("SoundFeedGo")}}},lampsSwitch:function(a){for(var b=0,c=this.lamps.length;b<c;){var d=b++;
this.lamps[d].Activate==a&&(this.lamps[d].Enabled=!this.lamps[d].Enabled,this.lamps[d].Enabled?this.lamps[d].showBehavior("enable"):this.lamps[d].showBehavior("disable"))}b=0;for(c=this.shadows.length;b<c;)d=b++,this.shadows[d].Switch==a&&("enable"==this.shadows[d].currentBehavior.name||"off"==this.shadows[d].currentBehavior.name?this.shadows[d].showBehavior("on"):("disable"==this.shadows[d].currentBehavior.name||"on"==this.shadows[d].currentBehavior.name)&&this.shadows[d].showBehavior("off"))},overMouseSound:function(a){1==
B.pause?n.__cast(a.currentTarget,A).showBehavior("selectDisable"):n.__cast(a.currentTarget,A).showBehavior("selectEnable")},outMouseSound:function(a){1==B.pause?n.__cast(a.currentTarget,A).showBehavior("noSelectDisable"):n.__cast(a.currentTarget,A).showBehavior("noSelectEnable")},overMouseSoundM:function(a){1==B.loopPaused?n.__cast(a.currentTarget,A).showBehavior("selectDisable"):n.__cast(a.currentTarget,A).showBehavior("selectEnable")},outMouseSoundM:function(a){1==B.loopPaused?n.__cast(a.currentTarget,
A).showBehavior("noSelectDisable"):n.__cast(a.currentTarget,A).showBehavior("noSelectEnable")},goToSound:function(a){0==B.pause?(this.sound.showBehavior("selectDisable"),B.stopSound()):(this.sound.showBehavior("selectEnable"),B.playSound())},__class__:od});var C=function(){};k.Reflect=C;C.__name__=["Reflect"];C.hasField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};C.field=function(a,b){try{return a[b]}catch(c){return Y.lastException=c,null}};C.setField=function(a,b,c){a[b]=c};C.getProperty=
function(a,b){var c;if(null==a)return null;var d=a.__properties__?c=a.__properties__["get_"+b]:!1;return d?a[c]():a[b]};C.setProperty=function(a,b,c){var d;var e=a.__properties__?d=a.__properties__["set_"+b]:!1;if(e)a[d](c);else a[b]=c};C.callMethod=function(a,b,c){return b.apply(a,c)};C.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};C.isFunction=function(a){return"function"==typeof a?!(n.isClass(a)||
n.isEnum(a)):!1};C.compare=function(a,b){return a==b?0:a>b?1:-1};C.compareMethods=function(a,b){return a==b?!0:C.isFunction(a)&&C.isFunction(b)?a.scope==b.scope&&a.method==b.method?null!=a.method:!1:!1};C.deleteField=function(a,b){if(!C.hasField(a,b))return!1;delete a[b];return!0};var B=D.SoundManager=function(){};k.SoundManager=B;B.__name__=["SoundManager"];B.init=function(){B.sounds=new ea;B.pause=!1;B.audioArray="SoundBlast SoundBoxHit SoundDoor SoundFeedGo SoundGameButonsClick SoundGameButtonsRelease SoundGameMusic SoundLiftGo SoundLiftOff SoundLiftOn SoundLoaderJump SoundLoaderMagnet SoundLoaderMove SoundMenuMusic SoundPress SoundRollver SoundSparks SoundTruckEngineOff SoundTruckEngineOn SoundTruckEngineWorking SoundTruckSignal SoundWagonMove".split(" ");
ka.trace("sounds",{fileName:"SoundManager.hx",lineNumber:40,className:"SoundManager",methodName:"init"});B.addSoundsOgg(B.audioArray)};B.addSoundsOgg=function(a){for(var b=0,c=a.length;b<c;){var d=b++;B.addSound(a[d])}};B.setLevelSounds=function(a){0==B.pause&&ka.trace("no sound",{fileName:"SoundManager.hx",lineNumber:118,className:"SoundManager",methodName:"setLevelSounds"})};B.stopLevelSounds=function(a){ka.trace("no sound",{fileName:"SoundManager.hx",lineNumber:185,className:"SoundManager",methodName:"stopLevelSounds"})};
B.addSound=function(a,b){null==b&&(b=a);a=new Howl({src:["sounds/"+a+".mp3","sounds/"+a+".ogg"]});a.volume(.3);B.sounds.set(b,a)};B.play=function(a,b){null==b&&(b=!1);if(0==B.pause){if("SoundGameMusic"==a)n.__cast(B.sounds.get(a),Howl).play(),B.sounds.get("SoundGameMusic").pos(B.position),B.sounds.get("SoundGameMusic").volume(.2),B.sounds.get("SoundGameMusic").loop(!0),B.sounds.get("SoundGameMusic");else{var c=n.__cast(B.sounds.get(a),Howl);c.play();"SoundFeedGo"==a&&c.volume(.05);1==b&&B.sounds.get(a).loop(!0)}B.pause=
!1}};B.stopSound=function(a){null==a&&(a=!1);0==B.pause&&(1==a&&(B.position=B.sounds.get("SoundGameMusic").pos,n.__cast(B.sounds.get("SoundGameMusic"),Howl).pause(),B.loopPaused=!0),B.pause=!0,B.stopLevelSounds(g.currentLevel),B.soundsPaused=!0)};B.resumeLoop=function(){B.sounds.get("SoundGameMusic").pos(B.position);B.sounds.get("SoundGameMusic").volume(.2);B.sounds.get("SoundGameMusic").loop(!0);n.__cast(B.sounds.get("SoundGameMusic"),Howl).play();B.loopPaused=!1};B.stopOneSound=function(a){n.__cast(B.sounds.get(a),
Howl).stop()};B.checkOneSound=function(a){return n.__cast(B.sounds.get(a),Howl).playing()};B.stopLoop=function(a){null==a&&(a=!0);B.position=B.sounds.get("SoundGameMusic").pos;n.__cast(B.sounds.get("SoundGameMusic"),Howl).pause();1==a?B.loopPaused=!0:B.loopPauseAds=!0};B.playSound=function(a){null==a&&(a=!1);1==B.pause&&(1==a?(B.sounds.get("SoundGameMusic").pos(B.position),B.sounds.get("SoundGameMusic").volume(.2),B.sounds.get("SoundGameMusic").loop(!0),n.__cast(B.sounds.get("SoundGameMusic"),Howl).play(),
B.loopPaused=!1):B.sounds.get("SoundGameMusic").volume(.3),B.pause=!1,B.setLevelSounds(g.currentLevel),g.resumeGame(!1),B.soundsPaused=!1)};var Di=function(){this.starsCoefArray=[1,1.5,2];this.initStarsCoefArray=[1,1.5,2];this.timeArray=[[30,45,60],[35,50,70],[25,40,60],[35,55,80],[45,65,90],[35,55,75],[40,60,80],[50,75,110],[20,35,60],[50,75,110],[50,70,100],[45,65,100],[40,60,90],[60,75,100],[45,60,85],[60,80,120],[90,120,160],[40,60,90],[40,60,90],[55,75,110],[30,50,70],[45,60,90],[60,80,110],
[100,175,300],[35,50,80],[35,55,90],[45,65,90],[85,100,130],[60,80,110],[70,90,110]];for(var a=0,b=this.initStarsCoefArray.length;a<b;){var c=a++;this.starsCoefArray[c]=this.initStarsCoefArray[c]*g.scoreKoef}};k.StarsAndScores=Di;Di.__name__=["StarsAndScores"];Di.prototype={timeArray:null,initStarsCoefArray:null,starsCoefArray:null,getScore:function(a,b){a=u["int"](a);return 0<a?a:0},getStars:function(a,b){return a<=this.timeArray[b-1][0]?3:a<=this.timeArray[b-1][1]?2:a<=this.timeArray[b-1][2]?1:
0},__class__:Di};var u=function(){};k.Std=u;u.__name__=["Std"];u.is=function(a,b){return n.__instanceof(a,b)};u.string=function(a){return n.__string_rec(a,"")};u["int"]=function(a){return a|0};u.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=P.cca(a,1)&&88!=P.cca(a,1)||(b=parseInt(a));return isNaN(b)?null:b};u.parseFloat=function(a){return parseFloat(a)};var yl=function(){};k["lime.math.Matrix3"]=yl;yl.__name__=["lime","math","Matrix3"];var Gi=function(a,b,c){null!=a&&(this.create=a);null!=
b&&(this.clean=b);null!=c&&this.set_size(c);this.__pool=new rb;this.inactiveObjects=this.activeObjects=0;this.__inactiveObject1=this.__inactiveObject0=null;this.__inactiveObjectList=new Db};k["lime.utils.ObjectPool_openfl_geom_Matrix"]=Gi;Gi.__name__=["lime","utils","ObjectPool_openfl_geom_Matrix"];Gi.prototype={activeObjects:null,inactiveObjects:null,__inactiveObject0:null,__inactiveObject1:null,__inactiveObjectList:null,__pool:null,__size:null,clean:function(a){},create:function(){return null},
get:function(){var a=null;if(0<this.inactiveObjects)a=this.__getInactive();else if(null==this.__size||this.activeObjects<this.__size)a=this.create(),null!=a&&(this.__pool.set(a,!0),this.activeObjects++);return a},release:function(a){this.activeObjects--;null==this.__size||this.activeObjects+this.inactiveObjects<this.__size?(this.clean(a),this.__addInactive(a)):this.__pool.remove(a)},__addInactive:function(a){null==this.__inactiveObject0?this.__inactiveObject0=a:null==this.__inactiveObject1?this.__inactiveObject1=
a:this.__inactiveObjectList.add(a);this.inactiveObjects++},__getInactive:function(){if(null!=this.__inactiveObject0){var a=this.__inactiveObject0;this.__inactiveObject0=null}else null!=this.__inactiveObject1?(a=this.__inactiveObject1,this.__inactiveObject1=null):(a=this.__inactiveObjectList.pop(),0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop()));this.inactiveObjects--;
this.activeObjects++;return a},__removeInactive:function(a){if(!(0>=a||0==this.inactiveObjects)&&(null!=this.__inactiveObject0&&(this.__pool.remove(this.__inactiveObject0),this.__inactiveObject0=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects&&(null!=this.__inactiveObject1&&(this.__pool.remove(this.__inactiveObject1),this.__inactiveObject1=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects)))for(var b=this.__inactiveObjectList.iterator();b.hasNext();){var c=b.next();this.__pool.remove(c);
this.__inactiveObjectList.remove(c);this.inactiveObjects--;--a;if(0==a||0==this.inactiveObjects)break}},set_size:function(a){if(null==a)this.__size=null;else{var b=this.inactiveObjects+this.activeObjects;this.__size=a;if(b>a)this.__removeInactive(b-a);else if(a>b)for(var c=0,d=a-b;c<d;)if(c++,b=this.create(),null!=b)this.__pool.set(b,!1),this.__inactiveObjectList.add(b),this.inactiveObjects++;else break}return a},__class__:Gi,__properties__:{set_size:"set_size"}};var sa=function(a,b,c,d,e,f){null==
f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.a=a;this.b=b;this.c=c;this.d=d;this.tx=e;this.ty=f};k["openfl.geom.Matrix"]=sa;sa.__name__=["openfl","geom","Matrix"];sa.prototype={a:null,b:null,c:null,d:null,tx:null,ty:null,clone:function(){return new sa(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(a){var b=this.a*a.a+this.b*a.c;this.b=this.a*a.b+this.b*a.d;this.a=b;b=this.c*a.a+this.d*a.c;this.d=this.c*a.b+this.d*a.d;this.c=b;b=this.tx*a.a+
this.ty*a.c+a.tx;this.ty=this.tx*a.b+this.ty*a.d+a.ty;this.tx=b},copyFrom:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty},equals:function(a){return null!=a&&this.tx==a.tx&&this.ty==a.ty&&this.a==a.a&&this.b==a.b&&this.c==a.c?this.d==a.d:!1},identity:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0},invert:function(){var a=this.a*this.d-this.b*this.c;if(0==a)this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty;else{a=1/a;var b=this.d*a;this.d=
this.a*a;this.a=b;this.b*=-a;this.c*=-a;a=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty;this.tx=a}return this},scale:function(a,b){this.a*=a;this.b*=b;this.c*=a;this.d*=b;this.tx*=a;this.ty*=b},to3DString:function(a){null==a&&(a=!1);return a?"matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+u["int"](this.tx)+", "+u["int"](this.ty)+", 0, 1)":"matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+this.tx+", "+this.ty+
", 0, 1)"},translate:function(a,b){this.tx+=a;this.ty+=b},__transformInversePoint:function(a){var b=this.a*this.d-this.b*this.c;if(0==b)a.x=-this.tx,a.y=-this.ty;else{var c=1/b*(this.c*(this.ty-a.y)+this.d*(a.x-this.tx));a.y=1/b*(this.a*(a.y-this.ty)+this.b*(this.tx-a.x));a.x=c}},__transformInverseX:function(a,b){var c=this.a*this.d-this.b*this.c;return 0==c?-this.tx:1/c*(this.c*(this.ty-b)+this.d*(a-this.tx))},__transformInverseY:function(a,b){var c=this.a*this.d-this.b*this.c;return 0==c?-this.ty:
1/c*(this.a*(b-this.ty)+this.b*(this.tx-a))},__transformPoint:function(a){var b=a.x,c=a.y;a.x=this.__transformX(b,c);a.y=this.__transformY(b,c)},__transformX:function(a,b){return a*this.a+b*this.c+this.tx},__transformY:function(a,b){return a*this.b+b*this.d+this.ty},__translateTransformed:function(a,b){this.tx=this.__transformX(a,b);this.ty=this.__transformY(a,b)},__class__:sa};var ib=function(a,b,c,d,e,f,m,h){null==h&&(h=0);null==m&&(m=0);null==f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=
1);null==b&&(b=1);null==a&&(a=1);this.redMultiplier=a;this.greenMultiplier=b;this.blueMultiplier=c;this.alphaMultiplier=d;this.redOffset=e;this.greenOffset=f;this.blueOffset=m;this.alphaOffset=h};k["openfl.geom.ColorTransform"]=ib;ib.__name__=["openfl","geom","ColorTransform"];ib.prototype={alphaMultiplier:null,alphaOffset:null,blueMultiplier:null,blueOffset:null,greenMultiplier:null,greenOffset:null,redMultiplier:null,redOffset:null,__clone:function(){return new ib(this.redMultiplier,this.greenMultiplier,
this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},__copyFrom:function(a){this.redMultiplier=a.redMultiplier;this.greenMultiplier=a.greenMultiplier;this.blueMultiplier=a.blueMultiplier;this.alphaMultiplier=a.alphaMultiplier;this.redOffset=a.redOffset;this.greenOffset=a.greenOffset;this.blueOffset=a.blueOffset;this.alphaOffset=a.alphaOffset},__equals:function(a,b){null==b&&(b=!1);return null==a||this.redMultiplier!=a.redMultiplier||this.greenMultiplier!=
a.greenMultiplier||this.blueMultiplier!=a.blueMultiplier||!b&&this.alphaMultiplier!=a.alphaMultiplier||this.redOffset!=a.redOffset||this.greenOffset!=a.greenOffset||this.blueOffset!=a.blueOffset?!1:this.alphaOffset==a.alphaOffset},__isDefault:function(){return 1==this.redMultiplier&&1==this.greenMultiplier&&1==this.blueMultiplier&&1==this.alphaMultiplier&&0==this.redOffset&&0==this.greenOffset&&0==this.blueOffset?0==this.alphaOffset:!1},__toLimeColorMatrix:function(){if(null==ib.__limeColorMatrix){var a=
new Zc(20);ib.__limeColorMatrix=a}ib.__limeColorMatrix[0]=this.redMultiplier;ib.__limeColorMatrix[4]=this.redOffset/255;ib.__limeColorMatrix[6]=this.greenMultiplier;ib.__limeColorMatrix[9]=this.greenOffset/255;ib.__limeColorMatrix[12]=this.blueMultiplier;ib.__limeColorMatrix[14]=this.blueOffset/255;ib.__limeColorMatrix[18]=this.alphaMultiplier;ib.__limeColorMatrix[19]=this.alphaOffset/255;return ib.__limeColorMatrix},__class__:ib};var v=function(a,b){null==b&&(b=0);null==a&&(a=0);this.zpp_inner=this.zpp_pool=
null;this.zpp_inner=Ra.get(a,b);this.zpp_inner.outer=this};k["nape.geom.Vec2"]=v;v.__name__=["nape","geom","Vec2"];v.weak=function(a,b){null==b&&(b=0);null==a&&(a=0);return v.get(a,b,!0)};v.get=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);if(null==Mc.poolVec2)var d=new v;else d=Mc.poolVec2,Mc.poolVec2=d.zpp_pool,d.zpp_pool=null;null==d.zpp_inner?(d.zpp_inner=Ra.get(a,b),d.zpp_inner.outer=d):d.setxy(a,b);d.zpp_inner.weak=c;return d};v.prototype={zpp_inner:null,zpp_pool:null,dispose:function(){this.zpp_inner.immutable();
var a=this.zpp_inner;this.zpp_inner=this.zpp_inner.outer=null;this.zpp_pool=Mc.poolVec2;Mc.poolVec2=this;a.free();a.next=Ra.zpp_pool;Ra.zpp_pool=a},copy:function(a){null==a&&(a=!1);return v.get(this.get_x(),this.get_y(),a)},get_x:function(){this.zpp_inner.validate();return this.zpp_inner.x},set_x:function(a){this.zpp_inner.immutable();this.get_x()!=a&&(this.zpp_inner.x=a,this.zpp_inner.invalidate());return this.get_x()},get_y:function(){this.zpp_inner.validate();return this.zpp_inner.y},set_y:function(a){this.zpp_inner.immutable();
this.get_y()!=a&&(this.zpp_inner.y=a,this.zpp_inner.invalidate());return this.get_y()},get_length:function(){return Math.sqrt(this.get_x()*this.get_x()+this.get_y()*this.get_y())},lsq:function(){return this.get_x()*this.get_x()+this.get_y()*this.get_y()},set:function(a){this.zpp_inner.immutable();var b=this.setxy(a.get_x(),a.get_y());a.zpp_inner.weak&&a.dispose();return b},setxy:function(a,b){this.zpp_inner.immutable();if(this.get_x()!=a||this.get_y()!=b)this.zpp_inner.x=a,this.zpp_inner.y=b,this.zpp_inner.invalidate();
return this},mul:function(a,b){null==b&&(b=!1);return v.get(this.get_x()*a,this.get_y()*a,b)},subeq:function(a){this.zpp_inner.immutable();this.setxy(this.get_x()-a.get_x(),this.get_y()-a.get_y());a.zpp_inner.weak&&a.dispose();return this},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:v,__properties__:{get_length:"get_length",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}};var Mc=function(){};k["zpp_nape.util.ZPP_PubPool"]=Mc;Mc.__name__=["zpp_nape",
"util","ZPP_PubPool"];var Ra=function(){this.length=this.x=this.y=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.weak=!1;this._isimmutable=this.outer=null;this._immutable=!1;this._invalidate=this._validate=null};k["zpp_nape.geom.ZPP_Vec2"]=Ra;Ra.__name__=["zpp_nape","geom","ZPP_Vec2"];Ra.get=function(a,b,c){null==c&&(c=!1);if(null==Ra.zpp_pool)var d=new Ra;else d=Ra.zpp_pool,Ra.zpp_pool=d.next,d.next=null;d.alloc();d._immutable=c;d.x=a;d.y=b;return d};Ra.prototype={_invalidate:null,
_validate:null,validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},_immutable:null,_isimmutable:null,immutable:function(){},outer:null,wrapper:function(){if(null==this.outer){this.outer=new v;var a=this.outer.zpp_inner;a.free();a.next=Ra.zpp_pool;Ra.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},weak:null,free:function(){null!=this.outer&&(this.outer=this.outer.zpp_inner=null);this._invalidate=this._validate=this._isimmutable=
null},alloc:function(){this.weak=!1},next:null,elem:function(){return this},begin:function(){return this.next},_inuse:null,modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.begin();this.next=a;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){b._inuse=!0;null==a?(b.next=this.begin(),this.next=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=
!0;this.length++;return b},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.next=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);c.elem()._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return b},reverse:function(){for(var a=this.begin(),b=null;null!=a;){var c=a.next;a.next=b;b=this.next=a;a=c}this.pushmod=this.modified=!0},empty:function(){return null==this.begin()},size:function(){return this.length},
front:function(){return this.begin().elem()},iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},x:null,y:null,toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},__class__:Ra};var Qa=function(a,b,c,d,e,f){null==f&&(f=-1);null==e&&(e=1);null==d&&(d=-1);null==c&&(c=1);null==b&&(b=-1);null==a&&(a=1);this.zpp_inner=null;null==Xb.zpp_pool?this.zpp_inner=new Xb:(this.zpp_inner=Xb.zpp_pool,Xb.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);this.zpp_inner.alloc();
this.zpp_inner.outer=this;this.set_collisionGroup(a);this.set_collisionMask(b);this.set_sensorGroup(c);this.set_sensorMask(d);this.set_fluidGroup(e);this.set_fluidMask(f)};k["nape.dynamics.InteractionFilter"]=Qa;Qa.__name__=["nape","dynamics","InteractionFilter"];Qa.prototype={zpp_inner:null,get_collisionGroup:function(){return this.zpp_inner.collisionGroup},set_collisionGroup:function(a){this.get_collisionGroup()!=a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());return this.get_collisionGroup()},
get_collisionMask:function(){return this.zpp_inner.collisionMask},set_collisionMask:function(a){this.get_collisionMask()!=a&&(this.zpp_inner.collisionMask=a,this.zpp_inner.invalidate());return this.get_collisionMask()},get_sensorGroup:function(){return this.zpp_inner.sensorGroup},set_sensorGroup:function(a){this.get_sensorGroup()!=a&&(this.zpp_inner.sensorGroup=a,this.zpp_inner.invalidate());return this.get_sensorGroup()},get_sensorMask:function(){return this.zpp_inner.sensorMask},set_sensorMask:function(a){this.get_sensorMask()!=
a&&(this.zpp_inner.sensorMask=a,this.zpp_inner.invalidate());return this.get_sensorMask()},get_fluidGroup:function(){return this.zpp_inner.fluidGroup},set_fluidGroup:function(a){this.get_fluidGroup()!=a&&(this.zpp_inner.fluidGroup=a,this.zpp_inner.invalidate());return this.get_fluidGroup()},get_fluidMask:function(){return this.zpp_inner.fluidMask},set_fluidMask:function(a){this.get_fluidMask()!=a&&(this.zpp_inner.fluidMask=a,this.zpp_inner.invalidate());return this.get_fluidMask()},__class__:Qa,__properties__:{set_fluidMask:"set_fluidMask",
get_fluidMask:"get_fluidMask",set_fluidGroup:"set_fluidGroup",get_fluidGroup:"get_fluidGroup",set_sensorMask:"set_sensorMask",get_sensorMask:"get_sensorMask",set_sensorGroup:"set_sensorGroup",get_sensorGroup:"get_sensorGroup",set_collisionMask:"set_collisionMask",get_collisionMask:"get_collisionMask",set_collisionGroup:"set_collisionGroup",get_collisionGroup:"get_collisionGroup"}};var Xb=function(){this.collisionGroup=this.collisionMask=this.sensorGroup=this.sensorMask=this.fluidGroup=this.fluidMask=
0;this.next=this.outer=this.shapes=null;this.feature_cons();this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=this.sensorMask=this.fluidMask=-1};k["zpp_nape.dynamics.ZPP_InteractionFilter"]=Xb;Xb.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"];Xb.prototype={next:null,outer:null,wrapper:function(){if(null==this.outer){this.outer=new Qa;var a=this.outer.zpp_inner;a.free();a.next=Xb.zpp_pool;Xb.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},free:function(){this.outer=
null},alloc:function(){},shapes:null,feature_cons:function(){this.shapes=new Df},addShape:function(a){this.shapes.add(a)},remShape:function(a){this.shapes.remove(a)},collisionGroup:null,collisionMask:null,shouldCollide:function(a){return 0!=(this.collisionMask&a.collisionGroup)?0!=(a.collisionMask&this.collisionGroup):!1},sensorGroup:null,sensorMask:null,shouldSense:function(a){return 0!=(this.sensorMask&a.sensorGroup)?0!=(a.sensorMask&this.sensorGroup):!1},fluidGroup:null,fluidMask:null,shouldFlow:function(a){return 0!=
(this.fluidMask&a.fluidGroup)?0!=(a.fluidMask&this.fluidGroup):!1},invalidate:function(){for(var a=this.shapes.begin();null!=a;)a.elem().invalidate_filter(),a=a.next},__class__:Xb};var g=D.Storage=function(){ia.call(this)};k.Storage=g;g.__name__=["Storage"];g.init=function(a,b,c,d){g.XX=b;g.YY=c;g.scoreKoef=u.parseFloat(fe.parse(Na.getText("levels/score.json")).data.score);g.frameRate=d;H.current.stage.set_frameRate(g.frameRate);g.creatorArray=[];g.decorArray=[];g.animationArray=[];g.gameSpace=a;
g.dynamicCbt=new ua;g.balloonsCbt=new ua;g.rocketCbt=new ua;g.magnetCbt=new ua;g.staticCbt=new ua;g.waterCbt=new ua;g.pigCbt=new ua;g.starCbt=new ua;g.kinematicCbt=new ua;g.sensorCbt=new ua;g.spikeCbt=new ua;g.buttonCbt=new ua;g.teleportCbt=new ua;g.catcherCbt=new ua;g.iceCbt=new ua;g.saves=yb.getLocal("loader5_math_2","/");g.InitialX=700;g.InitialY=480;g.initSaves()};g.blackScreenTween=function(a){g.blackScreen=g.initSpriteUI("blank");g.blackScreen.set_width(866);g.blackScreen.set_height(480);g.blackScreen.set_x(344);
g.blackScreen.set_y(240);g.theGame.addChild(g.blackScreen);g.blackScreen.mouseEnabled=!1;Ja.tween(g.blackScreen,3,{alpha:.01},!0)};g.offsetPage=function(){g.theGame.set_x(0);g.theGame.set_y(0);var a=g.theGame;a.set_x(a.get_x()+g.offSetX);a=g.theGame;a.set_y(a.get_y()+g.offSetY);g.theMenu.set_x(0);g.theMenu.set_y(0);a=g.theMenu;a.set_x(a.get_x()+g.offSetX);a=g.theMenu;a.set_y(a.get_y()+g.offSetY)};g.resizeGame=function(){g.XX>g.YY?(g.H=g.YY/480,g.W=g.YY/480,g.offSetX=u["int"]((g.XX-700*g.H)/2),g.offSetY=
0,0>g.offSetX&&(g.H=g.XX/700,g.W=g.XX/700,g.offSetX=u["int"]((g.XX-700*g.H)/2),g.offSetY=u["int"]((g.YY-480*g.H)/2))):(g.H=g.XX/700,g.W=g.XX/700,g.offSetY=u["int"]((g.YY-480*g.H)/2),g.offSetX=0)};g.initLevel=function(a){g.currentSprite=a;g.InitialX=700;g.InitialY=480;g.levelState="started";g.run=!0;g.currentHintNumber=0;g.starCounter=0;g.ballonPushed=0;g.balkaPushed=0;g.currentDigitInPassword=0;g.tweenCompleted=0};g.setXY=function(a,b){g.XX=a;g.YY=b};g.setSpace=function(a){g.space=a};g.clear=function(){g.space.clear();
g.arrowCounter=0;g.rayCastArray=[];g.rayForDelete=[];g.animationArray=[];g.decorArray=[];g.currentHintNumber=0};g.initSpriteUI=function(a){new jf;var b=Na.getBitmapData("img/ui/"+a+".png"),c=new v(0,0);var d=Hi.create(b,1,1,b.width,b.height);var e=new A(d,!0);switch(a){case "ElevatorEnd":c.set_y(5);break;case "TruckBody2":c.set_x(-42.5);c.set_y(5.5);break;case "boardWall":c.set_x(-20),c.set_y(0)}d.addBehavior(new t("normal",[0],!1,1,b.width/2-c.get_x(),b.height/2-c.get_y()));e.showBehavior("normal");
e.set_name(a);return e};g.initSpriteBack=function(a){new jf;a=Na.getBitmapData("img/play/ba"+a+".png");a=Hi.create(a,1,1,a.width,a.height);var b=new A(a,!0);a.addBehavior(new t("normal",[0],!1,1,0,0));b.showBehavior("normal");return b};g.initSaves=function(){g.levelStateArray=[];g.starArray=[];g.scoresArray=[];if(null==g.saves.data.levelStates){for(var a=0;30>a;)a++,g.levelStateArray.push(0),g.starArray.push(0),g.scoresArray.push(0);g.levelStateArray[0]=1}else g.loadSaves()};g.loadSaves=function(){g.levelStateArray=
[];g.starArray=[];g.scoresArray=[];g.levelStateArray=g.saves.data.levelStates;g.starArray=g.saves.data.starArray;g.scoresArray=g.saves.data.scoresArray};g.updateSaves=function(){g.saves.data.levelStates=g.levelStateArray;g.saves.data.starArray=g.starArray;g.saves.data.scoresArray=g.scoresArray;g.saves.flush()};g.initAnimation=function(a,b,c){null==c&&(c=!1);null==b&&(b="");var d=v.weak(0,0),e=new jf;if("ui"!=b)if(0==g.checkSpriteForCommon(a)){b=fe.parse(Na.getText("json/level"+u.string(g.currentLevel)+
"/"+a+".json"));var f=Na.getBitmapData("json/level"+u.string(g.currentLevel)+"/"+a+"Animation.png")}else b=fe.parse(Na.getText("json/common/"+a+".json")),f=Na.getBitmapData("json/common/"+a+"Animation.png");else b=fe.parse(Na.getText("img/ui/"+a+".json")),f=Na.getBitmapData("img/ui/"+a+"Animation.png");b=b.frames;e.addBehavior(new t("normal",[0],!1,1));e.updateImage(f);for(var m=0,h=b.length;m<h;){var q=m++;f=new Ef;f.x=u["int"](b[q].frame.x);f.y=u["int"](b[q].frame.y);f.width=u["int"](b[q].frame.w);
f.height=u["int"](b[q].frame.h);if(0==b[q].trimmed)f.offsetX=-u["int"](b[q].sourceSize.w/2),f.offsetY=-u["int"](b[q].sourceSize.h/2);else{switch(a){case "Lamp":d.set_x(0);d.set_y(b[q].frame.h/2);break;case "halfShadow":d.set_x(-50);d.set_y(-50);break;case "on_off":d.set_x(22),d.set_y(31)}0==c?(f.offsetX=u["int"](b[q].spriteSourceSize.x-d.get_x()),f.offsetY=u["int"](b[q].spriteSourceSize.y-d.get_y())):(f.offsetX-=u["int"](b[q].frame.w/2-d.get_x()),f.offsetY-=u["int"](b[q].frame.h/2-d.get_y()))}e.addFrame(f)}switch(a){case "Basketball":case "BigBarel1":case "SmallBarel1":case "SmallBarel2":e.addBehavior(new t("0",
[0],!1,20));e.addBehavior(new t("1",[1],!1,20));e.addBehavior(new t("2",[2],!1,20));break;case "BtnGoo":case "BtnLeft":case "BtnRight":case "BtnUp":e.addBehavior(new t("out",[0],!0,1,0,0));e.addBehavior(new t("over",[1],!0,1,0,0));e.addBehavior(new t("2",[2],!0,1,0,0));e.addBehavior(new t("3",[3],!0,1,0,0));break;case "Button_silver":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[1],!1,20));break;case "Creature2_Animation7":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",
[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54],!1,20,0,0));break;case "DangerBox1":e.addBehavior(new t("0",[0],!1,20));break;case "LEVEL":e.addBehavior(new t("0",[0],!1,20));e.addBehavior(new t("1",[1],!1,20));e.addBehavior(new t("2",[2],!1,20));e.addBehavior(new t("3",[3],!1,20));e.addBehavior(new t("4",[4],!1,20));e.addBehavior(new t("5",[5],!1,20));e.addBehavior(new t("6",[6],!1,20));e.addBehavior(new t("7",
[7],!1,20));e.addBehavior(new t("8",[8],!1,20));e.addBehavior(new t("9",[9],!1,20));e.addBehavior(new t("10",[10],!1,20));e.addBehavior(new t("11",[11],!1,20));e.addBehavior(new t("12",[12],!1,20));e.addBehavior(new t("13",[13],!1,20));e.addBehavior(new t("14",[14],!1,20));e.addBehavior(new t("15",[15],!1,20));e.addBehavior(new t("16",[16],!1,20));e.addBehavior(new t("17",[17],!1,20));e.addBehavior(new t("18",[18],!1,20));e.addBehavior(new t("19",[19],!1,20));e.addBehavior(new t("20",[20],!1,20));
e.addBehavior(new t("21",[21],!1,20));e.addBehavior(new t("22",[22],!1,20));e.addBehavior(new t("23",[23],!1,20));e.addBehavior(new t("24",[24],!1,20));e.addBehavior(new t("25",[25],!1,20));e.addBehavior(new t("26",[26],!1,20));e.addBehavior(new t("27",[27],!1,20));e.addBehavior(new t("28",[28],!1,20));e.addBehavior(new t("29",[29],!1,20));break;case "Lamp":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[1],!1,20));break;case "LevelBtn":e.addBehavior(new t("out",[0],!1,20,
0,0));e.addBehavior(new t("over",[1],!1,20,0,0));e.addBehavior(new t("lock",[2],!1,20,0,0));break;case "HalfShadow":case "Shadow":e.addBehavior(new t("on",[0,1,2,3,4,5,6,7,8,9],!1,20));e.addBehavior(new t("off",[9,8,7,6,5,4,3,2,1,0],!1,20));e.addBehavior(new t("enable",[0],!1,20));e.addBehavior(new t("disable",[9],!1,20));break;case "TFXBoom":e.addBehavior(new t("enable",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,0],
!1,30));e.addBehavior(new t("disable",[0],!1,30));break;case "TFXSpark":case "TFXSparkL":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,0],!1,30));e.addBehavior(new t("disable",[0],!1,30));break;case "TPFXLighting":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36],!0,30));
break;case "TransformerVault":e.addBehavior(new t("enable",[0],!1,30));e.addBehavior(new t("disable",[1],!1,30));e.addBehavior(new t("off",[2],!1,30));break;case "BigBox":case "SquareBox1":case "SquareBox2":case "SquareBox3":case "VerticalBox1":case "VerticalBox2":case "VerticalBox3":case "VerticalBox4":e.addBehavior(new t("0",[0],!1,20));e.addBehavior(new t("1",[1],!1,20));e.addBehavior(new t("2",[2],!1,20));break;case "acIcons":e.addBehavior(new t("0",[0],!0,1,0,0));e.addBehavior(new t("1",[1],
!0,1,0,0));e.addBehavior(new t("2",[2],!0,1,0,0));e.addBehavior(new t("3",[3],!0,1,0,0));break;case "acorns":e.addBehavior(new t("0",[0],!0,1,0,0));e.addBehavior(new t("1",[1],!0,1,0,0));e.addBehavior(new t("2",[2],!0,1,0,0));e.addBehavior(new t("3",[3],!0,1,0,0));break;case "attraction":case "attraction2":e.addBehavior(new t("normal",[0],!0,1,0,0));e.addBehavior(new t("above",[1],!0,1,0,0));e.addBehavior(new t("enable",[2],!0,1,0,0));break;case "back":e.addBehavior(new t("out",[0],!0,1,0,0));e.addBehavior(new t("over",
[1],!0,1,0,0));break;case "blueLightB":case "orangeLightB":e.addBehavior(new t("active",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],!1,30));e.addBehavior(new t("off",[9],!1,30));e.addBehavior(new t("on",[0],!1,30));e.addBehavior(new t("offon",[10,11,12,13,14,15,16,17,18,19],!1,30));break;case "boom":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12],!1,10,0,0));break;case "btn_candy":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[1],!1,20));break;case "creator":e.addBehavior(new t("normal",
[0],!0,1,0,0));e.addBehavior(new t("above",[1],!0,1,0,0));e.addBehavior(new t("enable",[2],!0,1,0,0));break;case "digit":for(c=0;10>c;)d=c++,e.addBehavior(new t(null==d?"null":""+d,[d],!1,30));break;case "egg":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],!1,20,0,0));break;case "ftc_w_gfx_Candy":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!0,20));break;case "ftc_w_gfx_Fly":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",
[0,1,2],!0,20));break;case "ftc_w_gfx_GraySquare":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8],!0,20));break;case "ftc_w_gfx_GraySquareIdle":e.addBehavior(new t("enable",[0,1,2,3,4,5,6],!0,20));break;case "ftc_w_gfx_Lock3":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[1],!1,20));break;case "ftc_w_gfx_Redball":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,
47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158],!0,60));break;case "ftc_w_gfx_SnailBob":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",
[0,1],!1,20));break;case "ftc_w_gfx_hedgehog":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],!0,20));e.addBehavior(new t("disable",[0],!1,1,0,0));break;case "ftc_w_gfx_hint0":e.addBehavior(new t("enable",[0,1,2,3,4,5],!1,20));break;case "ftc_w_gfx_hint2":e.addBehavior(new t("enable",[0,1,2,3,4,5],!1,20));break;case "ftc_w_gfx_hint4":e.addBehavior(new t("enable",[0,1,2,3,4,5],!1,20));break;case "ftc_w_gfx_hint5":e.addBehavior(new t("enable",[0,1,2,3,4,5],!1,20));break;case "gfx_btnGameMenuSlider":e.addBehavior(new t("0",
[0],!0,1,0,0));e.addBehavior(new t("1",[1],!0,1,0,0));e.addBehavior(new t("2",[2],!0,1,0,0));e.addBehavior(new t("3",[3],!0,1,0,0));break;case "gfx_ftc_CandyCollect_Effect":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11],!1,20));break;case "gfx_ftc_Creature2_Animation2_Reverse":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59],!1,20));break;
case "gfx_ftc_GiftCollect_Effect1":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11],!1,20));break;case "gfx_ftc_ItemHint_Effect":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7],!1,20));break;case "gfx_ftc_StarCollect_Effect":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11],!1,20));break;case "gfx_ftc_Star_Effect":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11],!1,20));break;case "gfx_ftc_k_landscape":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,
1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],!1,20));break;case "gfx_ftc_k_lever":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[1],!1,20));break;case "gfx_ftc_k_lvl14_3hit_box":e.addBehavior(new t("0",[0],!1,20));e.addBehavior(new t("1",[1],!1,20));e.addBehavior(new t("2",[2],!1,20));break;case "gfx_ftc_k_lvl14_box_Effect":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],!1,20));break;case "gfx_ftc_k_lvl16_toy_magnet_button":e.addBehavior(new t("disable",
[0],!0,1,0,0));e.addBehavior(new t("enable",[1],!0,1,0,0));e.addBehavior(new t("2",[2],!0,1,0,0));break;case "gfx_ftc_k_lvl17_Creature2_AnimationJump":e.addBehavior(new t("disable",[0],!1,1,0,0));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],!1,30,0,0));break;case "gfx_ftc_k_lvl18_box":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3],!1,
20));break;case "gfx_ftc_k_lvl18_flasher":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!0,20));break;case "gfx_ftc_k_lvl18_fur2":e.addBehavior(new t("0",[0],!1,20));e.addBehavior(new t("1",[1],!1,20));e.addBehavior(new t("2",[2],!1,20));e.addBehavior(new t("3",[3],!1,20));e.addBehavior(new t("4",[4],!1,20));break;case "gfx_ftc_k_lvl18_oven":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11],!0,20));break;
case "gfx_ftc_k_lvl1_boom_effect":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10],!1,20));break;case "gfx_ftc_k_lvl3_candy_sun":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,
88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,
216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234],!0,60));break;case "gfx_ftc_k_lvl4_Creature3_Animation":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49],!1,20));break;case "gfx_ftc_k_lvl4_stone_1":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,
17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37],!1,30));break;case "gfx_ftc_k_lvl4_stone_2":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37],!1,30));break;case "gfx_ftc_k_lvl4_stone_3":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,
37],!1,30));break;case "gfx_ftc_k_lvl4_stone_4":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37],!1,30));break;case "gfx_ftc_k_no_paint":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13],!1,20));break;case "gfx_ftc_lvl10_Spider":e.addBehavior(new t("0",[0],!0,1,0,0));e.addBehavior(new t("1",[1],!0,1,0,0));break;case "gfx_ftc_lvl10_TvBtn":e.addBehavior(new t("0",
[0],!0,1,0,0));e.addBehavior(new t("1",[1],!0,1,0,0));e.addBehavior(new t("2",[2],!0,1,0,0));e.addBehavior(new t("3",[3],!0,1,0,0));break;case "gfx_ftc_lvl10_WhiteNoise1":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],!0,20));break;case "gfx_ftc_lvl10_WhiteNoise2":e.addBehavior(new t("enable",[0],!1,20));e.addBehavior(new t("disable",[1],!1,20));break;case "gfx_ftc_lvl13_PipeBtn01":e.addBehavior(new t("0",[0],!0,1,0,0));e.addBehavior(new t("1",[1],!0,1,0,0));e.addBehavior(new t("2",
[2],!0,1,0,0));e.addBehavior(new t("3",[3],!0,1,0,0));break;case "gfx_ftc_lvl14_Lock3":e.addBehavior(new t("enable",[0],!0,1,0,0));e.addBehavior(new t("disable",[1],!0,1,0,0));break;case "gfx_ftc_lvl14_WoodenLockerDoor1":e.addBehavior(new t("disable",[0],!1,20,0,0));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!1,20,0,0));break;case "gfx_ftc_lvl14_WoodenLockerDoor2":e.addBehavior(new t("disable",[0],!1,20,0,0));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!1,20,0,0));break;case "gfx_ftc_lvl15_BigLamp":e.addBehavior(new t("0",
[0],!1,20));e.addBehavior(new t("1",[1],!1,20));break;case "gfx_ftc_lvl15_CatPicturePart1_1":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10],!1,20));break;case "gfx_ftc_lvl15_CatPicturePart5":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10],!1,20));break;case "gfx_ftc_lvl17_LevelItem_GreenBoxPart2":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[3],!0,20));break;case "gfx_ftc_lvl18_Door":e.addBehavior(new t("disable",
[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14],!1,20));break;case "gfx_ftc_lvl20_Btn":e.addBehavior(new t("0",[0],!0,1,0,0));e.addBehavior(new t("1",[1],!0,1,0,0));break;case "gfx_ftc_lvl20_PumpedBalloonAnimations":case "gfx_ftc_lvl20_PumpedBalloonAnimations2":case "gfx_ftc_lvl20_PumpedBalloonAnimations3":case "gfx_ftc_lvl20_PumpedBalloonAnimations4":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,0,1,1,2,2,3,3,4],!1,20));break;case "gfx_ftc_lvl3_iMacBtn":e.addBehavior(new t("enable",
[0],!1,20));e.addBehavior(new t("disable",[1],!1,20));break;case "gfx_ftc_lvl7_CandyBox":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49],!1,20));break;case "gfx_ftc_lvl7_Spring":e.addBehavior(new t("disable",[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4],!0,20));break;case "gfx_ftc_star":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!1,20));break;case "gfx_hint3":e.addBehavior(new t("enable",
[0,1,2,3,4],!1,20));break;case "gfx_hint7":e.addBehavior(new t("enable",[0,1,2,3,4],!1,20));break;case "gfx_hintCandy":e.addBehavior(new t("enable",[0,1,2,3,4,5],!1,20));break;case "gfx_hintFingerPush":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],!0,20));break;case "gfx_hintFingerSwipe1_X":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],!0,20));break;case "gfx_hintFingerSwipe1_Y":e.addBehavior(new t("enable",
[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],!0,20));break;case "gfx_hintReplay":e.addBehavior(new t("enable",[0,1,2,3,4,5],!1,20));break;case "gfx_level10_LevelItem_Spider_Animation1":e.addBehavior(new t("disable",[0],!0,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],!1,20));break;case "gfx_level10_LevelItem_Spider_Animation2":e.addBehavior(new t("disable",
[0],!1,20));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],!1,20));break;case "greenLightB":e.addBehavior(new t("on",[0,1,2,3,4,5,6,7,8,9],!1,30));e.addBehavior(new t("off",[0],!1,30));break;case "hand":e.addBehavior(new t("enable",[0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6],!0,15,0,0));break;case "hideZone":e.addBehavior(new t("normal",[0],!0,30,0,0));e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13],!1,30,0,0));break;case "hook":e.addBehavior(new t("normal",
[0],!0,1,0,0));e.addBehavior(new t("above",[1],!0,1,0,0));e.addBehavior(new t("enable",[2],!0,1,0,0));break;case "ice11":e.addBehavior(new t("enable",[0,0,1,1,2,2,3,3,4,4],!1,20));break;case "ice12":e.addBehavior(new t("enable",[0,0,1,1,2,2,3,3,4,4],!1,20));break;case "ice14":e.addBehavior(new t("enable",[0,0,1,1,2,2,3,3,4,4,5,5],!1,20));break;case "invader_blue":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!0,20));break;case "invader_green":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],
!0,20));break;case "invader_orange":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!0,20));break;case "invader_red":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!0,20));break;case "invader_violet":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!0,20));break;case "killer":case "killer2":e.addBehavior(new t("normal",[0],!0,1,0,0));e.addBehavior(new t("above",[1],!0,1,0,0));e.addBehavior(new t("enable",[1],!0,1,0,0));break;case "lIcons":e.addBehavior(new t("0",[0],!0,1,0,0));e.addBehavior(new t("1",
[1],!0,1,0,0));e.addBehavior(new t("2",[2],!0,1,0,0));e.addBehavior(new t("3",[3],!0,1,0,0));e.addBehavior(new t("4",[4],!0,1,0,0));e.addBehavior(new t("5",[5],!0,1,0,0));e.addBehavior(new t("6",[6],!0,1,0,0));e.addBehavior(new t("7",[7],!0,1,0,0));e.addBehavior(new t("8",[8],!0,1,0,0));e.addBehavior(new t("9",[9],!0,1,0,0));e.addBehavior(new t("10",[10],!0,1,0,0));e.addBehavior(new t("11",[11],!0,1,0,0));e.addBehavior(new t("12",[12],!0,1,0,0));e.addBehavior(new t("13",[13],!0,1,0,0));e.addBehavior(new t("14",
[14],!0,1,0,0));e.addBehavior(new t("15",[15],!0,1,0,0));e.addBehavior(new t("16",[16],!0,1,0,0));e.addBehavior(new t("17",[17],!0,1,0,0));e.addBehavior(new t("18",[18],!0,1,0,0));e.addBehavior(new t("19",[19],!0,1,0,0));e.addBehavior(new t("20",[20],!0,1,0,0));e.addBehavior(new t("21",[21],!0,1,0,0));e.addBehavior(new t("22",[22],!0,1,0,0));e.addBehavior(new t("23",[23],!0,1,0,0));e.addBehavior(new t("24",[24],!0,1,0,0));e.addBehavior(new t("25",[25],!0,1,0,0));break;case "levelNumbers":for(c=0;60>
c;)d=c++,e.addBehavior(new t(null==d?"null":""+d,[d],!1,30));break;case "lightBlue":case "lightGreen":case "lightOrange":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],!0,30));e.addBehavior(new t("disable",[0],!0,30));break;case "levels":case "lmenu":case "replay":e.addBehavior(new t("out",[0],!0,1,0,0));e.addBehavior(new t("over",[1],!0,1,0,0));break;case "menuMaxi":case "menuMini":e.addBehavior(new t("out",
[0],!0,1,0,0));e.addBehavior(new t("over",[1],!0,1,0,0));break;case "musicMini":e.addBehavior(new t("selectEnable",[1],!0,1,0,0));e.addBehavior(new t("noSelectEnable",[0],!0,1,0,0));e.addBehavior(new t("selectDisable",[2],!0,1,0,0));e.addBehavior(new t("noSelectDisable",[3],!0,1,0,0));break;case "next":e.addBehavior(new t("out",[0],!0,1,0,0));e.addBehavior(new t("over",[1],!0,1,0,0));break;case "outLight":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,
24,25,26,27,28,29],!0,30));e.addBehavior(new t("disable",[0],!0,30));break;case "pig":e.addBehavior(new t("normalBox",[0],!0,1,0,0));e.addBehavior(new t("jumpBox",[1],!0,1,0,0));e.addBehavior(new t("failBox",[2],!0,1,0,0));e.addBehavior(new t("toastBox",[3],!0,1,0,0));break;case "play":e.addBehavior(new t("out",[0],!1,20));e.addBehavior(new t("over",[1],!1,20));break;case "repulsion":case "repulsion2":e.addBehavior(new t("normal",[0],!0,1,0,0));e.addBehavior(new t("above",[1],!0,1,0,0));e.addBehavior(new t("enable",
[2],!0,1,0,0));break;case "restartMaxi":case "restartMini":e.addBehavior(new t("out",[0],!0,1,0,0));e.addBehavior(new t("over",[1],!0,1,0,0));break;case "roomNumber":for(c=0;20>c;)d=c++,e.addBehavior(new t(null==d?"null":""+d,[d],!0,1,0,0));break;case "skip":e.addBehavior(new t("out",[0],!1,20,0,0));e.addBehavior(new t("over",[1],!1,20,0,0));break;case "skipNo":e.addBehavior(new t("out",[0],!1,20,0,0));e.addBehavior(new t("over",[1],!1,20,0,0));break;case "skipYes":e.addBehavior(new t("out",[0],!1,
20,0,0));e.addBehavior(new t("over",[1],!1,20,0,0));break;case "soundMini":e.addBehavior(new t("selectEnable",[1],!0,1,0,0));e.addBehavior(new t("noSelectEnable",[0],!0,1,0,0));e.addBehavior(new t("selectDisable",[2],!0,1,0,0));e.addBehavior(new t("noSelectDisable",[3],!0,1,0,0));break;case "splash":e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7],!1,15,0,0));break;case "complAcorn":case "star":e.addBehavior(new t("0",[0],!0,1,0,0));e.addBehavior(new t("1",[1],!0,1,0,0));e.addBehavior(new t("2",[2],
!0,1,0,0));e.addBehavior(new t("3",[3],!0,1,0,0));break;case "timer16":e.addBehavior(new t("0",[0],!0,1,0,0));e.addBehavior(new t("1",[1],!0,1,0,0));e.addBehavior(new t("2",[2],!0,1,0,0));e.addBehavior(new t("3",[3],!0,1,0,0));break;default:e.addBehavior(new t("enable",[0,1,2,3,4,5,6,7,8,9],!1,1,24,24))}e=new A(e,!0);e.set_name(a);return e};g.resizeStage=function(a){g.theMenu.set_scaleX(g.W);g.theGame.set_scaleX(g.W);g.theMenu.set_scaleY(g.H);g.theGame.set_scaleY(g.H)};g.checkUrl=function(a){for(var b=
M.get_location().host,c=0,d=a.length;c<d;){var e=c++;if(-1!=n.__cast(b,String).indexOf(a[e]))return!0}return!1};g.checkSpriteForCommon=function(a){return-1!=g.commonSpriteArray.indexOf(a)?!0:!1};g.roundBy=function(a,b){return Math.ceil(b*a)/a};g.showInterstital=function(a){ka.trace("show int",{fileName:"Storage.hx",lineNumber:1549,className:"Storage",methodName:"showInterstital"});g.reward=!0;g.resumeType=a;g.adsInited||(g.adsInited=!0);0==B.loopPaused&&B.stopLoop(!1);0==B.soundsPaused&&(B.stopSound(!1),
B.soundsPauseAds=!0);PokiSDK.commercialBreak().then(function(){g.resumeGame()})};g.showReward=function(a){g.resumeType=a;g.reward=!0;g.adsInited||(g.adsInited=!0);0==B.loopPaused&&B.stopLoop(!1);0==B.soundsPaused&&(B.stopSound(!1),B.soundsPauseAds=!0);PokiSDK.rewardedBreak().then(function(a){g.resumeGame(a)})};g.resumeGame=function(a){if(0!=a)switch(B.loopPauseAds&&(B.loopPauseAds=!1,B.resumeLoop()),B.soundsPauseAds&&(B.soundsPauseAds=!1,B.playSound()),ka.trace("resumeGame "+g.resumeType,{fileName:"Storage.hx",
lineNumber:1619,className:"Storage",methodName:"resumeGame"}),g.reward=!1,g.resumeType){case "icons":g.iconsState.goToIcon(null);ka.trace("aftrei",{fileName:"Storage.hx",lineNumber:1634,className:"Storage",methodName:"resumeGame"});break;case "levels":g.completedState.goToMenu(null);break;case "menu":g.menuState.goToPlay();break;case "restart":g.completedState.goToRestart(null);break;case "restartPlay":g.playState.goToRestartAfter();break;case "reward":a&&adBreak();break;default:g.completedState.afterAdsNext()}};
g.__super__=ia;g.prototype=w(ia.prototype,{__class__:g});var Sg=function(){this.b=""};k.StringBuf=Sg;Sg.__name__=["StringBuf"];Sg.prototype={b:null,add:function(a){this.b+=u.string(a)},addChar:function(a){this.b+=String.fromCharCode(a)},toString:function(){return this.b},__class__:Sg};var L=function(){};k.StringTools=L;L.__name__=["StringTools"];L.urlEncode=function(a){return encodeURIComponent(a)};L.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};L.htmlEscape=function(a,
b){a=a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");return b?a.split('"').join("&quot;").split("'").join("&#039;"):a};L.startsWith=function(a,b){return a.length>=b.length?P.substr(a,0,b.length)==b:!1};L.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c?P.substr(a,d-c,c)==b:!1};L.isSpace=function(a,b){a=P.cca(a,b);return 8<a&&14>a?!0:32==a};L.ltrim=function(a){for(var b=a.length,c=0;c<b&&L.isSpace(a,c);)++c;return 0<c?P.substr(a,c,b-c):a};L.rtrim=function(a){for(var b=
a.length,c=0;c<b&&L.isSpace(a,b-c-1);)++c;return 0<c?P.substr(a,0,b-c):a};L.trim=function(a){return L.ltrim(L.rtrim(a))};L.replace=function(a,b,c){return a.split(b).join(c)};L.hex=function(a,b){for(var c="";c="0123456789ABCDEF".charAt(a&15)+c,a>>>=4,0<a;);if(null!=b)for(;c.length<b;)c="0"+c;return c};L.fastCodeAt=function(a,b){return a.charCodeAt(b)};L.isEof=function(a){return a!=a};var Ei=function(){this.transporterRolls=[]};k.TransporterLine=Ei;Ei.__name__=["TransporterLine"];Ei.prototype={transporterRolls:null,
base:null,__class__:Ei};var va=k.ValueType={__ename__:["ValueType"],__constructs__:"TNull TInt TFloat TBool TObject TFunction TClass TEnum TUnknown".split(" ")};va.TNull=["TNull",0];va.TNull.toString=I;va.TNull.__enum__=va;va.TInt=["TInt",1];va.TInt.toString=I;va.TInt.__enum__=va;va.TFloat=["TFloat",2];va.TFloat.toString=I;va.TFloat.__enum__=va;va.TBool=["TBool",3];va.TBool.toString=I;va.TBool.__enum__=va;va.TObject=["TObject",4];va.TObject.toString=I;va.TObject.__enum__=va;va.TFunction=["TFunction",
5];va.TFunction.toString=I;va.TFunction.__enum__=va;va.TClass=function(a){a=["TClass",6,a];a.__enum__=va;a.toString=I;return a};va.TEnum=function(a){a=["TEnum",7,a];a.__enum__=va;a.toString=I;return a};va.TUnknown=["TUnknown",8];va.TUnknown.toString=I;va.TUnknown.__enum__=va;var Q=function(){};k.Type=Q;Q.__name__=["Type"];Q.getClass=function(a){return null==a?null:n.getClass(a)};Q.getClassName=function(a){a=a.__name__;return null==a?null:a.join(".")};Q.getEnumName=function(a){return a.__ename__.join(".")};
Q.resolveClass=function(a){a=k[a];return null!=a&&n.isClass(a)?a:null};Q.resolveEnum=function(a){a=k[a];return null!=a&&n.isEnum(a)?a:null};Q.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],
b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);case 11:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);case 12:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11]);case 13:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12]);case 14:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],
b[11],b[12],b[13]);default:throw new K("Too many arguments");}};Q.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};Q.createEnum=function(a,b,c){var d=C.field(a,b);if(null==d)throw new K("No such constructor "+b);if(C.isFunction(d)){if(null==c)throw new K("Constructor "+b+" need parameters");return C.callMethod(a,d,c)}if(null!=c&&0!=c.length)throw new K("Constructor "+b+" does not need parameters");return d};Q.getInstanceFields=function(a){var b=[],c;for(c in a.prototype)b.push(c);
P.remove(b,"__class__");P.remove(b,"__properties__");return b};Q.getEnumConstructs=function(a){return a.__constructs__.slice()};Q["typeof"]=function(a){switch(typeof a){case "boolean":return va.TBool;case "function":return n.isClass(a)||n.isEnum(a)?va.TObject:va.TFunction;case "number":return Math.ceil(a)==a%2147483648?va.TInt:va.TFloat;case "object":if(null==a)return va.TNull;var b=a.__enum__;if(null!=b)return va.TEnum(b);a=n.getClass(a);return null!=a?va.TClass(a):va.TObject;case "string":return va.TClass(String);
case "undefined":return va.TNull;default:return va.TUnknown}};Q.enumIndex=function(a){return a[1]};var $b={};k["_UInt.UInt_Impl_"]=$b;$b.__name__=["_UInt","UInt_Impl_"];$b.toFloat=function(a){return 0>a?4294967296+a:a+0};var Cf=D.Utils=function(){};k.Utils=Cf;Cf.__name__=["Utils"];Cf.setTint=function(a,b){var c=u["int"](a>>16)&255,d=u["int"](a>>8)&255;return new ib(b,b,b,1,Math.round(c*b),Math.round(d*b),Math.round((a&255)*b),0)};var fc=k["haxe.StackItem"]={__ename__:["haxe","StackItem"],__constructs__:["CFunction",
"Module","FilePos","Method","LocalFunction"]};fc.CFunction=["CFunction",0];fc.CFunction.toString=I;fc.CFunction.__enum__=fc;fc.Module=function(a){a=["Module",1,a];a.__enum__=fc;a.toString=I;return a};fc.FilePos=function(a,b,c){a=["FilePos",2,a,b,c];a.__enum__=fc;a.toString=I;return a};fc.Method=function(a,b){a=["Method",3,a,b];a.__enum__=fc;a.toString=I;return a};fc.LocalFunction=function(a){a=["LocalFunction",4,a];a.__enum__=fc;a.toString=I;return a};var Y=function(){};k["haxe.CallStack"]=Y;Y.__name__=
["haxe","CallStack"];Y.getStack=function(a){if(null==a)return[];var b=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){a=[];for(var c=0;c<b.length;){var d=b[c];++c;null!=Y.wrapCallSite&&(d=Y.wrapCallSite(d));var m=null,h=d.getFunctionName();if(null!=h){var q=h.lastIndexOf(".");0<=q&&(m=P.substr(h,0,q),h=P.substr(h,q+1,null),m=fc.Method(m,h))}a.push(fc.FilePos(m,d.getFileName(),d.getLineNumber()))}return a};a=Y.makeStack(a.stack);Error.prepareStackTrace=b;return a};Y.callStack=function(){try{throw Error();
}catch(b){Y.lastException=b;b instanceof K&&(b=b.val);var a=Y.getStack(b);a.shift();return a}};Y.exceptionStack=function(){return Y.getStack(Y.lastException)};Y.toString=function(a){for(var b=new Sg,c=0;c<a.length;){var d=a[c];++c;b.add("\nCalled from ");Y.itemToString(b,d)}return b.toString()};Y.itemToString=function(a,b){switch(Q.enumIndex(b)){case 0:a.add("a C function");break;case 1:b=b[2];a.add("module ");a.add(b);break;case 2:var c=b[4],d=b[3];b=b[2];null!=b&&(Y.itemToString(a,b),a.add(" ("));
a.add(d);a.add(" line ");a.add(c);null!=b&&a.add(")");break;case 3:c=b[3];a.add(b[2]);a.add(".");a.add(c);break;case 4:b=b[2],a.add("local function #"),a.add(b)}};Y.makeStack=function(a){if(null==a)return[];if("string"==typeof a){a=a.split("\n");"Error"==a[0]&&a.shift();for(var b=[],c=new ma("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$",""),d=0;d<a.length;){var e=a[d];++d;if(c.match(e)){e=c.matched(1).split(".");var f=e.pop(),m=c.matched(2),h=u.parseInt(c.matched(3));b.push(fc.FilePos("Anonymous function"==
f?fc.LocalFunction():"Global code"==f?null:fc.Method(e.join("."),f),m,h))}else b.push(fc.Module(L.trim(e)))}return b}return a};var Ii=function(a,b){this.high=a;this.low=b};k["haxe._Int64.___Int64"]=Ii;Ii.__name__=["haxe","_Int64","___Int64"];Ii.prototype={high:null,low:null,__class__:Ii};var ka=function(){};k["haxe.Log"]=ka;ka.__name__=["haxe","Log"];ka.trace=function(a,b){n.__trace(a,b)};var ac=function(){this.buf=new Sg;this.cache=[];this.useCache=ac.USE_CACHE;this.useEnumIndex=ac.USE_ENUM_INDEX;
this.shash=new ea;this.scount=0};k["haxe.Serializer"]=ac;ac.__name__=["haxe","Serializer"];ac.run=function(a){var b=new ac;b.serialize(a);return b.toString()};ac.prototype={buf:null,cache:null,shash:null,scount:null,useCache:null,useEnumIndex:null,toString:function(){return this.buf.toString()},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.add("R"),this.buf.add(b)):(this.shash.set(a,this.scount++),this.buf.add("y"),a=L.urlEncode(a),this.buf.add(a.length),this.buf.add(":"),
this.buf.add(a))},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,f=this.cache[e];if(typeof f==b&&f==a)return this.buf.add("r"),this.buf.add(e),!0}this.cache.push(a);return!1},serializeFields:function(a){for(var b=0,c=C.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(C.field(a,d))}this.buf.add("g")},serialize:function(a){var b=Q["typeof"](a);switch(Q.enumIndex(b)){case 0:this.buf.add("n");break;case 1:if(0==a){this.buf.add("z");break}this.buf.add("i");
this.buf.add(a);break;case 2:isNaN(a)?this.buf.add("k"):isFinite(a)?(this.buf.add("d"),this.buf.add(a)):this.buf.add(0>a?"m":"p");break;case 3:this.buf.add(a?"t":"f");break;case 4:u.is(a,rl)?(a=Q.getClassName(a),this.buf.add("A"),this.serializeString(a)):u.is(a,zl)?(this.buf.add("B"),this.serializeString(Q.getEnumName(a))):this.useCache&&this.serializeRef(a)||(this.buf.add("o"),this.serializeFields(a));break;case 5:throw new K("Cannot serialize function");case 6:b=b[2];if(b==String){this.serializeString(a);
break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:b=0;this.buf.add("a");for(var c=0,d=a.length;c<d;){var e=c++;null==a[e]?++b:(0<b&&(1==b?this.buf.add("n"):(this.buf.add("u"),this.buf.add(b)),b=0),this.serialize(a[e]))}0<b&&(1==b?this.buf.add("n"):(this.buf.add("u"),this.buf.add(b)));this.buf.add("h");break;case Date:this.buf.add("v");this.buf.add(a.getTime());break;case Db:this.buf.add("l");for(a=a.iterator();a.hasNext();)b=a.next(),this.serialize(b);this.buf.add("h");break;
case Cb:this.buf.add("q");for(b=a.keys();b.hasNext();)c=b.next(),this.buf.add(":"),this.buf.add(c),this.serialize(a.get(c));this.buf.add("h");break;case rb:this.buf.add("M");for(b=a.keys();b.hasNext();)c=b.next(),d=C.field(c,"__id__"),C.deleteField(c,"__id__"),this.serialize(c),C.setField(c,"__id__",d),this.serialize(a.get(c));this.buf.add("h");break;case ea:this.buf.add("b");for(b=a.keys();b.hasNext();)c=b.next(),this.serializeString(c),this.serialize(a.get(c));this.buf.add("h");break;case ya:this.buf.add("s");
this.buf.add(Math.ceil(8*a.length/6));this.buf.add(":");c=0;d=a.length-2;b=ac.BASE64_CODES;if(null==b){b=Array(ac.BASE64.length);e=0;for(var f=ac.BASE64.length;e<f;){var m=e++;b[m]=P.cca(ac.BASE64,m)}ac.BASE64_CODES=b}for(;c<d;)e=a.get(c++),f=a.get(c++),m=a.get(c++),this.buf.addChar(b[e>>2]),this.buf.addChar(b[(e<<4|f>>4)&63]),this.buf.addChar(b[(f<<2|m>>6)&63]),this.buf.addChar(b[m&63]);c==d?(d=a.get(c++),a=a.get(c++),this.buf.addChar(b[d>>2]),this.buf.addChar(b[(d<<4|a>>4)&63]),this.buf.addChar(b[a<<
2&63])):c==d+1&&(a=a.get(c++),this.buf.addChar(b[a>>2]),this.buf.addChar(b[a<<4&63]));break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.add("C"),this.serializeString(Q.getClassName(b)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.add("g")):(this.buf.add("c"),this.serializeString(Q.getClassName(b)),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 7:b=b[2];if(this.useCache){if(this.serializeRef(a))break;this.cache.pop()}this.buf.add(this.useEnumIndex?
"j":"w");this.serializeString(Q.getEnumName(b));this.useEnumIndex?(this.buf.add(":"),this.buf.add(a[1])):this.serializeString(a[0]);this.buf.add(":");b=a.length;this.buf.add(b-2);for(c=2;c<b;)d=c++,this.serialize(a[d]);this.useCache&&this.cache.push(a);break;default:throw new K("Cannot serialize "+u.string(a));}},__class__:ac};var Ff=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};k["haxe.Timer"]=Ff;Ff.__name__=["haxe","Timer"];Ff.delay=function(a,b){var c=new Ff(b);c.run=function(){c.stop();
a()};return c};Ff.prototype={id:null,stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Ff};var Tg=function(){};k["haxe._Unserializer.DefaultResolver"]=Tg;Tg.__name__=["haxe","_Unserializer","DefaultResolver"];Tg.prototype={resolveClass:function(a){return Q.resolveClass(a)},resolveEnum:function(a){return Q.resolveEnum(a)},__class__:Tg};var Bb=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=Bb.DEFAULT_RESOLVER;null==
a&&(a=new Tg,Bb.DEFAULT_RESOLVER=a);this.resolver=a};k["haxe.Unserializer"]=Bb;Bb.__name__=["haxe","Unserializer"];Bb.initCodes=function(){for(var a=[],b=0,c=Bb.BASE64.length;b<c;){var d=b++;a[L.fastCodeAt(Bb.BASE64,d)]=d}return a};Bb.run=function(a){return(new Bb(a)).unserialize()};Bb.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,setResolver:function(a){this.resolver=null==a?he.get_instance():a},get:function(a){return L.fastCodeAt(this.buf,a)},readDigits:function(){for(var a=
0,b=!1,c=this.pos;;){var d=this.get(this.pos);if(L.isEof(d))break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},readFloat:function(){for(var a=this.pos;;){var b=this.get(this.pos);if(L.isEof(b))break;if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return u.parseFloat(P.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw new K("Invalid object");if(103==this.get(this.pos))break;var b=this.unserialize();
if("string"!=typeof b)throw new K("Invalid object key");var c=this.unserialize();C.setField(a,b,c)}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw new K("Invalid enum format");var c=this.readDigits();if(0==c)return Q.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return Q.createEnum(a,b,d)},unserialize:function(){switch(this.get(this.pos++)){case 65:var a=this.unserialize(),b=this.resolver.resolveClass(a);if(null==b)throw new K("Class not found "+a);return b;
case 66:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new K("Enum not found "+a);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new K("Class not found "+a);a=Q.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.get(this.pos++))throw new K("Invalid custom data");return a;case 77:a=new rb;for(this.cache.push(a);104!=this.get(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 82:a=
this.readDigits();if(0>a||a>=this.scache.length)throw new K("Invalid string reference");return this.scache[a];case 97:a=[];for(this.cache.push(a);;){b=this.get(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 98:a=new ea;for(this.cache.push(a);104!=this.get(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new K("Class not found "+
a);a=Q.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 100:return this.readFloat();case 102:return!1;case 105:return this.readDigits();case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new K("Enum not found "+a);this.pos++;var c=this.readDigits(),d=Q.getEnumConstructs(b)[c];if(null==d)throw new K("Unknown enum index "+a+"@"+c);a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 107:return NaN;case 108:a=new Db;for(this.cache.push(a);104!=
this.get(this.pos);)a.add(this.unserialize());this.pos++;return a;case 109:return-Infinity;case 110:return null;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 112:return Infinity;case 113:a=new Cb;this.cache.push(a);for(b=this.get(this.pos++);58==b;)b=this.readDigits(),a.set(b,this.unserialize()),b=this.get(this.pos++);if(104!=b)throw new K("Invalid IntMap format");return a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw new K("Invalid reference");return this.cache[a];
case 115:a=this.readDigits();d=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<a)throw new K("Invalid bytes length");var e=Bb.CODES;null==e&&(e=Bb.initCodes(),Bb.CODES=e);var f=this.pos,m=a&3,h=f+(a-m);b=ya.alloc(3*(a>>2)+(2<=m?m-1:0));for(c=0;f<h;){var q=e[L.fastCodeAt(d,f++)],y=e[L.fastCodeAt(d,f++)];b.set(c++,q<<2|y>>4);q=e[L.fastCodeAt(d,f++)];b.set(c++,y<<4|q>>2);y=e[L.fastCodeAt(d,f++)];b.set(c++,q<<6|y)}2<=m&&(y=e[L.fastCodeAt(d,f++)],h=e[L.fastCodeAt(d,f++)],b.set(c++,y<<2|h>>4),
3==m&&(d=e[L.fastCodeAt(d,f++)],b.set(c++,h<<4|d>>2)));this.pos+=a;this.cache.push(b);return b;case 116:return!0;case 118:return 48<=this.get(this.pos)&&57>=this.get(this.pos)&&48<=this.get(this.pos+1)&&57>=this.get(this.pos+1)&&48<=this.get(this.pos+2)&&57>=this.get(this.pos+2)&&48<=this.get(this.pos+3)&&57>=this.get(this.pos+3)&&45==this.get(this.pos+4)?(a=P.strDate(P.substr(this.buf,this.pos,19)),this.pos+=19):(a=this.readFloat(),a=new Date(a)),this.cache.push(a),a;case 119:a=this.unserialize();
b=this.resolver.resolveEnum(a);if(null==b)throw new K("Enum not found "+a);a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 120:throw K.wrap(this.unserialize());case 121:a=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<a)throw new K("Invalid string length");b=P.substr(this.buf,this.pos,a);this.pos+=a;b=L.urlDecode(b);this.scache.push(b);return b;case 122:return 0}this.pos--;throw new K("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos);
},__class__:Bb};var he=function(){};k["haxe._Unserializer.NullResolver"]=he;he.__name__=["haxe","_Unserializer","NullResolver"];he.__properties__={get_instance:"get_instance"};he.get_instance=function(){null==he.instance&&(he.instance=new he);return he.instance};he.prototype={resolveClass:function(a){return null},resolveEnum:function(a){return null},__class__:he};var Gf=function(a){this.__b=""};k["haxe.Utf8"]=Gf;Gf.__name__=["haxe","Utf8"];Gf.sub=function(a,b,c){return P.substr(a,b,c)};Gf.prototype=
{__b:null,addChar:function(a){this.__b+=String.fromCharCode(a)},toString:function(){return this.__b},__class__:Gf};var ya=function(a){this.length=a.byteLength;this.b=new Hb(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};k["haxe.io.Bytes"]=ya;ya.__name__=["haxe","io","Bytes"];ya.alloc=function(a){return new ya(new Ji(a))};ya.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=L.fastCodeAt(a,c++);55296<=d&&56319>=d&&(d=d-55232<<10|L.fastCodeAt(a,c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|
d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new ya((new Hb(b)).buffer)};ya.ofData=function(a){var b=a.hxBytes;return null!=b?b:new ya(a)};ya.fastGet=function(a,b){return a.bytes[b]};ya.prototype={length:null,b:null,data:null,get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw new K(Nc.OutsideBounds);var c="",d=this.b,e=String.fromCharCode,f=a;for(a+=
b;f<a;)if(b=d[f++],128>b){if(0==b)break;c+=e(b)}else if(224>b)c+=e((b&63)<<6|d[f++]&127);else if(240>b){var m=d[f++];c+=e((b&31)<<12|(m&127)<<6|d[f++]&127)}else{m=d[f++];var h=d[f++];b=(b&15)<<18|(m&127)<<12|(h&127)<<6|d[f++]&127;c+=e((b>>10)+55232);c+=e(b&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},getData:function(){return this.b.bufferValue},__class__:ya};var ie=function(){};k["haxe.crypto.Base64"]=ie;ie.__name__=["haxe","crypto","Base64"];ie.encode=function(a,
b){null==b&&(b=!0);var c=(new ng(ie.BYTES)).encodeBytes(a).toString();if(b)switch(a.length%3){case 1:c+="==";break;case 2:c+="="}return c};ie.decode=function(a,b){null==b&&(b=!0);if(b)for(;61==P.cca(a,a.length-1);)a=P.substr(a,0,-1);return(new ng(ie.BYTES)).decodeBytes(ya.ofString(a))};var ng=function(a){for(var b=a.length,c=1;b>1<<c;)++c;if(8<c||b!=1<<c)throw new K("BaseCode : base length must be a power of two.");this.base=a;this.nbits=c};k["haxe.crypto.BaseCode"]=ng;ng.__name__=["haxe","crypto",
"BaseCode"];ng.prototype={base:null,nbits:null,tbl:null,encodeBytes:function(a){for(var b=this.nbits,c=this.base,d=u["int"](8*a.length/b),e=ya.alloc(d+(0==8*a.length%b?0:1)),f=0,m=0,h=(1<<b)-1,q=0,y=0;y<d;){for(;m<b;)m+=8,f<<=8,f|=a.get(q++);m-=b;e.set(y++,c.get(f>>m&h))}0<m&&e.set(y++,c.get(f<<b-m&h));return e},initTable:function(){for(var a=[],b=0;256>b;){var c=b++;a[c]=-1}b=0;for(c=this.base.length;b<c;){var d=b++;a[this.base.get(d)]=d}this.tbl=a},decodeBytes:function(a){var b=this.nbits;null==
this.tbl&&this.initTable();for(var c=this.tbl,d=a.length*b>>3,e=ya.alloc(d),f=0,m=0,h=0,q=0;q<d;){for(;8>m;){m+=b;f<<=b;var y=c[a.get(h++)];if(-1==y)throw new K("BaseCode : invalid encoded char");f|=y}m-=8;e.set(q++,f>>m&255)}return e},__class__:ng};var Cb=function(){this.h={}};k["haxe.ds.IntMap"]=Cb;Cb.__name__=["haxe","ds","IntMap"];Cb.__interfaces__=[lg];Cb.prototype={h:null,set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return P.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},__class__:Cb};var Ki=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};k["haxe.ds._StringMap.StringMapIterator"]=Ki;Ki.__name__=["haxe","ds","_StringMap","StringMapIterator"];Ki.prototype={map:null,
keys:null,index:null,count:null,hasNext:function(){return this.index<this.count},next:function(){return this.map.get(this.keys[this.index++])},__class__:Ki};var ea=function(){this.h={}};k["haxe.ds.StringMap"]=ea;ea.__name__=["haxe","ds","StringMap"];ea.__interfaces__=[lg];ea.prototype={h:null,rh:null,isReserved:function(a){return null!=Ql[a]},set:function(a,b){this.isReserved(a)?this.setReserved(a,b):this.h[a]=b},get:function(a){return this.isReserved(a)?this.getReserved(a):this.h[a]},exists:function(a){return this.isReserved(a)?
this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(this.isReserved(a)){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},keys:function(){return P.iter(this.arrayKeys())},
arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new Ki(this,this.arrayKeys())},__class__:ea};var tk=function(){};k["haxe.io.Eof"]=tk;tk.__name__=["haxe","io","Eof"];tk.prototype={toString:function(){return"Eof"},__class__:tk};var Nc=k["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};Nc.Blocked=
["Blocked",0];Nc.Blocked.toString=I;Nc.Blocked.__enum__=Nc;Nc.Overflow=["Overflow",1];Nc.Overflow.toString=I;Nc.Overflow.__enum__=Nc;Nc.OutsideBounds=["OutsideBounds",2];Nc.OutsideBounds.toString=I;Nc.OutsideBounds.__enum__=Nc;Nc.Custom=function(a){a=["Custom",3,a];a.__enum__=Nc;a.toString=I;return a};var Oc=function(){};k["haxe.io.FPHelper"]=Oc;Oc.__name__=["haxe","io","FPHelper"];Oc.i32ToFloat=function(a){var b=a>>>23&255,c=a&8388607;return 0==c&&0==b?0:(1-(a>>>31<<1))*(1+Math.pow(2,-23)*c)*Math.pow(2,
b-127)};Oc.floatToI32=function(a){if(0==a)return 0;var b=0>a?-a:a,c=Math.floor(Math.log(b)/.6931471805599453);-127>c?c=-127:128<c&&(c=128);b=Math.round(8388608*(b/Math.pow(2,c)-1));8388608==b&&128>c&&(b=0,++c);return(0>a?-2147483648:0)|c+127<<23|b};Oc.i64ToDouble=function(a,b){var c=(b>>20&2047)-1023;a=4294967296*(b&1048575)+2147483648*(a>>>31)+(a&2147483647);return 0==a&&-1023==c?0:(1-(b>>>31<<1))*(1+Math.pow(2,-52)*a)*Math.pow(2,c)};Oc.doubleToI64=function(a){var b=Oc.i64tmp;if(0==a)b.low=0,b.high=
0;else if(isFinite(a)){var c=0>a?-a:a,d=Math.floor(Math.log(c)/.6931471805599453),e=Math.round(4503599627370496*(c/Math.pow(2,d)-1));c=u["int"](e);e=u["int"](e/4294967296);b.low=c;b.high=(0>a?-2147483648:0)|d+1023<<20|e}else 0<a?(b.low=0,b.high=2146435072):(b.low=0,b.high=-1048576);return b};var Vf=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var b=a.lastIndexOf("/"),c=a.lastIndexOf("\\");b<c?(this.dir=P.substr(a,0,c),a=P.substr(a,c+1,null),this.backslash=!0):c<b?(this.dir=
P.substr(a,0,b),a=P.substr(a,b+1,null)):this.dir=null;b=a.lastIndexOf(".");-1!=b?(this.ext=P.substr(a,b+1,null),this.file=P.substr(a,0,b)):(this.ext=null,this.file=a)};k["haxe.io.Path"]=Vf;Vf.__name__=["haxe","io","Path"];Vf.directory=function(a){a=new Vf(a);return null==a.dir?"":a.dir};Vf.prototype={dir:null,file:null,ext:null,backslash:null,__class__:Vf};var K=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,K)};k["js._Boot.HaxeError"]=
K;K.__name__=["js","_Boot","HaxeError"];K.wrap=function(a){return a instanceof Error?a:new K(a)};K.__super__=Error;K.prototype=w(Error.prototype,{val:null,__class__:K});var n=function(){};k["js.Boot"]=n;n.__name__=["js","Boot"];n.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};n.__trace=function(a,b){var c=null!=b?b.fileName+":"+b.lineNumber+": ":"";c+=n.__string_rec(a,"");if(null!=b&&null!=b.customParams)for(a=0,b=b.customParams;a<b.length;){var d=
b[a];++a;c+=","+n.__string_rec(d,"")}if("undefined"!=typeof document){var e=document.getElementById("haxe:trace");a=null!=e}else a=!1;a?e.innerHTML+=n.__unhtml(c)+"<br/>":"undefined"!=typeof console&&null!=console.log&&console.log(c)};n.isClass=function(a){return a.__name__};n.isEnum=function(a){return a.__ename__};n.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=n.__nativeClassName(a);return null!=a?n.__resolveNativeClass(a):null};
n.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(n.isClass(a)||n.isEnum(a))&&(c="object");switch(c){case "function":return"<function>";case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=2,e=a.length;d<e;){var f=d++;c=2!=f?c+(","+n.__string_rec(a[f],b)):c+n.__string_rec(a[f],b)}return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+n.__string_rec(a[f],b);return d+
"]"}try{d=a.toString}catch(m){return Y.lastException=m,"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)e&&!a.hasOwnProperty(c)||"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+n.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "string":return a;default:return String(a)}};n.__interfLoop=
function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var f=d++;f=c[f];if(f==b||n.__interfLoop(f,b))return!0}return n.__interfLoop(a.__super__,b)};n.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case Al:return"boolean"==typeof a;case Rl:return!0;case Bl:return"number"==typeof a;case Sl:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=
a)if("function"==typeof b){if(a instanceof b||n.__interfLoop(n.getClass(a),b))return!0}else{if("object"==typeof b&&n.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==rl&&null!=a.__name__||b==zl&&null!=a.__ename__?!0:a.__enum__==b}};n.__cast=function(a,b){if(n.__instanceof(a,b))return a;throw new K("Cannot cast "+u.string(a)+" to "+u.string(b));};n.__nativeClassName=function(a){a=n.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};n.__isNativeObj=
function(a){return null!=n.__nativeClassName(a)};n.__resolveNativeClass=function(a){return bb[a]};var M=function(){};k["js.Browser"]=M;M.__name__=["js","Browser"];M.__properties__={get_navigator:"get_navigator",get_location:"get_location",get_document:"get_document",get_window:"get_window"};M.get_window=function(){return window};M.get_document=function(){return window.document};M.get_location=function(){return window.location};M.get_navigator=function(){return window.navigator};M.getLocalStorage=
function(){try{var a=M.get_window().localStorage;a.getItem("");return a}catch(b){return Y.lastException=b,null}};var Ci=function(){};k["js.Lib"]=Ci;Ci.__name__=["js","Lib"];Ci.__properties__={get_undefined:"get_undefined"};Ci.get_undefined=function(){};var uk=function(){};k["js.html._CanvasElement.CanvasUtil"]=uk;uk.__name__=["js","html","_CanvasElement","CanvasUtil"];uk.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=d[c];++c;e=a.getContext(e,b);if(null!=
e)return e}return null};var zc=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{this.a=[];for(var b=0;b<a;){var c=b++;this.a[c]=0}this.byteLength=a}};k["js.html.compat.ArrayBuffer"]=zc;zc.__name__=["js","html","compat","ArrayBuffer"];zc.sliceImpl=function(a,b){a=new Hb(this,a,null==b?null:b-a);b=new Ji(a.byteLength);(new Hb(b)).set(a);return b};zc.prototype={byteLength:null,a:null,slice:function(a,b){return new zc(this.a.slice(a,b))},__class__:zc};var vk=
function(a,b,c){this.buf=a;this.offset=null==b?0:b;this.length=null==c?a.byteLength-this.offset:c;if(0>this.offset||0>this.length||this.offset+this.length>a.byteLength)throw new K(Nc.OutsideBounds);this.byteLength=this.length;this.byteOffset=this.offset;this.buffer=this.buf};k["js.html.compat.DataView"]=vk;vk.__name__=["js","html","compat","DataView"];vk.prototype={buf:null,offset:null,length:null,byteLength:null,byteOffset:null,buffer:null,getInt8:function(a){a=this.buf.a[this.offset+a];return 128<=
a?a-256:a},getUint8:function(a){return this.buf.a[this.offset+a]},getInt16:function(a,b){a=this.getUint16(a,b);return 32768<=a?a-65536:a},getUint16:function(a,b){return b?this.buf.a[this.offset+a]|this.buf.a[this.offset+a+1]<<8:this.buf.a[this.offset+a]<<8|this.buf.a[this.offset+a+1]},getInt32:function(a,b){var c=this.offset+a;a=this.buf.a[c++];var d=this.buf.a[c++],e=this.buf.a[c++];c=this.buf.a[c++];return b?a|d<<8|e<<16|c<<24:c|e<<8|d<<16|a<<24},getUint32:function(a,b){a=this.getInt32(a,b);return 0>
a?a+4294967296:a},getFloat32:function(a,b){return Oc.i32ToFloat(this.getInt32(a,b))},getFloat64:function(a,b){var c=this.getInt32(a,b);a=this.getInt32(a+4,b);return Oc.i64ToDouble(b?c:a,b?a:c)},setInt8:function(a,b){this.buf.a[a+this.offset]=0>b?b+128&255:b&255},setUint8:function(a,b){this.buf.a[a+this.offset]=b&255},setInt16:function(a,b,c){this.setUint16(a,0>b?b+65536:b,c)},setUint16:function(a,b,c){a+=this.offset;c?(this.buf.a[a]=b&255,this.buf.a[a++]=b>>8&255):(this.buf.a[a++]=b>>8&255,this.buf.a[a]=
b&255)},setInt32:function(a,b,c){this.setUint32(a,b,c)},setUint32:function(a,b,c){a+=this.offset;c?(this.buf.a[a++]=b&255,this.buf.a[a++]=b>>8&255,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>>24):(this.buf.a[a++]=b>>>24,this.buf.a[a++]=b>>16&255,this.buf.a[a++]=b>>8&255,this.buf.a[a++]=b&255)},setFloat32:function(a,b,c){this.setUint32(a,Oc.floatToI32(b),c)},setFloat64:function(a,b,c){b=Oc.doubleToI64(b);c?(this.setUint32(a,b.low),this.setUint32(a,b.high)):(this.setUint32(a,b.high),this.setUint32(a,
b.low))},__class__:vk};var kf=function(){};k["js.html.compat.Float32Array"]=kf;kf.__name__=["js","html","compat","Float32Array"];kf._new=function(a,b,c){if("number"==typeof a){var d=[];for(b=0;b<a;){var e=b++;d[e]=0}d.byteLength=d.length<<2;d.byteOffset=0;a=[];b=0;for(e=d.length<<2;b<e;)b++,a.push(0);d.buffer=new zc(a)}else if(u.is(a,zc)){null==b&&(b=0);null==c&&(c=a.byteLength-b>>2);d=[];for(e=0;e<c;){e++;var f=a.a[b++]|a.a[b++]<<8|a.a[b++]<<16|a.a[b++]<<24;d.push(Oc.i32ToFloat(f))}d.byteLength=
d.length<<2;d.byteOffset=b;d.buffer=a}else if(a instanceof Array&&null==a.__enum__){d=a.slice();a=[];for(b=0;b<d.length;)e=d[b],++b,e=Oc.floatToI32(e),a.push(e&255),a.push(e>>8&255),a.push(e>>16&255),a.push(e>>>24);d.byteLength=d.length<<2;d.byteOffset=0;d.buffer=new zc(a)}else throw new K("TODO "+u.string(a));d.subarray=kf._subarray;d.set=kf._set;return d};kf._set=function(a,b){if(u.is(a.buffer,zc)){if(a.byteLength+b>this.byteLength)throw new K("set() outside of range");for(var c=0,d=a.byteLength;c<
d;){var e=c++;this[e+b]=a[e]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new K("set() outside of range");c=0;for(d=a.length;c<d;)e=c++,this[e+b]=a[e]}else throw new K("TODO");};kf._subarray=function(a,b){b=kf._new(this.slice(a,b));b.byteOffset=4*a;return b};var Re=function(){};k["js.html.compat.Uint8Array"]=Re;Re.__name__=["js","html","compat","Uint8Array"];Re._new=function(a,b,c){if("number"==typeof a){c=[];for(b=0;b<a;){var d=b++;c[d]=0}c.byteLength=c.length;
c.byteOffset=0;c.buffer=new zc(c)}else if(u.is(a,zc))null==b&&(b=0),null==c&&(c=a.byteLength-b),c=0==b?a.a:a.a.slice(b,b+c),c.byteLength=c.length,c.byteOffset=b,c.buffer=a;else if(a instanceof Array&&null==a.__enum__)c=a.slice(),c.byteLength=c.length,c.byteOffset=0,c.buffer=new zc(c);else throw new K("TODO "+u.string(a));c.subarray=Re._subarray;c.set=Re._set;return c};Re._set=function(a,b){if(u.is(a.buffer,zc)){if(a.byteLength+b>this.byteLength)throw new K("set() outside of range");for(var c=0,d=
a.byteLength;c<d;){var e=c++;this[e+b]=a[e]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+b>this.byteLength)throw new K("set() outside of range");c=0;for(d=a.length;c<d;)e=c++,this[e+b]=a[e]}else throw new K("TODO");};Re._subarray=function(a,b){b=Re._new(this.slice(a,b));b.byteOffset=a;return b};var ri=function(){this.connected=!0;this.buttons=[];this.axes=[]};k["lime._backend.html5.GameDeviceData"]=ri;ri.__name__=["lime","_backend","html5","GameDeviceData"];ri.prototype={connected:null,
id:null,isGamepad:null,buttons:null,axes:null,__class__:ri};var Mi=function(a){this.parent=a;this.id=-1;this.gain=1;this.position=new Li};k["lime._backend.html5.HTML5AudioSource"]=Mi;Mi.__name__=["lime","_backend","html5","HTML5AudioSource"];Mi.prototype={completed:null,gain:null,id:null,length:null,loops:null,parent:null,playing:null,position:null,dispose:function(){},init:function(){},play:function(){if(!this.playing&&null!=this.parent.buffer){this.playing=!0;var a=this.getCurrentTime();this.completed=
!1;var b=this.parent.buffer.__srcHowl._volume;this.parent.buffer.__srcHowl._volume=this.parent.get_gain();this.id=this.parent.buffer.__srcHowl.play();this.parent.buffer.__srcHowl._volume=b;this.setPosition(this.parent.get_position());this.parent.buffer.__srcHowl.on("end",l(this,this.howl_onEnd),this.id);this.setCurrentTime(a)}},stop:function(){this.playing=!1;null!=this.parent.buffer&&this.parent.buffer.__srcHowl.stop(this.id)},howl_onEnd:function(){this.playing=!1;0<this.loops?(this.loops--,this.stop(),
this.play()):(this.parent.buffer.__srcHowl.stop(this.id),this.completed=!0,this.parent.onComplete.dispatch())},getCurrentTime:function(){if(-1==this.id)return 0;if(this.completed)return this.getLength();if(null!=this.parent.buffer){var a=u["int"](1E3*this.parent.buffer.__srcHowl.seek(this.id))-this.parent.offset;return 0>a?0:a}return 0},setCurrentTime:function(a){if(null!=this.parent.buffer){var b=(a+this.parent.offset)/1E3;0>b&&(b=0);this.parent.buffer.__srcHowl.seek(b,this.id)}return a},getGain:function(){return this.gain},
setGain:function(a){null!=this.parent.buffer&&this.parent.buffer.__srcHowl.volume(a,this.id);return this.gain=a},getLength:function(){return 0!=this.length?this.length:null!=this.parent.buffer?u["int"](1E3*this.parent.buffer.__srcHowl.duration()):0},setLength:function(a){return this.length=a},setLoops:function(a){return this.loops=a},getPosition:function(){return this.position},setPosition:function(a){this.position.x=a.x;this.position.y=a.y;this.position.z=a.z;this.position.w=a.w;return this.position},
__class__:Mi};var Ug=function(a){this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441;this.COLOR_ATTACHMENT0=36064;this.DEPTH_STENCIL=34041;this.FRAMEBUFFER=36160;this.CLAMP_TO_EDGE=33071;this.TEXTURE0=33984;this.TEXTURE_CUBE_MAP=34067;this.TEXTURE_2D=3553;this.TEXTURE_WRAP_T=10243;this.TEXTURE_WRAP_S=10242;this.TEXTURE_MIN_FILTER=10241;this.TEXTURE_MAG_FILTER=10240;this.LINEAR=9729;this.NEAREST=9728;this.VERSION=7938;this.RENDERER=7937;this.VENDOR=7936;this.SHADING_LANGUAGE_VERSION=35724;this.RGBA=6408;this.ALPHA=
6406;this.FLOAT=5126;this.UNSIGNED_BYTE=5121;this.MAX_VIEWPORT_DIMS=3386;this.SCISSOR_TEST=3089;this.BLEND=3042;this.STATIC_DRAW=35044;this.ARRAY_BUFFER=34962;this.FUNC_REVERSE_SUBTRACT=32779;this.FUNC_ADD=32774;this.ONE_MINUS_DST_COLOR=775;this.DST_COLOR=774;this.ONE_MINUS_DST_ALPHA=773;this.DST_ALPHA=772;this.ONE_MINUS_SRC_ALPHA=771;this.SRC_ALPHA=770;this.ONE_MINUS_SRC_COLOR=769;this.SRC_COLOR=768;this.ONE=1;this.ZERO=0;this.TRIANGLE_STRIP=5;this.COLOR_BUFFER_BIT=16384;this.__context=a;this.version=
1;this.type=Pc.WEBGL;if(null!=a){var b=a;C.hasField(b,"rawgl")&&(b=C.field(a,"rawgl"));C.hasField(M.get_window(),"WebGL2RenderingContext")&&u.is(b,WebGL2RenderingContext)&&(this.version=2)}};k["lime._backend.html5.HTML5GLRenderContext"]=Ug;Ug.__name__=["lime","_backend","html5","HTML5GLRenderContext"];Ug.prototype={COLOR_BUFFER_BIT:null,TRIANGLE_STRIP:null,ZERO:null,ONE:null,SRC_COLOR:null,ONE_MINUS_SRC_COLOR:null,SRC_ALPHA:null,ONE_MINUS_SRC_ALPHA:null,DST_ALPHA:null,ONE_MINUS_DST_ALPHA:null,DST_COLOR:null,
ONE_MINUS_DST_COLOR:null,FUNC_ADD:null,FUNC_REVERSE_SUBTRACT:null,ARRAY_BUFFER:null,STATIC_DRAW:null,BLEND:null,SCISSOR_TEST:null,MAX_VIEWPORT_DIMS:null,UNSIGNED_BYTE:null,FLOAT:null,ALPHA:null,RGBA:null,SHADING_LANGUAGE_VERSION:null,VENDOR:null,RENDERER:null,VERSION:null,NEAREST:null,LINEAR:null,TEXTURE_MAG_FILTER:null,TEXTURE_MIN_FILTER:null,TEXTURE_WRAP_S:null,TEXTURE_WRAP_T:null,TEXTURE_2D:null,TEXTURE_CUBE_MAP:null,TEXTURE0:null,CLAMP_TO_EDGE:null,FRAMEBUFFER:null,DEPTH_STENCIL:null,COLOR_ATTACHMENT0:null,
UNPACK_PREMULTIPLY_ALPHA_WEBGL:null,type:null,version:null,__context:null,__contextLost:null,activeTexture:function(a){this.__context.activeTexture(a)},attachShader:function(a,b){this.__context.attachShader(a,b)},bindBuffer:function(a,b){this.__context.bindBuffer(a,b)},bindFramebuffer:function(a,b){this.__context.bindFramebuffer(a,b)},bindTexture:function(a,b){this.__context.bindTexture(a,b)},blendEquation:function(a){this.__context.blendEquation(a)},blendFunc:function(a,b){this.__context.blendFunc(a,
b)},bufferData:function(a,b,c,d){this.__context.bufferData(a,Z.toBufferView(c,b),d)},bufferDataWEBGL:function(a,b,c,d,e){null!=d?this.__context.bufferData(a,b,c,d,e):this.__context.bufferData(a,b,c)},clear:function(a){this.__context.clear(a)},clearColor:function(a,b,c,d){this.__context.clearColor(a,b,c,d)},compileShader:function(a){this.__context.compileShader(a)},createBuffer:function(){return this.__context.createBuffer()},createFramebuffer:function(){return this.__context.createFramebuffer()},
createProgram:function(){return this.__context.createProgram()},createShader:function(a){return this.__context.createShader(a)},createTexture:function(){return this.__context.createTexture()},disable:function(a){this.__context.disable(a)},disableVertexAttribArray:function(a){this.__context.disableVertexAttribArray(a)},drawArrays:function(a,b,c){this.__context.drawArrays(a,b,c)},enable:function(a){this.__context.enable(a)},enableVertexAttribArray:function(a){this.__context.enableVertexAttribArray(a)},
framebufferTexture2D:function(a,b,c,d,e){this.__context.framebufferTexture2D(a,b,c,d,e)},getAttribLocation:function(a,b){return this.__context.getAttribLocation(a,b)},getError:function(){return this.__context.getError()},getExtension:function(a){return this.__context.getExtension(a)},getParameter:function(a){return this.__context.getParameter(a)},getProgramParameter:function(a,b){return this.__context.getProgramParameter(a,b)},getShaderInfoLog:function(a){return this.__context.getShaderInfoLog(a)},
getShaderParameter:function(a,b){return this.__context.getShaderParameter(a,b)},getUniformLocation:function(a,b){return this.__context.getUniformLocation(a,b)},linkProgram:function(a){this.__context.linkProgram(a)},pixelStorei:function(a,b){this.__context.pixelStorei(a,b)},scissor:function(a,b,c,d){this.__context.scissor(a,b,c,d)},shaderSource:function(a,b){this.__context.shaderSource(a,b)},texImage2D:function(a,b,c,d,e,f,m,h,q){this.__context.texImage2D(a,b,c,d,e,f,m,h,Z.toBufferView(q))},texImage2DWEBGL:function(a,
b,c,d,e,f,m,h,q,y){null!=y?this.__context.texImage2D(a,b,c,d,e,f,m,h,q,y):null!=m?this.__context.texImage2D(a,b,c,d,e,f,m,h,q):this.__context.texImage2D(a,b,c,d,e,f)},texParameteri:function(a,b,c){this.__context.texParameteri(a,b,c)},uniform1f:function(a,b){this.__context.uniform1f(a,b)},uniform1i:function(a,b){this.__context.uniform1i(a,b)},uniform2f:function(a,b,c){this.__context.uniform2f(a,b,c)},uniform2i:function(a,b,c){this.__context.uniform2i(a,b,c)},uniform3f:function(a,b,c,d){this.__context.uniform3f(a,
b,c,d)},uniform3i:function(a,b,c,d){this.__context.uniform3i(a,b,c,d)},uniform4f:function(a,b,c,d,e){this.__context.uniform4f(a,b,c,d,e)},uniform4i:function(a,b,c,d,e){this.__context.uniform4i(a,b,c,d,e)},uniformMatrix2fv:function(a,b,c,d){this.__context.uniformMatrix2fv(a,c,Z.toFloat32Array(d,16*b))},uniformMatrix3fv:function(a,b,c,d){this.__context.uniformMatrix3fv(a,c,Z.toFloat32Array(d,36*b))},uniformMatrix4fv:function(a,b,c,d){this.__context.uniformMatrix4fv(a,c,Z.toFloat32Array(d,64*b))},useProgram:function(a){this.__context.useProgram(a)},
vertexAttribPointer:function(a,b,c,d,e,f){this.__context.vertexAttribPointer(a,b,c,d,e,Z.toValue(f))},viewport:function(a,b,c,d){this.__context.viewport(a,b,c,d)},__class__:Ug};var O=function(){};k["lime._backend.html5.HTML5HTTPRequest"]=O;O.__name__=["lime","_backend","html5","HTML5HTTPRequest"];O.loadImage=function(a){var b=new Ob;O.activeRequests<O.requestLimit?(O.activeRequests++,O.__loadImage(a,b)):O.requestQueue.add({instance:null,uri:a,promise:b,type:"IMAGE"});return b.future};O.processQueue=
function(){if(O.activeRequests<O.requestLimit&&0<O.requestQueue.length){O.activeRequests++;var a=O.requestQueue.pop();switch(a.type){case "BINARY":a.instance.__loadData(a.uri,a.promise);break;case "IMAGE":O.__loadImage(a.uri,a.promise);break;case "TEXT":a.instance.__loadText(a.uri,a.promise);break;default:O.activeRequests--}}};O.__fixHostname=function(a){return null==a?"":a};O.__fixPort=function(a,b){if(null==a||""==a)switch(b){case "ftp:":return"21";case "gopher:":return"70";case "http:":return"80";
case "https:":return"443";case "ws:":return"80";case "wss:":return"443";default:return""}return a};O.__fixProtocol=function(a){return null==a||""==a?"http:":a};O.__isSameOrigin=function(a){null==O.originElement&&(O.originElement=M.get_document().createElement("a"),O.originHostname=O.__fixHostname(M.get_location().hostname),O.originProtocol=O.__fixProtocol(M.get_location().protocol),O.originPort=O.__fixPort(M.get_location().port,O.originProtocol));var b=O.originElement;b.href=a;""==b.hostname&&(b.href=
b.href);var c=O.__fixHostname(b.hostname);a=O.__fixProtocol(b.protocol);b=O.__fixPort(b.port,a);c=""==c||c==O.originHostname;b=""==b||b==O.originPort;return"file:"!=a&&c?b:!1};O.__loadImage=function(a,b){var c=new Image;O.__isSameOrigin(a)||(c.crossOrigin="Anonymous");null==O.supportsImageProgress&&(O.supportsImageProgress="onprogress"in c);if(O.supportsImageProgress||L.startsWith(a,"data:"))c.addEventListener("load",function(a){a=new Qc(null,c.width,c.height);a.__srcImage=c;O.activeRequests--;O.processQueue();
b.complete(new ja(a))},!1),c.addEventListener("progress",function(a){b.progress(a.loaded,a.total)},!1),c.addEventListener("error",function(a){O.activeRequests--;O.processQueue();b.error(a.detail)},!1),c.src=a;else{var d=new XMLHttpRequest;d.onload=function(a){O.activeRequests--;O.processQueue();(new ja).__fromBytes(ya.ofData(d.response),function(a){b.complete(a)})};d.onerror=function(a){b.error(a.message)};d.onprogress=function(a){a.lengthComputable&&b.progress(a.loaded,a.total)};d.open("GET",a,!0);
d.responseType="arraybuffer";d.overrideMimeType("text/plain; charset=x-user-defined");d.send(null)}};O.prototype={binary:null,parent:null,request:null,init:function(a){this.parent=a},load:function(a,b,c){this.request=new XMLHttpRequest;"POST"==this.parent.method?this.request.upload.addEventListener("progress",b,!1):this.request.addEventListener("progress",b,!1);this.request.onreadystatechange=c;b="";if(null==this.parent.data){for(c=this.parent.formData.keys();c.hasNext();){var d=c.next();0<b.length&&
(b+="&");b+=L.urlEncode(d)+"="+L.urlEncode(u.string(this.parent.formData.get(d)))}"GET"==this.parent.method&&""!=b&&(a=-1<a.indexOf("?")?a+("&"+b):a+("?"+b),b="")}this.request.open(u.string(this.parent.method),a,!0);0<this.parent.timeout&&(this.request.timeout=this.parent.timeout);this.binary&&(this.request.responseType="arraybuffer");a=null;c=0;for(d=this.parent.headers;c<d.length;){var e=d[c];++c;"Content-Type"==e.name?a=e.value:this.request.setRequestHeader(e.name,e.value)}null!=this.parent.contentType&&
(a=this.parent.contentType);null==a&&(null!=this.parent.data?a="application/octet-stream":""!=b&&(a="application/x-www-form-urlencoded"));null!=a&&this.request.setRequestHeader("Content-Type",a);this.parent.withCredentials&&(this.request.withCredentials=!0);null!=this.parent.data?this.request.send(this.parent.data.getData()):this.request.send(b)},loadData:function(a){var b=new Ob;O.activeRequests<O.requestLimit?(O.activeRequests++,this.__loadData(a,b)):O.requestQueue.add({instance:this,uri:a,promise:b,
type:"BINARY"});return b.future},loadText:function(a){var b=new Ob;O.activeRequests<O.requestLimit?(O.activeRequests++,this.__loadText(a,b)):O.requestQueue.add({instance:this,uri:a,promise:b,type:"TEXT"});return b.future},processResponse:function(){if(this.parent.enableResponseHeaders){this.parent.responseHeaders=[];for(var a,b,c=0,d=this.request.getAllResponseHeaders().split("\n");c<d.length;)b=d[c],++c,a=L.trim(P.substr(b,0,b.indexOf(":"))),b=L.trim(P.substr(b,b.indexOf(":")+1,null)),""!=a&&this.parent.responseHeaders.push(new Vg(a,
b))}this.parent.responseStatus=this.request.status},__loadData:function(a,b){var c=this;this.binary=!0;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>c.request.status||0==c.request.status)?(a=""==c.request.responseType?ya.ofString(c.request.responseText):ya.ofData(c.request.response),c.processResponse(),b.complete(a)):(c.processResponse(),b.error(c.request.status)),c.request=null,O.activeRequests--,O.processQueue())})},
__loadText:function(a,b){var c=this;this.binary=!1;this.load(a,function(a){b.progress(a.loaded,a.total)},function(a){4==c.request.readyState&&(null!=c.request.status&&(200<=c.request.status&&400>=c.request.status||0==c.request.status)?(c.processResponse(),b.complete(c.request.responseText)):(c.processResponse(),b.error(c.request.status)),c.request=null,O.activeRequests--,O.processQueue())})},__class__:O};var lf=function(){};k["lime._backend.html5.HTML5Mouse"]=lf;lf.__name__=["lime","_backend","html5",
"HTML5Mouse"];lf.set_cursor=function(a){if(lf.__cursor!=a){if(!lf.__hidden)for(var b=0,c=dc.current.get_windows();b<c.length;){var d=c[b];++b;switch(Q.enumIndex(a)){case 0:var e="default";break;case 1:e="crosshair";break;case 3:e="move";break;case 4:e="pointer";break;case 5:e="nesw-resize";break;case 6:e="ns-resize";break;case 7:e="nwse-resize";break;case 8:e="ew-resize";break;case 9:e="text";break;case 10:e="wait";break;case 11:e="wait";break;default:e="auto"}d.backend.element.style.cursor=e}lf.__cursor=
a}return lf.__cursor};var Ni=function(a){this.parent=a};k["lime._backend.html5.HTML5Renderer"]=Ni;Ni.__name__=["lime","_backend","html5","HTML5Renderer"];Ni.prototype={parent:null,create:function(){this.createContext();0==Q.enumIndex(this.parent.context)&&(this.parent.window.backend.canvas.addEventListener("webglcontextlost",l(this,this.handleEvent),!1),this.parent.window.backend.canvas.addEventListener("webglcontextrestored",l(this,this.handleEvent),!1))},createContext:function(){if(null!=this.parent.window.backend.div)this.parent.context=
Pb.DOM(this.parent.window.backend.div),this.parent.type=Ca.DOM;else if(null!=this.parent.window.backend.canvas){var a=null;if(!C.hasField(this.parent.window.config,"hardware")||this.parent.window.config.hardware){var b=C.hasField(this.parent.window.config,"background")&&null==this.parent.window.config.background,c=C.hasField(this.parent.window.config,"colorDepth")?this.parent.window.config.colorDepth:16;b={alpha:b||16<c,antialias:C.hasField(this.parent.window.config,"antialiasing")&&0<this.parent.window.config.antialiasing,
depth:C.hasField(this.parent.window.config,"depthBuffer")?this.parent.window.config.depthBuffer:!0,premultipliedAlpha:!0,stencil:C.hasField(this.parent.window.config,"stencilBuffer")&&this.parent.window.config.stencilBuffer,preserveDrawingBuffer:!1};c=0;for(var d=["webgl2","webgl","experimental-webgl"];c<d.length&&(a=d[c],++c,a=this.parent.window.backend.canvas.getContext(a,b),null==a););}null==a?(this.parent.context=Pb.CANVAS(this.parent.window.backend.canvas.getContext("2d")),this.parent.type=Ca.CANVAS):
(ra.context=new Ug(a),this.parent.context=Pb.OPENGL(ra.context),this.parent.type=Ca.OPENGL)}},flip:function(){},handleEvent:function(a){switch(a.type){case "webglcontextlost":a.preventDefault();null!=ra.context&&(ra.context.__contextLost=!0);this.parent.context=null;this.parent.onContextLost.dispatch();break;case "webglcontextrestored":this.createContext(),this.parent.onContextRestored.dispatch(this.parent.context)}},render:function(){},__class__:Ni};var fa=function(a){this.unusedTouchesPool=new Db;
this.scale=1;this.currentTouches=new Cb;this.parent=a;null!=a.config&&C.hasField(a.config,"element")&&(this.element=a.config.element);a.__scale=this.scale;this.cacheMouseY=this.cacheMouseX=0};k["lime._backend.html5.HTML5Window"]=fa;fa.__name__=["lime","_backend","html5","HTML5Window"];fa.prototype={canvas:null,div:null,element:null,cacheElementHeight:null,cacheElementWidth:null,cacheMouseX:null,cacheMouseY:null,currentTouches:null,enableTextEvents:null,parent:null,primaryTouch:null,resizeElement:null,
scale:null,setHeight:null,setWidth:null,unusedTouchesPool:null,close:function(){this.parent.application.removeWindow(this.parent)},create:function(a){this.setWidth=this.parent.get_width();this.setHeight=this.parent.get_height();this.parent.id=fa.windowID++;u.is(this.element,HTMLCanvasElement)?this.canvas=this.element:this.div=M.get_document().createElement("div");null!=this.canvas?(a=this.canvas.style,a.setProperty("-webkit-transform","translateZ(0)",null),a.setProperty("transform","translateZ(0)",
null)):null!=this.div&&(a=this.div.style,a.setProperty("-webkit-transform","translate3D(0,0,0)",null),a.setProperty("transform","translate3D(0,0,0)",null),a.position="relative",a.overflow="hidden",a.setProperty("-webkit-user-select","none",null),a.setProperty("-moz-user-select","none",null),a.setProperty("-ms-user-select","none",null),a.setProperty("-o-user-select","none",null));0==this.parent.get_width()&&0==this.parent.get_height()&&(null!=this.element?(this.parent.set_width(this.element.clientWidth),
this.parent.set_height(this.element.clientHeight)):(this.parent.set_width(M.get_window().innerWidth),this.parent.set_height(M.get_window().innerHeight)),this.cacheElementWidth=this.parent.get_width(),this.cacheElementHeight=this.parent.get_height(),this.resizeElement=!0);null!=this.canvas?(a=this.parent.get_width()*this.scale,this.canvas.width=Math.round(a),a=this.parent.get_height()*this.scale,this.canvas.height=Math.round(a),a=this.parent.get_width(),this.canvas.style.width=a+"px",a=this.parent.get_height(),
this.canvas.style.height=a+"px"):(a=this.parent.get_width(),this.div.style.width=a+"px",a=this.parent.get_height(),this.div.style.height=a+"px");this.updateSize();if(null!=this.element){null!=this.canvas?this.element!=this.canvas&&this.element.appendChild(this.canvas):this.element.appendChild(this.div);a="mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");for(var b=0;b<a.length;){var c=a[b];++b;this.element.addEventListener(c,l(this,this.handleMouseEvent),!0)}M.get_document().addEventListener("dragstart",
function(a){return"img"==a.target.nodeName.toLowerCase()?(a.preventDefault(),!1):!0},!1);this.element.addEventListener("contextmenu",l(this,this.handleContextMenuEvent),!0);this.element.addEventListener("touchstart",l(this,this.handleTouchEvent),!0);this.element.addEventListener("touchmove",l(this,this.handleTouchEvent),!0);this.element.addEventListener("touchend",l(this,this.handleTouchEvent),!0);this.element.addEventListener("touchcancel",l(this,this.handleTouchEvent),!0);this.element.addEventListener("gamepadconnected",
l(this,this.handleGamepadEvent),!0);this.element.addEventListener("gamepaddisconnected",l(this,this.handleGamepadEvent),!0)}},handleContextMenuEvent:function(a){this.parent.onMouseUp.canceled&&a.preventDefault()},handleCutOrCopyEvent:function(a){a.clipboardData.setData("text/plain",Ib.get_text());a.preventDefault()},handleFocusEvent:function(a){this.enableTextEvents&&Ff.delay(function(){fa.textInput.focus()},20)},handleGamepadEvent:function(a){switch(a.type){case "gamepadconnected":fb.__connect(a.gamepad.index);
"standard"==a.gamepad.mapping&&tb.__connect(a.gamepad.index);break;case "gamepaddisconnected":fb.__disconnect(a.gamepad.index),tb.__disconnect(a.gamepad.index)}},handleInputEvent:function(a){fa.textInput.value!=fa.dummyCharacter&&(fa.textInput.value.charAt(0)==fa.dummyCharacter?this.parent.onTextInput.dispatch(P.substr(fa.textInput.value,1,null)):this.parent.onTextInput.dispatch(fa.textInput.value),fa.textInput.value=fa.dummyCharacter)},handleMouseEvent:function(a){if("wheel"!=a.type){if(null!=this.element)if(null!=
this.canvas){var b=this.canvas.getBoundingClientRect();var c=(a.clientX-b.left)*(this.parent.get_width()/b.width);b=(a.clientY-b.top)*(this.parent.get_height()/b.height)}else null!=this.div?(b=this.div.getBoundingClientRect(),c=a.clientX-b.left,b=a.clientY-b.top):(b=this.element.getBoundingClientRect(),c=(a.clientX-b.left)*(this.parent.get_width()/b.width),b=(a.clientY-b.top)*(this.parent.get_height()/b.height));else c=a.clientX,b=a.clientY;switch(a.type){case "mousedown":this.parent.onMouseDown.dispatch(c,
b,a.button);this.parent.onMouseDown.canceled&&a.preventDefault();break;case "mouseenter":a.target==this.element&&(this.parent.onEnter.dispatch(),this.parent.onEnter.canceled&&a.preventDefault());break;case "mouseleave":a.target==this.element&&(this.parent.onLeave.dispatch(),this.parent.onLeave.canceled&&a.preventDefault());break;case "mousemove":if(c!=this.cacheMouseX||b!=this.cacheMouseY)this.parent.onMouseMove.dispatch(c,b),this.parent.onMouseMoveRelative.dispatch(c-this.cacheMouseX,b-this.cacheMouseY),
(this.parent.onMouseMove.canceled||this.parent.onMouseMoveRelative.canceled)&&a.preventDefault();break;case "mouseup":this.parent.onMouseUp.dispatch(c,b,a.button),this.parent.onMouseUp.canceled&&a.preventDefault()}this.cacheMouseX=c;this.cacheMouseY=b}else this.parent.onMouseWheel.dispatch(a.deltaX,-a.deltaY),this.parent.onMouseWheel.canceled&&a.preventDefault()},handlePasteEvent:function(a){if(-1<a.clipboardData.types.indexOf("text/plain")){var b=a.clipboardData.getData("text/plain");Ib.set_text(b);
this.enableTextEvents&&this.parent.onTextInput.dispatch(b);a.preventDefault()}},handleResizeEvent:function(a){this.primaryTouch=null;this.updateSize()},handleTouchEvent:function(a){a.preventDefault();var b=null;null!=this.element&&(b=null!=this.canvas?this.canvas.getBoundingClientRect():null!=this.div?this.div.getBoundingClientRect():this.element.getBoundingClientRect());var c=this.setWidth,d=this.setHeight;if(0==c||0==d)null!=b?(c=b.width,d=b.height):d=c=1;for(var e,f,m,h,q,y=0,g=a.changedTouches;y<
g.length;){var k=g[y];++y;null!=b?(f=c/b.width*(k.clientX-b.left),m=d/b.height*(k.clientY-b.top)):(f=k.clientX,m=k.clientY);if("touchstart"==a.type)e=this.unusedTouchesPool.pop(),null==e?e=new gb(f/c,m/d,k.identifier,0,0,k.force,this.parent.id):(e.x=f/c,e.y=m/d,e.id=k.identifier,e.dx=0,e.dy=0,e.pressure=k.force,e.device=this.parent.id),this.currentTouches.set(k.identifier,e),gb.onStart.dispatch(e),null==this.primaryTouch&&(this.primaryTouch=e),e==this.primaryTouch&&this.parent.onMouseDown.dispatch(f,
m,0);else if(e=this.currentTouches.get(k.identifier),null!=e)switch(h=e.x,q=e.y,e.x=f/c,e.y=m/d,e.dx=e.x-h,e.dy=e.y-q,e.pressure=k.force,a.type){case "touchcancel":gb.onCancel.dispatch(e);this.currentTouches.remove(k.identifier);this.unusedTouchesPool.add(e);e==this.primaryTouch&&(this.primaryTouch=null);break;case "touchend":gb.onEnd.dispatch(e);this.currentTouches.remove(k.identifier);this.unusedTouchesPool.add(e);e==this.primaryTouch&&(this.parent.onMouseUp.dispatch(f,m,0),this.primaryTouch=null);
break;case "touchmove":gb.onMove.dispatch(e),e==this.primaryTouch&&this.parent.onMouseMove.dispatch(f,m)}}},resize:function(a,b){},setClipboard:function(a){var b=this.enableTextEvents;this.setEnableTextEvents(!0);var c=fa.textInput.value;fa.textInput.value=a;fa.textInput.select();M.get_document().queryCommandEnabled("copy")&&M.get_document().execCommand("copy");fa.textInput.value=c;this.setEnableTextEvents(b)},setEnableTextEvents:function(a){a?(null==fa.textInput&&(fa.textInput=M.get_document().createElement("input"),
fa.textInput.type="text",fa.textInput.style.position="absolute",fa.textInput.style.opacity="0",fa.textInput.style.color="transparent",fa.textInput.value=fa.dummyCharacter,fa.textInput.autocapitalize="off",fa.textInput.autocorrect="off",fa.textInput.autocomplete="off",fa.textInput.style.left="0px",fa.textInput.style.top="50%",(new ma("(iPad|iPhone|iPod).*OS 8_","gi")).match(M.get_window().navigator.userAgent)?(fa.textInput.style.fontSize="0px",fa.textInput.style.width="0px",fa.textInput.style.height=
"0px"):(fa.textInput.style.width="1px",fa.textInput.style.height="1px"),fa.textInput.style.pointerEvents="none",fa.textInput.style.zIndex="-10000000",M.get_document().body.appendChild(fa.textInput)),this.enableTextEvents||(fa.textInput.addEventListener("input",l(this,this.handleInputEvent),!0),fa.textInput.addEventListener("blur",l(this,this.handleFocusEvent),!0),fa.textInput.addEventListener("cut",l(this,this.handleCutOrCopyEvent),!0),fa.textInput.addEventListener("copy",l(this,this.handleCutOrCopyEvent),
!0),fa.textInput.addEventListener("paste",l(this,this.handlePasteEvent),!0)),fa.textInput.focus(),fa.textInput.select()):null!=fa.textInput&&(fa.textInput.removeEventListener("input",l(this,this.handleInputEvent),!0),fa.textInput.removeEventListener("blur",l(this,this.handleFocusEvent),!0),fa.textInput.removeEventListener("cut",l(this,this.handleCutOrCopyEvent),!0),fa.textInput.removeEventListener("copy",l(this,this.handleCutOrCopyEvent),!0),fa.textInput.removeEventListener("paste",l(this,this.handlePasteEvent),
!0),fa.textInput.blur());return this.enableTextEvents=a},updateSize:function(){if(null!=this.element){var a=this.element.clientWidth;var b=this.element.clientHeight}else a=M.get_window().innerWidth,b=M.get_window().innerHeight;if(a!=this.cacheElementWidth||b!=this.cacheElementHeight){this.cacheElementWidth=a;this.cacheElementHeight=b;var c=this.resizeElement||0==this.setWidth&&0==this.setHeight;if(null!=this.element&&(null==this.div||null!=this.div&&c))if(c){if(this.parent.get_width()!=a||this.parent.get_height()!=
b)this.parent.set_width(a),this.parent.set_height(b),null!=this.canvas?this.element!=this.canvas&&(this.canvas.width=Math.round(a*this.scale),this.canvas.height=Math.round(b*this.scale),this.canvas.style.width=a+"px",this.canvas.style.height=b+"px"):(this.div.style.width=a+"px",this.div.style.height=b+"px"),this.parent.onResize.dispatch(a,b)}else{c=0!=this.setWidth?a/this.setWidth:1;var d=0!=this.setHeight?b/this.setHeight:1,e=a,f=b,m=0,h=0;c<d?(f=Math.floor(this.setHeight*c),h=Math.floor((b-f)/2)):
(e=Math.floor(this.setWidth*d),m=Math.floor((a-e)/2));null!=this.canvas?this.element!=this.canvas&&(this.canvas.style.width=e+"px",this.canvas.style.height=f+"px",this.canvas.style.marginLeft=m+"px",this.canvas.style.marginTop=h+"px"):(this.div.style.width=e+"px",this.div.style.height=f+"px",this.div.style.marginLeft=m+"px",this.div.style.marginTop=h+"px")}}},__class__:fa};var Sa=function(a,b){null==b&&(b=!1);if(null!=a)if(b)b=new Ob,b.future=this,Qb.queue({promise:b,work:a});else try{this.value=
a(),this.isComplete=!0}catch(c){Y.lastException=c,c instanceof K&&(c=c.val),this.error=c,this.isError=!0}};k["lime.app.Future"]=Sa;Sa.__name__=["lime","app","Future"];Sa.withError=function(a){var b=new Sa;b.isError=!0;b.error=a;return b};Sa.withValue=function(a){var b=new Sa;b.isComplete=!0;b.value=a;return b};Sa.prototype={error:null,isComplete:null,isError:null,value:null,__completeListeners:null,__errorListeners:null,__progressListeners:null,onComplete:function(a){null!=a&&(this.isComplete?a(this.value):
this.isError||(null==this.__completeListeners&&(this.__completeListeners=[]),this.__completeListeners.push(a)));return this},onError:function(a){null!=a&&(this.isError?a(this.error):this.isComplete||(null==this.__errorListeners&&(this.__errorListeners=[]),this.__errorListeners.push(a)));return this},onProgress:function(a){null!=a&&(null==this.__progressListeners&&(this.__progressListeners=[]),this.__progressListeners.push(a));return this},then:function(a){if(this.isComplete)return a(this.value);if(this.isError){var b=
new Sa;b.onError(this.error);return b}var c=new Ob;this.onError(l(c,c.error));this.onProgress(l(c,c.progress));this.onComplete(function(b){b=a(b);b.onError(l(c,c.error));b.onComplete(l(c,c.complete))});return c.future},__class__:Sa};var Qb=function(){};k["lime.app._Future.FutureWork"]=Qb;Qb.__name__=["lime","app","_Future","FutureWork"];Qb.queue=function(a){null==Qb.threadPool&&(Qb.threadPool=new Oi,Qb.threadPool.doWork.add(Qb.threadPool_doWork),Qb.threadPool.onComplete.add(Qb.threadPool_onComplete),
Qb.threadPool.onError.add(Qb.threadPool_onError));Qb.threadPool.queue(a)};Qb.threadPool_doWork=function(a){try{var b=a.work();Qb.threadPool.sendComplete({promise:a.promise,result:b})}catch(c){Y.lastException=c,c instanceof K&&(c=c.val),Qb.threadPool.sendError({promise:a.promise,error:c})}};Qb.threadPool_onComplete=function(a){a.promise.complete(a.result)};Qb.threadPool_onError=function(a){a.promise.error(a.error)};var xe=function(){this.bytesTotalCache=new ea;this.bytesLoadedCache2=new ea;this.bytesLoadedCache=
new rb;this.onProgress=new Wg;this.onComplete=new ub;this.bytesTotal=this.bytesLoaded=0;this.libraries=[];this.libraryNames=[];this.onProgress.add(l(this,this.update))};k["lime.app.Preloader"]=xe;xe.__name__=["lime","app","Preloader"];xe.prototype={complete:null,onComplete:null,onProgress:null,bytesLoaded:null,bytesLoadedCache:null,bytesLoadedCache2:null,bytesTotal:null,bytesTotalCache:null,initLibraryNames:null,libraries:null,libraryNames:null,loadedLibraries:null,preloadComplete:null,preloadStarted:null,
simulateProgress:null,addLibrary:function(a){this.libraries.push(a)},addLibraryName:function(a){-1==this.libraryNames.indexOf(a)&&this.libraryNames.push(a)},create:function(a){},load:function(){for(var a=this,b=0,c=this.libraries;b<c.length;){var d=c[b];++b;this.bytesTotal+=d.bytesTotal}this.loadedLibraries=-1;this.preloadStarted=!1;b=0;for(c=this.libraries;b<c.length;)d=[c[b]],++b,Pa.verbose("Preloading asset library",{fileName:"Preloader.hx",lineNumber:153,className:"lime.app.Preloader",methodName:"load"}),
d[0].load().onProgress(function(b){return function(c,d){a.bytesLoadedCache.exists(b[0])?a.bytesLoaded+=c-a.bytesLoadedCache.get(b[0]):a.bytesLoaded+=c;a.bytesLoadedCache.set(b[0],c);a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal)}}(d)).onComplete(function(b){return function(c){a.bytesLoadedCache.exists(b[0])?a.bytesLoaded+=b[0].bytesTotal-a.bytesLoadedCache.get(b[0]):a.bytesLoaded+=b[0].bytesTotal;a.loadedAssetLibrary()}}(d)).onError(function(){return function(a){Pa.error(a,
{fileName:"Preloader.hx",lineNumber:191,className:"lime.app.Preloader",methodName:"load"})}}());b=0;for(c=this.libraryNames;b<c.length;)++b,this.bytesTotal+=200;this.loadedLibraries++;this.preloadStarted=!0;this.updateProgress()},loadedAssetLibrary:function(a){this.loadedLibraries++;var b=this.loadedLibraries;this.preloadStarted||++b;var c=this.libraries.length+this.libraryNames.length;null!=a?Pa.verbose("Loaded asset library: "+a+" ["+b+"/"+c+"]",{fileName:"Preloader.hx",lineNumber:223,className:"lime.app.Preloader",
methodName:"loadedAssetLibrary"}):Pa.verbose("Loaded asset library ["+b+"/"+c+"]",{fileName:"Preloader.hx",lineNumber:227,className:"lime.app.Preloader",methodName:"loadedAssetLibrary"});this.updateProgress()},start:function(){this.complete||(this.complete=!0,this.onComplete.dispatch())},update:function(a,b){},updateProgress:function(){var a=this;this.simulateProgress||this.onProgress.dispatch(this.bytesLoaded,this.bytesTotal);if(this.loadedLibraries==this.libraries.length&&!this.initLibraryNames){this.initLibraryNames=
!0;for(var b=0,c=this.libraryNames;b<c.length;){var d=[c[b]];++b;Pa.verbose("Preloading asset library: "+d[0],{fileName:"Preloader.hx",lineNumber:276,className:"lime.app.Preloader",methodName:"updateProgress"});aa.loadLibrary(d[0]).onProgress(function(b){return function(c,d){0<d&&(a.bytesTotalCache.exists(b[0])||(a.bytesTotalCache.set(b[0],d),a.bytesTotal+=d-200),c>d&&(c=d),a.bytesLoadedCache2.exists(b[0])?a.bytesLoaded+=c-a.bytesLoadedCache2.get(b[0]):a.bytesLoaded+=c,a.bytesLoadedCache2.set(b[0],
c),a.simulateProgress||a.onProgress.dispatch(a.bytesLoaded,a.bytesTotal))}}(d)).onComplete(function(b){return function(c){c=200;a.bytesTotalCache.exists(b[0])&&(c=a.bytesTotalCache.get(b[0]));a.bytesLoadedCache2.exists(b[0])?a.bytesLoaded+=c-a.bytesLoadedCache2.get(b[0]):a.bytesLoaded+=c;a.loadedAssetLibrary(b[0])}}(d)).onError(function(){return function(a){Pa.error(a,{fileName:"Preloader.hx",lineNumber:335,className:"lime.app.Preloader",methodName:"updateProgress"})}}())}}this.simulateProgress||
this.loadedLibraries!=this.libraries.length+this.libraryNames.length||(this.preloadComplete||(this.preloadComplete=!0,Pa.verbose("Preload complete",{fileName:"Preloader.hx",lineNumber:349,className:"lime.app.Preloader",methodName:"updateProgress"})),this.start())},__class__:xe};var Ob=function(){this.future=new Sa};k["lime.app.Promise"]=Ob;Ob.__name__=["lime","app","Promise"];Ob.prototype={future:null,complete:function(a){if(!this.future.isError&&(this.future.isComplete=!0,this.future.value=a,null!=
this.future.__completeListeners)){for(var b=0,c=this.future.__completeListeners;b<c.length;){var d=c[b];++b;d(a)}this.future.__completeListeners=null}return this},completeWith:function(a){a.onComplete(l(this,this.complete));a.onError(l(this,this.error));a.onProgress(l(this,this.progress));return this},error:function(a){if(!this.future.isComplete&&(this.future.isError=!0,this.future.error=a,null!=this.future.__errorListeners)){for(var b=0,c=this.future.__errorListeners;b<c.length;){var d=c[b];++b;
d(a)}this.future.__errorListeners=null}return this},progress:function(a,b){if(!this.future.isError&&!this.future.isComplete&&null!=this.future.__progressListeners)for(var c=0,d=this.future.__progressListeners;c<d.length;){var e=d[c];++c;e(a,b)}return this},__class__:Ob};var Xg=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Float_Float_Int_Void"]=Xg;Xg.__name__=["lime","app","_Event_Float_Float_Int_Void"];Xg.prototype={canceled:null,__repeat:null,
__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},cancel:function(){this.canceled=!0},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,
1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b,c){this.canceled=!1;for(var d=this.__listeners,e=this.__repeat,f=0;f<d.length&&(d[f](a,b,c),e[f]?++f:this.remove(d[f]),!this.canceled););},__class__:Xg};var mf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Float_Float_Void"]=mf;mf.__name__=["lime","app","_Event_Float_Float_Void"];mf.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=
0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,
b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:mf};var Pi=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Int_Float_Float_Void"]=Pi;Pi.__name__=["lime","app","_Event_Int_Float_Float_Void"];Pi.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=
d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__listeners:null,__class__:Pi};var Qi=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Int_Float_Void"]=Qi;Qi.__name__=["lime","app","_Event_Int_Float_Void"];Qi.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==
c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,
b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:Qi};var Wg=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Int_Int_Void"]=Wg;Wg.__name__=["lime","app","_Event_Int_Int_Void"];Wg.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>
this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&
(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:Wg};var Of=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Int_Void"]=Of;Of.__name__=["lime","app","_Event_Int_Void"];Of.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,
0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Of};var Ri=function(){this.canceled=!1;this.__listeners=
[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"]=Ri;Ri.__name__=["lime","app","_Event_Int_lime_ui_JoystickHatPosition_Void"];Ri.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);
this.__repeat.push(!b)},__listeners:null,__class__:Ri};var Si=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_String_Int_Int_Void"]=Si;Si.__name__=["lime","app","_Event_String_Int_Int_Void"];Si.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,
c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},__listeners:null,__class__:Si};var Yg=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_String_Void"]=Yg;Yg.__name__=["lime","app","_Event_String_Void"];Yg.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,
0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},has:function(a){for(var b=0,c=this.__listeners;b<c.length;){var d=c[b];++b;if(C.compareMethods(d,a))return!0}return!1},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=
!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Yg};var ub=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_Void_Void"]=ub;ub.__name__=["lime","app","_Event_Void_Void"];ub.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,
0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},cancel:function(){this.canceled=!0},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(){this.canceled=!1;for(var a=this.__listeners,b=this.__repeat,c=0;c<a.length&&(a[c](),b[c]?
++c:this.remove(a[c]),!this.canceled););},__class__:ub};var nf=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_haxe_Function_Void"]=nf;nf.__name__=["lime","app","_Event_haxe_Function_Void"];nf.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,
c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:nf};var Ti=function(){this.canceled=
!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_graphics_RenderContext_Void"]=Ti;Ti.__name__=["lime","app","_Event_lime_graphics_RenderContext_Void"];Ti.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);
this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Ti};var Ui=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=
[]};k["lime.app._Event_lime_ui_GamepadAxis_Float_Void"]=Ui;Ui.__name__=["lime","app","_Event_lime_ui_GamepadAxis_Float_Void"];Ui.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=
this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b){this.canceled=!1;for(var c=this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:Ui};var Zg=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_GamepadButton_Void"]=Zg;Zg.__name__=
["lime","app","_Event_lime_ui_GamepadButton_Void"];Zg.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],
a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Zg};var Vi=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_Gamepad_Void"]=Vi;Vi.__name__=["lime","app","_Event_lime_ui_Gamepad_Void"];Vi.prototype={canceled:null,__repeat:null,
__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,
1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Vi};var Wi=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_Joystick_Void"]=Wi;Wi.__name__=["lime","app","_Event_lime_ui_Joystick_Void"];Wi.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=
0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=
this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););},__class__:Wi};var $g=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"]=$g;$g.__name__=["lime","app","_Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"];$g.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<
e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},cancel:function(){this.canceled=!0},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a,b){this.canceled=!1;for(var c=
this.__listeners,d=this.__repeat,e=0;e<c.length&&(c[e](a,b),d[e]?++e:this.remove(c[e]),!this.canceled););},__class__:$g};var Nd=function(){this.canceled=!1;this.__listeners=[];this.__priorities=[];this.__repeat=[]};k["lime.app._Event_lime_ui_Touch_Void"]=Nd;Nd.__name__=["lime","app","_Event_lime_ui_Touch_Void"];Nd.prototype={canceled:null,__repeat:null,__priorities:null,add:function(a,b,c){null==c&&(c=0);null==b&&(b=!1);for(var d=0,e=this.__priorities.length;d<e;){var f=d++;if(c>this.__priorities[f]){this.__listeners.splice(f,
0,a);this.__priorities.splice(f,0,c);this.__repeat.splice(f,0,!b);return}}this.__listeners.push(a);this.__priorities.push(c);this.__repeat.push(!b)},remove:function(a){for(var b=this.__listeners.length;0<=--b;)C.compareMethods(this.__listeners[b],a)&&(this.__listeners.splice(b,1),this.__priorities.splice(b,1),this.__repeat.splice(b,1))},__listeners:null,dispatch:function(a){this.canceled=!1;for(var b=this.__listeners,c=this.__repeat,d=0;d<b.length&&(b[d](a),c[d]?++d:this.remove(b[d]),!this.canceled););
},__class__:Nd};var ja=function(a,b,c,d,e,f,m){null==e&&(e=-1);null==d&&(d=-1);null==c&&(c=0);null==b&&(b=0);this.offsetX=b;this.offsetY=c;this.width=d;this.height=e;this.version=0;null==m&&(m=Ya.CANVAS);this.type=m;if(null==a){if(0<d&&0<e)switch(Q.enumIndex(this.type)){case 0:this.buffer=new Qc(null,d,e);ha.createCanvas(this,d,e);null!=f&&0!=f&&this.fillRect(new Od(0,0,d,e),f);break;case 1:a=d*e*4,a=null!=a?new Hb(a):null,this.buffer=new Qc(a,d,e),null!=f&&0!=f&&this.fillRect(new Od(0,0,d,e),f)}}else this.__fromImageBuffer(a)};
k["lime.graphics.Image"]=ja;ja.__name__=["lime","graphics","Image"];ja.fromBase64=function(a,b){if(null==a)return null;var c=new ja;c.__fromBase64(a,b);return c};ja.fromBitmapData=function(a){return null==a?null:a.image};ja.fromBytes=function(a){if(null==a)return null;var b=new ja;b.__fromBytes(a);return b};ja.fromCanvas=function(a){if(null==a)return null;var b=new Qc(null,a.width,a.height);b.set_src(a);a=new ja(b);a.type=Ya.CANVAS;return a};ja.fromFile=function(a){if(null==a)return null;var b=new ja;
b.__fromFile(a);return b};ja.fromImageElement=function(a){if(null==a)return null;var b=new Qc(null,a.width,a.height);b.set_src(a);a=new ja(b);a.type=Ya.CANVAS;return a};ja.loadFromBase64=function(a,b){return null==a||null==b?Sa.withValue(null):O.loadImage("data:"+b+";base64,"+a)};ja.loadFromBytes=function(a){if(null==a)return Sa.withValue(null);if(ja.__isPNG(a))var b="image/png";else if(ja.__isJPG(a))b="image/jpeg";else if(ja.__isGIF(a))b="image/gif";else if(ja.__isWebP(a))b="image/webp";else return Sa.withValue(null);
return ja.loadFromBase64(ja.__base64Encode(a),b)};ja.loadFromFile=function(a){return null==a?Sa.withValue(null):O.loadImage(a)};ja.__base64Encode=function(a){switch(a.length%3){case 1:var b="==";break;case 2:b="=";break;default:b=""}null==ja.__base64Encoder&&(ja.__base64Encoder=new ng(ya.ofString(ja.__base64Chars)));return ja.__base64Encoder.encodeBytes(a).toString()+b};ja.__isGIF=function(a){if(null==a||6>a.length)return!1;a=a.getString(0,6);return"GIF87a"!=a?"GIF89a"==a:!0};ja.__isJPG=function(a){return null==
a||4>a.length?!1:255==a.get(0)&&216==a.get(1)&&255==a.get(a.length-2)?217==a.get(a.length-1):!1};ja.__isPNG=function(a){return null==a||8>a.length?!1:137==a.get(0)&&80==a.get(1)&&78==a.get(2)&&71==a.get(3)&&13==a.get(4)&&10==a.get(5)&&26==a.get(6)?10==a.get(7):!1};ja.__isWebP=function(a){return null==a||16>a.length?!1:"RIFF"==a.getString(0,4)?"WEBP"==a.getString(8,4):!1};ja.prototype={buffer:null,dirty:null,height:null,offsetX:null,offsetY:null,type:null,version:null,width:null,clone:function(){if(null!=
this.buffer){this.type==Ya.CANVAS?ha.convertToCanvas(this):ha.convertToData(this);var a=new ja(this.buffer.clone(),this.offsetX,this.offsetY,this.width,this.height,null,this.type);a.version=this.version;return a}return new ja(null,this.offsetX,this.offsetY,this.width,this.height,null,this.type)},colorTransform:function(a,b){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(Q.enumIndex(this.type)){case 0:ha.colorTransform(this,a,b);break;case 1:ha.convertToData(this);lb.colorTransform(this,
a,b);break;case 2:a.offset(this.offsetX,this.offsetY),this.buffer.__srcBitmapData.colorTransform(a.__toFlashRectangle(),jb.__toFlashColorTransform(b))}},copyChannel:function(a,b,c,d,e){b=this.__clipRect(b);if(null!=this.buffer&&null!=b&&!(e==nb.ALPHA&&!this.get_transparent()||0>=b.width||0>=b.height))switch(b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),Q.enumIndex(this.type)){case 0:ha.copyChannel(this,a,b,c,d,e);break;case 1:ha.convertToData(this);ha.convertToData(a);
lb.copyChannel(this,a,b,c,d,e);break;case 2:switch(Q.enumIndex(d)){case 0:var f=1;break;case 1:f=2;break;case 2:f=4;break;case 3:f=8}switch(Q.enumIndex(e)){case 0:var m=1;break;case 1:m=2;break;case 2:m=4;break;case 3:m=8}b.offset(a.offsetX,a.offsetY);c.offset(this.offsetX,this.offsetY);this.buffer.__srcBitmapData.copyChannel(a.buffer.get_src(),b.__toFlashRectangle(),c.__toFlashPoint(),f,m)}},copyPixels:function(a,b,c,d,e,f){null==f&&(f=!1);if(null!=this.buffer&&null!=a&&!(0>=b.width||0>=b.height||
0>=this.width||0>=this.height))switch(b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),0>b.x&&(b.width+=b.x,b.x=0),0>b.y&&(b.height+=b.y,b.y=0),c.x+b.width>this.width&&(b.width=this.width-c.x),c.y+b.height>this.height&&(b.height=this.height-c.y),0>c.x&&(b.width+=c.x,b.x-=c.x,c.x=0),0>c.y&&(b.height+=c.y,b.y-=c.y,c.y=0),a==this&&c.x<b.get_right()&&c.y<b.get_bottom()&&(a=this.clone()),Q.enumIndex(this.type)){case 0:ha.convertToData(this);ha.convertToData(a);
null!=d&&ha.convertToData(d);lb.copyPixels(this,a,b,c,d,e,f);break;case 1:ha.convertToData(this);ha.convertToData(a);null!=d&&ha.convertToData(d);lb.copyPixels(this,a,b,c,d,e,f);break;case 2:b.offset(a.offsetX,a.offsetY),c.offset(this.offsetX,this.offsetY),null!=d&&null!=e&&e.offset(d.offsetX,d.offsetY),this.buffer.__srcBitmapData.copyPixels(a.buffer.__srcBitmapData,b.__toFlashRectangle(),c.__toFlashPoint(),null!=d?d.buffer.get_src():null,null!=e?e.__toFlashPoint():null,f)}},fillRect:function(a,b,
c){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(Q.enumIndex(this.type)){case 0:ha.fillRect(this,a,b,c);break;case 1:ha.convertToData(this);if(0==this.buffer.data.length)break;lb.fillRect(this,a,b,c);break;case 2:a.offset(this.offsetX,this.offsetY);if(null==c)b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255;else switch(c){case 1:break;case 2:b=(b&255)<<24|(b>>>8&255)<<16|(b>>>16&255)<<8|b>>>24&255;break;default:b=(b&255)<<24|(b>>>24&255)<<16|(b>>>16&255)<<8|b>>>8&255}this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(),
b)}},__clipRect:function(a){return null==a||0>a.x&&(a.width-=-a.x,a.x=0,0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,0>=a.y+a.height)||a.x+a.width>=this.width&&(a.width-=a.x+a.width-this.width,0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,0>=a.height)?null:a},__fromBase64:function(a,b,c){var d=this,e=new Image;e.addEventListener("load",function(a){d.buffer=new Qc(null,e.width,e.height);d.buffer.__srcImage=e;d.offsetX=0;d.offsetY=0;d.width=d.buffer.width;d.height=d.buffer.height;
null!=c&&c(d)},!1);e.src="data:"+b+";base64,"+a},__fromBytes:function(a,b){if(ja.__isPNG(a))var c="image/png";else if(ja.__isJPG(a))c="image/jpeg";else if(ja.__isGIF(a))c="image/gif";else return;this.__fromBase64(ja.__base64Encode(a),c,b)},__fromFile:function(a,b,c){var d=this,e=new Image;O.__isSameOrigin(a)||(e.crossOrigin="Anonymous");e.onload=function(a){d.buffer=new Qc(null,e.width,e.height);d.buffer.__srcImage=e;d.width=e.width;d.height=e.height;null!=b&&b(d)};e.onerror=function(a){null!=c&&
c()};e.src=a},__fromImageBuffer:function(a){this.buffer=a;null!=a&&(-1==this.width&&(this.width=a.width),-1==this.height&&(this.height=a.height))},get_data:function(){null==this.buffer.data&&0<this.buffer.width&&0<this.buffer.height&&ha.convertToData(this);return this.buffer.data},get_format:function(){return this.buffer.format},set_format:function(a){this.buffer.format!=a&&1==Q.enumIndex(this.type)&&lb.setFormat(this,a);return this.buffer.format=a},get_premultiplied:function(){return this.buffer.premultiplied},
set_premultiplied:function(a){if(a&&!this.buffer.premultiplied)switch(Q.enumIndex(this.type)){case 0:case 1:ha.convertToData(this),lb.multiplyAlpha(this)}else!a&&this.buffer.premultiplied&&1==Q.enumIndex(this.type)&&(ha.convertToData(this),lb.unmultiplyAlpha(this));return a},get_rect:function(){return new Od(0,0,this.width,this.height)},get_src:function(){null==this.buffer.__srcCanvas&&ha.convertToCanvas(this);return this.buffer.get_src()},get_transparent:function(){return null==this.buffer?!1:this.buffer.transparent},
set_transparent:function(a){return null==this.buffer?!1:this.buffer.transparent=a},__class__:ja,__properties__:{get_rect:"get_rect",set_transparent:"set_transparent",get_transparent:"get_transparent",get_src:"get_src",set_premultiplied:"set_premultiplied",get_premultiplied:"get_premultiplied",set_format:"set_format",get_format:"get_format",get_data:"get_data"}};var Qc=function(a,b,c,d,e){null==d&&(d=32);null==c&&(c=0);null==b&&(b=0);this.data=a;this.width=b;this.height=c;this.bitsPerPixel=d;this.format=
null==e?0:e;this.premultiplied=!1;this.transparent=!0};k["lime.graphics.ImageBuffer"]=Qc;Qc.__name__=["lime","graphics","ImageBuffer"];Qc.prototype={bitsPerPixel:null,data:null,format:null,height:null,premultiplied:null,transparent:null,width:null,__srcBitmapData:null,__srcCanvas:null,__srcContext:null,__srcImage:null,__srcImageData:null,clone:function(){var a=new Qc(this.data,this.width,this.height,this.bitsPerPixel);if(null!=this.data){var b=this.data.byteLength;b=null!=b?new Hb(b):null;a.data=
b;b=this.data;b=null!=b?new Hb(b):null;a.data.set(b)}else null!=this.__srcImageData?(a.__srcCanvas=M.get_document().createElement("canvas"),a.__srcContext=a.__srcCanvas.getContext("2d"),a.__srcCanvas.width=this.__srcImageData.width,a.__srcCanvas.height=this.__srcImageData.height,a.__srcImageData=a.__srcContext.createImageData(this.__srcImageData.width,this.__srcImageData.height),b=new Uint8ClampedArray(this.__srcImageData.data),a.__srcImageData.data.set(b)):null!=this.__srcCanvas?(a.__srcCanvas=M.get_document().createElement("canvas"),
a.__srcContext=a.__srcCanvas.getContext("2d"),a.__srcCanvas.width=this.__srcCanvas.width,a.__srcCanvas.height=this.__srcCanvas.height,a.__srcContext.drawImage(this.__srcCanvas,0,0)):a.__srcImage=this.__srcImage;a.bitsPerPixel=this.bitsPerPixel;a.format=this.format;a.premultiplied=this.premultiplied;a.transparent=this.transparent;return a},get_src:function(){return null!=this.__srcImage?this.__srcImage:this.__srcCanvas},set_src:function(a){u.is(a,Image)?this.__srcImage=a:u.is(a,HTMLCanvasElement)&&
(this.__srcCanvas=a,this.__srcContext=this.__srcCanvas.getContext("2d"));return a},get_stride:function(){return 4*this.width},__class__:Qc,__properties__:{get_stride:"get_stride",set_src:"set_src",get_src:"get_src"}};var nb=k["lime.graphics.ImageChannel"]={__ename__:["lime","graphics","ImageChannel"],__constructs__:["RED","GREEN","BLUE","ALPHA"]};nb.RED=["RED",0];nb.RED.toString=I;nb.RED.__enum__=nb;nb.GREEN=["GREEN",1];nb.GREEN.toString=I;nb.GREEN.__enum__=nb;nb.BLUE=["BLUE",2];nb.BLUE.toString=
I;nb.BLUE.__enum__=nb;nb.ALPHA=["ALPHA",3];nb.ALPHA.toString=I;nb.ALPHA.__enum__=nb;var Ya=k["lime.graphics.ImageType"]={__ename__:["lime","graphics","ImageType"],__constructs__:["CANVAS","DATA","FLASH","CUSTOM"]};Ya.CANVAS=["CANVAS",0];Ya.CANVAS.toString=I;Ya.CANVAS.__enum__=Ya;Ya.DATA=["DATA",1];Ya.DATA.toString=I;Ya.DATA.__enum__=Ya;Ya.FLASH=["FLASH",2];Ya.FLASH.toString=I;Ya.FLASH.__enum__=Ya;Ya.CUSTOM=["CUSTOM",3];Ya.CUSTOM.toString=I;Ya.CUSTOM.__enum__=Ya;var Pb=k["lime.graphics.RenderContext"]=
{__ename__:["lime","graphics","RenderContext"],__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM NONE".split(" ")};Pb.OPENGL=function(a){a=["OPENGL",0,a];a.__enum__=Pb;a.toString=I;return a};Pb.CANVAS=function(a){a=["CANVAS",1,a];a.__enum__=Pb;a.toString=I;return a};Pb.DOM=function(a){a=["DOM",2,a];a.__enum__=Pb;a.toString=I;return a};Pb.FLASH=function(a){a=["FLASH",3,a];a.__enum__=Pb;a.toString=I;return a};Pb.CAIRO=function(a){a=["CAIRO",4,a];a.__enum__=Pb;a.toString=I;return a};Pb.CONSOLE=
function(a){a=["CONSOLE",5,a];a.__enum__=Pb;a.toString=I;return a};Pb.CUSTOM=function(a){a=["CUSTOM",6,a];a.__enum__=Pb;a.toString=I;return a};Pb.NONE=["NONE",7];Pb.NONE.toString=I;Pb.NONE.__enum__=Pb;var si=function(a){this.onRender=new ub;this.onContextRestored=new Ti;this.onContextLost=new ub;this.window=a;this.backend=new Ni(this);this.window.renderer=this};k["lime.graphics.Renderer"]=si;si.__name__=["lime","graphics","Renderer"];si.prototype={context:null,onContextLost:null,onContextRestored:null,
onRender:null,type:null,window:null,backend:null,create:function(){this.backend.create()},flip:function(){this.backend.flip()},render:function(){this.backend.render()},__class__:si};var Ca=k["lime.graphics.RendererType"]={__ename__:["lime","graphics","RendererType"],__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM".split(" ")};Ca.OPENGL=["OPENGL",0];Ca.OPENGL.toString=I;Ca.OPENGL.__enum__=Ca;Ca.CANVAS=["CANVAS",1];Ca.CANVAS.toString=I;Ca.CANVAS.__enum__=Ca;Ca.DOM=["DOM",2];Ca.DOM.toString=
I;Ca.DOM.__enum__=Ca;Ca.FLASH=["FLASH",3];Ca.FLASH.toString=I;Ca.FLASH.__enum__=Ca;Ca.CAIRO=["CAIRO",4];Ca.CAIRO.toString=I;Ca.CAIRO.__enum__=Ca;Ca.CONSOLE=["CONSOLE",5];Ca.CONSOLE.toString=I;Ca.CONSOLE.__enum__=Ca;Ca.CUSTOM=["CUSTOM",6];Ca.CUSTOM.toString=I;Ca.CUSTOM.__enum__=Ca;var wk=function(){};k["lime.graphics.cairo.Cairo"]=wk;wk.__name__=["lime","graphics","cairo","Cairo"];wk.prototype={__class__:wk};var xk={};k["lime.graphics.cairo._CairoSurface.CairoSurface_Impl_"]=xk;xk.__name__=["lime",
"graphics","cairo","_CairoSurface","CairoSurface_Impl_"];xk.flush=function(a){};var ra=function(){};k["lime.graphics.opengl.GL"]=ra;ra.__name__=["lime","graphics","opengl","GL"];ra.attachShader=function(a,b){ra.context.attachShader(a,b)};ra.compileShader=function(a){ra.context.compileShader(a)};ra.createProgram=function(){return ra.context.createProgram()};ra.createShader=function(a){return ra.context.createShader(a)};ra.getError=function(){return ra.context.getError()};ra.getProgramParameter=function(a,
b){return ra.context.getProgramParameter(a,b)};ra.getShaderInfoLog=function(a){return ra.context.getShaderInfoLog(a)};ra.getShaderParameter=function(a,b){return ra.context.getShaderParameter(a,b)};ra.linkProgram=function(a){ra.context.linkProgram(a)};ra.shaderSource=function(a,b){ra.context.shaderSource(a,b)};var Pc=k["lime.graphics.opengl.GLContextType"]={__ename__:["lime","graphics","opengl","GLContextType"],__constructs__:["OPENGL","GLES","WEBGL"]};Pc.OPENGL=["OPENGL",0];Pc.OPENGL.toString=I;Pc.OPENGL.__enum__=
Pc;Pc.GLES=["GLES",1];Pc.GLES.toString=I;Pc.GLES.__enum__=Pc;Pc.WEBGL=["WEBGL",2];Pc.WEBGL.toString=I;Pc.WEBGL.__enum__=Pc;var Xi=function(a,b){this.bytes=a;this.offset=b};k["lime.utils.BytePointerData"]=Xi;Xi.__name__=["lime","utils","BytePointerData"];Xi.prototype={bytes:null,offset:null,__class__:Xi};var ah={};k["lime.graphics.opengl._WebGLContext.WebGLContext_Impl_"]=ah;ah.__name__=["lime","graphics","opengl","_WebGLContext","WebGLContext_Impl_"];ah.bufferData=function(a,b,c,d){a.bufferDataWEBGL(b,
c,d,null,null)};ah.texImage2D=function(a,b,c,d,e,f,m,h,q,y){a.texImage2DWEBGL(b,c,d,e,f,m,h,q,y,null)};var ha=function(){};k["lime.graphics.utils.ImageCanvasUtil"]=ha;ha.__name__=["lime","graphics","utils","ImageCanvasUtil"];ha.colorTransform=function(a,b,c){ha.convertToData(a);lb.colorTransform(a,b,c)};ha.convertToCanvas=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage?(null==c.__srcCanvas&&(ha.createCanvas(a,c.__srcImage.width,c.__srcImage.height),c.__srcContext.drawImage(c.__srcImage,
0,0)),c.__srcImage=null):null==c.__srcCanvas&&null!=c.data?(a.set_transparent(!0),ha.createCanvas(a,c.width,c.height),ha.createImageData(a),c.__srcContext.putImageData(c.__srcImageData,0,0)):a.type==Ya.DATA&&null!=c.__srcImageData&&a.dirty&&(c.__srcContext.putImageData(c.__srcImageData,0,0),a.dirty=!1);b?(c.data=null,c.__srcImageData=null):null==c.data&&null!=c.__srcImageData&&(c.data=c.__srcImageData.data);a.type=Ya.CANVAS};ha.convertToData=function(a,b){null==b&&(b=!1);var c=a.buffer;null!=c.__srcImage&&
ha.convertToCanvas(a);if(null!=c.__srcCanvas&&null==c.data)ha.createImageData(a),a.type==Ya.CANVAS&&(a.dirty=!1);else if(a.type==Ya.CANVAS&&null!=c.__srcCanvas&&a.dirty){if(null==c.__srcImageData)ha.createImageData(a);else{c.__srcImageData=c.__srcContext.getImageData(0,0,c.width,c.height);var d=c.__srcImageData.data.buffer;d=null!=d?new Hb(d):null;c.data=d}a.dirty=!1}b&&(a.buffer.__srcCanvas=null,a.buffer.__srcContext=null);a.type=Ya.DATA};ha.copyChannel=function(a,b,c,d,e,f){ha.convertToData(b);
ha.convertToData(a);lb.copyChannel(a,b,c,d,e,f)};ha.createCanvas=function(a,b,c){var d=a.buffer;null==d.__srcCanvas&&(d.__srcCanvas=M.get_document().createElement("canvas"),d.__srcCanvas.width=b,d.__srcCanvas.height=c,a.get_transparent()?d.__srcContext=d.__srcCanvas.getContext("2d"):(a.get_transparent()||d.__srcCanvas.setAttribute("moz-opaque","true"),d.__srcContext=d.__srcCanvas.getContext("2d",{alpha:!1})),d.__srcContext.mozImageSmoothingEnabled=!1,d.__srcContext.msImageSmoothingEnabled=!1,d.__srcContext.imageSmoothingEnabled=
!1)};ha.createImageData=function(a){a=a.buffer;if(null==a.__srcImageData){null==a.data?a.__srcImageData=a.__srcContext.getImageData(0,0,a.width,a.height):(a.__srcImageData=a.__srcContext.createImageData(a.width,a.height),a.__srcImageData.data.set(a.data));var b=a.__srcImageData.data.buffer;b=null!=b?new Hb(b):null;a.data=b}};ha.fillRect=function(a,b,c,d){ha.convertToCanvas(a);if(1==d){d=c>>16&255;var e=c>>8&255;var f=c&255;c=a.get_transparent()?c>>24&255:255}else d=c>>24&255,e=c>>16&255,f=c>>8&255,
c=a.get_transparent()?c&255:255;0==b.x&&0==b.y&&b.width==a.width&&b.height==a.height&&a.get_transparent()&&0==c?a.buffer.__srcCanvas.width=a.buffer.width:(255>c&&a.buffer.__srcContext.clearRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY),0<c&&(a.buffer.__srcContext.fillStyle="rgba("+d+", "+e+", "+f+", "+c/255+")",a.buffer.__srcContext.fillRect(b.x+a.offsetX,b.y+a.offsetY,b.width+a.offsetX,b.height+a.offsetY)),a.dirty=!0,a.version++)};ha.sync=function(a,b){null!=a&&(a.type==Ya.CANVAS?
ha.convertToCanvas(a,b):ha.convertToData(a,b))};var lb=function(){};k["lime.graphics.utils.ImageDataUtil"]=lb;lb.__name__=["lime","graphics","utils","ImageDataUtil"];lb.colorTransform=function(a,b,c){var d=a.buffer.data;if(null!=d){var e=a.buffer.format,f=a.buffer.premultiplied;b=new je(a,b);var m=jb.getAlphaTable(c),h=jb.getRedTable(c),q=jb.getGreenTable(c);c=jb.getBlueTable(c);for(var y,g,k,l=0,n=b.height;l<n;){y=l++;y=b.row(y);for(var z=0,p=b.width;z<p;){g=z++;g=y+4*g;switch(e){case 0:k=(d[g]&
255)<<24|(d[g+1]&255)<<16|(d[g+2]&255)<<8|d[g+3]&255;break;case 1:k=(d[g+1]&255)<<24|(d[g+2]&255)<<16|(d[g+3]&255)<<8|d[g]&255;break;case 2:k=(d[g+2]&255)<<24|(d[g+1]&255)<<16|(d[g]&255)<<8|d[g+3]&255}f&&0!=(k&255)&&255!=(k&255)&&(E.unmult=255/(k&255),k=(E.__clamp[Math.round((k>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((k>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((k>>>8&255)*E.unmult)]&255)<<8|k&255);k=(h[k>>>24&255]&255)<<24|(q[k>>>16&255]&255)<<16|(c[k>>>8&255]&255)<<8|m[k&255]&
255;f&&(0==(k&255)?0!=k&&(k=0):255!=(k&255)&&(E.a16=E.__alpha16[k&255],k=((k>>>24&255)*E.a16>>16&255)<<24|((k>>>16&255)*E.a16>>16&255)<<16|((k>>>8&255)*E.a16>>16&255)<<8|k&255));switch(e){case 0:d[g]=k>>>24&255;d[g+1]=k>>>16&255;d[g+2]=k>>>8&255;d[g+3]=k&255;break;case 1:d[g]=k&255;d[g+1]=k>>>24&255;d[g+2]=k>>>16&255;d[g+3]=k>>>8&255;break;case 2:d[g]=k>>>8&255,d[g+1]=k>>>16&255,d[g+2]=k>>>24&255,d[g+3]=k&255}}}a.dirty=!0;a.version++}};lb.copyChannel=function(a,b,c,d,e,f){switch(Q.enumIndex(f)){case 0:var m=
0;break;case 1:m=1;break;case 2:m=2;break;case 3:m=3}switch(Q.enumIndex(e)){case 0:var h=0;break;case 1:h=1;break;case 2:h=2;break;case 3:h=3}e=b.buffer.data;f=a.buffer.data;if(null!=e&&null!=f){c=new je(b,c);d=new je(a,new Od(d.x,d.y,c.width,c.height));var q=b.buffer.format,y=a.buffer.format;b=b.buffer.premultiplied;for(var g=a.buffer.premultiplied,k,l,n,z,p=0,u=0,t=d.height;u<t;){l=u++;k=c.row(l);l=d.row(l);for(var v=0,w=d.width;v<w;){v++;switch(q){case 0:n=(e[k]&255)<<24|(e[k+1]&255)<<16|(e[k+
2]&255)<<8|e[k+3]&255;break;case 1:n=(e[k+1]&255)<<24|(e[k+2]&255)<<16|(e[k+3]&255)<<8|e[k]&255;break;case 2:n=(e[k+2]&255)<<24|(e[k+1]&255)<<16|(e[k]&255)<<8|e[k+3]&255}b&&0!=(n&255)&&255!=(n&255)&&(E.unmult=255/(n&255),n=(E.__clamp[Math.round((n>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((n>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((n>>>8&255)*E.unmult)]&255)<<8|n&255);switch(y){case 0:z=(f[l]&255)<<24|(f[l+1]&255)<<16|(f[l+2]&255)<<8|f[l+3]&255;break;case 1:z=(f[l+1]&255)<<24|
(f[l+2]&255)<<16|(f[l+3]&255)<<8|f[l]&255;break;case 2:z=(f[l+2]&255)<<24|(f[l+1]&255)<<16|(f[l]&255)<<8|f[l+3]&255}g&&0!=(z&255)&&255!=(z&255)&&(E.unmult=255/(z&255),z=(E.__clamp[Math.round((z>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((z>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((z>>>8&255)*E.unmult)]&255)<<8|z&255);switch(h){case 0:p=n>>>24&255;break;case 1:p=n>>>16&255;break;case 2:p=n>>>8&255;break;case 3:p=n&255}switch(m){case 0:z=(p&255)<<24|(z>>>16&255)<<16|(z>>>8&255)<<
8|z&255;break;case 1:z=(z>>>24&255)<<24|(p&255)<<16|(z>>>8&255)<<8|z&255;break;case 2:z=(z>>>24&255)<<24|(z>>>16&255)<<16|(p&255)<<8|z&255;break;case 3:z=(z>>>24&255)<<24|(z>>>16&255)<<16|(z>>>8&255)<<8|p&255}g&&(0==(z&255)?0!=z&&(z=0):255!=(z&255)&&(E.a16=E.__alpha16[z&255],z=((z>>>24&255)*E.a16>>16&255)<<24|((z>>>16&255)*E.a16>>16&255)<<16|((z>>>8&255)*E.a16>>16&255)<<8|z&255));switch(y){case 0:f[l]=z>>>24&255;f[l+1]=z>>>16&255;f[l+2]=z>>>8&255;f[l+3]=z&255;break;case 1:f[l]=z&255;f[l+1]=z>>>24&
255;f[l+2]=z>>>16&255;f[l+3]=z>>>8&255;break;case 2:f[l]=z>>>8&255,f[l+1]=z>>>16&255,f[l+2]=z>>>24&255,f[l+3]=z&255}k+=4;l+=4}}a.dirty=!0;a.version++}};lb.copyPixels=function(a,b,c,d,e,f,m){null==m&&(m=!1);if(a.width==b.width&&a.height==b.height&&c.width==b.width&&c.height==b.height&&0==c.x&&0==c.y&&0==d.x&&0==d.y&&null==e&&null==f&&0==m&&a.get_format()==b.get_format())a.buffer.data.set(b.buffer.data);else{var h=b.buffer.data,q=a.buffer.data;if(null==h||null==q)return;c=new je(b,c);var y=new Od(d.x,
d.y,c.width,c.height);y=new je(a,y);var g=b.buffer.format,k=a.buffer.format,l=b.buffer.premultiplied,n=a.buffer.premultiplied;var z=u["int"](b.buffer.bitsPerPixel/8);b=u["int"](a.buffer.bitsPerPixel/8);var p=null!=e&&e.get_transparent();var t=m||p&&!a.get_transparent();if(p)if(null==f&&(f=new ye),b=e.buffer.data,m=e.buffer.format,f=new je(e,new Od(f.x,f.y,e.width,e.height)),f.offset(c.x,c.y),y.clip(u["int"](d.x),u["int"](d.y),f.width,f.height),t)for(var v=0,w=y.height;v<w;){t=v++;d=c.row(t);e=y.row(t);
var x=f.row(t);for(var A=0,B=y.width;A<B;){A++;switch(g){case 0:var r=(h[d]&255)<<24|(h[d+1]&255)<<16|(h[d+2]&255)<<8|h[d+3]&255;break;case 1:r=(h[d+1]&255)<<24|(h[d+2]&255)<<16|(h[d+3]&255)<<8|h[d]&255;break;case 2:r=(h[d+2]&255)<<24|(h[d+1]&255)<<16|(h[d]&255)<<8|h[d+3]&255}l&&0!=(r&255)&&255!=(r&255)&&(E.unmult=255/(r&255),r=(E.__clamp[Math.round((r>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((r>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((r>>>8&255)*E.unmult)]&255)<<8|r&255);switch(k){case 0:var J=
(q[e]&255)<<24|(q[e+1]&255)<<16|(q[e+2]&255)<<8|q[e+3]&255;break;case 1:J=(q[e+1]&255)<<24|(q[e+2]&255)<<16|(q[e+3]&255)<<8|q[e]&255;break;case 2:J=(q[e+2]&255)<<24|(q[e+1]&255)<<16|(q[e]&255)<<8|q[e+3]&255}n&&0!=(J&255)&&255!=(J&255)&&(E.unmult=255/(J&255),J=(E.__clamp[Math.round((J>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((J>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((J>>>8&255)*E.unmult)]&255)<<8|J&255);switch(m){case 0:var C=(b[x]&255)<<24|(b[x+1]&255)<<16|(b[x+2]&255)<<8|
b[x+3]&255;break;case 1:C=(b[x+1]&255)<<24|(b[x+2]&255)<<16|(b[x+3]&255)<<8|b[x]&255;break;case 2:C=(b[x+2]&255)<<24|(b[x+1]&255)<<16|(b[x]&255)<<8|b[x+3]&255}t=(C&255)/255*((r&255)/255);if(0<t){z=(J&255)/255;p=1-t;var D=t+z*p;J=(E.__clamp[Math.round(((r>>>24&255)*t+(J>>>24&255)*z*p)/D)]&255)<<24|(J>>>16&255)<<16|(J>>>8&255)<<8|J&255;J=(J>>>24&255)<<24|(E.__clamp[Math.round(((r>>>16&255)*t+(J>>>16&255)*z*p)/D)]&255)<<16|(J>>>8&255)<<8|J&255;J=(J>>>24&255)<<24|(J>>>16&255)<<16|(E.__clamp[Math.round(((r>>>
8&255)*t+(J>>>8&255)*z*p)/D)]&255)<<8|J&255;J=(J>>>24&255)<<24|(J>>>16&255)<<16|(J>>>8&255)<<8|E.__clamp[Math.round(255*D)]&255;n&&(0==(J&255)?0!=J&&(J=0):255!=(J&255)&&(E.a16=E.__alpha16[J&255],J=((J>>>24&255)*E.a16>>16&255)<<24|((J>>>16&255)*E.a16>>16&255)<<16|((J>>>8&255)*E.a16>>16&255)<<8|J&255));switch(k){case 0:q[e]=J>>>24&255;q[e+1]=J>>>16&255;q[e+2]=J>>>8&255;q[e+3]=J&255;break;case 1:q[e]=J&255;q[e+1]=J>>>24&255;q[e+2]=J>>>16&255;q[e+3]=J>>>8&255;break;case 2:q[e]=J>>>8&255,q[e+1]=J>>>16&
255,q[e+2]=J>>>24&255,q[e+3]=J&255}}d+=4;e+=4;x+=4}}else for(J=0,t=y.height;J<t;)for(z=J++,d=c.row(z),e=y.row(z),x=f.row(z),z=0,p=y.width;z<p;){z++;switch(g){case 0:r=(h[d]&255)<<24|(h[d+1]&255)<<16|(h[d+2]&255)<<8|h[d+3]&255;break;case 1:r=(h[d+1]&255)<<24|(h[d+2]&255)<<16|(h[d+3]&255)<<8|h[d]&255;break;case 2:r=(h[d+2]&255)<<24|(h[d+1]&255)<<16|(h[d]&255)<<8|h[d+3]&255}l&&0!=(r&255)&&255!=(r&255)&&(E.unmult=255/(r&255),r=(E.__clamp[Math.round((r>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((r>>>
16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((r>>>8&255)*E.unmult)]&255)<<8|r&255);switch(m){case 0:C=(b[x]&255)<<24|(b[x+1]&255)<<16|(b[x+2]&255)<<8|b[x+3]&255;break;case 1:C=(b[x+1]&255)<<24|(b[x+2]&255)<<16|(b[x+3]&255)<<8|b[x]&255;break;case 2:C=(b[x+2]&255)<<24|(b[x+1]&255)<<16|(b[x]&255)<<8|b[x+3]&255}r=(r>>>24&255)<<24|(r>>>16&255)<<16|(r>>>8&255)<<8|Math.round((C&255)/255*(r&255))&255;n&&(0==(r&255)?0!=r&&(r=0):255!=(r&255)&&(E.a16=E.__alpha16[r&255],r=((r>>>24&255)*E.a16>>16&255)<<24|
((r>>>16&255)*E.a16>>16&255)<<16|((r>>>8&255)*E.a16>>16&255)<<8|r&255));switch(k){case 0:q[e]=r>>>24&255;q[e+1]=r>>>16&255;q[e+2]=r>>>8&255;q[e+3]=r&255;break;case 1:q[e]=r&255;q[e+1]=r>>>24&255;q[e+2]=r>>>16&255;q[e+3]=r>>>8&255;break;case 2:q[e]=r>>>8&255,q[e+1]=r>>>16&255,q[e+2]=r>>>24&255,q[e+3]=r&255}d+=4;e+=4;x+=4}else if(t)for(C=0,b=y.height;C<b;)for(e=C++,d=c.row(e),e=y.row(e),m=0,f=y.width;m<f;){m++;switch(g){case 0:r=(h[d]&255)<<24|(h[d+1]&255)<<16|(h[d+2]&255)<<8|h[d+3]&255;break;case 1:r=
(h[d+1]&255)<<24|(h[d+2]&255)<<16|(h[d+3]&255)<<8|h[d]&255;break;case 2:r=(h[d+2]&255)<<24|(h[d+1]&255)<<16|(h[d]&255)<<8|h[d+3]&255}l&&0!=(r&255)&&255!=(r&255)&&(E.unmult=255/(r&255),r=(E.__clamp[Math.round((r>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((r>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((r>>>8&255)*E.unmult)]&255)<<8|r&255);switch(k){case 0:J=(q[e]&255)<<24|(q[e+1]&255)<<16|(q[e+2]&255)<<8|q[e+3]&255;break;case 1:J=(q[e+1]&255)<<24|(q[e+2]&255)<<16|(q[e+3]&255)<<8|q[e]&
255;break;case 2:J=(q[e+2]&255)<<24|(q[e+1]&255)<<16|(q[e]&255)<<8|q[e+3]&255}n&&0!=(J&255)&&255!=(J&255)&&(E.unmult=255/(J&255),J=(E.__clamp[Math.round((J>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((J>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((J>>>8&255)*E.unmult)]&255)<<8|J&255);t=(r&255)/255;z=(J&255)/255;p=1-t;D=t+z*p;0==D?J=0:(J=(E.__clamp[Math.round(((r>>>24&255)*t+(J>>>24&255)*z*p)/D)]&255)<<24|(J>>>16&255)<<16|(J>>>8&255)<<8|J&255,J=(J>>>24&255)<<24|(E.__clamp[Math.round(((r>>>
16&255)*t+(J>>>16&255)*z*p)/D)]&255)<<16|(J>>>8&255)<<8|J&255,J=(J>>>24&255)<<24|(J>>>16&255)<<16|(E.__clamp[Math.round(((r>>>8&255)*t+(J>>>8&255)*z*p)/D)]&255)<<8|J&255,J=(J>>>24&255)<<24|(J>>>16&255)<<16|(J>>>8&255)<<8|E.__clamp[Math.round(255*D)]&255);n&&(0==(J&255)?0!=J&&(J=0):255!=(J&255)&&(E.a16=E.__alpha16[J&255],J=((J>>>24&255)*E.a16>>16&255)<<24|((J>>>16&255)*E.a16>>16&255)<<16|((J>>>8&255)*E.a16>>16&255)<<8|J&255));switch(k){case 0:q[e]=J>>>24&255;q[e+1]=J>>>16&255;q[e+2]=J>>>8&255;q[e+
3]=J&255;break;case 1:q[e]=J&255;q[e+1]=J>>>24&255;q[e+2]=J>>>16&255;q[e+3]=J>>>8&255;break;case 2:q[e]=J>>>8&255,q[e+1]=J>>>16&255,q[e+2]=J>>>24&255,q[e+3]=J&255}d+=4;e+=4}else if(g==k&&l==n&&z==b)for(r=0,g=y.height;r<g;)k=r++,d=c.row(k),e=y.row(k),q.set(h.subarray(d,d+y.width*b),e);else for(J=0,C=y.height;J<C;)for(e=J++,d=c.row(e),e=y.row(e),b=0,m=y.width;b<m;){b++;switch(g){case 0:r=(h[d]&255)<<24|(h[d+1]&255)<<16|(h[d+2]&255)<<8|h[d+3]&255;break;case 1:r=(h[d+1]&255)<<24|(h[d+2]&255)<<16|(h[d+
3]&255)<<8|h[d]&255;break;case 2:r=(h[d+2]&255)<<24|(h[d+1]&255)<<16|(h[d]&255)<<8|h[d+3]&255}l&&0!=(r&255)&&255!=(r&255)&&(E.unmult=255/(r&255),r=(E.__clamp[Math.round((r>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((r>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((r>>>8&255)*E.unmult)]&255)<<8|r&255);n&&(0==(r&255)?0!=r&&(r=0):255!=(r&255)&&(E.a16=E.__alpha16[r&255],r=((r>>>24&255)*E.a16>>16&255)<<24|((r>>>16&255)*E.a16>>16&255)<<16|((r>>>8&255)*E.a16>>16&255)<<8|r&255));switch(k){case 0:q[e]=
r>>>24&255;q[e+1]=r>>>16&255;q[e+2]=r>>>8&255;q[e+3]=r&255;break;case 1:q[e]=r&255;q[e+1]=r>>>24&255;q[e+2]=r>>>16&255;q[e+3]=r>>>8&255;break;case 2:q[e]=r>>>8&255,q[e+1]=r>>>16&255,q[e+2]=r>>>24&255,q[e+3]=r&255}d+=4;e+=4}}a.dirty=!0;a.version++};lb.fillRect=function(a,b,c,d){switch(d){case 1:c=(c>>>16&255)<<24|(c>>>8&255)<<16|(c&255)<<8|c>>>24&255;break;case 2:c=(c>>>8&255)<<24|(c>>>16&255)<<16|(c>>>24&255)<<8|c&255}a.get_transparent()||(c=(c>>>24&255)<<24|(c>>>16&255)<<16|(c>>>8&255)<<8|255);d=
a.buffer.data;if(null!=d){var e=a.buffer.format;a.buffer.premultiplied&&(0==(c&255)?0!=c&&(c=0):255!=(c&255)&&(E.a16=E.__alpha16[c&255],c=((c>>>24&255)*E.a16>>16&255)<<24|((c>>>16&255)*E.a16>>16&255)<<16|((c>>>8&255)*E.a16>>16&255)<<8|c&255));b=new je(a,b);for(var f,m=0,h=b.height;m<h;){f=m++;f=b.row(f);for(var q=0,y=b.width;q<y;){var g=q++;g=f+4*g;switch(e){case 0:d[g]=c>>>24&255;d[g+1]=c>>>16&255;d[g+2]=c>>>8&255;d[g+3]=c&255;break;case 1:d[g]=c&255;d[g+1]=c>>>24&255;d[g+2]=c>>>16&255;d[g+3]=c>>>
8&255;break;case 2:d[g]=c>>>8&255,d[g+1]=c>>>16&255,d[g+2]=c>>>24&255,d[g+3]=c&255}}}a.dirty=!0;a.version++}};lb.gaussianBlur=function(a,b,c,d,e,f,m,h){null==h&&(h=1);null==m&&(m=1);null==f&&(f=4);null==e&&(e=4);var q=a.buffer.premultiplied||b.buffer.premultiplied?function(a,b){a=u["int"](a);return 0>a?0:255<a?255:a}:function(a,b){a=u["int"](a/b*255);return 0>a?0:255<a?255:a};var y=function(a,b){var c=Math.floor(Math.sqrt(12*a*a/b+1));0==c%2&&--c;var d=c+2;a=Math.round((12*a*a-b*c*c-4*b*c-3*b)/(-4*
c-4));for(var e=[],f=0;f<b;){var h=f++;e.push(h<a?c:d)}return e},g=function(a,b,c,d,e,f){for(var h=1/(e+e+1),m=0;m<d;){for(var q=m++*c,y=q,g=q+e,k=a[4*q+f],l=a[4*(q+c-1)+f],wg=(e+1)*k,n=0,p=e;n<p;){var z=n++;wg+=a[4*(q+z)+f]}n=0;for(p=e+1;n<p;)n++,wg+=a[4*g+f]-k,b[4*q+f]=Math.round($b.toFloat(wg)*h),++g,++q;k=e+1;for(n=c-e;k<n;)k++,wg+=a[4*g+f]-a[4*y+f],b[4*q+f]=Math.round($b.toFloat(wg)*h),++g,++y,++q;g=c-e;for(k=c;g<k;)g++,wg+=l-a[4*y+f],b[4*q+f]=Math.round($b.toFloat(wg)*h),++y,++q}},k=function(a,
b,c,d,e,f){for(var h=1/(e+e+1),m=4*c,q=0;q<c;){for(var y=4*q++ +f,g=y,k=y+e*m,l=a[y],wg=a[y+m*(d-1)],n=(e+1)*l,p=0,z=e;p<z;){var we=p++;n+=a[y+we*m]}p=0;for(z=e+1;p<z;)p++,n+=a[k]-l,b[y]=Math.round($b.toFloat(n)*h),k+=m,y+=m;l=e+1;for(p=d-e;l<p;)l++,n+=a[k]-a[g],b[y]=Math.round($b.toFloat(n)*h),g+=m,k+=m,y+=m;k=d-e;for(l=d;k<l;)k++,n+=wg-a[g],b[y]=Math.round($b.toFloat(n)*h),g+=m,y+=m}},l=function(a,b,c,d,e,f){for(var h=0,m=a.length;h<m;){var q=h++;b[q]=a[q]}h=u["int"](e);g(b,a,c,d,h,0);h=u["int"](e);
g(b,a,c,d,h,1);h=u["int"](e);g(b,a,c,d,h,2);e=u["int"](e);g(b,a,c,d,e,3);e=u["int"](f);k(a,b,c,d,e,0);e=u["int"](f);k(a,b,c,d,e,1);e=u["int"](f);k(a,b,c,d,e,2);f=u["int"](f);k(a,b,c,d,f,3)},n=a.get_data(),z=b.get_data(),p=u["int"](c.width);c=u["int"](c.height);e=u["int"](e);var t=u["int"](f);f=u["int"](d.x);var r=u["int"](d.y);d=2*m-1;var x=.125*Math.pow(2,m);m=y(e*x,d);e=y(t*x,d);y=u["int"](4*(p*r+f));l(z,n,p,c,(m[0]-1)/2,(e[0]-1)/2);f=1;t=0;for(d=u["int"](d/2);t<d;)t++,l(n,z,p,c,(m[f]-1)/2,(e[f]-
1)/2),l(z,n,p,c,(m[f+1]-1)/2,(e[f+1]-1)/2),f+=2;l=0;if(0>y){for(;l<z.length;)p=u["int"]($b.toFloat(n[l+3])*h),0>p?p=0:255<p&&(p=255),n[l]=q($b.toFloat(n[l]),p),n[l+1]=q($b.toFloat(n[l+1]),p),n[l+2]=q($b.toFloat(n[l+2]),p),n[l+3]=p,l+=4;h=z.length-y;for(z=z.length;h<z;)q=h++,n[q]=0}else{for(l=z.length-4;0<=l;)p=u["int"]($b.toFloat(n[l+3])*h),0>p?p=0:255<p&&(p=255),n[l+y]=q($b.toFloat(n[l]),p),n[l+1+y]=q($b.toFloat(n[l+1]),p),n[l+2+y]=q($b.toFloat(n[l+2]),p),n[l+3+y]=p,l-=4;for(z=0;z<y;)h=z++,n[h]=
0}a.dirty=!0;a.version++;b.dirty=!0;b.version++;return n==a.get_data()?a:b};lb.multiplyAlpha=function(a){var b=a.buffer.data;if(null!=b&&a.buffer.transparent){for(var c=a.buffer.format,d,e=0,f=u["int"](b.length/4);e<f;){var m=e++,h=4*m;switch(c){case 0:d=(b[h]&255)<<24|(b[h+1]&255)<<16|(b[h+2]&255)<<8|b[h+3]&255;break;case 1:d=(b[h+1]&255)<<24|(b[h+2]&255)<<16|(b[h+3]&255)<<8|b[h]&255;break;case 2:d=(b[h+2]&255)<<24|(b[h+1]&255)<<16|(b[h]&255)<<8|b[h+3]&255}m*=4;0==(d&255)?0!=d&&(d=0):255!=(d&255)&&
(E.a16=E.__alpha16[d&255],d=((d>>>24&255)*E.a16>>16&255)<<24|((d>>>16&255)*E.a16>>16&255)<<16|((d>>>8&255)*E.a16>>16&255)<<8|d&255);switch(c){case 0:b[m]=d>>>24&255;b[m+1]=d>>>16&255;b[m+2]=d>>>8&255;b[m+3]=d&255;break;case 1:b[m]=d&255;b[m+1]=d>>>24&255;b[m+2]=d>>>16&255;b[m+3]=d>>>8&255;break;case 2:b[m]=d>>>8&255,b[m+1]=d>>>16&255,b[m+2]=d>>>24&255,b[m+3]=d&255}}a.buffer.premultiplied=!0;a.dirty=!0;a.version++}};lb.setFormat=function(a,b){var c=a.buffer.data;if(null!=c){var d=u["int"](c.length/
4);switch(a.get_format()){case 0:var e=0;var f=1;var m=2;var h=3;break;case 1:e=1;f=2;m=3;h=0;break;case 2:e=2,f=1,m=0,h=3}switch(b){case 0:var q=0;var y=1;var g=2;var k=3;break;case 1:q=1;y=2;g=3;k=0;break;case 2:q=2,y=1,g=0,k=3}for(var l=0;l<d;){var n=4*l++;var p=c[n+e];var t=c[n+f];var r=c[n+m];var x=c[n+h];c[n+q]=p;c[n+y]=t;c[n+g]=r;c[n+k]=x}a.buffer.format=b;a.dirty=!0;a.version++}};lb.unmultiplyAlpha=function(a){var b=a.buffer.data;if(null!=b){for(var c=a.buffer.format,d,e=0,f=u["int"](b.length/
4);e<f;){var m=e++,h=4*m;switch(c){case 0:d=(b[h]&255)<<24|(b[h+1]&255)<<16|(b[h+2]&255)<<8|b[h+3]&255;break;case 1:d=(b[h+1]&255)<<24|(b[h+2]&255)<<16|(b[h+3]&255)<<8|b[h]&255;break;case 2:d=(b[h+2]&255)<<24|(b[h+1]&255)<<16|(b[h]&255)<<8|b[h+3]&255}0!=(d&255)&&255!=(d&255)&&(E.unmult=255/(d&255),d=(E.__clamp[Math.round((d>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((d>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((d>>>8&255)*E.unmult)]&255)<<8|d&255);m*=4;switch(c){case 0:b[m]=d>>>
24&255;b[m+1]=d>>>16&255;b[m+2]=d>>>8&255;b[m+3]=d&255;break;case 1:b[m]=d&255;b[m+1]=d>>>24&255;b[m+2]=d>>>16&255;b[m+3]=d>>>8&255;break;case 2:b[m]=d>>>8&255,b[m+1]=d>>>16&255,b[m+2]=d>>>24&255,b[m+3]=d&255}}a.buffer.premultiplied=!1;a.dirty=!0;a.version++}};var je=function(a,b){this.image=a;null==b?this.rect=a.get_rect():(0>b.x&&(b.x=0),0>b.y&&(b.y=0),b.x+b.width>a.width&&(b.width=a.width-b.x),b.y+b.height>a.height&&(b.height=a.height-b.y),0>b.width&&(b.width=0),0>b.height&&(b.height=0),this.rect=
b);this.stride=a.buffer.get_stride();this.__update()};k["lime.graphics.utils._ImageDataUtil.ImageDataView"]=je;je.__name__=["lime","graphics","utils","_ImageDataUtil","ImageDataView"];je.prototype={x:null,y:null,height:null,width:null,byteOffset:null,image:null,rect:null,stride:null,clip:function(a,b,c,d){this.rect.__contract(a,b,c,d);this.__update()},offset:function(a,b){0>a?(this.rect.x+=a,0>this.rect.x&&(this.rect.x=0)):(this.rect.x+=a,this.rect.width-=a);0>b?(this.rect.y+=b,0>this.rect.y&&(this.rect.y=
0)):(this.rect.y+=b,this.rect.height-=b);this.__update()},row:function(a){return this.byteOffset+this.stride*a},__update:function(){this.x=Math.ceil(this.rect.x);this.y=Math.ceil(this.rect.y);this.width=Math.floor(this.rect.width);this.height=Math.floor(this.rect.height);this.byteOffset=this.stride*(this.y+this.image.offsetY)+4*(this.x+this.image.offsetX)},__class__:je};var jb={};k["lime.math._ColorMatrix.ColorMatrix_Impl_"]=jb;jb.__name__=["lime","math","_ColorMatrix","ColorMatrix_Impl_"];jb.getAlphaTable=
function(a){if(null==jb.__alphaTable){var b=new Hb(256);jb.__alphaTable=b}jb.__alphaTable[0]=0;for(var c=1;256>c;){var d=c++;b=Math.floor(d*a[18]+255*a[19]);255<b&&(b=255);0>b&&(b=0);jb.__alphaTable[d]=b}return jb.__alphaTable};jb.getBlueTable=function(a){if(null==jb.__blueTable){var b=new Hb(256);jb.__blueTable=b}for(var c=0;256>c;){var d=c++;b=Math.floor(d*a[12]+255*a[14]);255<b&&(b=255);0>b&&(b=0);jb.__blueTable[d]=b}return jb.__blueTable};jb.getGreenTable=function(a){if(null==jb.__greenTable){var b=
new Hb(256);jb.__greenTable=b}for(var c=0;256>c;){var d=c++;b=Math.floor(d*a[6]+255*a[9]);255<b&&(b=255);0>b&&(b=0);jb.__greenTable[d]=b}return jb.__greenTable};jb.getRedTable=function(a){if(null==jb.__redTable){var b=new Hb(256);jb.__redTable=b}for(var c=0;256>c;){var d=c++;b=Math.floor(d*a[0]+255*a[4]);255<b&&(b=255);0>b&&(b=0);jb.__redTable[d]=b}return jb.__redTable};jb.__toFlashColorTransform=function(a){return null};var S={};k["lime.math._Matrix4.Matrix4_Impl_"]=S;S.__name__=["lime","math","_Matrix4",
"Matrix4_Impl_"];S._new=function(a){if(null==a||16!=a.length)a=S.__identity,a=null!=a?new Zc(a):null;return a};S.append=function(a,b){var c=a[0],d=a[4],e=a[8],f=a[12],m=a[1],h=a[5],q=a[9],y=a[13],g=a[2],k=a[6],l=a[10],n=a[14],p=a[3],t=a[7],u=a[11],r=a[15],x=S.get(b,0),v=S.get(b,4),w=S.get(b,8),A=S.get(b,12),B=S.get(b,1),C=S.get(b,5),D=S.get(b,9),E=S.get(b,13),G=S.get(b,2),F=S.get(b,6),H=S.get(b,10),I=S.get(b,14),K=S.get(b,3),L=S.get(b,7),M=S.get(b,11);b=S.get(b,15);a[0]=c*x+m*v+g*w+p*A;a[1]=c*B+m*
C+g*D+p*E;a[2]=c*G+m*F+g*H+p*I;a[3]=c*K+m*L+g*M+p*b;a[4]=d*x+h*v+k*w+t*A;a[5]=d*B+h*C+k*D+t*E;a[6]=d*G+h*F+k*H+t*I;a[7]=d*K+h*L+k*M+t*b;a[8]=e*x+q*v+l*w+u*A;a[9]=e*B+q*C+l*D+u*E;a[10]=e*G+q*F+l*H+u*I;a[11]=e*K+q*L+l*M+u*b;a[12]=f*x+y*v+n*w+r*A;a[13]=f*B+y*C+n*D+r*E;a[14]=f*G+y*F+n*H+r*I;a[15]=f*K+y*L+n*M+r*b};S.createOrtho=function(a,b,c,d,e,f){var m=1/(b-a),h=1/(d-c),q=1/(f-e);a=[2*m,0,0,0,0,2*h,0,0,0,0,-2*q,0,-(a+b)*m,-(c+d)*h,-(e+f)*q,1];a=null!=a?new Zc(a):null;return S._new(a)};S.identity=function(a){a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1};S.get=function(a,b){return a[b]};S.set=function(a,b,c){return a[b]=c};var Od=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d};k["lime.math.Rectangle"]=Od;Od.__name__=["lime","math","Rectangle"];Od.prototype={height:null,width:null,x:null,y:null,offset:function(a,b){this.x+=a;this.y+=b},setTo:function(a,b,c,d){this.x=
a;this.y=b;this.width=c;this.height=d},__contract:function(a,b,c,d){if(0!=this.width||0!=this.height)this.x<a&&(this.x=a),this.y<b&&(this.y=b),this.get_right()>a+c&&(this.width=a+c-this.x),this.get_bottom()>b+d&&(this.height=b+d-this.y)},__toFlashRectangle:function(){return null},get_bottom:function(){return this.y+this.height},get_right:function(){return this.x+this.width},__class__:Od,__properties__:{get_right:"get_right",get_bottom:"get_bottom"}};var ye=function(a,b){null==b&&(b=0);null==a&&(a=
0);this.x=a;this.y=b};k["lime.math.Vector2"]=ye;ye.__name__=["lime","math","Vector2"];ye.prototype={x:null,y:null,offset:function(a,b){this.x+=a;this.y+=b},setTo:function(a,b){this.x=a;this.y=b},__toFlashPoint:function(){return null},__class__:ye};var Li=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.w=d;this.x=a;this.y=b;this.z=c};k["lime.math.Vector4"]=Li;Li.__name__=["lime","math","Vector4"];Li.prototype={w:null,x:null,y:null,z:null,__class__:Li};var E={};k["lime.math.color._RGBA.RGBA_Impl_"]=
E;E.__name__=["lime","math","color","_RGBA","RGBA_Impl_"];var Cl=function(){};k["lime.media.ALAudioContext"]=Cl;Cl.__name__=["lime","media","ALAudioContext"];var Dl=function(){};k["lime.media.ALCAudioContext"]=Dl;Dl.__name__=["lime","media","ALCAudioContext"];var vb=function(){};k["lime.media.AudioBuffer"]=vb;vb.__name__=["lime","media","AudioBuffer"];vb.fromBase64=function(a){if(null==a)return null;-1==a.indexOf(",")&&(a="data:"+vb.__getCodec(ie.decode(a))+";base64,"+a);var b=new vb;b.set_src(new Howl({src:[a],
html5:!0,preload:!1}));return b};vb.fromBytes=function(a){if(null==a)return null;var b=new vb;b.set_src(new Howl({src:["data:"+vb.__getCodec(a)+";base64,"+ie.encode(a)],html5:!0,preload:!1}));return b};vb.fromFile=function(a){if(null==a)return null;var b=new vb;b.__srcHowl=new Howl({src:[a],preload:!1});return b};vb.fromFiles=function(a){var b=new vb;b.__srcHowl=new Howl({src:a,preload:!1});return b};vb.fromVorbisFile=function(a){return null};vb.loadFromFile=function(a){var b=new Ob,c=vb.fromFile(a);
null!=c?null!=c&&(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(a,c){b.error(c)}),c.__srcHowl.load()):b.error(null);return b.future};vb.loadFromFiles=function(a){var b=new Ob,c=vb.fromFiles(a);null!=c?(c.__srcHowl.on("load",function(){b.complete(c)}),c.__srcHowl.on("loaderror",function(){b.error(null)}),c.__srcHowl.load()):b.error(null);return b.future};vb.__getCodec=function(a){switch(a.getString(0,4)){case "OggS":return"audio/ogg";case "RIFF":if("WAVE"==a.getString(8,
4))return"audio/wav";if("ID3"==a.getString(0,3)||"\u00ff\u00fb"==a.getString(0,2))return"audio/mp3";break;case "fLaC":return"audio/flac";default:if("ID3"==a.getString(0,3)||"\u00ff\u00fb"==a.getString(0,2))return"audio/mp3"}Pa.error("Unsupported sound format",{fileName:"AudioBuffer.hx",lineNumber:480,className:"lime.media.AudioBuffer",methodName:"__getCodec"});return null};vb.prototype={__srcHowl:null,set_src:function(a){return this.__srcHowl=a},__class__:vb,__properties__:{set_src:"set_src"}};var Ac=
k["lime.media.AudioContext"]={__ename__:["lime","media","AudioContext"],__constructs__:["OPENAL","HTML5","WEB","FLASH","CUSTOM"]};Ac.OPENAL=function(a,b){a=["OPENAL",0,a,b];a.__enum__=Ac;a.toString=I;return a};Ac.HTML5=function(a){a=["HTML5",1,a];a.__enum__=Ac;a.toString=I;return a};Ac.WEB=function(a){a=["WEB",2,a];a.__enum__=Ac;a.toString=I;return a};Ac.FLASH=function(a){a=["FLASH",3,a];a.__enum__=Ac;a.toString=I;return a};Ac.CUSTOM=function(a){a=["CUSTOM",4,a];a.__enum__=Ac;a.toString=I;return a};
var Pf=function(){};k["lime.media.AudioManager"]=Pf;Pf.__name__=["lime","media","AudioManager"];Pf.init=function(a){if(null==Pf.context)if(null==a)try{window.AudioContext=window.AudioContext||window.webkitAudioContext,Pf.context=Ac.WEB(new AudioContext)}catch(b){Y.lastException=b,Pf.context=Ac.HTML5(new Yi)}else Pf.context=a};var yk=function(a,b,c,d){null==d&&(d=0);null==b&&(b=0);this.onComplete=new ub;this.buffer=a;this.offset=b;this.backend=new Mi(this);null!=c&&0!=c&&this.set_length(c);this.set_loops(d);
null!=a&&this.init()};k["lime.media.AudioSource"]=yk;yk.__name__=["lime","media","AudioSource"];yk.prototype={onComplete:null,buffer:null,offset:null,backend:null,dispose:function(){this.backend.dispose()},init:function(){this.backend.init()},play:function(){this.backend.play()},stop:function(){this.backend.stop()},get_currentTime:function(){return this.backend.getCurrentTime()},set_currentTime:function(a){return this.backend.setCurrentTime(a)},get_gain:function(){return this.backend.getGain()},set_gain:function(a){return this.backend.setGain(a)},
set_length:function(a){return this.backend.setLength(a)},set_loops:function(a){return this.backend.setLoops(a)},get_position:function(){return this.backend.getPosition()},set_position:function(a){return this.backend.setPosition(a)},__class__:yk,__properties__:{set_position:"set_position",get_position:"get_position",set_loops:"set_loops",set_length:"set_length",set_gain:"set_gain",get_gain:"get_gain",set_currentTime:"set_currentTime",get_currentTime:"get_currentTime"}};var El=function(){};k["lime.media.FlashAudioContext"]=
El;El.__name__=["lime","media","FlashAudioContext"];var Yi=function(){};k["lime.media.HTML5AudioContext"]=Yi;Yi.__name__=["lime","media","HTML5AudioContext"];Yi.prototype={__class__:Yi};var Zi=function(){};k["lime.net._IHTTPRequest"]=Zi;Zi.__name__=["lime","net","_IHTTPRequest"];Zi.prototype={contentType:null,data:null,enableResponseHeaders:null,followRedirects:null,formData:null,headers:null,method:null,responseHeaders:null,responseStatus:null,timeout:null,uri:null,userAgent:null,withCredentials:null,
__class__:Zi};var pd=function(a){this.uri=a;this.contentType="application/x-www-form-urlencoded";this.followRedirects=!0;this.enableResponseHeaders=!1;this.formData=new ea;this.headers=[];this.method="GET";this.timeout=3E4;this.withCredentials=!1;this.backend=new O;this.backend.init(this)};k["lime.net._HTTPRequest.AbstractHTTPRequest"]=pd;pd.__name__=["lime","net","_HTTPRequest","AbstractHTTPRequest"];pd.__interfaces__=[Zi];pd.prototype={contentType:null,data:null,enableResponseHeaders:null,followRedirects:null,
formData:null,headers:null,method:null,responseData:null,responseHeaders:null,responseStatus:null,timeout:null,uri:null,userAgent:null,withCredentials:null,backend:null,__class__:pd};var Se=function(a){pd.call(this,a)};k["lime.net._HTTPRequest_Bytes"]=Se;Se.__name__=["lime","net","_HTTPRequest_Bytes"];Se.__super__=pd;Se.prototype=w(pd.prototype,{fromBytes:function(a){return a},load:function(a){var b=this;null!=a&&(this.uri=a);var c=new Ob;a=this.backend.loadData(this.uri);a.onProgress(l(c,c.progress));
a.onError(l(c,c.error));a.onComplete(function(a){b.responseData=b.fromBytes(a);c.complete(b.responseData)});return c.future},__class__:Se});var Hf=function(a){pd.call(this,a)};k["lime.net._HTTPRequest_String"]=Hf;Hf.__name__=["lime","net","_HTTPRequest_String"];Hf.__super__=pd;Hf.prototype=w(pd.prototype,{load:function(a){var b=this;null!=a&&(this.uri=a);var c=new Ob;a=this.backend.loadText(this.uri);a.onProgress(l(c,c.progress));a.onError(l(c,c.error));a.onComplete(function(a){b.responseData=a;c.complete(b.responseData)});
return c.future},__class__:Hf});var Vg=function(a,b){null==b&&(b="");this.name=a;this.value=b};k["lime.net.HTTPRequestHeader"]=Vg;Vg.__name__=["lime","net","HTTPRequestHeader"];Vg.prototype={name:null,value:null,__class__:Vg};var bh=function(a){pd.call(this,a)};k["lime.net._HTTPRequest_lime_utils_Bytes"]=bh;bh.__name__=["lime","net","_HTTPRequest_lime_utils_Bytes"];bh.__super__=Se;bh.prototype=w(Se.prototype,{fromBytes:function(a){return Rc.fromBytes(a)},__class__:bh});var ch=function(a){pd.call(this,
a)};k["lime.net._HTTPRequest_openfl_utils_ByteArray"]=ch;ch.__name__=["lime","net","_HTTPRequest_openfl_utils_ByteArray"];ch.__super__=Se;ch.prototype=w(Se.prototype,{fromBytes:function(a){return qd.fromBytes(a)},__class__:ch});var Ib=function(){};k["lime.system.Clipboard"]=Ib;Ib.__name__=["lime","system","Clipboard"];Ib.__properties__={set_text:"set_text",get_text:"get_text"};Ib.get_text=function(){return Ib._text};Ib.set_text=function(a){var b=Ib._text;Ib._text=a;var c=dc.current.get_window();null!=
c&&c.backend.setClipboard(a);Ib._text!=b&&Ib.onUpdate.dispatch();return a};var Fl=function(){};k["lime.system.DisplayMode"]=Fl;Fl.__name__=["lime","system","DisplayMode"];var Te=k["lime.system.Endian"]={__ename__:["lime","system","Endian"],__constructs__:["LITTLE_ENDIAN","BIG_ENDIAN"]};Te.LITTLE_ENDIAN=["LITTLE_ENDIAN",0];Te.LITTLE_ENDIAN.toString=I;Te.LITTLE_ENDIAN.__enum__=Te;Te.BIG_ENDIAN=["BIG_ENDIAN",1];Te.BIG_ENDIAN.toString=I;Te.BIG_ENDIAN.__enum__=Te;var wa=function(){};k["lime.system.System"]=
wa;wa.__name__=["lime","system","System"];wa.__properties__={get_endianness:"get_endianness"};wa.embed=D.lime.embed=function(a,b,c,d,e){if(null!=wa.__applicationEntryPoint&&null!=wa.__applicationConfig&&wa.__applicationEntryPoint.exists(a)){var f="string"==typeof b?M.get_document().getElementById(b):null==b?M.get_document().createElement("div"):b;if(null==f)M.get_window().console.log("[lime.embed] ERROR: Cannot find target element: "+u.string(b));else{null==c&&(c=0);null==d&&(d=0);b=wa.__applicationConfig.get(a);
var m={};wa.__copyMissingFields(m,b);if(null!=e){m.windows=[];e instanceof Array&&null==e.__enum__?m.windows=e:m.windows[0]=e;for(var h=0,q=m.windows.length;h<q;){var y=h++;y<b.windows.length&&wa.__copyMissingFields(m.windows[y],b.windows[y]);wa.__copyMissingFields(m.windows[y].parameters,b.windows[y].parameters);"string"==typeof e.background&&(y=L.replace(u.string(e.background),"#",""),-1<y.indexOf("0x")?e.background=u.parseInt(y):e.background=u.parseInt("0x"+y))}}C.field(m.windows[0],"rootPath")&&
(m.rootPath=C.field(m.windows[0],"rootPath"),C.deleteField(m.windows[0],"rootPath"));m.windows[0].element=f;m.windows[0].width=c;m.windows[0].height=d;wa.__applicationEntryPoint.get(a)(m)}}};wa.exit=function(a){};wa.getTimer=function(){return u["int"](M.get_window().performance.now())};wa.openURL=function(a,b){null==b&&(b="_blank");null!=a&&M.get_window().open(a,b)};wa.__copyMissingFields=function(a,b){if(null!=b&&null!=a)for(var c=0,d=C.fields(b);c<d.length;){var e=d[c];++c;C.hasField(a,e)||C.setField(a,
e,C.field(b,e))}};wa.__registerEntryPoint=function(a,b,c){null==wa.__applicationConfig&&(wa.__applicationConfig=new ea);null==wa.__applicationEntryPoint&&(wa.__applicationEntryPoint=new ea);wa.__applicationEntryPoint.set(a,b);wa.__applicationConfig.set(a,c)};wa.get_endianness=function(){if(null==wa.endianness){var a=new Ji(2),b=null!=a?new Hb(a,0):null;a=null!=a?new Uint16Array(a,0):null;b[0]=170;b[1]=187;wa.endianness=43707==a[0]?Te.BIG_ENDIAN:Te.LITTLE_ENDIAN}return wa.endianness};var Oi=function(a,
b){null==b&&(b=1);null==a&&(a=0);this.onRun=new nf;this.onError=new nf;this.onComplete=new nf;this.doWork=new nf;this.minThreads=a;this.maxThreads=b;this.currentThreads=0};k["lime.system.ThreadPool"]=Oi;Oi.__name__=["lime","system","ThreadPool"];Oi.prototype={currentThreads:null,doWork:null,maxThreads:null,minThreads:null,onComplete:null,onError:null,onRun:null,queue:function(a){this.runWork(a)},sendComplete:function(a){this.onComplete.dispatch(a)},sendError:function(a){this.onError.dispatch(a)},
runWork:function(a){this.onRun.dispatch(a);this.doWork.dispatch(a)},__class__:Oi};var bc=function(a){null!=a&&(this.name=a);null!=this.__fontPath&&this.__fromFile(this.__fontPath)};k["lime.text.Font"]=bc;bc.__name__=["lime","text","Font"];bc.fromFile=function(a){if(null==a)return null;var b=new bc;b.__fromFile(a);return b};bc.loadFromName=function(a){return(new bc).__loadFromName(a)};bc.__measureFontNode=function(a){var b=M.get_document().createElement("span");b.setAttribute("aria-hidden","true");
var c=M.get_document().createTextNode("BESbswy");b.appendChild(c);c=b.style;c.display="block";c.position="absolute";c.top="-9999px";c.left="-9999px";c.fontSize="300px";c.width="auto";c.height="auto";c.lineHeight="normal";c.margin="0";c.padding="0";c.fontVariant="normal";c.whiteSpace="nowrap";c.fontFamily=a;M.get_document().body.appendChild(b);return b};bc.prototype={name:null,__fontPath:null,__fromFile:function(a){this.__fontPath=a},__loadFromName:function(a){var b=this,c=new Ob;this.name=a;var d=
M.get_navigator().userAgent.toLowerCase();if(0<=d.indexOf(" safari/")&&0>d.indexOf(" chrome/")||!M.get_document().fonts||(Rb=M.get_document().fonts,!l(Rb,Rb.load))){var e=bc.__measureFontNode("'"+a+"', sans-serif"),f=bc.__measureFontNode("'"+a+"', serif"),m=e.offsetWidth,h=f.offsetWidth,q=-1,y=0,g,k;q=M.get_window().setInterval(function(){y+=1;g=e.offsetWidth==m?f.offsetWidth!=h:!0;k=3E3<=50*y;if(g||k)M.get_window().clearInterval(q),e.parentNode.removeChild(e),f.parentNode.removeChild(f),f=e=null,
k&&Pa.warn('Could not load web font "'+a+'"',{fileName:"Font.hx",lineNumber:509,className:"lime.text.Font",methodName:"__loadFromName"}),c.complete(b)},50)}else M.get_document().fonts.load("1em '"+a+"'").then(function(a){c.complete(b)},function(d){Pa.warn('Could not load web font "'+a+'"',{fileName:"Font.hx",lineNumber:473,className:"lime.text.Font",methodName:"__loadFromName"});c.complete(b)});return c.future},__class__:bc};var F={};k["lime.text._UTF8String.UTF8String_Impl_"]=F;F.__name__=["lime",
"text","_UTF8String","UTF8String_Impl_"];F.__properties__={get_length:"get_length"};F.charAt=function(a,b){return gd.uCharAt(a,b)};F.charCodeAt=function(a,b){return 0>b||b>=gd.uLength(a)?null:gd.uCharCodeAt(a,b)};F.indexOf=function(a,b,c){null==c&&(c=0);return gd.uIndexOf(a,b,c)};F.substr=function(a,b,c){return Gf.sub(a,b,c)};F.substring=function(a,b,c){return gd.uSubstring(a,b,c)};F.equals=function(a,b){return null==a||null==b?a==b:0==gd.uCompare(a,b)};F.get_length=function(a){return null==a?0:a.length};
var dh=function(){};k["lime.text.unifill.Exception"]=dh;dh.__name__=["lime","text","unifill","Exception"];dh.prototype={__class__:dh};var Ue=function(a){this.index=a};k["lime.text.unifill.InvalidCodeUnitSequence"]=Ue;Ue.__name__=["lime","text","unifill","InvalidCodeUnitSequence"];Ue.__super__=dh;Ue.prototype=w(dh.prototype,{index:null,toString:function(){return"InvalidCodeUnitSequence(index: "+this.index+")"},__class__:Ue});var Jb=function(){};k["lime.text.unifill.InternalEncoding"]=Jb;Jb.__name__=
["lime","text","unifill","InternalEncoding"];Jb.codePointAt=function(a,b){return eh.codePointAt(a,b)};Jb.charAt=function(a,b){var c=L.fastCodeAt(a,b);return P.substr(a,b,Ve.code_point_width(c))};Jb.codePointCount=function(a,b,c){return eh.codePointCount(a,b,c)};Jb.codePointWidthAt=function(a,b){a=L.fastCodeAt(a,b);return Ve.code_point_width(a)};Jb.offsetByCodePoints=function(a,b,c){if(0<=c){for(var d=a.length,e=0;e<c&&b<d;){var f=L.fastCodeAt(a,b);b+=Ve.code_point_width(f);++e}return b}for(d=0;d<
-c&&0<b;)b-=Ve.find_prev_code_point(function(a){return function(b){return L.fastCodeAt(a[0],b)}}([a]),b),++d;return b};var fh=function(a,b,c){this.i=0;this.string=a;this.index=b;this.endIndex=c};k["lime.text.unifill.InternalEncodingIter"]=fh;fh.__name__=["lime","text","unifill","InternalEncodingIter"];fh.prototype={string:null,index:null,endIndex:null,hasNext:function(){return this.index<this.endIndex},i:null,next:function(){this.i=this.index;this.index+=Jb.codePointWidthAt(this.string,this.index);
return this.i},__class__:fh};var ze=function(){};k["lime.text.unifill.Unicode"]=ze;ze.__name__=["lime","text","unifill","Unicode"];ze.decodeSurrogate=function(a,b){return a-55232<<10|b&1023};ze.isHighSurrogate=function(a){return 55296<=a?56319>=a:!1};ze.isLowSurrogate=function(a){return 56320<=a?57343>=a:!1};var gd=function(){};k["lime.text.unifill.Unifill"]=gd;gd.__name__=["lime","text","unifill","Unifill"];gd.uLength=function(a){return Jb.codePointCount(a,0,a.length)};gd.uCharAt=function(a,b){b=
Jb.offsetByCodePoints(a,0,b);return Jb.charAt(a,b)};gd.uCharCodeAt=function(a,b){b=Jb.offsetByCodePoints(a,0,b);return Jb.codePointAt(a,b)};gd.uIndexOf=function(a,b,c){null==c&&(c=0);b=a.indexOf(b,Jb.offsetByCodePoints(a,0,c));return 0<=b?Jb.codePointCount(a,0,b):-1};gd.uSubstring=function(a,b,c){b=0>b?0:Jb.offsetByCodePoints(a,0,b);c=null==c?a.length:0>c?0:Jb.offsetByCodePoints(a,0,c);return a.substring(b,c)};gd.uCompare=function(a,b){for(var c=new fh(a,0,a.length),d=new fh(b,0,b.length);c.hasNext()&&
d.hasNext();){var e=Jb.codePointAt(a,c.next()),f=Jb.codePointAt(b,d.next());if(e<f)return-1;if(e>f)return 1}return d.hasNext()?-1:c.hasNext()?1:0};var eh={};k["lime.text.unifill._Utf16.Utf16_Impl_"]=eh;eh.__name__=["lime","text","unifill","_Utf16","Utf16_Impl_"];eh.codePointAt=function(a,b){return Ve.decode_code_point(a.length,function(b){return L.fastCodeAt(a,b)},b)};eh.codePointCount=function(a,b,c){for(var d=0;b<c;){var e=L.fastCodeAt(a,b);b+=Ve.code_point_width(e);++d}return d};var Ve=function(){};
k["lime.text.unifill._Utf16.Utf16Impl"]=Ve;Ve.__name__=["lime","text","unifill","_Utf16","Utf16Impl"];Ve.code_point_width=function(a){return ze.isHighSurrogate(a)?2:1};Ve.find_prev_code_point=function(a,b){a=a(b-1);return ze.isLowSurrogate(a)?2:1};Ve.decode_code_point=function(a,b,c){if(0>c||a<=c)throw new K(new Ue(c));var d=b(c);if(ze.isHighSurrogate(d)){if(0>c+1||a<=c+1)throw new K(new Ue(c));a=b(c+1);if(ze.isLowSurrogate(a))return ze.decodeSurrogate(d,a);throw new K(new Ue(c));}if(ze.isLowSurrogate(d))throw new K(new Ue(c));
return d};var tb=function(a){this.onDisconnect=new ub;this.onButtonUp=new Zg;this.onButtonDown=new Zg;this.onAxisMove=new Ui;this.id=a;this.connected=!0};k["lime.ui.Gamepad"]=tb;tb.__name__=["lime","ui","Gamepad"];tb.__connect=function(a){if(!tb.devices.exists(a)){var b=new tb(a);tb.devices.set(a,b);tb.onConnect.dispatch(b)}};tb.__disconnect=function(a){var b=tb.devices.get(a);null!=b&&(b.connected=!1);tb.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};tb.prototype={connected:null,id:null,onAxisMove:null,
onButtonDown:null,onButtonUp:null,onDisconnect:null,get_guid:function(){return fb.__getDeviceData()[this.id].id},get_name:function(){return fb.__getDeviceData()[this.id].id},__class__:tb,__properties__:{get_name:"get_name",get_guid:"get_guid"}};var fb=function(a){this.onTrackballMove=new Pi;this.onHatMove=new Ri;this.onDisconnect=new ub;this.onButtonUp=new Of;this.onButtonDown=new Of;this.onAxisMove=new Qi;this.id=a;this.connected=!0};k["lime.ui.Joystick"]=fb;fb.__name__=["lime","ui","Joystick"];
fb.__connect=function(a){if(!fb.devices.exists(a)){var b=new fb(a);fb.devices.set(a,b);fb.onConnect.dispatch(b)}};fb.__disconnect=function(a){var b=fb.devices.get(a);null!=b&&(b.connected=!1);fb.devices.remove(a);null!=b&&b.onDisconnect.dispatch()};fb.__getDeviceData=function(){return navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null};fb.prototype={connected:null,id:null,onAxisMove:null,onButtonDown:null,onButtonUp:null,onDisconnect:null,
onHatMove:null,onTrackballMove:null,__class__:fb};var Da={};k["lime.ui._KeyModifier.KeyModifier_Impl_"]=Da;Da.__name__=["lime","ui","_KeyModifier","KeyModifier_Impl_"];Da.__properties__={get_shiftKey:"get_shiftKey",get_metaKey:"get_metaKey",get_ctrlKey:"get_ctrlKey",get_altKey:"get_altKey"};Da.get_altKey=function(a){return 0>=(a&256)?0<(a&512):!0};Da.get_ctrlKey=function(a){return 0>=(a&64)?0<(a&128):!0};Da.get_metaKey=function(a){return 0>=(a&1024)?0<(a&2048):!0};Da.get_shiftKey=function(a){return 0>=
(a&1)?0<(a&2):!0};var gh=function(){};k["lime.ui.Mouse"]=gh;gh.__name__=["lime","ui","Mouse"];gh.__properties__={set_cursor:"set_cursor"};gh.set_cursor=function(a){return lf.set_cursor(a)};var T=k["lime.ui.MouseCursor"]={__ename__:["lime","ui","MouseCursor"],__constructs__:"ARROW CROSSHAIR DEFAULT MOVE POINTER RESIZE_NESW RESIZE_NS RESIZE_NWSE RESIZE_WE TEXT WAIT WAIT_ARROW CUSTOM".split(" ")};T.ARROW=["ARROW",0];T.ARROW.toString=I;T.ARROW.__enum__=T;T.CROSSHAIR=["CROSSHAIR",1];T.CROSSHAIR.toString=
I;T.CROSSHAIR.__enum__=T;T.DEFAULT=["DEFAULT",2];T.DEFAULT.toString=I;T.DEFAULT.__enum__=T;T.MOVE=["MOVE",3];T.MOVE.toString=I;T.MOVE.__enum__=T;T.POINTER=["POINTER",4];T.POINTER.toString=I;T.POINTER.__enum__=T;T.RESIZE_NESW=["RESIZE_NESW",5];T.RESIZE_NESW.toString=I;T.RESIZE_NESW.__enum__=T;T.RESIZE_NS=["RESIZE_NS",6];T.RESIZE_NS.toString=I;T.RESIZE_NS.__enum__=T;T.RESIZE_NWSE=["RESIZE_NWSE",7];T.RESIZE_NWSE.toString=I;T.RESIZE_NWSE.__enum__=T;T.RESIZE_WE=["RESIZE_WE",8];T.RESIZE_WE.toString=I;T.RESIZE_WE.__enum__=
T;T.TEXT=["TEXT",9];T.TEXT.toString=I;T.TEXT.__enum__=T;T.WAIT=["WAIT",10];T.WAIT.toString=I;T.WAIT.__enum__=T;T.WAIT_ARROW=["WAIT_ARROW",11];T.WAIT_ARROW.toString=I;T.WAIT_ARROW.__enum__=T;T.CUSTOM=["CUSTOM",12];T.CUSTOM.toString=I;T.CUSTOM.__enum__=T;var gb=function(a,b,c,d,e,f,m){this.x=a;this.y=b;this.id=c;this.dx=d;this.dy=e;this.pressure=f;this.device=m};k["lime.ui.Touch"]=gb;gb.__name__=["lime","ui","Touch"];gb.prototype={device:null,dx:null,dy:null,id:null,pressure:null,x:null,y:null,__class__:gb};
var Ae=function(a){this.onTextInput=new Yg;this.onTextEdit=new Si;this.onRestore=new ub;this.onResize=new Wg;this.onMove=new mf;this.onMouseWheel=new mf;this.onMouseUp=new Xg;this.onMouseMoveRelative=new mf;this.onMouseMove=new mf;this.onMouseDown=new Xg;this.onMinimize=new ub;this.onLeave=new ub;this.onKeyUp=new $g;this.onKeyDown=new $g;this.onFullscreen=new ub;this.onFocusOut=new ub;this.onFocusIn=new ub;this.onEnter=new ub;this.onDropFile=new Yg;this.onDeactivate=new ub;this.onCreate=new ub;this.onClose=
new ub;this.onActivate=new ub;this.config=a;this.__height=this.__width=0;this.__fullscreen=!1;this.__scale=1;this.__y=this.__x=0;this.__title="";this.id=-1;null!=a&&(C.hasField(a,"width")&&(this.__width=a.width),C.hasField(a,"height")&&(this.__height=a.height),C.hasField(a,"x")&&(this.__x=a.x),C.hasField(a,"y")&&(this.__y=a.y),C.hasField(a,"borderless")&&(this.__borderless=a.borderless),C.hasField(a,"resizable")&&(this.__resizable=a.resizable),C.hasField(a,"title")&&(this.__title=a.title));this.backend=
new fa(this)};k["lime.ui.Window"]=Ae;Ae.__name__=["lime","ui","Window"];Ae.prototype={application:null,config:null,id:null,onActivate:null,onClose:null,onCreate:null,onDeactivate:null,onDropFile:null,onEnter:null,onFocusIn:null,onFocusOut:null,onFullscreen:null,onKeyDown:null,onKeyUp:null,onLeave:null,onMinimize:null,onMouseDown:null,onMouseMove:null,onMouseMoveRelative:null,onMouseUp:null,onMouseWheel:null,onMove:null,onResize:null,onRestore:null,onTextEdit:null,onTextInput:null,renderer:null,stage:null,
backend:null,__borderless:null,__fullscreen:null,__height:null,__resizable:null,__scale:null,__title:null,__width:null,__x:null,__y:null,close:function(){this.backend.close()},create:function(a){this.application=a;this.backend.create(a);null!=this.renderer&&this.renderer.create()},resize:function(a,b){this.backend.resize(a,b);this.__width=a;this.__height=b},set_enableTextEvents:function(a){return this.backend.setEnableTextEvents(a)},get_fullscreen:function(){return this.__fullscreen},get_height:function(){return this.__height},
set_height:function(a){this.resize(this.__width,a);return this.__height},get_scale:function(){return this.__scale},get_width:function(){return this.__width},set_width:function(a){this.resize(a,this.__height);return this.__width},__class__:Ae,__properties__:{get_scale:"get_scale",set_width:"set_width",get_width:"get_width",set_height:"set_height",get_height:"get_height",get_fullscreen:"get_fullscreen",set_enableTextEvents:"set_enableTextEvents"}};var $i=function(){this.enabled=!0;this.audio=new ea;
this.font=new ea;this.image=new ea;this.version=461058};k["lime.utils.AssetCache"]=$i;$i.__name__=["lime","utils","AssetCache"];$i.prototype={audio:null,enabled:null,image:null,font:null,version:null,set:function(a,b,c){switch(b){case "FONT":this.font.set(a,c);break;case "IMAGE":if(!u.is(c,ja))throw new K("Cannot cache non-Image asset: "+u.string(c)+" as Image");this.image.set(a,c);break;case "MUSIC":case "SOUND":if(!u.is(c,vb))throw new K("Cannot cache non-AudioBuffer asset: "+u.string(c)+" as AudioBuffer");
this.audio.set(a,c);break;default:throw new K(b+" assets are not cachable");}},clear:function(a){if(null==a)this.audio=new ea,this.font=new ea,this.image=new ea;else{for(var b=this.audio.keys();b.hasNext();){var c=b.next();L.startsWith(c,a)&&this.audio.remove(c)}for(b=this.font.keys();b.hasNext();)c=b.next(),L.startsWith(c,a)&&this.font.remove(c);for(b=this.image.keys();b.hasNext();)c=b.next(),L.startsWith(c,a)&&this.image.remove(c)}},__class__:$i};var Yc=function(){this.types=new ea;this.sizes=new ea;
this.preload=new ea;this.paths=new ea;this.pathGroups=new ea;this.classTypes=new ea;this.cachedText=new ea;this.cachedImages=new ea;this.cachedFonts=new ea;this.cachedBytes=new ea;this.cachedAudioBuffers=new ea;this.onChange=new ub;this.bytesTotal=this.bytesLoaded=0};k["lime.utils.AssetLibrary"]=Yc;Yc.__name__=["lime","utils","AssetLibrary"];Yc.fromManifest=function(a){if(null==a)return null;if(null==a.libraryType)var b=new Yc;else if(b=Q.resolveClass(a.libraryType),null!=b)b=Q.createInstance(b,a.libraryArgs);
else return Pa.warn("Could not find library type: "+a.libraryType,{fileName:"AssetLibrary.hx",lineNumber:138,className:"lime.utils.AssetLibrary",methodName:"fromManifest"}),null;b.__fromManifest(a);return b};Yc.prototype={onChange:null,assetsLoaded:null,assetsTotal:null,bytesLoaded:null,bytesLoadedCache:null,bytesTotal:null,cachedAudioBuffers:null,cachedBytes:null,cachedFonts:null,cachedImages:null,cachedText:null,classTypes:null,loaded:null,pathGroups:null,paths:null,preload:null,promise:null,sizes:null,
types:null,exists:function(a,b){b=null!=b?n.__cast(b,String):null;a=this.types.get(a);return null==a||a!=b&&("SOUND"!=b&&"MUSIC"!=b||"MUSIC"!=a&&"SOUND"!=a)&&"BINARY"!=b&&null!=b&&("BINARY"!=a||"TEXT"!=b)?!1:!0},getAsset:function(a,b){switch(b){case "BINARY":return this.getBytes(a);case "FONT":return this.getFont(a);case "IMAGE":return this.getImage(a);case "MUSIC":case "SOUND":return this.getAudioBuffer(a);case "TEMPLATE":throw new K("Not sure how to get template: "+a);case "TEXT":return this.getText(a);
default:throw new K("Unknown asset type: "+b);}},getAudioBuffer:function(a){return this.cachedAudioBuffers.exists(a)?this.cachedAudioBuffers.get(a):this.classTypes.exists(a)?vb.fromBytes(n.__cast(Q.createInstance(this.classTypes.get(a),[]),ya)):vb.fromFile(this.paths.get(a))},getBytes:function(a){if(this.cachedBytes.exists(a))return this.cachedBytes.get(a);if(this.cachedText.exists(a)){var b=Rc.ofString(this.cachedText.get(a));this.cachedBytes.set(a,b);return b}return this.classTypes.exists(a)?n.__cast(Q.createInstance(this.classTypes.get(a),
[]),ya):Rc.fromFile(this.paths.get(a))},getFont:function(a){return this.cachedFonts.exists(a)?this.cachedFonts.get(a):this.classTypes.exists(a)?n.__cast(Q.createInstance(this.classTypes.get(a),[]),bc):bc.fromFile(this.paths.get(a))},getImage:function(a){return this.cachedImages.exists(a)?this.cachedImages.get(a):this.classTypes.exists(a)?n.__cast(Q.createInstance(this.classTypes.get(a),[]),ja):ja.fromFile(this.paths.get(a))},getText:function(a){if(this.cachedText.exists(a))return this.cachedText.get(a);
a=this.getBytes(a);return null==a?null:a.getString(0,a.length)},isLocal:function(a,b){if(this.classTypes.exists(a))return!0;switch(null!=b?n.__cast(b,String):null){case "IMAGE":return this.cachedImages.exists(a);case "MUSIC":case "SOUND":return this.cachedAudioBuffers.exists(a);default:return this.cachedBytes.exists(a)?!0:this.cachedText.exists(a)}},load:function(){if(this.loaded)return Sa.withValue(this);if(null==this.promise){this.promise=new Ob;this.bytesLoadedCache=new ea;this.assetsLoaded=0;
this.assetsTotal=1;for(var a=this.preload.keys();a.hasNext();){var b=a.next();if(this.preload.get(b)){Pa.verbose("Preloading asset: "+b+" ["+this.types.get(b)+"]",{fileName:"AssetLibrary.hx",lineNumber:434,className:"lime.utils.AssetLibrary",methodName:"load"});var c=this.types.get(b);if(null!=c)switch(c){case "BINARY":this.assetsTotal++;c=this.loadBytes(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[l(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],
c)}}([b],[l(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[l(this,this.loadBytes_onComplete)]));break;case "FONT":this.assetsTotal++;c=this.loadFont(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[l(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[l(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[l(this,this.loadFont_onComplete)]));break;case "IMAGE":this.assetsTotal++;
c=this.loadImage(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[l(this,this.load_onProgress)]));c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[l(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[l(this,this.loadImage_onComplete)]));break;case "MUSIC":case "SOUND":this.assetsTotal++;c=this.loadAudioBuffer(b);c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[l(this,this.load_onProgress)]));c.onError(function(a,
b){return function(c){b[0](a[0],c)}}([b],[l(this,this.load_onError)]));c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[l(this,this.loadAudioBuffer_onComplete)]));break;case "TEXT":this.assetsTotal++,c=this.loadText(b),c.onProgress(function(a,b){return function(c,d){b[0](a[0],c,d)}}([b],[l(this,this.load_onProgress)])),c.onError(function(a,b){return function(c){b[0](a[0],c)}}([b],[l(this,this.load_onError)])),c.onComplete(function(a,b){return function(c){b[0](a[0],c)}}([b],[l(this,
this.loadText_onComplete)]))}}}this.__assetLoaded(null)}return this.promise.future},loadAudioBuffer:function(a){return this.cachedAudioBuffers.exists(a)?Sa.withValue(this.cachedAudioBuffers.get(a)):this.classTypes.exists(a)?Sa.withValue(Q.createInstance(this.classTypes.get(a),[])):this.pathGroups.exists(a)?vb.loadFromFiles(this.pathGroups.get(a)):vb.loadFromFile(this.paths.get(a))},loadBytes:function(a){return this.cachedBytes.exists(a)?Sa.withValue(this.cachedBytes.get(a)):this.classTypes.exists(a)?
Sa.withValue(Q.createInstance(this.classTypes.get(a),[])):Rc.loadFromFile(this.paths.get(a))},loadFont:function(a){return this.cachedFonts.exists(a)?Sa.withValue(this.cachedFonts.get(a)):this.classTypes.exists(a)?(a=Q.createInstance(this.classTypes.get(a),[]),bc.loadFromName(a.name)):bc.loadFromName(this.paths.get(a))},loadImage:function(a){return this.cachedImages.exists(a)?Sa.withValue(this.cachedImages.get(a)):this.classTypes.exists(a)?Sa.withValue(Q.createInstance(this.classTypes.get(a),[])):
ja.loadFromFile(this.paths.get(a))},loadText:function(a){if(this.cachedText.exists(a))return Sa.withValue(this.cachedText.get(a));if(this.cachedBytes.exists(a)||this.classTypes.exists(a)){var b=this.getBytes(a);if(null==b)return Sa.withValue(null);b=b.getString(0,b.length);this.cachedText.set(a,b);return Sa.withValue(b)}return(new Hf).load(this.paths.get(a))},unload:function(){},__assetLoaded:function(a){this.assetsLoaded++;null!=a&&Pa.verbose("Loaded asset: "+a+" ["+this.types.get(a)+"] ("+(this.assetsLoaded-
1)+"/"+(this.assetsTotal-1)+")",{fileName:"AssetLibrary.hx",lineNumber:680,className:"lime.utils.AssetLibrary",methodName:"__assetLoaded"});if(null!=a){var b=this.sizes.get(a);if(this.bytesLoadedCache.exists(a)){var c=this.bytesLoadedCache.get(a);c<b&&(this.bytesLoaded+=b-c)}else this.bytesLoaded+=b;this.bytesLoadedCache.set(a,b)}this.assetsLoaded<this.assetsTotal?this.promise.progress(this.bytesLoaded,this.bytesTotal):(this.loaded=!0,this.promise.progress(this.bytesTotal,this.bytesTotal),this.promise.complete(this))},
__cacheBreak:function(a){return a=-1<a.indexOf("?")?a+("&"+aa.cache.version):a+("?"+aa.cache.version)},__fromManifest:function(a){var b=2<=a.version,c=a.rootPath;null==c&&(c="");""!=c&&(c+="/");for(var d=0,e=a.assets;d<e.length;){var f=e[d];++d;var m=b?f.size:100;var h=f.id;C.hasField(f,"path")&&this.paths.set(h,this.__cacheBreak(c+u.string(C.field(f,"path"))));if(C.hasField(f,"pathGroup")){var q=C.field(f,"pathGroup");for(var y=0,g=q.length;y<g;){var k=y++;q[k]=this.__cacheBreak(c+q[k])}this.pathGroups.set(h,
q)}this.sizes.set(h,m);this.types.set(h,f.type);C.hasField(f,"preload")&&this.preload.set(h,C.field(f,"preload"));C.hasField(f,"className")&&(m=Q.resolveClass(C.field(f,"className")),this.classTypes.set(h,m))}b=this.bytesTotal=0;for(a=a.assets;b<a.length;)h=a[b],++b,h=h.id,this.preload.exists(h)&&this.preload.get(h)&&(this.bytesTotal+=this.sizes.get(h))},loadAudioBuffer_onComplete:function(a,b){this.cachedAudioBuffers.set(a,b);if(this.pathGroups.exists(a))for(var c=this.pathGroups.get(a),d=this.pathGroups.keys();d.hasNext();){var e=
d.next();if(e!=a)for(var f=0;f<c.length;){var m=c[f];++f;if(-1<this.pathGroups.get(e).indexOf(m)){this.cachedAudioBuffers.set(e,b);break}}}this.__assetLoaded(a)},loadBytes_onComplete:function(a,b){this.cachedBytes.set(a,b);this.__assetLoaded(a)},loadFont_onComplete:function(a,b){this.cachedFonts.set(a,b);this.__assetLoaded(a)},loadImage_onComplete:function(a,b){this.cachedImages.set(a,b);this.__assetLoaded(a)},loadText_onComplete:function(a,b){this.cachedText.set(a,b);this.__assetLoaded(a)},load_onError:function(a,
b){null!=b&&""!=b?this.promise.error('Error loading asset "'+a+'": '+u.string(b)):this.promise.error('Error loading asset "'+a+'"')},load_onProgress:function(a,b,c){if(0<b){var d=this.sizes.get(a);0<c?(b/=c,1<b&&(b=1),b=Math.floor(b*d)):b>d&&(b=d);this.bytesLoadedCache.exists(a)?(d=this.bytesLoadedCache.get(a),b!=d&&(this.bytesLoaded+=b-d)):this.bytesLoaded+=b;this.bytesLoadedCache.set(a,b);this.promise.progress(this.bytesLoaded,this.bytesTotal)}},__class__:Yc};var Ua=function(){this.assets=[];this.libraryArgs=
[];this.version=2};k["lime.utils.AssetManifest"]=Ua;Ua.__name__=["lime","utils","AssetManifest"];Ua.fromBytes=function(a,b){return null!=a?Ua.parse(a.getString(0,a.length),b):null};Ua.fromFile=function(a,b){a=Ua.__resolvePath(a);b=Ua.__resolveRootPath(b,a);return null==a?null:Ua.fromBytes(Rc.fromFile(a),b)};Ua.loadFromBytes=function(a,b){return Sa.withValue(Ua.fromBytes(a,b))};Ua.loadFromFile=function(a,b){a=Ua.__resolvePath(a);b=Ua.__resolveRootPath(b,a);return null==a?null:Rc.loadFromFile(a).then(function(a){return Sa.withValue(Ua.fromBytes(a,
b))})};Ua.parse=function(a,b){if(null==a||""==a)return null;a=JSON.parse(a);var c=new Ua;c.name=a.name;c.libraryType=a.libraryType;c.libraryArgs=a.libraryArgs;c.assets=Bb.run(a.assets);null!=b&&(c.rootPath=b);return c};Ua.__resolvePath=function(a){if(null==a)return null;var b=a.indexOf("?");var c=-1<b?P.substr(a,0,b):a;for(L.replace(c,"\\","/");L.endsWith(c,"/");)c=P.substr(c,0,c.length-1);return L.endsWith(c,".bundle")?-1<b?c+"/library.json"+P.substr(a,b,null):c+"/library.json":a};Ua.__resolveRootPath=
function(a,b){if(null!=a)return a;a=b.indexOf("?");a=-1<a?P.substr(b,0,a):b;for(L.replace(a,"\\","/");L.endsWith(a,"/");){if("/"==a)return a;a=P.substr(a,0,a.length-1)}return L.endsWith(a,".bundle")?a:Vf.directory(a)};Ua.prototype={assets:null,libraryArgs:null,libraryType:null,name:null,rootPath:null,version:null,__class__:Ua};var aa=function(){};k["lime.utils.Assets"]=aa;aa.__name__=["lime","utils","Assets"];aa.exists=function(a,b){null==b&&(b="BINARY");a=new hh(a);return null!=a.library?a.exists(b):
!1};aa.getAsset=function(a,b,c){if(c&&aa.cache.enabled)switch(b){case "BINARY":case "TEXT":c=!1;break;case "FONT":var d=aa.cache.font.get(a);if(null!=d)return d;break;case "IMAGE":d=aa.cache.image.get(a);if(aa.isValidImage(d))return d;break;case "MUSIC":case "SOUND":d=aa.cache.audio.get(a);if(aa.isValidAudio(d))return d;break;case "TEMPLATE":throw new K("Not sure how to get template: "+a);default:return null}d=new hh(a);if(null!=d.library)if(d.exists(b)){if(d.isLocal(b))return d=d.library.getAsset(d.symbolName,
b),c&&aa.cache.enabled&&aa.cache.set(a,b,d),d;Pa.error(b+' asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:160,className:"lime.utils.Assets",methodName:"getAsset"})}else Pa.error("There is no "+b+' asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:166,className:"lime.utils.Assets",methodName:"getAsset"});else Pa.error(aa.__libraryNotFound(d.libraryName),{fileName:"Assets.hx",lineNumber:172,className:"lime.utils.Assets",methodName:"getAsset"});return null};
aa.getImage=function(a,b){null==b&&(b=!0);return aa.getAsset(a,"IMAGE",b)};aa.getLibrary=function(a){if(null==a||""==a)a="default";return aa.libraries.get(a)};aa.getText=function(a){return aa.getAsset(a,"TEXT",!1)};aa.isValidAudio=function(a){return null!=a};aa.isValidImage=function(a){return null!=a?null!=a.buffer:!1};aa.loadLibrary=function(a){var b=new Ob,c=aa.getLibrary(a);if(null!=c)return c.load();c=a;var d=null;aa.libraryPaths.exists(a)?(c=aa.libraryPaths.get(a),d=aa.defaultRootPath):L.endsWith(c,
".bundle")&&(c+="/library.json");Ua.loadFromFile(c,d).onComplete(function(c){null==c?b.error('Cannot parse asset manifest for library "'+a+'"'):(c=Yc.fromManifest(c),null==c?b.error('Cannot open library "'+a+'"'):(aa.libraries.set(a,c),c.onChange.add((Rb=aa.onChange,l(Rb,Rb.dispatch))),c=c.load(),b.completeWith(c)))}).onError(function(c){b.error('There is no asset library with an ID of "'+a+'"')});return b.future};aa.registerLibrary=function(a,b){if(aa.libraries.exists(a)){if(aa.libraries.get(a)==
b)return;aa.unloadLibrary(a)}null!=b&&b.onChange.add(aa.library_onChange);aa.libraries.set(a,b)};aa.unloadLibrary=function(a){var b=aa.libraries.get(a);null!=b&&(aa.cache.clear(a+":"),b.onChange.remove(aa.library_onChange),b.unload());aa.libraries.remove(a)};aa.__libraryNotFound=function(a){if(null==a||""==a)a="default";return null==dc.current||null==dc.current.get_preloader()||dc.current.get_preloader().complete?'There is no asset library named "'+a+'"':'There is no asset library named "'+a+'", or it is not yet preloaded'};
aa.library_onChange=function(){aa.cache.clear();aa.onChange.dispatch()};var hh=function(a){var b=a.indexOf(":");this.libraryName=a.substring(0,b);this.symbolName=a.substring(b+1);this.library=aa.getLibrary(this.libraryName)};k["lime.utils._Assets.LibrarySymbol"]=hh;hh.__name__=["lime","utils","_Assets","LibrarySymbol"];hh.prototype={library:null,libraryName:null,symbolName:null,isLocal:function(a){return this.library.isLocal(this.symbolName,a)},exists:function(a){return this.library.exists(this.symbolName,
a)},__class__:hh};var Rc={};k["lime.utils._Bytes.Bytes_Impl_"]=Rc;Rc.__name__=["lime","utils","_Bytes","Bytes_Impl_"];Rc._new=function(a,b){return new ya(b)};Rc.fromBytes=function(a){return null==a?null:Rc._new(a.length,a.getData())};Rc.fromFile=function(a){return null};Rc.loadFromFile=function(a){return(new bh).load(a)};Rc.ofString=function(a){a=ya.ofString(a);return Rc._new(a.length,a.getData())};var Z={};k["lime.utils._DataPointer.DataPointer_Impl_"]=Z;Z.__name__=["lime","utils","_DataPointer",
"DataPointer_Impl_"];Z._new=function(a){return a};Z.fromInt=function(a){return Z._new(new ih(null,null,a))};Z.fromArrayBufferView=function(a){return Z._new(new ih(a))};Z.toBufferView=function(a,b){if(!a)return null;switch(Q.enumIndex(a.type)){case 0:null==b&&(b=a.buffer.byteLength);var c=a.buffer;a=a.offset;return null!=c?null==b?new Hb(c,a):new Hb(c,a,b):null;case 1:null==b&&(b=a.bufferView.byteLength);if(0==a.offset&&b==a.bufferView.byteLength)return a.bufferView;c=a.bufferView.buffer;a=a.bufferView.byteOffset+
a.offset;return null!=c?null==b?new Hb(c,a):new Hb(c,a,b):null;default:return null}};Z.toFloat32Array=function(a,b){if(!a)return null;switch(Q.enumIndex(a.type)){case 0:null==b&&(b=a.buffer.byteLength);var c=a.buffer;a=a.offset;b=u["int"](b/4);return null!=c?null==b?new Zc(c,a):new Zc(c,a,b):null;case 1:null==b&&(b=a.bufferView.byteLength);if(0==a.offset&&b==a.bufferView.byteLength&&a.bufferView.constructor==Zc)return a.bufferView;c=a.bufferView.buffer;a=a.bufferView.byteOffset+a.offset;b=u["int"](b/
4);return null!=c?null==b?new Zc(c,a):new Zc(c,a,b):null;default:return null}};Z.toValue=function(a){return a?"number"===typeof a?a:2==Q.enumIndex(a.type)?a.offset:0:0};var ih=function(a,b,c){null==c&&(c=0);null!=a?(this.bufferView=a,this.type=Bc.BUFFER_VIEW):null!=b?(this.buffer=b,this.type=Bc.BUFFER):this.type=Bc.VALUE;this.offset=c};k["lime.utils.DataPointerObject"]=ih;ih.__name__=["lime","utils","DataPointerObject"];ih.prototype={buffer:null,bufferView:null,offset:null,type:null,__class__:ih};
var Bc=k["lime.utils.DataPointerObjectType"]={__ename__:["lime","utils","DataPointerObjectType"],__constructs__:["BUFFER","BUFFER_VIEW","VALUE"]};Bc.BUFFER=["BUFFER",0];Bc.BUFFER.toString=I;Bc.BUFFER.__enum__=Bc;Bc.BUFFER_VIEW=["BUFFER_VIEW",1];Bc.BUFFER_VIEW.toString=I;Bc.BUFFER_VIEW.__enum__=Bc;Bc.VALUE=["VALUE",2];Bc.VALUE.toString=I;Bc.VALUE.__enum__=Bc;var og=function(){};k["lime.utils.GLUtils"]=og;og.__name__=["lime","utils","GLUtils"];og.compileShader=function(a,b){var c=ra.createShader(b);
ra.shaderSource(c,a);ra.compileShader(c);if(0==ra.getShaderParameter(c,35713)){switch(b){case 35632:a="Error compiling fragment shader";break;case 35633:a="Error compiling vertex shader";break;default:a="Error compiling unknown shader type"}a+="\n"+ra.getShaderInfoLog(c);Pa.error(a,{fileName:"GLUtils.hx",lineNumber:35,className:"lime.utils.GLUtils",methodName:"compileShader"})}return c};og.createProgram=function(a,b){a=og.compileShader(a,35633);b=og.compileShader(b,35632);var c=ra.createProgram();
ra.attachShader(c,a);ra.attachShader(c,b);ra.linkProgram(c);0==ra.getProgramParameter(c,35714)&&Pa.error("Unable to initialize the shader program",{fileName:"GLUtils.hx",lineNumber:56,className:"lime.utils.GLUtils",methodName:"createProgram"});return c};var Pa=function(){};k["lime.utils.Log"]=Pa;Pa.__name__=["lime","utils","Log"];Pa.error=function(a,b){if(1<=Pa.level){a="["+b.className+"] ERROR: "+a;if(Pa.throwErrors)throw new K(a);console.error(a)}};Pa.println=function(a){console.log(a)};Pa.verbose=
function(a,b){5<=Pa.level&&Pa.println("["+b.className+"] "+a)};Pa.warn=function(a,b){2<=Pa.level&&console.warn("["+b.className+"] WARNING: "+a)};var aj=function(a,b,c){null!=a&&(this.create=a);null!=b&&(this.clean=b);null!=c&&this.set_size(c);this.__pool=new rb;this.inactiveObjects=this.activeObjects=0;this.__inactiveObject1=this.__inactiveObject0=null;this.__inactiveObjectList=new Db};k["lime.utils.ObjectPool_openfl_geom_Point"]=aj;aj.__name__=["lime","utils","ObjectPool_openfl_geom_Point"];aj.prototype=
{activeObjects:null,inactiveObjects:null,__inactiveObject0:null,__inactiveObject1:null,__inactiveObjectList:null,__pool:null,__size:null,clean:function(a){},create:function(){return null},get:function(){var a=null;if(0<this.inactiveObjects)a=this.__getInactive();else if(null==this.__size||this.activeObjects<this.__size)a=this.create(),null!=a&&(this.__pool.set(a,!0),this.activeObjects++);return a},release:function(a){this.activeObjects--;null==this.__size||this.activeObjects+this.inactiveObjects<
this.__size?(this.clean(a),this.__addInactive(a)):this.__pool.remove(a)},__addInactive:function(a){null==this.__inactiveObject0?this.__inactiveObject0=a:null==this.__inactiveObject1?this.__inactiveObject1=a:this.__inactiveObjectList.add(a);this.inactiveObjects++},__getInactive:function(){if(null!=this.__inactiveObject0){var a=this.__inactiveObject0;this.__inactiveObject0=null}else null!=this.__inactiveObject1?(a=this.__inactiveObject1,this.__inactiveObject1=null):(a=this.__inactiveObjectList.pop(),
0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop()));this.inactiveObjects--;this.activeObjects++;return a},__removeInactive:function(a){if(!(0>=a||0==this.inactiveObjects)&&(null!=this.__inactiveObject0&&(this.__pool.remove(this.__inactiveObject0),this.__inactiveObject0=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects&&(null!=this.__inactiveObject1&&(this.__pool.remove(this.__inactiveObject1),
this.__inactiveObject1=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects)))for(var b=this.__inactiveObjectList.iterator();b.hasNext();){var c=b.next();this.__pool.remove(c);this.__inactiveObjectList.remove(c);this.inactiveObjects--;--a;if(0==a||0==this.inactiveObjects)break}},set_size:function(a){if(null==a)this.__size=null;else{var b=this.inactiveObjects+this.activeObjects;this.__size=a;if(b>a)this.__removeInactive(b-a);else if(a>b)for(var c=0,d=a-b;c<d;)if(c++,b=this.create(),null!=
b)this.__pool.set(b,!1),this.__inactiveObjectList.add(b),this.inactiveObjects++;else break}return a},__class__:aj,__properties__:{set_size:"set_size"}};var bj=function(a,b,c){null!=a&&(this.create=a);null!=b&&(this.clean=b);null!=c&&this.set_size(c);this.__pool=new rb;this.inactiveObjects=this.activeObjects=0;this.__inactiveObject1=this.__inactiveObject0=null;this.__inactiveObjectList=new Db};k["lime.utils.ObjectPool_openfl_geom_Rectangle"]=bj;bj.__name__=["lime","utils","ObjectPool_openfl_geom_Rectangle"];
bj.prototype={activeObjects:null,inactiveObjects:null,__inactiveObject0:null,__inactiveObject1:null,__inactiveObjectList:null,__pool:null,__size:null,clean:function(a){},create:function(){return null},get:function(){var a=null;if(0<this.inactiveObjects)a=this.__getInactive();else if(null==this.__size||this.activeObjects<this.__size)a=this.create(),null!=a&&(this.__pool.set(a,!0),this.activeObjects++);return a},release:function(a){this.activeObjects--;null==this.__size||this.activeObjects+this.inactiveObjects<
this.__size?(this.clean(a),this.__addInactive(a)):this.__pool.remove(a)},__addInactive:function(a){null==this.__inactiveObject0?this.__inactiveObject0=a:null==this.__inactiveObject1?this.__inactiveObject1=a:this.__inactiveObjectList.add(a);this.inactiveObjects++},__getInactive:function(){if(null!=this.__inactiveObject0){var a=this.__inactiveObject0;this.__inactiveObject0=null}else null!=this.__inactiveObject1?(a=this.__inactiveObject1,this.__inactiveObject1=null):(a=this.__inactiveObjectList.pop(),
0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop()));this.inactiveObjects--;this.activeObjects++;return a},__removeInactive:function(a){if(!(0>=a||0==this.inactiveObjects)&&(null!=this.__inactiveObject0&&(this.__pool.remove(this.__inactiveObject0),this.__inactiveObject0=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects&&(null!=this.__inactiveObject1&&(this.__pool.remove(this.__inactiveObject1),
this.__inactiveObject1=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects)))for(var b=this.__inactiveObjectList.iterator();b.hasNext();){var c=b.next();this.__pool.remove(c);this.__inactiveObjectList.remove(c);this.inactiveObjects--;--a;if(0==a||0==this.inactiveObjects)break}},set_size:function(a){if(null==a)this.__size=null;else{var b=this.inactiveObjects+this.activeObjects;this.__size=a;if(b>a)this.__removeInactive(b-a);else if(a>b)for(var c=0,d=a-b;c<d;)if(c++,b=this.create(),null!=
b)this.__pool.set(b,!1),this.__inactiveObjectList.add(b),this.inactiveObjects++;else break}return a},__class__:bj,__properties__:{set_size:"set_size"}};var cj=function(a,b,c){null!=a&&(this.create=a);null!=b&&(this.clean=b);null!=c&&this.set_size(c);this.__pool=new rb;this.inactiveObjects=this.activeObjects=0;this.__inactiveObject1=this.__inactiveObject0=null;this.__inactiveObjectList=new Db};k["lime.utils.ObjectPool_openfl_utils_TouchData"]=cj;cj.__name__=["lime","utils","ObjectPool_openfl_utils_TouchData"];
cj.prototype={activeObjects:null,inactiveObjects:null,__inactiveObject0:null,__inactiveObject1:null,__inactiveObjectList:null,__pool:null,__size:null,clean:function(a){},create:function(){return null},get:function(){var a=null;if(0<this.inactiveObjects)a=this.__getInactive();else if(null==this.__size||this.activeObjects<this.__size)a=this.create(),null!=a&&(this.__pool.set(a,!0),this.activeObjects++);return a},release:function(a){this.activeObjects--;null==this.__size||this.activeObjects+this.inactiveObjects<
this.__size?(this.clean(a),this.__addInactive(a)):this.__pool.remove(a)},__addInactive:function(a){null==this.__inactiveObject0?this.__inactiveObject0=a:null==this.__inactiveObject1?this.__inactiveObject1=a:this.__inactiveObjectList.add(a);this.inactiveObjects++},__getInactive:function(){if(null!=this.__inactiveObject0){var a=this.__inactiveObject0;this.__inactiveObject0=null}else null!=this.__inactiveObject1?(a=this.__inactiveObject1,this.__inactiveObject1=null):(a=this.__inactiveObjectList.pop(),
0<this.__inactiveObjectList.length&&(this.__inactiveObject0=this.__inactiveObjectList.pop()),0<this.__inactiveObjectList.length&&(this.__inactiveObject1=this.__inactiveObjectList.pop()));this.inactiveObjects--;this.activeObjects++;return a},__removeInactive:function(a){if(!(0>=a||0==this.inactiveObjects)&&(null!=this.__inactiveObject0&&(this.__pool.remove(this.__inactiveObject0),this.__inactiveObject0=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects&&(null!=this.__inactiveObject1&&(this.__pool.remove(this.__inactiveObject1),
this.__inactiveObject1=null,this.inactiveObjects--,--a),0!=a&&0!=this.inactiveObjects)))for(var b=this.__inactiveObjectList.iterator();b.hasNext();){var c=b.next();this.__pool.remove(c);this.__inactiveObjectList.remove(c);this.inactiveObjects--;--a;if(0==a||0==this.inactiveObjects)break}},set_size:function(a){if(null==a)this.__size=null;else{var b=this.inactiveObjects+this.activeObjects;this.__size=a;if(b>a)this.__removeInactive(b-a);else if(a>b)for(var c=0,d=a-b;c<d;)if(c++,b=this.create(),null!=
b)this.__pool.set(b,!1),this.__inactiveObjectList.add(b),this.inactiveObjects++;else break}return a},__class__:cj,__properties__:{set_size:"set_size"}};var jh=function(){};k["motion.actuators.IGenericActuator"]=jh;jh.__name__=["motion","actuators","IGenericActuator"];jh.prototype={stop:null,__class__:jh};var Be=function(a,b,c){this._autoVisible=!0;this._delay=0;this._reflect=!1;this._repeat=0;this.special=this._snapping=this._smartRotation=this._reverse=!1;this.target=a;this.properties=c;this.duration=
b;this._ease=Ja.defaultEase};k["motion.actuators.GenericActuator"]=Be;Be.__name__=["motion","actuators","GenericActuator"];Be.__interfaces__=[jh];Be.prototype={duration:null,id:null,properties:null,target:null,_autoVisible:null,_delay:null,_ease:null,_onComplete:null,_onCompleteParams:null,_onRepeat:null,_onRepeatParams:null,_onUpdate:null,_onUpdateParams:null,_onResume:null,_onResumeParams:null,_onPause:null,_onPauseParams:null,_reflect:null,_repeat:null,_reverse:null,_smartRotation:null,_snapping:null,
special:null,apply:function(){for(var a=0,b=C.fields(this.properties);a<b.length;){var c=b[a];++a;C.hasField(this.target,c)?C.setField(this.target,c,C.field(this.properties,c)):C.setProperty(this.target,c,C.field(this.properties,c))}},autoVisible:function(a){null==a&&(a=!0);this._autoVisible=a;return this},callMethod:function(a,b){null==b&&(b=[]);return C.callMethod(a,a,b)},change:function(){null!=this._onUpdate&&this.callMethod(this._onUpdate,this._onUpdateParams)},complete:function(a){null==a&&
(a=!0);a&&(this.change(),null!=this._onComplete&&this.callMethod(this._onComplete,this._onCompleteParams));Ja.unload(this)},delay:function(a){this._delay=a;return this},ease:function(a){this._ease=a;return this},move:function(){},onComplete:function(a,b){this._onComplete=a;this._onCompleteParams=null==b?[]:b;0==this.duration&&this.complete();return this},onRepeat:function(a,b){this._onRepeat=a;this._onRepeatParams=null==b?[]:b;return this},onUpdate:function(a,b){this._onUpdate=a;this._onUpdateParams=
null==b?[]:b;return this},onPause:function(a,b){this._onPause=a;this._onPauseParams=null==b?[]:b;return this},onResume:function(a,b){this._onResume=a;this._onResumeParams=null==b?[]:b;return this},pause:function(){null!=this._onPause&&this.callMethod(this._onPause,this._onPauseParams)},reflect:function(a){null==a&&(a=!0);this._reflect=a;this.special=!0;return this},repeat:function(a){null==a&&(a=-1);this._repeat=a;return this},resume:function(){null!=this._onResume&&this.callMethod(this._onResume,
this._onResumeParams)},reverse:function(a){null==a&&(a=!0);this._reverse=a;this.special=!0;return this},smartRotation:function(a){null==a&&(a=!0);this._smartRotation=a;this.special=!0;return this},snapping:function(a){null==a&&(a=!0);this._snapping=a;this.special=!0;return this},stop:function(a,b,c){},__class__:Be};var Ka=function(a,b,c){this.active=!0;this.propertyDetails=[];this.toggleVisible=this.setVisible=this.initialized=this.cacheVisible=this.paused=this.sendChange=!1;this.startTime=H.getTimer()/
1E3;Be.call(this,a,b,c);Ka.addedEvent||(Ka.addedEvent=!0,H.current.stage.addEventListener("enterFrame",Ka.stage_onEnterFrame))};k["motion.actuators.SimpleActuator"]=Ka;Ka.__name__=["motion","actuators","SimpleActuator"];Ka.stage_onEnterFrame=function(a){a=H.getTimer()/1E3;for(var b,c=0,d=0,e=Ka.actuatorsLength;d<e;)d++,b=Ka.actuators[c],null!=b&&b.active?(a>=b.timeOffset&&b.update(a),++c):(Ka.actuators.splice(c,1),--Ka.actuatorsLength)};Ka.__super__=Be;Ka.prototype=w(Be.prototype,{timeOffset:null,
active:null,cacheVisible:null,detailsLength:null,initialized:null,paused:null,pauseTime:null,propertyDetails:null,sendChange:null,setVisible:null,startTime:null,toggleVisible:null,apply:function(){Be.prototype.apply.call(this);this.toggleVisible&&C.hasField(this.properties,"alpha")&&null!=this.getField(this.target,"visible")&&this.setField(this.target,"visible",0<C.field(this.properties,"alpha"))},autoVisible:function(a){null==a&&(a=!0);this._autoVisible=a;a||(this.toggleVisible=!1,this.setVisible&&
this.setField(this.target,"visible",this.cacheVisible));return this},delay:function(a){this._delay=a;this.timeOffset=this.startTime+a;return this},getField:function(a,b){return C.hasField(a,b)?C.field(a,b):C.getProperty(a,b)},initialize:function(){for(var a,b=0,c=C.fields(this.properties);b<c.length;){var d=c[b];++b;var e=!0;!C.hasField(this.target,d)||this.target.__properties__&&this.target.__properties__["set_"+d]?(e=!1,a=C.getProperty(this.target,d)):a=C.field(this.target,d);if("number"==typeof a){var f=
this.getField(this.properties,d);null==a&&(a=0);null==f&&(f=0);a=new $c(this.target,d,a,f-a,e);this.propertyDetails.push(a)}}this.detailsLength=this.propertyDetails.length;this.initialized=!0},move:function(){(this.toggleVisible=C.hasField(this.properties,"alpha")&&u.is(this.target,xa))&&0!=this.properties.alpha&&!this.getField(this.target,"visible")&&(this.setVisible=!0,this.cacheVisible=this.getField(this.target,"visible"),this.setField(this.target,"visible",!0));this.timeOffset=this.startTime;
Ka.actuators.push(this);++Ka.actuatorsLength},onUpdate:function(a,b){this._onUpdate=a;this._onUpdateParams=null==b?[]:b;this.sendChange=!0;return this},pause:function(){this.paused||(this.paused=!0,Be.prototype.pause.call(this),this.pauseTime=H.getTimer())},resume:function(){this.paused&&(this.paused=!1,this.timeOffset+=(H.getTimer()-this.pauseTime)/1E3,Be.prototype.resume.call(this))},setField:function(a,b,c){!C.hasField(a,b)||a.__properties__&&a.__properties__["set_"+b]?C.setProperty(a,b,c):C.setField(a,
b,c)},setProperty:function(a,b){a.isField?C.setField(a.target,a.propertyName,b):C.setProperty(a.target,a.propertyName,b)},stop:function(a,b,c){if(this.active)if(null==a)this.active=!1,b&&this.apply(),this.complete(c);else{var d=0;for(a=C.fields(a);d<a.length;){var e=a[d];++d;if(C.hasField(this.properties,e)){this.active=!1;b&&this.apply();this.complete(c);break}}}},update:function(a){if(!this.paused){var b=(a-this.timeOffset)/this.duration;1<b&&(b=1);this.initialized||this.initialize();if(this.special){var c=
this._reverse?this._ease.calculate(1-b):this._ease.calculate(b);for(var d,e=0,f=this.detailsLength;e<f;){var m=e++;m=this.propertyDetails[m];!this._smartRotation||"rotation"!=m.propertyName&&"rotationX"!=m.propertyName&&"rotationY"!=m.propertyName&&"rotationZ"!=m.propertyName?d=m.start+m.change*c:(d=m.change%360,180<d?d-=360:-180>d&&(d+=360),d=m.start+d*c);this._snapping?this.setProperty(m,Math.round(d)):this.setProperty(m,d)}}else for(c=this._ease.calculate(b),e=0,f=this.detailsLength;e<f;)m=e++,
m=this.propertyDetails[m],this.setProperty(m,m.start+m.change*c);if(1==b){if(0==this._repeat){this.active=!1;this.toggleVisible&&0==this.getField(this.target,"alpha")&&this.setField(this.target,"visible",!1);this.complete(!0);return}null!=this._onRepeat&&this.callMethod(this._onRepeat,this._onRepeatParams);this._reflect&&(this._reverse=!this._reverse);this.startTime=a;this.timeOffset=this.startTime+this._delay;0<this._repeat&&this._repeat--}this.sendChange&&this.change()}},__class__:Ka});var dj=function(){};
k["motion.easing.IEasing"]=dj;dj.__name__=["motion","easing","IEasing"];dj.prototype={calculate:null,__class__:dj};var kh=function(){};k["motion.easing._Expo.ExpoEaseOut"]=kh;kh.__name__=["motion","easing","_Expo","ExpoEaseOut"];kh.__interfaces__=[dj];kh.prototype={calculate:function(a){return 1==a?1:1-Math.exp(-6.931471805599453*a)},__class__:kh};var zk=function(){};k["motion.easing.Expo"]=zk;zk.__name__=["motion","easing","Expo"];var Ja=function(){};k["motion.Actuate"]=Ja;Ja.__name__=["motion",
"Actuate"];Ja.apply=function(a,b,c){Ja.stop(a,b);null==c&&(c=Ja.defaultActuator);a=Q.createInstance(c,[a,0,b]);a.apply();return a};Ja.getLibrary=function(a,b){null==b&&(b=!0);!Ja.targetLibraries.exists(a)&&b&&Ja.targetLibraries.set(a,[]);return Ja.targetLibraries.get(a)};Ja.reset=function(){for(var a=Ja.targetLibraries.iterator();a.hasNext();)for(var b=a.next(),c=b.length-1;0<=c;)b[c].stop(null,!1,!1),--c;Ja.targetLibraries=new rb};Ja.stop=function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);if(null!=
a)if(u.is(a,jh))a.stop(null,c,d);else if(a=Ja.getLibrary(a,!1),null!=a){if("string"==typeof b){var e={};C.setField(e,b,null);b=e}else if(b instanceof Array&&null==b.__enum__){e={};var f=0;for(b=n.__cast(b,Array);f<b.length;){var m=b[f];++f;C.setField(e,m,null)}b=e}for(e=a.length-1;0<=e;)a[e].stop(b,c,d),--e}};Ja.timer=function(a,b){return Ja.tween(new lh(0),a,new lh(1),!1,b)};Ja.tween=function(a,b,c,d,e){null==d&&(d=!0);if(null!=a){if(0<b){null==e&&(e=Ja.defaultActuator);a=Q.createInstance(e,[a,b,
c]);b=Ja.getLibrary(a.target);if(d){for(d=b.length-1;0<=d;)b[d].stop(a.properties,!1,!1),--d;b=Ja.getLibrary(a.target)}b.push(a);a.move();return a}return Ja.apply(a,c,e)}return null};Ja.unload=function(a){var b=a.target;Ja.targetLibraries.exists(b)&&(P.remove(Ja.targetLibraries.get(b),a),0==Ja.targetLibraries.get(b).length&&Ja.targetLibraries.remove(b))};var lh=function(a){this.progress=a};k["motion._Actuate.TweenTimer"]=lh;lh.__name__=["motion","_Actuate","TweenTimer"];lh.prototype={progress:null,
__class__:lh};var We=function(){};k["motion.IComponentPath"]=We;We.__name__=["motion","IComponentPath"];We.prototype={get_end:null,set_start:null,get_start:null,strength:null,calculate:null,__class__:We,__properties__:{set_start:"set_start",get_start:"get_start",get_end:"get_end"}};var ej=function(){this.paths=[];this.strength=0};k["motion._MotionPath.ComponentPath"]=ej;ej.__name__=["motion","_MotionPath","ComponentPath"];ej.__interfaces__=[We];ej.prototype={strength:null,paths:null,calculate:function(a){if(1==
this.paths.length)return this.paths[0].calculate(a);a*=this.strength;for(var b=0,c=this.paths;b<c.length;){var d=c[b];++b;if(a>d.strength)a-=d.strength;else return d.calculate(a/d.strength)}return 0},get_start:function(){return 0<this.paths.length?this.paths[0].get_start():0},set_start:function(a){return 0<this.paths.length?this.paths[0].set_start(a):0},get_end:function(){return 0<this.paths.length?this.paths[this.paths.length-1].get_end():this.get_start()},__class__:ej,__properties__:{get_end:"get_end",
set_start:"set_start",get_start:"get_start"}};var fj=function(a,b){this.step=.01;this._x=a;this._y=b;this.offset=0;this.set_start(this.calculate(0))};k["motion._MotionPath.RotationPath"]=fj;fj.__name__=["motion","_MotionPath","RotationPath"];fj.__interfaces__=[We];fj.prototype={offset:null,strength:null,_start:null,step:null,_x:null,_y:null,calculate:function(a){var b=this._x.calculate(a)-this._x.calculate(a+this.step);a=this._y.calculate(a)-this._y.calculate(a+this.step);b=180/Math.PI*Math.atan2(a,
b);return b=(b+this.offset)%360},get_start:function(){return this._start},set_start:function(a){return this._start},get_end:function(){return this.calculate(1)},__class__:fj,__properties__:{set_start:"set_start",get_start:"get_start",get_end:"get_end"}};var gj=function(a,b,c){this.filterIndex=-1;Ka.call(this,a,b,c);if(u.is(c.filter,rl))for(this.filterClass=c.filter,0==a.get_filters().length&&a.set_filters([Q.createInstance(this.filterClass,[])]),b=0,a=a.get_filters();b<a.length;)c=a[b],++b,u.is(c,
this.filterClass)&&(this.filter=c);else this.filterIndex=c.filter,this.filter=a.get_filters()[this.filterIndex]};k["motion.actuators.FilterActuator"]=gj;gj.__name__=["motion","actuators","FilterActuator"];gj.__super__=Ka;gj.prototype=w(Ka.prototype,{filter:null,filterClass:null,filterIndex:null,apply:function(){for(var a=0,b=C.fields(this.properties);a<b.length;){var c=b[a];++a;"filter"!=c&&C.setProperty(this.filter,c,C.field(this.properties,c))}this.setFilter()},initialize:function(){for(var a,b=
0,c=C.fields(this.properties);b<c.length;){var d=c[b];++b;"filter"!=d&&(a=this.getField(this.filter,d),a=new $c(this.filter,d,a,C.field(this.properties,d)-a,C.hasField(this.filter,"set_"+d)),this.propertyDetails.push(a))}this.detailsLength=this.propertyDetails.length;this.initialized=!0},setFilter:function(){var a=this.target.get_filters();if(-1<this.filterIndex)a[this.filterIndex]=this.filter;else for(var b=0,c=a.length;b<c;){var d=b++;u.is(a[d],this.filterClass)&&(a[d]=this.filter)}this.setField(this.target,
"filters",a)},update:function(a){Ka.prototype.update.call(this,a);this.setFilter()},__class__:gj});var hj=function(a,b,c){this.currentParameters=[];this.tweenProperties={};Ka.call(this,a,b,c);C.hasField(c,"start")||(this.properties.start=[]);C.hasField(c,"end")||(this.properties.end=this.properties.start);a=0;for(b=this.properties.start.length;a<b;)c=a++,this.currentParameters.push(this.properties.start[c])};k["motion.actuators.MethodActuator"]=hj;hj.__name__=["motion","actuators","MethodActuator"];
hj.__super__=Ka;hj.prototype=w(Ka.prototype,{currentParameters:null,tweenProperties:null,apply:function(){this.callMethod(this.target,this.properties.end)},complete:function(a){null==a&&(a=!0);for(var b=0,c=this.properties.start.length;b<c;){var d=b++;this.currentParameters[d]=C.field(this.tweenProperties,"param"+d)}this.callMethod(this.target,this.currentParameters);Ka.prototype.complete.call(this,a)},initialize:function(){for(var a,b,c=0,d=this.properties.start.length;c<d;){var e=c++;a="param"+
e;b=this.properties.start[e];C.setField(this.tweenProperties,a,b);if("number"==typeof b||"number"==typeof b&&(b|0)===b)a=new $c(this.tweenProperties,a,b,this.properties.end[e]-b),this.propertyDetails.push(a)}this.detailsLength=this.propertyDetails.length;this.initialized=!0},update:function(a){Ka.prototype.update.call(this,a);if(this.active&&!this.paused){a=0;for(var b=this.properties.start.length;a<b;){var c=a++;this.currentParameters[c]=C.field(this.tweenProperties,"param"+c)}this.callMethod(this.target,
this.currentParameters)}},__class__:hj});var ij=function(a,b,c){Ka.call(this,a,b,c)};k["motion.actuators.MotionPathActuator"]=ij;ij.__name__=["motion","actuators","MotionPathActuator"];ij.__super__=Ka;ij.prototype=w(Ka.prototype,{apply:function(){for(var a=0,b=C.fields(this.properties);a<b.length;){var c=b[a];++a;C.hasField(this.target,c)?C.setField(this.target,c,n.__cast(C.field(this.properties,c),We).get_end()):C.setProperty(this.target,c,n.__cast(C.field(this.properties,c),We).get_end())}},initialize:function(){for(var a,
b=0,c=C.fields(this.properties);b<c.length;){var d=c[b];++b;a=n.__cast(C.field(this.properties,d),We);if(null!=a){var e=!0;C.hasField(this.target,d)?a.set_start(C.field(this.target,d)):(e=!1,a.set_start(C.getProperty(this.target,d)));a=new ad(this.target,d,a,e);this.propertyDetails.push(a)}}this.detailsLength=this.propertyDetails.length;this.initialized=!0},update:function(a){if(!this.paused){var b=(a-this.timeOffset)/this.duration;1<b&&(b=1);this.initialized||this.initialize();if(this.special){var c=
this._reverse?this._ease.calculate(1-b):this._ease.calculate(b);for(var d=0,e=this.propertyDetails;d<e.length;){var f=e[d];++d;this._snapping?f.isField?C.setField(f.target,f.propertyName,Math.round(n.__cast(f,ad).path.calculate(c))):C.setProperty(f.target,f.propertyName,Math.round(n.__cast(f,ad).path.calculate(c))):f.isField?C.setField(f.target,f.propertyName,n.__cast(f,ad).path.calculate(c)):C.setProperty(f.target,f.propertyName,n.__cast(f,ad).path.calculate(c))}}else for(c=this._ease.calculate(b),
d=0,e=this.propertyDetails;d<e.length;)f=e[d],++d,f.isField?C.setField(f.target,f.propertyName,n.__cast(f,ad).path.calculate(c)):C.setProperty(f.target,f.propertyName,n.__cast(f,ad).path.calculate(c));if(1==b){if(0==this._repeat){this.active=!1;this.toggleVisible&&0==this.getField(this.target,"alpha")&&this.setField(this.target,"visible",!1);this.complete(!0);return}null!=this._onRepeat&&this.callMethod(this._onRepeat,this._onRepeatParams);this._reflect&&(this._reverse=!this._reverse);this.startTime=
a;this.timeOffset=this.startTime+this._delay;0<this._repeat&&this._repeat--}this.sendChange&&this.change()}},__class__:ij});var $c=function(a,b,c,d,e){null==e&&(e=!0);this.target=a;this.propertyName=b;this.start=c;this.change=d;this.isField=e};k["motion.actuators.PropertyDetails"]=$c;$c.__name__=["motion","actuators","PropertyDetails"];$c.prototype={change:null,isField:null,propertyName:null,start:null,target:null,__class__:$c};var ad=function(a,b,c,d){null==d&&(d=!0);$c.call(this,a,b,0,0,d);this.path=
c};k["motion.actuators.PropertyPathDetails"]=ad;ad.__name__=["motion","actuators","PropertyPathDetails"];ad.__super__=$c;ad.prototype=w($c.prototype,{path:null,__class__:ad});var jj=function(a,b,c){Ka.call(this,a,b,c)};k["motion.actuators.TransformActuator"]=jj;jj.__name__=["motion","actuators","TransformActuator"];jj.__super__=Ka;jj.prototype=w(Ka.prototype,{endColorTransform:null,endSoundTransform:null,tweenColorTransform:null,tweenSoundTransform:null,apply:function(){this.initialize();if(null!=
this.endColorTransform){var a=this.getField(this.target,"transform");this.setField(a,"colorTransform",this.endColorTransform)}null!=this.endSoundTransform&&this.setField(this.target,"soundTransform",this.endSoundTransform)},initialize:function(){C.hasField(this.properties,"colorValue")&&u.is(this.target,xa)&&this.initializeColor();(C.hasField(this.properties,"soundVolume")||C.hasField(this.properties,"soundPan"))&&this.initializeSound();this.detailsLength=this.propertyDetails.length;this.initialized=
!0},initializeColor:function(){this.endColorTransform=new ib;var a=this.properties.colorValue,b=this.properties.colorStrength;if(1>b){if(.5>b){var c=1;b*=2}else c=1-2*(b-.5),b=1;this.endColorTransform.redMultiplier=c;this.endColorTransform.greenMultiplier=c;this.endColorTransform.blueMultiplier=c;this.endColorTransform.redOffset=b*(a>>16&255);this.endColorTransform.greenOffset=b*(a>>8&255);this.endColorTransform.blueOffset=b*(a&255)}else this.endColorTransform.redMultiplier=0,this.endColorTransform.greenMultiplier=
0,this.endColorTransform.blueMultiplier=0,this.endColorTransform.redOffset=a>>16&255,this.endColorTransform.greenOffset=a>>8&255,this.endColorTransform.blueOffset=a&255;a="redMultiplier greenMultiplier blueMultiplier redOffset greenOffset blueOffset".split(" ");C.hasField(this.properties,"colorAlpha")?(this.endColorTransform.alphaMultiplier=this.properties.colorAlpha,a.push("alphaMultiplier")):this.endColorTransform.alphaMultiplier=this.getField(this.target,"alpha");c=this.getField(this.target,"transform");
c=this.getField(c,"colorTransform");this.tweenColorTransform=new ib;for(b=0;b<a.length;){var d=a[b];++b;var e=this.getField(c,d);e=new $c(this.tweenColorTransform,d,e,this.getField(this.endColorTransform,d)-e);this.propertyDetails.push(e)}},initializeSound:function(){null==this.getField(this.target,"soundTransform")&&this.setField(this.target,"soundTransform",new Xe);var a=this.getField(this.target,"soundTransform");this.endSoundTransform=this.getField(this.target,"soundTransform");this.tweenSoundTransform=
new Xe;C.hasField(this.properties,"soundVolume")&&(this.endSoundTransform.volume=this.properties.soundVolume,this.propertyDetails.push(new $c(this.tweenSoundTransform,"volume",a.volume,this.endSoundTransform.volume-a.volume)));C.hasField(this.properties,"soundPan")&&(this.endSoundTransform.pan=this.properties.soundPan,this.propertyDetails.push(new $c(this.tweenSoundTransform,"pan",a.pan,this.endSoundTransform.pan-a.pan)))},update:function(a){Ka.prototype.update.call(this,a);null!=this.endColorTransform&&
(a=this.getField(this.target,"transform"),this.setField(a,"colorTransform",this.tweenColorTransform));null!=this.endSoundTransform&&this.setField(this.target,"soundTransform",this.tweenSoundTransform)},__class__:jj});var x=function(){};k["nape.Config"]=x;x.__name__=["nape","Config"];var Cc=function(){this.zpp_inner=null};k["nape.callbacks.Callback"]=Cc;Cc.__name__=["nape","callbacks","Callback"];Cc.prototype={zpp_inner:null,get_listener:function(){return this.zpp_inner.listener.outer},toString:function(){return""},
__class__:Cc,__properties__:{get_listener:"get_listener"}};var mh=function(){this.zpp_inner=null};k["nape.callbacks.BodyCallback"]=mh;mh.__name__=["nape","callbacks","BodyCallback"];mh.__super__=Cc;mh.prototype=w(Cc.prototype,{get_body:function(){return this.zpp_inner.body.outer},toString:function(){var a="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-2];a+=":"+this.get_body().toString();return a+=" : listener: "+u.string(this.get_listener())},__class__:mh,__properties__:w(Cc.prototype.__properties__,
{get_body:"get_body"})});var Sc=function(){this.zpp_inner=null};k["nape.callbacks.Listener"]=Sc;Sc.__name__=["nape","callbacks","Listener"];Sc.prototype={zpp_inner:null,toString:function(){var a="BEGIN END WAKE SLEEP BREAK PRE ONGOING".split(" ")[this.zpp_inner.event];if(0==this.zpp_inner.type)return"BodyListener{"+a+"::"+u.string(this.zpp_inner.body.outer_zn.get_options())+"}";if(1==this.zpp_inner.type)return"ConstraintListener{"+a+"::"+u.string(this.zpp_inner.constraint.outer_zn.get_options())+
"}";var b=this.zpp_inner.interaction;switch(b.itype){case 1:var c="COLLISION";break;case 2:c="SENSOR";break;case 4:c="FLUID";break;default:c="ALL"}return(2==this.zpp_inner.type?"InteractionListener{"+a+"#"+c+"::"+u.string(b.outer_zni.get_options1())+":"+u.string(b.outer_zni.get_options2())+"}":"PreListener{"+c+"::"+u.string(b.outer_znp.get_options1())+":"+u.string(b.outer_znp.get_options2())+"}")+" precedence="+this.zpp_inner.precedence},__class__:Sc};var kj=function(a,b,c,d){null==d&&(d=0);this.zpp_inner=
this.zpp_inner_zn=null;var e=-1;a==ta.get_WAKE()?e=2:a==ta.get_SLEEP()&&(e=3);this.zpp_inner=this.zpp_inner_zn=new nh(hd.argument(b),e,c);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner.precedence=d};k["nape.callbacks.BodyListener"]=kj;kj.__name__=["nape","callbacks","BodyListener"];kj.__super__=Sc;kj.prototype=w(Sc.prototype,{zpp_inner_zn:null,get_options:function(){return this.zpp_inner_zn.options.outer},__class__:kj,__properties__:{get_options:"get_options"}});var ta=function(){};
k["nape.callbacks.CbEvent"]=ta;ta.__name__=["nape","callbacks","CbEvent"];ta.__properties__={get_PRE:"get_PRE",get_BREAK:"get_BREAK",get_SLEEP:"get_SLEEP",get_WAKE:"get_WAKE",get_END:"get_END",get_ONGOING:"get_ONGOING",get_BEGIN:"get_BEGIN"};ta.get_BEGIN=function(){null==r.CbEvent_BEGIN&&(r.CbEvent_BEGIN=new ta,r.internal=!1);return r.CbEvent_BEGIN};ta.get_ONGOING=function(){null==r.CbEvent_ONGOING&&(r.CbEvent_ONGOING=new ta,r.internal=!1);return r.CbEvent_ONGOING};ta.get_END=function(){null==r.CbEvent_END&&
(r.CbEvent_END=new ta,r.internal=!1);return r.CbEvent_END};ta.get_WAKE=function(){null==r.CbEvent_WAKE&&(r.CbEvent_WAKE=new ta,r.internal=!1);return r.CbEvent_WAKE};ta.get_SLEEP=function(){null==r.CbEvent_SLEEP&&(r.CbEvent_SLEEP=new ta,r.internal=!1);return r.CbEvent_SLEEP};ta.get_BREAK=function(){null==r.CbEvent_BREAK&&(r.CbEvent_BREAK=new ta,r.internal=!1);return r.CbEvent_BREAK};ta.get_PRE=function(){null==r.CbEvent_PRE&&(r.CbEvent_PRE=new ta,r.internal=!1);return r.CbEvent_PRE};ta.prototype={toString:function(){return this==
ta.get_PRE()?"PRE":this==ta.get_BEGIN()?"BEGIN":this==ta.get_ONGOING()?"ONGOING":this==ta.get_END()?"END":this==ta.get_WAKE()?"WAKE":this==ta.get_SLEEP()?"SLEEP":this==ta.get_BREAK()?"BREAK":""},__class__:ta};var ua=function(){this.zpp_inner=new ab;this.zpp_inner.outer=this};k["nape.callbacks.CbType"]=ua;ua.__name__=["nape","callbacks","CbType"];ua.__properties__={get_ANY_COMPOUND:"get_ANY_COMPOUND",get_ANY_SHAPE:"get_ANY_SHAPE",get_ANY_CONSTRAINT:"get_ANY_CONSTRAINT",get_ANY_BODY:"get_ANY_BODY"};
ua.get_ANY_BODY=function(){return ab.ANY_BODY};ua.get_ANY_CONSTRAINT=function(){return ab.ANY_CONSTRAINT};ua.get_ANY_SHAPE=function(){return ab.ANY_SHAPE};ua.get_ANY_COMPOUND=function(){return ab.ANY_COMPOUND};ua.prototype={zpp_inner:null,get_id:function(){return this.zpp_inner.id},toString:function(){return this==ua.get_ANY_BODY()?"ANY_BODY":this==ua.get_ANY_SHAPE()?"ANY_SHAPE":this==ua.get_ANY_COMPOUND()?"ANY_COMPOUND":this==ua.get_ANY_CONSTRAINT()?"ANY_CONSTRAINT":"CbType#"+this.get_id()},__class__:ua,
__properties__:{get_id:"get_id"}};var Tc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.callbacks.CbTypeIterator"]=Tc;Tc.__name__=["nape","callbacks","CbTypeIterator"];Tc.get=function(a){if(null==Tc.zpp_pool){var b=new Tc;id.internal=!1}else b=Tc.zpp_pool,Tc.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Tc.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Tc.zpp_pool;Tc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Tc};var Ye=function(){this.zpp_inner=new id;this.zpp_inner.outer=this};k["nape.callbacks.CbTypeList"]=Ye;Ye.__name__=["nape","callbacks","CbTypeList"];Ye.fromArray=function(a){for(var b=new Ye,c=0;c<a.length;){var d=a[c];++c;b.push(d)}return b};Ye.prototype={zpp_inner:null,
get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}else this.zpp_inner.inner.add(a.zpp_inner);
this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},empty:function(){return this.zpp_inner.inner.empty()},iterator:function(){this.zpp_inner.valmod();return Tc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Ye,__properties__:{get_length:"get_length"}};
var oh=function(){this.zpp_inner=null};k["nape.callbacks.ConstraintCallback"]=oh;oh.__name__=["nape","callbacks","ConstraintCallback"];oh.__super__=Cc;oh.prototype=w(Cc.prototype,{get_constraint:function(){return this.zpp_inner.constraint.outer},toString:function(){var a="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-2];a+=":"+this.get_constraint().toString();return a+=" : listener: "+u.string(this.get_listener())},__class__:oh,__properties__:w(Cc.prototype.__properties__,{get_constraint:"get_constraint"})});
var Rg=function(a,b,c,d){null==d&&(d=0);this.zpp_inner=this.zpp_inner_zn=null;var e=-1;a==ta.get_WAKE()?e=2:a==ta.get_SLEEP()?e=3:a==ta.get_BREAK()&&(e=4);this.zpp_inner=this.zpp_inner_zn=new ph(hd.argument(b),e,c);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner.precedence=d};k["nape.callbacks.ConstraintListener"]=Rg;Rg.__name__=["nape","callbacks","ConstraintListener"];Rg.__super__=Sc;Rg.prototype=w(Sc.prototype,{zpp_inner_zn:null,get_options:function(){return this.zpp_inner_zn.options.outer},
__class__:Rg,__properties__:{get_options:"get_options"}});var qh=function(){this.zpp_inner=null};k["nape.callbacks.InteractionCallback"]=qh;qh.__name__=["nape","callbacks","InteractionCallback"];qh.__super__=Cc;qh.prototype=w(Cc.prototype,{get_int1:function(){return this.zpp_inner.int1.outer_i},get_int2:function(){return this.zpp_inner.int2.outer_i},get_arbiters:function(){return this.zpp_inner.wrap_arbiters},toString:function(){var a="Cb:"+"BEGIN END     ONGOING".split(" ")[this.zpp_inner.event];
a+=":"+this.get_int1().toString()+"/"+this.get_int2().toString();a+=" : "+this.get_arbiters().toString();return a+=" : listener: "+u.string(this.get_listener())},__class__:qh,__properties__:w(Cc.prototype.__properties__,{get_arbiters:"get_arbiters",get_int2:"get_int2",get_int1:"get_int1"})});var fd=function(a,b,c,d,e,f){null==f&&(f=0);this.zpp_inner=this.zpp_inner_zn=null;var m=-1;a==ta.get_BEGIN()?m=0:a==ta.get_END()?m=1:a==ta.get_ONGOING()&&(m=6);this.zpp_inner=this.zpp_inner_zn=new ob(hd.argument(c),
hd.argument(d),m,2);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zni=this;this.zpp_inner.precedence=f;this.zpp_inner_zn.handleri=e;this.set_interactionType(b)};k["nape.callbacks.InteractionListener"]=fd;fd.__name__=["nape","callbacks","InteractionListener"];fd.__super__=Sc;fd.prototype=w(Sc.prototype,{zpp_inner_zn:null,get_options1:function(){return this.zpp_inner_zn.options1.outer},get_options2:function(){return this.zpp_inner_zn.options2.outer},get_interactionType:function(){var a=this.zpp_inner_zn.itype;
return 1==a?na.get_COLLISION():2==a?na.get_SENSOR():4==a?na.get_FLUID():7==a?na.get_ANY():null},set_interactionType:function(a){this.get_interactionType()!=a&&(a=a==na.get_COLLISION()?1:a==na.get_SENSOR()?2:a==na.get_FLUID()?4:7,this.zpp_inner_zn.setInteractionType(a));return this.get_interactionType()},__class__:fd,__properties__:{set_interactionType:"set_interactionType",get_interactionType:"get_interactionType",get_options2:"get_options2",get_options1:"get_options1"}});var na=function(){};k["nape.callbacks.InteractionType"]=
na;na.__name__=["nape","callbacks","InteractionType"];na.__properties__={get_ANY:"get_ANY",get_FLUID:"get_FLUID",get_SENSOR:"get_SENSOR",get_COLLISION:"get_COLLISION"};na.get_COLLISION=function(){null==r.InteractionType_COLLISION&&(r.InteractionType_COLLISION=new na,r.internal=!1);return r.InteractionType_COLLISION};na.get_SENSOR=function(){null==r.InteractionType_SENSOR&&(r.InteractionType_SENSOR=new na,r.internal=!1);return r.InteractionType_SENSOR};na.get_FLUID=function(){null==r.InteractionType_FLUID&&
(r.InteractionType_FLUID=new na,r.internal=!1);return r.InteractionType_FLUID};na.get_ANY=function(){null==r.InteractionType_ANY&&(r.InteractionType_ANY=new na,r.internal=!1);return r.InteractionType_ANY};na.prototype={toString:function(){return this==na.get_COLLISION()?"COLLISION":this==na.get_SENSOR()?"SENSOR":this==na.get_FLUID()?"FLUID":this==na.get_ANY()?"ANY":""},__class__:na};var rd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.callbacks.ListenerIterator"]=
rd;rd.__name__=["nape","callbacks","ListenerIterator"];rd.get=function(a){if(null==rd.zpp_pool){var b=new rd;Ze.internal=!1}else b=rd.zpp_pool,rd.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};rd.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=rd.zpp_pool;rd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=
!1;return this.zpp_inner.at(this.zpp_i++)},__class__:rd};var lj=function(){this.zpp_inner=new Ze;this.zpp_inner.outer=this};k["nape.callbacks.ListenerList"]=lj;lj.__name__=["nape","callbacks","ListenerList"];lj.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=
this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);
else{if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag){if(null==
this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}else this.zpp_inner.inner.add(a.zpp_inner);this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();
var b=!1;for(var c=this.zpp_inner.inner.begin();null!=c;){if(c.elem()==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},empty:function(){return this.zpp_inner.inner.empty()},iterator:function(){this.zpp_inner.valmod();return rd.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":
d.toString();b=!1}return a+"]"},__class__:lj,__properties__:{get_length:"get_length"}};var Dc=function(){};k["nape.callbacks.ListenerType"]=Dc;Dc.__name__=["nape","callbacks","ListenerType"];Dc.__properties__={get_PRE:"get_PRE",get_INTERACTION:"get_INTERACTION",get_CONSTRAINT:"get_CONSTRAINT",get_BODY:"get_BODY"};Dc.get_BODY=function(){null==r.ListenerType_BODY&&(r.ListenerType_BODY=new Dc,r.internal=!1);return r.ListenerType_BODY};Dc.get_CONSTRAINT=function(){null==r.ListenerType_CONSTRAINT&&(r.ListenerType_CONSTRAINT=
new Dc,r.internal=!1);return r.ListenerType_CONSTRAINT};Dc.get_INTERACTION=function(){null==r.ListenerType_INTERACTION&&(r.ListenerType_INTERACTION=new Dc,r.internal=!1);return r.ListenerType_INTERACTION};Dc.get_PRE=function(){null==r.ListenerType_PRE&&(r.ListenerType_PRE=new Dc,r.internal=!1);return r.ListenerType_PRE};Dc.prototype={toString:function(){return this==Dc.get_BODY()?"BODY":this==Dc.get_CONSTRAINT()?"CONSTRAINT":this==Dc.get_INTERACTION()?"INTERACTION":this==Dc.get_PRE()?"PRE":""},__class__:Dc};
var If=function(a,b){this.zpp_inner=new hd;this.zpp_inner.outer=this;null!=a&&this.including(a);null!=b&&this.excluding(b)};k["nape.callbacks.OptionType"]=If;If.__name__=["nape","callbacks","OptionType"];If.prototype={zpp_inner:null,get_includes:function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();return this.zpp_inner.wrap_includes},get_excludes:function(){null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes();return this.zpp_inner.wrap_excludes},including:function(a){this.zpp_inner.append(this.zpp_inner.includes,
a);return this},excluding:function(a){this.zpp_inner.append(this.zpp_inner.excludes,a);return this},toString:function(){var a=this.get_includes().toString(),b=this.get_excludes().toString();return"@{"+a+" excluding "+b+"}"},__class__:If,__properties__:{get_excludes:"get_excludes",get_includes:"get_includes"}};var rh=function(){this.zpp_inner=null};k["nape.callbacks.PreCallback"]=rh;rh.__name__=["nape","callbacks","PreCallback"];rh.__super__=Cc;rh.prototype=w(Cc.prototype,{get_arbiter:function(){return this.zpp_inner.pre_arbiter.wrapper()},
get_int1:function(){return this.zpp_inner.int1.outer_i},get_int2:function(){return this.zpp_inner.int2.outer_i},toString:function(){var a="Cb:PRE:"+(":"+this.get_int1().toString()+"/"+this.get_int2().toString());a+=" : "+this.get_arbiter().toString();return a+=" : listnener: "+u.string(this.get_listener())},__class__:rh,__properties__:w(Cc.prototype.__properties__,{get_int2:"get_int2",get_int1:"get_int1",get_arbiter:"get_arbiter"})});var $a=function(){};k["nape.callbacks.PreFlag"]=$a;$a.__name__=
["nape","callbacks","PreFlag"];$a.__properties__={get_IGNORE_ONCE:"get_IGNORE_ONCE",get_ACCEPT_ONCE:"get_ACCEPT_ONCE",get_IGNORE:"get_IGNORE",get_ACCEPT:"get_ACCEPT"};$a.get_ACCEPT=function(){null==r.PreFlag_ACCEPT&&(r.PreFlag_ACCEPT=new $a,r.internal=!1);return r.PreFlag_ACCEPT};$a.get_IGNORE=function(){null==r.PreFlag_IGNORE&&(r.PreFlag_IGNORE=new $a,r.internal=!1);return r.PreFlag_IGNORE};$a.get_ACCEPT_ONCE=function(){null==r.PreFlag_ACCEPT_ONCE&&(r.PreFlag_ACCEPT_ONCE=new $a,r.internal=!1);return r.PreFlag_ACCEPT_ONCE};
$a.get_IGNORE_ONCE=function(){null==r.PreFlag_IGNORE_ONCE&&(r.PreFlag_IGNORE_ONCE=new $a,r.internal=!1);return r.PreFlag_IGNORE_ONCE};$a.prototype={toString:function(){return this==$a.get_ACCEPT()?"ACCEPT":this==$a.get_IGNORE()?"IGNORE":this==$a.get_ACCEPT_ONCE()?"ACCEPT_ONCE":this==$a.get_IGNORE_ONCE()?"IGNORE_ONCE":""},__class__:$a};var mj=function(a,b,c,d,e,f){null==f&&(f=!1);null==e&&(e=0);this.zpp_inner=this.zpp_inner_zn=null;this.zpp_inner=this.zpp_inner_zn=new ob(hd.argument(b),hd.argument(c),
5,3);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_znp=this;this.zpp_inner.precedence=e;this.zpp_inner_zn.pure=f;this.zpp_inner_zn.handlerp=d;this.set_interactionType(a)};k["nape.callbacks.PreListener"]=mj;mj.__name__=["nape","callbacks","PreListener"];mj.__super__=Sc;mj.prototype=w(Sc.prototype,{zpp_inner_zn:null,get_options1:function(){return this.zpp_inner_zn.options1.outer},get_options2:function(){return this.zpp_inner_zn.options2.outer},get_interactionType:function(){var a=this.zpp_inner_zn.itype;
return 1==a?na.get_COLLISION():2==a?na.get_SENSOR():4==a?na.get_FLUID():7==a?na.get_ANY():null},set_interactionType:function(a){this.get_interactionType()!=a&&(a=a==na.get_COLLISION()?1:a==na.get_SENSOR()?2:a==na.get_FLUID()?4:7,this.zpp_inner_zn.setInteractionType(a));return this.get_interactionType()},__class__:mj,__properties__:{set_interactionType:"set_interactionType",get_interactionType:"get_interactionType",get_options2:"get_options2",get_options1:"get_options1"}});var Va=function(){this.zpp_inner.insert_cbtype(ua.get_ANY_CONSTRAINT().zpp_inner)};
k["nape.constraint.Constraint"]=Va;Va.__name__=["nape","constraint","Constraint"];Va.prototype={zpp_inner:null,get_space:function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},set_space:function(a){this.get_space()!=a&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),null!=this.zpp_inner.space&&this.zpp_inner.space.outer.get_constraints().remove(this),null!=a?a.get_constraints().add(this):this.zpp_inner.space=null);return this.get_space()},
get_active:function(){return this.zpp_inner.active},set_active:function(a){this.get_active()!=a&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),a?(this.zpp_inner.active=a,this.zpp_inner.activate(),null!=this.zpp_inner.space&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.sleeping=!0),this.zpp_inner.space.wake_constraint(this.zpp_inner,!0))):(null!=this.zpp_inner.space&&(this.zpp_inner.wake(),this.zpp_inner.space.live_constraints.remove(this.zpp_inner)),
this.zpp_inner.active=a,this.zpp_inner.deactivate()));return this.get_active()},get_ignore:function(){return this.zpp_inner.ignore},set_ignore:function(a){this.get_ignore()!=a&&(this.zpp_inner.ignore=a,this.zpp_inner.wake());return this.get_ignore()},get_stiff:function(){return this.zpp_inner.stiff},set_stiff:function(a){this.get_stiff()!=a&&(this.zpp_inner.stiff=a,this.zpp_inner.wake());return this.get_stiff()},get_frequency:function(){return this.zpp_inner.frequency},set_frequency:function(a){this.get_frequency()!=
a&&(this.zpp_inner.frequency=a,this.zpp_inner.stiff||this.zpp_inner.wake());return this.get_frequency()},get_damping:function(){return this.zpp_inner.damping},set_damping:function(a){this.get_damping()!=a&&(this.zpp_inner.damping=a,this.zpp_inner.stiff||this.zpp_inner.wake());return this.get_damping()},get_maxForce:function(){return this.zpp_inner.maxForce},set_maxForce:function(a){this.get_maxForce()!=a&&(this.zpp_inner.maxForce=a,this.zpp_inner.wake());return this.get_maxForce()},get_breakUnderForce:function(){return this.zpp_inner.breakUnderForce},
set_breakUnderForce:function(a){this.get_breakUnderForce()!=a&&(this.zpp_inner.breakUnderForce=a,this.zpp_inner.wake());return this.get_breakUnderForce()},bodyImpulse:function(a){return null},get_cbTypes:function(){null==this.zpp_inner.wrap_cbTypes&&this.zpp_inner.setupcbTypes();return this.zpp_inner.wrap_cbTypes},toString:function(){return"{Constraint}"},__class__:Va,__properties__:{get_cbTypes:"get_cbTypes",set_breakUnderForce:"set_breakUnderForce",get_breakUnderForce:"get_breakUnderForce",set_maxForce:"set_maxForce",
get_maxForce:"get_maxForce",set_damping:"set_damping",get_damping:"get_damping",set_frequency:"set_frequency",get_frequency:"get_frequency",set_stiff:"set_stiff",get_stiff:"get_stiff",set_ignore:"set_ignore",get_ignore:"get_ignore",set_active:"set_active",get_active:"get_active",set_space:"set_space",get_space:"get_space"}};var nj=function(a,b,c,d,e){null==e&&(e=1);this.zpp_inner=this.zpp_inner_zn=new sh;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;Va.call(this);this.set_body1(a);this.set_body2(b);
this.set_jointMin(c);this.set_jointMax(d);this.set_ratio(e)};k["nape.constraint.AngleJoint"]=nj;nj.__name__=["nape","constraint","AngleJoint"];nj.__super__=Va;nj.prototype=w(Va.prototype,{zpp_inner_zn:null,get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(a){this.zpp_inner.immutable_midstep("Constraint::body1");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=this.get_space()&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&
null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body1()},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(a){this.zpp_inner.immutable_midstep("Constraint::body2");
a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=this.get_space()&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=
a&&a.wake()));return this.get_body2()},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(a){this.zpp_inner.immutable_midstep("AngleJoint::jointMin");this.get_jointMin()!=a&&(this.zpp_inner_zn.jointMin=a,this.zpp_inner.wake());return this.get_jointMin()},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(a){this.zpp_inner.immutable_midstep("AngleJoint::jointMax");this.get_jointMax()!=a&&(this.zpp_inner_zn.jointMax=a,this.zpp_inner.wake());
return this.get_jointMax()},get_ratio:function(){return this.zpp_inner_zn.ratio},set_ratio:function(a){this.zpp_inner.immutable_midstep("AngleJoint::ratio");this.get_ratio()!=a&&(this.zpp_inner_zn.ratio=a,this.zpp_inner.wake());return this.get_ratio()},bodyImpulse:function(a){return this.get_active()?this.zpp_inner_zn.bodyImpulse(a.zpp_inner):oa.get(0,0,0)},__class__:nj,__properties__:w(Va.prototype.__properties__,{set_ratio:"set_ratio",get_ratio:"get_ratio",set_jointMax:"set_jointMax",get_jointMax:"get_jointMax",
set_jointMin:"set_jointMin",get_jointMin:"get_jointMin",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var kc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.constraint.ConstraintIterator"]=kc;kc.__name__=["nape","constraint","ConstraintIterator"];kc.get=function(a){if(null==kc.zpp_pool){var b=new kc;Gd.internal=!1}else b=kc.zpp_pool,kc.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};
kc.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=kc.zpp_pool;kc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:kc};var oj=function(){this.zpp_inner=new Gd;this.zpp_inner.outer=this};k["nape.constraint.ConstraintList"]=oj;oj.__name__=["nape","constraint",
"ConstraintList"];oj.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,
a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}else this.zpp_inner.inner.add(a.zpp_inner);
this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},pop:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){var a=this.zpp_inner.inner.front();var b=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(b);this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-
2);a=null==b?this.zpp_inner.inner.front():b.next.elem();var c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}this.zpp_inner.invalidate();return a.outer},shift:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var a=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-
2);var b=null==a?this.zpp_inner.inner.front():a.next.elem();var c=b.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(a)}else b=this.zpp_inner.inner.front(),a=b.outer,null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.pop();this.zpp_inner.invalidate();return b.outer},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b=!1;for(var c=this.zpp_inner.inner.begin();null!=c;){if(c.elem()==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},clear:function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},empty:function(){return this.zpp_inner.inner.empty()},iterator:function(){this.zpp_inner.valmod();
return kc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},foreach:function(a){for(var b=this.iterator();b.hasNext();)try{a(b.next())}catch(c){Y.lastException=c;b.zpp_next=kc.zpp_pool;kc.zpp_pool=b;b.zpp_inner=null;break}return this},__class__:oj,__properties__:{get_length:"get_length"}};var Pg=function(a,b,c,d,e,f){this.zpp_inner=this.zpp_inner_zn=new th;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=
this;Va.call(this);this.set_body1(a);this.set_body2(b);this.set_anchor1(c);this.set_anchor2(d);this.set_jointMin(e);this.set_jointMax(f)};k["nape.constraint.DistanceJoint"]=Pg;Pg.__name__=["nape","constraint","DistanceJoint"];Pg.__super__=Va;Pg.prototype=w(Va.prototype,{zpp_inner_zn:null,get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(a){this.zpp_inner.immutable_midstep("Constraint::body1");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b1&&
(null!=this.zpp_inner_zn.b1&&(null!=this.get_space()&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body1()},get_body2:function(){return null==
this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(a){this.zpp_inner.immutable_midstep("Constraint::body2");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=this.get_space()&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b1!=
a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body2()},get_anchor1:function(){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(a){this.get_anchor1().set(a);return this.get_anchor1()},get_anchor2:function(){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},set_anchor2:function(a){this.get_anchor2().set(a);
return this.get_anchor2()},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(a){this.zpp_inner.immutable_midstep("DistanceJoint::jointMin");this.get_jointMin()!=a&&(this.zpp_inner_zn.jointMin=a,this.zpp_inner.wake());return this.get_jointMin()},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(a){this.zpp_inner.immutable_midstep("DistanceJoint::jointMax");this.get_jointMax()!=a&&(this.zpp_inner_zn.jointMax=a,this.zpp_inner.wake());return this.get_jointMax()},
bodyImpulse:function(a){return this.get_active()?this.zpp_inner_zn.bodyImpulse(a.zpp_inner):oa.get()},__class__:Pg,__properties__:w(Va.prototype.__properties__,{set_jointMax:"set_jointMax",get_jointMax:"get_jointMax",set_jointMin:"set_jointMin",get_jointMin:"get_jointMin",set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var Fd=function(a,b,c,d,e,f,m){this.zpp_inner=
this.zpp_inner_zn=new uh;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;Va.call(this);this.set_body1(a);this.set_body2(b);this.set_anchor1(c);this.set_anchor2(d);this.set_direction(e);this.set_jointMin(f);this.set_jointMax(m)};k["nape.constraint.LineJoint"]=Fd;Fd.__name__=["nape","constraint","LineJoint"];Fd.__super__=Va;Fd.prototype=w(Va.prototype,{zpp_inner_zn:null,get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(a){this.zpp_inner.immutable_midstep("Constraint::body1");
a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=this.get_space()&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=
a&&a.wake()));return this.get_body1()},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(a){this.zpp_inner.immutable_midstep("Constraint::body2");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=this.get_space()&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b2.wake()),
this.zpp_inner_zn.b2=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body2()},get_anchor1:function(){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(a){this.get_anchor1().set(a);return this.get_anchor1()},get_anchor2:function(){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();
return this.zpp_inner_zn.wrap_a2},set_anchor2:function(a){this.get_anchor2().set(a);return this.get_anchor2()},get_direction:function(){null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n();return this.zpp_inner_zn.wrap_n},set_direction:function(a){this.get_direction().set(a);return this.get_direction()},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(a){this.zpp_inner.immutable_midstep("LineJoint::jointMin");this.get_jointMin()!=a&&(this.zpp_inner_zn.jointMin=
a,this.zpp_inner.wake());return this.get_jointMin()},get_jointMax:function(){return this.zpp_inner_zn.jointMax},set_jointMax:function(a){this.zpp_inner.immutable_midstep("LineJoint::jointMax");this.get_jointMax()!=a&&(this.zpp_inner_zn.jointMax=a,this.zpp_inner.wake());return this.get_jointMax()},bodyImpulse:function(a){return this.get_active()?this.zpp_inner_zn.bodyImpulse(a.zpp_inner):oa.get()},__class__:Fd,__properties__:w(Va.prototype.__properties__,{set_jointMax:"set_jointMax",get_jointMax:"get_jointMax",
set_jointMin:"set_jointMin",get_jointMin:"get_jointMin",set_direction:"set_direction",get_direction:"get_direction",set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var pj=function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);this.zpp_inner=this.zpp_inner_zn=new vh;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;Va.call(this);this.set_body1(a);this.set_body2(b);
this.set_rate(c);this.set_ratio(d)};k["nape.constraint.MotorJoint"]=pj;pj.__name__=["nape","constraint","MotorJoint"];pj.__super__=Va;pj.prototype=w(Va.prototype,{zpp_inner_zn:null,get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(a){this.zpp_inner.immutable_midstep("Constraint::body1");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=this.get_space()&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=
this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body1()},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(a){this.zpp_inner.immutable_midstep("Constraint::body2");
a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=this.get_space()&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=
a&&a.wake()));return this.get_body2()},get_ratio:function(){return this.zpp_inner_zn.ratio},set_ratio:function(a){this.zpp_inner.immutable_midstep("MotorJoint::ratio");this.get_ratio()!=a&&(this.zpp_inner_zn.ratio=a,this.zpp_inner.wake());return this.get_ratio()},get_rate:function(){return this.zpp_inner_zn.rate},set_rate:function(a){this.zpp_inner.immutable_midstep("MotorJoint::rate");this.get_rate()!=a&&(this.zpp_inner_zn.rate=a,this.zpp_inner.wake());return this.get_rate()},bodyImpulse:function(a){return this.get_active()?
this.zpp_inner_zn.bodyImpulse(a.zpp_inner):oa.get()},__class__:pj,__properties__:w(Va.prototype.__properties__,{set_rate:"set_rate",get_rate:"get_rate",set_ratio:"set_ratio",get_ratio:"get_ratio",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var Wb=function(a,b,c,d){this.zpp_inner=this.zpp_inner_zn=new wh;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;Va.call(this);this.set_body1(a);this.set_body2(b);this.set_anchor1(c);this.set_anchor2(d)};
k["nape.constraint.PivotJoint"]=Wb;Wb.__name__=["nape","constraint","PivotJoint"];Wb.__super__=Va;Wb.prototype=w(Va.prototype,{zpp_inner_zn:null,get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(a){this.zpp_inner.immutable_midstep("Constraint::body1");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=this.get_space()&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),
this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body1()},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(a){this.zpp_inner.immutable_midstep("Constraint::body2");a=null==a?null:a.zpp_inner;a!=
this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=this.get_space()&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body2()},
get_anchor1:function(){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(a){this.get_anchor1().set(a);return this.get_anchor1()},get_anchor2:function(){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},set_anchor2:function(a){this.get_anchor2().set(a);return this.get_anchor2()},bodyImpulse:function(a){return this.get_active()?this.zpp_inner_zn.bodyImpulse(a.zpp_inner):oa.get()},__class__:Wb,
__properties__:w(Va.prototype.__properties__,{set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var qj=function(a,b,c,d,e,f,m,h,q,y,g){null==g&&(g=1);this.zpp_inner=this.zpp_inner_zn=new xh;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;Va.call(this);this.set_body1(a);this.set_body2(b);this.set_body3(c);this.set_body4(d);this.set_anchor1(e);this.set_anchor2(f);
this.set_anchor3(m);this.set_anchor4(h);this.set_ratio(g);this.set_jointMin(q);this.set_jointMax(y)};k["nape.constraint.PulleyJoint"]=qj;qj.__name__=["nape","constraint","PulleyJoint"];qj.__super__=Va;qj.prototype=w(Va.prototype,{zpp_inner_zn:null,get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(a){this.zpp_inner.immutable_midstep("Constraint::body1");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=this.get_space()&&
this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b2!=a&&this.zpp_inner_zn.b3!=a&&this.zpp_inner_zn.b4!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&
(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body1()},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(a){this.zpp_inner.immutable_midstep("Constraint::body2");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=this.get_space()&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),
this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b1!=a&&this.zpp_inner_zn.b3!=a&&this.zpp_inner_zn.b4!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body2()},get_body3:function(){return null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},set_body3:function(a){this.zpp_inner.immutable_midstep("Constraint::body3");
a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=this.get_space()&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b1!=a&&this.zpp_inner_zn.b2!=a&&this.zpp_inner_zn.b4!=
a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body3()},get_body4:function(){return null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},set_body4:function(a){this.zpp_inner.immutable_midstep("Constraint::body4");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=this.get_space()&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&
this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b1!=a&&this.zpp_inner_zn.b2!=a&&this.zpp_inner_zn.b3!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body4()},get_anchor1:function(){null==
this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(a){this.get_anchor1().set(a);return this.get_anchor1()},get_anchor2:function(){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},set_anchor2:function(a){this.get_anchor2().set(a);return this.get_anchor2()},get_anchor3:function(){null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3();return this.zpp_inner_zn.wrap_a3},set_anchor3:function(a){this.get_anchor3().set(a);
return this.get_anchor3()},get_anchor4:function(){null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4();return this.zpp_inner_zn.wrap_a4},set_anchor4:function(a){this.get_anchor4().set(a);return this.get_anchor4()},get_jointMin:function(){return this.zpp_inner_zn.jointMin},set_jointMin:function(a){this.zpp_inner.immutable_midstep("PulleyJoint::jointMin");this.get_jointMin()!=a&&(this.zpp_inner_zn.jointMin=a,this.zpp_inner.wake());return this.get_jointMin()},get_jointMax:function(){return this.zpp_inner_zn.jointMax},
set_jointMax:function(a){this.zpp_inner.immutable_midstep("PulleyJoint::jointMax");this.get_jointMax()!=a&&(this.zpp_inner_zn.jointMax=a,this.zpp_inner.wake());return this.get_jointMax()},get_ratio:function(){return this.zpp_inner_zn.ratio},set_ratio:function(a){this.zpp_inner.immutable_midstep("PulleyJoint::ratio");this.get_ratio()!=a&&(this.zpp_inner_zn.ratio=a,this.zpp_inner.wake());return this.get_ratio()},bodyImpulse:function(a){return this.get_active()?this.zpp_inner_zn.bodyImpulse(a.zpp_inner):
oa.get()},__class__:qj,__properties__:w(Va.prototype.__properties__,{set_ratio:"set_ratio",get_ratio:"get_ratio",set_jointMax:"set_jointMax",get_jointMax:"get_jointMax",set_jointMin:"set_jointMin",get_jointMin:"get_jointMin",set_anchor4:"set_anchor4",get_anchor4:"get_anchor4",set_anchor3:"set_anchor3",get_anchor3:"get_anchor3",set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body4:"set_body4",get_body4:"get_body4",set_body3:"set_body3",get_body3:"get_body3",
set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var rj=function(a,b){null==b&&(b=!1);this.zpp_inner=this.zpp_inner_zn=new yh(a,b);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;Va.call(this)};k["nape.constraint.UserConstraint"]=rj;rj.__name__=["nape","constraint","UserConstraint"];rj.__super__=Va;rj.prototype=w(Va.prototype,{zpp_inner_zn:null,__broken:function(){},__validate:function(){},__prepare:function(){},__position:function(a){},__velocity:function(a){},
__eff_mass:function(a){},__clamp:function(a){},__impulse:function(a,b,c){},bodyImpulse:function(a){return this.get_active()?this.zpp_inner_zn.bodyImpulse(a.zpp_inner):oa.get()},__class__:rj});var mg=function(a,b,c,d,e){null==e&&(e=0);this.zpp_inner=this.zpp_inner_zn=new zh;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;Va.call(this);this.set_body1(a);this.set_body2(b);this.set_anchor1(c);this.set_anchor2(d);this.set_phase(e)};k["nape.constraint.WeldJoint"]=mg;mg.__name__=["nape","constraint",
"WeldJoint"];mg.__super__=Va;mg.prototype=w(Va.prototype,{zpp_inner_zn:null,get_body1:function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},set_body1:function(a){this.zpp_inner.immutable_midstep("Constraint::body1");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=this.get_space()&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&
this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body1()},get_body2:function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},set_body2:function(a){this.zpp_inner.immutable_midstep("Constraint::body2");a=null==a?null:a.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&
(null!=this.get_space()&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.get_active()&&null!=this.get_space()&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=this.get_space()&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.get_active()&&null!=this.get_space()&&(this.zpp_inner.wake(),null!=a&&a.wake()));return this.get_body2()},get_anchor1:function(){null==this.zpp_inner_zn.wrap_a1&&
this.zpp_inner_zn.setup_a1();return this.zpp_inner_zn.wrap_a1},set_anchor1:function(a){this.get_anchor1().set(a);return this.get_anchor1()},get_anchor2:function(){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();return this.zpp_inner_zn.wrap_a2},set_anchor2:function(a){this.get_anchor2().set(a);return this.get_anchor2()},get_phase:function(){return this.zpp_inner_zn.phase},set_phase:function(a){this.zpp_inner.immutable_midstep("WeldJoint::phase");this.get_phase()!=a&&(this.zpp_inner_zn.phase=
a,this.zpp_inner.wake());return this.get_phase()},bodyImpulse:function(a){return this.get_active()?this.zpp_inner_zn.bodyImpulse(a.zpp_inner):oa.get()},__class__:mg,__properties__:w(Va.prototype.__properties__,{set_phase:"set_phase",get_phase:"get_phase",set_anchor2:"set_anchor2",get_anchor2:"get_anchor2",set_anchor1:"set_anchor1",get_anchor1:"get_anchor1",set_body2:"set_body2",get_body2:"get_body2",set_body1:"set_body1",get_body1:"get_body1"})});var ke=function(){this.zpp_inner=null};k["nape.dynamics.Arbiter"]=
ke;ke.__name__=["nape","dynamics","Arbiter"];ke.prototype={zpp_inner:null,isCollisionArbiter:function(){return this.zpp_inner.type==Ea.COL},isFluidArbiter:function(){return this.zpp_inner.type==Ea.FLUID},get_collisionArbiter:function(){return this.isCollisionArbiter()?this.zpp_inner.colarb.outer_zn:null},get_shape1:function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer},get_shape2:function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?
this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer},get_body1:function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer},get_body2:function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer},get_state:function(){var a=this.zpp_inner.immState;return 5==a?$a.get_ACCEPT():1==a?$a.get_ACCEPT_ONCE():6==a?$a.get_IGNORE():$a.get_IGNORE_ONCE()},totalImpulse:function(a,b){return oa.get(0,0,0)},toString:function(){var a=
this.isCollisionArbiter()?"CollisionArbiter":this.isFluidArbiter()?"FluidArbiter":"SensorArbiter";return this.zpp_inner.cleared?a+"(object-pooled)":a+"("+this.get_shape1().toString()+"|"+this.get_shape2().toString()+")"+(this.isCollisionArbiter()?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-"+this.get_state().toString()},__class__:ke,__properties__:{get_state:"get_state",get_body2:"get_body2",get_body1:"get_body1",get_shape2:"get_shape2",get_shape1:"get_shape1",get_collisionArbiter:"get_collisionArbiter"}};
var lc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.dynamics.ArbiterIterator"]=lc;lc.__name__=["nape","dynamics","ArbiterIterator"];lc.get=function(a){if(null==lc.zpp_pool){var b=new lc;$e.internal=!1}else b=lc.zpp_pool,lc.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};lc.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=lc.zpp_pool;lc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:lc};var Ce=function(){this.zpp_inner=new $e;this.zpp_inner.outer=this};k["nape.dynamics.ArbiterList"]=Ce;Ce.__name__=["nape","dynamics","ArbiterList"];Ce.prototype={zpp_inner:null,get_length:function(){return this.zpp_gl()},zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=
!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.begin();null!=a;)a.elem().active&&this.zpp_inner.user_length++,a=a.next}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.begin();!this.zpp_inner.at_ite.elem().active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;
for(;this.zpp_inner.at_index!=a;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elem().active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().wrapper()},iterator:function(){this.zpp_vm();return lc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},foreach:function(a){for(var b=this.iterator();b.hasNext();)try{a(b.next())}catch(c){Y.lastException=
c;b.zpp_next=lc.zpp_pool;lc.zpp_pool=b;b.zpp_inner=null;break}return this},__class__:Ce,__properties__:{get_length:"get_length"}};var sd=function(){};k["nape.dynamics.ArbiterType"]=sd;sd.__name__=["nape","dynamics","ArbiterType"];sd.__properties__={get_FLUID:"get_FLUID",get_SENSOR:"get_SENSOR",get_COLLISION:"get_COLLISION"};sd.get_COLLISION=function(){null==r.ArbiterType_COLLISION&&(r.ArbiterType_COLLISION=new sd,r.internal=!1);return r.ArbiterType_COLLISION};sd.get_SENSOR=function(){null==r.ArbiterType_SENSOR&&
(r.ArbiterType_SENSOR=new sd,r.internal=!1);return r.ArbiterType_SENSOR};sd.get_FLUID=function(){null==r.ArbiterType_FLUID&&(r.ArbiterType_FLUID=new sd,r.internal=!1);return r.ArbiterType_FLUID};sd.prototype={toString:function(){return this==sd.get_COLLISION()?"COLLISION":this==sd.get_SENSOR()?"SENSOR":this==sd.get_FLUID()?"FLUID":""},__class__:sd};var Ah=function(){this.zpp_inner=null};k["nape.dynamics.CollisionArbiter"]=Ah;Ah.__name__=["nape","dynamics","CollisionArbiter"];Ah.__super__=ke;Ah.prototype=
w(ke.prototype,{normalImpulse:function(a,b){null==b&&(b=!1);var c=0,d=0,e=0,f=this.zpp_inner.colarb;if(!b||f.oc1.fresh){var m=f.oc1.wrapper().normalImpulse(a);c+=1*m.get_x();d+=1*m.get_y();e+=1*m.get_z();m.dispose()}!f.hc2||b&&!f.oc2.fresh||(a=f.oc2.wrapper().normalImpulse(a),c+=1*a.get_x(),d+=1*a.get_y(),e+=1*a.get_z(),a.dispose());return oa.get(c,d,e)},totalImpulse:function(a,b){null==b&&(b=!1);var c=0,d=0,e=0,f=this.zpp_inner.colarb;if(!b||f.oc1.fresh){var m=f.oc1.wrapper().totalImpulse(a);c+=
1*m.get_x();d+=1*m.get_y();e+=1*m.get_z();m.dispose()}!f.hc2||b&&!f.oc2.fresh||(a=f.oc2.wrapper().totalImpulse(a),c+=1*a.get_x(),d+=1*a.get_y(),e+=1*a.get_z(),a.dispose());return oa.get(c,d,e)},__class__:Ah});var sj=function(){this.zpp_inner=null};k["nape.dynamics.Contact"]=sj;sj.__name__=["nape","dynamics","Contact"];sj.prototype={zpp_inner:null,normalImpulse:function(a){var b=this.zpp_inner.arbiter.colarb,c=this.zpp_inner.inner,d=c.jnAcc;return null==a?oa.get(b.nx*d,b.ny*d):a==b.b1.outer?oa.get(b.nx*
-d,b.ny*-d,-(b.ny*c.r1x-b.nx*c.r1y)*d):oa.get(b.nx*d,b.ny*d,(b.ny*c.r2x-b.nx*c.r2y)*d)},totalImpulse:function(a){var b=this.zpp_inner.arbiter.colarb,c=this.zpp_inner.inner,d=c.jnAcc,e=c.jtAcc,f=b.jrAcc;if(null==a)return oa.get(b.nx*d-b.ny*e,b.ny*d+b.nx*e,f);var m=b.nx*d-b.ny*e;d=b.ny*d+b.nx*e;return a==b.b1.outer?oa.get(-m,-d,-(d*c.r1x-m*c.r1y)-f):oa.get(m,d,d*c.r2x-m*c.r2y+f)},toString:function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},__class__:sj};
var Hd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.dynamics.ContactIterator"]=Hd;Hd.__name__=["nape","dynamics","ContactIterator"];Hd.get=function(a){if(null==Hd.zpp_pool){var b=new Hd;Wf.internal=!1}else b=Hd.zpp_pool,Hd.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Hd.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Hd.zpp_pool;Hd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Hd};var Ak=function(){this.zpp_inner=new Wf;this.zpp_inner.outer=this};k["nape.dynamics.ContactList"]=Ak;Ak.__name__=["nape","dynamics","ContactList"];Ak.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=
0;for(var a=this.zpp_inner.inner.begin();null!=a;){var b=a.elem();b.active&&b.arbiter.active&&this.zpp_inner.user_length++;a=a.next}}return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.begin();;){var b=this.zpp_inner.at_ite.elem();if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=
a;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){b=this.zpp_inner.at_ite.elem();if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elem().wrapper()},iterator:function(){this.zpp_inner.valmod();return Hd.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Ak,__properties__:{get_length:"get_length"}};
var Bh=function(){this.zpp_inner=null};k["nape.dynamics.FluidArbiter"]=Bh;Bh.__name__=["nape","dynamics","FluidArbiter"];Bh.__super__=ke;Bh.prototype=w(ke.prototype,{buoyancyImpulse:function(a){var b=this.zpp_inner.fluidarb;return null==a?oa.get(b.buoyx,b.buoyy,0):a.zpp_inner==this.zpp_inner.b2?oa.get(b.buoyx,b.buoyy,b.buoyy*b.r2x-b.buoyx*b.r2y):oa.get(-b.buoyx,-b.buoyy,-(b.buoyy*b.r1x-b.buoyx*b.r1y))},dragImpulse:function(a){var b=this.zpp_inner.fluidarb;a=null==a||a.zpp_inner==this.zpp_inner.b2?
1:-1;return oa.get(b.dampx*a,b.dampy*a,b.adamp*a)},totalImpulse:function(a,b){b=this.buoyancyImpulse(a);a=this.dragImpulse(a);a.set_x(a.get_x()+b.get_x());a.set_y(a.get_y()+b.get_y());a.set_z(a.get_z()+b.get_z());b.dispose();return a},__class__:Bh});var Bk=function(a){null==a&&(a=!1);this.zpp_inner=new tj;this.zpp_inner.outer=this;this.set_ignore(a)};k["nape.dynamics.InteractionGroup"]=Bk;Bk.__name__=["nape","dynamics","InteractionGroup"];Bk.prototype={zpp_inner:null,get_ignore:function(){return this.zpp_inner.ignore},
set_ignore:function(a){this.get_ignore()!=a&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=a);return this.get_ignore()},toString:function(){var a="InteractionGroup";this.get_ignore()&&(a+=":ignore");return a},__class__:Bk,__properties__:{set_ignore:"set_ignore",get_ignore:"get_ignore"}};var Pd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.dynamics.InteractionGroupIterator"]=Pd;Pd.__name__=["nape","dynamics","InteractionGroupIterator"];Pd.get=function(a){if(null==
Pd.zpp_pool){var b=new Pd;Xf.internal=!1}else b=Pd.zpp_pool,Pd.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Pd.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Pd.zpp_pool;Pd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Pd};
var Ck=function(){this.zpp_inner=new Xf;this.zpp_inner.outer=this};k["nape.dynamics.InteractionGroupList"]=Ck;Ck.__name__=["nape","dynamics","InteractionGroupList"];Ck.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||
null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().outer},iterator:function(){this.zpp_inner.valmod();return Pd.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Ck,__properties__:{get_length:"get_length"}};
var Dk=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.zpp_inner=null;this.zpp_inner=Yb.get(a,b,a+c,b+d);this.zpp_inner.outer=this};k["nape.geom.AABB"]=Dk;Dk.__name__=["nape","geom","AABB"];Dk.prototype={zpp_inner:null,toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:Dk};var Ek=function(){this.zpp_inner=null};k["nape.geom.ConvexResult"]=Ek;Ek.__name__=["nape","geom","ConvexResult"];Ek.prototype={zpp_inner:null,get_toi:function(){return this.zpp_inner.toiDistance},
get_shape:function(){return this.zpp_inner.shape},toString:function(){return"{ shape: "+u.string(this.get_shape())+" toi: "+this.get_toi()+" }"},__class__:Ek,__properties__:{get_shape:"get_shape",get_toi:"get_toi"}};var Id=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.geom.ConvexResultIterator"]=Id;Id.__name__=["nape","geom","ConvexResultIterator"];Id.get=function(a){if(null==Id.zpp_pool){var b=new Id;pg.internal=!1}else b=Id.zpp_pool,Id.zpp_pool=b.zpp_next;
b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Id.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Id.zpp_pool;Id.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Id};var Fk=function(){this.zpp_inner=new pg;this.zpp_inner.outer=this};k["nape.geom.ConvexResultList"]=
Fk;Fk.__name__=["nape","geom","ConvexResultList"];Fk.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem()},iterator:function(){this.zpp_inner.valmod();return Id.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Fk,__properties__:{get_length:"get_length"}};var De=function(a){this.zpp_pool=this.zpp_inner=null;this.zpp_inner=new uj(this);if(null!=
a){if(a instanceof Array&&null==a.__enum__)for(var b=0;b<a.length;){var c=a[b];++b;c=pc.get(c.get_x(),c.get_y());null==this.zpp_inner.vertices?this.zpp_inner.vertices=c.prev=c.next=c:(c.prev=this.zpp_inner.vertices,c.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=c,this.zpp_inner.vertices.next=c);this.zpp_inner.vertices=c}else if(u.is(a,Nb))for(b=a.iterator();b.hasNext();)c=b.next(),c=pc.get(c.get_x(),c.get_y()),null==this.zpp_inner.vertices?this.zpp_inner.vertices=c.prev=c.next=
c:(c.prev=this.zpp_inner.vertices,c.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=c,this.zpp_inner.vertices.next=c),this.zpp_inner.vertices=c;else if(u.is(a,De)&&(b=a.zpp_inner.vertices,null!=b))for(c=b;;){var d=v.get(c.x,c.y);c=c.next;var e=pc.get(d.get_x(),d.get_y());null==this.zpp_inner.vertices?this.zpp_inner.vertices=e.prev=e.next=e:(e.prev=this.zpp_inner.vertices,e.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=e,this.zpp_inner.vertices.next=e);this.zpp_inner.vertices=
e;d.dispose();if(c==b)break}this.skipForward(1);if(a instanceof Array&&null==a.__enum__)for(b=0;b<a.length;)c=a[b],c.zpp_inner.weak?(c.dispose(),c=!0):c=!1,c?a.splice(b,1):++b;else if(u.is(a,Nb))for(null!=a.zpp_inner._validate&&a.zpp_inner._validate(),a=a.zpp_inner.inner,b=null,c=a.begin();null!=c;)d=c.elem(),d.outer.zpp_inner.weak?(c=a.erase(b),d.outer.zpp_inner.weak&&d.outer.dispose()):(b=c,c=c.next)}};k["nape.geom.GeomPoly"]=De;De.__name__=["nape","geom","GeomPoly"];De.get=function(a){if(null==
Mc.poolGeomPoly)var b=new De;else b=Mc.poolGeomPoly,Mc.poolGeomPoly=b.zpp_pool,b.zpp_pool=null;if(null!=a){if(a instanceof Array&&null==a.__enum__)for(var c=0;c<a.length;){var d=a[c];++c;d=pc.get(d.get_x(),d.get_y());null==b.zpp_inner.vertices?b.zpp_inner.vertices=d.prev=d.next=d:(d.prev=b.zpp_inner.vertices,d.next=b.zpp_inner.vertices.next,b.zpp_inner.vertices.next.prev=d,b.zpp_inner.vertices.next=d);b.zpp_inner.vertices=d}else if(u.is(a,Nb))for(c=a.iterator();c.hasNext();)d=c.next(),d=pc.get(d.get_x(),
d.get_y()),null==b.zpp_inner.vertices?b.zpp_inner.vertices=d.prev=d.next=d:(d.prev=b.zpp_inner.vertices,d.next=b.zpp_inner.vertices.next,b.zpp_inner.vertices.next.prev=d,b.zpp_inner.vertices.next=d),b.zpp_inner.vertices=d;else if(u.is(a,De)&&(c=a.zpp_inner.vertices,null!=c))for(d=c;;){var e=v.get(d.x,d.y);d=d.next;var f=pc.get(e.get_x(),e.get_y());null==b.zpp_inner.vertices?b.zpp_inner.vertices=f.prev=f.next=f:(f.prev=b.zpp_inner.vertices,f.next=b.zpp_inner.vertices.next,b.zpp_inner.vertices.next.prev=
f,b.zpp_inner.vertices.next=f);b.zpp_inner.vertices=f;e.dispose();if(d==c)break}b.skipForward(1);if(a instanceof Array&&null==a.__enum__)for(c=0;c<a.length;)d=a[c],d.zpp_inner.weak?(d.dispose(),d=!0):d=!1,d?a.splice(c,1):++c;else if(u.is(a,Nb))for(null!=a.zpp_inner._validate&&a.zpp_inner._validate(),a=a.zpp_inner.inner,c=null,d=a.begin();null!=d;)e=d.elem(),e.outer.zpp_inner.weak?(d=a.erase(c),e.outer.zpp_inner.weak&&e.outer.dispose()):(c=d,d=d.next)}return b};De.prototype={zpp_pool:null,zpp_inner:null,
skipForward:function(a){if(null!=this.zpp_inner.vertices)if(0<a)for(;0<a--;)this.zpp_inner.vertices=this.zpp_inner.vertices.next;else if(0>a)for(;0>a++;)this.zpp_inner.vertices=this.zpp_inner.vertices.prev;return this},toString:function(){var a="GeomPoly[",b=this.zpp_inner.vertices,c=this.zpp_inner.vertices;if(null!=b)for(;;){var d=b;d!=this.zpp_inner.vertices&&(a+=",");a+="{"+d.x+","+d.y+"}";b=b.next;if(b==c)break}return a+"]"},__class__:De};var gc=function(){this.zpp_next=null;this.zpp_critical=
!1;this.zpp_i=0;this.zpp_inner=null};k["nape.geom.GeomPolyIterator"]=gc;gc.__name__=["nape","geom","GeomPolyIterator"];gc.get=function(a){if(null==gc.zpp_pool){var b=new gc;Yf.internal=!1}else b=gc.zpp_pool,gc.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};gc.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=
gc.zpp_pool;gc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:gc};var Gk=function(){this.zpp_inner=new Yf;this.zpp_inner.outer=this};k["nape.geom.GeomPolyList"]=Gk;Gk.__name__=["nape","geom","GeomPolyList"];Gk.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},
at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().outer},iterator:function(){this.zpp_inner.valmod();return gc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=
c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Gk,__properties__:{get_length:"get_length"}};var Hk=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);null==a&&(a=1);this.zpp_inner=null;this.zpp_inner=of.get();this.zpp_inner.outer=this;this.set_a(a);this.set_b(b);this.set_tx(e);this.set_c(c);this.set_d(d);this.set_ty(f)};k["nape.geom.Mat23"]=Hk;Hk.__name__=["nape","geom","Mat23"];Hk.prototype={zpp_inner:null,get_a:function(){return this.zpp_inner.a},
set_a:function(a){this.zpp_inner.a=a;this.zpp_inner.invalidate();return this.get_a()},get_b:function(){return this.zpp_inner.b},set_b:function(a){this.zpp_inner.b=a;this.zpp_inner.invalidate();return this.get_b()},get_c:function(){return this.zpp_inner.c},set_c:function(a){this.zpp_inner.c=a;this.zpp_inner.invalidate();return this.get_c()},get_d:function(){return this.zpp_inner.d},set_d:function(a){this.zpp_inner.d=a;this.zpp_inner.invalidate();return this.get_d()},get_tx:function(){return this.zpp_inner.tx},
set_tx:function(a){this.zpp_inner.tx=a;this.zpp_inner.invalidate();return this.get_tx()},get_ty:function(){return this.zpp_inner.ty},set_ty:function(a){this.zpp_inner.ty=a;this.zpp_inner.invalidate();return this.get_ty()},toString:function(){return"{ a: "+this.get_a()+" b: "+this.get_b()+" c: "+this.get_c()+" d: "+this.get_d()+" tx: "+this.get_tx()+" ty: "+this.get_ty()+" }"},__class__:Hk,__properties__:{set_ty:"set_ty",get_ty:"get_ty",set_tx:"set_tx",get_tx:"get_tx",set_d:"set_d",get_d:"get_d",set_c:"set_c",
get_c:"get_c",set_b:"set_b",get_b:"get_b",set_a:"set_a",get_a:"get_a"}};var Ik=function(a,b){this.zpp_inner=new vj(a,b);this.zpp_inner.outer=this};k["nape.geom.MatMN"]=Ik;Ik.__name__=["nape","geom","MatMN"];Ik.prototype={zpp_inner:null,get_rows:function(){return this.zpp_inner.m},get_cols:function(){return this.zpp_inner.n},x:function(a,b){return this.zpp_inner.x[a*this.get_cols()+b]},toString:function(){for(var a="{ ",b=!0,c=0,d=this.get_rows();c<d;){var e=c++;b||(a+="; ");b=!1;for(var f=0,m=this.get_cols();f<
m;){var h=f++;a+=this.x(e,h)+" "}}return a+"}"},__class__:Ik,__properties__:{get_cols:"get_cols",get_rows:"get_rows"}};var Jk=function(){this.zpp_inner=null};k["nape.geom.RayResult"]=Jk;Jk.__name__=["nape","geom","RayResult"];Jk.prototype={zpp_inner:null,get_distance:function(){return this.zpp_inner.toiDistance},get_inner:function(){return this.zpp_inner.inner},get_shape:function(){return this.zpp_inner.shape},toString:function(){return"{ shape: "+u.string(this.get_shape())+" distance: "+this.get_distance()+
" ?inner: "+u.string(this.get_inner())+" }"},__class__:Jk,__properties__:{get_shape:"get_shape",get_inner:"get_inner",get_distance:"get_distance"}};var qc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.geom.RayResultIterator"]=qc;qc.__name__=["nape","geom","RayResultIterator"];qc.get=function(a){if(null==qc.zpp_pool){var b=new qc;qg.internal=!1}else b=qc.zpp_pool,qc.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};qc.prototype={zpp_inner:null,
zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=qc.zpp_pool;qc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:qc};var Kk=function(){this.zpp_inner=new qg;this.zpp_inner.outer=this};k["nape.geom.RayResultList"]=Kk;Kk.__name__=["nape","geom","RayResultList"];Kk.prototype={zpp_inner:null,
get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=
this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem()},iterator:function(){this.zpp_inner.valmod();return qc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Kk,__properties__:{get_length:"get_length"}};var td=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.geom.Vec2Iterator"]=td;td.__name__=["nape","geom","Vec2Iterator"];td.get=
function(a){if(null==td.zpp_pool){var b=new td;Jf.internal=!1}else b=td.zpp_pool,td.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};td.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=td.zpp_pool;td.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},
__class__:td};var Nb=function(){this.zpp_inner=new Jf;this.zpp_inner.outer=this};k["nape.geom.Vec2List"]=Nb;Nb.__name__=["nape","geom","Vec2List"];Nb.fromArray=function(a){for(var b=new Nb,c=0;c<a.length;){var d=a[c];++c;b.push(d)}return b};Nb.prototype={zpp_inner:null,get_length:function(){return this.zpp_gl()},zpp_gl:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},
zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b=null!=
this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},empty:function(){return 0==this.get_length()},
iterator:function(){this.zpp_vm();return td.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Nb,__properties__:{get_length:"get_length"}};var oa=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.zpp_pool=null;this.zpp_inner=new wj;this.zpp_inner.outer=this;this.set_x(a);this.set_y(b);this.set_z(c)};k["nape.geom.Vec3"]=oa;oa.__name__=["nape","geom","Vec3"];oa.get=
function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);if(null==Mc.poolVec3)var d=new oa;else d=Mc.poolVec3,Mc.poolVec3=d.zpp_pool,d.zpp_pool=null;d.setxyz(a,b,c);d.zpp_inner.immutable=!1;d.zpp_inner._validate=null;return d};oa.prototype={zpp_inner:null,zpp_pool:null,get_x:function(){this.zpp_inner.validate();return this.zpp_inner.x},set_x:function(a){this.zpp_inner.x=a;return this.get_x()},get_y:function(){this.zpp_inner.validate();return this.zpp_inner.y},set_y:function(a){this.zpp_inner.y=
a;return this.get_y()},get_z:function(){this.zpp_inner.validate();return this.zpp_inner.z},set_z:function(a){this.zpp_inner.z=a;return this.get_z()},dispose:function(){this.zpp_pool=Mc.poolVec3;Mc.poolVec3=this},setxyz:function(a,b,c){this.set_x(a);this.set_y(b);this.set_z(c);return this},xy:function(a){null==a&&(a=!1);return v.get(this.get_x(),this.get_y(),a)},toString:function(){return"{ x: "+this.get_x()+" y: "+this.get_y()+" z: "+this.get_z()+" }"},__class__:oa,__properties__:{set_z:"set_z",get_z:"get_z",
set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}};var jd=function(){};k["nape.geom.Winding"]=jd;jd.__name__=["nape","geom","Winding"];jd.__properties__={get_ANTICLOCKWISE:"get_ANTICLOCKWISE",get_CLOCKWISE:"get_CLOCKWISE",get_UNDEFINED:"get_UNDEFINED"};jd.get_UNDEFINED=function(){null==r.Winding_UNDEFINED&&(r.Winding_UNDEFINED=new jd,r.internal=!1);return r.Winding_UNDEFINED};jd.get_CLOCKWISE=function(){null==r.Winding_CLOCKWISE&&(r.Winding_CLOCKWISE=new jd,r.internal=!1);return r.Winding_CLOCKWISE};
jd.get_ANTICLOCKWISE=function(){null==r.Winding_ANTICLOCKWISE&&(r.Winding_ANTICLOCKWISE=new jd,r.internal=!1);return r.Winding_ANTICLOCKWISE};jd.prototype={toString:function(){return this==jd.get_UNDEFINED()?"UNDEFINED":this==jd.get_CLOCKWISE()?"CLOCKWISE":this==jd.get_ANTICLOCKWISE()?"ANTICLOCKWISE":""},__class__:jd};var ud=function(){this.zpp_inner_i=null};k["nape.phys.Interactor"]=ud;ud.__name__=["nape","phys","Interactor"];ud.prototype={zpp_inner_i:null,get_id:function(){return this.zpp_inner_i.id},
get_userData:function(){null==this.zpp_inner_i.userData&&(this.zpp_inner_i.userData={});return this.zpp_inner_i.userData},get_cbTypes:function(){null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes();return this.zpp_inner_i.wrap_cbTypes},toString:function(){return""},__class__:ud,__properties__:{get_cbTypes:"get_cbTypes",get_userData:"get_userData",get_id:"get_id"}};var da=function(a,b){this.zpp_inner_i=this.graphic=null;this.zpp_inner=new pf;this.zpp_inner.outer=this;this.zpp_inner.outer_i=
this;this.zpp_inner_i=this.zpp_inner;this.graphicOffset=new v(0,0);null!=b?(this.zpp_inner.posx=b.get_x(),this.zpp_inner.posy=b.get_y()):(this.zpp_inner.posx=0,this.zpp_inner.posy=0);this.set_type(null==a?Aa.get_DYNAMIC():a);null!=b&&b.zpp_inner.weak&&b.dispose();this.zpp_inner_i.insert_cbtype(ua.get_ANY_BODY().zpp_inner)};k["nape.phys.Body"]=da;da.__name__=["nape","phys","Body"];da.__super__=ud;da.prototype=w(ud.prototype,{zpp_inner:null,graphic:null,graphicOffset:null,get_type:function(){return pf.types[this.zpp_inner.type]},
set_type:function(a){this.zpp_inner.immutable_midstep("Body::type");this.get_type()!=a&&(a=a==Aa.get_DYNAMIC()?2:a==Aa.get_KINEMATIC()?3:1,1==a&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,a):this.zpp_inner.type=a);return this.get_type()},isStatic:function(){return this.zpp_inner.isStatic()},isDynamic:function(){return this.zpp_inner.isDynamic()},
get_shapes:function(){return this.zpp_inner.wrap_shapes},get_space:function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},set_space:function(a){this.zpp_inner.immutable_midstep("Body::space");this.get_space()!=a&&(null!=this.get_space()&&(this.zpp_inner.component.woken=!1),null!=this.get_space()&&this.get_space().get_bodies().remove(this),null!=a&&a.get_bodies().add(this));return this.get_space()},get_arbiters:function(){null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=
$e.get(this.zpp_inner.arbiters,!0));return this.zpp_inner.wrap_arbiters},get_isSleeping:function(){return this.zpp_inner.component.sleeping},get_constraints:function(){null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=Gd.get(this.zpp_inner.constraints,!0));return this.zpp_inner.wrap_constraints},get_position:function(){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},get_velocity:function(){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();
return this.zpp_inner.wrap_vel},get_rotation:function(){return this.zpp_inner.rot},set_rotation:function(a){this.zpp_inner.immutable_midstep("Body::rotation");this.get_rotation()!=a&&(this.zpp_inner.rot=a,this.zpp_inner.invalidate_rot(),this.zpp_inner.wake());return this.get_rotation()},get_angularVel:function(){return this.zpp_inner.angvel},set_angularVel:function(a){this.get_angularVel()!=a&&(this.zpp_inner.angvel=a,this.zpp_inner.invalidate_wake());return this.get_angularVel()},get_allowMovement:function(){return!this.zpp_inner.nomove},
set_allowMovement:function(a){this.zpp_inner.immutable_midstep("Body::"+(null==a?"null":""+a));this.get_allowMovement()!=a&&(this.zpp_inner.nomove=!a,this.zpp_inner.invalidate_mass());return this.get_allowMovement()},get_allowRotation:function(){return!this.zpp_inner.norotate},set_allowRotation:function(a){this.zpp_inner.immutable_midstep("Body::"+(null==a?"null":""+a));this.get_allowRotation()!=a&&(this.zpp_inner.norotate=!a,this.zpp_inner.invalidate_inertia());return this.get_allowRotation()},get_gravMass:function(){this.zpp_inner.validate_gravMass();
return this.zpp_inner.gravMass},set_gravMass:function(a){this.zpp_inner.immutable_midstep("Body::gravMass");this.zpp_inner.gravMassMode=1;this.zpp_inner.gravMass=a;this.zpp_inner.invalidate_gravMass();return this.get_gravMass()},localPointToWorld:function(a,b){null==b&&(b=!1);this.zpp_inner.validate_axis();var c=this.zpp_inner.axisy*a.get_x()-this.zpp_inner.axisx*a.get_y();var d=a.get_x()*this.zpp_inner.axisx+a.get_y()*this.zpp_inner.axisy;a.zpp_inner.weak&&a.dispose();return v.get(c+this.zpp_inner.posx,
d+this.zpp_inner.posy,b)},worldPointToLocal:function(a,b){null==b&&(b=!1);this.zpp_inner.validate_axis();var c=a.get_x()-this.zpp_inner.posx;var d=a.get_y()-this.zpp_inner.posy;var e=c*this.zpp_inner.axisy+d*this.zpp_inner.axisx;c=d*this.zpp_inner.axisy-c*this.zpp_inner.axisx;a.zpp_inner.weak&&a.dispose();return v.get(e,c,b)},localVectorToWorld:function(a,b){null==b&&(b=!1);this.zpp_inner.validate_axis();var c=this.zpp_inner.axisy*a.get_x()-this.zpp_inner.axisx*a.get_y();var d=a.get_x()*this.zpp_inner.axisx+
a.get_y()*this.zpp_inner.axisy;a.zpp_inner.weak&&a.dispose();return v.get(c,d,b)},applyImpulse:function(a,b,c){null==c&&(c=!1);if(c&&this.get_isSleeping())return a.zpp_inner.weak&&a.dispose(),null!=b&&b.zpp_inner.weak&&b.dispose(),this;this.zpp_inner.validate_mass();var d=this.zpp_inner.imass;this.zpp_inner.velx+=a.get_x()*d;this.zpp_inner.vely+=a.get_y()*d;if(null!=b){d=b.get_x()-this.zpp_inner.posx;var e=b.get_y()-this.zpp_inner.posy;this.zpp_inner.validate_inertia();this.zpp_inner.angvel+=(a.get_y()*
d-a.get_x()*e)*this.zpp_inner.iinertia;b.zpp_inner.weak&&b.dispose()}c||this.isDynamic()&&this.zpp_inner.invalidate_wake();a.zpp_inner.weak&&a.dispose();return this},translateShapes:function(a){this.zpp_inner.immutable_midstep("Body::translateShapes()");var b=a.zpp_inner.weak;a.zpp_inner.weak=!1;for(var c=this.zpp_inner.shapes.begin();null!=c;)c.elem().outer.translate(a),c=c.next;a.zpp_inner.weak=b;a.zpp_inner.weak&&a.dispose();return this},align:function(){this.zpp_inner.immutable_midstep("Body::align()");
this.zpp_inner.validate_localCOM();var a=v.get(-this.zpp_inner.localCOMx,-this.zpp_inner.localCOMy);this.translateShapes(a);var b=this.localVectorToWorld(a);this.get_position().subeq(b);this.zpp_inner.pre_posx<cb.POSINF()&&(this.zpp_inner.pre_posx-=1*b.get_x(),this.zpp_inner.pre_posy-=1*b.get_y());a.dispose();b.dispose();return this},setShapeMaterials:function(a){this.zpp_inner.immutable_midstep("Body::setShapeMaterials()");for(var b=this.zpp_inner.shapes.begin();null!=b;)b.elem().outer.set_material(a),
b=b.next;return this},get_localCOM:function(){null==this.zpp_inner.wrap_localCOM&&(this.zpp_inner.wrap_localCOM=v.get(this.zpp_inner.localCOMx,this.zpp_inner.localCOMy),this.zpp_inner.wrap_localCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_localCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_localCOM.zpp_inner._validate=(Rb=this.zpp_inner,l(Rb,Rb.getlocalCOM)));return this.zpp_inner.wrap_localCOM},normalImpulse:function(a,b){null==b&&(b=!1);for(var c=0,d=0,e=0,f=this.get_arbiters().iterator();f.hasNext();){var m=
f.next().zpp_inner;m.type!=Ea.COL||null!=a&&m.b2!=a.zpp_inner&&m.b1!=a.zpp_inner||(m=m.wrapper().get_collisionArbiter().normalImpulse(this,b),c+=1*m.get_x(),d+=1*m.get_y(),e+=1*m.get_z(),m.dispose())}return oa.get(c,d,e)},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(this.isDynamic()?"dynamic":this.isStatic()?"static":"kinematic"))+")#"+this.get_id()},__class__:da,__properties__:w(ud.prototype.__properties__,{get_localCOM:"get_localCOM",set_gravMass:"set_gravMass",get_gravMass:"get_gravMass",
set_allowRotation:"set_allowRotation",get_allowRotation:"get_allowRotation",set_allowMovement:"set_allowMovement",get_allowMovement:"get_allowMovement",set_angularVel:"set_angularVel",get_angularVel:"get_angularVel",set_rotation:"set_rotation",get_rotation:"get_rotation",get_velocity:"get_velocity",get_position:"get_position",get_constraints:"get_constraints",get_isSleeping:"get_isSleeping",get_arbiters:"get_arbiters",set_space:"set_space",get_space:"get_space",get_shapes:"get_shapes",set_type:"set_type",
get_type:"get_type"})});var vd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.phys.BodyIterator"]=vd;vd.__name__=["nape","phys","BodyIterator"];vd.get=function(a){if(null==vd.zpp_pool){var b=new vd;af.internal=!1}else b=vd.zpp_pool,vd.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};vd.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=vd.zpp_pool;vd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:vd};var xj=function(){this.zpp_inner=new af;this.zpp_inner.outer=this};k["nape.phys.BodyList"]=xj;xj.__name__=["nape","phys","BodyList"];xj.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=
this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().outer},push:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},unshift:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}else this.zpp_inner.inner.add(a.zpp_inner);this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},pop:function(){this.zpp_inner.modify_test();
this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){var a=this.zpp_inner.inner.front();var b=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(b);this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2);a=null==b?this.zpp_inner.inner.front():b.next.elem();var c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);
this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}this.zpp_inner.invalidate();return a.outer},shift:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var a=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2);var b=null==a?this.zpp_inner.inner.front():a.next.elem();var c=b.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);
this.zpp_inner.dontremove||this.zpp_inner.inner.erase(a)}else b=this.zpp_inner.inner.front(),a=b.outer,null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.pop();this.zpp_inner.invalidate();return b.outer},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=!1;for(var c=this.zpp_inner.inner.begin();null!=c;){if(c.elem()==a.zpp_inner){b=!0;break}c=
c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},clear:function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},empty:function(){return this.zpp_inner.inner.empty()},iterator:function(){this.zpp_inner.valmod();return vd.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=
",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:xj,__properties__:{get_length:"get_length"}};var Aa=function(){};k["nape.phys.BodyType"]=Aa;Aa.__name__=["nape","phys","BodyType"];Aa.__properties__={get_KINEMATIC:"get_KINEMATIC",get_DYNAMIC:"get_DYNAMIC",get_STATIC:"get_STATIC"};Aa.get_STATIC=function(){null==r.BodyType_STATIC&&(r.BodyType_STATIC=new Aa,r.internal=!1);return r.BodyType_STATIC};Aa.get_DYNAMIC=function(){null==r.BodyType_DYNAMIC&&(r.BodyType_DYNAMIC=new Aa,r.internal=
!1);return r.BodyType_DYNAMIC};Aa.get_KINEMATIC=function(){null==r.BodyType_KINEMATIC&&(r.BodyType_KINEMATIC=new Aa,r.internal=!1);return r.BodyType_KINEMATIC};Aa.prototype={toString:function(){return this==Aa.get_STATIC()?"STATIC":this==Aa.get_DYNAMIC()?"DYNAMIC":this==Aa.get_KINEMATIC()?"KINEMATIC":""},__class__:Aa};var yj=function(){this.zpp_inner_i=null;this.zpp_inner=new Ch;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;this.zpp_inner.insert_cbtype(ua.get_ANY_COMPOUND().zpp_inner)};
k["nape.phys.Compound"]=yj;yj.__name__=["nape","phys","Compound"];yj.__super__=ud;yj.prototype=w(ud.prototype,{zpp_inner:null,toString:function(){return"Compound"+this.get_id()},__class__:yj});var kd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.phys.CompoundIterator"]=kd;kd.__name__=["nape","phys","CompoundIterator"];kd.get=function(a){if(null==kd.zpp_pool){var b=new kd;qf.internal=!1}else b=kd.zpp_pool,kd.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;
b.zpp_critical=!1;return b};kd.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=kd.zpp_pool;kd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:kd};var zj=function(){this.zpp_inner=new qf;this.zpp_inner.outer=this};k["nape.phys.CompoundList"]=zj;zj.__name__=
["nape","phys","CompoundList"];zj.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=!1;for(var c=this.zpp_inner.inner.begin();null!=c;){if(c.elem()==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},iterator:function(){this.zpp_inner.valmod();
return kd.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:zj,__properties__:{get_length:"get_length"}};var Lk=function(a,b){null==b&&(b=1);null==a&&(a=1);this.zpp_inner=null;null==Zf.zpp_pool?this.zpp_inner=new Zf:(this.zpp_inner=Zf.zpp_pool,Zf.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);this.zpp_inner.alloc();this.zpp_inner.outer=this;this.set_density(a);this.set_viscosity(b)};
k["nape.phys.FluidProperties"]=Lk;Lk.__name__=["nape","phys","FluidProperties"];Lk.prototype={zpp_inner:null,get_density:function(){return 1E3*this.zpp_inner.density},set_density:function(a){a!=this.get_density()&&(this.zpp_inner.density=a/1E3,this.zpp_inner.invalidate());return this.get_density()},get_viscosity:function(){return this.zpp_inner.viscosity},set_viscosity:function(a){a!=this.get_viscosity()&&(this.zpp_inner.viscosity=a/1,this.zpp_inner.invalidate());return this.get_viscosity()},get_gravity:function(){return this.zpp_inner.wrap_gravity},
toString:function(){return"{ density: "+this.get_density()+" viscosity: "+this.get_viscosity()+" gravity: "+u.string(this.get_gravity())+" }"},__class__:Lk,__properties__:{get_gravity:"get_gravity",set_viscosity:"set_viscosity",get_viscosity:"get_viscosity",set_density:"set_density",get_density:"get_density"}};var Ec=function(){};k["nape.phys.GravMassMode"]=Ec;Ec.__name__=["nape","phys","GravMassMode"];Ec.__properties__={get_SCALED:"get_SCALED",get_FIXED:"get_FIXED",get_DEFAULT:"get_DEFAULT"};Ec.get_DEFAULT=
function(){null==r.GravMassMode_DEFAULT&&(r.GravMassMode_DEFAULT=new Ec,r.internal=!1);return r.GravMassMode_DEFAULT};Ec.get_FIXED=function(){null==r.GravMassMode_FIXED&&(r.GravMassMode_FIXED=new Ec,r.internal=!1);return r.GravMassMode_FIXED};Ec.get_SCALED=function(){null==r.GravMassMode_SCALED&&(r.GravMassMode_SCALED=new Ec,r.internal=!1);return r.GravMassMode_SCALED};Ec.prototype={toString:function(){return this==Ec.get_DEFAULT()?"DEFAULT":this==Ec.get_FIXED()?"FIXED":this==Ec.get_SCALED()?"SCALED":
""},__class__:Ec};var bf=function(){};k["nape.phys.InertiaMode"]=bf;bf.__name__=["nape","phys","InertiaMode"];bf.__properties__={get_FIXED:"get_FIXED",get_DEFAULT:"get_DEFAULT"};bf.get_DEFAULT=function(){null==r.InertiaMode_DEFAULT&&(r.InertiaMode_DEFAULT=new bf,r.internal=!1);return r.InertiaMode_DEFAULT};bf.get_FIXED=function(){null==r.InertiaMode_FIXED&&(r.InertiaMode_FIXED=new bf,r.internal=!1);return r.InertiaMode_FIXED};bf.prototype={toString:function(){return this==bf.get_DEFAULT()?"DEFAULT":
this==bf.get_FIXED()?"FIXED":""},__class__:bf};var rc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.phys.InteractorIterator"]=rc;rc.__name__=["nape","phys","InteractorIterator"];rc.get=function(a){if(null==rc.zpp_pool){var b=new rc;rf.internal=!1}else b=rc.zpp_pool,rc.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};rc.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=rc.zpp_pool;rc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:rc};var Mk=function(){this.zpp_inner=new rf;this.zpp_inner.outer=this};k["nape.phys.InteractorList"]=Mk;Mk.__name__=["nape","phys","InteractorList"];Mk.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=
!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().outer_i},iterator:function(){this.zpp_inner.valmod();
return rc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Mk,__properties__:{get_length:"get_length"}};var Qd=function(){};k["nape.phys.MassMode"]=Qd;Qd.__name__=["nape","phys","MassMode"];Qd.__properties__={get_FIXED:"get_FIXED",get_DEFAULT:"get_DEFAULT"};Qd.get_DEFAULT=function(){null==r.MassMode_DEFAULT&&(r.MassMode_DEFAULT=new Qd,r.internal=!1);return r.MassMode_DEFAULT};Qd.get_FIXED=
function(){null==r.MassMode_FIXED&&(r.MassMode_FIXED=new Qd,r.internal=!1);return r.MassMode_FIXED};Qd.prototype={toString:function(){return this==Qd.get_DEFAULT()?"DEFAULT":this==Qd.get_FIXED()?"FIXED":""},__class__:Qd};var Oa=function(a,b,c,d,e){null==e&&(e=.001);null==d&&(d=1);null==c&&(c=2);null==b&&(b=1);null==a&&(a=0);this.zpp_inner=null;null==qa.zpp_pool?this.zpp_inner=new qa:(this.zpp_inner=qa.zpp_pool,qa.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);this.zpp_inner.alloc();this.zpp_inner.outer=
this;this.set_elasticity(a);this.set_dynamicFriction(b);this.set_staticFriction(c);this.set_density(d);this.set_rollingFriction(e)};k["nape.phys.Material"]=Oa;Oa.__name__=["nape","phys","Material"];Oa.wood=function(){return new Oa(.4,.2,.38,.7,.005)};Oa.steel=function(){return new Oa(.2,.57,.74,7.8,.001)};Oa.prototype={zpp_inner:null,get_elasticity:function(){return this.zpp_inner.elasticity},set_elasticity:function(a){a!=this.get_elasticity()&&(this.zpp_inner.elasticity=a/1,this.zpp_inner.invalidate(qa.WAKE|
qa.ARBITERS));return this.get_elasticity()},get_dynamicFriction:function(){return this.zpp_inner.dynamicFriction},set_dynamicFriction:function(a){a!=this.get_dynamicFriction()&&(this.zpp_inner.dynamicFriction=a/1,this.zpp_inner.invalidate(qa.WAKE|qa.ANGDRAG|qa.ARBITERS));return this.get_dynamicFriction()},get_staticFriction:function(){return this.zpp_inner.staticFriction},set_staticFriction:function(a){a!=this.get_staticFriction()&&(this.zpp_inner.staticFriction=a/1,this.zpp_inner.invalidate(qa.WAKE|
qa.ARBITERS));return this.get_staticFriction()},get_density:function(){return 1E3*this.zpp_inner.density},set_density:function(a){a!=this.get_density()&&(this.zpp_inner.density=a/1E3,this.zpp_inner.invalidate(qa.WAKE|qa.PROPS));return this.get_density()},get_rollingFriction:function(){return this.zpp_inner.rollingFriction},set_rollingFriction:function(a){a!=this.get_rollingFriction()&&(this.zpp_inner.rollingFriction=a/1,this.zpp_inner.invalidate(qa.WAKE|qa.ARBITERS));return this.get_rollingFriction()},
toString:function(){return"{ elasticity: "+this.get_elasticity()+" dynamicFriction: "+this.get_dynamicFriction()+" staticFriction: "+this.get_staticFriction()+" density: "+this.get_density()+" rollingFriction: "+this.get_rollingFriction()+" }"},__class__:Oa,__properties__:{set_rollingFriction:"set_rollingFriction",get_rollingFriction:"get_rollingFriction",set_density:"set_density",get_density:"get_density",set_staticFriction:"set_staticFriction",get_staticFriction:"get_staticFriction",set_dynamicFriction:"set_dynamicFriction",
get_dynamicFriction:"get_dynamicFriction",set_elasticity:"set_elasticity",get_elasticity:"get_elasticity"}};var bd=function(){this.zpp_inner_i=this.zpp_inner=null};k["nape.shape.Shape"]=bd;bd.__name__=["nape","shape","Shape"];bd.__super__=ud;bd.prototype=w(ud.prototype,{zpp_inner:null,isCircle:function(){return this.zpp_inner.isCircle()},get_worldCOM:function(){null==this.zpp_inner.wrap_worldCOM&&(this.zpp_inner.wrap_worldCOM=v.get(this.zpp_inner.worldCOMx,this.zpp_inner.worldCOMy),this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=
!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=(Rb=this.zpp_inner,l(Rb,Rb.getworldCOM)));return this.zpp_inner.wrap_worldCOM},get_material:function(){return this.zpp_inner.material.wrapper()},set_material:function(a){this.zpp_inner.immutable_midstep("Shape::material");this.zpp_inner.setMaterial(a.zpp_inner);return this.get_material()},get_filter:function(){return this.zpp_inner.filter.wrapper()},set_filter:function(a){this.zpp_inner.immutable_midstep("Shape::filter");
this.zpp_inner.setFilter(a.zpp_inner);return this.get_filter()},translate:function(a){this.zpp_inner.immutable_midstep("Shape::translate()");0<a.lsq()&&(this.isCircle()?this.zpp_inner.circle.__translate(a.get_x(),a.get_y()):this.zpp_inner.polygon.__translate(a.get_x(),a.get_y()));a.zpp_inner.weak&&a.dispose();return this},toString:function(){return(this.isCircle()?"Circle":"Polygon")+"#"+this.get_id()},__class__:bd,__properties__:w(ud.prototype.__properties__,{set_filter:"set_filter",get_filter:"get_filter",
set_material:"set_material",get_material:"get_material",get_worldCOM:"get_worldCOM"})});var Gb=function(a,b,c,d){this.zpp_inner_zn=null;bd.call(this);this.zpp_inner_zn=new Dh;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;this.set_radius(a);null==b?(this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0):(this.zpp_inner.localCOMx=b.get_x(),this.zpp_inner.localCOMy=b.get_y(),b.zpp_inner.weak&&b.dispose());
null==c?(null==qa.zpp_pool?this.zpp_inner.material=new qa:(this.zpp_inner.material=qa.zpp_pool,qa.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),this.zpp_inner.material.alloc()):this.set_material(c);null==d?(null==Xb.zpp_pool?this.zpp_inner.filter=new Xb:(this.zpp_inner.filter=Xb.zpp_pool,Xb.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),this.zpp_inner.filter.alloc()):this.set_filter(d);this.zpp_inner_i.insert_cbtype(ua.get_ANY_SHAPE().zpp_inner)};k["nape.shape.Circle"]=
Gb;Gb.__name__=["nape","shape","Circle"];Gb.__super__=bd;Gb.prototype=w(bd.prototype,{zpp_inner_zn:null,get_radius:function(){return this.zpp_inner_zn.radius},set_radius:function(a){this.zpp_inner.immutable_midstep("Circle::radius");a!=this.get_radius()&&(this.zpp_inner_zn.radius=a,this.zpp_inner_zn.invalidate_radius());return this.get_radius()},__class__:Gb,__properties__:w(bd.prototype.__properties__,{set_radius:"set_radius",get_radius:"get_radius"})});var Aj=function(){this.zpp_inner=null};k["nape.shape.Edge"]=
Aj;Aj.__name__=["nape","shape","Edge"];Aj.prototype={zpp_inner:null,toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }";this.zpp_inner.polygon.validate_gaxi();return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+
this.zpp_inner.gnormy+" }")+" }"},__class__:Aj};var Ee=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.shape.EdgeIterator"]=Ee;Ee.__name__=["nape","shape","EdgeIterator"];Ee.get=function(a){if(null==Ee.zpp_pool){var b=new Ee;rg.internal=!1}else b=Ee.zpp_pool,Ee.zpp_pool=b.zpp_next;b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Ee.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Ee.zpp_pool;Ee.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Ee};var Nk=function(){this.zpp_inner=new rg;this.zpp_inner.outer=this};k["nape.shape.EdgeList"]=Nk;Nk.__name__=["nape","shape","EdgeList"];Nk.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=
!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&a!=this.get_length()-1&&(a=this.get_length()-2-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().wrapper()},
iterator:function(){this.zpp_inner.valmod();return Ee.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Nk,__properties__:{get_length:"get_length"}};var Za=function(a,b,c){this.zpp_inner_zn=null;bd.call(this);this.zpp_inner_zn=new Eh;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;if(a instanceof
Array&&null==a.__enum__)for(var d=0;d<a.length;){var e=a[d];++d;this.get_localVerts().push(e.copy())}else if(u.is(a,Nb))for(d=a.iterator();d.hasNext();)e=d.next(),this.get_localVerts().push(e.copy());else if(u.is(a,De)&&(d=a.zpp_inner.vertices,null!=d))for(e=d;;){var f=v.get(e.x,e.y);e=e.next;this.get_localVerts().push(f.copy());f.dispose();if(e==d)break}if(a instanceof Array&&null==a.__enum__)for(d=0;d<a.length;)e=a[d],e.zpp_inner.weak?(e.dispose(),e=!0):e=!1,e?a.splice(d,1):++d;else if(u.is(a,Nb))for(null!=
a.zpp_inner._validate&&a.zpp_inner._validate(),a=a.zpp_inner.inner,d=null,e=a.begin();null!=e;)f=e.elem(),f.outer.zpp_inner.weak?(e=a.erase(d),f.outer.zpp_inner.weak&&f.outer.dispose()):(d=e,e=e.next);null==b?(null==qa.zpp_pool?this.zpp_inner.material=new qa:(this.zpp_inner.material=qa.zpp_pool,qa.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),this.zpp_inner.material.alloc()):this.set_material(b);null==c?(null==Xb.zpp_pool?this.zpp_inner.filter=new Xb:(this.zpp_inner.filter=
Xb.zpp_pool,Xb.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),this.zpp_inner.filter.alloc()):this.set_filter(c);this.zpp_inner_i.insert_cbtype(ua.get_ANY_SHAPE().zpp_inner)};k["nape.shape.Polygon"]=Za;Za.__name__=["nape","shape","Polygon"];Za.rect=function(a,b,c,d,e){null==e&&(e=!1);return[v.get(a,b,e),v.get(a+c,b,e),v.get(a+c,b+d,e),v.get(a,b+d,e)]};Za.__super__=bd;Za.prototype=w(bd.prototype,{zpp_inner_zn:null,get_localVerts:function(){null==this.zpp_inner_zn.wrap_lverts&&
this.zpp_inner_zn.getlverts();return this.zpp_inner_zn.wrap_lverts},validity:function(){return this.zpp_inner_zn.valid()},__class__:Za,__properties__:w(bd.prototype.__properties__,{get_localVerts:"get_localVerts"})});var cf=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};k["nape.shape.ShapeIterator"]=cf;cf.__name__=["nape","shape","ShapeIterator"];cf.get=function(a){if(null==cf.zpp_pool){var b=new cf;Rd.internal=!1}else b=cf.zpp_pool,cf.zpp_pool=b.zpp_next;b.zpp_i=
0;b.zpp_inner=a;b.zpp_critical=!1;return b};cf.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=cf.zpp_pool;cf.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:cf};var Bj=function(){this.zpp_inner=new Rd;this.zpp_inner.outer=this};k["nape.shape.ShapeList"]=
Bj;Bj.__name__=["nape","shape","ShapeList"];Bj.prototype={zpp_inner:null,get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elem().outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(a.zpp_inner);else{if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=
c}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var c=this.empty()?null:this.zpp_inner.inner.iterator_at(this.get_length()-1);this.zpp_inner.push_ite=c}this.zpp_inner.push_ite=
this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)}else this.zpp_inner.inner.add(a.zpp_inner);this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b=!1;for(var c=this.zpp_inner.inner.begin();null!=c;){if(c.elem()==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),
this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},empty:function(){return this.zpp_inner.inner.empty()},iterator:function(){this.zpp_inner.valmod();return cf.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d=c.next();b||(a+=",");a+=null==d?"NULL":d.toString();b=!1}return a+"]"},__class__:Bj,__properties__:{get_length:"get_length"}};var le=function(){};k["nape.shape.ShapeType"]=le;le.__name__=["nape","shape",
"ShapeType"];le.__properties__={get_POLYGON:"get_POLYGON",get_CIRCLE:"get_CIRCLE"};le.get_CIRCLE=function(){null==r.ShapeType_CIRCLE&&(r.ShapeType_CIRCLE=new le,r.internal=!1);return r.ShapeType_CIRCLE};le.get_POLYGON=function(){null==r.ShapeType_POLYGON&&(r.ShapeType_POLYGON=new le,r.internal=!1);return r.ShapeType_POLYGON};le.prototype={toString:function(){return this==le.get_CIRCLE()?"CIRCLE":this==le.get_POLYGON()?"POLYGON":""},__class__:le};var Xa=function(){};k["nape.shape.ValidationResult"]=
Xa;Xa.__name__=["nape","shape","ValidationResult"];Xa.__properties__={get_SELF_INTERSECTING:"get_SELF_INTERSECTING",get_CONCAVE:"get_CONCAVE",get_DEGENERATE:"get_DEGENERATE",get_VALID:"get_VALID"};Xa.get_VALID=function(){null==r.ValidationResult_VALID&&(r.ValidationResult_VALID=new Xa,r.internal=!1);return r.ValidationResult_VALID};Xa.get_DEGENERATE=function(){null==r.ValidationResult_DEGENERATE&&(r.ValidationResult_DEGENERATE=new Xa,r.internal=!1);return r.ValidationResult_DEGENERATE};Xa.get_CONCAVE=
function(){null==r.ValidationResult_CONCAVE&&(r.ValidationResult_CONCAVE=new Xa,r.internal=!1);return r.ValidationResult_CONCAVE};Xa.get_SELF_INTERSECTING=function(){null==r.ValidationResult_SELF_INTERSECTING&&(r.ValidationResult_SELF_INTERSECTING=new Xa,r.internal=!1);return r.ValidationResult_SELF_INTERSECTING};Xa.prototype={toString:function(){return this==Xa.get_VALID()?"VALID":this==Xa.get_DEGENERATE()?"DEGENERATE":this==Xa.get_CONCAVE()?"CONCAVE":this==Xa.get_SELF_INTERSECTING()?"SELF_INTERSECTING":
""},__class__:Xa};var wd=function(){};k["nape.space.Broadphase"]=wd;wd.__name__=["nape","space","Broadphase"];wd.__properties__={get_SWEEP_AND_PRUNE:"get_SWEEP_AND_PRUNE",get_DYNAMIC_AABB_TREE:"get_DYNAMIC_AABB_TREE"};wd.get_DYNAMIC_AABB_TREE=function(){null==r.Broadphase_DYNAMIC_AABB_TREE&&(r.Broadphase_DYNAMIC_AABB_TREE=new wd,r.internal=!1);return r.Broadphase_DYNAMIC_AABB_TREE};wd.get_SWEEP_AND_PRUNE=function(){null==r.Broadphase_SWEEP_AND_PRUNE&&(r.Broadphase_SWEEP_AND_PRUNE=new wd,r.internal=
!1);return r.Broadphase_SWEEP_AND_PRUNE};wd.prototype={toString:function(){return this==wd.get_DYNAMIC_AABB_TREE()?"DYNAMIC_AABB_TREE":this==wd.get_SWEEP_AND_PRUNE()?"SWEEP_AND_PRUNE":""},__class__:wd};var Mg=function(a,b){this.zpp_inner=null;this.zpp_inner=new Cj(null==a?null:a.zpp_inner,b);this.zpp_inner.outer=this;null!=a&&a.zpp_inner.weak&&a.dispose()};k["nape.space.Space"]=Mg;Mg.__name__=["nape","space","Space"];Mg.prototype={zpp_inner:null,get_bodies:function(){return this.zpp_inner.wrap_bodies},
get_constraints:function(){return this.zpp_inner.wrap_constraints},get_world:function(){return this.zpp_inner.__static},get_listeners:function(){return this.zpp_inner.wrap_listeners},clear:function(){this.zpp_inner.clear()},step:function(a,b,c){null==c&&(c=10);null==b&&(b=10);this.zpp_inner.step(a,b,c)},__class__:Mg,__properties__:{get_listeners:"get_listeners",get_world:"get_world",get_constraints:"get_constraints",get_bodies:"get_bodies"}};var xd=function(){ia.call(this);this.__currentFrame=1;this.__currentLabels=
[];this.__totalFrames=0;this.enabled=!0;null!=xd.__initSymbol&&(this.__swf=xd.__initSWF,this.__symbol=xd.__initSymbol,xd.__initSWF=null,xd.__initSymbol=null,this.__fromSymbol(this.__swf,this.__symbol))};k["openfl.display.MovieClip"]=xd;xd.__name__=["openfl","display","MovieClip"];xd.__super__=ia;xd.prototype=w(ia.prototype,{enabled:null,__activeInstances:null,__activeInstancesByFrameObjectID:null,__currentFrame:null,__currentFrameLabel:null,__currentLabel:null,__currentLabels:null,__frameScripts:null,
__frameTime:null,__lastFrameScriptEval:null,__lastFrameUpdate:null,__playing:null,__swf:null,__symbol:null,__timeElapsed:null,__totalFrames:null,play:function(){null==this.__symbol||this.__playing||2>this.__totalFrames||(this.__playing=!0,this.__frameTime=u["int"](1E3/this.__swf.frameRate),this.__timeElapsed=0)},__enterFrame:function(a){if(null!=this.__symbol&&this.__playing){var b=this.__getNextFrame(a);if(this.__lastFrameScriptEval==b)return;if(null!=this.__frameScripts){if(b<this.__currentFrame){if(!this.__evaluateFrameScripts(this.__totalFrames))return;
this.__currentFrame=1}if(!this.__evaluateFrameScripts(b))return}else this.__currentFrame=b}if(null!=this.__symbol&&this.__currentFrame!=this.__lastFrameUpdate){this.__updateFrameLabel();var c=new Cb;b=0;for(var d=this.__currentFrame;b<d;){var e=b++;e=this.__symbol.frames[e];if(null!=e.objects)for(var f=0,m=e.objects;f<m.length;){var h=m[f];++f;switch(Q.enumIndex(h.type)){case 0:e=this.__activeInstancesByFrameObjectID.get(h.id);null!=e&&(c.set(h.id,e),this.__updateDisplayObject(e.displayObject,h));
break;case 1:e=c.get(h.id);null!=e&&null!=e.displayObject&&this.__updateDisplayObject(e.displayObject,h);break;case 2:c.remove(h.id)}}}b=[];d=[];for(e=c.iterator();e.hasNext();)c=e.next(),-1==b.indexOf(c)&&(0<c.clipDepth?d.push(c):b.push(c));b.sort(l(this,this.__sortDepths));f=0;for(m=b.length;f<m;){h=f++;var q=this.__children[h];e=b[h];c=e.depth;var y=e.displayObject;q!=y?(e=y,this.addChildAt(y,h)):e=this.__children[h];h=!1;for(q=0;q<d.length;)if(y=d[q],++q,c>y.depth&&c<=y.clipDepth){e.set_mask(y.displayObject);
h=!0;break}0<d.length&&!h&&null!=e.get_mask()&&e.set_mask(null)}d=b.length;for(e=this.__children.length;d<e;){b=this.__children[d];c=0;for(f=this.__activeInstances;c<f.length;)m=f[c],++c,m.displayObject==b&&(this.removeChild(b),--d,--e);++d}this.__lastFrameUpdate=this.__currentFrame}ia.prototype.__enterFrame.call(this,a)},__evaluateFrameScripts:function(a){var b=this.__currentFrame;for(a+=1;b<a;){var c=b++;if(c!=this.__lastFrameScriptEval){this.__currentFrame=this.__lastFrameScriptEval=c;if(this.__frameScripts.exists(c)&&
(this.__frameScripts.get(c)(),this.__currentFrame!=c))return!1;if(!this.__playing)break}}return!0},__fromSymbol:function(a,b){var c=this;if(null==this.__activeInstances){this.__swf=a;this.__symbol=b;this.__activeInstances=[];this.__activeInstancesByFrameObjectID=new Cb;this.__currentFrame=1;this.__lastFrameUpdate=this.__lastFrameScriptEval=-1;this.__totalFrames=this.__symbol.frames.length;for(var d=0,e=this.__symbol.frames.length;d<e;){var f=d++;a=f+1;b=this.__symbol.frames[f];null!=b.label&&this.__currentLabels.push(new Fh(b.label,
f+1));if(null!=b.script)null==this.__frameScripts&&(this.__frameScripts=new Cb),this.__frameScripts.set(a,b.script);else if(null!=b.scriptSource){null==this.__frameScripts&&(this.__frameScripts=new Cb);try{var m=function(a){return function(){try{a[0].call(c)}catch(Bg){Y.lastException=Bg,Bg instanceof K&&(Bg=Bg.val),ka.trace("Error evaluating frame script\n "+u.string(Bg)+"\n"+Y.exceptionStack().map(function(){return function(a){return a[2]}}()).join("\n")+"\n"+u.string(Bg.stack)+"\n"+a[0].toString(),
{fileName:"MovieClip.hx",lineNumber:488,className:"openfl.display.MovieClip",methodName:"__fromSymbol"})}}}([eval("(function(){"+b.scriptSource+"})")]);this.__frameScripts.set(a,m)}catch(Pl){Y.lastException=Pl,null!=this.__symbol.className?Pa.warn('Unable to evaluate frame script source for symbol "'+this.__symbol.className+'" frame '+a+"\n"+b.scriptSource,{fileName:"MovieClip.hx",lineNumber:504,className:"openfl.display.MovieClip",methodName:"__fromSymbol"}):Pa.warn("Unable to evaluate frame script source:\n"+
b.scriptSource,{fileName:"MovieClip.hx",lineNumber:508,className:"openfl.display.MovieClip",methodName:"__fromSymbol"})}}}a=0;for(b=this.__totalFrames;a<b;)if(d=a++,m=d+1,e=this.__symbol.frames[d],null!=e.objects){d=0;for(var h=e.objects;d<h.length;){var q=h[d];++d;if(q.type==Jd.CREATE&&!this.__activeInstancesByFrameObjectID.exists(q.id)){e=null;f=!1;var y=0;for(var g=this.__activeInstances;y<g.length;){var k=g[y];++y;if(null!=k.displayObject&&k.characterID==q.symbol&&k.depth==q.depth){e=k;f=!0;break}}null==
e&&(y=this.__swf.symbols.get(q.symbol),null!=y&&(y=y.__createObject(this.__swf),null!=y&&(y.parent=this,y.stage=this.stage,e=new Dj(m,q.id,q.symbol,q.depth,y,q.clipDepth))));null!=e&&(this.__activeInstancesByFrameObjectID.set(q.id,e),f||(this.__activeInstances.push(e),this.__updateDisplayObject(e.displayObject,q)))}}}1<this.__totalFrames&&this.play();this.__enterFrame(0);m=0;for(a=Q.getInstanceFields(Q.getClass(this));m<a.length;)for(b=a[m],++m,d=0,e=this.__children;d<e.length;)f=e[d],++d,f.get_name()==
b&&C.setField(this,b,f)}},__getNextFrame:function(a){this.__timeElapsed+=a;a=this.__currentFrame+Math.floor(this.__timeElapsed/this.__frameTime);1>a&&(a=1);a>this.__totalFrames&&(a=Math.floor((a-1)%this.__totalFrames)+1);this.__timeElapsed%=this.__frameTime;return a},__sortDepths:function(a,b){return a.depth-b.depth},__updateDisplayObject:function(a,b){if(null!=a){null!=b.name&&a.set_name(b.name);null!=b.matrix&&a.get_transform().set_matrix(b.matrix);null!=b.colorTransform&&a.get_transform().set_colorTransform(b.colorTransform);
if(null!=b.filters){for(var c=[],d=0,e=b.filters;d<e.length;){var f=e[d];++d;switch(Q.enumIndex(f)){case 0:c.push(new Gh(f[2],f[3],f[4]));break;case 1:c.push(new Hh(f[2]));break;case 2:c.push(new Ih(f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12]));break;case 3:c.push(new Fe(f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9]))}}a.set_filters(c)}else a.set_filters(null);null!=b.visible&&a.set_visible(b.visible);null!=b.blendMode&&a.set_blendMode(b.blendMode)}},__updateFrameLabel:function(){this.__currentFrameLabel=
this.__symbol.frames[this.__currentFrame-1].label;if(null!=this.__currentFrameLabel)this.__currentLabel=this.__currentFrameLabel;else{this.__currentLabel=null;for(var a=0,b=this.__currentLabels;a<b.length;){var c=b[a];++a;if(c.get_frame()<this.__currentFrame)this.__currentLabel=c.get_name();else break}}},__class__:xd});var H=function(){};k["openfl.Lib"]=H;H.__name__=["openfl","Lib"];H.getTimer=function(){return wa.getTimer()};H.getURL=function(a,b){null==b&&(b="_blank");wa.openURL(a.url,b)};H.trace=
function(a){ka.trace(a,{fileName:"Lib.hx",lineNumber:151,className:"openfl.Lib",methodName:"trace"})};var yc=function(a,b){this.data=a;if(null!=b){var c=a.fixed;a.fixed=!1;for(var d=0,e=b.length;d<e;){var f=d++;a.set(f,b[f])}a.fixed=c}};k["openfl._Vector.AbstractVector"]=yc;yc.__name__=["openfl","_Vector","AbstractVector"];yc.prototype={data:null,toJSON:function(){return this.data.toJSON()},__class__:yc};var Kf=function(){};k["openfl._Vector.IVector"]=Kf;Kf.__name__=["openfl","_Vector","IVector"];
Kf.prototype={set_length:null,get_length:null,fixed:null,get:null,indexOf:null,push:null,set:null,splice:null,toJSON:null,__class__:Kf,__properties__:{set_length:"set_length",get_length:"get_length"}};var Jh=function(a,b,c){null==c&&(c=[]);this.__array=c;null!=a&&this.set_length(a);this.fixed=1==b};k["openfl._Vector.BoolVector"]=Jh;Jh.__name__=["openfl","_Vector","BoolVector"];Jh.__interfaces__=[Kf];Jh.prototype={fixed:null,__array:null,get:function(a){return a>=this.__array.length?!1:this.__array[a]},
indexOf:function(a,b){null==b&&(b=0);for(var c=this.__array.length;b<c;){var d=b++;if(this.__array[d]==a)return d}return-1},push:function(a){return this.fixed?this.__array.length:this.__array.push(a)},set:function(a,b){return!this.fixed||a<this.__array.length?this.__array[a]=b:b},splice:function(a,b){return new Jh(null,null,this.__array.splice(a,b))},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(a){if(!this.fixed){var b=this.__array.length;
0>a&&(a=0);if(a>b)for(;b<a;){var c=b++;this.__array[c]=!1}else for(;this.__array.length>a;)this.__array.pop()}return this.__array.length},__class__:Jh,__properties__:{set_length:"set_length",get_length:"get_length"}};var jg=function(a,b,c){null==c&&(c=[]);this.__array=c;null!=a&&this.set_length(a);this.fixed=1==b};k["openfl._Vector.FloatVector"]=jg;jg.__name__=["openfl","_Vector","FloatVector"];jg.__interfaces__=[Kf];jg.prototype={fixed:null,__array:null,get:function(a){return this.__array[a]},indexOf:function(a,
b){null==b&&(b=0);for(var c=this.__array.length;b<c;){var d=b++;if(this.__array[d]==a)return d}return-1},push:function(a){return this.fixed?this.__array.length:this.__array.push(a)},set:function(a,b){return!this.fixed||a<this.__array.length?this.__array[a]=b:b},splice:function(a,b){return new jg(null,null,this.__array.splice(a,b))},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(a){if(!this.fixed){var b=this.__array.length;0>a&&(a=0);if(a>
b)for(;b<a;){var c=b++;this.__array[c]=0}else for(;this.__array.length>a;)this.__array.pop()}return this.__array.length},__class__:jg,__properties__:{set_length:"set_length",get_length:"get_length"}};var Kh=function(a,b,c){null==c&&(c=[]);this.__array=c;null!=a&&this.set_length(a);this.fixed=1==b};k["openfl._Vector.FunctionVector"]=Kh;Kh.__name__=["openfl","_Vector","FunctionVector"];Kh.__interfaces__=[Kf];Kh.prototype={fixed:null,__array:null,get:function(a){return a>=this.__array.length?null:this.__array[a]},
indexOf:function(a,b){null==b&&(b=0);for(var c=this.__array.length;b<c;){var d=b++;if(C.compareMethods(this.__array[d],a))return d}return-1},push:function(a){return this.fixed?this.__array.length:this.__array.push(a)},set:function(a,b){return!this.fixed||a<this.__array.length?this.__array[a]=b:b},splice:function(a,b){return new Kh(null,null,this.__array.splice(a,b))},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(a){if(!this.fixed){var b=
this.__array.length;0>a&&(a=0);if(a>b)for(;b<a;){var c=b++;this.__array[c]=null}else for(;this.__array.length>a;)this.__array.pop()}return this.__array.length},__class__:Kh,__properties__:{set_length:"set_length",get_length:"get_length"}};var gf=function(a,b,c){null==c&&(c=[]);this.__array=c;null!=a&&this.set_length(a);this.fixed=1==b};k["openfl._Vector.IntVector"]=gf;gf.__name__=["openfl","_Vector","IntVector"];gf.__interfaces__=[Kf];gf.prototype={fixed:null,__array:null,get:function(a){return this.__array[a]},
indexOf:function(a,b){null==b&&(b=0);for(var c=this.__array.length;b<c;){var d=b++;if(this.__array[d]==a)return d}return-1},push:function(a){return this.fixed?this.__array.length:this.__array.push(a)},set:function(a,b){return!this.fixed||a<this.__array.length?this.__array[a]=b:b},splice:function(a,b){return new gf(null,null,this.__array.splice(a,b))},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(a){if(!this.fixed){var b=this.__array.length;
0>a&&(a=0);if(a>b)for(;b<a;){var c=b++;this.__array[c]=0}else for(;this.__array.length>a;)this.__array.pop()}return this.__array.length},__class__:gf,__properties__:{set_length:"set_length",get_length:"get_length"}};var kg=function(a,b,c){null==c&&(c=[]);this.__array=c;null!=a&&this.set_length(a);this.fixed=1==b};k["openfl._Vector.ObjectVector"]=kg;kg.__name__=["openfl","_Vector","ObjectVector"];kg.__interfaces__=[Kf];kg.prototype={fixed:null,__array:null,get:function(a){return this.__array[a]},indexOf:function(a,
b){null==b&&(b=0);for(var c=this.__array.length;b<c;){var d=b++;if(this.__array[d]==a)return d}return-1},push:function(a){return this.fixed?this.__array.length:this.__array.push(a)},set:function(a,b){return!this.fixed||a<this.__array.length?this.__array[a]=b:b},splice:function(a,b){return new kg(null,null,this.__array.splice(a,b))},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(a){if(!this.fixed){var b=this.__array.length;0>a&&(a=0);if(a>
b)for(;b<a;)b++,this.__array.push(null);else for(;this.__array.length>a;)this.__array.pop()}return this.__array.length},__class__:kg,__properties__:{set_length:"set_length",get_length:"get_length"}};var sf=function(){};k["openfl._internal.renderer.AbstractBlendModeManager"]=sf;sf.__name__=["openfl","_internal","renderer","AbstractBlendModeManager"];sf.prototype={setBlendMode:function(a){},__class__:sf};var Lh=function(a){this.renderSession=a};k["openfl._internal.renderer.AbstractFilterManager"]=Lh;
Lh.__name__=["openfl","_internal","renderer","AbstractFilterManager"];Lh.prototype={renderSession:null,pushObject:function(a){return null},popObject:function(a){},__class__:Lh};var tf=function(a){this.renderSession=a};k["openfl._internal.renderer.AbstractMaskManager"]=tf;tf.__name__=["openfl","_internal","renderer","AbstractMaskManager"];tf.prototype={renderSession:null,pushMask:function(a){},pushObject:function(a,b){},pushRect:function(a,b){},popMask:function(){},popObject:function(a,b){},popRect:function(){},
saveState:function(){},restoreState:function(){},__class__:tf};var yd=function(a){this.stage=a;this.width=a.stageWidth;this.height=a.stageHeight};k["openfl._internal.renderer.AbstractRenderer"]=yd;yd.__name__=["openfl","_internal","renderer","AbstractRenderer"];yd.prototype={height:null,width:null,renderSession:null,stage:null,clear:function(){},render:function(){},renderStage3D:function(){},resize:function(a,b){this.width=a;this.height=b},__class__:yd};var Mh=function(){};k["openfl._internal.renderer.AbstractShaderManager"]=
Mh;Mh.__name__=["openfl","_internal","renderer","AbstractShaderManager"];Mh.prototype={currentShader:null,defaultShader:null,initShader:function(a){return a},setShader:function(a){},updateShader:function(a){},__class__:Mh};var cc=function(){null==cc.empty?(this.types=[],this.b=[],this.i=[],this.f=[],this.o=[],this.ff=[],this.ii=[],this.copyOnWrite=!0):this.clear()};k["openfl._internal.renderer.DrawCommandBuffer"]=cc;cc.__name__=["openfl","_internal","renderer","DrawCommandBuffer"];cc.prototype={types:null,
b:null,copyOnWrite:null,f:null,ff:null,i:null,ii:null,o:null,append:function(a){if(0==this.get_length())return this.types=a.types,this.b=a.b,this.i=a.i,this.f=a.f,this.o=a.o,this.ff=a.ff,this.ii=a.ii,this.copyOnWrite=a.copyOnWrite=!0,a;for(var b=new uf(a),c=0,d=a.types;c<d.length;){var e=d[c];++c;switch(Q.enumIndex(e)){case 0:e=b.readBeginBitmapFill();this.beginBitmapFill(e.obj(0),e.obj(1),e.bool(0),e.bool(1));break;case 1:e=b.readBeginFill();this.beginFill(e["int"](0),e["float"](0));break;case 2:e=
b.readBeginGradientFill();this.beginGradientFill(e.obj(0),e.iArr(0),e.fArr(0),e.iArr(1),e.obj(1),e.obj(2),e.obj(3),e["float"](0));break;case 3:e=b.readCubicCurveTo();this.cubicCurveTo(e["float"](0),e["float"](1),e["float"](2),e["float"](3),e["float"](4),e["float"](5));break;case 4:e=b.readCurveTo();this.curveTo(e["float"](0),e["float"](1),e["float"](2),e["float"](3));break;case 5:e=b.readDrawCircle();this.drawCircle(e["float"](0),e["float"](1),e["float"](2));break;case 6:e=b.readDrawEllipse();this.drawEllipse(e["float"](0),
e["float"](1),e["float"](2),e["float"](3));break;case 7:e=b.readDrawRect();this.drawRect(e["float"](0),e["float"](1),e["float"](2),e["float"](3));break;case 8:e=b.readDrawRoundRect();this.drawRoundRect(e["float"](0),e["float"](1),e["float"](2),e["float"](3),e["float"](4),e.obj(0));break;case 10:e=b.readDrawTriangles();this.drawTriangles(e.obj(0),e.obj(1),e.obj(2),e.obj(3));break;case 11:b.readEndFill();this.endFill();break;case 12:e=b.readLineBitmapStyle();this.lineBitmapStyle(e.obj(0),e.obj(1),e.bool(0),
e.bool(1));break;case 13:e=b.readLineGradientStyle();this.lineGradientStyle(e.obj(0),e.iArr(0),e.fArr(0),e.iArr(1),e.obj(1),e.obj(2),e.obj(3),e["float"](0));break;case 14:e=b.readLineStyle();this.lineStyle(e.obj(0),e["int"](0),e["float"](0),e.bool(0),e.obj(1),e.obj(2),e.obj(3),e["float"](1));break;case 15:e=b.readLineTo();this.lineTo(e["float"](0),e["float"](1));break;case 16:e=b.readMoveTo();this.moveTo(e["float"](0),e["float"](1));break;case 17:e=b.readOverrideMatrix();this.overrideMatrix(e.obj(0));
break;case 18:b.readWindingEvenOdd();this.windingEvenOdd();break;case 19:b.readWindingNonZero(),this.windingNonZero()}}b.destroy();return a},beginBitmapFill:function(a,b,c,d){this.prepareWrite();this.types.push(G.BEGIN_BITMAP_FILL);this.o.push(a);this.o.push(b);this.b.push(c);this.b.push(d)},beginFill:function(a,b){this.prepareWrite();this.types.push(G.BEGIN_FILL);this.i.push(a);this.f.push(b)},beginGradientFill:function(a,b,c,d,e,f,m,h){this.prepareWrite();this.types.push(G.BEGIN_GRADIENT_FILL);
this.o.push(a);this.ii.push(b);this.ff.push(c);this.ii.push(d);this.o.push(e);this.o.push(f);this.o.push(m);this.f.push(h)},clear:function(){this.types=cc.empty.types;this.b=cc.empty.b;this.i=cc.empty.i;this.f=cc.empty.f;this.o=cc.empty.o;this.ff=cc.empty.ff;this.ii=cc.empty.ii;this.copyOnWrite=!0},copy:function(){var a=new cc;a.append(this);return a},cubicCurveTo:function(a,b,c,d,e,f){this.prepareWrite();this.types.push(G.CUBIC_CURVE_TO);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d);
this.f.push(e);this.f.push(f)},curveTo:function(a,b,c,d){this.prepareWrite();this.types.push(G.CURVE_TO);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d)},drawCircle:function(a,b,c){this.prepareWrite();this.types.push(G.DRAW_CIRCLE);this.f.push(a);this.f.push(b);this.f.push(c)},drawEllipse:function(a,b,c,d){this.prepareWrite();this.types.push(G.DRAW_ELLIPSE);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d)},drawRect:function(a,b,c,d){this.prepareWrite();this.types.push(G.DRAW_RECT);
this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d)},drawRoundRect:function(a,b,c,d,e,f){this.prepareWrite();this.types.push(G.DRAW_ROUND_RECT);this.f.push(a);this.f.push(b);this.f.push(c);this.f.push(d);this.f.push(e);this.o.push(f)},drawTriangles:function(a,b,c,d){this.prepareWrite();this.types.push(G.DRAW_TRIANGLES);this.o.push(a);this.o.push(b);this.o.push(c);this.o.push(d)},endFill:function(){this.prepareWrite();this.types.push(G.END_FILL)},lineBitmapStyle:function(a,b,c,d){this.prepareWrite();
this.types.push(G.LINE_BITMAP_STYLE);this.o.push(a);this.o.push(b);this.b.push(c);this.b.push(d)},lineGradientStyle:function(a,b,c,d,e,f,m,h){this.prepareWrite();this.types.push(G.LINE_GRADIENT_STYLE);this.o.push(a);this.ii.push(b);this.ff.push(c);this.ii.push(d);this.o.push(e);this.o.push(f);this.o.push(m);this.f.push(h)},lineStyle:function(a,b,c,d,e,f,m,h){this.prepareWrite();this.types.push(G.LINE_STYLE);this.o.push(a);this.i.push(b);this.f.push(c);this.b.push(d);this.o.push(e);this.o.push(f);
this.o.push(m);this.f.push(h)},lineTo:function(a,b){this.prepareWrite();this.types.push(G.LINE_TO);this.f.push(a);this.f.push(b)},moveTo:function(a,b){this.prepareWrite();this.types.push(G.MOVE_TO);this.f.push(a);this.f.push(b)},prepareWrite:function(){this.copyOnWrite&&(this.types=this.types.slice(),this.b=this.b.slice(),this.i=this.i.slice(),this.f=this.f.slice(),this.o=this.o.slice(),this.ff=this.ff.slice(),this.ii=this.ii.slice(),this.copyOnWrite=!1)},overrideMatrix:function(a){this.prepareWrite();
this.types.push(G.OVERRIDE_MATRIX);this.o.push(a)},windingEvenOdd:function(){this.prepareWrite();this.types.push(G.WINDING_EVEN_ODD)},windingNonZero:function(){this.prepareWrite();this.types.push(G.WINDING_NON_ZERO)},get_length:function(){return this.types.length},__class__:cc,__properties__:{get_length:"get_length"}};var uf=function(a){this.buffer=a;this.bPos=this.iPos=this.fPos=this.oPos=this.ffPos=this.iiPos=this.tsPos=0;this.prev=G.UNKNOWN};k["openfl._internal.renderer.DrawCommandReader"]=uf;
uf.__name__=["openfl","_internal","renderer","DrawCommandReader"];uf.prototype={buffer:null,bPos:null,iiPos:null,iPos:null,ffPos:null,fPos:null,oPos:null,prev:null,tsPos:null,advance:function(){switch(Q.enumIndex(this.prev)){case 0:this.oPos+=2;this.bPos+=2;break;case 1:this.iPos+=1;this.fPos+=1;break;case 2:this.oPos+=4;this.iiPos+=2;this.ffPos+=1;this.fPos+=1;break;case 3:this.fPos+=6;break;case 4:this.fPos+=4;break;case 5:this.fPos+=3;break;case 6:this.fPos+=4;break;case 7:this.fPos+=4;break;case 8:this.fPos+=
5;this.oPos+=1;break;case 10:this.oPos+=4;break;case 12:this.oPos+=2;this.bPos+=2;break;case 13:this.oPos+=4;this.iiPos+=2;this.ffPos+=1;this.fPos+=1;break;case 14:this.oPos+=4;this.iPos+=1;this.fPos+=2;this.bPos+=1;break;case 15:this.fPos+=2;break;case 16:this.fPos+=2;break;case 17:this.oPos+=1}},bool:function(a){return this.buffer.b[this.bPos+a]},destroy:function(){this.buffer=null;this.reset()},fArr:function(a){return this.buffer.ff[this.ffPos+a]},"float":function(a){return this.buffer.f[this.fPos+
a]},iArr:function(a){return this.buffer.ii[this.iiPos+a]},"int":function(a){return this.buffer.i[this.iPos+a]},obj:function(a){return this.buffer.o[this.oPos+a]},readBeginBitmapFill:function(){this.advance();this.prev=G.BEGIN_BITMAP_FILL;return this},readBeginFill:function(){this.advance();this.prev=G.BEGIN_FILL;return this},readBeginGradientFill:function(){this.advance();this.prev=G.BEGIN_GRADIENT_FILL;return this},readCubicCurveTo:function(){this.advance();this.prev=G.CUBIC_CURVE_TO;return this},
readCurveTo:function(){this.advance();this.prev=G.CURVE_TO;return this},readDrawCircle:function(){this.advance();this.prev=G.DRAW_CIRCLE;return this},readDrawEllipse:function(){this.advance();this.prev=G.DRAW_ELLIPSE;return this},readDrawRect:function(){this.advance();this.prev=G.DRAW_RECT;return this},readDrawRoundRect:function(){this.advance();this.prev=G.DRAW_ROUND_RECT;return this},readDrawTriangles:function(){this.advance();this.prev=G.DRAW_TRIANGLES;return this},readEndFill:function(){this.advance();
this.prev=G.END_FILL;return this},readLineBitmapStyle:function(){this.advance();this.prev=G.LINE_BITMAP_STYLE;return this},readLineGradientStyle:function(){this.advance();this.prev=G.LINE_GRADIENT_STYLE;return this},readLineStyle:function(){this.advance();this.prev=G.LINE_STYLE;return this},readLineTo:function(){this.advance();this.prev=G.LINE_TO;return this},readMoveTo:function(){this.advance();this.prev=G.MOVE_TO;return this},readOverrideMatrix:function(){this.advance();this.prev=G.OVERRIDE_MATRIX;
return this},readWindingEvenOdd:function(){this.advance();this.prev=G.WINDING_EVEN_ODD;return this},readWindingNonZero:function(){this.advance();this.prev=G.WINDING_NON_ZERO;return this},reset:function(){this.bPos=this.iPos=this.fPos=this.oPos=this.ffPos=this.iiPos=this.tsPos=0},skip:function(a){this.advance();this.prev=a},__class__:uf};var G=k["openfl._internal.renderer.DrawCommandType"]={__ename__:["openfl","_internal","renderer","DrawCommandType"],__constructs__:"BEGIN_BITMAP_FILL BEGIN_FILL BEGIN_GRADIENT_FILL CUBIC_CURVE_TO CURVE_TO DRAW_CIRCLE DRAW_ELLIPSE DRAW_RECT DRAW_ROUND_RECT DRAW_TILES DRAW_TRIANGLES END_FILL LINE_BITMAP_STYLE LINE_GRADIENT_STYLE LINE_STYLE LINE_TO MOVE_TO OVERRIDE_MATRIX WINDING_EVEN_ODD WINDING_NON_ZERO UNKNOWN".split(" ")};
G.BEGIN_BITMAP_FILL=["BEGIN_BITMAP_FILL",0];G.BEGIN_BITMAP_FILL.toString=I;G.BEGIN_BITMAP_FILL.__enum__=G;G.BEGIN_FILL=["BEGIN_FILL",1];G.BEGIN_FILL.toString=I;G.BEGIN_FILL.__enum__=G;G.BEGIN_GRADIENT_FILL=["BEGIN_GRADIENT_FILL",2];G.BEGIN_GRADIENT_FILL.toString=I;G.BEGIN_GRADIENT_FILL.__enum__=G;G.CUBIC_CURVE_TO=["CUBIC_CURVE_TO",3];G.CUBIC_CURVE_TO.toString=I;G.CUBIC_CURVE_TO.__enum__=G;G.CURVE_TO=["CURVE_TO",4];G.CURVE_TO.toString=I;G.CURVE_TO.__enum__=G;G.DRAW_CIRCLE=["DRAW_CIRCLE",5];G.DRAW_CIRCLE.toString=
I;G.DRAW_CIRCLE.__enum__=G;G.DRAW_ELLIPSE=["DRAW_ELLIPSE",6];G.DRAW_ELLIPSE.toString=I;G.DRAW_ELLIPSE.__enum__=G;G.DRAW_RECT=["DRAW_RECT",7];G.DRAW_RECT.toString=I;G.DRAW_RECT.__enum__=G;G.DRAW_ROUND_RECT=["DRAW_ROUND_RECT",8];G.DRAW_ROUND_RECT.toString=I;G.DRAW_ROUND_RECT.__enum__=G;G.DRAW_TILES=["DRAW_TILES",9];G.DRAW_TILES.toString=I;G.DRAW_TILES.__enum__=G;G.DRAW_TRIANGLES=["DRAW_TRIANGLES",10];G.DRAW_TRIANGLES.toString=I;G.DRAW_TRIANGLES.__enum__=G;G.END_FILL=["END_FILL",11];G.END_FILL.toString=
I;G.END_FILL.__enum__=G;G.LINE_BITMAP_STYLE=["LINE_BITMAP_STYLE",12];G.LINE_BITMAP_STYLE.toString=I;G.LINE_BITMAP_STYLE.__enum__=G;G.LINE_GRADIENT_STYLE=["LINE_GRADIENT_STYLE",13];G.LINE_GRADIENT_STYLE.toString=I;G.LINE_GRADIENT_STYLE.__enum__=G;G.LINE_STYLE=["LINE_STYLE",14];G.LINE_STYLE.toString=I;G.LINE_STYLE.__enum__=G;G.LINE_TO=["LINE_TO",15];G.LINE_TO.toString=I;G.LINE_TO.__enum__=G;G.MOVE_TO=["MOVE_TO",16];G.MOVE_TO.toString=I;G.MOVE_TO.__enum__=G;G.OVERRIDE_MATRIX=["OVERRIDE_MATRIX",17];G.OVERRIDE_MATRIX.toString=
I;G.OVERRIDE_MATRIX.__enum__=G;G.WINDING_EVEN_ODD=["WINDING_EVEN_ODD",18];G.WINDING_EVEN_ODD.toString=I;G.WINDING_EVEN_ODD.__enum__=G;G.WINDING_NON_ZERO=["WINDING_NON_ZERO",19];G.WINDING_NON_ZERO.toString=I;G.WINDING_NON_ZERO.__enum__=G;G.UNKNOWN=["UNKNOWN",20];G.UNKNOWN.toString=I;G.UNKNOWN.__enum__=G;var vf=function(){this.allowSmoothing=!0;this.clearRenderDirty=!1};k["openfl._internal.renderer.RenderSession"]=vf;vf.__name__=["openfl","_internal","renderer","RenderSession"];vf.prototype={allowSmoothing:null,
clearRenderDirty:null,context:null,element:null,gl:null,renderer:null,roundPixels:null,transformProperty:null,transformOriginProperty:null,upscaled:null,vendorPrefix:null,z:null,blendModeManager:null,filterManager:null,maskManager:null,shaderManager:null,__class__:vf};var Ig=function(){};k["openfl._internal.renderer.canvas.CanvasBitmap"]=Ig;Ig.__name__=["openfl","_internal","renderer","canvas","CanvasBitmap"];Ig.render=function(a,b){if(a.__renderable&&!(0>=a.__worldAlpha)){var c=b.context;if(null!=
a.bitmapData&&a.bitmapData.__isValid&&a.bitmapData.readable){b.blendModeManager.setBlendMode(a.__worldBlendMode);b.maskManager.pushObject(a,!1);ha.convertToCanvas(a.bitmapData.image);c.globalAlpha=a.__worldAlpha;var d=a.__renderTransform,e=a.__scrollRect;b.roundPixels?c.setTransform(d.a,d.b,d.c,d.d,u["int"](d.tx),u["int"](d.ty)):c.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty);b.allowSmoothing&&a.smoothing||(c.mozImageSmoothingEnabled=!1,c.msImageSmoothingEnabled=!1,c.imageSmoothingEnabled=!1);null==e?c.drawImage(a.bitmapData.image.get_src(),
0,0):c.drawImage(a.bitmapData.image.get_src(),e.x,e.y,e.width,e.height,e.x,e.y,e.width,e.height);b.allowSmoothing&&a.smoothing||(c.mozImageSmoothingEnabled=!0,c.msImageSmoothingEnabled=!0,c.imageSmoothingEnabled=!0);b.maskManager.popObject(a,!1)}}};var $f=function(a){this.renderSession=a};k["openfl._internal.renderer.canvas.CanvasBlendModeManager"]=$f;$f.__name__=["openfl","_internal","renderer","canvas","CanvasBlendModeManager"];$f.__super__=sf;$f.prototype=w(sf.prototype,{currentBlendMode:null,
renderSession:null,setBlendMode:function(a){if(this.currentBlendMode!=a)switch(this.currentBlendMode=a,a){case 0:this.renderSession.context.globalCompositeOperation="lighter";break;case 1:this.renderSession.context.globalCompositeOperation="destination-in";break;case 2:this.renderSession.context.globalCompositeOperation="darken";break;case 3:this.renderSession.context.globalCompositeOperation="difference";break;case 4:this.renderSession.context.globalCompositeOperation="destination-out";break;case 5:this.renderSession.context.globalCompositeOperation=
"hard-light";break;case 7:this.renderSession.context.globalCompositeOperation="source-over";break;case 8:this.renderSession.context.globalCompositeOperation="lighten";break;case 9:this.renderSession.context.globalCompositeOperation="multiply";break;case 11:this.renderSession.context.globalCompositeOperation="overlay";break;case 12:this.renderSession.context.globalCompositeOperation="screen";break;default:this.renderSession.context.globalCompositeOperation="source-over"}},__class__:$f});var pk=function(){};
k["openfl._internal.renderer.canvas.CanvasDisplayObject"]=pk;pk.__name__=["openfl","_internal","renderer","canvas","CanvasDisplayObject"];pk.render=function(a,b){if(!(null==a.opaqueBackground&&null==a.__graphics||!a.__renderable||0>=a.__worldAlpha)){if(null!=a.opaqueBackground&&!a.__cacheBitmapRender&&0<a.get_width()&&0<a.get_height()){b.blendModeManager.setBlendMode(a.__worldBlendMode);b.maskManager.pushObject(a);var c=b.context,d=a.__renderTransform;b.roundPixels?c.setTransform(d.a,d.b,d.c,d.d,
u["int"](d.tx),u["int"](d.ty)):c.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty);d=a.opaqueBackground;c.fillStyle="rgb("+(d>>>16&255)+","+(d>>>8&255)+","+(d&255)+")";c.fillRect(0,0,a.get_width(),a.get_height());b.maskManager.popObject(a)}null!=a.__graphics&&Ok.render(a,b)}};var p=function(){};k["openfl._internal.renderer.canvas.CanvasGraphics"]=p;p.__name__=["openfl","_internal","renderer","canvas","CanvasGraphics"];p.closePath=function(a){null==a&&(a=!1);null!=p.context.strokeStyle&&(a||p.context.closePath(),
p.context.stroke(),a&&p.context.closePath(),p.context.beginPath())};p.createBitmapFill=function(a,b,c){ha.convertToCanvas(a.image);p.setSmoothing(c);return p.context.createPattern(a.image.get_src(),b?"repeat":"no-repeat")};p.createGradientPattern=function(a,b,c,d,e,f,m,h){h=m=f=null;var q=!1;null==e&&(e=sa.__pool.get(),q=!0);switch(a){case 0:m=za.__pool.get();m.setTo(-819.2,0);e.__transformPoint(m);h=za.__pool.get();h.setTo(819.2,0);e.__transformPoint(h);f=p.context.createLinearGradient(m.x,m.y,h.x,
h.y);break;case 1:m=za.__pool.get(),m.setTo(1638.4,0),e.__transformPoint(m),f=p.context.createRadialGradient(e.tx,e.ty,0,e.tx,e.ty,Math.abs((m.x-e.tx)/2))}for(var y,g,k,l,n=0,z=b.length;n<z;)l=n++,y=b[l],a=c[l],g=(y&16711680)>>>16,k=(y&65280)>>>8,y&=255,l=d[l]/255,0>l&&(l=0),1<l&&(l=1),f.addColorStop(l,"rgba("+g+", "+k+", "+y+", "+a+")");null!=m&&za.__pool.release(m);null!=h&&za.__pool.release(h);q&&sa.__pool.release(e);return f};p.createTempPatternCanvas=function(a,b,c,d){var e=M.get_document().createElement("canvas"),
f=e.getContext("2d");e.width=c;e.height=d;a=a.image.get_src();f.fillStyle=f.createPattern(a,b?"repeat":"no-repeat");f.beginPath();f.moveTo(0,0);f.lineTo(0,d);f.lineTo(c,d);f.lineTo(c,0);f.lineTo(0,0);f.closePath();p.hitTesting||f.fill(p.windingRule);return e};p.drawRoundRect=function(a,b,c,d,e,f){null==f&&(f=e);e*=.5;f*=.5;e>c/2&&(e=c/2);f>d/2&&(f=d/2);c=a+c;d=b+d;var m=-e+e*p.SIN45,h=-e+e*p.TAN22,q=-f+f*p.SIN45,y=-f+f*p.TAN22;p.context.moveTo(c,d-f);p.context.quadraticCurveTo(c,d+y,c+m,d+q);p.context.quadraticCurveTo(c+
h,d,c-e,d);p.context.lineTo(a+e,d);p.context.quadraticCurveTo(a-h,d,a-m,d+q);p.context.quadraticCurveTo(a,d+y,a,d-f);p.context.lineTo(a,b+f);p.context.quadraticCurveTo(a,b-y,a-m,b-q);p.context.quadraticCurveTo(a-h,b,a+e,b);p.context.lineTo(c-e,b);p.context.quadraticCurveTo(c+h,b,c+m,b-q);p.context.quadraticCurveTo(c,b-y,c,b+f);p.context.lineTo(c,d-f)};p.endFill=function(){p.context.beginPath();p.playCommands(p.fillCommands,!1);p.fillCommands.clear()};p.endStroke=function(){p.context.beginPath();p.playCommands(p.strokeCommands,
!0);p.context.closePath();p.strokeCommands.clear()};p.hitTest=function(a,b,c){p.bounds=a.__bounds;p.graphics=a;if(0==a.__commands.get_length()||null==p.bounds||0>=p.bounds.width||0>=p.bounds.height)return!1;p.hitTesting=!0;var d=a.__renderTransform,e=d.__transformX(b,c);c=d.__transformY(b,c);b=e-d.__transformX(p.bounds.x,p.bounds.y);c-=d.__transformY(p.bounds.x,p.bounds.y);e=a.__canvas;var f=a.__context;a.__canvas=p.hitTestCanvas;a.__context=p.hitTestContext;p.context=a.__context;p.context.setTransform(d.a,
d.b,d.c,d.d,d.tx,d.ty);p.fillCommands.clear();p.strokeCommands.clear();p.hasFill=!1;p.hasStroke=!1;p.bitmapFill=null;p.bitmapRepeat=!1;p.windingRule="evenodd";d=new uf(a.__commands);for(var m=0,h=a.__commands.types;m<h.length;){var q=h[m];++m;switch(Q.enumIndex(q)){case 0:case 1:case 2:p.endFill();if(p.hasFill&&p.context.isPointInPath(b,c,p.windingRule))return d.destroy(),a.__canvas=e,a.__context=f,!0;p.endStroke();if(p.hasStroke&&p.context.isPointInStroke(b,c))return d.destroy(),a.__canvas=e,a.__context=
f,!0;q==G.BEGIN_BITMAP_FILL?(q=d.readBeginBitmapFill(),p.fillCommands.beginBitmapFill(q.obj(0),q.obj(1),q.bool(0),q.bool(1)),p.strokeCommands.beginBitmapFill(q.obj(0),q.obj(1),q.bool(0),q.bool(1))):q==G.BEGIN_GRADIENT_FILL?(q=d.readBeginGradientFill(),p.fillCommands.beginGradientFill(q.obj(0),q.iArr(0),q.fArr(0),q.iArr(1),q.obj(1),q.obj(2),q.obj(3),q["float"](0)),p.strokeCommands.beginGradientFill(q.obj(0),q.iArr(0),q.fArr(0),q.iArr(1),q.obj(1),q.obj(2),q.obj(3),q["float"](0))):(q=d.readBeginFill(),
p.fillCommands.beginFill(q["int"](0),1),p.strokeCommands.beginFill(q["int"](0),1));break;case 3:q=d.readCubicCurveTo();p.fillCommands.cubicCurveTo(q["float"](0),q["float"](1),q["float"](2),q["float"](3),q["float"](4),q["float"](5));p.strokeCommands.cubicCurveTo(q["float"](0),q["float"](1),q["float"](2),q["float"](3),q["float"](4),q["float"](5));break;case 4:q=d.readCurveTo();p.fillCommands.curveTo(q["float"](0),q["float"](1),q["float"](2),q["float"](3));p.strokeCommands.curveTo(q["float"](0),q["float"](1),
q["float"](2),q["float"](3));break;case 5:q=d.readDrawCircle();p.fillCommands.drawCircle(q["float"](0),q["float"](1),q["float"](2));p.strokeCommands.drawCircle(q["float"](0),q["float"](1),q["float"](2));break;case 6:q=d.readDrawEllipse();p.fillCommands.drawEllipse(q["float"](0),q["float"](1),q["float"](2),q["float"](3));p.strokeCommands.drawEllipse(q["float"](0),q["float"](1),q["float"](2),q["float"](3));break;case 7:q=d.readDrawRect();p.fillCommands.drawRect(q["float"](0),q["float"](1),q["float"](2),
q["float"](3));p.strokeCommands.drawRect(q["float"](0),q["float"](1),q["float"](2),q["float"](3));break;case 8:q=d.readDrawRoundRect();p.fillCommands.drawRoundRect(q["float"](0),q["float"](1),q["float"](2),q["float"](3),q["float"](4),q.obj(0));p.strokeCommands.drawRoundRect(q["float"](0),q["float"](1),q["float"](2),q["float"](3),q["float"](4),q.obj(0));break;case 11:d.readEndFill();p.endFill();if(p.hasFill&&p.context.isPointInPath(b,c,p.windingRule))return d.destroy(),a.__canvas=e,a.__context=f,!0;
p.endStroke();if(p.hasStroke&&p.context.isPointInStroke(b,c))return d.destroy(),a.__canvas=e,a.__context=f,!0;p.hasFill=!1;p.bitmapFill=null;break;case 12:q=d.readLineBitmapStyle();p.strokeCommands.lineBitmapStyle(q.obj(0),q.obj(1),q.bool(0),q.bool(1));break;case 13:q=d.readLineGradientStyle();p.strokeCommands.lineGradientStyle(q.obj(0),q.iArr(0),q.fArr(0),q.iArr(1),q.obj(1),q.obj(2),q.obj(3),q["float"](0));break;case 14:q=d.readLineStyle();p.strokeCommands.lineStyle(q.obj(0),q["int"](0),1,q.bool(0),
q.obj(1),q.obj(2),q.obj(3),q["float"](1));break;case 15:q=d.readLineTo();p.fillCommands.lineTo(q["float"](0),q["float"](1));p.strokeCommands.lineTo(q["float"](0),q["float"](1));break;case 16:q=d.readMoveTo();p.fillCommands.moveTo(q["float"](0),q["float"](1));p.strokeCommands.moveTo(q["float"](0),q["float"](1));break;case 18:p.windingRule="evenodd";break;case 19:p.windingRule="nonzero";break;default:d.skip(q)}}m=!1;0<p.fillCommands.get_length()&&p.endFill();p.hasFill&&p.context.isPointInPath(b,c,p.windingRule)&&
(m=!0);0<p.strokeCommands.get_length()&&p.endStroke();p.hasStroke&&p.context.isPointInStroke(b,c)&&(m=!0);d.destroy();a.__canvas=e;a.__context=f;return m};p.isCCW=function(a,b,c,d,e,f){return 0>(c-a)*(f-b)-(d-b)*(e-a)};p.normalizeUVT=function(a,b){null==b&&(b=!1);for(var c=-Infinity,d,e=a.data.get_length(),f=1,m=e+1;f<m;)d=f++,b&&0==d%3||(d=a.data.get(d-1),c<d&&(c=d));if(!b)return{max:c,uvt:a};f=hb.toFloatVector(null);m=1;for(e+=1;m<e;)d=m++,b&&0==d%3||(d=a.data.get(d-1),f.data.push(d));return{max:c,
uvt:f}};p.playCommands=function(a,b){null==b&&(b=!1);p.bounds=p.graphics.__bounds;var c=p.bounds.x,d=p.bounds.y,e=0,f=0,m=!1,h=0,q=0,y=!1;p.windingRule="evenodd";p.setSmoothing(!0);var g=new uf(a),k,l,n,z=null,t=null,r=0,x=a.types;try{for(;r<x.length;){var v=x[r];++r;switch(Q.enumIndex(v)){case 0:var w=g.readBeginBitmapFill();p.bitmapFill=w.obj(0);var A=w.obj(0),B=w.bool(1);p.context.fillStyle=p.createBitmapFill(A,!0,B);p.hasFill=!0;null!=w.obj(1)?(p.pendingMatrix=w.obj(1),p.inversePendingMatrix=
w.obj(1).clone(),p.inversePendingMatrix.invert()):(p.pendingMatrix=null,p.inversePendingMatrix=null);break;case 1:var C=g.readBeginFill();if(.005>C["float"](0))p.hasFill=!1;else{if(1==C["float"](0)){var J=L.hex(C["int"](0)&16777215,6);p.context.fillStyle="#"+J}else{var D=(C["int"](0)&16711680)>>>16;var E=(C["int"](0)&65280)>>>8;var G=C["int"](0)&255;var F="rgba("+D+", "+E+", "+G+", "+C["float"](0);p.context.fillStyle=F+")"}p.bitmapFill=null;p.setSmoothing(!0);p.hasFill=!0}break;case 2:var H=g.readBeginGradientFill(),
I=H.obj(0),K=H.iArr(0),M=H.fArr(0),N=H.iArr(1),P=H.obj(1),W=H.obj(2),R=H.obj(3);p.context.fillStyle=p.createGradientPattern(I,K,M,N,P,W,R,H["float"](0));p.bitmapFill=null;p.setSmoothing(!0);p.hasFill=!0;break;case 3:var U=g.readCubicCurveTo();p.context.bezierCurveTo(U["float"](0)-c,U["float"](1)-d,U["float"](2)-c,U["float"](3)-d,U["float"](4)-c,U["float"](5)-d);break;case 4:var T=g.readCurveTo();p.context.quadraticCurveTo(T["float"](0)-c,T["float"](1)-d,T["float"](2)-c,T["float"](3)-d);break;case 5:var O=
g.readDrawCircle();p.context.moveTo(O["float"](0)-c+O["float"](2),O["float"](1)-d);p.context.arc(O["float"](0)-c,O["float"](1)-d,O["float"](2),0,2*Math.PI,!0);break;case 6:var Y=g.readDrawEllipse();var X=Y["float"](0);var aa=Y["float"](1);var fa=Y["float"](2);var ca=Y["float"](3);X-=c;aa-=d;var ea=fa/2*.5522848;var ba=ca/2*.5522848;var ja=X+fa;var ma=aa+ca;var ha=X+fa/2;var S=aa+ca/2;p.context.moveTo(X,S);p.context.bezierCurveTo(X,S-ba,ha-ea,aa,ha,aa);p.context.bezierCurveTo(ha+ea,aa,ja,S-ba,ja,S);
p.context.bezierCurveTo(ja,S+ba,ha+ea,ma,ha,ma);p.context.bezierCurveTo(ha-ea,ma,X,S+ba,X,S);break;case 7:var V=g.readDrawRect();var ta=!1;if(null!=p.bitmapFill&&!p.hitTesting){var pa=n=l=k=0;var ia=!0;null!=p.pendingMatrix?0!=p.pendingMatrix.b||0!=p.pendingMatrix.c?ia=!1:(null==z&&(z=za.__pool.get()),null==t&&(t=za.__pool.get()),z.setTo(V["float"](0),V["float"](1)),p.inversePendingMatrix.__transformPoint(z),t.setTo(V["float"](0)+V["float"](2),V["float"](1)+V["float"](3)),p.inversePendingMatrix.__transformPoint(t),
k=z.y,pa=z.x,n=t.y,l=t.x):(k=V["float"](1),pa=V["float"](0),n=V["float"](1)+V["float"](3),l=V["float"](0)+V["float"](2));ia&&0<=k&&0<=pa&&l<=p.bitmapFill.width&&n<=p.bitmapFill.height&&(ta=!0,p.hitTesting||p.context.drawImage(p.bitmapFill.image.get_src(),pa,k,l-pa,n-k,V["float"](0)-c,V["float"](1)-d,V["float"](2),V["float"](3)))}ta||p.context.rect(V["float"](0)-c,V["float"](1)-d,V["float"](2),V["float"](3));break;case 8:var oa=g.readDrawRoundRect();p.drawRoundRect(oa["float"](0)-c,oa["float"](1)-
d,oa["float"](2),oa["float"](3),oa["float"](4),oa.obj(0));break;case 10:var Ga=g.readDrawTriangles(),ka=Ga.obj(0),qa=Ga.obj(1),zb=Ga.obj(2),sa=null,Ba=null==p.bitmapFill;if(Ba&&null!=zb)throw"__break__";if(!Ba){if(null==zb){zb=hb.toFloatVector(null);for(var Z=0,Aa=u["int"](ka.data.get_length()/2);Z<Aa;){var ra=Z++,Fa=ka.data.get(2*ra);zb.data.push(Fa-c/p.bitmapFill.width);var ua=ka.data.get(2*ra+1);zb.data.push(ua-d/p.bitmapFill.height)}}var va=zb.data.get_length()!=ka.data.get_length(),Ra=p.normalizeUVT(zb,
va),Ea=Ra.max;zb=Ra.uvt;sa=1<Ea?p.createTempPatternCanvas(p.bitmapFill,p.bitmapRepeat,u["int"](p.bounds.width),u["int"](p.bounds.height)):p.createTempPatternCanvas(p.bitmapFill,p.bitmapRepeat,p.bitmapFill.width,p.bitmapFill.height)}for(var xa=0,Oa=qa.data.get_length(),na,La,Ja,la,Na,Sa,Qa,Pa,Va,Ka,Tf,Da,wa,Ca,Ia,Za,Ua,ya,Ma,da,Ha,Ya,$a,cb,kb,bb,jb,ob;xa<Oa;){na=xa;La=xa+1;Ja=xa+2;la=2*qa.data.get(na);Na=2*qa.data.get(na)+1;Sa=2*qa.data.get(La);Qa=2*qa.data.get(La)+1;Pa=2*qa.data.get(Ja);Va=2*qa.data.get(Ja)+
1;Ka=ka.data.get(la)-c;Tf=ka.data.get(Na)-d;Da=ka.data.get(Sa)-c;wa=ka.data.get(Qa)-d;Ca=ka.data.get(Pa)-c;Ia=ka.data.get(Va)-d;switch(Ga.obj(3)){case 0:if(p.isCCW(Ka,Tf,Da,wa,Ca,Ia)){xa+=3;continue}break;case 2:if(!p.isCCW(Ka,Tf,Da,wa,Ca,Ia)){xa+=3;continue}}Ba?(p.context.beginPath(),p.context.moveTo(Ka,Tf),p.context.lineTo(Da,wa),p.context.lineTo(Ca,Ia),p.context.closePath(),p.hitTesting||p.context.fill(p.windingRule)):(p.context.save(),p.context.beginPath(),p.context.moveTo(Ka,Tf),p.context.lineTo(Da,
wa),p.context.lineTo(Ca,Ia),p.context.closePath(),p.context.clip(),Za=zb.data.get(la)*sa.width,ya=zb.data.get(Sa)*sa.width,da=zb.data.get(Pa)*sa.width,Ua=zb.data.get(Na)*sa.height,Ma=zb.data.get(Qa)*sa.height,Ha=zb.data.get(Va)*sa.height,Ya=Za*(Ha-Ma)-ya*Ha+da*Ma+(ya-da)*Ua,0!=Ya&&($a=-(Ua*(Ca-Da)-Ma*Ca+Ha*Da+(Ma-Ha)*Ka)/Ya,cb=(Ma*Ia+Ua*(wa-Ia)-Ha*wa+(Ha-Ma)*Tf)/Ya,kb=(Za*(Ca-Da)-ya*Ca+da*Da+(ya-da)*Ka)/Ya,bb=-(ya*Ia+Za*(wa-Ia)-da*wa+(da-ya)*Tf)/Ya,jb=(Za*(Ha*Da-Ma*Ca)+Ua*(ya*Ca-da*Da)+(da*Ma-ya*
Ha)*Ka)/Ya,ob=(Za*(Ha*wa-Ma*Ia)+Ua*(ya*Ia-da*wa)+(da*Ma-ya*Ha)*Tf)/Ya,p.context.transform($a,cb,kb,bb,jb,ob),p.context.drawImage(sa,0,0),p.context.restore()));xa+=3}break;case 12:var db=g.readLineBitmapStyle();b&&p.hasStroke&&p.closePath();p.context.moveTo(e-c,f-d);var eb=db.obj(0),nb=db.bool(0);p.context.strokeStyle=p.createBitmapFill(eb,nb,db.bool(1));p.hasStroke=!0;break;case 13:var Ta=g.readLineGradientStyle();b&&p.hasStroke&&p.closePath();p.context.moveTo(e-c,f-d);var pb=Ta.obj(0),fb=Ta.iArr(0),
rb=Ta.fArr(0),Xa=Ta.iArr(1),mb=Ta.obj(1),ib=Ta.obj(2),ub=Ta.obj(3);p.context.strokeStyle=p.createGradientPattern(pb,fb,rb,Xa,mb,ib,ub,Ta["float"](0));p.setSmoothing(!0);p.hasStroke=!0;break;case 14:var jc=g.readLineStyle();b&&p.hasStroke&&p.closePath(!0);p.context.moveTo(e-c,f-d);if(null==jc.obj(0))p.hasStroke=!1;else{var vb=0<jc.obj(0)?jc.obj(0):1;p.context.lineWidth=vb;var tb=null==jc.obj(3)?"round":Pk.toString(jc.obj(3)).toLowerCase();p.context.lineJoin=tb;var Qg=null==jc.obj(2)?"round":0==jc.obj(2)?
"butt":Qk.toString(jc.obj(2)).toLowerCase();p.context.lineCap=Qg;p.context.miterLimit=jc["float"](1);if(1==jc["float"](0)){var wb=L.hex(jc["int"](0)&16777215,6);p.context.strokeStyle="#"+wb}else{D=(jc["int"](0)&16711680)>>>16;E=(jc["int"](0)&65280)>>>8;G=jc["int"](0)&255;var gb="rgba("+D+", "+E+", "+G+", "+jc["float"](0);p.context.strokeStyle=gb+")"}p.setSmoothing(!0);p.hasStroke=!0}break;case 15:var lb=g.readLineTo();p.context.lineTo(lb["float"](0)-c,lb["float"](1)-d);e=lb["float"](0);f=lb["float"](1);
e==h&&f==q&&(m=!0);break;case 16:var ab=g.readMoveTo();p.context.moveTo(ab["float"](0)-c,ab["float"](1)-d);e=ab["float"](0);f=ab["float"](1);y&&(m=!0);h=ab["float"](0);q=ab["float"](1);y=!0;break;case 18:p.windingRule="evenodd";break;case 19:p.windingRule="nonzero";break;default:g.skip(v)}}}catch(wl){if("__break__"!=wl)throw wl;}null!=z&&za.__pool.release(z);null!=t&&za.__pool.release(t);g.destroy();b&&p.hasStroke&&(p.hasFill&&m?(p.context.lineTo(h-c,q-d),p.closePath(!1)):m&&e==h&&f==q&&p.closePath(!1),
p.hitTesting||p.context.stroke());b||!p.hasFill&&null==p.bitmapFill||(p.context.translate(-p.bounds.x,-p.bounds.y),null!=p.pendingMatrix?(p.context.transform(p.pendingMatrix.a,p.pendingMatrix.b,p.pendingMatrix.c,p.pendingMatrix.d,p.pendingMatrix.tx,p.pendingMatrix.ty),p.hitTesting||p.context.fill(p.windingRule),p.context.transform(p.inversePendingMatrix.a,p.inversePendingMatrix.b,p.inversePendingMatrix.c,p.inversePendingMatrix.d,p.inversePendingMatrix.tx,p.inversePendingMatrix.ty)):p.hitTesting||
p.context.fill(p.windingRule),p.context.translate(p.bounds.x,p.bounds.y),p.context.closePath())};p.render=function(a,b,c){a.__update();if(a.__dirty){p.hitTesting=!1;p.graphics=a;p.allowSmoothing=b.allowSmoothing;p.bounds=a.__bounds;c=a.__width;var d=a.__height;if(!a.__visible||0==a.__commands.get_length()||null==p.bounds||1>c||1>d)a.__canvas=null,a.__context=null,a.__bitmap=null;else{null==a.__canvas&&(a.__canvas=M.get_document().createElement("canvas"),a.__context=a.__canvas.getContext("2d"));p.context=
a.__context;var e=a.__canvas;b=Ge.scale;var f=u["int"](c*b),m=u["int"](d*b);e.width==f&&e.height==m?p.context.clearRect(0,0,f,m):(e.width=f,e.height=m,e.style.width=c+"px",e.style.height=d+"px");c=a.__renderTransform;p.context.setTransform(c.a*b,c.b*b,c.c*b,c.d*b,c.tx*b,c.ty*b);p.fillCommands.clear();p.strokeCommands.clear();p.hasFill=!1;p.hasStroke=!1;p.bitmapFill=null;b=p.bitmapRepeat=!1;d=c=0;p.windingRule="evenodd";e=new uf(a.__commands);f=0;for(m=a.__commands.types;f<m.length;){var h=m[f];++f;
switch(Q.enumIndex(h)){case 0:case 1:case 2:p.endFill();p.endStroke();h==G.BEGIN_BITMAP_FILL?(h=e.readBeginBitmapFill(),p.fillCommands.beginBitmapFill(h.obj(0),h.obj(1),h.bool(0),h.bool(1)),p.strokeCommands.beginBitmapFill(h.obj(0),h.obj(1),h.bool(0),h.bool(1))):h==G.BEGIN_GRADIENT_FILL?(h=e.readBeginGradientFill(),p.fillCommands.beginGradientFill(h.obj(0),h.iArr(0),h.fArr(0),h.iArr(1),h.obj(1),h.obj(2),h.obj(3),h["float"](0)),p.strokeCommands.beginGradientFill(h.obj(0),h.iArr(0),h.fArr(0),h.iArr(1),
h.obj(1),h.obj(2),h.obj(3),h["float"](0))):(h=e.readBeginFill(),p.fillCommands.beginFill(h["int"](0),h["float"](0)),p.strokeCommands.beginFill(h["int"](0),h["float"](0)));break;case 3:h=e.readCubicCurveTo();p.fillCommands.cubicCurveTo(h["float"](0),h["float"](1),h["float"](2),h["float"](3),h["float"](4),h["float"](5));b?p.strokeCommands.cubicCurveTo(h["float"](0),h["float"](1),h["float"](2),h["float"](3),h["float"](4),h["float"](5)):(c=h["float"](4),d=h["float"](5));break;case 4:h=e.readCurveTo();
p.fillCommands.curveTo(h["float"](0),h["float"](1),h["float"](2),h["float"](3));b?p.strokeCommands.curveTo(h["float"](0),h["float"](1),h["float"](2),h["float"](3)):(c=h["float"](2),d=h["float"](3));break;case 5:h=e.readDrawCircle();p.fillCommands.drawCircle(h["float"](0),h["float"](1),h["float"](2));b&&p.strokeCommands.drawCircle(h["float"](0),h["float"](1),h["float"](2));break;case 6:h=e.readDrawEllipse();p.fillCommands.drawEllipse(h["float"](0),h["float"](1),h["float"](2),h["float"](3));b&&p.strokeCommands.drawEllipse(h["float"](0),
h["float"](1),h["float"](2),h["float"](3));break;case 7:h=e.readDrawRect();p.fillCommands.drawRect(h["float"](0),h["float"](1),h["float"](2),h["float"](3));b&&p.strokeCommands.drawRect(h["float"](0),h["float"](1),h["float"](2),h["float"](3));break;case 8:h=e.readDrawRoundRect();p.fillCommands.drawRoundRect(h["float"](0),h["float"](1),h["float"](2),h["float"](3),h["float"](4),h.obj(0));b&&p.strokeCommands.drawRoundRect(h["float"](0),h["float"](1),h["float"](2),h["float"](3),h["float"](4),h.obj(0));
break;case 10:h=e.readDrawTriangles();p.fillCommands.drawTriangles(h.obj(0),h.obj(1),h.obj(2),h.obj(3));break;case 11:e.readEndFill();p.endFill();p.endStroke();b=p.hasFill=!1;p.bitmapFill=null;d=c=0;break;case 12:h=e.readLineBitmapStyle();b||0==c&&0==d||(p.strokeCommands.moveTo(c,d),d=c=0);b=!0;p.strokeCommands.lineBitmapStyle(h.obj(0),h.obj(1),h.bool(0),h.bool(1));break;case 13:h=e.readLineGradientStyle();b||0==c&&0==d||(p.strokeCommands.moveTo(c,d),d=c=0);b=!0;p.strokeCommands.lineGradientStyle(h.obj(0),
h.iArr(0),h.fArr(0),h.iArr(1),h.obj(1),h.obj(2),h.obj(3),h["float"](0));break;case 14:h=e.readLineStyle();b||null==h.obj(0)||0==c&&0==d||(p.strokeCommands.moveTo(c,d),d=c=0);b=null!=h.obj(0);p.strokeCommands.lineStyle(h.obj(0),h["int"](0),h["float"](0),h.bool(0),h.obj(1),h.obj(2),h.obj(3),h["float"](1));break;case 15:h=e.readLineTo();p.fillCommands.lineTo(h["float"](0),h["float"](1));b?p.strokeCommands.lineTo(h["float"](0),h["float"](1)):(c=h["float"](0),d=h["float"](1));break;case 16:h=e.readMoveTo();
p.fillCommands.moveTo(h["float"](0),h["float"](1));b?p.strokeCommands.moveTo(h["float"](0),h["float"](1)):(c=h["float"](0),d=h["float"](1));break;case 18:e.readWindingEvenOdd();p.fillCommands.windingEvenOdd();p.windingRule="evenodd";break;case 19:e.readWindingNonZero();p.fillCommands.windingNonZero();p.windingRule="nonzero";break;default:e.skip(h)}}0<p.fillCommands.get_length()&&p.endFill();0<p.strokeCommands.get_length()&&p.endStroke();e.destroy();a.__bitmap=ba.fromCanvas(a.__canvas)}a.set___dirty(!1)}};
p.renderMask=function(a,b){if(0!=a.__commands.get_length()){p.context=b.context;b=new uf(a.__commands);var c=0;for(a=a.__commands.types;c<a.length;){var d=a[c];++c;switch(Q.enumIndex(d)){case 3:d=b.readCubicCurveTo();p.context.bezierCurveTo(d["float"](0)-0,d["float"](1)-0,d["float"](2)-0,d["float"](3)-0,d["float"](4)-0,d["float"](5)-0);d["float"](4);d["float"](5);break;case 4:d=b.readCurveTo();p.context.quadraticCurveTo(d["float"](0)-0,d["float"](1)-0,d["float"](2)-0,d["float"](3)-0);d["float"](2);
d["float"](3);break;case 5:d=b.readDrawCircle();p.context.arc(d["float"](0)-0,d["float"](1)-0,d["float"](2),0,2*Math.PI,!0);break;case 6:var e=b.readDrawEllipse();d=e["float"](0);var f=e["float"](1);var m=e["float"](2);var h=e["float"](3);d-=0;f-=0;e=m/2*.5522848;var q=h/2*.5522848;var g=d+m;var k=f+h;m=d+m/2;h=f+h/2;p.context.moveTo(d,h);p.context.bezierCurveTo(d,h-q,m-e,f,m,f);p.context.bezierCurveTo(m+e,f,g,h-q,g,h);p.context.bezierCurveTo(g,h+q,m+e,k,m,k);p.context.bezierCurveTo(m-e,k,d,h+q,d,
h);break;case 7:d=b.readDrawRect();p.context.rect(d["float"](0)-0,d["float"](1)-0,d["float"](2),d["float"](3));break;case 8:d=b.readDrawRoundRect();p.drawRoundRect(d["float"](0)-0,d["float"](1)-0,d["float"](2),d["float"](3),d["float"](4),d.obj(0));break;case 15:d=b.readLineTo();p.context.lineTo(d["float"](0)-0,d["float"](1)-0);d["float"](0);d["float"](1);break;case 16:d=b.readMoveTo();p.context.moveTo(d["float"](0)-0,d["float"](1)-0);d["float"](0);d["float"](1);break;default:b.skip(d)}}b.destroy()}};
p.setSmoothing=function(a){p.allowSmoothing||(a=!1);p.context.imageSmoothingEnabled!=a&&(p.context.mozImageSmoothingEnabled=a,p.context.msImageSmoothingEnabled=a,p.context.imageSmoothingEnabled=a)};var df=function(a){this.renderSession=a};k["openfl._internal.renderer.canvas.CanvasMaskManager"]=df;df.__name__=["openfl","_internal","renderer","canvas","CanvasMaskManager"];df.__super__=tf;df.prototype=w(tf.prototype,{pushMask:function(a){var b=this.renderSession.context;b.save();var c=a.__getRenderTransform();
b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty);b.beginPath();a.__renderCanvasMask(this.renderSession);b.clip()},pushObject:function(a,b){null==b&&(b=!0);b&&null!=a.__scrollRect&&this.pushRect(a.__scrollRect,a.__renderTransform);null!=a.__mask&&this.pushMask(a.__mask)},pushRect:function(a,b){var c=this.renderSession.context;c.save();c.setTransform(b.a,b.b,b.c,b.d,b.tx,b.ty);c.beginPath();c.rect(a.x,a.y,a.width,a.height);c.clip()},popMask:function(){this.renderSession.context.restore()},popObject:function(a,
b){null==b&&(b=!0);null!=a.__mask&&this.popMask();b&&null!=a.__scrollRect&&this.popRect()},popRect:function(){this.renderSession.context.restore()},__class__:df});var Ge=function(a,b){yd.call(this,a);this.context=b;this.renderSession=new vf;this.renderSession.clearRenderDirty=!0;this.renderSession.context=b;this.renderSession.renderer=this;this.renderSession.blendModeManager=new $f(this.renderSession);this.renderSession.maskManager=new df(this.renderSession);a=a.window.config;null!=a&&C.hasField(a,
"allowHighDPI")&&a.allowHighDPI&&(Ge.scale=window.devicePixelRatio||1)};k["openfl._internal.renderer.canvas.CanvasRenderer"]=Ge;Ge.__name__=["openfl","_internal","renderer","canvas","CanvasRenderer"];Ge.__super__=yd;Ge.prototype=w(yd.prototype,{context:null,clear:function(){this.renderSession.blendModeManager.setBlendMode(10);this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;!this.stage.__transparent&&this.stage.__clearBeforeRender?(this.context.fillStyle=this.stage.__colorString,
this.context.fillRect(0,0,this.stage.stageWidth*this.stage.window.get_scale(),this.stage.stageHeight*this.stage.window.get_scale())):this.stage.__transparent&&this.stage.__clearBeforeRender&&this.context.clearRect(0,0,this.stage.stageWidth*this.stage.window.get_scale(),this.stage.stageHeight*this.stage.window.get_scale())},render:function(){this.renderSession.allowSmoothing=2!=this.stage.quality;this.stage.__renderCanvas(this.renderSession)},renderStage3D:function(){for(var a=0,b=this.stage.stage3Ds;a<
b.data.get_length();){var c=b.data.get(a);++a;c.__renderCanvas(this.stage,this.renderSession)}},__class__:Ge});var Ok=function(){};k["openfl._internal.renderer.canvas.CanvasShape"]=Ok;Ok.__name__=["openfl","_internal","renderer","canvas","CanvasShape"];Ok.render=function(a,b){if(a.__renderable&&!(0>=a.__worldAlpha)){var c=a.__graphics;if(null!=c){p.render(c,b,a.__renderTransform);var d=c.__width,e=c.__height;if(null!=c.__canvas){var f=b.context,m=a.__scrollRect;0<d&&0<e&&(null==m||0<m.width&&0<m.height)&&
(b.blendModeManager.setBlendMode(a.__worldBlendMode),b.maskManager.pushObject(a),f.globalAlpha=a.__worldAlpha,d=c.__worldTransform,b.roundPixels?f.setTransform(d.a,d.b,d.c,d.d,u["int"](d.tx),u["int"](d.ty)):f.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty),d=1/Ge.scale,f.scale(d,d),f.drawImage(c.__canvas,0,0),b.maskManager.popObject(a))}}}};var V=function(){};k["openfl._internal.renderer.canvas.CanvasTextField"]=V;V.__name__=["openfl","_internal","renderer","canvas","CanvasTextField"];V.render=function(a,
b,c){var d=a.__textEngine,e=d.bounds;c=a.__graphics;a.__dirty&&(a.__updateLayout(),null==c.__bounds&&(c.__bounds=new X),c.__bounds.copyFrom(e));c.__update();if(a.__dirty||c.__dirty){var f=c.__width,m=c.__height;if(!(null!=d.text&&!F.equals(d.text,"")||d.background||d.border||d.__hasFocus||1==d.type&&d.selectable)||(0>=d.width||0>=d.height)&&2!=d.autoSize)a.__graphics.__canvas=null,a.__graphics.__context=null,a.__graphics.__bitmap=null,a.__graphics.set___dirty(!1),a.__dirty=!1;else{null==a.__graphics.__canvas&&
(a.__graphics.__canvas=M.get_document().createElement("canvas"),a.__graphics.__context=a.__graphics.__canvas.getContext("2d"));V.context=c.__context;var h=c.__renderTransform,q=Ge.scale;c.__canvas.width=u["int"](f*q);c.__canvas.height=u["int"](m*q);c.__canvas.style.width=f+"px";c.__canvas.style.height=m+"px";V.context.setTransform(h.a*q,h.b*q,h.c*q,h.d*q,h.tx*q,h.ty*q);null==V.clearRect&&(V.clearRect="undefined"!==typeof navigator&&"undefined"!==typeof navigator.isCocoonJS);V.clearRect&&V.context.clearRect(0,
0,c.__canvas.width,c.__canvas.height);if(null!=d.text&&""!=d.text||d.__hasFocus){f=d.text;!b.allowSmoothing||0==d.antiAliasType&&400==d.sharpness?(c.__context.mozImageSmoothingEnabled=!1,c.__context.msImageSmoothingEnabled=!1,c.__context.imageSmoothingEnabled=!1):(c.__context.mozImageSmoothingEnabled=!0,c.__context.msImageSmoothingEnabled=!0,c.__context.imageSmoothingEnabled=!0);if(d.border||d.background)V.context.rect(.5,.5,e.width-1,e.height-1),d.background&&(b=L.hex(d.backgroundColor&16777215,
6),V.context.fillStyle="#"+b,V.context.fill()),d.border&&(V.context.lineWidth=1,b=L.hex(d.borderColor&16777215,6),V.context.strokeStyle="#"+b,V.context.stroke());V.context.textBaseline="top";V.context.textAlign="start";b=-a.get_scrollH();m=e=0;for(h=a.get_scrollV()-1;m<h;)q=m++,e-=d.lineHeights.data.get(q);m=0;h=(new ma("(iPad|iPhone|iPod|Firefox)","g")).match(M.get_window().navigator.userAgent);q=0;for(var g=d.layoutGroups;q<g.data.get_length();){var k=g.data.get(q);++q;if(!(k.lineIndex<a.get_scrollV()-
1)){if(k.lineIndex>a.get_scrollV()+d.bottomScrollV-2)break;V.context.font=U.getFont(k.format);var l=L.hex(k.format.color&16777215,6);V.context.fillStyle="#"+l;h&&(m=.185*k.format.size);if(null!=a.__filters&&0<a.__filters.length&&u.is(a.__filters[0],Fe)){l=a.__filters[0];var n=V.context.globalAlpha;V.context.globalAlpha=n*l.alpha;var p=L.hex(l.color&16777215,6);V.context.strokeStyle="#"+p;V.context.lineWidth=Math.max(l.blurX,l.blurY);V.context.strokeText(F.substring(f,k.startIndex,k.endIndex),k.offsetX+
b,k.offsetY+m+e);V.context.strokeStyle=null;V.context.globalAlpha=n}V.context.fillText(F.substring(f,k.startIndex,k.endIndex),k.offsetX+b,k.offsetY+m+e);if(-1<a.__caretIndex&&d.selectable)if(a.__selectionIndex==a.__caretIndex){if(a.__showCursor&&k.startIndex<=a.__caretIndex&&k.endIndex>=a.__caretIndex){n=l=0;for(p=a.__caretIndex-k.startIndex;n<p;){var z=n++;if(k.positions.length<=z)break;l+=k.getAdvance(z)}p=n=0;for(z=a.get_scrollV()-1;p<z;){var t=p++;n-=d.lineHeights.data.get(t)}V.context.fillRect(k.offsetX+
l-a.get_scrollH(),n+2,1,U.getFormatHeight(a.get_defaultTextFormat())-1)}}else if(k.startIndex<=a.__caretIndex&&k.endIndex>=a.__caretIndex||k.startIndex<=a.__selectionIndex&&k.endIndex>=a.__selectionIndex||k.startIndex>a.__caretIndex&&k.endIndex<a.__selectionIndex||k.startIndex>a.__selectionIndex&&k.endIndex<a.__caretIndex)l=u["int"](Math.min(a.__selectionIndex,a.__caretIndex)),n=u["int"](Math.max(a.__selectionIndex,a.__caretIndex)),k.startIndex>l&&(l=k.startIndex),k.endIndex<n&&(n=k.endIndex),p=a.getCharBoundaries(l),
n>=F.get_length(d.text)?(z=a.getCharBoundaries(F.get_length(d.text)-1),z.x+=z.width+2):z=a.getCharBoundaries(n),null!=p&&null!=z&&(V.context.fillStyle="#000000",V.context.fillRect(p.x,p.y,z.x-p.x,k.height),V.context.fillStyle="#FFFFFF",V.context.fillText(F.substring(f,l,n),b+p.x,k.offsetY+m+e))}}}else{if(d.border||d.background)d.border?V.context.rect(.5,.5,e.width-1,e.height-1):V.context.rect(0,0,e.width,e.height),d.background&&(f=L.hex(d.backgroundColor&16777215,6),V.context.fillStyle="#"+f,V.context.fill()),
d.border&&(V.context.lineWidth=1,V.context.lineCap="square",f=L.hex(d.borderColor&16777215,6),V.context.strokeStyle="#"+f,V.context.stroke());if(-1<a.__caretIndex&&d.selectable&&a.__showCursor){f=-a.get_scrollH();e=b=0;for(m=a.get_scrollV()-1;e<m;)h=e++,b-=d.lineHeights.data.get(h);V.context.beginPath();d=L.hex(a.get_defaultTextFormat().color&16777215,6);V.context.strokeStyle="#"+d;V.context.moveTo(f+2.5,b+2.5);V.context.lineWidth=1;V.context.lineTo(f+2.5,b+U.getFormatHeight(a.get_defaultTextFormat())-
1);V.context.stroke();V.context.closePath()}}c.__bitmap=ba.fromCanvas(a.__graphics.__canvas);c.__visible=!0;a.__dirty=!1;c.set___dirty(!1)}}};var oc=function(){};k["openfl._internal.renderer.dom.DOMBitmap"]=oc;oc.__name__=["openfl","_internal","renderer","dom","DOMBitmap"];oc.clear=function(a,b){null!=a.__image&&(b.element.removeChild(a.__image),a.__image=null,a.__style=null);null!=a.__canvas&&(b.element.removeChild(a.__canvas),a.__canvas=null,a.__style=null)};oc.render=function(a,b){null!=a.stage&&
a.__worldVisible&&a.__renderable&&null!=a.bitmapData&&a.bitmapData.__isValid&&a.bitmapData.readable?(b.maskManager.pushObject(a),null!=a.bitmapData.image.buffer.__srcImage?oc.renderImage(a,b):oc.renderCanvas(a,b),b.maskManager.popObject(a)):oc.clear(a,b)};oc.renderCanvas=function(a,b){null!=a.__image&&(b.element.removeChild(a.__image),a.__image=null);null==a.__canvas&&(a.__canvas=M.get_document().createElement("canvas"),a.__context=a.__canvas.getContext("2d"),a.__imageVersion=-1,b.allowSmoothing&&
a.smoothing||(a.__context.mozImageSmoothingEnabled=!1,a.__context.msImageSmoothingEnabled=!1,a.__context.imageSmoothingEnabled=!1),Wa.initializeElement(a,a.__canvas,b));a.__imageVersion!=a.bitmapData.image.version&&(ha.convertToCanvas(a.bitmapData.image),a.__canvas.width=a.bitmapData.width+1,a.__canvas.width=a.bitmapData.width,a.__canvas.height=a.bitmapData.height,a.__context.drawImage(a.bitmapData.image.buffer.__srcCanvas,0,0),a.__imageVersion=a.bitmapData.image.version);Wa.updateClip(a,b);Wa.applyStyle(a,
b,!0,!0,!0)};oc.renderImage=function(a,b){null!=a.__canvas&&(b.element.removeChild(a.__canvas),a.__canvas=null);null==a.__image&&(a.__image=M.get_document().createElement("img"),a.__image.crossOrigin="Anonymous",a.__image.src=a.bitmapData.image.buffer.__srcImage.src,Wa.initializeElement(a,a.__image,b));Wa.updateClip(a,b);Wa.applyStyle(a,b,!0,!0,!0)};var Nh=function(a){this.renderSession=a};k["openfl._internal.renderer.dom.DOMBlendModeManager"]=Nh;Nh.__name__=["openfl","_internal","renderer","dom",
"DOMBlendModeManager"];Nh.__super__=sf;Nh.prototype=w(sf.prototype,{currentBlendMode:null,renderSession:null,setBlendMode:function(a){if(this.currentBlendMode!=a&&(this.currentBlendMode=a,null!=this.renderSession.context))switch(a){case 0:this.renderSession.context.globalCompositeOperation="lighter";break;case 1:this.renderSession.context.globalCompositeOperation="destination-in";break;case 2:this.renderSession.context.globalCompositeOperation="darken";break;case 3:this.renderSession.context.globalCompositeOperation=
"difference";break;case 4:this.renderSession.context.globalCompositeOperation="destination-out";break;case 5:this.renderSession.context.globalCompositeOperation="hard-light";break;case 7:this.renderSession.context.globalCompositeOperation="source-over";break;case 8:this.renderSession.context.globalCompositeOperation="lighten";break;case 9:this.renderSession.context.globalCompositeOperation="multiply";break;case 11:this.renderSession.context.globalCompositeOperation="overlay";break;case 12:this.renderSession.context.globalCompositeOperation=
"screen";break;default:this.renderSession.context.globalCompositeOperation="source-over"}},__class__:Nh});var Jg=function(){};k["openfl._internal.renderer.dom.DOMDisplayObject"]=Jg;Jg.__name__=["openfl","_internal","renderer","dom","DOMDisplayObject"];Jg.clear=function(a,b){ag.clear(a,b)};Jg.render=function(a,b){null!=a.opaqueBackground&&!a.__cacheBitmapRender&&0<a.get_width()&&a.get_height();ag.render(a,b)};var Oh=function(a){this.renderSession=a;this.clipRects=[];this.numClipRects=0};k["openfl._internal.renderer.dom.DOMMaskManager"]=
Oh;Oh.__name__=["openfl","_internal","renderer","dom","DOMMaskManager"];Oh.__super__=tf;Oh.prototype=w(tf.prototype,{currentClipRect:null,clipRects:null,numClipRects:null,pushMask:function(a){this.pushRect(a.getBounds(a),a.__getRenderTransform())},pushObject:function(a,b){null==b&&(b=!0);b&&null!=a.__scrollRect&&this.pushRect(a.__scrollRect,a.__renderTransform);null!=a.__mask&&this.pushMask(a.__mask)},pushRect:function(a,b){this.numClipRects==this.clipRects.length&&(this.clipRects[this.numClipRects]=
new X);var c=this.clipRects[this.numClipRects];a.__transform(c,b);0<this.numClipRects&&(a=this.clipRects[this.numClipRects-1],c.__contract(a.x,a.y,a.width,a.height));0>c.height&&(c.height=0);0>c.width&&(c.width=0);this.currentClipRect=c;this.numClipRects++},popMask:function(){this.popRect()},popObject:function(a,b){null==b&&(b=!0);null!=a.__mask&&this.popMask();b&&null!=a.__scrollRect&&this.popRect()},popRect:function(){0<this.numClipRects&&(this.numClipRects--,this.currentClipRect=0<this.numClipRects?
this.clipRects[this.numClipRects-1]:null)},updateClip:function(a){if(null==this.currentClipRect)a.__worldClipChanged=null!=a.__worldClip,a.__worldClip=null;else{null==a.__worldClip&&(a.__worldClip=new X);var b=X.__pool.get(),c=sa.__pool.get();c.copyFrom(a.__renderTransform);c.invert();this.currentClipRect.__transform(b,c);b.equals(a.__worldClip)?a.__worldClipChanged=!1:(a.__worldClip.copyFrom(b),a.__worldClipChanged=!0);X.__pool.release(b);sa.__pool.release(c)}},__class__:Oh});var Wa=function(a,b){yd.call(this,
a);this.element=b;this.renderSession=new vf;this.renderSession.clearRenderDirty=!0;this.renderSession.element=b;a=a.window.config;null!=a&&C.hasField(a,"allowHighDPI")&&a.allowHighDPI&&(Ge.scale=window.devicePixelRatio||1);a=window.getComputedStyle(document.documentElement,"");a=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];"WebKit|Moz|MS|O".match(new RegExp("("+a+")","i"));a[0].toUpperCase();a.substr(1);this.renderSession.vendorPrefix=a;this.renderSession.transformProperty=
"webkit"==a?"-webkit-transform":"transform";this.renderSession.transformOriginProperty="webkit"==a?"-webkit-transform-origin":"transform-origin";this.renderSession.maskManager=new Oh(this.renderSession);this.renderSession.blendModeManager=new Nh(this.renderSession);this.renderSession.renderer=this};k["openfl._internal.renderer.dom.DOMRenderer"]=Wa;Wa.__name__=["openfl","_internal","renderer","dom","DOMRenderer"];Wa.applyStyle=function(a,b,c,d,e){var f=a.__style;c&&a.__renderTransformChanged&&f.setProperty(b.transformProperty,
a.__renderTransform.to3DString(b.roundPixels),null);a.__worldZ!=++b.z&&(a.__worldZ=b.z,f.setProperty("z-index",null==a.__worldZ?"null":""+a.__worldZ,null));d&&a.__worldAlphaChanged&&(1>a.__worldAlpha?f.setProperty("opacity",null==a.__worldAlpha?"null":""+a.__worldAlpha,null):f.removeProperty("opacity"));e&&a.__worldClipChanged&&(null==a.__worldClip?f.removeProperty("clip"):(a=a.__worldClip,f.setProperty("clip","rect("+a.y+"px, "+a.get_right()+"px, "+a.get_bottom()+"px, "+a.x+"px)",null)))};Wa.initializeElement=
function(a,b,c){var d=a.__style=b.style;d.setProperty("position","absolute",null);d.setProperty("top","0",null);d.setProperty("left","0",null);d.setProperty(c.transformOriginProperty,"0 0 0",null);c.element.appendChild(b);a.__worldAlphaChanged=!0;a.__renderTransformChanged=!0;a.__worldVisibleChanged=!0;a.__worldClipChanged=!0;a.__worldClip=null;a.__worldZ=-1};Wa.updateClip=function(a,b){b.maskManager.updateClip(a)};Wa.__super__=yd;Wa.prototype=w(yd.prototype,{element:null,render:function(){this.renderSession.allowSmoothing=
2!=this.stage.quality;this.element.style.background=this.stage.__transparent?"none":this.stage.__colorString;this.renderSession.z=1;this.stage.__renderDOM(this.renderSession)},renderStage3D:function(){for(var a=0,b=this.stage.stage3Ds;a<b.data.get_length();){var c=b.data.get(a);++a;c.__renderDOM(this.stage,this.renderSession)}},__class__:Wa});var ag=function(){};k["openfl._internal.renderer.dom.DOMShape"]=ag;ag.__name__=["openfl","_internal","renderer","dom","DOMShape"];ag.clear=function(a,b){null!=
a.__canvas&&(b.element.removeChild(a.__canvas),a.__canvas=null,a.__style=null)};ag.render=function(a,b){var c=a.__graphics;if(null!=a.stage&&a.__worldVisible&&a.__renderable&&null!=c){p.render(c,b,a.__renderTransform);if(c.__dirty||a.__worldAlphaChanged||a.__canvas!=c.__canvas)null!=c.__canvas?a.__canvas!=c.__canvas&&(null!=a.__canvas&&b.element.removeChild(a.__canvas),a.__canvas=c.__canvas,a.__context=c.__context,Wa.initializeElement(a,a.__canvas,b)):ag.clear(a,b);if(null!=a.__canvas){b.maskManager.pushObject(a);
var d=a.__renderTransform;a.__renderTransform=c.__worldTransform;c.__transformDirty&&(c.__transformDirty=!1,a.__renderTransformChanged=!0);Wa.updateClip(a,b);Wa.applyStyle(a,b,!0,!0,!0);a.__renderTransform=d;b.maskManager.popObject(a)}}else ag.clear(a,b)};var kb=function(){};k["openfl._internal.renderer.dom.DOMTextField"]=kb;kb.__name__=["openfl","_internal","renderer","dom","DOMTextField"];kb.clear=function(a,b){null!=a.__div&&(b.element.removeChild(a.__div),a.__div=null,a.__style=null)};kb.render=
function(a,b){var c=a.__textEngine;if(null!=a.stage&&a.__worldVisible&&a.__renderable){if(a.__dirty||a.__renderTransformChanged||null==a.__div)if(""!=c.text||c.background||c.border||1==c.type){null==a.__div&&(a.__div=M.get_document().createElement("div"),Wa.initializeElement(a,a.__div,b),a.__style.setProperty("outline","none",null),a.__div.addEventListener("input",function(b){b.preventDefault();a.get_htmlText()!=a.__div.innerHTML&&(a.set_htmlText(a.__div.innerHTML),a.__dirty=!1)},!0));c.wordWrap?
a.__style.setProperty("word-wrap","break-word",null):a.__style.setProperty("white-space","nowrap",null);a.__style.setProperty("overflow","hidden",null);c.selectable?(a.__style.setProperty("cursor","text",null),a.__style.setProperty("-webkit-user-select","text",null),a.__style.setProperty("-moz-user-select","text",null),a.__style.setProperty("-ms-user-select","text",null),a.__style.setProperty("-o-user-select","text",null)):a.__style.setProperty("cursor","inherit",null);a.__div.contentEditable=1==
c.type;var d=a.__style;c.background?d.setProperty("background-color","#"+L.hex(c.backgroundColor&16777215,6),null):d.removeProperty("background-color");var e=c.width,f=c.height,m=1,h=a.__textFormat.size,q=h,g=a.__renderTransform;if(1!=g.a||1!=g.d)g.a==g.d?(m=g.a,g.a=g.d=1):g.a>g.d?(m=g.a,g.d/=g.a,g.a=1):(m=g.d,g.a/=g.d,g.d=1),q*=m,e=Math.ceil(e*m),f=Math.ceil(f*m);a.__textFormat.size=q;g=c.text;var k=0;if(a.__isHTML){for(var l=g;kb.__regexFont.match(l);){l=kb.__regexFont.matched(0);var n="";kb.__regexFace.match(l)&&
(n+="font-family:'"+kb.__getAttributeMatch(kb.__regexFace)+"';");kb.__regexColor.match(l)&&(n+="color:#"+kb.__getAttributeMatch(kb.__regexColor)+";");if(kb.__regexSize.match(l)){k=kb.__getAttributeMatch(kb.__regexSize);var p=P.cca(k,0);k=u.parseFloat(k)*m;n+="font-size:"+(43==p||45==p?q+k:k)+"px;"}g=L.replace(g,l,"<span style='"+n+"'>");l=kb.__regexFont.matchedRight()}g=kb.__regexCloseFont.replace(g,"</span>")}else g=L.htmlEscape(g);g=L.replace(g,"<p ","<p style='margin-top:0; margin-bottom:0;' ");
m=a.__textFormat.leading;a.__textFormat.leading+=u["int"](k);a.__div.innerHTML=(new ma("\r\n","g")).replace(g,"<br>");a.__div.innerHTML=(new ma("\n","g")).replace(a.__div.innerHTML,"<br>");a.__div.innerHTML=(new ma("\r","g")).replace(a.__div.innerHTML,"<br>");d.setProperty("font",U.getFont(a.__textFormat),null);a.__textFormat.size=h;a.__textFormat.leading=m;d.setProperty("top","3px",null);c.border?(d.setProperty("border","solid 1px #"+L.hex(c.borderColor&16777215,6),null),a.__renderTransform.translate(-1,
-1),a.__renderTransformChanged=!0,a.__transformDirty=!0):""!=d.border&&(d.removeProperty("border"),a.__renderTransformChanged=!0);d.setProperty("color","#"+L.hex(a.__textFormat.color&16777215,6),null);d.setProperty("width",e+"px",null);d.setProperty("height",f+"px",null);switch(a.__textFormat.align){case 0:d.setProperty("text-align","center",null);break;case 4:d.setProperty("text-align","right",null);break;default:d.setProperty("text-align","left",null)}a.__dirty=!1}else null!=a.__div&&(b.element.removeChild(a.__div),
a.__div=null);null!=a.__div&&(c=b.roundPixels,b.roundPixels=!0,Wa.updateClip(a,b),Wa.applyStyle(a,b,!0,!0,!0),b.roundPixels=c)}else kb.clear(a,b)};kb.__getAttributeMatch=function(a){return null!=a.matched(2)?a.matched(2):a.matched(3)};var Kg=function(){};k["openfl._internal.renderer.opengl.GLBitmap"]=Kg;Kg.__name__=["openfl","_internal","renderer","opengl","GLBitmap"];Kg.render=function(a,b){if(a.__renderable&&!(0>=a.__worldAlpha)&&null!=a.bitmapData&&a.bitmapData.__isValid){var c=b.renderer,d=b.gl;
b.blendModeManager.setBlendMode(a.__worldBlendMode);b.maskManager.pushObject(a);b.filterManager.pushObject(a);var e=b.shaderManager.initShader(a.shader);b.shaderManager.setShader(e);e.get_data().uImage0.input=a.bitmapData;var f=b.allowSmoothing&&(a.smoothing||b.upscaled);e.get_data().uImage0.smoothing=f;e.get_data().uMatrix.value=c.getMatrix(a.__renderTransform);c=!a.__worldColorTransform.__isDefault();null==e.get_data().uColorTransform.value&&(e.get_data().uColorTransform.value=[]);e.get_data().uColorTransform.value[0]=
c;b.shaderManager.updateShader(e);d.bindBuffer(d.ARRAY_BUFFER,a.bitmapData.getBuffer(d,a.__worldAlpha,a.__worldColorTransform));d.vertexAttribPointer(e.get_data().aPosition.index,3,d.FLOAT,!1,104,Z.fromInt(0));d.vertexAttribPointer(e.get_data().aTexCoord.index,2,d.FLOAT,!1,104,Z.fromInt(12));d.vertexAttribPointer(e.get_data().aAlpha.index,1,d.FLOAT,!1,104,Z.fromInt(20));d.vertexAttribPointer(e.get_data().aColorMultipliers.index,4,d.FLOAT,!1,104,Z.fromInt(24));d.vertexAttribPointer(e.get_data().aColorMultipliers.index+
1,4,d.FLOAT,!1,104,Z.fromInt(40));d.vertexAttribPointer(e.get_data().aColorMultipliers.index+2,4,d.FLOAT,!1,104,Z.fromInt(56));d.vertexAttribPointer(e.get_data().aColorMultipliers.index+3,4,d.FLOAT,!1,104,Z.fromInt(72));d.vertexAttribPointer(e.get_data().aColorOffsets.index,4,d.FLOAT,!1,104,Z.fromInt(88));d.drawArrays(d.TRIANGLE_STRIP,0,4);b.filterManager.popObject(a);b.maskManager.popObject(a)}};var Ph=function(a){this.gl=a;this.setBlendMode(10);a.enable(a.BLEND)};k["openfl._internal.renderer.opengl.GLBlendModeManager"]=
Ph;Ph.__name__=["openfl","_internal","renderer","opengl","GLBlendModeManager"];Ph.__super__=sf;Ph.prototype=w(sf.prototype,{currentBlendMode:null,gl:null,setBlendMode:function(a){if(this.currentBlendMode!=a)switch(this.currentBlendMode=a,a){case 0:this.gl.blendEquation(this.gl.FUNC_ADD);this.gl.blendFunc(this.gl.ONE,this.gl.ONE);break;case 9:this.gl.blendEquation(this.gl.FUNC_ADD);this.gl.blendFunc(this.gl.DST_COLOR,this.gl.ONE_MINUS_SRC_ALPHA);break;case 12:this.gl.blendEquation(this.gl.FUNC_ADD);
this.gl.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_COLOR);break;case 14:this.gl.blendEquation(this.gl.FUNC_REVERSE_SUBTRACT);this.gl.blendFunc(this.gl.ONE,this.gl.ONE);break;default:this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)}},__class__:Ph});var qk=function(){};k["openfl._internal.renderer.opengl.GLDisplayObject"]=qk;qk.__name__=["openfl","_internal","renderer","opengl","GLDisplayObject"];qk.render=function(a,b){if(!(null==a.opaqueBackground&&
null==a.__graphics||!a.__renderable||0>=a.__worldAlpha)){if(null!=a.opaqueBackground&&!a.__cacheBitmapRender&&0<a.get_width()&&0<a.get_height()){b.blendModeManager.setBlendMode(a.__worldBlendMode);b.maskManager.pushObject(a);var c=b.gl,d=X.__pool.get();d.setTo(0,0,a.get_width(),a.get_height());b.maskManager.pushRect(d,a.__renderTransform);var e=a.opaqueBackground;c.clearColor((e>>>16&255)/255,(e>>>8&255)/255,(e&255)/255,1);c.clear(c.COLOR_BUFFER_BIT);b.maskManager.popRect();b.maskManager.popObject(a);
X.__pool.release(d)}null!=a.__graphics&&Rk.render(a,b)}};var Qh=function(a,b){this.renderSession=b;this.renderer=a;this.gl=b.gl;this.filterDepth=0;this.matrix=new sa};k["openfl._internal.renderer.opengl.GLFilterManager"]=Qh;Qh.__name__=["openfl","_internal","renderer","opengl","GLFilterManager"];Qh.__super__=Lh;Qh.prototype=w(Lh.prototype,{filterDepth:null,gl:null,matrix:null,renderer:null,pushObject:function(a){return this.renderSession.shaderManager.defaultShader},popObject:function(a){},renderPass:function(a,
b){if(null!=a&&null!=b){b.get_data().uImage0.input=a;var c=this.renderSession.allowSmoothing&&this.renderSession.upscaled;b.get_data().uImage0.smoothing=c;b.get_data().uMatrix.value=this.renderer.getMatrix(this.matrix);null!=b.get_data().uColorTransform&&(null==b.get_data().uColorTransform.value&&(b.get_data().uColorTransform.value=[]),b.get_data().uColorTransform.value[0]=!1);this.renderSession.shaderManager.setShader(b);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.getBuffer(this.gl,1,null));this.gl.vertexAttribPointer(b.get_data().aPosition.index,
3,this.gl.FLOAT,!1,104,Z.fromInt(0));this.gl.vertexAttribPointer(b.get_data().aTexCoord.index,2,this.gl.FLOAT,!1,104,Z.fromInt(12));this.gl.vertexAttribPointer(b.get_data().aAlpha.index,1,this.gl.FLOAT,!1,104,Z.fromInt(20));this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}},__class__:Qh});var Rh=function(a){this.renderSession=a;this.gl=a.gl;this.clipRects=[];this.numClipRects=0;this.tempRect=new X};k["openfl._internal.renderer.opengl.GLMaskManager"]=Rh;Rh.__name__=["openfl","_internal","renderer","opengl",
"GLMaskManager"];Rh.__super__=tf;Rh.prototype=w(tf.prototype,{clipRects:null,gl:null,numClipRects:null,tempRect:null,pushMask:function(a){this.pushRect(a.getBounds(a),a.__getRenderTransform())},pushObject:function(a,b){null==b&&(b=!0);b&&null!=a.__scrollRect&&this.pushRect(a.__scrollRect,a.__renderTransform);null!=a.__mask&&this.pushMask(a.__mask)},pushRect:function(a,b){this.numClipRects==this.clipRects.length&&(this.clipRects[this.numClipRects]=new X);var c=this.clipRects[this.numClipRects];a.__transform(c,
b);0<this.numClipRects&&(a=this.clipRects[this.numClipRects-1],c.__contract(a.x,a.y,a.width,a.height));0>c.height&&(c.height=0);0>c.width&&(c.width=0);this.scissorRect(c);this.numClipRects++},popMask:function(){this.popRect()},popObject:function(a,b){null==b&&(b=!0);null!=a.__mask&&this.popMask();b&&null!=a.__scrollRect&&this.popRect()},popRect:function(){0<this.numClipRects&&(this.numClipRects--,0<this.numClipRects?this.scissorRect(this.clipRects[this.numClipRects-1]):this.scissorRect())},scissorRect:function(a){if(null!=
a){var b=this.renderSession.renderer;this.gl.enable(this.gl.SCISSOR_TEST);var c=this.tempRect;a.__transform(c,b.displayMatrix);a=Math.floor(c.x);b=Math.floor(b.height-c.y-c.height);var d=Math.ceil(c.width);c=Math.ceil(c.height);0>d&&(d=0);0>c&&(c=0);this.gl.scissor(a,b,d,c)}else this.gl.disable(this.gl.SCISSOR_TEST)},__class__:Rh});var He=function(a,b,c){yd.call(this,a);this.gl=b;this.defaultRenderTarget=c;this.flipped=null==c;this.matrix=S._new();this.values=[];this.renderSession=new vf;this.renderSession.clearRenderDirty=
!0;this.renderSession.gl=b;this.renderSession.renderer=this;this.renderSession.blendModeManager=new Ph(b);this.renderSession.filterManager=new Qh(this,this.renderSession);this.renderSession.shaderManager=new Sh(b);this.renderSession.maskManager=new Rh(this.renderSession);null!=a.window&&(null==a.stage3Ds.data.get(0).context3D&&a.stage3Ds.data.get(0).__createContext(a,this.renderSession),b=null!=c?c.width:Math.ceil(a.window.get_width()*a.window.get_scale()),a=null!=c?c.height:Math.ceil(a.window.get_height()*
a.window.get_scale()),this.resize(b,a))};k["openfl._internal.renderer.opengl.GLRenderer"]=He;He.__name__=["openfl","_internal","renderer","opengl","GLRenderer"];He.__super__=yd;He.prototype=w(yd.prototype,{projection:null,projectionFlipped:null,defaultRenderTarget:null,displayHeight:null,displayMatrix:null,displayWidth:null,flipped:null,gl:null,matrix:null,renderTargetA:null,renderTargetB:null,offsetX:null,offsetY:null,values:null,clear:function(){this.stage.__transparent?this.gl.clearColor(0,0,0,
0):this.gl.clearColor(this.stage.__colorSplit[0],this.stage.__colorSplit[1],this.stage.__colorSplit[2],1);this.gl.clear(this.gl.COLOR_BUFFER_BIT)},getMatrix:function(a){var b=sa.__pool.get();b.copyFrom(a);b.concat(this.displayMatrix);this.renderSession.roundPixels&&(b.tx=Math.round(b.tx),b.ty=Math.round(b.ty));S.identity(this.matrix);S.set(this.matrix,0,b.a);S.set(this.matrix,1,b.b);S.set(this.matrix,4,b.c);S.set(this.matrix,5,b.d);S.set(this.matrix,12,b.tx);S.set(this.matrix,13,b.ty);S.append(this.matrix,
this.flipped?this.projectionFlipped:this.projection);for(a=0;16>a;){var c=a++;this.values[c]=S.get(this.matrix,c)}sa.__pool.release(b);return this.values},render:function(){this.gl.viewport(this.offsetX,this.offsetY,this.displayWidth,this.displayHeight);this.renderSession.allowSmoothing=2!=this.stage.quality;this.renderSession.upscaled=1!=this.displayMatrix.a||1!=this.displayMatrix.d;this.stage.__renderGL(this.renderSession);if(0<this.offsetX||0<this.offsetY)this.gl.clearColor(0,0,0,1),this.gl.enable(this.gl.SCISSOR_TEST),
0<this.offsetX&&(this.gl.scissor(0,0,this.offsetX,this.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.scissor(this.offsetX+this.displayWidth,0,this.width,this.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT)),0<this.offsetY&&(this.gl.scissor(0,0,this.width,this.offsetY),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.scissor(0,this.offsetY+this.displayHeight,this.width,this.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT)),this.gl.disable(this.gl.SCISSOR_TEST)},renderStage3D:function(){for(var a=
0,b=this.stage.stage3Ds;a<b.data.get_length();){var c=b.data.get(a);++a;c.__renderGL(this.stage,this.renderSession)}},resize:function(a,b){yd.prototype.resize.call(this,a,b);0<a&&0<b&&(null==this.renderTargetA||this.renderTargetA.width==a&&this.renderTargetA.height==b||(this.renderTargetA=ba.fromTexture(this.stage.stage3Ds.data.get(0).context3D.createRectangleTexture(a,b,1,!0)),this.gl.bindTexture(this.gl.TEXTURE_2D,this.renderTargetA.getTexture(this.gl)),this.gl.texParameteri(this.gl.TEXTURE_2D,
this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)),null==this.renderTargetB||this.renderTargetB.width==a&&this.renderTargetB.height==b||(this.renderTargetB=ba.fromTexture(this.stage.stage3Ds.data.get(0).context3D.createRectangleTexture(a,b,1,!0)),this.gl.bindTexture(this.gl.TEXTURE_2D,this.renderTargetB.getTexture(this.gl)),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,
this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)));this.displayMatrix=null==this.defaultRenderTarget?this.stage.__displayMatrix:new sa;a=null==this.defaultRenderTarget?this.stage.stageWidth:this.defaultRenderTarget.width;b=null==this.defaultRenderTarget?this.stage.stageHeight:this.defaultRenderTarget.height;this.offsetX=Math.round(this.displayMatrix.__transformX(0,0));this.offsetY=Math.round(this.displayMatrix.__transformY(0,0));this.displayWidth=Math.round(this.displayMatrix.__transformX(a,0)-this.offsetX);
this.displayHeight=Math.round(this.displayMatrix.__transformY(0,b)-this.offsetY);this.projection=S.createOrtho(this.offsetX,this.displayWidth+this.offsetX,this.offsetY,this.displayHeight+this.offsetY,-1E3,1E3);this.projectionFlipped=S.createOrtho(this.offsetX,this.displayWidth+this.offsetX,this.displayHeight+this.offsetY,this.offsetY,-1E3,1E3)},__class__:He});var Sh=function(a){this.gl=a;this.defaultShader=new Ej;this.initShader(this.defaultShader)};k["openfl._internal.renderer.opengl.GLShaderManager"]=
Sh;Sh.__name__=["openfl","_internal","renderer","opengl","GLShaderManager"];Sh.__super__=Mh;Sh.prototype=w(Mh.prototype,{gl:null,initShader:function(a){return null!=a?(null==a.gl&&(a.gl=this.gl,a.__init()),a):this.defaultShader},setShader:function(a){this.currentShader!=a&&(null!=this.currentShader&&this.currentShader.__disable(),null==a?(this.currentShader=null,this.gl.useProgram(null)):(this.currentShader=a,this.initShader(a),this.gl.useProgram(a.glProgram),this.currentShader.__enable()))},updateShader:function(a){null!=
this.currentShader&&this.currentShader.__update()},__class__:Sh});var Rk=function(){};k["openfl._internal.renderer.opengl.GLShape"]=Rk;Rk.__name__=["openfl","_internal","renderer","opengl","GLShape"];Rk.render=function(a,b){if(a.__renderable&&!(0>=a.__worldAlpha)){var c=a.__graphics;if(null!=c&&(p.render(c,b,a.__renderTransform),null!=c.__bitmap&&c.__visible)){var d=b.renderer,e=b.gl;b.blendModeManager.setBlendMode(a.__worldBlendMode);b.maskManager.pushObject(a);var f=b.filterManager.pushObject(a);
b.shaderManager.setShader(f);f.get_data().uImage0.input=c.__bitmap;f.get_data().uImage0.smoothing=b.allowSmoothing;f.get_data().uMatrix.value=d.getMatrix(c.__worldTransform);d=!a.__worldColorTransform.__isDefault();null==f.get_data().uColorTransform.value&&(f.get_data().uColorTransform.value=[]);f.get_data().uColorTransform.value[0]=d;b.shaderManager.updateShader(f);e.bindBuffer(e.ARRAY_BUFFER,c.__bitmap.getBuffer(e,a.__worldAlpha,a.__worldColorTransform));e.vertexAttribPointer(f.get_data().aPosition.index,
3,e.FLOAT,!1,104,Z.fromInt(0));e.vertexAttribPointer(f.get_data().aTexCoord.index,2,e.FLOAT,!1,104,Z.fromInt(12));e.vertexAttribPointer(f.get_data().aAlpha.index,1,e.FLOAT,!1,104,Z.fromInt(20));e.vertexAttribPointer(f.get_data().aColorMultipliers.index,4,e.FLOAT,!1,104,Z.fromInt(24));e.vertexAttribPointer(f.get_data().aColorMultipliers.index+1,4,e.FLOAT,!1,104,Z.fromInt(40));e.vertexAttribPointer(f.get_data().aColorMultipliers.index+2,4,e.FLOAT,!1,104,Z.fromInt(56));e.vertexAttribPointer(f.get_data().aColorMultipliers.index+
3,4,e.FLOAT,!1,104,Z.fromInt(72));e.vertexAttribPointer(f.get_data().aColorOffsets.index,4,e.FLOAT,!1,104,Z.fromInt(88));e.drawArrays(e.TRIANGLE_STRIP,0,4);b.filterManager.popObject(a);b.maskManager.popObject(a)}}};var Fj=function(){this._registers=hb.toFloatVector(null,4096);this.clearSettings()};k["openfl._internal.stage3D.Context3DStateCache"]=Fj;Fj.__name__=["openfl","_internal","stage3D","Context3DStateCache"];Fj.prototype={_activeTexture:null,_activeVertexArray:null,_cullingMode:null,_depthTestCompareMode:null,
_depthTestEnabled:null,_depthTestMask:null,_destBlendFactor:null,_program:null,_registers:null,_srcBlendFactor:null,_viewportHeight:null,_viewportOriginX:null,_viewportOriginY:null,_viewportWidth:null,clearRegisters:function(){for(var a=0;4096>a;){var b=a++;this._registers.data.set(b,-999999999)}},clearSettings:function(){this._destBlendFactor=this._srcBlendFactor=null;this._depthTestMask=this._depthTestEnabled=!1;this._cullingMode=this._program=this._depthTestCompareMode=null;this._viewportHeight=
this._viewportWidth=this._viewportOriginY=this._viewportOriginX=this._activeVertexArray=this._activeTexture=-1;this.clearRegisters()},updateViewport:function(a,b,c,d){this._viewportOriginX=a;this._viewportOriginY=b;this._viewportWidth=c;this._viewportHeight=d;return!0},__class__:Fj};var Gj=function(a){this.__formatMapAlpha=new Cb;this.__formatMap=new Cb;this.checkDXT(a);this.checkETC1(a);this.checkPVRTC(a)};k["openfl._internal.stage3D.GLCompressedTextureFormats"]=Gj;Gj.__name__=["openfl","_internal",
"stage3D","GLCompressedTextureFormats"];Gj.prototype={__formatMap:null,__formatMapAlpha:null,checkDXT:function(a){a=a.getExtension("WEBGL_compressed_texture_s3tc");null!=a&&(this.__formatMap.set(0,a.COMPRESSED_RGBA_S3TC_DXT1_EXT),this.__formatMapAlpha.set(0,a.COMPRESSED_RGBA_S3TC_DXT5_EXT))},checkETC1:function(a){a=a.getExtension("WEBGL_compressed_texture_etc1");null!=a&&this.__formatMap.set(2,a.COMPRESSED_RGB_ETC1_WEBGL)},checkPVRTC:function(a){a=a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
null!=a&&(this.__formatMap.set(1,a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG),this.__formatMapAlpha.set(1,a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG))},__class__:Gj};var db=function(){};k["openfl._internal.stage3D.GLUtils"]=db;db.__name__=["openfl","_internal","stage3D","GLUtils"];db.CheckGLError=function(){if(db.debug){var a=ra.getError();if(0!=a){switch(a){case 0:a="GL_NO_ERROR";break;case 1280:a="GL_INVALID_ENUM";break;case 1281:a="GL_INVALID_VALUE";break;case 1282:a="GL_INVALID_OPERATION";break;case 1285:a="GL_OUT_OF_MEMORY";
break;case 1286:a="GL_INVALID_FRAMEBUFFER_OPERATION";break;default:a=null==a?"null":""+a}throw new K(new Ie("Error calling openGL api. Error: "+a+"\n"));}}};var Hj=function(a,b,c,d,e,f,m,h,q){null==q&&(q=!1);null==h&&(h=!1);null==m&&(m=!1);null==f&&(f=0);null==e&&(e=0);this.set_minFilter(a);this.set_magFilter(b);this.set_wrapModeS(c);this.set_wrapModeT(d);this.set_lodBias(e);this.set_maxAniso(f);this.ignoreSampler=m;this.centroid=h;this.mipmapGenerated=q;this.__samplerDirty=!0};k["openfl._internal.stage3D.SamplerState"]=
Hj;Hj.__name__=["openfl","_internal","stage3D","SamplerState"];Hj.prototype={lodBias:null,magFilter:null,maxAniso:null,minFilter:null,wrapModeS:null,wrapModeT:null,centroid:null,ignoreSampler:null,mipmapGenerated:null,__samplerDirty:null,set_lodBias:function(a){this.lodBias!=a&&(this.__samplerDirty=!0);return this.lodBias=a},set_magFilter:function(a){this.magFilter!=a&&(this.__samplerDirty=!0);return this.magFilter=a},set_maxAniso:function(a){this.maxAniso!=a&&(this.__samplerDirty=!0);return this.maxAniso=
a},set_minFilter:function(a){this.minFilter!=a&&(this.__samplerDirty=!0);return this.minFilter=a},set_wrapModeS:function(a){this.wrapModeS!=a&&(this.__samplerDirty=!0);return this.wrapModeS=a},set_wrapModeT:function(a){this.wrapModeT!=a&&(this.__samplerDirty=!0);return this.wrapModeT=a},__class__:Hj,__properties__:{set_wrapModeT:"set_wrapModeT",set_wrapModeS:"set_wrapModeS",set_minFilter:"set_minFilter",set_maxAniso:"set_maxAniso",set_magFilter:"set_magFilter",set_lodBias:"set_lodBias"}};var pa=function(){};
k["openfl._internal.stage3D.opengl.GLContext3D"]=pa;pa.__name__=["openfl","_internal","stage3D","opengl","GLContext3D"];pa.create=function(a){var b=a.__renderSession.gl,c=new Zc(512);a.__vertexConstants=c;c=new Zc(512);a.__fragmentConstants=c;c=[1,1,1,1];c=null!=c?new Zc(c):null;a.__positionScale=c;a.__samplerDirty=0;a.__samplerTextures=hb.toObjectVector(null,8);a.__samplerStates=[];for(c=0;8>c;){var d=c++;a.__samplerStates[d]=new Hj(b.LINEAR,b.LINEAR,b.CLAMP_TO_EDGE,b.CLAMP_TO_EDGE)}a.maxBackBufferHeight=
a.maxBackBufferWidth=b.getParameter(b.MAX_VIEWPORT_DIMS);a.__backBufferAntiAlias=0;a.__backBufferEnableDepthAndStencil=!0;a.__backBufferWantsBestResolution=!1;a.__frameCount=0;a.__rttDepthAndStencil=!1;a.__samplerDirty=0;a.__stencilCompareMode=0;a.__stencilRef=0;a.__stencilReadMask=255;c=b.getExtension("EXT_texture_filter_anisotropic");null!=c&&C.hasField(c,"MAX_TEXTURE_MAX_ANISOTROPY_EXT")||(c=b.getExtension("MOZ_EXT_texture_filter_anisotropic"));null!=c&&C.hasField(c,"MAX_TEXTURE_MAX_ANISOTROPY_EXT")||
(c=b.getExtension("WEBKIT_EXT_texture_filter_anisotropic"));a.__supportsPackedDepthStencil=!0;Fc.DEPTH_STENCIL=b.DEPTH_STENCIL;a.__supportsAnisotropicFiltering=null!=c;a.__supportsAnisotropicFiltering&&(Fc.TEXTURE_MAX_ANISOTROPY_EXT=c.TEXTURE_MAX_ANISOTROPY_EXT,c=b.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY_EXT),a.__maxAnisotropyTexture2D=c);db.CheckGLError();c=b.getParameter(b.VENDOR);db.CheckGLError();d=b.getParameter(b.VERSION);db.CheckGLError();var e=b.getParameter(b.RENDERER);db.CheckGLError();
b=b.getParameter(b.SHADING_LANGUAGE_VERSION);db.CheckGLError();a.driverInfo="OpenGL Vendor="+c+" Version="+d+" Renderer="+e+" GLSL="+b};pa.__setViewport=function(a,b,c,d){null!=pa.context.__renderToTexture&&(b*=-1);Fc.__stateCache.updateViewport(a,b,c,d)&&(pa.gl.viewport(a,b,c,d),db.CheckGLError())};pa.__updateBlendFactorsTEMP=function(a){pa.context=a;pa.gl=a.__renderSession.gl;pa.__updateBlendFactors()};pa.__updateBlendFactors=function(){if(null!=Fc.__stateCache._srcBlendFactor&&null!=Fc.__stateCache._destBlendFactor){switch(Fc.__stateCache._srcBlendFactor){case 0:var a=
pa.gl.DST_ALPHA;break;case 1:a=pa.gl.DST_COLOR;break;case 2:a=pa.gl.ONE;break;case 3:a=pa.gl.ONE_MINUS_DST_ALPHA;break;case 4:a=pa.gl.ONE_MINUS_DST_COLOR;break;case 5:a=pa.gl.ONE_MINUS_SRC_ALPHA;break;case 7:a=pa.gl.SRC_ALPHA;break;case 9:a=pa.gl.ZERO;break;default:throw new K(new Ie);}switch(Fc.__stateCache._destBlendFactor){case 0:var b=pa.gl.DST_ALPHA;break;case 2:b=pa.gl.ONE;break;case 3:b=pa.gl.ONE_MINUS_DST_ALPHA;break;case 5:b=pa.gl.ONE_MINUS_SRC_ALPHA;break;case 6:b=pa.gl.ONE_MINUS_SRC_COLOR;
break;case 7:b=pa.gl.SRC_ALPHA;break;case 8:b=pa.gl.SRC_COLOR;break;case 9:b=pa.gl.ZERO;break;default:throw new K(new Ie);}pa.gl.enable(pa.gl.BLEND);db.CheckGLError();pa.gl.blendFunc(a,b);db.CheckGLError()}};pa.__updateBackbufferViewportTEMP=function(a){pa.context=a;pa.gl=a.__renderSession.gl;pa.__updateBackbufferViewport()};pa.__updateBackbufferViewport=function(){Je.__active||(Je.__active=!0,pa.context.__renderSession.renderer.clear());null==pa.context.__renderToTexture&&0<pa.context.backBufferWidth&&
0<pa.context.backBufferHeight&&pa.__setViewport(u["int"](pa.context.__stage3D.x),u["int"](pa.context.__stage3D.y),pa.context.backBufferWidth,pa.context.backBufferHeight)};var Sk=function(){};k["openfl._internal.stage3D.opengl.GLCubeTexture"]=Sk;Sk.__name__=["openfl","_internal","stage3D","opengl","GLCubeTexture"];Sk.create=function(a,b){a.__textureTarget=b.gl.TEXTURE_CUBE_MAP;a.__uploadedSides=0};var Tk=function(){};k["openfl._internal.stage3D.opengl.GLProgram3D"]=Tk;Tk.__name__=["openfl","_internal",
"stage3D","opengl","GLProgram3D"];Tk.use=function(a,b){b=b.gl;b.useProgram(a.__programID);db.CheckGLError();a.__vertexUniformMap.markAllDirty();a.__fragmentUniformMap.markAllDirty();for(var c=a.__samplerUniforms.iterator();c.hasNext();){var d=c.next();if(1==d.regCount)b.uniform1i(d.location,d.regIndex),db.CheckGLError();else throw new K(new Ie("!!! TODO: uniform location on webgl"));}for(a=a.__alphaSamplerUniforms.iterator();a.hasNext();)if(c=a.next(),1==c.regCount)b.uniform1i(c.location,c.regIndex),
db.CheckGLError();else throw new K(new Ie("!!! TODO: uniform location on webgl"));};var Th=function(){};k["openfl._internal.stage3D.opengl.GLRectangleTexture"]=Th;Th.__name__=["openfl","_internal","stage3D","opengl","GLRectangleTexture"];Th.create=function(a,b){a.__textureTarget=b.gl.TEXTURE_2D;Th.uploadFromTypedArray(a,b,null)};Th.uploadFromTypedArray=function(a,b,c){b=b.gl;b.bindTexture(a.__textureTarget,a.__textureID);db.CheckGLError();b.texImage2D(a.__textureTarget,0,a.__internalFormat,a.__width,
a.__height,0,a.__format,b.UNSIGNED_BYTE,Z.fromArrayBufferView(c));db.CheckGLError();b.bindTexture(a.__textureTarget,null);db.CheckGLError()};var Uk=function(){};k["openfl._internal.stage3D.opengl.GLStage3D"]=Uk;Uk.__name__=["openfl","_internal","stage3D","opengl","GLStage3D"];Uk.render=function(a,b){null!=a.context3D&&(b.blendModeManager.setBlendMode(null),null!=b.shaderManager.currentShader&&(b.shaderManager.setShader(null),null!=a.context3D.__program&&a.context3D.__program.__use()));db.debug&&b.gl.getError()};
var Uh=function(){};k["openfl._internal.stage3D.opengl.GLTexture"]=Uh;Uh.__name__=["openfl","_internal","stage3D","opengl","GLTexture"];Uh.create=function(a,b){var c=b.gl;a.__textureTarget=c.TEXTURE_2D;c.bindTexture(a.__textureTarget,a.__textureID);db.CheckGLError();c.texImage2D(a.__textureTarget,0,a.__internalFormat,a.__width,a.__height,0,a.__format,c.UNSIGNED_BYTE,Z.fromInt(0));db.CheckGLError();c.bindTexture(a.__textureTarget,null);Uh.uploadFromTypedArray(a,b,null)};Uh.uploadFromTypedArray=function(a,
b,c,d){null==d&&(d=0);if(null!=c){b=b.gl;var e=a.__width>>d,f=a.__height>>d;if(0!=e||0!=f)0==e&&(e=1),0==f&&(f=1),b.bindTexture(a.__textureTarget,a.__textureID),db.CheckGLError(),b.texImage2D(a.__textureTarget,d,a.__internalFormat,e,f,0,a.__format,b.UNSIGNED_BYTE,Z.fromArrayBufferView(c)),db.CheckGLError(),b.bindTexture(a.__textureTarget,null),db.CheckGLError()}};var me=function(){};k["openfl._internal.stage3D.opengl.GLTextureBase"]=me;me.__name__=["openfl","_internal","stage3D","opengl","GLTextureBase"];
me.create=function(a,b){b=b.gl;a.__textureID=b.createTexture();a.__textureContext=b;null==me.__supportsBGRA&&(me.__textureInternalFormat=b.RGBA,me.__supportsBGRA=!1,me.__textureFormat=b.RGBA);null==me.__compressedTextureFormats&&(me.__compressedTextureFormats=new Gj(b));a.__internalFormat=me.__textureInternalFormat;a.__format=me.__textureFormat};var Vk=function(){};k["openfl._internal.stage3D.opengl.GLVideoTexture"]=Vk;Vk.__name__=["openfl","_internal","stage3D","opengl","GLVideoTexture"];Vk.create=
function(a,b){a.__textureTarget=b.gl.TEXTURE_2D};var bg=k["openfl._internal.swf.FilterType"]={__ename__:["openfl","_internal","swf","FilterType"],__constructs__:["BlurFilter","ColorMatrixFilter","DropShadowFilter","GlowFilter"]};bg.BlurFilter=function(a,b,c){a=["BlurFilter",0,a,b,c];a.__enum__=bg;a.toString=I;return a};bg.ColorMatrixFilter=function(a){a=["ColorMatrixFilter",1,a];a.__enum__=bg;a.toString=I;return a};bg.DropShadowFilter=function(a,b,c,d,e,f,m,h,q,g,k){a=["DropShadowFilter",2,a,b,c,
d,e,f,m,h,q,g,k];a.__enum__=bg;a.toString=I;return a};bg.GlowFilter=function(a,b,c,d,e,f,m,h){a=["GlowFilter",3,a,b,c,d,e,f,m,h];a.__enum__=bg;a.toString=I;return a};var ef=function(){this.symbols=new Cb};k["openfl._internal.swf.SWFLite"]=ef;ef.__name__=["openfl","_internal","swf","SWFLite"];ef.resolveClass=function(a){var b=Q.resolveClass(a);null==b&&(b=Q.resolveClass(L.replace(a,"openfl._legacy","openfl")));null==b&&(b=Q.resolveClass(L.replace(a,"openfl._v2","openfl")));return b};ef.resolveEnum=
function(a){var b=Q.resolveEnum(a);null==b&&(b=Q.resolveEnum(L.replace(a,"openfl._legacy","openfl")));null==b&&(b=Q.resolveEnum(L.replace(a,"openfl._v2","openfl")));return b};ef.unserialize=function(a){if(null==a)return null;a=new Bb(a);a.setResolver({resolveClass:ef.resolveClass,resolveEnum:ef.resolveEnum});return a.unserialize()};ef.prototype={frameRate:null,library:null,root:null,symbols:null,createButton:function(a){return null},createMovieClip:function(a){null==a&&(a="");if(""==a)return this.root.__createObject(this);
for(var b=this.symbols.iterator();b.hasNext();){var c=b.next();if(c.className==a&&u.is(c,Lf))return n.__cast(c,Lf).__createObject(this)}return null},getBitmapData:function(a){for(var b=this.symbols.iterator();b.hasNext();){var c=b.next();if(c.className==a&&u.is(c,cd))return Na.getBitmapData(c.path)}return null},hasSymbol:function(a){for(var b=this.symbols.iterator();b.hasNext();)if(b.next().className==a)return!0;return!1},serialize:function(){var a=new ac;a.serialize(this);return a.toString()},__class__:ef};
var Ta=function(){Yc.call(this)};k["openfl.utils.AssetLibrary"]=Ta;Ta.__name__=["openfl","utils","AssetLibrary"];Ta.fromBytes=function(a,b){return Ta.fromManifest(Ua.fromBytes(qd.toBytes(a),b))};Ta.fromFile=function(a,b){return Ta.fromManifest(Ua.fromFile(a,b))};Ta.fromManifest=function(a){a=Yc.fromManifest(a);return null!=a&&u.is(a,Ta)?a:null};Ta.loadFromBytes=function(a,b){return Ua.loadFromBytes(qd.toBytes(a),b).then(function(a){return Ta.loadFromManifest(a)})};Ta.loadFromFile=function(a,b){return Ua.loadFromFile(a,
b).then(function(a){return Ta.loadFromManifest(a)})};Ta.loadFromManifest=function(a){a=Ta.fromManifest(a);return null!=a&&u.is(a,Ta)?a.load().then(function(a){return Sa.withValue(a)}):Sa.withError("Could not load asset manifest")};Ta.__super__=Yc;Ta.prototype=w(Yc.prototype,{__class__:Ta});var Ij=function(a){Yc.call(this);this.id=a;this.alphaCheck=new ea;this.imageClassNames=new ea;this.rootPath=""};k["openfl._internal.swf.SWFLiteLibrary"]=Ij;Ij.__name__=["openfl","_internal","swf","SWFLiteLibrary"];
Ij.__super__=Ta;Ij.prototype=w(Ta.prototype,{alphaCheck:null,id:null,imageClassNames:null,preloading:null,rootPath:null,swf:null,exists:function(a,b){return null==this.swf?!1:""==a&&"MOVIE_CLIP"==b?!0:"IMAGE"!=b&&"MOVIE_CLIP"!=b||null==this.swf?!1:this.swf.hasSymbol(a)},getImage:function(a){this.imageClassNames.exists(a)&&(a=this.imageClassNames.get(a));if(!this.alphaCheck.exists(a))for(var b=this.swf.symbols.iterator();b.hasNext();){var c=b.next();if(u.is(c,cd)&&n.__cast(c,cd).path==a&&null!=c.alpha){b=
Ta.prototype.getImage.call(this,a);var d=Ta.prototype.getImage.call(this,c.alpha);this.__copyChannel(b,d);this.cachedImages.set(a,b);this.cachedImages.remove(c.alpha);this.alphaCheck.set(a,!0);return b}}return Ta.prototype.getImage.call(this,a)},getMovieClip:function(a){return null!=this.swf?this.swf.createMovieClip(a):null},isLocal:function(a,b){return!0},load:function(){var a=this;null!=this.id&&this.preload.set(this.id,!0);var b=new Ob;this.preloading=!0;var c=function(c){a.cachedText.set(a.id,
c);a.swf=ef.unserialize(c);a.swf.library=a;for(c=a.swf.symbols.iterator();c.hasNext();){var d=c.next();u.is(d,cd)&&null!=d.className&&a.imageClassNames.set(d.className,d.path)}ef.instances.set(a.id,a.swf);a.__load().onProgress(l(b,b.progress)).onError(l(b,b.error)).onComplete(function(c){a.preloading=!1;b.complete(a)})};if(Na.exists(this.id)){for(var d=this.paths.keys();d.hasNext();){var e=d.next();this.preload.set(e,!0)}this.loadText(this.id).onError(l(b,b.error)).onComplete(c)}else{for(d=this.paths.keys();d.hasNext();)e=
d.next(),this.preload.set(e,!0);d=null!=this.rootPath&&""!=this.rootPath?this.rootPath+"/"+this.id:this.id;var f=new Vh;f.addEventListener("complete",function(a){c(f.data)});f.addEventListener("ioError",function(a){b.error(a)});f.load(new Wh(d))}return b.future},loadImage:function(a){var b=this;this.imageClassNames.exists(a)&&(a=this.imageClassNames.get(a));if(!this.preloading&&!this.alphaCheck.exists(a))for(var c=this.swf.symbols.iterator();c.hasNext();){var d=c.next();if(u.is(d,cd)&&n.__cast(d,
cd).path==a&&(d=[d],null!=d[0].alpha))return c=[new Ob],this.__loadImage(a).onError((Rb=c[0],l(Rb,Rb.error))).onComplete(function(c,d){return function(e){b.__loadImage(d[0].alpha).onError((Rb=c[0],l(Rb,Rb.error))).onComplete(function(c,d){return function(f){b.__copyChannel(e,f);b.cachedImages.set(a,e);b.cachedImages.remove(d[0].alpha);b.alphaCheck.set(a,!0);c[0].complete(e)}}(c,d))}}(c,d)),c[0].future}return Ta.prototype.loadImage.call(this,a)},unload:function(){for(var a,b=this.swf.symbols.iterator();b.hasNext();)a=
b.next(),u.is(a,cd)&&Na.cache.removeBitmapData(a.path)},__copyChannel:function(a,b){null!=b&&a.copyChannel(b,b.get_rect(),new ye,nb.RED,nb.ALPHA);a.buffer.premultiplied=!0;a.set_premultiplied(!1)},__fromManifest:function(a){this.rootPath=a.rootPath;Ta.prototype.__fromManifest.call(this,a)},__load:function(){return Ta.prototype.load.call(this)},__loadImage:function(a){return Ta.prototype.loadImage.call(this,a)},__class__:Ij});var Ab=k["openfl._internal.swf.ShapeCommand"]={__ename__:["openfl","_internal",
"swf","ShapeCommand"],__constructs__:"BeginBitmapFill BeginFill BeginGradientFill CurveTo EndFill LineStyle LineTo MoveTo".split(" ")};Ab.BeginBitmapFill=function(a,b,c,d){a=["BeginBitmapFill",0,a,b,c,d];a.__enum__=Ab;a.toString=I;return a};Ab.BeginFill=function(a,b){a=["BeginFill",1,a,b];a.__enum__=Ab;a.toString=I;return a};Ab.BeginGradientFill=function(a,b,c,d,e,f,m,h){a=["BeginGradientFill",2,a,b,c,d,e,f,m,h];a.__enum__=Ab;a.toString=I;return a};Ab.CurveTo=function(a,b,c,d){a=["CurveTo",3,a,b,
c,d];a.__enum__=Ab;a.toString=I;return a};Ab.EndFill=["EndFill",4];Ab.EndFill.toString=I;Ab.EndFill.__enum__=Ab;Ab.LineStyle=function(a,b,c,d,e,f,m,h){a=["LineStyle",5,a,b,c,d,e,f,m,h];a.__enum__=Ab;a.toString=I;return a};Ab.LineTo=function(a,b){a=["LineTo",6,a,b];a.__enum__=Ab;a.toString=I;return a};Ab.MoveTo=function(a,b){a=["MoveTo",7,a,b];a.__enum__=Ab;a.toString=I;return a};var xb=function(){};k["openfl._internal.symbols.SWFSymbol"]=xb;xb.__name__=["openfl","_internal","symbols","SWFSymbol"];
xb.prototype={className:null,id:null,__createObject:function(a){return null},__class__:xb};var cd=function(){};k["openfl._internal.symbols.BitmapSymbol"]=cd;cd.__name__=["openfl","_internal","symbols","BitmapSymbol"];cd.__super__=xb;cd.prototype=w(xb.prototype,{alpha:null,path:null,smooth:null,__createObject:function(a){return new Ia(ba.fromImage(a.library.getImage(this.path)),1,0!=this.smooth)},__class__:cd});var Jj=function(){};k["openfl._internal.symbols.ButtonSymbol"]=Jj;Jj.__name__=["openfl",
"_internal","symbols","ButtonSymbol"];Jj.__super__=xb;Jj.prototype=w(xb.prototype,{downState:null,hitState:null,overState:null,upState:null,__createObject:function(a){var b=null;ld.__initSWF=a;ld.__initSymbol=this;null!=this.className&&(a=Q.resolveClass(this.className),null!=a&&(b=Q.createInstance(a,[])));null==b&&(b=new ld);return b},__class__:Jj});var Kj=function(){};k["openfl._internal.symbols.DynamicTextSymbol"]=Kj;Kj.__name__=["openfl","_internal","symbols","DynamicTextSymbol"];Kj.__super__=
xb;Kj.prototype=w(xb.prototype,{align:null,border:null,color:null,fontHeight:null,fontID:null,fontName:null,height:null,html:null,indent:null,input:null,leading:null,leftMargin:null,multiline:null,password:null,rightMargin:null,selectable:null,text:null,width:null,wordWrap:null,x:null,y:null,__createObject:function(a){var b=new Lb;b.__fromSymbol(a,this);return b},__class__:Kj});var Lj=function(){};k["openfl._internal.symbols.FontSymbol"]=Lj;Lj.__name__=["openfl","_internal","symbols","FontSymbol"];
Lj.__super__=xb;Lj.prototype=w(xb.prototype,{advances:null,ascent:null,bold:null,codes:null,descent:null,glyphs:null,italic:null,leading:null,name:null,__class__:Lj});var Mj=function(){};k["openfl._internal.symbols.ShapeSymbol"]=Mj;Mj.__name__=["openfl","_internal","symbols","ShapeSymbol"];Mj.__super__=xb;Mj.prototype=w(xb.prototype,{commands:null,rendered:null,__createObject:function(a){var b=new cg,c=b.get_graphics();if(null!=this.rendered)return c.copyFrom(this.rendered.get_graphics()),b;for(var d=
0,e=this.commands;d<e.length;){var f=e[d];++d;switch(Q.enumIndex(f)){case 0:var m=f[5],h=f[4],q=f[3];f=a.symbols.get(f[2]);f=a.library.getImage(f.path);null!=f&&c.beginBitmapFill(ba.fromImage(f),q,h,m);break;case 1:c.beginFill(f[2],f[3]);break;case 2:c.beginGradientFill(f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9]);break;case 3:c.curveTo(f[2],f[3],f[4],f[5]);break;case 4:c.endFill();break;case 5:m=f[9];h=f[8];q=f[7];var g=f[6],k=f[5],l=f[4],n=f[3];f=f[2];null!=f?c.lineStyle(f,n,l,k,g,q,h,m):c.lineStyle();
break;case 6:c.lineTo(f[2],f[3]);break;case 7:c.moveTo(f[2],f[3])}}this.commands=null;this.rendered=new cg;this.rendered.get_graphics().copyFrom(b.get_graphics());return b},__class__:Mj});var Lf=function(){this.frames=[]};k["openfl._internal.symbols.SpriteSymbol"]=Lf;Lf.__name__=["openfl","_internal","symbols","SpriteSymbol"];Lf.__super__=xb;Lf.prototype=w(xb.prototype,{baseClassName:null,frames:null,__createObject:function(a){xd.__initSWF=a;xd.__initSymbol=this;a=null;null!=this.className&&(a=Q.resolveClass(this.className));
null==a&&null!=this.baseClassName&&(a=Q.resolveClass(this.baseClassName));return null!=a?Q.createInstance(a,[]):new xd},__class__:Lf});var Nj=function(){};k["openfl._internal.symbols.StaticTextSymbol"]=Nj;Nj.__name__=["openfl","_internal","symbols","StaticTextSymbol"];Nj.__super__=xb;Nj.prototype=w(xb.prototype,{matrix:null,records:null,rendered:null,__createObject:function(a){var b=new wf,c=b.__graphics;if(null!=this.rendered)return b.text=this.rendered.text,c.copyFrom(this.rendered.__graphics),
b;var d="";if(null!=this.records)for(var e=null,f=16777215,m=this.matrix.tx,h=this.matrix.ty,q,g,k=0,l=this.records;k<l.length;){var n=l[k];++k;null!=n.fontID&&(e=a.symbols.get(n.fontID));null!=n.offsetX&&(m=this.matrix.tx+.05*n.offsetX);null!=n.offsetY&&(h=this.matrix.ty+.05*n.offsetY);null!=n.color&&(f=n.color);if(null!=e){q=n.fontHeight/1024*.05;for(var p=0,z=n.glyphs.length;p<z;){var t=p++;g=n.glyphs[t];d+=String.fromCharCode(e.codes[g]);var u=0;for(g=e.glyphs[g];u<g.length;){var r=g[u];++u;switch(Q.enumIndex(r)){case 1:c.beginFill(f&
16777215,(f>>24&255)/255);break;case 3:c.curveTo(r[2]*q+m,r[3]*q+h,r[4]*q+m,r[5]*q+h);break;case 4:c.endFill();break;case 5:var x=r[9],v=r[8],w=r[7],A=r[6],B=r[5],C=r[4],D=r[3];r=r[2];null!=r?c.lineStyle(r,D,C,B,A,w,v,x):c.lineStyle();break;case 6:c.lineTo(r[2]*q+m,r[3]*q+h);break;case 7:c.moveTo(r[2]*q+m,r[3]*q+h)}}m+=.05*n.advances[t]}}}b.text=d;this.records=null;this.rendered=new wf;this.rendered.text=d;this.rendered.__graphics.copyFrom(b.__graphics);return b},__class__:Nj});var Wk=function(){};
k["openfl._internal.symbols.StaticTextRecord"]=Wk;Wk.__name__=["openfl","_internal","symbols","StaticTextRecord"];Wk.prototype={advances:null,color:null,fontHeight:null,fontID:null,glyphs:null,offsetX:null,offsetY:null,__class__:Wk};var N=function(){};k["openfl._internal.text.HTMLParser"]=N;N.__name__=["openfl","_internal","text","HTMLParser"];N.parse=function(a,b,c){a=N.__regexBreakTag.replace(a,"\n");a=N.__regexEntities[0].replace(a,'"');a=N.__regexEntities[1].replace(a,"'");a=N.__regexEntities[2].replace(a,
"&");a=N.__regexEntities[5].replace(a," ");var d=a.split("<");if(1==d.length)a=N.__regexHTMLTag.replace(a,""),1<c.data.get_length()&&(d=c.data.get_length()-1,new yc(c.data.splice(1,d))),a=N.__regexEntities[3].replace(a,"<"),a=N.__regexEntities[4].replace(a,">"),c=c.data.get(0),c.format=b,c.start=0,c.end=a.length;else{a=c.data.get_length();new yc(c.data.splice(0,a));a="";for(var e,f=0,m=d.length;f<m;){var h=f++;e=d[h];e=N.__regexEntities[3].replace(e,"<");e=N.__regexEntities[4].replace(e,">");d[h]=
e}e=[b.clone()];h=!1;for(f=0;f<d.length;)if(m=d[f],++f,""!=m){var q="/"==P.substr(m,0,1),g=m.indexOf(">"),k=g+1,l=m.indexOf(" ");l=m.substring(q?1:0,-1<l&&l<g?l:g);if(q)e.pop(),q=e[e.length-1].clone(),"p"==l.toLowerCase()&&0<c.data.get_length()&&(a+="\n",h=!0),k<m.length&&(m=P.substr(m,k,null),h=new Mf(q,a.length,a.length+m.length),c.data.push(h),a+=m,h=!1);else if(q=e[e.length-1].clone(),-1<g){switch(l.toLowerCase()){case "a":N.__regexHref.match(m)&&(q.url=N.__getAttributeMatch(N.__regexHref));break;
case "b":q.bold=!0;break;case "em":case "i":q.italic=!0;break;case "font":N.__regexFace.match(m)&&(q.font=N.__getAttributeMatch(N.__regexFace));N.__regexColor.match(m)&&(q.color=u.parseInt("0x"+N.__getAttributeMatch(N.__regexColor)));N.__regexSize.match(m)&&(g=N.__getAttributeMatch(N.__regexSize),l=P.cca(g,0),q.size=43==l||45==l?(2<=e.length?e[e.length-2]:b).size+u.parseInt(g):u.parseInt(g));break;case "p":0<c.data.get_length()&&!h&&(a+="\n");N.__regexAlign.match(m)&&(q.align=Xk.fromString(N.__getAttributeMatch(N.__regexAlign).toLowerCase()));
break;case "textformat":N.__regexBlockIndent.match(m)&&(q.blockIndent=u.parseInt(N.__getAttributeMatch(N.__regexBlockIndent)));N.__regexIndent.match(m)&&(q.indent=u.parseInt(N.__getAttributeMatch(N.__regexIndent)));N.__regexLeading.match(m)&&(q.leading=u.parseInt(N.__getAttributeMatch(N.__regexLeading)));N.__regexLeftMargin.match(m)&&(q.leftMargin=u.parseInt(N.__getAttributeMatch(N.__regexLeftMargin)));N.__regexRightMargin.match(m)&&(q.rightMargin=u.parseInt(N.__getAttributeMatch(N.__regexRightMargin)));
if(N.__regexTabStops.match(m)){g=N.__getAttributeMatch(N.__regexTabStops).split(" ");l=[];for(var n=0;n<g.length;){var p=g[n];++n;l.push(u.parseInt(p))}q.tabStops=l}break;case "u":q.underline=!0}e.push(q);k<m.length&&(m=m.substring(k),h=new Mf(q,a.length,a.length+m.length),c.data.push(h),a+=m,h=!1)}else h=new Mf(q,a.length,a.length+m.length),c.data.push(h),a+=m,h=!1}0==c.data.get_length()&&(b=new Mf(e[0],0,0),c.data.push(b))}return a};N.__getAttributeMatch=function(a){return null!=a.matched(2)?a.matched(2):
a.matched(3)};var U=function(a){this.textField=a;this.height=this.width=100;this.set_text("");this.bounds=new X(0,0,0,0);this.type=0;this.autoSize=2;this.embedFonts=!1;this.selectable=!0;this.borderColor=0;this.border=!1;this.backgroundColor=16777215;this.background=!1;this.gridFitType=1;this.maxChars=0;this.multiline=!1;this.scrollH=this.sharpness=0;this.scrollV=1;this.wordWrap=!1;this.lineAscents=hb.toFloatVector(null);this.lineBreaks=hb.toIntVector(null);this.lineDescents=hb.toFloatVector(null);
this.lineLeadings=hb.toFloatVector(null);this.lineHeights=hb.toFloatVector(null);this.lineWidths=hb.toFloatVector(null);this.layoutGroups=hb.toObjectVector(null);this.textFormatRanges=hb.toObjectVector(null);U.__canvas=M.get_document().createElement("canvas");U.__context=U.__canvas.getContext("2d")};k["openfl._internal.text.TextEngine"]=U;U.__name__=["openfl","_internal","text","TextEngine"];U.getFormatHeight=function(a){U.__context.font=U.getFont(a);if(null!=a.__ascent){var b=a.size*a.__ascent;var c=
a.size*a.__descent}else b=a.size,c=.185*a.size;return b+c+a.leading};U.getFont=function(a){var b=a.italic?"italic ":"normal ";b=b+"normal "+(a.bold?"bold ":"normal ");b+=a.size+"px";b+="/"+(a.leading+a.size+3)+"px ";switch(a.font){case "_sans":a="sans-serif";break;case "_serif":a="serif";break;case "_typewriter":a="monospace";break;default:a="'"+(new ma("^[\\s'\"]+(.*)[\\s'\"]+$","")).replace(a.font,"$1")+"'"}return b+(""+a)};U.prototype={antiAliasType:null,autoSize:null,background:null,backgroundColor:null,
border:null,borderColor:null,bottomScrollV:null,bounds:null,embedFonts:null,gridFitType:null,height:null,layoutGroups:null,lineAscents:null,lineBreaks:null,lineDescents:null,lineLeadings:null,lineHeights:null,lineWidths:null,maxChars:null,maxScrollH:null,maxScrollV:null,multiline:null,numLines:null,scrollH:null,scrollV:null,selectable:null,sharpness:null,text:null,textHeight:null,textFormatRanges:null,textWidth:null,type:null,width:null,wordWrap:null,textField:null,__hasFocus:null,__restrictRegexp:null,
__useIntAdvances:null,getBounds:function(){var a=this.border?1:0;this.bounds.width=this.width+a;this.bounds.height=this.height+a},getLineBreakIndex:function(a){null==a&&(a=0);var b=F.indexOf(this.text,"<br>",a),c=F.indexOf(this.text,"\n",a);a=F.indexOf(this.text,"\r",a);return-1==c&&-1==b?a:-1==a&&-1==b?c:-1==a&&-1==c?b:-1==c?u["int"](Math.min(b,a)):-1==a?u["int"](Math.min(b,c)):-1==b?u["int"](Math.min(c,a)):u["int"](Math.min(Math.min(c,a),b))},getLineMeasurements:function(){this.lineAscents.data.set_length(0);
this.lineDescents.data.set_length(0);this.lineLeadings.data.set_length(0);this.lineHeights.data.set_length(0);this.lineWidths.data.set_length(0);var a=0,b=0,c=null,d=0,e=0;this.textHeight=this.textWidth=0;this.numLines=1;for(var f=this.maxScrollH=this.bottomScrollV=0,m=this.layoutGroups;f<m.data.get_length();){var h=m.data.get(f);for(++f;h.lineIndex>this.numLines-1;)this.lineAscents.data.push(a),this.lineDescents.data.push(b),this.lineLeadings.data.push(null!=c?c:0),this.lineHeights.data.push(d),
this.lineWidths.data.push(e),b=a=0,c=null,e=d=0,this.numLines++,this.textHeight<=this.height-2&&this.bottomScrollV++;a=Math.max(a,h.ascent);b=Math.max(b,h.descent);c=null==c?h.leading:u["int"](Math.max(c,h.leading));d=Math.max(d,h.height);e=h.offsetX-2+h.width;e>this.textWidth&&(this.textWidth=e);h=h.offsetY-2+h.ascent+h.descent;h>this.textHeight&&(this.textHeight=h)}this.lineAscents.data.push(a);this.lineDescents.data.push(b);this.lineLeadings.data.push(null!=c?c:0);this.lineHeights.data.push(d);
this.lineWidths.data.push(e);1==this.numLines?(this.bottomScrollV=1,0<c&&(this.textHeight+=c)):this.textHeight<=this.height-2&&this.bottomScrollV++;if(2!=this.autoSize)switch(this.autoSize){case 0:case 1:case 3:this.wordWrap||(this.width=this.textWidth+4),this.height=this.textHeight+4,this.bottomScrollV=this.numLines}this.maxScrollH=this.textWidth>this.width-4?u["int"](this.textWidth-this.width+4):0;this.maxScrollV=this.numLines-this.bottomScrollV+1},getLayoutGroups:function(){this.layoutGroups.data.set_length(0);
var a=-1,b=null,c=Lb.__defaultTextFormat.clone(),d=0,e=0,f=0,m=0,h=null,q=null,g=0,k=0,l=0,n=-2,p=F.indexOf(this.text," "),z=this.getLineBreakIndex(),t=2,u=2,r=0,x=0,v=null;a<this.textFormatRanges.data.get_length()-1&&(++a,b=this.textFormatRanges.data.get(a),c.__merge(b.format),U.__context.font=U.getFont(c),null!=c.__ascent?(e=c.size*c.__ascent,m=c.size*c.__descent):(e=c.size,m=.185*c.size),d=c.leading,k=e+m+d);k>l&&(l=k);e>f&&(f=e);v=b.format;for(var w,A=F.get_length(this.text)+1;r<A;)if(-1<z&&(-1==
p||z<p)&&b.end>=z){if(r<=z){if(this.wordWrap&&n<=r&&4<=this.width)for(var B=F.substring(this.text,r,z),C=U.__context.measureText(B).width;t+C>this.width-2;){for(var D=1;r+D<z+1;){var E=F.substr(this.text,r,D);C=U.__context.measureText(E).width;if(t+C>this.width-2){--D;break}++D}0==D&&C>this.width-4&&(D=F.get_length(this.text));if(0==D){t=2;u+=h.height;++x;break}else{var G=r+D;null==h||h.startIndex!=h.endIndex?(h=new ne(b.format,r,G),this.layoutGroups.data.push(h)):(h.format=b.format,h.startIndex=
r,h.endIndex=G);var H=this.text,I=r+D,K=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0","")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var L=0,N,P=r,Q=I;P<Q;){var W=P++;N=U.__context.measureText(F.substring(H,r,W+1)).width;K.push(N-L);L=N}else for(var R=r,T=I;R<T;){var V=R++;if(V<F.get_length(H)-1){var O=U.__context.measureText(F.charAt(H,V+1)).width;var X=U.__context.measureText(F.substr(H,V,2)).width-O}else X=U.__context.measureText(F.charAt(H,
V)).width;K.push(X)}h.positions=K;h.offsetX=t;h.ascent=e;h.descent=m;h.leading=d;h.lineIndex=x;h.offsetY=u;for(var Y=h.positions,aa=0,ea=0;ea<Y.length;){var ba=Y[ea];++ea;aa+=ba}h.width=aa;h.height=k;h=null;e>f&&(f=e);k>l&&(l=k);for(var fa=0,ha=this.layoutGroups;fa<ha.data.get_length();){var ca=ha.data.get(fa);++fa;if(!(ca.lineIndex<x)){if(ca.lineIndex>x)break;ca.ascent=f;ca.height=l}}u+=l;l=f=0;++x;t=2;r+=D;var S=this.text,ja=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0",
"")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var ka=0,pa,oa=r,sa=z;oa<sa;){var ta=oa++;pa=U.__context.measureText(F.substring(S,r,ta+1)).width;ja.push(pa-ka);ka=pa}else for(var qa=r,Ga=z;qa<Ga;){var ia=qa++;if(ia<F.get_length(S)-1){var Ba=U.__context.measureText(F.charAt(S,ia+1)).width;var zb=U.__context.measureText(F.substr(S,ia,2)).width-Ba}else zb=U.__context.measureText(F.charAt(S,ia)).width;ja.push(zb)}q=ja;for(var xa=0,Z=0;Z<q.length;){var ra=q[Z];++Z;xa+=ra}C=g=xa}}null==
h||h.startIndex!=h.endIndex?(h=new ne(b.format,r,z),this.layoutGroups.data.push(h)):(h.format=b.format,h.startIndex=r,h.endIndex=z);var Aa=this.text,Fa=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0","")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var za=0,ua,va=r,na=z;va<na;){var Ra=va++;ua=U.__context.measureText(F.substring(Aa,r,Ra+1)).width;Fa.push(ua-za);za=ua}else for(var Da=r,La=z;Da<La;){var wa=Da++;if(wa<F.get_length(Aa)-1){var Ja=U.__context.measureText(F.charAt(Aa,
wa+1)).width;var Ca=U.__context.measureText(F.substr(Aa,wa,2)).width-Ja}else Ca=U.__context.measureText(F.charAt(Aa,wa)).width;Fa.push(Ca)}h.positions=Fa;h.offsetX=t;h.ascent=e;h.descent=m;h.leading=d;h.lineIndex=x;h.offsetY=u;for(var Ea=h.positions,Ia=0,la=0;la<Ea.length;){var Oa=Ea[la];++la;Ia+=Oa}h.width=Ia;h.height=k;h=null}else null!=h&&h.startIndex!=h.endIndex&&(h.endIndex==p&&(h.width-=h.getAdvance(h.positions.length-1)),h=null);b.end==z&&(a<this.textFormatRanges.data.get_length()-1&&(++a,
b=this.textFormatRanges.data.get(a),c.__merge(b.format),U.__context.font=U.getFont(c),null!=c.__ascent?(e=c.size*c.__ascent,m=c.size*c.__descent):(e=c.size,m=.185*c.size),d=c.leading,k=e+m+d),k>l&&(l=k),e>f&&(f=e),v=b.format);z>=F.get_length(this.text)-1&&(u-=l);e>f&&(f=e);k>l&&(l=k);for(var ya=0,Ka=this.layoutGroups;ya<Ka.data.get_length();){var Ma=Ka.data.get(ya);++ya;if(!(Ma.lineIndex<x)){if(Ma.lineIndex>x)break;Ma.ascent=f;Ma.height=l}}u+=l;l=f=0;++x;t=2;r=z+1;z=this.getLineBreakIndex(r)}else if(b.end>=
p&&-1<p&&r<b.end)for(null!=h&&h.startIndex!=h.endIndex&&(h=null),w=!1;r!=b.end;){var da=-1;-1==p?da=z:(da=p+1,-1<z&&z<da&&(da=z));if(-1==da||da>b.end)da=b.end;var Ha=this.text,Na=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0","")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var Sa=0,Qa,Pa=r,Va=da;Pa<Va;){var Za=Pa++;Qa=U.__context.measureText(F.substring(Ha,r,Za+1)).width;Na.push(Qa-Sa);Sa=Qa}else for(var Ua=r,Ya=da;Ua<Ya;){var Ta=Ua++;if(Ta<F.get_length(Ha)-
1){var $a=U.__context.measureText(F.charAt(Ha,Ta+1)).width;var cb=U.__context.measureText(F.substr(Ha,Ta,2)).width-$a}else cb=U.__context.measureText(F.charAt(Ha,Ta)).width;Na.push(cb)}q=Na;for(var kb=0,db=0;db<q.length;){var bb=q[db];++db;kb+=bb}g=kb;if(2==v.align){if(0<q.length&&r==n){++r;var jb=q.shift();g-=jb;t+=jb}if(0<q.length&&da==p+1){--da;var ob=q.pop();g-=ob}}this.wordWrap&&t+g>this.width-2&&(w=!0,0<q.length&&da==p+1&&t+g-q[q.length-1]<=this.width-2&&(w=!1));if(w){if(2!=v.align&&(null!=
h||0<this.layoutGroups.data.get_length())){var ab=h;if(null==ab){var eb=this.layoutGroups,nb=this.layoutGroups.data.get_length()-1;ab=eb.data.get(nb)}ab.width-=ab.getAdvance(ab.positions.length-1);ab.endIndex--}for(var pb=this.layoutGroups.data.get_length()-1,fb=0;;){h=this.layoutGroups.data.get(pb);if(0<pb&&h.startIndex>n)++fb;else break;--pb}if(r==n+1){e>f&&(f=e);k>l&&(l=k);for(var rb=0,Xa=this.layoutGroups;rb<Xa.data.get_length();){var lb=Xa.data.get(rb);++rb;if(!(lb.lineIndex<x)){if(lb.lineIndex>
x)break;lb.ascent=f;lb.height=l}}u+=l;l=f=0;++x;t=2}t=2;if(0<fb)for(var mb=this.layoutGroups,ib=this.layoutGroups.data.get_length()-fb,ub=mb.data.get(ib).offsetX,jc=this.layoutGroups.data.get_length()-fb,vb=this.layoutGroups.data.get_length();jc<vb;){var tb=jc++;h=this.layoutGroups.data.get(tb);h.offsetX-=ub;h.offsetY=u;h.lineIndex=x;t+=h.width}if(4<=this.width)for(var wb=F.substring(this.text,r,da),gb=U.__context.measureText(wb).width;t+gb>this.width-2;){for(var hb=1;r+hb<da+1;){var Cb=F.substr(this.text,
r,hb);gb=U.__context.measureText(Cb).width;if(t+gb>this.width-2){--hb;break}++hb}0==hb&&gb>this.width-4&&(hb=F.get_length(this.text));if(0==hb){t=2;u+=h.height;++x;break}else{var yb=r+hb;null==h||h.startIndex!=h.endIndex?(h=new ne(b.format,r,yb),this.layoutGroups.data.push(h)):(h.format=b.format,h.startIndex=r,h.endIndex=yb);var Wa=this.text,Eb=r+hb,Bb=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0","")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var Kb=
0,Fb,Pb=r,mc=Eb;Pb<mc;){var Ub=Pb++;Fb=U.__context.measureText(F.substring(Wa,r,Ub+1)).width;Bb.push(Fb-Kb);Kb=Fb}else for(var Mb=r,Gb=Eb;Mb<Gb;){var Hb=Mb++;if(Hb<F.get_length(Wa)-1){var Yb=U.__context.measureText(F.charAt(Wa,Hb+1)).width;var Tb=U.__context.measureText(F.substr(Wa,Hb,2)).width-Yb}else Tb=U.__context.measureText(F.charAt(Wa,Hb)).width;Bb.push(Tb)}h.positions=Bb;h.offsetX=t;h.ascent=e;h.descent=m;h.leading=d;h.lineIndex=x;h.offsetY=u;for(var Vb=h.positions,Wb=0,Nb=0;Nb<Vb.length;){var fc=
Vb[Nb];++Nb;Wb+=fc}h.width=Wb;h.height=k;h=null;e>f&&(f=e);k>l&&(l=k);for(var Ob=0,Rb=this.layoutGroups;Ob<Rb.data.get_length();){var Jb=Rb.data.get(Ob);++Ob;if(!(Jb.lineIndex<x)){if(Jb.lineIndex>x)break;Jb.ascent=f;Jb.height=l}}u+=l;l=f=0;++x;t=2;r+=hb;var xb=this.text,Xb=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0","")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var ac=0,Qb,bc=r,cc=da;bc<cc;){var Ab=bc++;Qb=U.__context.measureText(F.substring(xb,
r,Ab+1)).width;Xb.push(Qb-ac);ac=Qb}else for(var ic=r,ec=da;ic<ec;){var $b=ic++;if($b<F.get_length(xb)-1){var Dc=U.__context.measureText(F.charAt(xb,$b+1)).width;var Fc=U.__context.measureText(F.substr(xb,$b,2)).width-Dc}else Fc=U.__context.measureText(F.charAt(xb,$b)).width;Xb.push(Fc)}q=Xb;for(var sc=0,Sb=0;Sb<q.length;){var Wc=q[Sb];++Sb;sc+=Wc}gb=g=sc}}null==h||h.startIndex!=h.endIndex?(h=new ne(b.format,r,da),this.layoutGroups.data.push(h)):(h.format=b.format,h.startIndex=r,h.endIndex=da);h.positions=
q;h.offsetX=t;h.ascent=e;h.descent=m;h.leading=d;h.lineIndex=x;h.offsetY=u;h.width=g;h.height=k;t+=g;r=da;w=!1}else null!=h&&r==p?2!=v.align&&(h.endIndex=p,h.positions=h.positions.concat(q),h.width+=g):null==h||2==v.align?(null==h||h.startIndex!=h.endIndex?(h=new ne(b.format,r,da),this.layoutGroups.data.push(h)):(h.format=b.format,h.startIndex=r,h.endIndex=da),h.positions=q,h.offsetX=t,h.ascent=e,h.descent=m,h.leading=d,h.lineIndex=x,h.offsetY=u,h.width=g,h.height=k):(h.endIndex=da,h.positions=h.positions.concat(q),
h.width+=g,z==da&&++da),t+=g,r=da;var vc=F.indexOf(this.text," ",r);b.end<=n?(h=null,r=b.end,a<this.textFormatRanges.data.get_length()-1&&(++a,b=this.textFormatRanges.data.get(a),c.__merge(b.format),U.__context.font=U.getFont(c),null!=c.__ascent?(e=c.size*c.__ascent,m=c.size*c.__descent):(e=c.size,m=.185*c.size),d=c.leading,k=e+m+d),k>l&&(l=k),e>f&&(f=e)):(z==n&&(h.endIndex=z,0>z-h.startIndex-h.positions.length&&h.positions.push(0),r=z+1),n=p,p=vc);if(-1<z&&z<=r&&(p>z||-1==p)||r>F.get_length(this.text)||
p>b.end)break}else{if(r>b.end)break;else if(r<b.end||r==F.get_length(this.text)){if(this.wordWrap&&4<=this.width)for(var Yk=b.end,Kc=F.substring(this.text,r,Yk),dc=U.__context.measureText(Kc).width;t+dc>this.width-2;){for(var Db=1;r+Db<Yk+1;){var Nc=F.substr(this.text,r,Db);dc=U.__context.measureText(Nc).width;if(t+dc>this.width-2){--Db;break}++Db}0==Db&&dc>this.width-4&&(Db=F.get_length(this.text));if(0==Db){t=2;u+=h.height;++x;break}else{var zc=r+Db;null==h||h.startIndex!=h.endIndex?(h=new ne(b.format,
r,zc),this.layoutGroups.data.push(h)):(h.format=b.format,h.startIndex=r,h.endIndex=zc);var Ib=this.text,Cc=r+Db,sb=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0","")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var hc=0,uc,Ic=r,Jc=Cc;Ic<Jc;){var Lc=Ic++;uc=U.__context.measureText(F.substring(Ib,r,Lc+1)).width;sb.push(uc-hc);hc=uc}else for(var wc=r,ed=Cc;wc<ed;){var Zb=wc++;if(Zb<F.get_length(Ib)-1){var Zc=U.__context.measureText(F.charAt(Ib,Zb+1)).width;
var Mc=U.__context.measureText(F.substr(Ib,Zb,2)).width-Zc}else Mc=U.__context.measureText(F.charAt(Ib,Zb)).width;sb.push(Mc)}h.positions=sb;h.offsetX=t;h.ascent=e;h.descent=m;h.leading=d;h.lineIndex=x;h.offsetY=u;for(var Pc=h.positions,Rc=0,Bc=0;Bc<Pc.length;){var pc=Pc[Bc];++Bc;Rc+=pc}h.width=Rc;h.height=k;h=null;e>f&&(f=e);k>l&&(l=k);for(var Hc=0,Vc=this.layoutGroups;Hc<Vc.data.get_length();){var nc=Vc.data.get(Hc);++Hc;if(!(nc.lineIndex<x)){if(nc.lineIndex>x)break;nc.ascent=f;nc.height=l}}u+=
l;l=f=0;++x;t=2;r+=Db;var oc=this.text,Oc=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0","")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var gd=0,kc,lc=r,sd=Yk;lc<sd;){var jd=lc++;kc=U.__context.measureText(F.substring(oc,r,jd+1)).width;Oc.push(kc-gd);gd=kc}else for(var Ec=r,xd=Yk;Ec<xd;){var md=Ec++;if(md<F.get_length(oc)-1){var yd=U.__context.measureText(F.charAt(oc,md+1)).width;var Uc=U.__context.measureText(F.substr(oc,md,2)).width-yd}else Uc=
U.__context.measureText(F.charAt(oc,md)).width;Oc.push(Uc)}q=Oc;for(var tc=0,Xc=0;Xc<q.length;){var Ed=q[Xc];++Xc;tc+=Ed}dc=g=tc}}var yc=this.text,od=b.end,Yc=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0","")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var pd=0,$c,bd=r,wd=od;bd<wd;){var Jd=bd++;$c=U.__context.measureText(F.substring(yc,r,Jd+1)).width;Yc.push($c-pd);pd=$c}else for(var ld=r,zd=od;ld<zd;){var dd=ld++;if(dd<F.get_length(yc)-1){var Dd=
U.__context.measureText(F.charAt(yc,dd+1)).width;var fd=U.__context.measureText(F.substr(yc,dd,2)).width-Dd}else fd=U.__context.measureText(F.charAt(yc,dd)).width;Yc.push(fd)}q=Yc;for(var Qc=0,Ac=0;Ac<q.length;){var qd=q[Ac];++Ac;Qc+=qd}g=Qc;var ad=b.end;null==h||h.startIndex!=h.endIndex?(h=new ne(b.format,r,ad),this.layoutGroups.data.push(h)):(h.format=b.format,h.startIndex=r,h.endIndex=ad);var Sc=this.text,hd=b.end,Tc=[];null==this.__useIntAdvances&&(this.__useIntAdvances=(new ma("Trident/7.0",
"")).match(M.get_navigator().userAgent));if(this.__useIntAdvances)for(var id=0,rd,Gd=r,Hd=hd;Gd<Hd;){var Pd=Gd++;rd=U.__context.measureText(F.substring(Sc,r,Pd+1)).width;Tc.push(rd-id);id=rd}else for(var Id=r,gc=hd;Id<gc;){var qc=Id++;if(qc<F.get_length(Sc)-1){var Kd=U.__context.measureText(F.charAt(Sc,qc+1)).width;var Gl=U.__context.measureText(F.substr(Sc,qc,2)).width-Kd}else Gl=U.__context.measureText(F.charAt(Sc,qc)).width;Tc.push(Gl)}h.positions=Tc;h.offsetX=t;h.ascent=e;h.descent=m;h.leading=
d;h.lineIndex=x;h.offsetY=u;for(var td=h.positions,ud=0,vd=0;vd<td.length;){var kd=td[vd];++vd;ud+=kd}h.width=ud;h.height=k;t+=g;r=b.end}a<this.textFormatRanges.data.get_length()-1&&(++a,b=this.textFormatRanges.data.get(a),c.__merge(b.format),U.__context.font=U.getFont(c),null!=c.__ascent?(e=c.size*c.__ascent,m=c.size*c.__descent):(e=c.size,m=.185*c.size),d=c.leading,k=e+m+d);k>l&&(l=k);e>f&&(f=e);if(r==b.end){e>f&&(f=e);k>l&&(l=k);for(var rc=0,Gc=this.layoutGroups;rc<Gc.data.get_length();){var Sd=
Gc.data.get(rc);++rc;if(!(Sd.lineIndex<x)){if(Sd.lineIndex>x)break;Sd.ascent=f;Sd.height=l}}u+=l;l=f=0;++x;t=2;++r;break}}},setTextAlignment:function(){for(var a=-1,b=0,c=this.width-4,d,e,f=0,m=this.layoutGroups.data.get_length();f<m;){var h=f++;d=this.layoutGroups.data.get(h);if(d.lineIndex!=a)switch(a=d.lineIndex,d.format.align){case 0:b=this.lineWidths.data.get(a)<c?Math.round((c-this.lineWidths.data.get(a))/2):0;break;case 2:if(this.lineWidths.data.get(a)<c){e=1;b=h+1;for(var q=this.layoutGroups.data.get_length();b<
q;){var g=b++;if(this.layoutGroups.data.get(g).lineIndex==a)0!=g&&32!=F.charCodeAt(this.text,this.layoutGroups.data.get(g).startIndex-1)||++e;else break}if(1<e&&(d=this.layoutGroups.data.get(h+e-1),b=F.charCodeAt(this.text,d.endIndex),d.endIndex<F.get_length(this.text)&&10!=b&&13!=b))for(b=(c-this.lineWidths.data.get(a))/(e-1),q=0;1<q&&32!=F.charCodeAt(this.text,this.layoutGroups.data.get(q).startIndex-1)&&(this.layoutGroups.data.get(h+q).offsetX+=b*(q-1),++q),this.layoutGroups.data.get(h+q).offsetX+=
b*q,++q<e;);}b=0;break;case 4:b=this.lineWidths.data.get(a)<c?Math.round(c-this.lineWidths.data.get(a)):0;break;default:b=0}0<b&&(d.offsetX+=b)}},update:function(){null==this.text||F.equals(this.text,"")||0==this.textFormatRanges.data.get_length()?(this.lineAscents.data.set_length(0),this.lineBreaks.data.set_length(0),this.lineDescents.data.set_length(0),this.lineLeadings.data.set_length(0),this.lineHeights.data.set_length(0),this.lineWidths.data.set_length(0),this.layoutGroups.data.set_length(0),
this.textHeight=this.textWidth=0,this.numLines=1,this.maxScrollH=0,this.bottomScrollV=this.maxScrollV=1):(this.getLayoutGroups(),this.getLineMeasurements(),this.setTextAlignment());this.getBounds()},set_text:function(a){if(null==a)return this.text=a;null!=this.__restrictRegexp&&(a=this.__restrictRegexp.split(a).join(""));0<this.maxChars&&a.length>this.maxChars&&(a=P.substr(a,0,this.maxChars));return this.text=a},__class__:U,__properties__:{set_text:"set_text"}};var Mf=function(a,b,c){this.format=
a;this.start=b;this.end=c};k["openfl._internal.text.TextFormatRange"]=Mf;Mf.__name__=["openfl","_internal","text","TextFormatRange"];Mf.prototype={end:null,format:null,start:null,__class__:Mf};var ne=function(a,b,c){this.format=a;this.startIndex=b;this.endIndex=c};k["openfl._internal.text.TextLayoutGroup"]=ne;ne.__name__=["openfl","_internal","text","TextLayoutGroup"];ne.prototype={ascent:null,descent:null,endIndex:null,format:null,height:null,leading:null,lineIndex:null,offsetX:null,offsetY:null,
positions:null,startIndex:null,width:null,getAdvance:function(a){return this.positions[a]},__class__:ne};var Zk=function(){};k["openfl._internal.timeline.Frame"]=Zk;Zk.__name__=["openfl","_internal","timeline","Frame"];Zk.prototype={label:null,objects:null,script:null,scriptSource:null,__class__:Zk};var $k=function(){};k["openfl._internal.timeline.FrameObject"]=$k;$k.__name__=["openfl","_internal","timeline","FrameObject"];$k.prototype={blendMode:null,cacheAsBitmap:null,clipDepth:null,colorTransform:null,
depth:null,filters:null,id:null,matrix:null,name:null,symbol:null,type:null,visible:null,__class__:$k};var Jd=k["openfl._internal.timeline.FrameObjectType"]={__ename__:["openfl","_internal","timeline","FrameObjectType"],__constructs__:["CREATE","UPDATE","DESTROY"]};Jd.CREATE=["CREATE",0];Jd.CREATE.toString=I;Jd.CREATE.__enum__=Jd;Jd.UPDATE=["UPDATE",1];Jd.UPDATE.toString=I;Jd.UPDATE.__enum__=Jd;Jd.DESTROY=["DESTROY",2];Jd.DESTROY.toString=I;Jd.DESTROY.__enum__=Jd;var Cg=function(){dc.call(this);null==
H.application&&(H.application=this)};k["openfl.display.Application"]=Cg;Cg.__name__=["openfl","display","Application"];Cg.__super__=dc;Cg.prototype=w(dc.prototype,{create:function(a){this.config=a;this.backend.create(a);H.current.__loaderInfo=oe.create(null);H.current.__loaderInfo.content=H.current;if(null!=a){C.hasField(a,"fps")&&this.set_frameRate(a.fps);if(C.hasField(a,"windows"))for(a=a.windows;0<a.length;){a=new Xh(a[0]);this.createWindow(a);break}if(null==this.get_preloader()||this.get_preloader().complete)this.onPreloadComplete()}},
__class__:Cg});var Oj=function(){};k["openfl.display.IShaderDrawable"]=Oj;Oj.__name__=["openfl","display","IShaderDrawable"];var Ia=function(a,b,c){null==c&&(c=!1);xa.call(this);this.set_bitmapData(a);this.pixelSnapping=b;this.smoothing=c;null==b&&(this.pixelSnapping=1)};k["openfl.display.Bitmap"]=Ia;Ia.__name__=["openfl","display","Bitmap"];Ia.__interfaces__=[Oj];Ia.__super__=xa;Ia.prototype=w(xa.prototype,{bitmapData:null,pixelSnapping:null,shader:null,smoothing:null,__image:null,__imageVersion:null,
__enterFrame:function(a){},__getBounds:function(a,b){if(null!=this.bitmapData){var c=X.__pool.get();c.setTo(0,0,this.bitmapData.width,this.bitmapData.height);c.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height);X.__pool.release(c)}},__hitTest:function(a,b,c,d,e,f){if(!f.get_visible()||this.__isMask||null==this.bitmapData||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;this.__getRenderTransform();c=this.__renderTransform.__transformInverseX(a,b);a=this.__renderTransform.__transformInverseY(a,
b);if(0<c&&0<a&&c<=this.bitmapData.width&&a<=this.bitmapData.height){if(null!=this.__scrollRect&&!this.__scrollRect.contains(c,a))return!1;null==d||e||d.push(f);return!0}return!1},__hitTestMask:function(a,b){if(null==this.bitmapData)return!1;this.__getRenderTransform();var c=this.__renderTransform.__transformInverseX(a,b);a=this.__renderTransform.__transformInverseY(a,b);return 0<c&&0<a&&c<=this.bitmapData.width&&a<=this.bitmapData.height?!0:!1},__renderCanvas:function(a){this.__updateCacheBitmap(a,
!this.__worldColorTransform.__isDefault());null==this.__cacheBitmap||this.__cacheBitmapRender?Ig.render(this,a):Ig.render(this.__cacheBitmap,a)},__renderCanvasMask:function(a){a.context.rect(0,0,this.get_width(),this.get_height())},__renderDOM:function(a){this.__updateCacheBitmap(a,!this.__worldColorTransform.__isDefault());null==this.__cacheBitmap||this.__cacheBitmapRender?oc.render(this,a):(this.__renderDOMClear(a),this.__cacheBitmap.stage=this.stage,oc.render(this.__cacheBitmap,a))},__renderDOMClear:function(a){oc.clear(this,
a)},__renderGL:function(a){this.__updateCacheBitmap(a,!1);null==this.__cacheBitmap||this.__cacheBitmapRender?Kg.render(this,a):Kg.render(this.__cacheBitmap,a)},__updateCacheBitmap:function(a,b){null!=this.get_filters()&&xa.prototype.__updateCacheBitmap.call(this,a,b)},__updateMask:function(a){null!=this.bitmapData&&(a.__commands.overrideMatrix(this.__worldTransform),a.beginFill(0),a.drawRect(0,0,this.bitmapData.width,this.bitmapData.height),null==a.__bounds&&(a.__bounds=new X),this.__getBounds(a.__bounds,
sa.__identity),xa.prototype.__updateMask.call(this,a))},set_bitmapData:function(a){this.bitmapData=a;this.smoothing=!1;this.__setRenderDirty();this.__imageVersion=-1;return this.bitmapData},get_height:function(){return null!=this.bitmapData?this.bitmapData.height*Math.abs(this.get_scaleY()):0},set_height:function(a){return null!=this.bitmapData?(a!=this.bitmapData.height&&(this.__setRenderDirty(),this.set_scaleY(a/this.bitmapData.height)),a):0},get_width:function(){return null!=this.bitmapData?this.bitmapData.width*
Math.abs(this.__scaleX):0},set_width:function(a){return null!=this.bitmapData?(a!=this.bitmapData.width&&(this.__setRenderDirty(),this.set_scaleX(a/this.bitmapData.width)),a):0},__class__:Ia,__properties__:w(xa.prototype.__properties__,{set_bitmapData:"set_bitmapData"})});var ba=function(a,b,c,d){null==d&&(d=-1);null==c&&(c=!0);this.transparent=c;null==a&&(a=0);null==b&&(b=0);0>a&&(a=0);0>b&&(b=0);this.width=a;this.height=b;this.rect=new X(0,0,a,b);0<a&&0<b&&(c?0==(d&-16777216)&&(d=0):d=-16777216|
d&16777215,this.image=new ja(null,0,0,a,b,d<<8|d>>>24&255),this.image.set_transparent(c),this.readable=this.__isValid=!0);this.__worldTransform=new sa;this.__worldColorTransform=new ib};k["openfl.display.BitmapData"]=ba;ba.__name__=["openfl","display","BitmapData"];ba.__interfaces__=[Hg];ba.fromBase64=function(a,b){var c=new ba(0,0,!0,0);c.__fromBase64(a,b);return c};ba.fromBytes=function(a,b){var c=new ba(0,0,!0,0);c.__fromBytes(a,b);return c};ba.fromCanvas=function(a,b){null==b&&(b=!0);if(null==
a)return null;var c=new ba(0,0,b,0);c.__fromImage(ja.fromCanvas(a));c.image.set_transparent(b);return c};ba.fromFile=function(a){var b=new ba(0,0,!0,0);b.__fromFile(a);return b};ba.fromImage=function(a,b){null==b&&(b=!0);if(null==a||null==a.buffer)return null;var c=new ba(0,0,b,0);c.__fromImage(a);c.image.set_transparent(b);return c};ba.fromTexture=function(a){if(null==a)return null;var b=new ba(a.__width,a.__height,!0,0);b.readable=!1;b.__texture=a.__textureID;b.__textureContext=a.__textureContext;
b.image=null;return b};ba.loadFromBase64=function(a,b){return ja.loadFromBase64(a,b).then(function(a){return Sa.withValue(ba.fromImage(a))})};ba.loadFromBytes=function(a,b){return ja.loadFromBytes(qd.toBytes(a)).then(function(a){a=ba.fromImage(a);null!=b&&a.__applyAlpha(b);return Sa.withValue(a)})};ba.loadFromFile=function(a){return ja.loadFromFile(a).then(function(a){return Sa.withValue(ba.fromImage(a))})};ba.prototype={height:null,image:null,readable:null,rect:null,transparent:null,width:null,__buffer:null,
__bufferColorTransform:null,__bufferContext:null,__bufferAlpha:null,__bufferData:null,__framebuffer:null,__framebufferContext:null,__isValid:null,__surface:null,__texture:null,__textureContext:null,__textureVersion:null,__transform:null,__worldColorTransform:null,__worldTransform:null,colorTransform:function(a,b){this.readable&&this.image.colorTransform(a.__toLimeRectangle(),b.__toLimeColorMatrix())},copyChannel:function(a,b,c,d,e){if(this.readable){switch(d){case 1:d=nb.RED;break;case 2:d=nb.GREEN;
break;case 4:d=nb.BLUE;break;case 8:d=nb.ALPHA;break;default:return}switch(e){case 1:e=nb.RED;break;case 2:e=nb.GREEN;break;case 4:e=nb.BLUE;break;case 8:e=nb.ALPHA;break;default:return}this.image.copyChannel(a.image,b.__toLimeRectangle(),c.__toLimeVector2(),d,e)}},copyPixels:function(a,b,c,d,e,f){null==f&&(f=!1);this.readable&&null!=a&&(null!=e&&(ba.__tempVector.x=e.x,ba.__tempVector.y=e.y),this.image.copyPixels(a.image,b.__toLimeRectangle(),c.__toLimeVector2(),null!=d?d.image:null,null!=e?ba.__tempVector:
null,f))},dispose:function(){this.image=null;this.height=this.width=0;this.rect=null;this.readable=this.__isValid=!1;this.__textureContext=this.__texture=this.__framebufferContext=this.__framebuffer=this.__buffer=this.__surface=null},draw:function(a,b,c,d,e,f){null==f&&(f=!1);null==b&&(b=new sa,null!=a.__transform&&(b.copyFrom(a.__transform),b.tx=0,b.ty=0));if(this.readable){if(null!=c){var m=X.__pool.get(),h=sa.__pool.get();a.__getBounds(m,h);var q=new ba(Math.ceil(m.width),Math.ceil(m.height),!0,
0);q.draw(a);q.colorTransform(q.rect,c);a=q;X.__pool.release(m);sa.__pool.release(h)}ha.convertToCanvas(this.image);c=this.image.buffer;m=new vf;m.clearRenderDirty=!1;m.context=c.__srcContext;m.allowSmoothing=f;m.maskManager=new df(m);m.blendModeManager=new $f(m);m.blendModeManager.setBlendMode(d);f||(c.__srcContext.mozImageSmoothingEnabled=!1,c.__srcContext.msImageSmoothingEnabled=!1,c.__srcContext.imageSmoothingEnabled=!1);null!=e&&m.maskManager.pushRect(e,new sa);d=a.__worldTransform;a.__updateTransforms(b);
a.__updateChildren(!1);a.__renderCanvas(m);a.__updateTransforms(d);a.__updateChildren(!0);f||(c.__srcContext.mozImageSmoothingEnabled=!0,c.__srcContext.msImageSmoothingEnabled=!0,c.__srcContext.imageSmoothingEnabled=!0);null!=e&&m.maskManager.popRect();c.__srcContext.setTransform(1,0,0,1,0,0);c.__srcImageData=null;c.data=null;this.image.dirty=!0;this.image.version++}else null!=ra.context&&(e=ra.context,e.bindFramebuffer(e.FRAMEBUFFER,this.__getFramebuffer(e)),e.viewport(0,0,this.width,this.height),
f=new He(H.current.stage,e,this),d=f.renderSession,d.clearRenderDirty=!1,d.shaderManager=n.__cast(H.current.stage.__renderer,He).renderSession.shaderManager,d=a.__worldTransform,a.__updateTransforms(b),a.__updateChildren(!1),a.__renderGL(f.renderSession),a.__updateTransforms(d),a.__updateChildren(!0),e.bindFramebuffer(e.FRAMEBUFFER,null))},fillRect:function(a,b){if(null!=a)if(this.transparent&&0==(b&-16777216)&&(b=0),this.readable)this.image.fillRect(a.__toLimeRectangle(),b,1);else if(null!=this.__framebuffer){var c=
ra.context,d=!this.rect.equals(a);c.bindFramebuffer(c.FRAMEBUFFER,this.__framebuffer);d&&(c.enable(c.SCISSOR_TEST),c.scissor(Math.round(a.x),Math.round(a.y),Math.round(a.width),Math.round(a.height)));c.clearColor((b>>>16&255)/255,(b>>>8&255)/255,(b&255)/255,(b>>>24&255)/255);c.clear(c.COLOR_BUFFER_BIT);d&&c.disable(c.SCISSOR_TEST);c.bindFramebuffer(c.FRAMEBUFFER,null)}},getBuffer:function(a,b,c){if(null==this.__buffer||this.__bufferContext!=a){this.__bufferData=new Zc(104);this.__bufferData[0]=this.width;
this.__bufferData[1]=this.height;this.__bufferData[3]=1;this.__bufferData[4]=1;this.__bufferData[27]=this.height;this.__bufferData[30]=1;this.__bufferData[52]=this.width;this.__bufferData[55]=1;for(var d=0;4>d;){var e=d++;this.__bufferData[26*e+5]=b;null!=c?(this.__bufferData[26*e+6]=c.redMultiplier,this.__bufferData[26*e+11]=c.greenMultiplier,this.__bufferData[26*e+16]=c.blueMultiplier,this.__bufferData[26*e+21]=c.alphaMultiplier,this.__bufferData[26*e+22]=c.redOffset/255,this.__bufferData[26*e+
23]=c.greenOffset/255,this.__bufferData[26*e+24]=c.blueOffset/255,this.__bufferData[26*e+25]=c.alphaOffset/255):(this.__bufferData[26*e+6]=1,this.__bufferData[26*e+11]=1,this.__bufferData[26*e+16]=1,this.__bufferData[26*e+21]=1)}this.__bufferAlpha=b;this.__bufferColorTransform=null!=c?c.__clone():null;this.__bufferContext=a;this.__buffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.__buffer);ah.bufferData(a,a.ARRAY_BUFFER,this.__bufferData,a.STATIC_DRAW)}else{if(this.__bufferAlpha!=b){for(d=
0;4>d;)e=d++,this.__bufferData[26*e+5]=b;this.__bufferAlpha=b}if(null==this.__bufferColorTransform&&null!=c||null!=this.__bufferColorTransform&&!this.__bufferColorTransform.__equals(c))if(null!=c)for(null==this.__bufferColorTransform?this.__bufferColorTransform=c.__clone():this.__bufferColorTransform.__copyFrom(c),b=0;4>b;)d=b++,this.__bufferData[26*d+6]=c.redMultiplier,this.__bufferData[26*d+11]=c.greenMultiplier,this.__bufferData[26*d+16]=c.blueMultiplier,this.__bufferData[26*d+21]=c.alphaMultiplier,
this.__bufferData[26*d+22]=c.redOffset/255,this.__bufferData[26*d+23]=c.greenOffset/255,this.__bufferData[26*d+24]=c.blueOffset/255,this.__bufferData[26*d+25]=c.alphaOffset/255;else for(c=0;4>c;)b=c++,this.__bufferData[26*b+6]=1,this.__bufferData[26*b+11]=1,this.__bufferData[26*b+16]=1,this.__bufferData[26*b+21]=1,this.__bufferData[26*b+22]=0,this.__bufferData[26*b+23]=0,this.__bufferData[26*b+24]=0,this.__bufferData[26*b+25]=0;a.bindBuffer(a.ARRAY_BUFFER,this.__buffer);a.bufferData(a.ARRAY_BUFFER,
this.__bufferData.byteLength,Z.fromArrayBufferView(this.__bufferData),a.STATIC_DRAW)}return this.__buffer},getTexture:function(a){if(!this.__isValid)return null;if(null==this.__texture||this.__textureContext!=a)this.__textureContext=a,this.__texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.__texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MIN_FILTER,a.NEAREST),this.__textureVersion=-1;ha.sync(this.image,!1);if(null!=this.image&&this.image.version!=this.__textureVersion){var b;null!=this.__surface&&xk.flush(this.__surface);if(1==this.image.buffer.bitsPerPixel)var c=b=a.ALPHA;else null==ba.__supportsBGRA&&(ba.__textureInternalFormat=a.RGBA,ba.__supportsBGRA=!1,ba.__textureFormat=a.RGBA),b=ba.__textureInternalFormat,c=ba.__textureFormat;a.bindTexture(a.TEXTURE_2D,this.__texture);var d=this.image;d.type==Ya.DATA||d.get_premultiplied()?
!d.get_premultiplied()&&d.get_transparent()&&a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1):a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);ba.__supportsBGRA||0==d.get_format()||(d=d.clone(),d.set_format(0));d.type==Ya.DATA?a.texImage2D(a.TEXTURE_2D,0,b,d.buffer.width,d.buffer.height,0,c,a.UNSIGNED_BYTE,Z.fromArrayBufferView(d.get_data())):ah.texImage2D(a,a.TEXTURE_2D,0,b,c,a.UNSIGNED_BYTE,d.get_src());a.bindTexture(a.TEXTURE_2D,null);this.__textureVersion=this.image.version}this.readable||null==
this.image||(this.image=this.__surface=null);return this.__texture},__applyAlpha:function(a){ha.convertToCanvas(this.image);ha.createImageData(this.image);for(var b=this.image.buffer.data,c=0,d=qd.get_length(a);c<d;){var e=c++;b[4*e+3]=a.readUnsignedByte()}this.image.version++},__draw:function(a,b,c,d,e,f){null==f&&(f=!1);null==b&&(b=new sa,null!=a.__transform&&(b.copyFrom(a.__transform),b.tx=0,b.ty=0));if(this.readable){if(null!=c){d=X.__pool.get();var m=sa.__pool.get();a.__getBounds(d,m);var h=
new ba(Math.ceil(d.width),Math.ceil(d.height),!0,0);h.draw(a);h.colorTransform(h.rect,c);a=h;X.__pool.release(d);sa.__pool.release(m)}ha.convertToCanvas(this.image);c=this.image.buffer;d=new vf;d.clearRenderDirty=!0;d.context=c.__srcContext;d.allowSmoothing=f;d.maskManager=new df(d);d.blendModeManager=new $f(d);f||(c.__srcContext.mozImageSmoothingEnabled=!1,c.__srcContext.msImageSmoothingEnabled=!1,c.__srcContext.imageSmoothingEnabled=!1);null!=e&&d.maskManager.pushRect(e,new sa);m=a.__worldTransform;
a.__updateTransforms(b);a.__updateChildren(!1);a.__renderCanvas(d);a.__updateTransforms(m);a.__updateChildren(!0);f||(c.__srcContext.mozImageSmoothingEnabled=!0,c.__srcContext.msImageSmoothingEnabled=!0,c.__srcContext.imageSmoothingEnabled=!0);null!=e&&d.maskManager.popRect();c.__srcContext.setTransform(1,0,0,1,0,0);c.__srcImageData=null;c.data=null;this.image.dirty=!0;this.image.version++}else null!=ra.context&&(e=ra.context,e.bindFramebuffer(e.FRAMEBUFFER,this.__getFramebuffer(e)),e.viewport(0,
0,this.width,this.height),f=new He(H.current.stage,e,this),c=f.renderSession,c.clearRenderDirty=!0,c.shaderManager=n.__cast(H.current.stage.__renderer,He).renderSession.shaderManager,c=a.__worldTransform,a.__updateTransforms(b),a.__updateChildren(!1),a.__renderGL(f.renderSession),a.__updateTransforms(c),a.__updateChildren(!0),e.bindFramebuffer(e.FRAMEBUFFER,null))},__fromBase64:function(a,b){a=ja.fromBase64(a,b);this.__fromImage(a)},__fromBytes:function(a,b){a=ja.fromBytes(qd.toBytes(a));this.__fromImage(a);
null!=b&&this.__applyAlpha(b)},__fromFile:function(a){a=ja.fromFile(a);this.__fromImage(a)},__fromImage:function(a){null!=a&&null!=a.buffer&&(this.image=a,this.width=a.width,this.height=a.height,this.rect=new X(0,0,a.width,a.height),this.__isValid=this.readable=!0)},__getBounds:function(a,b){var c=X.__pool.get();this.rect.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height);X.__pool.release(c)},__getFramebuffer:function(a){if(null==this.__framebuffer||this.__framebufferContext!=a)this.getTexture(a),
this.__framebufferContext=a,this.__framebuffer=a.createFramebuffer(),a.bindFramebuffer(a.FRAMEBUFFER,this.__framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,this.__texture,0);return this.__framebuffer},__renderCanvas:function(a){if(this.readable){this.image.type==Ya.DATA&&ha.convertToCanvas(this.image);var b=a.context;null==this.__worldTransform&&(this.__worldTransform=new sa);b.globalAlpha=1;var c=this.__worldTransform;a.roundPixels?b.setTransform(c.a,c.b,c.c,c.d,
u["int"](c.tx),u["int"](c.ty)):b.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty);b.drawImage(this.image.get_src(),0,0)}},__renderGL:function(a){var b=a.renderer,c=a.gl;a.blendModeManager.setBlendMode(10);var d=a.shaderManager.defaultShader;d.get_data().uImage0.input=this;var e=a.allowSmoothing&&a.upscaled;d.get_data().uImage0.smoothing=e;d.get_data().uMatrix.value=b.getMatrix(this.__worldTransform);a.shaderManager.setShader(d);c.bindBuffer(c.ARRAY_BUFFER,this.getBuffer(c,1,this.__worldColorTransform));c.vertexAttribPointer(d.get_data().aPosition.index,
3,c.FLOAT,!1,24,Z.fromInt(0));c.vertexAttribPointer(d.get_data().aTexCoord.index,2,c.FLOAT,!1,24,Z.fromInt(12));c.vertexAttribPointer(d.get_data().aAlpha.index,1,c.FLOAT,!1,24,Z.fromInt(20));c.drawArrays(c.TRIANGLE_STRIP,0,4)},__updateChildren:function(a){},__updateTransforms:function(a){null==a?this.__worldTransform.identity():this.__worldTransform=a},__class__:ba};var Qk={};k["openfl.display._CapsStyle.CapsStyle_Impl_"]=Qk;Qk.__name__=["openfl","display","_CapsStyle","CapsStyle_Impl_"];Qk.toString=
function(a){switch(a){case 0:return"none";case 1:return"round";case 2:return"square";default:return null}};var Fh=function(a,b){ca.call(this);this.__name=a;this.__frame=b};k["openfl.display.FrameLabel"]=Fh;Fh.__name__=["openfl","display","FrameLabel"];Fh.__super__=ca;Fh.prototype=w(ca.prototype,{__frame:null,__name:null,get_frame:function(){return this.__frame},get_name:function(){return this.__name},__class__:Fh,__properties__:{get_name:"get_name",get_frame:"get_frame"}});var Sf=function(a){this.__dirty=
!0;this.__owner=a;this.__commands=new cc;this.__positionY=this.__positionX=this.__strokePadding=0;this.__renderTransform=new sa;this.__worldTransform=new sa;this.__height=this.__width=0;this.moveTo(0,0)};k["openfl.display.Graphics"]=Sf;Sf.__name__=["openfl","display","Graphics"];Sf.prototype={__bounds:null,__commands:null,__dirty:null,__height:null,__positionX:null,__positionY:null,__renderTransform:null,__strokePadding:null,__transformDirty:null,__visible:null,__owner:null,__width:null,__worldTransform:null,
__canvas:null,__context:null,__bitmap:null,beginBitmapFill:function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!0);this.__commands.beginBitmapFill(a,null!=b?b.clone():null,c,d);this.__visible=!0},beginFill:function(a,b){null==b&&(b=1);null==a&&(a=0);this.__commands.beginFill(a&16777215,b);0<b&&(this.__visible=!0)},beginGradientFill:function(a,b,c,d,e,f,m,h){null==h&&(h=0);null==m&&(m=1);null==f&&(f=0);this.__commands.beginGradientFill(a,b,c,d,e,f,m,h);for(a=0;a<c.length;)if(b=c[a],++a,0<b){this.__visible=
!0;break}},copyFrom:function(a){this.__bounds=null!=a.__bounds?a.__bounds.clone():null;this.__commands=a.__commands.copy();this.set___dirty(!0);this.__strokePadding=a.__strokePadding;this.__positionX=a.__positionX;this.__positionY=a.__positionY;this.__transformDirty=!0;this.__visible=a.__visible},curveTo:function(a,b,c,d){this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding);this.__inflateBounds(this.__positionX+this.__strokePadding,this.__positionY+this.__strokePadding);
var e=a<c&&a>this.__positionX||a>c&&a<this.__positionX?c:this.__calculateBezierQuadPoint((this.__positionX-a)/(this.__positionX-2*a+c),this.__positionX,a,c);var f=b<d&&b>this.__positionY||b>d&&b<this.__positionY?d:this.__calculateBezierQuadPoint((this.__positionY-b)/(this.__positionY-2*b+d),this.__positionY,b,d);this.__inflateBounds(e-this.__strokePadding,f-this.__strokePadding);this.__inflateBounds(e+this.__strokePadding,f+this.__strokePadding);this.__positionX=c;this.__positionY=d;this.__commands.curveTo(a,
b,c,d);this.set___dirty(!0)},drawRect:function(a,b,c,d){0>=c||0>=d||(this.__inflateBounds(a-this.__strokePadding,b-this.__strokePadding),this.__inflateBounds(a+c+this.__strokePadding,b+d+this.__strokePadding),this.__commands.drawRect(a,b,c,d),this.set___dirty(!0))},endFill:function(){this.__commands.endFill()},lineStyle:function(a,b,c,d,e,f,m,h){null==h&&(h=3);null==e&&(e=2);null==d&&(d=!1);null==c&&(c=1);null==b&&(b=0);null!=a&&(1==m?a>this.__strokePadding&&(this.__strokePadding=a):a/2>this.__strokePadding&&
(this.__strokePadding=a/2));this.__commands.lineStyle(a,b,c,d,e,f,m,h);null!=a&&(this.__visible=!0)},lineTo:function(a,b){isFinite(a)&&isFinite(b)&&(this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding),this.__inflateBounds(this.__positionX+this.__strokePadding,this.__positionY+this.__strokePadding),this.__positionX=a,this.__positionY=b,this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding),this.__inflateBounds(this.__positionX+
2*this.__strokePadding,this.__positionY+this.__strokePadding),this.__commands.lineTo(a,b),this.set___dirty(!0))},moveTo:function(a,b){this.__positionX=a;this.__positionY=b;this.__commands.moveTo(a,b)},__calculateBezierQuadPoint:function(a,b,c,d){var e=1-a;return e*e*b+2*e*a*c+a*a*d},__cleanup:function(){null!=this.__bounds&&(this.set___dirty(!0),this.__transformDirty=!0);this.__context=this.__canvas=this.__bitmap=null},__getBounds:function(a,b){if(null!=this.__bounds){var c=X.__pool.get();this.__bounds.__transform(c,
b);a.__expand(c.x,c.y,c.width,c.height);X.__pool.release(c)}},__hitTest:function(a,b,c,d){if(null==this.__bounds)return!1;var e=d.__transformInverseX(a,b);a=d.__transformInverseY(a,b);return e>this.__bounds.x&&a>this.__bounds.y&&this.__bounds.contains(e,a)?c?p.hitTest(this,e,a):!0:!1},__inflateBounds:function(a,b){null==this.__bounds?(this.__bounds=new X(a,b,0,0),this.__transformDirty=!0):(a<this.__bounds.x&&(this.__bounds.width+=this.__bounds.x-a,this.__bounds.x=a,this.__transformDirty=!0),b<this.__bounds.y&&
(this.__bounds.height+=this.__bounds.y-b,this.__bounds.y=b,this.__transformDirty=!0),a>this.__bounds.x+this.__bounds.width&&(this.__bounds.width=a-this.__bounds.x),b>this.__bounds.y+this.__bounds.height&&(this.__bounds.height=b-this.__bounds.y))},__update:function(){if(!(null==this.__bounds||0>=this.__bounds.width||0>=this.__bounds.height)){var a=this.__owner.__renderTransform;if(null!=a){var b=0==a.b?Math.abs(a.a):Math.sqrt(a.a*a.a+a.b*a.b);var c=0==a.c?Math.abs(a.d):Math.sqrt(a.c*a.c+a.d*a.d);b*=
this.__bounds.width;c*=this.__bounds.height;if(1>b||1>c)(1<=this.__width||1<=this.__height)&&this.set___dirty(!0),this.__height=this.__width=0;else{this.__renderTransform.a=b/this.__bounds.width;this.__renderTransform.d=c/this.__bounds.height;var d=1/this.__renderTransform.a,e=1/this.__renderTransform.d;this.__worldTransform.a=d*a.a;this.__worldTransform.b=d*a.b;this.__worldTransform.c=e*a.c;this.__worldTransform.d=e*a.d;e=this.__bounds.x;var f=this.__bounds.y;d=e*a.a+f*a.c+a.tx;a=e*a.b+f*a.d+a.ty;
this.__worldTransform.tx=Math.floor(d);this.__worldTransform.ty=Math.floor(a);this.__renderTransform.tx=this.__worldTransform.__transformInverseX(d,a);this.__renderTransform.ty=this.__worldTransform.__transformInverseY(d,a);a=Math.ceil(b+this.__renderTransform.tx);b=Math.ceil(c+this.__renderTransform.ty);a==this.__width&&b==this.__height||this.set___dirty(!0);this.__width=a;this.__height=b}}}},set___dirty:function(a){a&&null!=this.__owner&&this.__owner.__setRenderDirty();return this.__dirty=a},__class__:Sf,
__properties__:{set___dirty:"set___dirty"}};var Pk={};k["openfl.display._JointStyle.JointStyle_Impl_"]=Pk;Pk.__name__=["openfl","display","_JointStyle","JointStyle_Impl_"];Pk.toString=function(a){switch(a){case 0:return"bevel";case 1:return"miter";case 2:return"round";default:return null}};var Pj=function(){Fb.call(this);this.contentLoaderInfo=oe.create(this);this.uncaughtErrorEvents=this.contentLoaderInfo.uncaughtErrorEvents};k["openfl.display.Loader"]=Pj;Pj.__name__=["openfl","display","Loader"];
Pj.__super__=Fb;Pj.prototype=w(Fb.prototype,{contentLoaderInfo:null,uncaughtErrorEvents:null,__class__:Pj});var oe=function(){ca.call(this);this.applicationDomain=xf.currentDomain;this.bytesTotal=this.bytesLoaded=0;this.childAllowsParent=!0;this.parameters={}};k["openfl.display.LoaderInfo"]=oe;oe.__name__=["openfl","display","LoaderInfo"];oe.create=function(a){var b=new oe;b.uncaughtErrorEvents=new Yh;null!=a?b.loader=a:b.url=oe.__rootURL;return b};oe.__super__=ca;oe.prototype=w(ca.prototype,{applicationDomain:null,
bytesLoaded:null,bytesTotal:null,childAllowsParent:null,content:null,loader:null,parameters:null,uncaughtErrorEvents:null,url:null,__completed:null,__complete:function(){this.__completed||(this.bytesLoaded<this.bytesTotal&&(this.bytesLoaded=this.bytesTotal),this.__update(this.bytesLoaded,this.bytesTotal),this.__completed=!0,this.dispatchEvent(new R("complete")))},__update:function(a,b){this.bytesLoaded=a;this.bytesTotal=b;this.dispatchEvent(new yf("progress",!1,!1,a,b))},__class__:oe});var Dj=function(a,
b,c,d,e,f){this.initFrame=a;this.initFrameObjectID=b;this.characterID=c;this.depth=d;this.displayObject=e;this.clipDepth=f};k["openfl.display._MovieClip.FrameSymbolInstance"]=Dj;Dj.__name__=["openfl","display","_MovieClip","FrameSymbolInstance"];Dj.prototype={characterID:null,clipDepth:null,depth:null,displayObject:null,initFrame:null,initFrameObjectID:null,__class__:Dj};var Dg=function(a){xe.call(this);this.display=a;null!=a&&(a.addEventListener("unload",l(this,this.display_onUnload)),H.current.addChild(a))};
k["openfl.display.Preloader"]=Dg;Dg.__name__=["openfl","display","Preloader"];Dg.__super__=xe;Dg.prototype=w(xe.prototype,{display:null,ready:null,start:function(){if(!this.simulateProgress)if(this.ready=!0,H.current.get_loaderInfo().__complete(),null!=this.display){var a=new R("complete",!0,!0);this.display.dispatchEvent(a);a.isDefaultPrevented()||this.display.dispatchEvent(new R("unload"))}else xe.prototype.start.call(this)},update:function(a,b){H.current.get_loaderInfo().__update(a,b);null!=this.display&&
this.display.dispatchEvent(new yf("progress",!0,!0,a,b))},display_onUnload:function(a){null!=this.display&&(this.display.removeEventListener("unload",l(this,this.display_onUnload)),this.display.parent==H.current&&H.current.removeChild(this.display),H.current.stage.set_focus(null),this.display=null);this.ready&&!this.simulateProgress&&xe.prototype.start.call(this)},__class__:Dg});var Eg=function(){ia.call(this);var a=new dg("_sans",80,13421772);this.Score2=new Lb;this.Score2.set_text("0");this.Score2.set_width(200);
this.Score2.set_height(200);this.Score2.set_textColor(13421772);this.Score2.set_x(H.current.stage.stageWidth/2-80);this.Score2.set_y(H.current.stage.stageHeight/2-100);this.Score2.mouseEnabled=!1;this.Score2.set_defaultTextFormat(a);this.addChild(this.Score2);var b=this.getBackgroundColor();a=0;70>.299*(b>>16&255)+.587*(b>>8&255)+.114*(b&255)&&(a=16777215);b=this.getHeight()/2-3.5;var c=this.getWidth()-60;this.outline=new ia;this.outline.get_graphics().beginFill(a,.07);this.outline.get_graphics().drawRect(0,
0,c,7);this.outline.set_x(30);this.outline.set_y(b);this.outline.set_alpha(0);this.addChild(this.outline);this.progress=new ia;this.progress.get_graphics().beginFill(a,.35);this.progress.get_graphics().drawRect(0,0,c-4,3);this.progress.set_x(32);this.progress.set_y(b+2);this.progress.set_scaleX(0);this.progress.set_alpha(0);this.addChild(this.progress);this.startAnimation=H.getTimer()+100;this.endAnimation=this.startAnimation+1E3;this.addEventListener("addedToStage",l(this,this.this_onAddedToStage));
ka.trace("start load",{fileName:"Preloader.hx",lineNumber:197,className:"openfl.display.DefaultPreloader",methodName:"new"});PokiSDK.gameLoadingStart();window.game.load_start()};k["openfl.display.DefaultPreloader"]=Eg;Eg.__name__=["openfl","display","DefaultPreloader"];Eg.__super__=ia;Eg.prototype=w(ia.prototype,{endAnimation:null,outline:null,progress:null,Score2:null,startAnimation:null,getBackgroundColor:function(){return H.current.stage.window.config.background},getHeight:function(){var a=H.current.stage.window.config.height;
return 0<a?a:H.current.stage.stageHeight},getWidth:function(){var a=H.current.stage.window.config.width;return 0<a?a:H.current.stage.stageWidth},onInit:function(){this.addEventListener("enterFrame",l(this,this.this_onEnterFrame))},onLoaded:function(){PokiSDK.gameLoadingFinished();ka.trace("finish load",{fileName:"Preloader.hx",lineNumber:255,className:"openfl.display.DefaultPreloader",methodName:"onLoaded"});this.removeEventListener("enterFrame",l(this,this.this_onEnterFrame));window.game.load_end();
this.dispatchEvent(new R("unload"))},onUpdate:function(a,b){var c=0;0<b&&(c=a/b,1<c&&(c=1));this.progress.set_scaleX(c);this.Score2.set_text(u["int"](100*c)+" %");window.game.load_progress(c)},this_onAddedToStage:function(a){this.removeEventListener("addedToStage",l(this,this.this_onAddedToStage));this.onInit();this.onUpdate(this.get_loaderInfo().bytesLoaded,this.get_loaderInfo().bytesTotal);this.addEventListener("progress",l(this,this.this_onProgress));this.addEventListener("complete",l(this,this.this_onComplete))},
this_onComplete:function(a){a.preventDefault();this.removeEventListener("progress",l(this,this.this_onProgress));this.removeEventListener("complete",l(this,this.this_onComplete));this.onLoaded()},this_onEnterFrame:function(a){a=(H.getTimer()-this.startAnimation)/(this.endAnimation-this.startAnimation);0>a&&(a=0);1<a&&(a=1);this.outline.set_alpha(a);this.progress.set_alpha(a)},this_onProgress:function(a){this.onUpdate(u["int"](a.bytesLoaded),u["int"](a.bytesTotal))},__class__:Eg});var Ej=function(a){this.__data=
new Zh(null);null==this.__glFragmentSource&&(this.__glFragmentSource="varying float vAlpha;\n\t\tvarying mat4 vColorMultipliers;\n\t\tvarying vec4 vColorOffsets;\n\t\tvarying vec2 vTexCoord;\n\t\t\n\t\tuniform bool uColorTransform;\n\t\tuniform sampler2D uImage0;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tvec4 color = texture2D (uImage0, vTexCoord);\n\t\t\t\n\t\t\tif (color.a == 0.0) {\n\t\t\t\t\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t\t\n\t\t\t} else if (uColorTransform) {\n\t\t\t\t\n\t\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\t\t\t\tcolor = vColorOffsets + (color * vColorMultipliers);\n\t\t\t\t\n\t\t\t\tif (color.a > 0.0) {\n\t\t\t\t\t\n\t\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * vAlpha, color.a * vAlpha);\n\t\t\t\t\t\n\t\t\t\t} else {\n\t\t\t\t\t\n\t\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tgl_FragColor = color * vAlpha;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}");
null==this.__glVertexSource&&(this.__glVertexSource="attribute float aAlpha;\n\t\tattribute mat4 aColorMultipliers;\n\t\tattribute vec4 aColorOffsets;\n\t\tattribute vec4 aPosition;\n\t\tattribute vec2 aTexCoord;\n\t\tvarying float vAlpha;\n\t\tvarying mat4 vColorMultipliers;\n\t\tvarying vec4 vColorOffsets;\n\t\tvarying vec2 vTexCoord;\n\t\t\n\t\tuniform mat4 uMatrix;\n\t\tuniform bool uColorTransform;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tvAlpha = aAlpha;\n\t\t\tvTexCoord = aTexCoord;\n\t\t\t\n\t\t\tif (uColorTransform) {\n\t\t\t\t\n\t\t\t\tvColorMultipliers = aColorMultipliers;\n\t\t\t\tvColorOffsets = aColorOffsets;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tgl_Position = uMatrix * aPosition;\n\t\t\t\n\t\t}");
this.byteCode=a;this.precisionHint=1;this.__glSourceDirty=!0;this.__numPasses=1};k["openfl.display.Shader"]=Ej;Ej.__name__=["openfl","display","Shader"];Ej.prototype={byteCode:null,glProgram:null,precisionHint:null,gl:null,__data:null,__glFragmentSource:null,__glSourceDirty:null,__glVertexSource:null,__isUniform:null,__inputBitmapData:null,__numPasses:null,__paramBool:null,__paramFloat:null,__paramInt:null,__uniformMatrix2:null,__uniformMatrix3:null,__uniformMatrix4:null,__disable:function(){null!=
this.glProgram&&this.__disableGL()},__disableGL:function(){null!=this.get_data().uImage0&&(this.get_data().uImage0.input=null);for(var a=0,b=this.__paramBool;a<b.length;){var c=b[a];++a;this.gl.disableVertexAttribArray(c.index)}a=0;for(b=this.__paramFloat;a<b.length;)c=b[a],++a,this.gl.disableVertexAttribArray(c.index);a=0;for(b=this.__paramInt;a<b.length;)c=b[a],++a,this.gl.disableVertexAttribArray(c.index);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null);this.gl.bindTexture(this.gl.TEXTURE_2D,null);
this.gl.type==Pc.OPENGL&&this.gl.disable(this.gl.TEXTURE_2D)},__enable:function(){this.__init();null!=this.glProgram&&this.__enableGL()},__enableGL:function(){for(var a=0,b=0,c=this.__inputBitmapData;b<c.length;){var d=c[b];++b;this.gl.uniform1i(d.index,a);++a}this.gl.type==Pc.OPENGL&&0<a&&this.gl.enable(this.gl.TEXTURE_2D)},__init:function(){null==this.__data&&(this.__data=new Zh(null));null==this.__glFragmentSource||null==this.__glVertexSource||null!=this.glProgram&&!this.__glSourceDirty||this.__initGL()},
__initGL:function(){if(this.__glSourceDirty||null==this.__isUniform)this.__glSourceDirty=!1,this.glProgram=null,this.__isUniform=new ea,this.__inputBitmapData=[],this.__paramBool=[],this.__paramFloat=[],this.__paramInt=[],this.__uniformMatrix2=new Zc(4),this.__uniformMatrix3=new Zc(9),this.__uniformMatrix4=new Zc(16),this.__processGLData(this.get_glVertexSource(),"attribute"),this.__processGLData(this.get_glVertexSource(),"uniform"),this.__processGLData(this.get_glFragmentSource(),"uniform");if(null!=
this.gl&&null==this.glProgram){var a="#ifdef GL_ES\n\t\t\t\tprecision "+(1==this.precisionHint?"mediump":"lowp")+" float;\n\t\t\t\t#endif\n\t\t\t\t"+this.get_glFragmentSource();this.glProgram=og.createProgram(this.get_glVertexSource(),a);if(null!=this.glProgram){a=0;for(var b=this.__inputBitmapData;a<b.length;){var c=b[a];++a;this.__isUniform.get(c.name)?c.index=this.gl.getUniformLocation(this.glProgram,c.name):c.index=this.gl.getAttribLocation(this.glProgram,c.name)}a=0;for(b=this.__paramBool;a<
b.length;)c=b[a],++a,this.__isUniform.get(c.name)?c.index=this.gl.getUniformLocation(this.glProgram,c.name):c.index=this.gl.getAttribLocation(this.glProgram,c.name);a=0;for(b=this.__paramFloat;a<b.length;)c=b[a],++a,this.__isUniform.get(c.name)?c.index=this.gl.getUniformLocation(this.glProgram,c.name):c.index=this.gl.getAttribLocation(this.glProgram,c.name);a=0;for(b=this.__paramInt;a<b.length;)c=b[a],++a,this.__isUniform.get(c.name)?c.index=this.gl.getUniformLocation(this.glProgram,c.name):c.index=
this.gl.getAttribLocation(this.glProgram,c.name)}}},__processGLData:function(a,b){var c=0,d;for(d="uniform"==b?new ma("uniform ([A-Za-z0-9]+) ([A-Za-z0-9]+)",""):new ma("attribute ([A-Za-z0-9]+) ([A-Za-z0-9]+)","");d.matchSub(a,c);){var e=d.matched(1);c=d.matched(2);if(L.startsWith(e,"sampler"))e=new Qj,e.name=c,this.__inputBitmapData.push(e),C.setField(this.get_data(),c,e);else{switch(e){case "bool":e=0;break;case "bvec2":e=1;break;case "bvec3":e=2;break;case "bvec4":e=3;break;case "dvec2":case "vec2":e=
5;break;case "dvec3":case "vec3":e=6;break;case "double":case "float":e=4;break;case "ivec3":case "uvec3":e=10;break;case "ivec4":case "uvec4":e=11;break;case "mat2":case "mat2x2":e=12;break;case "mat2x3":e=13;break;case "mat2x4":e=14;break;case "mat3x2":e=15;break;case "mat3":case "mat3x3":e=16;break;case "mat3x4":e=17;break;case "mat4":case "mat4x4":e=20;break;case "mat4x2":e=18;break;case "mat4x3":e=19;break;case "int":case "uint":e=8;break;case "ivec2":case "uvec2":e=9;break;case "dvec4":case "vec4":e=
7;break;default:e=null}switch(e){case 0:case 1:case 2:case 3:var f=new sg;f.name=c;f.type=e;this.__paramBool.push(f);C.setField(this.get_data(),c,f);break;case 8:case 9:case 10:case 11:f=new sg;f.name=c;f.type=e;this.__paramInt.push(f);C.setField(this.get_data(),c,f);break;default:f=new sg,f.name=c,f.type=e,this.__paramFloat.push(f),C.setField(this.get_data(),c,f)}}this.__isUniform.set(c,"uniform"==b);c=d.matchedPos();c=c.pos+c.len}},__update:function(){null!=this.glProgram&&this.__updateGL()},__updateGL:function(){for(var a=
0,b=0,c=this.__inputBitmapData;b<c.length;){var d=c[b];++b;null!=d.input&&(this.gl.activeTexture(this.gl.TEXTURE0+a),this.gl.bindTexture(this.gl.TEXTURE_2D,d.input.getTexture(this.gl)),d.smoothing?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)):(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,
this.gl.NEAREST)));++a}c=0;for(d=this.__paramBool;c<d.length;){var e=d[c];++c;a=e.value;b=e.index;if(null!=a)switch(e.type){case 0:this.gl.uniform1i(b,a[0]?1:0);break;case 1:this.gl.uniform2i(b,a[0]?1:0,a[1]?1:0);break;case 2:this.gl.uniform3i(b,a[0]?1:0,a[1]?1:0,a[2]?1:0);break;case 3:this.gl.uniform4i(b,a[0]?1:0,a[1]?1:0,a[2]?1:0,a[3]?1:0)}else this.__isUniform.get(e.name)||this.gl.enableVertexAttribArray(e.index)}c=0;for(d=this.__paramFloat;c<d.length;)if(e=d[c],++c,a=e.value,b=e.index,null!=a)switch(e.type){case 4:this.gl.uniform1f(b,
a[0]);break;case 5:this.gl.uniform2f(b,a[0],a[1]);break;case 6:this.gl.uniform3f(b,a[0],a[1],a[2]);break;case 7:this.gl.uniform4f(b,a[0],a[1],a[2],a[3]);break;case 12:for(e=0;4>e;){var f=e++;this.__uniformMatrix2[f]=a[f]}this.gl.uniformMatrix2fv(b,1,!1,Z.fromArrayBufferView(this.__uniformMatrix2));break;case 16:for(e=0;9>e;)f=e++,this.__uniformMatrix3[f]=a[f];this.gl.uniformMatrix3fv(b,1,!1,Z.fromArrayBufferView(this.__uniformMatrix3));break;case 20:for(e=0;16>e;)f=e++,this.__uniformMatrix4[f]=a[f];
this.gl.uniformMatrix4fv(b,1,!1,Z.fromArrayBufferView(this.__uniformMatrix4))}else if(!this.__isUniform.get(e.name))switch(this.gl.enableVertexAttribArray(e.index),e.type){case 12:this.gl.enableVertexAttribArray(e.index+1);break;case 16:this.gl.enableVertexAttribArray(e.index+1);this.gl.enableVertexAttribArray(e.index+2);break;case 20:this.gl.enableVertexAttribArray(e.index+1),this.gl.enableVertexAttribArray(e.index+2),this.gl.enableVertexAttribArray(e.index+3)}c=0;for(d=this.__paramInt;c<d.length;)if(e=
d[c],++c,a=e.value,b=e.index,null!=a)switch(e.type){case 8:this.gl.uniform1i(b,a[0]);break;case 9:this.gl.uniform2i(b,a[0],a[1]);break;case 10:this.gl.uniform3i(b,a[0],a[1],a[2]);break;case 11:this.gl.uniform4i(b,a[0],a[1],a[2],a[3])}else this.__isUniform.get(e.name)||this.gl.enableVertexAttribArray(e.index)},get_data:function(){(this.__glSourceDirty||null==this.__data)&&this.__init();return this.__data},get_glFragmentSource:function(){return this.__glFragmentSource},get_glVertexSource:function(){return this.__glVertexSource},
__class__:Ej,__properties__:{get_glVertexSource:"get_glVertexSource",get_glFragmentSource:"get_glFragmentSource",get_data:"get_data"}};var Zh=function(a){};k["openfl.display.ShaderData"]=Zh;Zh.__name__=["openfl","display","ShaderData"];Zh.prototype={aAlpha:null,aPosition:null,aTexCoord:null,uImage0:null,uMatrix:null,__class__:Zh};var Qj=function(){this.width=this.index=this.height=this.channels=0};k["openfl.display.ShaderInput"]=Qj;Qj.__name__=["openfl","display","ShaderInput"];Qj.prototype={channels:null,
height:null,index:null,input:null,name:null,smoothing:null,width:null,__class__:Qj};var sg=function(){this.index=0};k["openfl.display.ShaderParameter"]=sg;sg.__name__=["openfl","display","ShaderParameter"];sg.prototype={index:null,name:null,type:null,value:null,__class__:sg};var cg=function(){xa.call(this)};k["openfl.display.Shape"]=cg;cg.__name__=["openfl","display","Shape"];cg.__interfaces__=[Oj];cg.__super__=xa;cg.prototype=w(xa.prototype,{get_graphics:function(){null==this.__graphics&&(this.__graphics=
new Sf(this));return this.__graphics},__class__:cg,__properties__:w(xa.prototype.__properties__,{get_graphics:"get_graphics"})});var ld=function(a,b,c,d){la.call(this);this.enabled=!0;this.trackAsMenu=!1;this.useHandCursor=!0;this.set_upState(null!=a?a:new xa);this.set_overState(b);this.set_downState(c);this.set_hitTestState(null!=d?d:new xa);this.addEventListener("mouseDown",l(this,this.__this_onMouseDown));this.addEventListener("mouseOut",l(this,this.__this_onMouseOut));this.addEventListener("mouseOver",
l(this,this.__this_onMouseOver));this.addEventListener("mouseUp",l(this,this.__this_onMouseUp));this.__tabEnabled=!0;this.set___currentState(this.upState);null!=ld.__initSymbol&&(a=ld.__initSWF,this.__symbol=ld.__initSymbol,ld.__initSWF=null,ld.__initSymbol=null,this.__fromSymbol(a,this.__symbol))};k["openfl.display.SimpleButton"]=ld;ld.__name__=["openfl","display","SimpleButton"];ld.__super__=la;ld.prototype=w(la.prototype,{downState:null,enabled:null,hitTestState:null,overState:null,trackAsMenu:null,
upState:null,useHandCursor:null,__currentState:null,__ignoreEvent:null,__previousStates:null,__symbol:null,__fromSymbol:function(a,b){this.__symbol=b;null!=b.downState&&this.set_downState(b.downState.__createObject(a));null!=b.hitState&&this.set_hitTestState(b.hitState.__createObject(a));null!=b.overState&&this.set_overState(b.overState.__createObject(a));null!=b.upState&&this.set_upState(b.upState.__createObject(a))},__getBounds:function(a,b){la.prototype.__getBounds.call(this,a,b);null!=b&&(this.__updateTransforms(b),
this.__updateChildren(!0));this.__currentState.__getBounds(a,this.__currentState.__worldTransform);null!=b&&(this.__updateTransforms(),this.__updateChildren(!0))},__getCursor:function(){return this.useHandCursor&&!this.__ignoreEvent?T.POINTER:null},__hitTest:function(a,b,c,d,e,f){var m=!1;if(null!=this.hitTestState)this.hitTestState.__hitTest(a,b,c,d,e,f)&&(null!=d&&(0==d.length?d[0]=f:d[d.length-1]=f),m=!0);else if(null!=this.__currentState){if(!f.get_visible()||this.__isMask||e&&!this.mouseEnabled||
null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;this.__currentState.__hitTest(a,b,c,d,e,f)&&(m=e)}if(null!=d)for(;1<d.length&&d[d.length-1]==d[d.length-2];)d.pop();return m},__hitTestMask:function(a,b){var c=!1;this.__currentState.__hitTestMask(a,b)&&(c=!0);return c},__renderCanvas:function(a){!this.__renderable||0>=this.__worldAlpha||null==this.__currentState||(a.maskManager.pushObject(this),this.__currentState.__renderCanvas(a),a.maskManager.popObject(this))},__renderCanvasMask:function(a){var b=
X.__pool.get();this.__getLocalBounds(b);a.context.rect(0,0,b.width,b.height);X.__pool.release(b);this.__currentState.__renderCanvasMask(a)},__renderDOM:function(a){a.maskManager.pushObject(this);for(var b=0,c=this.__previousStates;b<c.data.get_length();){var d=c.data.get(b);++b;d.__renderDOM(a)}this.__previousStates.data.set_length(0);null!=this.__currentState&&(this.__currentState.stage!=this.stage&&this.__currentState.__setStageReference(this.stage),this.__currentState.__renderDOM(a));a.maskManager.popObject(this)},
__renderGL:function(a){!this.__renderable||0>=this.__worldAlpha||null==this.__currentState||(a.maskManager.pushObject(this),this.__currentState.__renderGL(a),a.maskManager.popObject(this))},__setStageReference:function(a){la.prototype.__setStageReference.call(this,a);null!=this.__currentState&&this.__currentState.__setStageReference(a);null!=this.hitTestState&&this.hitTestState!=this.__currentState&&this.hitTestState.__setStageReference(a)},__setTransformDirty:function(){la.prototype.__setTransformDirty.call(this);
null!=this.__currentState&&this.__currentState.__setTransformDirty();null!=this.hitTestState&&this.hitTestState!=this.__currentState&&this.hitTestState.__setTransformDirty()},__update:function(a,b,c){la.prototype.__update.call(this,a,b,c);b&&(null!=this.__currentState&&this.__currentState.__update(a,!0,c),null!=this.hitTestState&&this.hitTestState!=this.__currentState&&this.hitTestState.__update(a,!0,c))},__updateChildren:function(a){la.prototype.__updateChildren.call(this,a);null!=this.__currentState&&
this.__currentState.__updateChildren(a);null!=this.hitTestState&&this.hitTestState!=this.__currentState&&this.hitTestState.__updateChildren(a)},__updateTransforms:function(a){la.prototype.__updateTransforms.call(this,a);null!=this.__currentState&&this.__currentState.__updateTransforms();null!=this.hitTestState&&this.hitTestState!=this.__currentState&&this.hitTestState.__updateTransforms()},set_downState:function(a){null!=this.downState&&this.__currentState==this.downState&&this.set___currentState(a);
return this.downState=a},set_hitTestState:function(a){null!=this.hitTestState&&this.hitTestState!=a&&this.hitTestState!=this.downState&&this.hitTestState!=this.upState&&this.hitTestState!=this.overState&&(this.hitTestState.__renderParent=null);null!=a&&(a.__renderParent=this,a.__setRenderDirty());return this.hitTestState=a},set_overState:function(a){null!=this.overState&&this.__currentState==this.overState&&this.set___currentState(a);return this.overState=a},set_upState:function(a){null!=this.upState&&
this.__currentState==this.upState&&this.set___currentState(a);return this.upState=a},set___currentState:function(a){null!=this.__currentState&&this.__currentState!=this.hitTestState&&(this.__currentState.__renderParent=null);null!=a&&null!=a.parent&&a.parent.removeChild(a);null==this.__previousStates&&(this.__previousStates=hb.toObjectVector(null));if(a!=this.__currentState){null!=this.__currentState&&(this.__currentState.__setStageReference(null),this.__previousStates.data.push(this.__currentState));
var b=this.__previousStates.data.indexOf(a,0);-1<b&&new yc(this.__previousStates.data.splice(b,1));null!=a&&(a.__renderParent=this,a.__setRenderDirty());this.__setRenderDirty()}return this.__currentState=a},__this_onMouseDown:function(a){this.set___currentState(this.downState)},__this_onMouseOut:function(a){this.__ignoreEvent=!1;this.upState!=this.__currentState&&this.set___currentState(this.upState)},__this_onMouseOver:function(a){a.buttonDown&&(this.__ignoreEvent=!0);this.overState==this.__currentState||
null==this.overState||this.__ignoreEvent||this.set___currentState(this.overState)},__this_onMouseUp:function(a){this.__ignoreEvent=!1;null!=this.overState?this.set___currentState(this.overState):this.set___currentState(this.upState)},__class__:ld,__properties__:w(la.prototype.__properties__,{set___currentState:"set___currentState",set_upState:"set_upState",set_overState:"set_overState",set_hitTestState:"set_hitTestState",set_downState:"set_downState"})});var tg=function(a,b){Fb.call(this);this.application=
a.application;this.window=a;null==b?(this.__transparent=!0,this.set_color(0)):this.set_color(b);this.set_name(null);this.__contentsScaleFactor=a.get_scale();this.__deltaTime=0;this.__displayState=2;this.__logicalHeight=this.__logicalWidth=this.__lastClickTime=this.__mouseY=this.__mouseX=0;this.__displayMatrix=new sa;this.__renderDirty=!0;this.__wasFullscreen=a.get_fullscreen();a=this.stage3Ds=hb.toObjectVector(null);b=new Je;a.data.push(b);this.__resize();this.stage=this;this.align=6;this.allowsFullScreenInteractive=
this.allowsFullScreen=!1;this.quality=1;this.scaleMode=2;this.showDefaultContextMenu=!0;this.softKeyboardRect=new X;this.stageFocusRect=!0;this.__macKeyboard=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)||/Mac/.test(navigator.platform);this.__clearBeforeRender=!0;this.__stack=[];this.__rollOutStack=[];this.__touchData=new Cb;null==H.current.stage&&this.stage.addChild(H.current)};k["openfl.display.Stage"]=tg;tg.__name__=["openfl","display","Stage"];tg.__interfaces__=
[Ag];tg.__super__=Fb;tg.prototype=w(Fb.prototype,{align:null,allowsFullScreen:null,allowsFullScreenInteractive:null,application:null,quality:null,scaleMode:null,showDefaultContextMenu:null,softKeyboardRect:null,stage3Ds:null,stageFocusRect:null,stageHeight:null,stageWidth:null,window:null,__cacheFocus:null,__clearBeforeRender:null,__color:null,__colorSplit:null,__colorString:null,__contentsScaleFactor:null,__deltaTime:null,__displayMatrix:null,__displayState:null,__dragBounds:null,__dragObject:null,
__dragOffsetX:null,__dragOffsetY:null,__focus:null,__invalidated:null,__lastClickTime:null,__logicalWidth:null,__logicalHeight:null,__macKeyboard:null,__mouseDownLeft:null,__mouseDownMiddle:null,__mouseDownRight:null,__mouseOverTarget:null,__mouseX:null,__mouseY:null,__primaryTouch:null,__renderer:null,__rendering:null,__rollOutStack:null,__stack:null,__transparent:null,__wasDirty:null,__wasFullscreen:null,__touchData:null,addRenderer:function(a){var b=l(this,this.render);a.onRender.add(function(){b(a)});
var c=l(this,this.onRenderContextLost);a.onContextLost.add(function(){c(a)});var d=l(this,this.onRenderContextRestored);a.onContextRestored.add(function(b){d(a,b)})},addWindow:function(a){if(this.window==a){var b=l(this,this.onWindowActivate);a.onActivate.add(function(){b(a)});var c=l(this,this.onWindowClose);a.onClose.add(function(){c(a)},!1,-9E3);var d=l(this,this.onWindowCreate);a.onCreate.add(function(){d(a)});var e=l(this,this.onWindowDeactivate);a.onDeactivate.add(function(){e(a)});var f=l(this,
this.onWindowDropFile);a.onDropFile.add(function(b){f(a,b)});var m=l(this,this.onWindowEnter);a.onEnter.add(function(){m(a)});var h=l(this,this.onWindowFocusIn);a.onFocusIn.add(function(){h(a)});var q=l(this,this.onWindowFocusOut);a.onFocusOut.add(function(){q(a)});var g=l(this,this.onWindowFullscreen);a.onFullscreen.add(function(){g(a)});var k=l(this,this.onKeyDown);a.onKeyDown.add(function(b,c){k(a,b,c)});var n=l(this,this.onKeyUp);a.onKeyUp.add(function(b,c){n(a,b,c)});var p=l(this,this.onWindowLeave);
a.onLeave.add(function(){p(a)});var r=l(this,this.onWindowMinimize);a.onMinimize.add(function(){r(a)});var z=l(this,this.onMouseDown);a.onMouseDown.add(function(b,c,d){z(a,b,c,d)});var t=l(this,this.onMouseMove);a.onMouseMove.add(function(b,c){t(a,b,c)});var u=l(this,this.onMouseMoveRelative);a.onMouseMoveRelative.add(function(b,c){u(a,b,c)});var x=l(this,this.onMouseUp);a.onMouseUp.add(function(b,c,d){x(a,b,c,d)});var v=l(this,this.onMouseWheel);a.onMouseWheel.add(function(b,c){v(a,b,c)});var w=
l(this,this.onWindowMove);a.onMove.add(function(b,c){w(a,b,c)});var A=l(this,this.onWindowResize);a.onResize.add(function(b,c){A(a,b,c)});var B=l(this,this.onWindowRestore);a.onRestore.add(function(){B(a)});var C=l(this,this.onTextEdit);a.onTextEdit.add(function(b,c,d){C(a,b,c,d)});var D=l(this,this.onTextInput);a.onTextInput.add(function(b){D(a,b)});if(-1<a.id)this.onWindowCreate(a)}},registerModule:function(a){a.onExit.add(l(this,this.onModuleExit),!1,0);a.onUpdate.add(l(this,this.update));for(a=
tb.devices.iterator();a.hasNext();){var b=a.next();this.__onGamepadConnect(b)}tb.onConnect.add(l(this,this.__onGamepadConnect));gb.onStart.add(l(this,this.onTouchStart));gb.onMove.add(l(this,this.onTouchMove));gb.onEnd.add(l(this,this.onTouchEnd))},setPreloader:function(a){},onGamepadAxisMove:function(a,b,c){try{La.__onGamepadAxisMove(a,b,c)}catch(d){Y.lastException=d,d instanceof K&&(d=d.val),this.__handleError(d)}},onGamepadButtonDown:function(a,b){try{La.__onGamepadButtonDown(a,b)}catch(c){Y.lastException=
c,c instanceof K&&(c=c.val),this.__handleError(c)}},onGamepadButtonUp:function(a,b){try{La.__onGamepadButtonUp(a,b)}catch(c){Y.lastException=c,c instanceof K&&(c=c.val),this.__handleError(c)}},onGamepadConnect:function(a){try{La.__onGamepadConnect(a)}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},onGamepadDisconnect:function(a){try{La.__onGamepadDisconnect(a)}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},onKeyDown:function(a,b,c){if(null!=
this.window&&this.window==a)try{this.__onKey("keyDown",b,c)}catch(d){Y.lastException=d,d instanceof K&&(d=d.val),this.__handleError(d)}},onKeyUp:function(a,b,c){if(null!=this.window&&this.window==a)try{this.__onKey("keyUp",b,c)}catch(d){Y.lastException=d,d instanceof K&&(d=d.val),this.__handleError(d)}},onModuleExit:function(a){if(null!=this.window)try{this.__broadcastEvent(new R("deactivate"))}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},onMouseDown:function(a,b,c,
d){if(null!=this.window&&this.window==a)try{switch(d){case 1:var e="middleMouseDown";break;case 2:e="rightMouseDown";break;default:e="mouseDown"}this.__onMouse(e,u["int"](b*a.get_scale()),u["int"](c*a.get_scale()),d)}catch(f){Y.lastException=f,f instanceof K&&(f=f.val),this.__handleError(f)}},onMouseMove:function(a,b,c){if(null!=this.window&&this.window==a)try{this.__onMouse("mouseMove",u["int"](b*a.get_scale()),u["int"](c*a.get_scale()),0)}catch(d){Y.lastException=d,d instanceof K&&(d=d.val),this.__handleError(d)}},
onMouseMoveRelative:function(a,b,c){},onMouseUp:function(a,b,c,d){if(null!=this.window&&this.window==a)try{switch(d){case 1:var e="middleMouseUp";break;case 2:e="rightMouseUp";break;default:e="mouseUp"}this.__onMouse(e,u["int"](b*a.get_scale()),u["int"](c*a.get_scale()),d);this.showDefaultContextMenu||2!=d||a.onMouseUp.cancel()}catch(f){Y.lastException=f,f instanceof K&&(f=f.val),this.__handleError(f)}},onMouseWheel:function(a,b,c){if(null!=this.window&&this.window==a)try{this.__onMouseWheel(u["int"](b*
a.get_scale()),u["int"](c*a.get_scale()))}catch(d){Y.lastException=d,d instanceof K&&(d=d.val),this.__handleError(d)}},onRenderContextLost:function(a){this.__renderer=null},onRenderContextRestored:function(a,b){this.__createRenderer()},onTextEdit:function(a,b,c,d){},onTextInput:function(a,b){if(null!=this.window&&this.window==a)try{a=[];null==this.__focus?this.__getInteractive(a):this.__focus.__getInteractive(a);var c=new Ke("textInput",!0,!1,b);0<a.length?(a.reverse(),this.__dispatchStack(c,a)):
this.__dispatchEvent(c)}catch(d){Y.lastException=d,d instanceof K&&(d=d.val),this.__handleError(d)}},onTouchMove:function(a){try{this.__onTouch("touchMove",a)}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},onTouchEnd:function(a){try{this.__primaryTouch==a&&(this.__primaryTouch=null),this.__onTouch("touchEnd",a)}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},onTouchStart:function(a){try{null==this.__primaryTouch&&(this.__primaryTouch=a),this.__onTouch("touchBegin",
a)}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},onWindowActivate:function(a){},onWindowClose:function(a){this.window==a&&(this.window=null);try{this.__primaryTouch=null,this.__broadcastEvent(new R("deactivate"))}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},onWindowCreate:function(a){if(null!=this.window&&this.window==a)try{null!=a.renderer&&this.__createRenderer()}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},
onWindowDeactivate:function(a){},onWindowDropFile:function(a,b){},onWindowEnter:function(a){},onWindowFocusIn:function(a){if(null!=this.window&&this.window==a)try{this.__renderDirty=!0,this.__broadcastEvent(new R("activate")),this.set_focus(this.__cacheFocus)}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},onWindowFocusOut:function(a){if(null!=this.window&&this.window==a)try{this.__primaryTouch=null;this.__broadcastEvent(new R("deactivate"));var b=this.get_focus();this.set_focus(null);
this.__cacheFocus=b}catch(c){Y.lastException=c,c instanceof K&&(c=c.val),this.__handleError(c)}},onWindowFullscreen:function(a){if(null!=this.window&&this.window==a)try{this.__resize(),this.__wasFullscreen||(this.__wasFullscreen=!0,2==this.__displayState&&(this.__displayState=1),this.__dispatchEvent(new Rf("fullScreen",!1,!1,!1,!0)))}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},onWindowLeave:function(a){if(null!=this.window&&this.window==a)try{this.__dispatchEvent(new R("mouseLeave"))}catch(b){Y.lastException=
b,b instanceof K&&(b=b.val),this.__handleError(b)}},onWindowMinimize:function(a){},onWindowMove:function(a,b,c){},onWindowResize:function(a,b,c){if(null!=this.window&&this.window==a)try{this.__renderDirty=!0,this.__resize(),this.__wasFullscreen&&!a.get_fullscreen()&&(this.__wasFullscreen=!1,this.__displayState=2,this.__dispatchEvent(new Rf("fullScreen",!1,!1,!0,!0)))}catch(d){Y.lastException=d,d instanceof K&&(d=d.val),this.__handleError(d)}},onWindowRestore:function(a){},render:function(a){if(null!=
a.window&&a.window==this.window)try{this.__rendering||(this.__rendering=!0,null!=this.__renderer&&(Je.__active||this.stage3Ds.data.get(0).__contextRequested)&&(this.__renderer.clear(),this.__renderer.renderStage3D(),this.__renderDirty=!0),this.__broadcastEvent(new R("enterFrame")),this.__broadcastEvent(new R("frameConstructed")),this.__broadcastEvent(new R("exitFrame")),this.__invalidated&&(this.__invalidated=!1,this.__broadcastEvent(new R("render"))),this.__renderable=!0,this.__enterFrame(this.__deltaTime),
this.__deltaTime=0,this.__update(!1,!0),null!=this.__renderer&&this.__renderDirty?(Je.__active||this.__renderer.clear(),a.type==Ca.CAIRO&&Q.enumIndex(a.context),this.__renderer.render()):a.onRender.cancel(),this.__rendering=!1)}catch(b){Y.lastException=b,b instanceof K&&(b=b.val),this.__handleError(b)}},update:function(a){this.__deltaTime=a},__broadcastEvent:function(a){if(xa.__broadcastEvents.exists(a.type))for(var b=xa.__broadcastEvents.get(a.type),c=0;c<b.length;){var d=b[c];++c;d.__dispatch(a)}},
__createRenderer:function(){var a=this.window.renderer.context;switch(Q.enumIndex(a)){case 0:this.__renderer=new He(this,a[2]);break;case 1:this.__renderer=new Ge(this,a[2]);break;case 2:this.__renderer=new Wa(this,a[2])}},__drag:function(a){var b=this.__dragObject.parent;null!=b&&b.__getWorldTransform().__transformInversePoint(a);b=a.x+this.__dragOffsetX;a=a.y+this.__dragOffsetY;null!=this.__dragBounds&&(b<this.__dragBounds.x?b=this.__dragBounds.x:b>this.__dragBounds.get_right()&&(b=this.__dragBounds.get_right()),
a<this.__dragBounds.y?a=this.__dragBounds.y:a>this.__dragBounds.get_bottom()&&(a=this.__dragBounds.get_bottom()));this.__dragObject.set_x(b);this.__dragObject.set_y(a)},__getInteractive:function(a){null!=a&&a.push(this);return!0},__globalToLocal:function(a,b){a!=b&&b.copyFrom(a);return b},__handleError:function(a){var b=new $h("uncaughtError",!0,!0,a);H.current.__loaderInfo.uncaughtErrorEvents.dispatchEvent(b);if(!b.__preventDefault){try{var c=Y.lastException;if(null!=c&&C.hasField(c,"stack")&&null!=
c.stack&&""!=c.stack)console.log(c.stack),a.stack=c.stack;else{var d=Y.toString(Y.callStack());console.log(d)}}catch(e){Y.lastException=e}throw a;}},__onKey:function(a,b,c){Fa.__altKey=Da.get_altKey(c);Fa.__commandKey=Da.get_metaKey(c);Fa.__ctrlKey=Da.get_ctrlKey(c);Fa.__shiftKey=Da.get_shiftKey(c);var d=[];null==this.__focus?this.__getInteractive(d):this.__focus.__getInteractive(d);if(0<d.length){var e=eg.__getKeyLocation(b);b=eg.__convertKeyCode(b);var f=eg.__getCharCode(b,Da.get_shiftKey(c));c=
new ai(a,!0,!0,f,b,e,this.__macKeyboard?Da.get_ctrlKey(c)||Da.get_metaKey(c):Da.get_ctrlKey(c),Da.get_altKey(c),Da.get_shiftKey(c),Da.get_ctrlKey(c),Da.get_metaKey(c));d.reverse();this.__dispatchStack(c,d);c.__preventDefault&&("keyDown"==a?this.window.onKeyDown.cancel():this.window.onKeyUp.cancel())}},__onGamepadConnect:function(a){this.onGamepadConnect(a);var b=l(this,this.onGamepadAxisMove);a.onAxisMove.add(function(c,d){b(a,c,d)});var c=l(this,this.onGamepadButtonDown);a.onButtonDown.add(function(b){c(a,
b)});var d=l(this,this.onGamepadButtonUp);a.onButtonUp.add(function(b){d(a,b)});var e=l(this,this.onGamepadDisconnect);a.onDisconnect.add(function(){e(a)})},__onMouse:function(a,b,c,d){if(!(2<d)){var e=za.__pool.get();e.setTo(b,c);this.__displayMatrix.__transformInversePoint(e);this.__mouseX=e.x;this.__mouseY=e.y;c=[];if(this.__hitTest(this.__mouseX,this.__mouseY,!0,c,!0,this))var f=c[c.length-1];else f=this,c=[this];null==f&&(f=this);var m=null;switch(a){case "middleMouseDown":this.__mouseDownMiddle=
f;break;case "middleMouseUp":this.__mouseDownMiddle==f&&(m="middleClick");this.__mouseDownMiddle=null;break;case "mouseDown":f.__allowMouseFocus()?this.set_focus(f):this.set_focus(null);this.__mouseDownLeft=f;Fa.__buttonDown=!0;break;case "mouseUp":null!=this.__mouseDownLeft&&(Fa.__buttonDown=!1,0>this.__mouseX||0>this.__mouseY?this.__dispatchEvent(Fa.__create("releaseOutside",1,this.__mouseX,this.__mouseY,new za(this.__mouseX,this.__mouseY),this)):this.__mouseDownLeft==f&&(m="click"),this.__mouseDownLeft=
null);break;case "rightMouseDown":this.__mouseDownRight=f;break;case "rightMouseUp":this.__mouseDownRight==f&&(m="rightClick"),this.__mouseDownRight=null}b=za.__pool.get();this.__dispatchStack(Fa.__create(a,d,this.__mouseX,this.__mouseY,f.__globalToLocal(e,b),f),c);null!=m&&(this.__dispatchStack(Fa.__create(m,d,this.__mouseX,this.__mouseY,f.__globalToLocal(e,b),f),c),"mouseUp"==a&&n.__cast(f,la).doubleClickEnabled&&(a=H.getTimer(),500>a-this.__lastClickTime?(this.__dispatchStack(Fa.__create("doubleClick",
d,this.__mouseX,this.__mouseY,f.__globalToLocal(e,b),f),c),this.__lastClickTime=0):this.__lastClickTime=a));if("auto"==al.__cursor){m=null;if(null!=this.__mouseDownLeft)m=this.__mouseDownLeft.__getCursor();else for(a=0;a<c.length;)if(m=c[a],++a,m=m.__getCursor(),null!=m){gh.set_cursor(m);break}null==m&&gh.set_cursor(T.ARROW)}f!=this.__mouseOverTarget&&null!=this.__mouseOverTarget&&(a=Fa.__create("mouseOut",d,this.__mouseX,this.__mouseY,this.__mouseOverTarget.__globalToLocal(e,b),this.__mouseOverTarget),
this.__mouseOverTarget.__dispatchEvent(a));m=0;for(var h=this.__rollOutStack;m<h.length;){var q=h[m];++m;-1==c.indexOf(q)&&(P.remove(this.__rollOutStack,q),a=Fa.__create("rollOut",d,this.__mouseX,this.__mouseY,this.__mouseOverTarget.__globalToLocal(e,b),this.__mouseOverTarget),a.bubbles=!1,q.__dispatchEvent(a))}for(m=0;m<c.length;)h=c[m],++m,-1==this.__rollOutStack.indexOf(h)&&null!=this.__mouseOverTarget&&(h.hasEventListener("rollOver")&&(a=Fa.__create("rollOver",d,this.__mouseX,this.__mouseY,this.__mouseOverTarget.__globalToLocal(e,
b),h),a.bubbles=!1,h.__dispatchEvent(a)),h.hasEventListener("rollOut")&&this.__rollOutStack.push(h));f!=this.__mouseOverTarget&&(null!=f&&(a=Fa.__create("mouseOver",d,this.__mouseX,this.__mouseY,f.__globalToLocal(e,b),f),a.bubbles=!0,f.__dispatchEvent(a)),this.__mouseOverTarget=f);null!=this.__dragObject&&(this.__drag(e),d=null,this.__mouseOverTarget==this.__dragObject?(c=this.__dragObject.mouseEnabled,f=this.__dragObject.mouseChildren,this.__dragObject.mouseEnabled=!1,this.__dragObject.mouseChildren=
!1,a=[],this.__hitTest(this.__mouseX,this.__mouseY,!0,a,!0,this)&&(d=a[a.length-1]),this.__dragObject.mouseEnabled=c,this.__dragObject.mouseChildren=f):this.__mouseOverTarget!=this&&(d=this.__mouseOverTarget),this.__dragObject.dropTarget=d);za.__pool.release(e);za.__pool.release(b)}},__onMouseWheel:function(a,b){var c=this.__mouseX,d=this.__mouseY;a=[];if(this.__hitTest(this.__mouseX,this.__mouseY,!0,a,!0,this))var e=a[a.length-1];else e=this,a=[this];null==e&&(e=this);var f=za.__pool.get();f.setTo(c,
d);this.__displayMatrix.__transformInversePoint(f);b=u["int"](b);this.__dispatchStack(Fa.__create("mouseWheel",0,this.__mouseX,this.__mouseY,e.__globalToLocal(f,f),e,b),a);za.__pool.release(f)},__onTouch:function(a,b){var c=za.__pool.get();c.setTo(Math.round(b.x*this.window.get_width()*this.window.get_scale()),Math.round(b.y*this.window.get_height()*this.window.get_scale()));this.__displayMatrix.__transformInversePoint(c);var d=c.x,e=c.y,f=[];if(this.__hitTest(d,e,!1,f,!0,this))var m=f[f.length-1];
else m=this,f=[this];null==m&&(m=this);var h=b.id;if(this.__touchData.exists(h))var q=this.__touchData.get(h);else q=Td.__pool.get(),q.reset(),q.touch=b,this.__touchData.set(h,q);var g=null,k=!1;switch(a){case "touchBegin":q.touchDownTarget=m;break;case "touchEnd":q.touchDownTarget==m&&(g="touchTap"),q.touchDownTarget=null,k=!0}var l=za.__pool.get();b=this.__primaryTouch==b;a=Eb.__create(a,null,d,e,m.__globalToLocal(c,l),m);a.touchPointID=h;a.isPrimaryTouchPoint=b;this.__dispatchStack(a,f);null!=
g&&(a=Eb.__create(g,null,d,e,m.__globalToLocal(c,l),m),a.touchPointID=h,a.isPrimaryTouchPoint=b,this.__dispatchStack(a,f));g=q.touchOverTarget;m!=g&&null!=g&&(a=Eb.__create("touchOut",null,d,e,g.__globalToLocal(c,l),g),a.touchPointID=h,a.isPrimaryTouchPoint=b,g.__dispatchEvent(a));for(var n=q.rollOutStack,p=0;p<n.length;){var r=n[p];++p;-1==f.indexOf(r)&&(P.remove(n,r),a=Eb.__create("touchRollOut",null,d,e,g.__globalToLocal(c,l),g),a.touchPointID=h,a.isPrimaryTouchPoint=b,a.bubbles=!1,r.__dispatchEvent(a))}for(p=
0;p<f.length;)r=f[p],++p,-1==n.indexOf(r)&&(r.hasEventListener("touchRollOver")&&(a=Eb.__create("touchRollOver",null,d,e,g.__globalToLocal(c,l),r),a.touchPointID=h,a.isPrimaryTouchPoint=b,a.bubbles=!1,r.__dispatchEvent(a)),r.hasEventListener("touchRollOut")&&n.push(r));m!=g&&(null!=m&&(a=Eb.__create("touchOver",null,d,e,m.__globalToLocal(c,l),m),a.touchPointID=h,a.isPrimaryTouchPoint=b,a.bubbles=!0,m.__dispatchEvent(a)),q.touchOverTarget=m);za.__pool.release(c);za.__pool.release(l);k&&(this.__touchData.remove(h),
q.reset(),Td.__pool.release(q))},__resize:function(){var a=this.stageWidth,b=this.stageHeight,c=u["int"](this.window.get_width()*this.window.get_scale()),d=u["int"](this.window.get_height()*this.window.get_scale());this.__logicalWidth=c;this.__logicalHeight=d;this.__displayMatrix.identity();if(0==this.__logicalWidth&&0==this.__logicalHeight)this.stageWidth=c,this.stageHeight=d;else{this.stageWidth=this.__logicalWidth;this.stageHeight=this.__logicalHeight;var e=Math.min(c/this.stageWidth,d/this.stageHeight),
f=Math.round((c-this.stageWidth*e)/2),m=Math.round((d-this.stageHeight*e)/2);this.__displayMatrix.scale(e,e);this.__displayMatrix.translate(f,m)}e=0;for(f=this.stage3Ds;e<f.data.get_length();)m=f.data.get(e),++e,m.__resize(this.stageWidth,this.stageHeight);null!=this.__renderer&&this.__renderer.resize(c,d);this.stageWidth==a&&this.stageHeight==b||this.__dispatchEvent(new R("resize"))},__setLogicalSize:function(a,b){this.__logicalWidth=a;this.__logicalHeight=b;this.__resize()},__update:function(a,
b,c){a?this.__transformDirty&&(Fb.prototype.__update.call(this,!0,b,c),b&&(this.__transformDirty=!1)):this.__transformDirty||this.__renderDirty?(Fb.prototype.__update.call(this,!1,b,c),b&&(this.__wasDirty=!0)):this.__wasDirty&&(Fb.prototype.__update.call(this,!1,b,c),b&&(this.__wasDirty=!1))},set_color:function(a){this.__colorSplit=[((a&16711680)>>>16)/255,((a&65280)>>>8)/255,(a&255)/255];this.__colorString="#"+L.hex(a&16777215,6);return this.__color=a},get_focus:function(){return this.__focus},set_focus:function(a){if(a!=
this.__focus){var b=this.__focus;this.__cacheFocus=this.__focus=a;if(null!=b){var c=new ug("focusOut",!0,!1,this.__focus,!1,0),d=[];b.__getInteractive(d);d.reverse();this.__dispatchStack(c,d)}null!=this.__focus&&(b=new ug("focusIn",!0,!1,b,!1,0),c=[],a.__getInteractive(c),c.reverse(),this.__dispatchStack(b,c))}return this.__focus},get_frameRate:function(){return null!=this.application?this.application.get_frameRate():0},set_frameRate:function(a){return null!=this.application?this.application.set_frameRate(a):
a},set_height:function(a){return this.get_height()},get_mouseX:function(){return this.__mouseX},get_mouseY:function(){return this.__mouseY},set_rotation:function(a){return 0},set_scaleX:function(a){return 0},set_scaleY:function(a){return 0},set_width:function(a){return this.get_width()},set_x:function(a){return 0},set_y:function(a){return 0},__class__:tg,__properties__:w(Fb.prototype.__properties__,{set_frameRate:"set_frameRate",get_frameRate:"get_frameRate",set_focus:"set_focus",get_focus:"get_focus",
set_color:"set_color"})});var Je=function(){ca.call(this);this.set_x(0);this.set_y(0);this.visible=!0};k["openfl.display.Stage3D"]=Je;Je.__name__=["openfl","display","Stage3D"];Je.__super__=ca;Je.prototype=w(ca.prototype,{context3D:null,visible:null,x:null,y:null,__contextRequested:null,__stage:null,__canvas:null,__renderContext:null,__style:null,__webgl:null,__createContext:function(a,b){this.__stage=a;null!=b.gl?(this.context3D=new Fc(this,b),this.__dispatchCreate()):(this.__canvas=M.get_document().createElement("canvas"),
this.__canvas.width=a.stageWidth,this.__canvas.height=a.stageHeight,a=a.window,a={alpha:C.hasField(a.config,"background")&&null==a.config.background,antialias:C.hasField(a.config,"antialiasing")&&0<a.config.antialiasing,depth:C.hasField(a.config,"depthBuffer")?a.config.depthBuffer:!0,premultipliedAlpha:!0,stencil:C.hasField(a.config,"stencilBuffer")&&a.config.stencilBuffer,preserveDrawingBuffer:!1},this.__webgl=uk.getContextWebGL(this.__canvas,a),null!=this.__webgl?(this.__renderContext=new Ug(this.__webgl),
ra.context=this.__renderContext,this.context3D=new Fc(this,b),b.element.appendChild(this.__canvas),this.__style=this.__canvas.style,this.__style.setProperty("position","absolute",null),this.__style.setProperty("top","0",null),this.__style.setProperty("left","0",null),this.__style.setProperty(b.transformOriginProperty,"0 0 0",null),this.__style.setProperty("z-index","-1",null),this.__dispatchCreate()):this.__dispatchError())},__dispatchError:function(){this.__contextRequested=!1;this.dispatchEvent(new Hc("error",
!1,!1,"Context3D not available"))},__dispatchCreate:function(){this.__contextRequested&&(this.__contextRequested=!1,this.dispatchEvent(new R("context3DCreate")))},__renderCanvas:function(a,b){this.visible&&this.__contextRequested&&(this.__dispatchError(),this.__contextRequested=!1)},__renderDOM:function(a,b){this.visible&&(this.__contextRequested&&null==this.context3D&&this.__createContext(a,b),null!=this.context3D&&(ra.context=this.__renderContext,this.__resetContext3DStates()))},__renderGL:function(a,
b){this.visible&&(this.__contextRequested&&null==this.context3D&&this.__createContext(a,b),null!=this.context3D&&(this.__resetContext3DStates(),Uk.render(this,b)))},__resize:function(a,b){null!=this.__canvas&&(this.__canvas.width=a,this.__canvas.height=b)},__resetContext3DStates:function(){this.context3D.__updateBlendFactors();this.context3D.__updateBackbufferViewport()},set_x:function(a){if(this.x==a)return a;this.x=a;null!=this.context3D&&this.context3D.__updateBackbufferViewport();return a},set_y:function(a){if(this.y==
a)return a;this.y=a;null!=this.context3D&&this.context3D.__updateBackbufferViewport();return a},__class__:Je,__properties__:{set_y:"set_y",set_x:"set_x"}});var Xh=function(a){Ae.call(this,a)};k["openfl.display.Window"]=Xh;Xh.__name__=["openfl","display","Window"];Xh.__super__=Ae;Xh.prototype=w(Ae.prototype,{create:function(a){Ae.prototype.create.call(this,a);this.stage=new tg(this,C.hasField(this.config,"background")?this.config.background:16777215);if(C.hasField(this.config,"parameters"))try{this.stage.get_loaderInfo().parameters=
this.config.parameters}catch(b){Y.lastException=b}C.hasField(this.config,"resizable")&&!this.config.resizable&&this.stage.__setLogicalSize(this.config.width,this.config.height);a.addModule(this.stage)},__class__:Xh});var Fc=function(a,b){this.driverInfo="OpenGL (Direct blitting)";this.backBufferHeight=this.backBufferWidth=0;ca.call(this);this.__stage3D=a;this.__renderSession=b;pa.create(this)};k["openfl.display3D.Context3D"]=Fc;Fc.__name__=["openfl","display3D","Context3D"];Fc.__super__=ca;Fc.prototype=
w(ca.prototype,{backBufferHeight:null,backBufferWidth:null,driverInfo:null,maxBackBufferHeight:null,maxBackBufferWidth:null,__backBufferAntiAlias:null,__backBufferEnableDepthAndStencil:null,__backBufferWantsBestResolution:null,__fragmentConstants:null,__frameCount:null,__maxAnisotropyTexture2D:null,__positionScale:null,__program:null,__renderSession:null,__renderToTexture:null,__rttDepthAndStencil:null,__samplerDirty:null,__samplerTextures:null,__samplerStates:null,__stage3D:null,__stencilCompareMode:null,
__stencilRef:null,__stencilReadMask:null,__supportsAnisotropicFiltering:null,__supportsPackedDepthStencil:null,__vertexConstants:null,createRectangleTexture:function(a,b,c,d){return new bi(this,a,b,bl.toString(c),d)},__updateBackbufferViewport:function(){pa.__updateBackbufferViewportTEMP(this)},__updateBlendFactors:function(){pa.__updateBlendFactorsTEMP(this)},__class__:Fc});var bl={};k["openfl.display3D._Context3DTextureFormat.Context3DTextureFormat_Impl_"]=bl;bl.__name__=["openfl","display3D","_Context3DTextureFormat",
"Context3DTextureFormat_Impl_"];bl.toString=function(a){switch(a){case 0:return"bgrPacked565";case 1:return"bgra";case 2:return"bgraPacked4444";case 3:return"compressed";case 4:return"compressedAlpha";case 5:return"rgbaHalfFloat";default:return null}};var cl=function(a){this.__context=a;this.__samplerUsageMask=this.__memUsage=0;this.__uniforms=new Db;this.__samplerUniforms=new Db;this.__alphaSamplerUniforms=new Db;this.__samplerStates=hb.toObjectVector(null,8)};k["openfl.display3D.Program3D"]=cl;
cl.__name__=["openfl","display3D","Program3D"];cl.prototype={__alphaSamplerUniforms:null,__context:null,__fragmentUniformMap:null,__memUsage:null,__programID:null,__samplerStates:null,__samplerUniforms:null,__samplerUsageMask:null,__uniforms:null,__vertexUniformMap:null,__use:function(){Tk.use(this,this.__context.__renderSession)},__class__:cl};var dl=function(a){this.gl=a;this.isDirty=!0;this.regDataPointer=new Xi(null,0)};k["openfl.display3D.Uniform"]=dl;dl.__name__=["openfl","display3D","Uniform"];
dl.prototype={location:null,regIndex:null,regCount:null,isDirty:null,gl:null,regDataPointer:null,__class__:dl};var el=function(a){this.__uniforms=a;this.__uniforms.sort(function(a,b){return C.compare(a.regIndex,b.regIndex)});for(var b=a=0,c=this.__uniforms;b<c.length;){var d=c[b];++b;d.regIndex+d.regCount>a&&(a=d.regIndex+d.regCount)}this.__registerLookup=hb.toObjectVector(null,a);a=0;for(b=this.__uniforms;a<b.length;){c=b[a];++a;d=0;for(var e=c.regCount;d<e;){var f=d++;this.__registerLookup.data.set(c.regIndex+
f,c)}}this.__anyDirty=this.__allDirty=!0};k["openfl.display3D.UniformMap"]=el;el.__name__=["openfl","display3D","UniformMap"];el.prototype={__allDirty:null,__anyDirty:null,__registerLookup:null,__uniforms:null,markAllDirty:function(){this.__anyDirty=this.__allDirty=!0},__class__:el};var sc=function(a){ca.call(this);this.__context=a;me.create(this,this.__context.__renderSession)};k["openfl.display3D.textures.TextureBase"]=sc;sc.__name__=["openfl","display3D","textures","TextureBase"];sc.__super__=
ca;sc.prototype=w(ca.prototype,{__context:null,__format:null,__height:null,__internalFormat:null,__optimizeForRenderToTexture:null,__streamingLevels:null,__textureContext:null,__textureID:null,__textureTarget:null,__width:null,__class__:sc});var Rj=function(a,b,c,d,e){sc.call(this,a);this.__size=b;this.__optimizeForRenderToTexture=d;this.__streamingLevels=e;Sk.create(this,this.__context.__renderSession)};k["openfl.display3D.textures.CubeTexture"]=Rj;Rj.__name__=["openfl","display3D","textures","CubeTexture"];
Rj.__super__=sc;Rj.prototype=w(sc.prototype,{__size:null,__uploadedSides:null,__class__:Rj});var bi=function(a,b,c,d,e){sc.call(this,a);this.__width=b;this.__height=c;this.__optimizeForRenderToTexture=e;Th.create(this,this.__context.__renderSession)};k["openfl.display3D.textures.RectangleTexture"]=bi;bi.__name__=["openfl","display3D","textures","RectangleTexture"];bi.__super__=sc;bi.prototype=w(sc.prototype,{__class__:bi});var ci=function(a,b,c,d,e,f){sc.call(this,a);this.__width=b;this.__height=
c;this.__optimizeForRenderToTexture=e;this.__streamingLevels=f;Uh.create(this,this.__context.__renderSession)};k["openfl.display3D.textures.Texture"]=ci;ci.__name__=["openfl","display3D","textures","Texture"];ci.__super__=sc;ci.prototype=w(sc.prototype,{__class__:ci});var Sj=function(a){sc.call(this,a);Vk.create(this,this.__context.__renderSession)};k["openfl.display3D.textures.VideoTexture"]=Sj;Sj.__name__=["openfl","display3D","textures","VideoTexture"];Sj.__super__=sc;Sj.prototype=w(sc.prototype,
{__class__:Sj});var Vc=function(a,b){null==b&&(b=0);null==a&&(a="");this.message=a;this.errorID=b;this.name="Error"};k["openfl.errors.Error"]=Vc;Vc.__name__=["openfl","errors","Error"];Vc.prototype={errorID:null,message:null,name:null,toString:function(){return null!=this.message?this.message:"Error"},__class__:Vc};var Ud=function(a){null==a&&(a="");Vc.call(this,a);this.name="IOError"};k["openfl.errors.IOError"]=Ud;Ud.__name__=["openfl","errors","IOError"];Ud.__super__=Vc;Ud.prototype=w(Vc.prototype,
{__class__:Ud});var di=function(){Ud.call(this,"End of file was encountered");this.name="EOFError";this.errorID=2030};k["openfl.errors.EOFError"]=di;di.__name__=["openfl","errors","EOFError"];di.__super__=Ud;di.prototype=w(Ud.prototype,{__class__:di});var Ie=function(a){null==a&&(a="");Vc.call(this,a,0);this.name="IllegalOperationError"};k["openfl.errors.IllegalOperationError"]=Ie;Ie.__name__=["openfl","errors","IllegalOperationError"];Ie.__super__=Vc;Ie.prototype=w(Vc.prototype,{__class__:Ie});var Lg=
function(a){null==a&&(a="");Vc.call(this,a,0);this.name="TypeError"};k["openfl.errors.TypeError"]=Lg;Lg.__name__=["openfl","errors","TypeError"];Lg.__super__=Vc;Lg.prototype=w(Vc.prototype,{__class__:Lg});var R=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);this.type=a;this.bubbles=b;this.cancelable=c;this.eventPhase=2};k["openfl.events.Event"]=R;R.__name__=["openfl","events","Event"];R.prototype={bubbles:null,cancelable:null,currentTarget:null,eventPhase:null,target:null,type:null,__isCanceled:null,
__isCanceledNow:null,__preventDefault:null,isDefaultPrevented:function(){return this.__preventDefault},preventDefault:function(){this.cancelable&&(this.__preventDefault=!0)},__class__:R};var fg=function(a,b,c,d){null==d&&(d=!1);null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.activating=d};k["openfl.events.ActivityEvent"]=fg;fg.__name__=["openfl","events","ActivityEvent"];fg.__super__=R;fg.prototype=w(R.prototype,{activating:null,__class__:fg});var Ke=function(a,b,c,d){null==d&&(d="");null==
c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.text=d};k["openfl.events.TextEvent"]=Ke;Ke.__name__=["openfl","events","TextEvent"];Ke.__super__=R;Ke.prototype=w(R.prototype,{text:null,__class__:Ke});var Hc=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d="");null==c&&(c=!1);null==b&&(b=!1);Ke.call(this,a,b,c,d);this.errorID=e};k["openfl.events.ErrorEvent"]=Hc;Hc.__name__=["openfl","events","ErrorEvent"];Hc.__super__=Ke;Hc.prototype=w(Ke.prototype,{errorID:null,__class__:Hc});var Gg=function(a){this.list=
a;this.index=a.length};k["openfl.events._EventDispatcher.DispatchIterator"]=Gg;Gg.__name__=["openfl","events","_EventDispatcher","DispatchIterator"];Gg.prototype={active:null,index:null,isCopy:null,list:null,copy:function(){this.isCopy||(this.list=this.list.slice(),this.isCopy=!0)},hasNext:function(){return this.index<this.list.length?!0:this.active=!1},next:function(){return this.list[this.index++]},remove:function(a,b){if(this.active)if(this.isCopy){b=this.index;for(var c=this.list.length;b<c;){var d=
b++;if(this.list[d]==a){this.list.splice(d,1);break}}}else b<this.index&&this.index--},reset:function(a){this.list=a;this.active=!0;this.isCopy=!1;this.index=0},__class__:Gg};var Fg=function(a,b,c){this.callback=a;this.useCapture=b;this.priority=c};k["openfl.events._EventDispatcher.Listener"]=Fg;Fg.__name__=["openfl","events","_EventDispatcher","Listener"];Fg.prototype={callback:null,priority:null,useCapture:null,match:function(a,b){return C.compareMethods(this.callback,a)?this.useCapture==b:!1},
__class__:Fg};var ug=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=!1);null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.keyCode=f;this.shiftKey=e;this.relatedObject=d};k["openfl.events.FocusEvent"]=ug;ug.__name__=["openfl","events","FocusEvent"];ug.__super__=R;ug.prototype=w(R.prototype,{keyCode:null,relatedObject:null,shiftKey:null,__class__:ug});var Rf=function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=!1);null==c&&(c=!1);null==b&&(b=!1);fg.call(this,a,b,c);this.fullScreen=d;this.interactive=
e};k["openfl.events.FullScreenEvent"]=Rf;Rf.__name__=["openfl","events","FullScreenEvent"];Rf.__super__=fg;Rf.prototype=w(fg.prototype,{fullScreen:null,interactive:null,__class__:Rf});var vg=function(a,b,c,d){null==c&&(c=!1);null==b&&(b=!0);R.call(this,a,b,c);this.device=d};k["openfl.events.GameInputEvent"]=vg;vg.__name__=["openfl","events","GameInputEvent"];vg.__super__=R;vg.prototype=w(R.prototype,{device:null,__class__:vg});var ei=function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=
!1);null==b&&(b=!1);this.status=d;this.redirected=e;R.call(this,a,b,c)};k["openfl.events.HTTPStatusEvent"]=ei;ei.__name__=["openfl","events","HTTPStatusEvent"];ei.__super__=R;ei.prototype=w(R.prototype,{redirected:null,responseHeaders:null,responseURL:null,status:null,__class__:ei});var xg=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d="");null==c&&(c=!1);null==b&&(b=!0);Hc.call(this,a,b,c,d,e)};k["openfl.events.IOErrorEvent"]=xg;xg.__name__=["openfl","events","IOErrorEvent"];xg.__super__=Hc;xg.prototype=
w(Hc.prototype,{__class__:xg});var ai=function(a,b,c,d,e,f,m,h,q,g,k){null==k&&(k=!1);null==g&&(g=!1);null==q&&(q=!1);null==h&&(h=!1);null==m&&(m=!1);null==e&&(e=0);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.charCode=d;this.keyCode=e;this.keyLocation=null!=f?f:0;this.ctrlKey=m;this.altKey=h;this.shiftKey=q;this.controlKey=g;this.commandKey=k};k["openfl.events.KeyboardEvent"]=ai;ai.__name__=["openfl","events","KeyboardEvent"];ai.__super__=R;ai.prototype=w(R.prototype,{altKey:null,
charCode:null,ctrlKey:null,commandKey:null,controlKey:null,keyCode:null,keyLocation:null,shiftKey:null,__class__:ai});var Fa=function(a,b,c,d,e,f,m,h,q,g,k,l,n){null==n&&(n=0);null==l&&(l=!1);null==k&&(k=0);null==g&&(g=!1);null==q&&(q=!1);null==h&&(h=!1);null==m&&(m=!1);null==e&&(e=0);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!0);R.call(this,a,b,c);this.shiftKey=q;this.altKey=h;this.ctrlKey=m;this.bubbles=b;this.relatedObject=f;this.delta=k;this.localX=d;this.localY=e;this.buttonDown=g;this.commandKey=
l;this.clickCount=n;this.isRelatedObjectInaccessible=!1;this.stageY=this.stageX=NaN};k["openfl.events.MouseEvent"]=Fa;Fa.__name__=["openfl","events","MouseEvent"];Fa.__create=function(a,b,c,d,e,f,m){null==m&&(m=0);a=new Fa(a,!0,!1,e.x,e.y,null,Fa.__ctrlKey,Fa.__altKey,Fa.__shiftKey,Fa.__buttonDown,m,Fa.__commandKey);a.stageX=c;a.stageY=d;a.target=f;return a};Fa.__super__=R;Fa.prototype=w(R.prototype,{altKey:null,buttonDown:null,commandKey:null,clickCount:null,ctrlKey:null,delta:null,isRelatedObjectInaccessible:null,
localX:null,localY:null,relatedObject:null,shiftKey:null,stageX:null,stageY:null,__class__:Fa});var pe=function(a,b,c,d){null==c&&(c=!1);null==b&&(b=!1);this.info=d;R.call(this,a,b,c)};k["openfl.events.NetStatusEvent"]=pe;pe.__name__=["openfl","events","NetStatusEvent"];pe.__super__=R;pe.prototype=w(R.prototype,{info:null,__class__:pe});var yf=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c);this.bytesLoaded=d;this.bytesTotal=e};k["openfl.events.ProgressEvent"]=
yf;yf.__name__=["openfl","events","ProgressEvent"];yf.__super__=R;yf.prototype=w(R.prototype,{bytesLoaded:null,bytesTotal:null,__class__:yf});var fi=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d="");null==c&&(c=!1);null==b&&(b=!1);Hc.call(this,a,b,c,d,e)};k["openfl.events.SecurityErrorEvent"]=fi;fi.__name__=["openfl","events","SecurityErrorEvent"];fi.__super__=Hc;fi.prototype=w(Hc.prototype,{__class__:fi});var qe=function(a,b,c){null==c&&(c=!1);null==b&&(b=!1);R.call(this,a,b,c)};k["openfl.events.TimerEvent"]=
qe;qe.__name__=["openfl","events","TimerEvent"];qe.__super__=R;qe.prototype=w(R.prototype,{__class__:qe});var Eb=function(a,b,c,d,e,f,m,h,q,g,k,l,n,p,r,t,u,x,v,w){null==t&&(t=!1);null==r&&(r=!1);null==p&&(p=!1);null==n&&(n=!1);null==l&&(l=!1);null==g&&(g=0);null==q&&(q=0);null==h&&(h=0);null==m&&(m=0);null==f&&(f=0);null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);null==b&&(b=!0);R.call(this,a,b,c);this.touchPointID=d;this.isPrimaryTouchPoint=e;this.localX=f;this.localY=m;this.sizeX=h;this.sizeY=q;
this.pressure=g;this.relatedObject=k;this.ctrlKey=l;this.altKey=n;this.shiftKey=p;this.commandKey=r;this.controlKey=t;this.stageY=this.stageX=NaN};k["openfl.events.TouchEvent"]=Eb;Eb.__name__=["openfl","events","TouchEvent"];Eb.__create=function(a,b,c,d,e,f){a=new Eb(a,!0,!1,0,!0,e.x,e.y,1,1,1);a.stageX=c;a.stageY=d;a.target=f;return a};Eb.__super__=R;Eb.prototype=w(R.prototype,{altKey:null,commandKey:null,controlKey:null,ctrlKey:null,isPrimaryTouchPoint:null,localX:null,localY:null,pressure:null,
relatedObject:null,shiftKey:null,sizeX:null,sizeY:null,stageX:null,stageY:null,touchPointID:null,__class__:Eb});var $h=function(a,b,c,d){null==c&&(c=!0);null==b&&(b=!0);Hc.call(this,a,b,c);this.error=d};k["openfl.events.UncaughtErrorEvent"]=$h;$h.__name__=["openfl","events","UncaughtErrorEvent"];$h.__super__=Hc;$h.prototype=w(Hc.prototype,{error:null,__class__:$h});var Yh=function(){ca.call(this)};k["openfl.events.UncaughtErrorEvents"]=Yh;Yh.__name__=["openfl","events","UncaughtErrorEvents"];Yh.__super__=
ca;Yh.prototype=w(ca.prototype,{__class__:Yh});var sb=function(){this.__leftExtension=this.__bottomExtension=0;this.__needSecondBitmapData=!0;this.__numShaderPasses=0;this.__preserveObject=!1;this.__topExtension=this.__rightExtension=0};k["openfl.filters.BitmapFilter"]=sb;sb.__name__=["openfl","filters","BitmapFilter"];sb.prototype={__bottomExtension:null,__leftExtension:null,__needSecondBitmapData:null,__numShaderPasses:null,__preserveObject:null,__renderDirty:null,__rightExtension:null,__topExtension:null,
__applyFilter:function(a,b,c,d){return b},__class__:sb};var Gh=function(a,b,c){null==c&&(c=1);null==b&&(b=4);null==a&&(a=4);sb.call(this);this.set_blurX(a);this.set_blurY(b);this.set_quality(c);this.__needSecondBitmapData=!0;this.__preserveObject=!1};k["openfl.filters.BlurFilter"]=Gh;Gh.__name__=["openfl","filters","BlurFilter"];Gh.__super__=sb;Gh.prototype=w(sb.prototype,{blurX:null,blurY:null,quality:null,horizontalPasses:null,verticalPasses:null,__applyFilter:function(a,b,c,d){return lb.gaussianBlur(a.image,
b.image,c.__toLimeRectangle(),d.__toLimeVector2(),this.blurX,this.blurY,this.quality)==a.image?a:b},set_blurX:function(a){a!=this.blurX&&(this.blurX=a,this.__renderDirty=!0,this.__rightExtension=this.__leftExtension=0<a?Math.ceil(a):0);return a},set_blurY:function(a){a!=this.blurY&&(this.blurY=a,this.__renderDirty=!0,this.__bottomExtension=this.__topExtension=0<a?Math.ceil(a):0);return a},set_quality:function(a){this.horizontalPasses=0>=this.blurX?0:Math.round(a/4*this.blurX)+1;this.verticalPasses=
0>=this.blurY?0:Math.round(a/4*this.blurY)+1;this.__numShaderPasses=this.horizontalPasses+this.verticalPasses;a!=this.quality&&(this.__renderDirty=!0);return this.quality=a},__class__:Gh,__properties__:{set_quality:"set_quality",set_blurY:"set_blurY",set_blurX:"set_blurX"}});var Hh=function(a){sb.call(this);this.set_matrix(a);this.__numShaderPasses=0;this.__needSecondBitmapData=!1};k["openfl.filters.ColorMatrixFilter"]=Hh;Hh.__name__=["openfl","filters","ColorMatrixFilter"];Hh.__super__=sb;Hh.prototype=
w(sb.prototype,{matrix:null,__applyFilter:function(a,b,c,d){var e=b.image,f=a.image;ha.convertToData(e);ha.convertToData(f);var m=e.get_data(),h=f.get_data(),q=u["int"](d.x-c.x);d=u["int"](d.y-c.y);b=4*b.width;var g=4*a.width,k=e.buffer.format,l=f.buffer.format;e=e.buffer.premultiplied;f=f.buffer.premultiplied;for(var n,p=0,r,t,x=u["int"](c.y),v=u["int"](c.height);x<v;)for(var w=x++,A=u["int"](c.x),B=u["int"](c.width);A<B;){t=A++;r=w*b+4*t;t=(w+q)*g+4*(t+d);switch(k){case 0:n=(m[r]&255)<<24|(m[r+
1]&255)<<16|(m[r+2]&255)<<8|m[r+3]&255;break;case 1:n=(m[r+1]&255)<<24|(m[r+2]&255)<<16|(m[r+3]&255)<<8|m[r]&255;break;case 2:n=(m[r+2]&255)<<24|(m[r+1]&255)<<16|(m[r]&255)<<8|m[r+3]&255}e&&0!=(n&255)&&255!=(n&255)&&(E.unmult=255/(n&255),n=(E.__clamp[Math.round((n>>>24&255)*E.unmult)]&255)<<24|(E.__clamp[Math.round((n>>>16&255)*E.unmult)]&255)<<16|(E.__clamp[Math.round((n>>>8&255)*E.unmult)]&255)<<8|n&255);0==(n&255)?p=0:(p=(u["int"](this.matrix[0]*(n>>>24&255)+this.matrix[1]*(n>>>16&255)+this.matrix[2]*
(n>>>8&255)+this.matrix[3]*(n&255)+this.matrix[4])&255)<<24|(p>>>16&255)<<16|(p>>>8&255)<<8|p&255,r=u["int"](this.matrix[5]*(n>>>24&255)+this.matrix[6]*(n>>>16&255)+this.matrix[7]*(n>>>8&255)+this.matrix[8]*(n&255)+this.matrix[9]),p=(p>>>24&255)<<24|(r&255)<<16|(p>>>8&255)<<8|p&255,r=u["int"](this.matrix[10]*(n>>>24&255)+this.matrix[11]*(n>>>16&255)+this.matrix[12]*(n>>>8&255)+this.matrix[13]*(n&255)+this.matrix[14]),p=(p>>>24&255)<<24|(p>>>16&255)<<16|(r&255)<<8|p&255,r=u["int"](this.matrix[15]*
(n>>>24&255)+this.matrix[16]*(n>>>16&255)+this.matrix[17]*(n>>>8&255)+this.matrix[18]*(n&255)+this.matrix[19]),p=(p>>>24&255)<<24|(p>>>16&255)<<16|(p>>>8&255)<<8|r&255);f&&(0==(p&255)?0!=p&&(p=0):255!=(p&255)&&(E.a16=E.__alpha16[p&255],p=((p>>>24&255)*E.a16>>16&255)<<24|((p>>>16&255)*E.a16>>16&255)<<16|((p>>>8&255)*E.a16>>16&255)<<8|p&255));switch(l){case 0:h[t]=p>>>24&255;h[t+1]=p>>>16&255;h[t+2]=p>>>8&255;h[t+3]=p&255;break;case 1:h[t]=p&255;h[t+1]=p>>>24&255;h[t+2]=p>>>16&255;h[t+3]=p>>>8&255;
break;case 2:h[t]=p>>>8&255,h[t+1]=p>>>16&255,h[t+2]=p>>>24&255,h[t+3]=p&255}}a.image.dirty=!0;return a},set_matrix:function(a){null==a&&(a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]);return this.matrix=a},__class__:Hh,__properties__:{set_matrix:"set_matrix"}});var Ih=function(a,b,c,d,e,f,m,h,q,g,k){null==k&&(k=!1);null==g&&(g=!1);null==q&&(q=!1);null==h&&(h=1);null==m&&(m=1);null==f&&(f=4);null==e&&(e=4);null==d&&(d=1);null==c&&(c=0);null==b&&(b=45);null==a&&(a=4);this.distance=4;this.blurX=this.blurY=
0;this.angle=45;sb.call(this);this.__offsetY=this.__offsetX=0;this.__updateSize();this.set_distance(a);this.set_angle(b);this.set_color(c);this.set_alpha(d);this.set_blurX(e);this.set_blurY(f);this.set_strength(m);this.set_quality(h);this.set_inner(q);this.set_knockout(g);this.set_hideObject(k);this.__needSecondBitmapData=!0;this.__preserveObject=!k};k["openfl.filters.DropShadowFilter"]=Ih;Ih.__name__=["openfl","filters","DropShadowFilter"];Ih.__super__=sb;Ih.prototype=w(sb.prototype,{alpha:null,
angle:null,blurX:null,blurY:null,color:null,distance:null,hideObject:null,inner:null,knockout:null,quality:null,strength:null,__offsetX:null,__offsetY:null,__applyFilter:function(a,b,c,d){b.colorTransform(b.rect,new ib(0,0,0,1,this.color>>16&255,this.color>>8&255,this.color&255,this.color>>24&255));d.x+=this.__offsetX;d.y+=this.__offsetY;return lb.gaussianBlur(a.image,b.image,c.__toLimeRectangle(),d.__toLimeVector2(),this.blurX,this.blurY,this.quality,this.strength)==a.image?a:b},__updateSize:function(){this.__offsetX=
u["int"](this.distance*Math.cos(this.angle*Math.PI/180));this.__offsetY=u["int"](this.distance*Math.sin(this.angle*Math.PI/180));this.__topExtension=Math.ceil((0>this.__offsetY?-this.__offsetY:0)+this.blurY);this.__bottomExtension=Math.ceil((0<this.__offsetY?this.__offsetY:0)+this.blurY);this.__leftExtension=Math.ceil((0>this.__offsetX?-this.__offsetX:0)+this.blurX);this.__rightExtension=Math.ceil((0<this.__offsetX?this.__offsetX:0)+this.blurX)},set_alpha:function(a){a!=this.alpha&&(this.__renderDirty=
!0);return this.alpha=a},set_angle:function(a){a!=this.angle&&(this.angle=a,this.__renderDirty=!0,this.__updateSize());return a},set_blurX:function(a){a!=this.blurX&&(this.blurX=a,this.__renderDirty=!0,this.__updateSize());return a},set_blurY:function(a){a!=this.blurY&&(this.blurY=a,this.__renderDirty=!0,this.__updateSize());return a},set_color:function(a){a!=this.color&&(this.__renderDirty=!0);return this.color=a},set_distance:function(a){a!=this.distance&&(this.distance=a,this.__renderDirty=!0,
this.__updateSize());return a},set_hideObject:function(a){a!=this.hideObject&&(this.__renderDirty=!0,this.__preserveObject=!a);return this.hideObject=a},set_inner:function(a){a!=this.inner&&(this.__renderDirty=!0);return this.inner=a},set_knockout:function(a){a!=this.knockout&&(this.__renderDirty=!0);return this.knockout=a},set_quality:function(a){a!=this.quality&&(this.__renderDirty=!0);return this.quality=a},set_strength:function(a){a!=this.strength&&(this.__renderDirty=!0);return this.strength=
a},__class__:Ih,__properties__:{set_strength:"set_strength",set_quality:"set_quality",set_knockout:"set_knockout",set_inner:"set_inner",set_hideObject:"set_hideObject",set_distance:"set_distance",set_color:"set_color",set_blurY:"set_blurY",set_blurX:"set_blurX",set_angle:"set_angle",set_alpha:"set_alpha"}});var Fe=function(a,b,c,d,e,f,m,h){null==h&&(h=!1);null==m&&(m=!1);null==f&&(f=1);null==e&&(e=2);null==d&&(d=6);null==c&&(c=6);null==b&&(b=1);null==a&&(a=16711680);sb.call(this);this.set_color(a);
this.set_alpha(b);this.set_blurX(c);this.set_blurY(d);this.set_strength(e);this.set_quality(f);this.set_inner(m);this.set_knockout(h);this.__preserveObject=this.__needSecondBitmapData=!0};k["openfl.filters.GlowFilter"]=Fe;Fe.__name__=["openfl","filters","GlowFilter"];Fe.__super__=sb;Fe.prototype=w(sb.prototype,{alpha:null,blurX:null,blurY:null,color:null,inner:null,knockout:null,quality:null,strength:null,horizontalPasses:null,verticalPasses:null,__applyFilter:function(a,b,c,d){b.colorTransform(b.rect,
new ib(0,0,0,1,this.color>>16&255,this.color>>8&255,this.color&255,255*this.alpha));return lb.gaussianBlur(a.image,b.image,c.__toLimeRectangle(),d.__toLimeVector2(),this.blurX,this.blurY,this.quality,this.strength)==a.image?a:b},set_alpha:function(a){a!=this.alpha&&(this.__renderDirty=!0);return this.alpha=a},set_blurX:function(a){a!=this.blurX&&(this.blurX=a,this.__renderDirty=!0,this.__rightExtension=this.__leftExtension=0<a?Math.ceil(a):0);return a},set_blurY:function(a){a!=this.blurY&&(this.blurY=
a,this.__renderDirty=!0,this.__bottomExtension=this.__topExtension=0<a?Math.ceil(a):0);return a},set_color:function(a){a!=this.color&&(this.__renderDirty=!0);return this.color=a},set_inner:function(a){a!=this.inner&&(this.__renderDirty=!0);return this.inner=a},set_knockout:function(a){a!=this.knockout&&(this.__renderDirty=!0);return this.knockout=a},set_quality:function(a){this.horizontalPasses=0>=this.blurX?0:Math.round(a/4*this.blurX)+1;this.verticalPasses=0>=this.blurY?0:Math.round(a/4*this.blurY)+
1;this.__numShaderPasses=this.horizontalPasses+this.verticalPasses;a!=this.quality&&(this.__renderDirty=!0);return this.quality=a},set_strength:function(a){a!=this.strength&&(this.__renderDirty=!0);return this.strength=a},__class__:Fe,__properties__:{set_strength:"set_strength",set_quality:"set_quality",set_knockout:"set_knockout",set_inner:"set_inner",set_color:"set_color",set_blurY:"set_blurY",set_blurX:"set_blurX",set_alpha:"set_alpha"}});var fl=function(){};k["openfl.geom.Matrix3D"]=fl;fl.__name__=
["openfl","geom","Matrix3D"];fl.prototype={__class__:fl};var za=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};k["openfl.geom.Point"]=za;za.__name__=["openfl","geom","Point"];za.distance=function(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)};za.interpolate=function(a,b,c){return new za(b.x+c*(a.x-b.x),b.y+c*(a.y-b.y))};za.polar=function(a,b){return new za(a*Math.cos(b),a*Math.sin(b))};za.prototype={x:null,y:null,copyFrom:function(a){this.x=a.x;this.y=a.y},setTo:function(a,
b){this.x=a;this.y=b},__toLimeVector2:function(){null==za.__limeVector2&&(za.__limeVector2=new ye);za.__limeVector2.setTo(this.x,this.y);return za.__limeVector2},__class__:za};var X=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d};k["openfl.geom.Rectangle"]=X;X.__name__=["openfl","geom","Rectangle"];X.prototype={height:null,width:null,x:null,y:null,clone:function(){return new X(this.x,this.y,this.width,this.height)},contains:function(a,
b){return a>=this.x&&b>=this.y&&a<this.get_right()?b<this.get_bottom():!1},containsPoint:function(a){return this.contains(a.x,a.y)},copyFrom:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height},equals:function(a){return a==this?!0:null!=a&&this.x==a.x&&this.y==a.y&&this.width==a.width?this.height==a.height:!1},intersects:function(a){var b=this.x<a.x?a.x:this.x;if((this.get_right()>a.get_right()?a.get_right():this.get_right())<=b)return!1;b=this.y<a.y?a.y:this.y;return(this.get_bottom()>
a.get_bottom()?a.get_bottom():this.get_bottom())>b},setTo:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},__contract:function(a,b,c,d){if(0!=this.width||0!=this.height){var e=0,f=0,m=0,h=0;this.x<a&&(e=a-this.x);this.y<b&&(f=b-this.y);this.get_right()>a+c&&(m=a+c-this.get_right());this.get_bottom()>b+d&&(h=b+d-this.get_bottom());this.x+=e;this.y+=f;this.width+=m-e;this.height+=h-f}},__expand:function(a,b,c,d){if(0==this.width&&0==this.height)this.x=a,this.y=b,this.width=c,this.height=
d;else{var e=this.get_right(),f=this.get_bottom();this.x>a&&(this.x=a,this.width=e-a);this.y>b&&(this.y=b,this.height=f-b);e<a+c&&(this.width=a+c-this.x);f<b+d&&(this.height=b+d-this.y)}},__toLimeRectangle:function(){null==X.__limeRectangle&&(X.__limeRectangle=new Od);X.__limeRectangle.setTo(this.x,this.y,this.width,this.height);return X.__limeRectangle},__transform:function(a,b){var c=b.a*this.x+b.c*this.y,d=c,e=b.b*this.x+b.d*this.y,f=e,m=b.a*(this.x+this.width)+b.c*this.y,h=b.b*(this.x+this.width)+
b.d*this.y;m<c&&(c=m);h<e&&(e=h);m>d&&(d=m);h>f&&(f=h);m=b.a*(this.x+this.width)+b.c*(this.y+this.height);h=b.b*(this.x+this.width)+b.d*(this.y+this.height);m<c&&(c=m);h<e&&(e=h);m>d&&(d=m);h>f&&(f=h);m=b.a*this.x+b.c*(this.y+this.height);h=b.b*this.x+b.d*(this.y+this.height);m<c&&(c=m);h<e&&(e=h);m>d&&(d=m);h>f&&(f=h);a.setTo(c+b.tx,e+b.ty,d-c,f-e)},get_bottom:function(){return this.y+this.height},get_right:function(){return this.x+this.width},__class__:X,__properties__:{get_right:"get_right",get_bottom:"get_bottom"}};
var wi=function(a){this.__colorTransform=new ib;this.concatenatedColorTransform=new ib;this.pixelBounds=new X;this.__displayObject=a;this.__hasMatrix=!0};k["openfl.geom.Transform"]=wi;wi.__name__=["openfl","geom","Transform"];wi.prototype={concatenatedColorTransform:null,pixelBounds:null,__colorTransform:null,__displayObject:null,__hasMatrix:null,__hasMatrix3D:null,get_colorTransform:function(){return this.__colorTransform},set_colorTransform:function(a){this.__colorTransform.__equals(a)||(this.__colorTransform=
a,null!=a&&this.__displayObject.set_alpha(a.alphaMultiplier),this.__displayObject.__setRenderDirty());return this.__colorTransform},set_matrix:function(a){if(null==a)return this.__hasMatrix=!1,null;this.__hasMatrix=!0;this.__hasMatrix3D=!1;null!=this.__displayObject&&this.__setTransform(a.a,a.b,a.c,a.d,a.tx,a.ty);return a},__setTransform:function(a,b,c,d,e,f){if(null!=this.__displayObject){var m=0==b?a:Math.sqrt(a*a+b*b);var h=0==c?a:Math.sqrt(c*c+d*d);this.__displayObject.__scaleX=m;this.__displayObject.__scaleY=
h;m=180/Math.PI*Math.atan2(d,c)-90;m!=this.__displayObject.__rotation&&(this.__displayObject.__rotation=m,m*=Math.PI/180,this.__displayObject.__rotationSine=Math.sin(m),this.__displayObject.__rotationCosine=Math.cos(m));this.__displayObject.__transform.a=a;this.__displayObject.__transform.b=b;this.__displayObject.__transform.c=c;this.__displayObject.__transform.d=d;this.__displayObject.__transform.tx=e;this.__displayObject.__transform.ty=f;this.__displayObject.__setTransformDirty()}},__class__:wi,
__properties__:{set_matrix:"set_matrix",set_colorTransform:"set_colorTransform",get_colorTransform:"get_colorTransform"}};var gl=function(){};k["openfl.geom.Vector3D"]=gl;gl.__name__=["openfl","geom","Vector3D"];gl.prototype={__class__:gl};var Hl=function(){};k["openfl.media.ID3Info"]=Hl;Hl.__name__=["openfl","media","ID3Info"];var Tj=function(a,b){ca.call(this,this);this.bytesTotal=this.bytesLoaded=0;this.isBuffering=!1;this.url=null;null!=a&&this.load(a,b)};k["openfl.media.Sound"]=Tj;Tj.__name__=
["openfl","media","Sound"];Tj.__super__=ca;Tj.prototype=w(ca.prototype,{bytesLoaded:null,bytesTotal:null,isBuffering:null,url:null,__buffer:null,load:function(a,b){var c=this;this.url=a.url;a=aa.getLibrary("default");if(null!=a&&a.cachedAudioBuffers.exists(this.url))this.AudioBuffer_onURLLoad(a.cachedAudioBuffers.get(this.url));else vb.loadFromFile(this.url).onComplete(l(this,this.AudioBuffer_onURLLoad)).onError(function(a){c.AudioBuffer_onURLLoad(null)})},AudioBuffer_onURLLoad:function(a){null==
a?this.dispatchEvent(new xg("ioError")):(this.__buffer=a,this.dispatchEvent(new R("complete")))},__class__:Tj});var Uj=function(a,b){ca.call(this,this);this.rightPeak=this.leftPeak=1;this.__soundTransform=null!=b?b:new Xe;null!=a&&(this.__source=a,this.__source.onComplete.add(l(this,this.source_onComplete)),this.__isValid=!0,this.__source.play());zd.__registerSoundChannel(this)};k["openfl.media.SoundChannel"]=Uj;Uj.__name__=["openfl","media","SoundChannel"];Uj.__super__=ca;Uj.prototype=w(ca.prototype,
{leftPeak:null,rightPeak:null,__isValid:null,__soundTransform:null,__source:null,stop:function(){zd.__unregisterSoundChannel(this);this.__isValid&&(this.__source.stop(),this.__dispose())},__dispose:function(){this.__isValid&&(this.__source.onComplete.remove(l(this,this.source_onComplete)),this.__source.dispose(),this.__isValid=!1)},__updateTransform:function(){this.set_soundTransform(this.get_soundTransform())},get_position:function(){return this.__isValid?this.__source.get_currentTime()+this.__source.offset:
0},set_position:function(a){if(!this.__isValid)return 0;this.__source.set_currentTime(u["int"](a)-this.__source.offset);return a},get_soundTransform:function(){return this.__soundTransform.clone()},set_soundTransform:function(a){if(null!=a){this.__soundTransform.pan=a.pan;this.__soundTransform.volume=a.volume;var b=zd.__soundTransform.pan+this.__soundTransform.pan;-1>b&&(b=-1);1<b&&(b=1);var c=zd.__soundTransform.volume*this.__soundTransform.volume;this.__isValid&&(this.__source.set_gain(c),c=this.__source.get_position(),
c.x=b,c.z=-1*Math.sqrt(1-Math.pow(b,2)),this.__source.set_position(c))}return a},source_onComplete:function(){zd.__unregisterSoundChannel(this);this.__dispose();this.dispatchEvent(new R("soundComplete"))},__class__:Uj,__properties__:{set_soundTransform:"set_soundTransform",get_soundTransform:"get_soundTransform",set_position:"set_position",get_position:"get_position"}});var Il=function(){};k["openfl.media.SoundLoaderContext"]=Il;Il.__name__=["openfl","media","SoundLoaderContext"];var Xe=function(a,
b){null==b&&(b=0);null==a&&(a=1);this.volume=a;this.pan=b;this.rightToRight=this.rightToLeft=this.leftToRight=this.leftToLeft=0};k["openfl.media.SoundTransform"]=Xe;Xe.__name__=["openfl","media","SoundTransform"];Xe.prototype={leftToLeft:null,leftToRight:null,pan:null,rightToLeft:null,rightToRight:null,volume:null,clone:function(){return new Xe(this.volume,this.pan)},__class__:Xe};var zd=function(){};k["openfl.media.SoundMixer"]=zd;zd.__name__=["openfl","media","SoundMixer"];zd.__registerSoundChannel=
function(a){zd.__soundChannels.push(a)};zd.__unregisterSoundChannel=function(a){P.remove(zd.__soundChannels,a)};var Vj=function(){ca.call(this)};k["openfl.net.NetConnection"]=Vj;Vj.__name__=["openfl","net","NetConnection"];Vj.__super__=ca;Vj.prototype=w(ca.prototype,{__class__:Vj});var Wj=function(a,b){ca.call(this);this.__connection=a;this.__video=M.get_document().createElement("video");this.__video.setAttribute("playsinline","");this.__video.setAttribute("webkit-playsinline","");this.__video.addEventListener("error",
l(this,this.video_onError),!1);this.__video.addEventListener("waiting",l(this,this.video_onWaiting),!1);this.__video.addEventListener("ended",l(this,this.video_onEnd),!1);this.__video.addEventListener("pause",l(this,this.video_onPause),!1);this.__video.addEventListener("seeking",l(this,this.video_onSeeking),!1);this.__video.addEventListener("playing",l(this,this.video_onPlaying),!1);this.__video.addEventListener("timeupdate",l(this,this.video_onTimeUpdate),!1);this.__video.addEventListener("loadstart",
l(this,this.video_onLoadStart),!1);this.__video.addEventListener("stalled",l(this,this.video_onStalled),!1);this.__video.addEventListener("durationchanged",l(this,this.video_onDurationChanged),!1);this.__video.addEventListener("canplay",l(this,this.video_onCanPlay),!1);this.__video.addEventListener("canplaythrough",l(this,this.video_onCanPlayThrough),!1);this.__video.addEventListener("loadedmetadata",l(this,this.video_onLoadMetaData),!1)};k["openfl.net.NetStream"]=Wj;Wj.__name__=["openfl","net","NetStream"];
Wj.__super__=ca;Wj.prototype=w(ca.prototype,{client:null,time:null,__connection:null,__video:null,__playStatus:function(a){if(null!=this.client)try{var b=this.client.onPlayStatus;b({code:a,duration:this.__video.duration,position:this.__video.currentTime,speed:this.__video.playbackRate,start:this.__video.startTime})}catch(c){Y.lastException=c}},video_onCanPlay:function(a){this.__playStatus("NetStream.Play.canplay")},video_onCanPlayThrough:function(a){this.__playStatus("NetStream.Play.canplaythrough")},
video_onDurationChanged:function(a){this.__playStatus("NetStream.Play.durationchanged")},video_onEnd:function(a){this.__connection.dispatchEvent(new pe("netStatus",!1,!1,{code:"NetStream.Play.Stop"}));this.__playStatus("NetStream.Play.Complete")},video_onError:function(a){this.__connection.dispatchEvent(new pe("netStatus",!1,!1,{code:"NetStream.Play.Stop"}));this.__playStatus("NetStream.Play.error")},video_onLoadMetaData:function(a){if(null!=this.client)try{var b=this.client.onMetaData;b({width:this.__video.videoWidth,
height:this.__video.videoHeight,duration:this.__video.duration})}catch(c){Y.lastException=c}},video_onLoadStart:function(a){this.__playStatus("NetStream.Play.loadstart")},video_onPause:function(a){this.__playStatus("NetStream.Play.pause")},video_onPlaying:function(a){this.__connection.dispatchEvent(new pe("netStatus",!1,!1,{code:"NetStream.Play.Start"}));this.__playStatus("NetStream.Play.playing")},video_onSeeking:function(a){this.__playStatus("NetStream.Play.seeking")},video_onStalled:function(a){this.__playStatus("NetStream.Play.stalled")},
video_onTimeUpdate:function(a){this.time=this.__video.currentTime;this.__playStatus("NetStream.Play.timeupdate")},video_onWaiting:function(a){this.__playStatus("NetStream.Play.waiting")},__class__:Wj});var yb=function(){ca.call(this);this.client=this;this.objectEncoding=3};k["openfl.net.SharedObject"]=yb;yb.__name__=["openfl","net","SharedObject"];yb.getLocal=function(a,b,c){c=" ~%&\\;:\"',<>?#".split("");var d=!0;if(null==a||""==a)d=!1;else for(var e=0;e<c.length;){var f=c[e];++e;if(-1<a.indexOf(f)){d=
!1;break}}if(!d)throw new K(new Vc("Error #2134: Cannot create SharedObject."));null==b&&(b=M.get_window().location.href);null==yb.__sharedObjects&&(yb.__sharedObjects=new ea,H.application.onExit.add(yb.application_onExit));c=b+"/"+a;if(!yb.__sharedObjects.exists(c)){d=new yb;d.data={};d.__localPath=b;d.__name=a;e=null;try{var m=M.getLocalStorage();null!=m&&(e=m.getItem(b+":"+a))}catch(q){Y.lastException=q}if(null!=e&&""!=e)try{var h=new Bb(e);h.setResolver({resolveEnum:Q.resolveEnum,resolveClass:yb.__resolveClass});
d.data=h.unserialize()}catch(q){Y.lastException=q}yb.__sharedObjects.set(c,d)}return yb.__sharedObjects.get(c)};yb.__resolveClass=function(a){return null!=a?(L.startsWith(a,"neash.")&&(a=L.replace(a,"neash.","openfl.")),L.startsWith(a,"native.")&&(a=L.replace(a,"native.","openfl.")),L.startsWith(a,"flash.")&&(a=L.replace(a,"flash.","openfl.")),L.startsWith(a,"openfl._v2.")&&(a=L.replace(a,"openfl._v2.","openfl.")),L.startsWith(a,"openfl._legacy.")&&(a=L.replace(a,"openfl._legacy.","openfl.")),Q.resolveClass(a)):
null};yb.application_onExit=function(a){for(a=yb.__sharedObjects.iterator();a.hasNext();)a.next().flush()};yb.__super__=ca;yb.prototype=w(ca.prototype,{client:null,data:null,objectEncoding:null,__localPath:null,__name:null,flush:function(a){if(0==C.fields(this.data).length)return 0;a=ac.run(this.data);try{var b=M.getLocalStorage();null!=b&&(b.removeItem(this.__localPath+":"+this.__name),b.setItem(this.__localPath+":"+this.__name,a))}catch(c){return Y.lastException=c,1}return 0},__class__:yb});var Vh=
function(a){ca.call(this);this.bytesTotal=this.bytesLoaded=0;this.dataFormat=1;null!=a&&this.load(a)};k["openfl.net.URLLoader"]=Vh;Vh.__name__=["openfl","net","URLLoader"];Vh.__super__=ca;Vh.prototype=w(ca.prototype,{bytesLoaded:null,bytesTotal:null,data:null,dataFormat:null,__httpRequest:null,load:function(a){var b=this;if(0==this.dataFormat){var c=new ch;this.__prepareRequest(c,a);c.load().onProgress(l(this,this.httpRequest_onProgress)).onError(l(this,this.httpRequest_onError)).onComplete(function(a){b.__dispatchStatus();
b.data=a;a=new R("complete");b.dispatchEvent(a)})}else c=new Hf,this.__prepareRequest(c,a),c.load().onProgress(l(this,this.httpRequest_onProgress)).onError(l(this,this.httpRequest_onError)).onComplete(function(a){b.__dispatchStatus();b.data=a;a=new R("complete");b.dispatchEvent(a)})},__dispatchStatus:function(){var a=new ei("httpStatus",!1,!1,this.__httpRequest.responseStatus);a.responseURL=this.__httpRequest.uri;var b=[];if(this.__httpRequest.enableResponseHeaders&&null!=this.__httpRequest.responseHeaders)for(var c=
0,d=this.__httpRequest.responseHeaders;c<d.length;){var e=d[c];++c;b.push(new Xj(e.name,e.value))}a.responseHeaders=b;this.dispatchEvent(a)},__prepareRequest:function(a,b){this.__httpRequest=a;this.__httpRequest.uri=b.url;switch(b.method){case "DELETE":a="DELETE";break;case "HEAD":a="HEAD";break;case "OPTIONS":a="OPTIONS";break;case "POST":a="POST";break;case "PUT":a="PUT";break;default:a="GET"}this.__httpRequest.method=a;if(null!=b.data)if(u.is(b.data,sl)){a=C.fields(b.data);for(var c=0;c<a.length;){var d=
a[c];++c;this.__httpRequest.formData.set(d,C.field(b.data,d))}}else u.is(b.data,ya)?this.__httpRequest.data=b.data:this.__httpRequest.data=ya.ofString(u.string(b.data));this.__httpRequest.contentType=b.contentType;if(null!=b.requestHeaders)for(a=0,c=b.requestHeaders;a<c.length;)d=c[a],++a,this.__httpRequest.headers.push(new Vg(d.name,d.value));this.__httpRequest.followRedirects=b.followRedirects;this.__httpRequest.timeout=u["int"](b.idleTimeout);this.__httpRequest.withCredentials=b.manageCookies;
this.__httpRequest.userAgent=b.userAgent;this.__httpRequest.enableResponseHeaders=!0},httpRequest_onError:function(a){this.__dispatchStatus();var b=403==a?new fi("securityError"):new xg("ioError");b.text=u.string(a);this.dispatchEvent(b)},httpRequest_onProgress:function(a,b){var c=new yf("progress");c.bytesLoaded=a;c.bytesTotal=b;this.dispatchEvent(c)},__class__:Vh});var Wh=function(a){null!=a&&(this.url=a);this.contentType=null;this.followRedirects=!0;this.idleTimeout=3E4;this.manageCookies=!1;this.method=
"GET";this.requestHeaders=[]};k["openfl.net.URLRequest"]=Wh;Wh.__name__=["openfl","net","URLRequest"];Wh.prototype={contentType:null,data:null,followRedirects:null,idleTimeout:null,manageCookies:null,method:null,requestHeaders:null,url:null,userAgent:null,__class__:Wh};var Xj=function(a,b){null==b&&(b="");null==a&&(a="");this.name=a;this.value=b};k["openfl.net.URLRequestHeader"]=Xj;Xj.__name__=["openfl","net","URLRequestHeader"];Xj.prototype={name:null,value:null,__class__:Xj};var sl=function(){};
k["openfl.net.URLVariables"]=sl;sl.__name__=["openfl","net","URLVariables"];var xf=function(a){this.parentDomain=null!=a?a:xf.currentDomain};k["openfl.system.ApplicationDomain"]=xf;xf.__name__=["openfl","system","ApplicationDomain"];xf.prototype={parentDomain:null,__class__:xf};var Vd=function(a){bc.call(this,a)};k["openfl.text.Font"]=Vd;Vd.__name__=["openfl","text","Font"];Vd.enumerateFonts=function(a){return Vd.__registeredFonts};Vd.fromFile=function(a){var b=new Vd;b.__fromFile(a);return b};Vd.__super__=
bc;Vd.prototype=w(bc.prototype,{get_fontName:function(){return this.name},__class__:Vd,__properties__:{get_fontName:"get_fontName"}});var wf=function(){xa.call(this);this.__graphics=new Sf(this)};k["openfl.text.StaticText"]=wf;wf.__name__=["openfl","text","StaticText"];wf.__super__=xa;wf.prototype=w(xa.prototype,{text:null,__class__:wf});var Lb=function(){this.__renderedOnCanvasWhileOnDOM=this.__forceCachedBitmapUpdate=!1;la.call(this);this.__caretIndex=-1;this.__displayAsPassword=!1;this.__graphics=
new Sf(this);this.__textEngine=new U(this);this.__layoutDirty=!0;this.__offsetY=this.__offsetX=0;this.__mouseWheelEnabled=!0;this.__text="";null==Lb.__defaultTextFormat&&(Lb.__defaultTextFormat=new dg("Times New Roman",12,0,!1,!1,!1,"","",3,0,0,0,0),Lb.__defaultTextFormat.blockIndent=0,Lb.__defaultTextFormat.bullet=!1,Lb.__defaultTextFormat.letterSpacing=0,Lb.__defaultTextFormat.kerning=!1);this.__textFormat=Lb.__defaultTextFormat.clone();var a=this.__textEngine.textFormatRanges,b=new Mf(this.__textFormat,
0,0);a.data.push(b);this.addEventListener("mouseDown",l(this,this.this_onMouseDown));this.addEventListener("focusIn",l(this,this.this_onFocusIn));this.addEventListener("focusOut",l(this,this.this_onFocusOut));this.addEventListener("keyDown",l(this,this.this_onKeyDown))};k["openfl.text.TextField"]=Lb;Lb.__name__=["openfl","text","TextField"];Lb.__interfaces__=[Oj];Lb.__super__=la;Lb.prototype=w(la.prototype,{__caretIndex:null,__cursorTimer:null,__dirty:null,__displayAsPassword:null,__inputEnabled:null,
__isHTML:null,__layoutDirty:null,__mouseWheelEnabled:null,__offsetX:null,__offsetY:null,__selectionIndex:null,__showCursor:null,__symbol:null,__text:null,__textEngine:null,__textFormat:null,__div:null,__renderedOnCanvasWhileOnDOM:null,__rawHtmlText:null,__forceCachedBitmapUpdate:null,getCharBoundaries:function(a){if(0>a||a>F.get_length(this.__text)-1)return null;this.__updateLayout();for(var b=0,c=this.__textEngine.layoutGroups;b<c.data.get_length();){var d=c.data.get(b);++b;if(a>=d.startIndex&&a<=
d.endIndex){b=d.offsetX;c=0;for(var e=a-d.startIndex;c<e;){var f=c++;b+=d.getAdvance(f)}a=d.getAdvance(a-d.startIndex);return new X(b,d.offsetY,a,d.ascent+d.descent)}}return null},getLineIndexOfChar:function(a){if(0>a||a>F.get_length(this.__text))return-1;this.__updateLayout();for(var b=0,c=this.__textEngine.layoutGroups;b<c.data.get_length();){var d=c.data.get(b);++b;if(d.startIndex<=a&&d.endIndex>=a)return d.lineIndex}return-1},getLineOffset:function(a){this.__updateLayout();if(0>a||a>this.__textEngine.numLines-
1)return-1;for(var b=0,c=this.__textEngine.layoutGroups;b<c.data.get_length();){var d=c.data.get(b);++b;if(d.lineIndex==a)return d.startIndex}return 0},replaceSelectedText:function(a){if(""!=a||this.__selectionIndex!=this.__caretIndex){var b=this.__caretIndex<this.__selectionIndex?this.__caretIndex:this.__selectionIndex,c=this.__caretIndex>this.__selectionIndex?this.__caretIndex:this.__selectionIndex;if(!(b==c&&0<this.__textEngine.maxChars&&F.get_length(this.__text)==this.__textEngine.maxChars)){b>
F.get_length(this.__text)&&(b=F.get_length(this.__text));c>F.get_length(this.__text)&&(c=F.get_length(this.__text));if(c<b){var d=c;c=b;b=d}0>b&&(b=0);this.replaceText(b,c,a);a=b+F.get_length(n.__cast(a,String));a>F.get_length(this.__text)&&(a=F.get_length(this.__text));this.setSelection(a,a)}}},replaceText:function(a,b,c){if(!(b<a||0>a||b>F.get_length(this.__text)||null==c)){this.__updateText(F.substring(this.__text,0,a)+c+F.substring(this.__text,b));b>F.get_length(this.__text)&&(b=F.get_length(this.__text));
for(var d=c.length-(b-a),e=0,f;e<this.__textEngine.textFormatRanges.data.get_length();)f=this.__textEngine.textFormatRanges.data.get(e),f.start<=a&&f.end>=b?(f.end+=d,++e):f.start>=a&&f.end<=b?(0<e?new yc(this.__textEngine.textFormatRanges.data.splice(e,1)):(f.start=0,f.end=a+c.length,++e),d-=f.end-f.start):(f.start>a&&f.start<=b&&(f.start+=d),++e);this.__layoutDirty=this.__dirty=!0;this.__setRenderDirty()}},setSelection:function(a,b){this.__selectionIndex=a;this.__caretIndex=b},__allowMouseFocus:function(){return 1==
this.__textEngine.type||this.get_tabEnabled()?!0:this.get_selectable()},__caretBeginningOfLine:function(){this.__selectionIndex==this.__caretIndex||this.__caretIndex<this.__selectionIndex?this.__caretIndex=this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex)):this.__selectionIndex=this.getLineOffset(this.getLineIndexOfChar(this.__selectionIndex))},__caretEndOfLine:function(){var a=this.__selectionIndex==this.__caretIndex?this.getLineIndexOfChar(this.__caretIndex):this.getLineIndexOfChar(u["int"](Math.max(this.__caretIndex,
this.__selectionIndex)));this.__caretIndex=a<this.__textEngine.numLines-1?this.getLineOffset(a+1)-1:F.get_length(this.__text)},__caretNextCharacter:function(){this.__caretIndex<F.get_length(this.__text)&&this.__caretIndex++},__caretNextLine:function(a,b){null==a&&(a=this.getLineIndexOfChar(this.__caretIndex));a<this.__textEngine.numLines-1?(null==b&&(b=this.__caretIndex),this.__caretIndex=this.__getCharIndexOnDifferentLine(b,a+1)):this.__caretIndex=F.get_length(this.__text)},__caretPreviousCharacter:function(){0<
this.__caretIndex&&this.__caretIndex--},__caretPreviousLine:function(a,b){null==a&&(a=this.getLineIndexOfChar(this.__caretIndex));0<a?(null==b&&(b=this.__caretIndex),this.__caretIndex=this.__getCharIndexOnDifferentLine(b,a-1)):this.__caretIndex=0},__disableInput:function(){this.__inputEnabled&&null!=this.stage&&(this.stage.window.set_enableTextEvents(!1),this.stage.window.onTextInput.remove(l(this,this.window_onTextInput)),this.stage.window.onKeyDown.remove(l(this,this.window_onKeyDown)),this.__inputEnabled=
!1,this.__stopCursorTimer())},__dispatch:function(a){if(2==a.eventPhase&&"mouseUp"==a.type){var b=this.__getGroup(this.get_mouseX(),this.get_mouseY(),!0);null!=b&&(b=b.format.url,""!=b&&(L.startsWith(b,"event:")?this.dispatchEvent(new Ke("link",!1,!1,P.substr(b,6,null))):H.getURL(new Wh(b))))}return la.prototype.__dispatch.call(this,a)},__enableInput:function(){null!=this.stage&&(this.stage.window.set_enableTextEvents(!0),this.__inputEnabled||(this.stage.window.set_enableTextEvents(!0),this.stage.window.onTextInput.has(l(this,
this.window_onTextInput))||(this.stage.window.onTextInput.add(l(this,this.window_onTextInput)),this.stage.window.onKeyDown.add(l(this,this.window_onKeyDown))),this.__inputEnabled=!0,this.__startCursorTimer()))},__fromSymbol:function(a,b){this.__symbol=b;this.set_width(b.width);this.set_height(b.height);this.__offsetX=b.x;this.__offsetY=b.y;this.set_multiline(b.multiline);this.set_wordWrap(b.wordWrap);this.set_displayAsPassword(b.password);b.border&&(this.set_border(!0),this.set_background(!0));this.set_selectable(b.selectable);
b.input&&this.set_type(1);var c=new dg;null!=b.color&&(c.color=b.color&16777215);c.size=Math.round(b.fontHeight/20);a=a.symbols.get(b.fontID);null!=a&&(c.__ascent=a.ascent/20/1024,c.__descent=a.descent/20/1024);c.font=b.fontName;a=!1;var d=c.font;if(null==d)a=!0;else switch(d){case "":case "_sans":case "_serif":case "_typewriter":a=!0;break;default:d=0;for(var e=Vd.enumerateFonts();d<e.length;){var f=e[d];++d;if(f.get_fontName()==c.font){a=!0;break}}}if(!a)for(d=new ma("[^a-zA-Z]+","g"),e=0,f=Vd.enumerateFonts();e<
f.length;){var m=f[e];++e;if(P.substr(d.replace(m.get_fontName(),""),0,b.fontName.length)==b.fontName){c.font=m.get_fontName();a=!0;break}}a?this.set_embedFonts(!0):Lb.__missingFontWarning.exists(c.font)||(Lb.__missingFontWarning.set(c.font,!0),Pa.warn('Could not find required font "'+c.font+'", it has not been embedded',{fileName:"TextField.hx",lineNumber:1062,className:"openfl.text.TextField",methodName:"__fromSymbol"}));null!=b.align&&("center"==b.align?c.align=0:"right"==b.align?c.align=4:"justify"==
b.align&&(c.align=2),c.leftMargin=u["int"](b.leftMargin/20),c.rightMargin=u["int"](b.rightMargin/20),c.indent=u["int"](b.indent/20),c.leading=u["int"](b.leading/20));this.set_defaultTextFormat(c);null!=b.text&&(b.html?this.set_htmlText(b.text):this.set_text(b.text))},__getBounds:function(a,b){this.__updateLayout();var c=X.__pool.get();c.copyFrom(this.__textEngine.bounds);c.x+=this.__offsetX;c.y+=this.__offsetY;c.__transform(c,b);a.__expand(c.x,c.y,c.width,c.height);X.__pool.release(c)},__getCharIndexOnDifferentLine:function(a,
b){if(0>a||a>F.get_length(this.__text)||0>b||b>this.__textEngine.numLines-1)return-1;for(var c=null,d=null,e=0,f=this.__textEngine.layoutGroups;e<f.data.get_length();){var m=f.data.get(e);++e;if(a>=m.startIndex&&a<=m.endIndex){c=m.offsetX;for(var h=0,q=a-m.startIndex;h<q;){var g=h++;c+=m.getAdvance(g)}if(null!=d)return this.__getPosition(c,d)}if(m.lineIndex==b&&(d=m.offsetY+m.height/2,null!=c))return this.__getPosition(c,d)}return-1},__getCursor:function(){var a=this.__getGroup(this.get_mouseX(),
this.get_mouseY(),!0);return null!=a&&""!=a.format.url?T.POINTER:this.__textEngine.selectable?T.TEXT:null},__getGroup:function(a,b,c){null==c&&(c=!1);this.__updateLayout();a+=this.get_scrollH();for(var d=0,e=this.get_scrollV()-1;d<e;){var f=d++;b+=this.__textEngine.lineHeights.data.get(f)}!c&&b>this.__textEngine.textHeight&&(b=this.__textEngine.textHeight);d=!0;f=0;for(var m=this.__textEngine.layoutGroups.data.get_length();f<m;){var h=f++;e=this.__textEngine.layoutGroups.data.get(h);h=h<this.__textEngine.layoutGroups.data.get_length()-
1?this.__textEngine.layoutGroups.data.get(h+1):null;d&&(b<e.offsetY&&(b=e.offsetY),a<e.offsetX&&(a=e.offsetX),d=!1);if(b>=e.offsetY&&b<=e.offsetY+e.height||!c&&null==h)if(a>=e.offsetX&&a<=e.offsetX+e.width||!c&&(null==h||h.lineIndex!=e.lineIndex))return e}return null},__getPosition:function(a,b){b=this.__getGroup(a,b);if(null==b)return F.get_length(this.__text);for(var c=0,d=0,e=b.positions.length;d<e;){var f=d++;c+=b.getAdvance(f);if(a<=b.offsetX+c){if(a<=b.offsetX+(c-b.getAdvance(f))+b.getAdvance(f)/
2)return b.startIndex+f;if(b.startIndex+f<b.endIndex)return b.startIndex+f+1;break}}return b.endIndex},__hitTest:function(a,b,c,d,e,f){if(!f.get_visible()||this.__isMask||e&&!this.mouseEnabled||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;this.__getRenderTransform();this.__updateLayout();c=this.__renderTransform.__transformInverseX(a,b);a=this.__renderTransform.__transformInverseY(a,b);return this.__textEngine.bounds.contains(c,a)?(null!=d&&d.push(f),!0):!1},__hitTestMask:function(a,
b){this.__getRenderTransform();this.__updateLayout();var c=this.__renderTransform.__transformInverseX(a,b);a=this.__renderTransform.__transformInverseY(a,b);return this.__textEngine.bounds.contains(c,a)?!0:!1},__renderCanvas:function(a){this.__renderedOnCanvasWhileOnDOM||(this.__renderedOnCanvasWhileOnDOM=!0,1==this.get_type()&&this.replaceText(0,F.get_length(this.__text),this.__text),this.__isHTML&&this.__updateText(N.parse(this.__text,this.__textFormat,this.__textEngine.textFormatRanges)),this.__layoutDirty=
this.__dirty=!0,this.__setRenderDirty());V.render(this,a,this.__worldTransform);if(0==this.__textEngine.antiAliasType&&1==this.__textEngine.gridFitType){var b=a.context.imageSmoothingEnabled;b&&(a.context.mozImageSmoothingEnabled=!1,a.context.msImageSmoothingEnabled=!1,a.context.imageSmoothingEnabled=!1);la.prototype.__renderCanvas.call(this,a);b&&(a.context.mozImageSmoothingEnabled=!0,a.context.msImageSmoothingEnabled=!0,a.context.imageSmoothingEnabled=!0)}else la.prototype.__renderCanvas.call(this,
a)},__renderDOM:function(a){this.__updateCacheBitmap(a,this.__forceCachedBitmapUpdate||!this.__worldColorTransform.__isDefault());this.__forceCachedBitmapUpdate=!1;null==this.__cacheBitmap||this.__cacheBitmapRender?(this.__renderedOnCanvasWhileOnDOM&&(this.__renderedOnCanvasWhileOnDOM=!1,this.__isHTML&&null!=this.__rawHtmlText&&(this.__updateText(this.__rawHtmlText),this.__layoutDirty=this.__dirty=!0,this.__setRenderDirty())),kb.render(this,a)):(this.__renderDOMClear(a),this.__cacheBitmap.stage=this.stage,
oc.render(this.__cacheBitmap,a))},__renderDOMClear:function(a){kb.clear(this,a)},__renderGL:function(a){V.render(this,a,this.__worldTransform);la.prototype.__renderGL.call(this,a)},__startCursorTimer:function(){this.__cursorTimer=Ff.delay(l(this,this.__startCursorTimer),600);this.__showCursor=!this.__showCursor;this.__dirty=!0;this.__setRenderDirty()},__startTextInput:function(){0>this.__caretIndex&&(this.__selectionIndex=this.__caretIndex=F.get_length(this.__text));this.__renderedOnCanvasWhileOnDOM&&
this.__enableInput()},__stopCursorTimer:function(){null!=this.__cursorTimer&&(this.__cursorTimer.stop(),this.__cursorTimer=null);this.__showCursor&&(this.__showCursor=!1,this.__dirty=!0,this.__setRenderDirty())},__stopTextInput:function(){this.__renderedOnCanvasWhileOnDOM&&this.__disableInput()},__updateLayout:function(){if(this.__layoutDirty){var a=this.__textEngine.width;this.__textEngine.update();if(2!=this.__textEngine.autoSize){if(this.__textEngine.width!=a)switch(this.__textEngine.autoSize){case 0:this.set_x(this.get_x()+
(a-this.__textEngine.width)/2);break;case 3:this.set_x(this.get_x()+(a-this.__textEngine.width))}this.__textEngine.getBounds()}this.__layoutDirty=!1}},__updateText:function(a){this.__renderedOnCanvasWhileOnDOM&&(this.__forceCachedBitmapUpdate=this.__text!=a);this.__textEngine.set_text(a);this.__text=this.__textEngine.text;F.get_length(this.__text)<this.__caretIndex&&(this.__selectionIndex=this.__caretIndex=F.get_length(this.__text));if(this.__displayAsPassword&&this.__renderedOnCanvasWhileOnDOM){a=
"";for(var b=0,c=F.get_length(this.get_text());b<c;)b++,a+="*";this.__textEngine.set_text(a)}else this.__textEngine.set_text(this.__text);this.get_multiline()||1!=this.get_type()||(this.__textEngine.update(),a=this.__textEngine.textWidth-this.__textEngine.width+4,0<a?this.set_scrollH(Math.ceil(a)):this.set_scrollH(0))},__updateTransforms:function(a){la.prototype.__updateTransforms.call(this,a);this.__renderTransform.__translateTransformed(this.__offsetX,this.__offsetY)},set_background:function(a){a!=
this.__textEngine.background&&(this.__dirty=!0,this.__setRenderDirty());return this.__textEngine.background=a},set_border:function(a){a!=this.__textEngine.border&&(this.__dirty=!0,this.__setRenderDirty());return this.__textEngine.border=a},get_cacheAsBitmap:function(){return null!=this.__filters&&1==this.__filters.length&&u.is(this.__filters[0],Fe)?!1:la.prototype.get_cacheAsBitmap.call(this)},get_defaultTextFormat:function(){return this.__textFormat.clone()},set_defaultTextFormat:function(a){this.__textFormat.__merge(a);
this.__dirty=this.__layoutDirty=!0;this.__setRenderDirty();return a},set_displayAsPassword:function(a){a!=this.__displayAsPassword&&(this.__layoutDirty=this.__dirty=!0,this.__setRenderDirty(),this.__displayAsPassword=a,this.__updateText(this.__text));return a},set_embedFonts:function(a){return this.__textEngine.embedFonts=a},get_height:function(){this.__updateLayout();return this.__textEngine.height*Math.abs(this.get_scaleY())},set_height:function(a){a!=this.__textEngine.height&&(this.__setTransformDirty(),
this.__layoutDirty=this.__dirty=!0,this.__setRenderDirty(),this.__textEngine.height=a);return this.__textEngine.height*Math.abs(this.get_scaleY())},get_htmlText:function(){return this.__text},set_htmlText:function(a){this.__isHTML&&this.__text==a||(this.__layoutDirty=this.__dirty=!0,this.__setRenderDirty());this.__isHTML=!0;this.__rawHtmlText=a;a=N.parse(a,this.__textFormat,this.__textEngine.textFormatRanges);if(1<this.__textEngine.textFormatRanges.data.get_length()){var b=this.__textEngine.textFormatRanges,
c=this.__textEngine.textFormatRanges.data.get_length()-1;new yc(b.data.splice(1,c))}b=this.__textEngine.textFormatRanges.data.get(0);b.format=this.__textFormat;b.start=0;this.__renderedOnCanvasWhileOnDOM?(b.end=a.length,this.__updateText(a)):(b.end=this.__rawHtmlText.length,this.__updateText(this.__rawHtmlText));return a},get_multiline:function(){return this.__textEngine.multiline},set_multiline:function(a){a!=this.__textEngine.multiline&&(this.__layoutDirty=this.__dirty=!0,this.__updateText(this.__text),
this.__setRenderDirty());return this.__textEngine.multiline=a},get_scrollH:function(){return this.__textEngine.scrollH},set_scrollH:function(a){this.__updateLayout();a>this.__textEngine.maxScrollH&&(a=this.__textEngine.maxScrollH);0>a&&(a=0);a!=this.__textEngine.scrollH&&(this.__dirty=!0,this.__setRenderDirty(),this.dispatchEvent(new R("scroll")));return this.__textEngine.scrollH=a},get_scrollV:function(){return this.__textEngine.scrollV},get_selectable:function(){return this.__textEngine.selectable},
set_selectable:function(a){a!=this.__textEngine.selectable&&1==this.get_type()&&(null!=this.stage&&this.stage.get_focus()==this?this.__startTextInput():a||this.__stopTextInput());return this.__textEngine.selectable=a},get_tabEnabled:function(){return null==this.__tabEnabled?1==this.__textEngine.type:this.__tabEnabled},get_text:function(){return this.__text},set_text:function(a){if(this.__isHTML||this.__text!=a)this.__layoutDirty=this.__dirty=!0,this.__setRenderDirty();else return a;if(1<this.__textEngine.textFormatRanges.data.get_length()){var b=
this.__textEngine.textFormatRanges,c=this.__textEngine.textFormatRanges.data.get_length()-1;new yc(b.data.splice(1,c))}b=this.__textEngine.textFormatRanges.data.get(0);b.format=this.__textFormat;b.start=0;b.end=F.get_length(a);this.__isHTML=!1;this.__updateText(a);return a},set_textColor:function(a){a!=this.__textFormat.color&&(this.__dirty=!0,this.__setRenderDirty());for(var b=0,c=this.__textEngine.textFormatRanges;b<c.data.get_length();){var d=c.data.get(b);++b;d.format.color=a}return this.__textFormat.color=
a},get_type:function(){return this.__textEngine.type},set_type:function(a){a!=this.__textEngine.type&&(1==a?(this.addEventListener("addedToStage",l(this,this.this_onAddedToStage)),this.this_onFocusIn(null),this.__textEngine.__useIntAdvances=!0):(this.removeEventListener("addedToStage",l(this,this.this_onAddedToStage)),this.__stopTextInput(),this.__textEngine.__useIntAdvances=null),this.__dirty=!0,this.__setRenderDirty());return this.__textEngine.type=a},get_width:function(){this.__updateLayout();
return this.__textEngine.width*Math.abs(this.__scaleX)},set_width:function(a){a!=this.__textEngine.width&&(this.__setTransformDirty(),this.__layoutDirty=this.__dirty=!0,this.__setRenderDirty(),this.__textEngine.width=a);return this.__textEngine.width*Math.abs(this.__scaleX)},set_wordWrap:function(a){a!=this.__textEngine.wordWrap&&(this.__layoutDirty=this.__dirty=!0,this.__setRenderDirty());return this.__textEngine.wordWrap=a},stage_onMouseMove:function(a){null!=this.stage&&this.__textEngine.selectable&&
0<=this.__selectionIndex&&(this.__updateLayout(),a=this.__getPosition(this.get_mouseX(),this.get_mouseY()),a!=this.__caretIndex&&(this.__caretIndex=a,this.__renderedOnCanvasWhileOnDOM&&(this.__forceCachedBitmapUpdate=!0)))},stage_onMouseUp:function(a){if(null!=this.stage&&(this.stage.removeEventListener("mouseMove",l(this,this.stage_onMouseMove)),this.stage.removeEventListener("mouseUp",l(this,this.stage_onMouseUp)),this.stage.get_focus()==this)){this.__getWorldTransform();this.__updateLayout();this.__worldTransform.__transformInverseX(this.get_x(),
this.get_y());this.__worldTransform.__transformInverseY(this.get_x(),this.get_y());var b=this.__getPosition(this.get_mouseX(),this.get_mouseY());a=u["int"](Math.min(this.__selectionIndex,b));b=u["int"](Math.max(this.__selectionIndex,b));this.__selectionIndex=a;this.__caretIndex=b;this.__inputEnabled&&(this.this_onFocusIn(null),this.__stopCursorTimer(),this.__startCursorTimer(),this.__renderedOnCanvasWhileOnDOM&&(this.__forceCachedBitmapUpdate=!0))}},this_onAddedToStage:function(a){this.this_onFocusIn(null)},
this_onFocusIn:function(a){this.get_selectable()&&1==this.get_type()&&null!=this.stage&&this.stage.get_focus()==this&&this.__startTextInput()},this_onFocusOut:function(a){this.__stopCursorTimer();null!=a.relatedObject&&u.is(a.relatedObject,Lb)||this.__stopTextInput();this.__selectionIndex!=this.__caretIndex&&(this.__selectionIndex=this.__caretIndex,this.__dirty=!0,this.__setRenderDirty())},this_onKeyDown:function(a){this.get_selectable()&&1!=this.get_type()&&67==a.keyCode&&(a.commandKey||a.ctrlKey)&&
this.__caretIndex!=this.__selectionIndex&&Ib.set_text(F.substring(this.__text,this.__caretIndex,this.__selectionIndex))},this_onMouseDown:function(a){this.get_selectable()&&(this.__updateLayout(),this.__selectionIndex=this.__caretIndex=this.__getPosition(this.get_mouseX(),this.get_mouseY()),this.stage.addEventListener("mouseMove",l(this,this.stage_onMouseMove)),this.stage.addEventListener("mouseUp",l(this,this.stage_onMouseUp)))},window_onKeyDown:function(a,b){switch(a){case 8:this.__selectionIndex==
this.__caretIndex&&0<this.__caretIndex&&(this.__selectionIndex=this.__caretIndex-1);this.__selectionIndex!=this.__caretIndex&&(this.replaceSelectedText(""),this.__selectionIndex=this.__caretIndex,this.dispatchEvent(new R("change",!0)));break;case 97:if(Da.get_metaKey(b)||Da.get_ctrlKey(b))this.__caretIndex=F.get_length(this.__text),this.__selectionIndex=0;break;case 99:(Da.get_metaKey(b)||Da.get_ctrlKey(b))&&this.__caretIndex!=this.__selectionIndex&&Ib.set_text(F.substring(this.__text,this.__caretIndex,
this.__selectionIndex));break;case 120:(Da.get_metaKey(b)||Da.get_ctrlKey(b))&&this.__caretIndex!=this.__selectionIndex&&(Ib.set_text(F.substring(this.__text,this.__caretIndex,this.__selectionIndex)),this.replaceSelectedText(""),this.dispatchEvent(new R("change",!0)));break;case 127:this.__selectionIndex==this.__caretIndex&&this.__caretIndex<F.get_length(this.__text)&&(this.__selectionIndex=this.__caretIndex+1);this.__selectionIndex!=this.__caretIndex&&(this.replaceSelectedText(""),this.__selectionIndex=
this.__caretIndex,this.dispatchEvent(new R("change",!0)));break;case 1073741898:this.__caretBeginningOfLine();this.__stopCursorTimer();this.__startCursorTimer();break;case 1073741901:this.__caretEndOfLine();this.__stopCursorTimer();this.__startCursorTimer();break;case 1073741903:Da.get_metaKey(b)?(this.__caretEndOfLine(),Da.get_shiftKey(b)||(this.__selectionIndex=this.__caretIndex)):Da.get_shiftKey(b)?this.__caretNextCharacter():(this.__selectionIndex==this.__caretIndex?this.__caretNextCharacter():
this.__caretIndex=u["int"](Math.max(this.__caretIndex,this.__selectionIndex)),this.__selectionIndex=this.__caretIndex);this.__stopCursorTimer();this.__startCursorTimer();break;case 1073741904:Da.get_metaKey(b)?(this.__caretBeginningOfLine(),Da.get_shiftKey(b)||(this.__selectionIndex=this.__caretIndex)):Da.get_shiftKey(b)?this.__caretPreviousCharacter():(this.__selectionIndex==this.__caretIndex?this.__caretPreviousCharacter():this.__caretIndex=u["int"](Math.min(this.__caretIndex,this.__selectionIndex)),
this.__selectionIndex=this.__caretIndex);this.__stopCursorTimer();this.__startCursorTimer();break;case 1073741905:Da.get_shiftKey(b)?this.__caretNextLine():(this.__selectionIndex==this.__caretIndex?this.__caretNextLine():(a=this.getLineIndexOfChar(u["int"](Math.max(this.__caretIndex,this.__selectionIndex))),this.__caretNextLine(a,u["int"](Math.min(this.__caretIndex,this.__selectionIndex)))),this.__selectionIndex=this.__caretIndex);this.__stopCursorTimer();this.__startCursorTimer();break;case 1073741906:Da.get_shiftKey(b)?
this.__caretPreviousLine():(this.__selectionIndex==this.__caretIndex?this.__caretPreviousLine():(a=this.getLineIndexOfChar(u["int"](Math.min(this.__caretIndex,this.__selectionIndex))),this.__caretPreviousLine(a,u["int"](Math.min(this.__caretIndex,this.__selectionIndex)))),this.__selectionIndex=this.__caretIndex);this.__stopCursorTimer();this.__startCursorTimer();break;case 13:case 1073741912:this.__textEngine.multiline&&(this.replaceSelectedText("\n"),this.dispatchEvent(new R("change",!0)))}},window_onTextInput:function(a){this.replaceSelectedText(a);
this.dispatchEvent(new R("change",!0))},__class__:Lb,__properties__:w(la.prototype.__properties__,{set_wordWrap:"set_wordWrap",set_type:"set_type",get_type:"get_type",set_textColor:"set_textColor",set_text:"set_text",get_text:"get_text",set_selectable:"set_selectable",get_selectable:"get_selectable",get_scrollV:"get_scrollV",set_scrollH:"set_scrollH",get_scrollH:"get_scrollH",set_multiline:"set_multiline",get_multiline:"get_multiline",set_htmlText:"set_htmlText",get_htmlText:"get_htmlText",set_embedFonts:"set_embedFonts",
set_displayAsPassword:"set_displayAsPassword",set_defaultTextFormat:"set_defaultTextFormat",get_defaultTextFormat:"get_defaultTextFormat",set_border:"set_border",set_background:"set_background"})});var dg=function(a,b,c,d,e,f,m,h,q,g,k,l,n){this.font=a;this.size=b;this.color=c;this.bold=d;this.italic=e;this.underline=f;this.url=m;this.target=h;this.align=q;this.leftMargin=g;this.rightMargin=k;this.indent=l;this.leading=n};k["openfl.text.TextFormat"]=dg;dg.__name__=["openfl","text","TextFormat"];dg.prototype=
{align:null,blockIndent:null,bold:null,bullet:null,color:null,font:null,indent:null,italic:null,kerning:null,leading:null,leftMargin:null,letterSpacing:null,rightMargin:null,size:null,tabStops:null,target:null,underline:null,url:null,__ascent:null,__descent:null,clone:function(){var a=new dg(this.font,this.size,this.color,this.bold,this.italic,this.underline,this.url,this.target);a.align=this.align;a.leftMargin=this.leftMargin;a.rightMargin=this.rightMargin;a.indent=this.indent;a.leading=this.leading;
a.blockIndent=this.blockIndent;a.bullet=this.bullet;a.kerning=this.kerning;a.letterSpacing=this.letterSpacing;a.tabStops=this.tabStops;a.__ascent=this.__ascent;a.__descent=this.__descent;return a},__merge:function(a){null!=a.font&&(this.font=a.font);null!=a.size&&(this.size=a.size);null!=a.color&&(this.color=a.color);null!=a.bold&&(this.bold=a.bold);null!=a.italic&&(this.italic=a.italic);null!=a.underline&&(this.underline=a.underline);null!=a.url&&(this.url=a.url);null!=a.target&&(this.target=a.target);
null!=a.align&&(this.align=a.align);null!=a.leftMargin&&(this.leftMargin=a.leftMargin);null!=a.rightMargin&&(this.rightMargin=a.rightMargin);null!=a.indent&&(this.indent=a.indent);null!=a.leading&&(this.leading=a.leading);null!=a.blockIndent&&(this.blockIndent=a.blockIndent);null!=a.bullet&&(this.bullet=a.bullet);null!=a.kerning&&(this.kerning=a.kerning);null!=a.letterSpacing&&(this.letterSpacing=a.letterSpacing);null!=a.tabStops&&(this.tabStops=a.tabStops);null!=a.__ascent&&(this.__ascent=a.__ascent);
null!=a.__descent&&(this.__descent=a.__descent)},__class__:dg};var Xk={};k["openfl.text._TextFormatAlign.TextFormatAlign_Impl_"]=Xk;Xk.__name__=["openfl","text","_TextFormatAlign","TextFormatAlign_Impl_"];Xk.fromString=function(a){switch(a){case "center":return 0;case "end":return 1;case "justify":return 2;case "left":return 3;case "right":return 4;case "start":return 5;default:return null}};var La=function(){ca.call(this);La.__instances.push(this)};k["openfl.ui.GameInput"]=La;La.__name__=["openfl",
"ui","GameInput"];La.__getDevice=function(a){if(null==a)return null;if(!La.__devices.exists(a)){var b=new Yj(a.get_guid(),a.get_name());La.__deviceList.push(b);La.__devices.set(a,b);La.numDevices=La.__deviceList.length}return La.__devices.get(a)};La.__onGamepadAxisMove=function(a,b,c){a=La.__getDevice(a);if(null!=a&&a.enabled){if(!a.__axis.exists(b)){switch(b){case 0:var d="LEFT_X";break;case 1:d="LEFT_Y";break;case 2:d="RIGHT_X";break;case 3:d="RIGHT_Y";break;case 4:d="TRIGGER_LEFT";break;case 5:d=
"TRIGGER_RIGHT";break;default:d="UNKNOWN ("+b+")"}d=new Le(a,"AXIS_"+d,-1,1);a.__axis.set(b,d);a.__controls.push(d)}b=a.__axis.get(b);b.value=c;b.dispatchEvent(new R("change"))}};La.__onGamepadButtonDown=function(a,b){a=La.__getDevice(a);if(null!=a&&a.enabled){if(!a.__button.exists(b)){switch(b){case 0:var c="A";break;case 1:c="B";break;case 2:c="X";break;case 3:c="Y";break;case 4:c="BACK";break;case 5:c="GUIDE";break;case 6:c="START";break;case 7:c="LEFT_STICK";break;case 8:c="RIGHT_STICK";break;
case 9:c="LEFT_SHOULDER";break;case 10:c="RIGHT_SHOULDER";break;case 11:c="DPAD_UP";break;case 12:c="DPAD_DOWN";break;case 13:c="DPAD_LEFT";break;case 14:c="DPAD_RIGHT";break;default:c="UNKNOWN ("+b+")"}c=new Le(a,"BUTTON_"+c,0,1);a.__button.set(b,c);a.__controls.push(c)}b=a.__button.get(b);b.value=1;b.dispatchEvent(new R("change"))}};La.__onGamepadButtonUp=function(a,b){a=La.__getDevice(a);if(null!=a&&a.enabled){if(!a.__button.exists(b)){switch(b){case 0:var c="A";break;case 1:c="B";break;case 2:c=
"X";break;case 3:c="Y";break;case 4:c="BACK";break;case 5:c="GUIDE";break;case 6:c="START";break;case 7:c="LEFT_STICK";break;case 8:c="RIGHT_STICK";break;case 9:c="LEFT_SHOULDER";break;case 10:c="RIGHT_SHOULDER";break;case 11:c="DPAD_UP";break;case 12:c="DPAD_DOWN";break;case 13:c="DPAD_LEFT";break;case 14:c="DPAD_RIGHT";break;default:c="UNKNOWN ("+b+")"}c=new Le(a,"BUTTON_"+c,0,1);a.__button.set(b,c);a.__controls.push(c)}b=a.__button.get(b);b.value=0;b.dispatchEvent(new R("change"))}};La.__onGamepadConnect=
function(a){a=La.__getDevice(a);if(null!=a)for(var b=0,c=La.__instances;b<c.length;){var d=c[b];++b;d.dispatchEvent(new vg("deviceAdded",null,null,a))}};La.__onGamepadDisconnect=function(a){var b=La.__devices.get(a);if(null!=b){La.__devices.exists(a)&&(P.remove(La.__deviceList,La.__devices.get(a)),La.__devices.remove(a));La.numDevices=La.__deviceList.length;a=0;for(var c=La.__instances;a<c.length;){var d=c[a];++a;d.dispatchEvent(new vg("deviceRemoved",null,null,b))}}};La.__super__=ca;La.prototype=
w(ca.prototype,{addEventListener:function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);null==c&&(c=!1);ca.prototype.addEventListener.call(this,a,b,c,d,e);if("deviceAdded"==a)for(a=0,b=La.__deviceList;a<b.length;)c=b[a],++a,this.dispatchEvent(new vg("deviceAdded",null,null,c))},__class__:La});var Le=function(a,b,c,d,e){null==e&&(e=0);ca.call(this);this.device=a;this.id=b;this.minValue=c;this.maxValue=d;this.value=e};k["openfl.ui.GameInputControl"]=Le;Le.__name__=["openfl","ui","GameInputControl"];Le.__super__=
ca;Le.prototype=w(ca.prototype,{device:null,id:null,maxValue:null,minValue:null,value:null,__class__:Le});var Yj=function(a,b){this.__controls=[];this.__button=new Cb;this.__axis=new Cb;this.id=a;this.name=b;for(b=0;6>b;){var c=b++;a=new Le(this,"AXIS_"+c,-1,1);this.__axis.set(c,a);this.__controls.push(a)}for(b=0;15>b;)c=b++,a=new Le(this,"BUTTON_"+c,0,1),this.__button.set(c,a),this.__controls.push(a)};k["openfl.ui.GameInputDevice"]=Yj;Yj.__name__=["openfl","ui","GameInputDevice"];Yj.prototype={enabled:null,
id:null,name:null,__axis:null,__button:null,__controls:null,__class__:Yj};var eg=function(){};k["openfl.ui.Keyboard"]=eg;eg.__name__=["openfl","ui","Keyboard"];eg.__convertKeyCode=function(a){switch(a){case 8:return 8;case 9:return 9;case 13:return 13;case 27:return 27;case 32:return 32;case 33:return 49;case 34:return 222;case 35:return 51;case 36:return 52;case 37:return 53;case 38:return 55;case 39:return 222;case 40:return 57;case 41:return 48;case 42:return 56;case 44:return 188;case 45:return 189;
case 46:return 190;case 47:return 191;case 48:return 48;case 49:return 49;case 50:return 50;case 51:return 51;case 52:return 52;case 53:return 53;case 54:return 54;case 55:return 55;case 56:return 56;case 57:return 57;case 58:return 186;case 59:return 186;case 60:return 60;case 61:return 187;case 62:return 190;case 63:return 191;case 64:return 50;case 91:return 219;case 92:return 220;case 93:return 221;case 94:return 54;case 95:return 189;case 96:return 192;case 97:return 65;case 98:return 66;case 99:return 67;
case 100:return 68;case 101:return 69;case 102:return 70;case 103:return 71;case 104:return 72;case 105:return 73;case 106:return 74;case 107:return 75;case 108:return 76;case 109:return 77;case 110:return 78;case 111:return 79;case 112:return 80;case 113:return 81;case 114:return 82;case 115:return 83;case 116:return 84;case 117:return 85;case 118:return 86;case 119:return 87;case 120:return 88;case 121:return 89;case 122:return 90;case 127:return 46;case 1073741881:return 20;case 1073741882:return 112;
case 1073741883:return 113;case 1073741884:return 114;case 1073741885:return 115;case 1073741886:return 116;case 1073741887:return 117;case 1073741888:return 118;case 1073741889:return 119;case 1073741890:return 120;case 1073741891:return 121;case 1073741892:return 122;case 1073741893:return 123;case 1073741894:return 301;case 1073741895:return 145;case 1073741896:return 19;case 1073741897:return 45;case 1073741898:return 36;case 1073741899:return 33;case 1073741901:return 35;case 1073741902:return 34;
case 1073741903:return 39;case 1073741904:return 37;case 1073741905:return 40;case 1073741906:return 38;case 1073741907:return 144;case 1073741908:return 111;case 1073741909:return 106;case 1073741910:return 109;case 1073741911:return 107;case 1073741912:return 108;case 1073741913:return 97;case 1073741914:return 98;case 1073741915:return 99;case 1073741916:return 100;case 1073741917:return 101;case 1073741918:return 102;case 1073741919:return 103;case 1073741920:return 104;case 1073741921:return 105;
case 1073741922:return 96;case 1073741923:return 110;case 1073741925:return 302;case 1073741928:return 124;case 1073741929:return 125;case 1073741930:return 126;case 1073741982:return 13;case 1073742044:return 110;case 1073742048:return 17;case 1073742049:return 16;case 1073742050:return 18;case 1073742051:return 15;case 1073742052:return 17;case 1073742053:return 16;case 1073742054:return 18;case 1073742055:return 15;default:return a}};eg.__getCharCode=function(a,b){null==b&&(b=!1);if(b){switch(a){case 48:return 41;
case 49:return 33;case 50:return 64;case 51:return 35;case 52:return 36;case 53:return 37;case 54:return 94;case 55:return 38;case 56:return 42;case 57:return 40;case 186:return 58;case 187:return 43;case 188:return 60;case 189:return 95;case 190:return 62;case 191:return 63;case 192:return 126;case 219:return 123;case 220:return 124;case 221:return 125;case 222:return 34}if(65<=a&&90>=a)return a-65+65}else{switch(a){case 8:return 8;case 9:return 9;case 13:return 13;case 27:return 27;case 32:return 32;
case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}if(48<=a&&57>=a)return a-48+48;if(65<=a&&90>=a)return a-65+97}if(96<=a&&105>=a)return a-96+48;switch(a){case 8:return 8;case 13:return 13;case 46:return 127;case 106:return 42;case 107:return 43;case 108:return 44;case 110:return 45;case 111:return 46}return 0};eg.__getKeyLocation=function(a){switch(a){case 1073741908:case 1073741909:case 1073741910:case 1073741911:case 1073741912:case 1073741913:case 1073741914:case 1073741915:case 1073741916:case 1073741917:case 1073741918:case 1073741919:case 1073741920:case 1073741921:case 1073741922:case 1073741923:case 1073742044:return 3;
case 1073742048:case 1073742049:case 1073742050:case 1073742051:return 1;case 1073742052:case 1073742053:case 1073742054:case 1073742055:return 2;default:return 0}};var al=function(){};k["openfl.ui.Mouse"]=al;al.__name__=["openfl","ui","Mouse"];var Zj=function(){};k["openfl.utils.IAssetCache"]=Zj;Zj.__name__=["openfl","utils","IAssetCache"];Zj.prototype={get_enabled:null,getBitmapData:null,hasBitmapData:null,removeBitmapData:null,setBitmapData:null,__class__:Zj,__properties__:{get_enabled:"get_enabled"}};
var gi=function(){this.__enabled=!0;this.bitmapData=new ea;this.font=new ea;this.sound=new ea};k["openfl.utils.AssetCache"]=gi;gi.__name__=["openfl","utils","AssetCache"];gi.__interfaces__=[Zj];gi.prototype={bitmapData:null,font:null,sound:null,__enabled:null,getBitmapData:function(a){return this.bitmapData.get(a)},hasBitmapData:function(a){return this.bitmapData.exists(a)},removeBitmapData:function(a){aa.cache.image.remove(a);return this.bitmapData.remove(a)},setBitmapData:function(a,b){this.bitmapData.set(a,
b)},get_enabled:function(){return this.__enabled},__class__:gi,__properties__:{get_enabled:"get_enabled"}};var Na=function(){};k["openfl.utils.Assets"]=Na;Na.__name__=["openfl","utils","Assets"];Na.exists=function(a,b){return aa.exists(a,b)};Na.getBitmapData=function(a,b){null==b&&(b=!0);if(b&&Na.cache.get_enabled()&&Na.cache.hasBitmapData(a)){var c=Na.cache.getBitmapData(a);if(Na.isValidBitmapData(c))return c}c=aa.getImage(a,!1);return null!=c?(c=ba.fromImage(c),b&&Na.cache.get_enabled()&&Na.cache.setBitmapData(a,
c),c):null};Na.getText=function(a){return aa.getText(a)};Na.isValidBitmapData=function(a){return null!=a&&null!=a.image};var qd={};k["openfl.utils._ByteArray.ByteArray_Impl_"]=qd;qd.__name__=["openfl","utils","_ByteArray","ByteArray_Impl_"];qd.__properties__={get_length:"get_length"};qd.fromBytes=function(a){return null==a?null:u.is(a,tc)?a:tc.fromBytes(a)};qd.toBytes=function(a){return a};qd.get_length=function(a){return a.length};var ak=function(){};k["openfl.utils.IDataOutput"]=ak;ak.__name__=
["openfl","utils","IDataOutput"];ak.prototype={__class__:ak};var bk=function(){};k["openfl.utils.IDataInput"]=bk;bk.__name__=["openfl","utils","IDataInput"];bk.prototype={__class__:bk};var tc=function(a){null==a&&(a=0);var b=ya.alloc(a);ya.call(this,b.b.buffer);this.__length=a;null==tc.__defaultEndian&&(wa.get_endianness()==Te.LITTLE_ENDIAN?tc.__defaultEndian=1:tc.__defaultEndian=0);this.set_endian(tc.__defaultEndian);this.position=0};k["openfl.utils.ByteArrayData"]=tc;tc.__name__=["openfl","utils",
"ByteArrayData"];tc.__interfaces__=[ak,bk];tc.fromBytes=function(a){var b=new tc;b.__fromBytes(a);return b};tc.__super__=ya;tc.prototype=w(ya.prototype,{position:null,__endian:null,__length:null,readUnsignedByte:function(){if(this.position<this.length)return this.get(this.position++);throw new K(new di);},__fromBytes:function(a){this.__setData(a);this.length=a.length},__setData:function(a){this.b=a.b;this.__length=a.length;this.data=a.data},set_endian:function(a){return this.__endian=a},__class__:tc,
__properties__:{set_endian:"set_endian"}});var hl=function(){};k["haxe.lang.Iterator"]=hl;hl.__name__=["haxe","lang","Iterator"];hl.prototype={hasNext:null,next:null,__class__:hl};var il=function(){};k["haxe.lang.Iterable"]=il;il.__name__=["haxe","lang","Iterable"];il.prototype={iterator:null,__class__:il};var ec=function(a,b){null==b&&(b=0);if(isNaN(a)||0>a)throw new K(new Vc("The delay specified is negative or not a finite number"));ca.call(this);this.__delay=a;this.set_repeatCount(b);this.running=
!1;this.currentCount=0};k["openfl.utils.Timer"]=ec;ec.__name__=["openfl","utils","Timer"];ec.__super__=ca;ec.prototype=w(ca.prototype,{currentCount:null,repeatCount:null,running:null,__delay:null,__timerID:null,start:function(){this.running||(this.running=!0,this.__timerID=M.get_window().setInterval(l(this,this.timer_onTimer),u["int"](this.__delay)))},stop:function(){this.running=!1;null!=this.__timerID&&(M.get_window().clearInterval(this.__timerID),this.__timerID=null)},set_delay:function(a){this.__delay=
a;this.running&&(this.stop(),this.start());return this.__delay},set_repeatCount:function(a){this.running&&0!=a&&a<=this.currentCount&&this.stop();return this.repeatCount=a},timer_onTimer:function(){this.currentCount++;0<this.repeatCount&&this.currentCount>=this.repeatCount?(this.stop(),this.dispatchEvent(new qe("timer")),this.dispatchEvent(new qe("timerComplete"))):this.dispatchEvent(new qe("timer"))},__class__:ec,__properties__:{set_repeatCount:"set_repeatCount",set_delay:"set_delay"}});var Td=function(){this.rollOutStack=
[]};k["openfl.utils.TouchData"]=Td;Td.__name__=["openfl","utils","TouchData"];Td.prototype={touch:null,touchDownTarget:null,touchOverTarget:null,rollOutStack:null,reset:function(){this.touchOverTarget=this.touchDownTarget=this.touch=null;this.rollOutStack.splice(0,this.rollOutStack.length)},__class__:Td};var A=function(a,b){null==b&&(b=!1);this.BoxId=0;this.OpenDirection="";this.Speed=this.Try=this.Start=this.StopTime=0;this.EndPoint="none";this.End=0;this.Enabled=this.AutoChange=!1;this.Switch=this.ChangeDirection=
this.Activate="";this.Closed=!1;this.Direction="";this.spark1=this.spark2=this.magnetic1=this.magnet=this.magnetic2=this.sensor=this.cargo=this.light=this.beam=this.blades=this.w1=this.w2=null;ia.call(this);this.smoothing=b;this.spritesheet=a;this.behaviorQueue=[];this.bitmap=new Ia;this.addChild(this.bitmap)};k["spritesheet.AnimatedSprite"]=A;A.__name__=["spritesheet","AnimatedSprite"];A.__super__=ia;A.prototype=w(ia.prototype,{bitmap:null,currentBehavior:null,currentFrameIndex:null,smoothing:null,
spritesheet:null,behaviorComplete:null,behaviorQueue:null,loopTime:null,timeElapsed:null,spark1:null,spark2:null,magnetic1:null,magnet:null,magnetic2:null,sensor:null,cargo:null,light:null,beam:null,blades:null,w1:null,w2:null,Direction:null,Closed:null,Switch:null,ChangeDirection:null,Activate:null,Enabled:null,AutoChange:null,End:null,EndPoint:null,Speed:null,Try:null,Start:null,StopTime:null,OpenDirection:null,BoxId:null,resolveBehavior:function(a){return u.is(a,t)?a:"string"==typeof a&&null!=
this.spritesheet?this.spritesheet.behaviors.get(a):null},showBehavior:function(a,b){null==b&&(b=!0);this.behaviorQueue=[];this.updateBehavior(this.resolveBehavior(a),b)},update:function(a){this.behaviorComplete||(this.timeElapsed+=a,a=this.timeElapsed/this.loopTime,1<=a&&(this.currentBehavior.loop?a-=Math.floor(a):(this.behaviorComplete=!0,a=1)),this.currentFrameIndex=Math.round(a*(this.currentBehavior.frames.length-1)),a=this.spritesheet.getFrame(this.currentBehavior.frames[this.currentFrameIndex]),
this.bitmap.set_bitmapData(a.bitmapData),this.bitmap.smoothing=this.smoothing,this.bitmap.set_x(a.offsetX-this.currentBehavior.originX),this.bitmap.set_y(a.offsetY-this.currentBehavior.originY),this.behaviorComplete&&(0<this.behaviorQueue.length?this.updateBehavior(this.behaviorQueue.shift()):this.hasEventListener("complete")&&this.dispatchEvent(new R("complete"))))},updateBehavior:function(a,b){null==b&&(b=!0);if(null!=a){if(b||a!=this.currentBehavior)this.currentBehavior=a,this.timeElapsed=0,this.behaviorComplete=
!1,this.loopTime=u["int"](a.frames.length/a.frameRate*1E3),null==this.bitmap.bitmapData&&this.update(0)}else this.bitmap.set_bitmapData(null),this.currentBehavior=null,this.currentFrameIndex=-1,this.behaviorComplete=!0},__class__:A});var jf=function(a,b,c,d){this.sourceImage=a;this.sourceImageAlpha=d;null==b?(this.frames=[],this.totalFrames=0):(this.frames=b,this.totalFrames=b.length);this.behaviors=null==c?new ea:c};k["spritesheet.Spritesheet"]=jf;jf.__name__=["spritesheet","Spritesheet"];jf.prototype=
{behaviors:null,totalFrames:null,frames:null,sourceImage:null,sourceImageAlpha:null,addBehavior:function(a){this.behaviors.set(a.name,a)},addFrame:function(a){this.frames.push(a);this.totalFrames++},generateBitmap:function(a){a=this.frames[a];var b=new ba(a.width,a.height,!0),c=new X(a.x,a.y,a.width,a.height),d=new za;b.copyPixels(this.sourceImage,c,d);null!=this.sourceImageAlpha&&b.copyChannel(this.sourceImageAlpha,c,d,2,8);a.bitmapData=b},getFrame:function(a,b){null==b&&(b=!0);var c=this.frames[a];
null!=c&&null==c.bitmapData&&b&&this.generateBitmap(a);return c},updateImage:function(a,b){this.sourceImage=a;this.sourceImageAlpha=b;a=0;for(b=this.frames;a<b.length;){var c=b[a];++a;null!=c.bitmapData&&(c.bitmapData=null)}},__class__:jf};var t=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=30);null==c&&(c=!1);null==a&&(a="");""==a&&(a="behavior"+t.uniqueID++);null==b&&(b=[]);this.name=a;this.frames=b;this.loop=c;this.frameRate=d;this.originX=e;this.originY=f;this.frameData=[];a=
0;for(b=this.frames.length;a<b;)a++,this.frameData.push(null)};k["spritesheet.data.BehaviorData"]=t;t.__name__=["spritesheet","data","BehaviorData"];t.prototype={frameData:null,frameRate:null,frames:null,loop:null,name:null,originX:null,originY:null,__class__:t};var Ef=function(a,b,c,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b;this.width=c;this.height=d;this.offsetX=e;this.offsetY=f};k["spritesheet.data.SpritesheetFrame"]=Ef;Ef.__name__=
["spritesheet","data","SpritesheetFrame"];Ef.prototype={bitmapData:null,height:null,offsetX:null,offsetY:null,width:null,x:null,y:null,__class__:Ef};var Hi=function(){};k["spritesheet.importers.BitmapImporter"]=Hi;Hi.__name__=["spritesheet","importers","BitmapImporter"];Hi.create=function(a,b,c,d,e,f,m){null==m&&(m=1);null==f&&(f=0);var h=[];f=c*b+f;for(var q=0;q<c;)for(var g=q++,k=0,l=b;k<l;){var n=k++;if(h.length<f){var p=d*n,r=e*g;n=new Ef(p,r,d,e,0,0);if(1!=m){var t=new ba(d,e,!0,0);t.copyPixels(a,
new X(p,r,d,e),new za);p=new Ia(t);p.smoothing=!0;r=new sa;r.scale(m,m);t=new ba(Math.round(d*m),Math.round(e*m),!0,0);t.draw(p,r);n.bitmapData=t}h.push(n)}}for(;h.length<f;)h.push(new Ef);return new jf(a,h)};var fe=function(){};k["tjson.TJSON"]=fe;fe.__name__=["tjson","TJSON"];fe.parse=function(a,b,c){null==b&&(b="JSON Data");return(new ck(a,b,c)).doParse()};var ck=function(a,b,c){null==b&&(b="JSON Data");this.json=a;this.fileName=b;this.currentLine=1;this.lastSymbolQuoted=!1;this.pos=0;this.floatRegex=
new ma("^-?[0-9]*\\.[0-9]+$","");this.intRegex=new ma("^-?[0-9]+$","");this.strProcessor=null==c?l(this,this.defaultStringProcessor):c;this.cache=[]};k["tjson.TJSONParser"]=ck;ck.__name__=["tjson","TJSONParser"];ck.prototype={pos:null,json:null,lastSymbolQuoted:null,fileName:null,currentLine:null,cache:null,floatRegex:null,intRegex:null,strProcessor:null,doParse:function(){try{var a=this.getNextSymbol();switch(a){case "[":return this.doArray();case "{":return this.doObject();default:return this.convertSymbolToProperType(a)}}catch(b){Y.lastException=
b;b instanceof K&&(b=b.val);if(n.__instanceof(b,String))throw new K(this.fileName+" on line "+this.currentLine+": "+b);throw b;}},doObject:function(){var a={},b=!1;for(this.cache.push(a);this.pos<this.json.length;){var c=this.getNextSymbol();if(","!=c||this.lastSymbolQuoted){if("}"==c&&!this.lastSymbolQuoted)return b&&null!=a.TJ_unserialize&&a.TJ_unserialize(),a;var d=this.getNextSymbol();if(":"!=d)throw new K("Expected ':' but got '"+d+"' instead.");d=this.getNextSymbol();if("_hxcls"==c){a=Q.resolveClass(d);
if(null==a)throw new K("Invalid class name - "+d);a=Q.createEmptyInstance(a);this.cache.pop();this.cache.push(a);b=!0}else d="{"!=d||this.lastSymbolQuoted?"["!=d||this.lastSymbolQuoted?this.convertSymbolToProperType(d):this.doArray():this.doObject(),C.setField(a,c,d)}}throw new K("Unexpected end of file. Expected '}'");},doArray:function(){for(var a=[],b;this.pos<this.json.length;)if(b=this.getNextSymbol(),","!=b||this.lastSymbolQuoted){if("]"!=b||this.lastSymbolQuoted)b="{"!=b||this.lastSymbolQuoted?
"["!=b||this.lastSymbolQuoted?this.convertSymbolToProperType(b):this.doArray():this.doObject();else return a;a.push(b)}throw new K("Unexpected end of file. Expected ']'");},convertSymbolToProperType:function(a){return this.lastSymbolQuoted?L.startsWith(a,fe.OBJECT_REFERENCE_PREFIX)?(a=u.parseInt(P.substr(a,fe.OBJECT_REFERENCE_PREFIX.length,null)),this.cache[a]):a:this.looksLikeFloat(a)?u.parseFloat(a):this.looksLikeInt(a)?u.parseInt(a):"true"==a.toLowerCase()?!0:"false"==a.toLowerCase()?!1:"null"==
a.toLowerCase()?null:a},looksLikeFloat:function(a){return this.floatRegex.match(a)?!0:this.intRegex.match(a)?(a=this.intRegex.matched(0),45==P.cca(a,0)?"-2147483648"<a:"2147483647"<a):!1},looksLikeInt:function(a){return this.intRegex.match(a)},getNextSymbol:function(){this.lastSymbolQuoted=!1;for(var a,b=!1,c="",d="",e=!1,f=!1,m=!1,h=!1;this.pos<this.json.length;)if(a=this.json.charAt(this.pos++),"\n"!=a||f||this.currentLine++,m){if("\n"==a||"\r"==a)m=!1,this.pos++}else if(h)"*"==a&&"/"==this.json.charAt(this.pos)&&
(h=!1,this.pos++);else if(b){if(e){e=!1;if("'"==a||'"'==a){d+=a;continue}if("t"==a){d+="\t";continue}if("n"==a){d+="\n";continue}if("\\"==a){d+="\\";continue}if("r"==a){d+="\r";continue}if("/"==a){d+="/";continue}if("u"==a){for(var q=a=0;4>q;){q++;if(this.pos>=this.json.length)throw new K("Unfinished UTF8 character");var g=P.cca(this.json,this.pos++);a<<=4;if(48<=g&&57>=g)a+=g-48;else if(65<=g&&70>=g)a+=10+g-65;else if(97<=g&&102>=g)a+=10+g-95;else throw new K("Not a hex digit");}q=new Gf;q.addChar(a);
d+=q.toString();continue}throw new K("Invalid escape sequence '\\"+a+"'");}if("\\"==a)e=!0;else{if(a==c)return d;d+=a}}else{if("/"==a)if(q=this.json.charAt(this.pos),"/"==q){m=!0;this.pos++;continue}else if("*"==q){h=!0;this.pos++;continue}if(f){if(" "==a||"\n"==a||"\r"==a||"\t"==a||","==a||":"==a||"}"==a||"]"==a)return this.pos--,d;d+=a}else if(" "!=a&&"\t"!=a&&"\n"!=a&&"\r"!=a){if("{"==a||"}"==a||"["==a||"]"==a||","==a||":"==a)return a;"'"==a||'"'==a?(b=!0,c=a,this.lastSymbolQuoted=!0):(f=!0,d=
a)}}if(b)throw new K("Unexpected end of data. Expected ( "+c+" )");return d},defaultStringProcessor:function(a){return a},__class__:ck};var cb=function(){};k["zpp_nape.ZPP_Const"]=cb;cb.__name__=["zpp_nape","ZPP_Const"];cb.POSINF=function(){return Infinity};cb.NEGINF=function(){return-Infinity};var Kb=function(){};k["zpp_nape.ZPP_ID"]=Kb;Kb.__name__=["zpp_nape","ZPP_ID"];Kb.Constraint=function(){return Kb._Constraint++};Kb.Interactor=function(){return Kb._Interactor++};Kb.CbType=function(){return Kb._CbType++};
Kb.CbSet=function(){return Kb._CbSet++};Kb.Listener=function(){return Kb._Listener++};var Wd=function(){this.body=this.constraint=null;this.pre_swapped=!1;this.int1=this.int2=this.set=this.wrap_arbiters=this.pre_arbiter=null;this.length=0;this.listener=this.next=this.prev=null;this.event=0;this.outer_body=this.outer_con=this.outer_int=null;this.length=0};k["zpp_nape.callbacks.ZPP_Callback"]=Wd;Wd.__name__=["zpp_nape","callbacks","ZPP_Callback"];Wd.prototype={outer_body:null,outer_con:null,outer_int:null,
wrapper_body:function(){null==this.outer_body&&(this.outer_body=new mh,this.outer_body.zpp_inner=this);return this.outer_body},wrapper_con:function(){null==this.outer_con&&(this.outer_con=new oh,this.outer_con.zpp_inner=this);return this.outer_con},wrapper_int:function(){null==this.outer_int&&(this.outer_int=new qh,this.outer_int.zpp_inner=this);this.genarbs();return this.outer_int},event:null,listener:null,next:null,prev:null,length:null,push:function(a){null!=this.prev?this.prev.next=a:this.next=
a;a.prev=this.prev;a.next=null;this.prev=a;this.length++},pop:function(){var a=this.next;this.next=a.next;null==this.next?this.prev=null:this.next.prev=null;this.length--;return a},empty:function(){return null==this.next},free:function(){this.listener=this.constraint=this.body=this.int1=this.int2=null;null!=this.wrap_arbiters&&(this.wrap_arbiters.zpp_inner.inner=null);this.set=null},alloc:function(){},int1:null,int2:null,set:null,wrap_arbiters:null,pre_arbiter:null,pre_swapped:null,genarbs:function(){null==
this.wrap_arbiters?this.wrap_arbiters=$e.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=!0;this.wrap_arbiters.zpp_inner.at_ite=null},body:null,constraint:null,__class__:Wd};var Ba=function(){this.interactors=this.constraints=null;this.zip_conlisteners=!1;this.conlisteners=null;this.zip_bodylisteners=!1;this.bodylisteners=null;this.zip_listeners=!1;this.manager=this.cbpairs=this.listeners=null;this.id=0;this.next=null;this.count=
0;this.cbTypes=new dd;this.listeners=new Nf;this.zip_listeners=!0;this.bodylisteners=new hi;this.zip_bodylisteners=!0;this.conlisteners=new ii;this.zip_conlisteners=!0;this.constraints=new re;this.interactors=new Xd;this.id=Kb.CbSet();this.cbpairs=new dk};k["zpp_nape.callbacks.ZPP_CbSet"]=Ba;Ba.__name__=["zpp_nape","callbacks","ZPP_CbSet"];Ba.setlt=function(a,b){a=a.cbTypes.begin();for(b=b.cbTypes.begin();null!=a&&null!=b;){var c=a.elem(),d=b.elem();if(ab.setlt(c,d))return!0;if(ab.setlt(d,c))return!1;
a=a.next;b=b.next}return null!=b?null==a:!1};Ba.get=function(a){if(null==Ba.zpp_pool)var b=new Ba;else b=Ba.zpp_pool,Ba.zpp_pool=b.next,b.next=null;b.alloc();var c=null;for(a=a.begin();null!=a;){var d=a.elem();c=b.cbTypes.insert(c,d);d.cbsets.add(b);a=a.next}return b};Ba.empty_intersection=function(a,b){return a.manager.pair(a,b).empty_intersection()};Ba.single_intersection=function(a,b,c){return a.manager.pair(a,b).single_intersection(c)};Ba.find_all=function(a,b,c,d){a.manager.pair(a,b).forall(c,
d)};Ba.prototype={cbTypes:null,count:null,next:null,id:null,manager:null,cbpairs:null,increment:function(){this.count++},decrement:function(){return 0==--this.count},invalidate_pairs:function(){for(var a=this.cbpairs.begin();null!=a;)a.elem().invalidate(),a=a.next},listeners:null,zip_listeners:null,invalidate_listeners:function(){this.zip_listeners=!0;this.invalidate_pairs()},validate_listeners:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners())},realvalidate_listeners:function(){this.listeners.clear();
for(var a=this.cbTypes.begin();null!=a;){var b=a.elem(),c=null,d=this.listeners.begin();for(b=b.listeners.begin();null!=b;){var e=b.elem();null!=d&&d.elem()==e?(b=b.next,c=d,d=d.next):null==d||wb.setlt(e,d.elem())?(this.manager.valid_listener(e)&&(c=this.listeners.inlined_insert(c,e)),b=b.next):(c=d,d=d.next)}a=a.next}},bodylisteners:null,zip_bodylisteners:null,invalidate_bodylisteners:function(){this.zip_bodylisteners=!0},validate_bodylisteners:function(){this.zip_bodylisteners&&(this.zip_bodylisteners=
!1,this.realvalidate_bodylisteners())},realvalidate_bodylisteners:function(){this.bodylisteners.clear();for(var a=this.cbTypes.begin();null!=a;){var b=a.elem(),c=null,d=this.bodylisteners.begin();for(b=b.bodylisteners.begin();null!=b;){var e=b.elem();null!=d&&d.elem()==e?(b=b.next,c=d,d=d.next):null==d||wb.setlt(e,d.elem())?(!e.options.excluded(this.cbTypes)&&this.manager.valid_listener(e)&&(c=this.bodylisteners.inlined_insert(c,e)),b=b.next):(c=d,d=d.next)}a=a.next}},conlisteners:null,zip_conlisteners:null,
invalidate_conlisteners:function(){this.zip_conlisteners=!0},validate_conlisteners:function(){this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var a=this.cbTypes.begin();null!=a;){var b=a.elem(),c=null,d=this.conlisteners.begin();for(b=b.conlisteners.begin();null!=b;){var e=b.elem();null!=d&&d.elem()==e?(b=b.next,c=d,d=d.next):null==d||wb.setlt(e,d.elem())?(!e.options.excluded(this.cbTypes)&&this.manager.valid_listener(e)&&
(c=this.conlisteners.inlined_insert(c,e)),b=b.next):(c=d,d=d.next)}a=a.next}},validate:function(){this.validate_listeners();this.validate_bodylisteners();this.validate_conlisteners()},interactors:null,constraints:null,addConstraint:function(a){this.constraints.add(a)},addInteractor:function(a){this.interactors.add(a)},remConstraint:function(a){this.constraints.remove(a)},remInteractor:function(a){this.interactors.remove(a)},free:function(){this.listeners.clear();this.zip_listeners=!0;this.bodylisteners.clear();
this.zip_bodylisteners=!0;this.conlisteners.clear();for(this.zip_conlisteners=!0;!this.cbTypes.empty();)this.cbTypes.pop_unsafe().cbsets.remove(this)},alloc:function(){},__class__:Ba};var Sb=function(){this.listeners=null;this.zip_listeners=!1;this.a=this.b=this.next=null;this.listeners=new Nf};k["zpp_nape.callbacks.ZPP_CbSetPair"]=Sb;Sb.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"];Sb.get=function(a,b){if(null==Sb.zpp_pool)var c=new Sb;else c=Sb.zpp_pool,Sb.zpp_pool=c.next,c.next=null;c.alloc();
Ba.setlt(a,b)?(c.a=a,c.b=b):(c.a=b,c.b=a);return c};Sb.setlt=function(a,b){return Ba.setlt(a.a,b.a)?!0:a.a==b.a?Ba.setlt(a.b,b.b):!1};Sb.prototype={a:null,b:null,next:null,free:function(){this.a=this.b=null;this.listeners.clear()},alloc:function(){this.zip_listeners=!0},compatible:function(a){return a.options1.compatible(this.a.cbTypes)&&a.options2.compatible(this.b.cbTypes)?!0:a.options2.compatible(this.a.cbTypes)?a.options1.compatible(this.b.cbTypes):!1},zip_listeners:null,listeners:null,invalidate:function(){this.zip_listeners=
!0},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.__validate())},__validate:function(){this.listeners.clear();for(var a=this.a.listeners.begin(),b=this.b.listeners.begin();null!=a&&null!=b;){var c=a.elem(),d=b.elem();c==d?(this.compatible(c)&&this.listeners.add(c),a=a.next,b=b.next):wb.setlt(c,d)?a=a.next:b=b.next}},empty_intersection:function(){return this.listeners.empty()},single_intersection:function(a){var b=this.listeners.begin();return null!=b&&b.elem()==a?null==b.next:
!1},forall:function(a,b){for(var c=this.listeners.begin();null!=c;){var d=c.elem();d.event==a&&b(d);c=c.next}},__class__:Sb};var Nf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=Nf;Nf.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"];Nf.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==hc.zpp_pool)var b=
new hc;else b=hc.zpp_pool,hc.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},inlined_insert:function(a,b){if(null==hc.zpp_pool)var c=new hc;else c=hc.zpp_pool,hc.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=hc.zpp_pool;hc.zpp_pool=
a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=hc.zpp_pool;hc.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return b},clear:function(){this.inlined_clear()},inlined_clear:function(){for(;!this.empty();)this.inlined_pop();this.pushmod=!0},empty:function(){return null==this.begin()},__class__:Nf};var hi=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_BodyListener"]=hi;hi.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"];hi.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,inlined_insert:function(a,
b){if(null==Yd.zpp_pool)var c=new Yd;else c=Yd.zpp_pool,Yd.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=Yd.zpp_pool;Yd.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),
d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Yd.zpp_pool;Yd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},clear:function(){this.inlined_clear()},inlined_clear:function(){for(;!this.empty();)this.inlined_pop();this.pushmod=!0},empty:function(){return null==
this.begin()},__class__:hi};var ii=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=ii;ii.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"];ii.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,inlined_insert:function(a,b){if(null==Zd.zpp_pool)var c=new Zd;else c=Zd.zpp_pool,Zd.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=
a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=Zd.zpp_pool;Zd.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=
b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Zd.zpp_pool;Zd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},clear:function(){this.inlined_clear()},inlined_clear:function(){for(;!this.empty();)this.inlined_pop();this.pushmod=!0},empty:function(){return null==this.begin()},__class__:ii};var re=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Constraint"]=
re;re.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"];re.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==uc.zpp_pool)var b=new uc;else b=uc.zpp_pool,uc.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){if(null==uc.zpp_pool)var c=
new uc;else c=uc.zpp_pool,uc.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=uc.zpp_pool;uc.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();
this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=uc.zpp_pool;uc.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return b},clear:function(){this.inlined_clear()},inlined_clear:function(){for(;!this.empty();)this.inlined_pop();this.pushmod=!0},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:re};var Xd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Interactor"]=Xd;Xd.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"];
Xd.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==Ld.zpp_pool)var b=new Ld;else b=Ld.zpp_pool,Ld.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=Ld.zpp_pool;Ld.zpp_pool=a;this.empty()&&(this.pushmod=
!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=
b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Ld.zpp_pool;Ld.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},clear:function(){this.inlined_clear()},inlined_clear:function(){for(;!this.empty();)this.inlined_pop();this.pushmod=!0},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:Xd};var gg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=
null};k["zpp_nape.util.ZNPList_ZPP_CbSet"]=gg;gg.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"];gg.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==$d.zpp_pool)var b=new $d;else b=$d.zpp_pool,$d.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.begin();this.head=a.next;a.free();a.next=$d.zpp_pool;$d.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=
this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=$d.zpp_pool;$d.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},__class__:gg};var ab=function(){this.cbsets=this.listeners=this.bodylisteners=this.conlisteners=null;this.id=0;this.outer=null;this.id=Kb.CbType();this.listeners=new Nf;this.bodylisteners=
new hi;this.conlisteners=new ii;this.constraints=new re;this.interactors=new Xd;this.cbsets=new gg};k["zpp_nape.callbacks.ZPP_CbType"]=ab;ab.__name__=["zpp_nape","callbacks","ZPP_CbType"];ab.setlt=function(a,b){return a.id<b.id};ab.prototype={outer:null,id:null,cbsets:null,interactors:null,constraints:null,addConstraint:function(a){this.constraints.add(a)},addInteractor:function(a){this.interactors.add(a)},remConstraint:function(a){this.constraints.remove(a)},remInteractor:function(a){this.interactors.remove(a)},
listeners:null,addint:function(a){for(var b=null,c=this.listeners.begin();null!=c;){var d=c.elem();if(wb.setlt(a,d))break;b=c;c=c.next}this.listeners.inlined_insert(b,a);this.invalidateint()},removeint:function(a){this.listeners.remove(a);this.invalidateint()},invalidateint:function(){for(var a=this.cbsets.begin();null!=a;)a.elem().invalidate_listeners(),a=a.next},bodylisteners:null,addbody:function(a){for(var b=null,c=this.bodylisteners.begin();null!=c;){var d=c.elem();if(wb.setlt(a,d))break;b=c;
c=c.next}this.bodylisteners.inlined_insert(b,a);this.invalidatebody()},removebody:function(a){this.bodylisteners.remove(a);this.invalidatebody()},invalidatebody:function(){for(var a=this.cbsets.begin();null!=a;)a.elem().invalidate_bodylisteners(),a=a.next},conlisteners:null,addconstraint:function(a){for(var b=null,c=this.conlisteners.begin();null!=c;){var d=c.elem();if(wb.setlt(a,d))break;b=c;c=c.next}this.conlisteners.inlined_insert(b,a);this.invalidateconstraint()},removeconstraint:function(a){this.conlisteners.remove(a);
this.invalidateconstraint()},invalidateconstraint:function(){for(var a=this.cbsets.begin();null!=a;)a.elem().invalidate_conlisteners(),a=a.next},__class__:ab};var r=function(){};k["zpp_nape.util.ZPP_Flags"]=r;r.__name__=["zpp_nape","util","ZPP_Flags"];var wb=function(){this.body=this.constraint=this.interaction=this.space=null;this.id=this.type=this.event=this.precedence=0;this.outer=null;this.id=Kb.Listener()};k["zpp_nape.callbacks.ZPP_Listener"]=wb;wb.__name__=["zpp_nape","callbacks","ZPP_Listener"];
wb.setlt=function(a,b){return a.precedence<=b.precedence?a.precedence==b.precedence?a.id>b.id:!1:!0};wb.prototype={outer:null,id:null,type:null,event:null,precedence:null,body:null,constraint:null,interaction:null,space:null,addedToSpace:function(){},removedFromSpace:function(){},__class__:wb};var nh=function(a,b,c){this.outer_zn=this.options=this.handler=null;wb.call(this);this.event=b;this.handler=c;this.body=this;this.type=0;this.options=a.zpp_inner};k["zpp_nape.callbacks.ZPP_BodyListener"]=nh;
nh.__name__=["zpp_nape","callbacks","ZPP_BodyListener"];nh.__super__=wb;nh.prototype=w(wb.prototype,{outer_zn:null,options:null,handler:null,addedToSpace:function(){this.options.handler=l(this,this.cbtype_change);for(var a=this.options.includes.begin();null!=a;)a.elem().addbody(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.begin();null!=a;)a.elem().removebody(this),a=a.next;this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,
b,c);this.addedToSpace()},__class__:nh});var ph=function(a,b,c){this.outer_zn=this.options=this.handler=null;wb.call(this);this.event=b;this.handler=c;this.constraint=this;this.type=1;this.options=a.zpp_inner};k["zpp_nape.callbacks.ZPP_ConstraintListener"]=ph;ph.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"];ph.__super__=wb;ph.prototype=w(wb.prototype,{outer_zn:null,options:null,handler:null,addedToSpace:function(){this.options.handler=l(this,this.cbtype_change);for(var a=this.options.includes.begin();null!=
a;)a.elem().addconstraint(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.begin();null!=a;)a.elem().removeconstraint(this),a=a.next;this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:ph});var dd=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_CbType"]=dd;dd.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"];dd.prototype={head:null,
begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==Ic.zpp_pool)var b=new Ic;else b=Ic.zpp_pool,Ic.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){if(null==Ic.zpp_pool)var c=new Ic;else c=Ic.zpp_pool,Ic.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;
b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=Ic.zpp_pool;Ic.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=
null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Ic.zpp_pool;Ic.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},clear:function(){this.inlined_clear()},inlined_clear:function(){for(;!this.empty();)this.inlined_pop();this.pushmod=!0},
empty:function(){return null==this.begin()},has:function(a){return this.inlined_has(a)},inlined_has:function(a){var b=!1;for(var c=this.begin();null!=c;){if(c.elem()==a){b=!0;break}c=c.next}return b},front:function(){return this.begin().elem()},iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:dd};var ob=function(a,b,c,d){this.handlerp=null;this.allowSleepingCallbacks=this.pure=!1;this.options1=this.options2=this.handleri=null;this.itype=0;this.outer_zni=
this.outer_znp=null;wb.call(this);this.type=d;this.interaction=this;this.event=c;this.options1=a.zpp_inner;this.options2=b.zpp_inner;this.allowSleepingCallbacks=!1};k["zpp_nape.callbacks.ZPP_InteractionListener"]=ob;ob.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"];ob.__super__=wb;ob.prototype=w(wb.prototype,{outer_zni:null,outer_znp:null,itype:null,options1:null,options2:null,handleri:null,allowSleepingCallbacks:null,pure:null,handlerp:null,setInteractionType:function(a){this.itype=
a},CbSetset:function(a,b,c){var d=ob.UCbSet,e=ob.VCbSet,f=ob.WCbSet;a=a.begin();for(var m=b.begin();null!=a&&null!=m;){var h=a.elem(),q=m.elem();h==q?(f.inlined_add(h),a=a.next,m=m.next):Ba.setlt(h,q)?(d.inlined_add(h),a=a.next):(e.inlined_add(q),m=m.next)}for(;null!=a;)d.inlined_add(a.elem()),a=a.next;for(;null!=m;)e.inlined_add(m.elem()),m=m.next;for(;!d.empty();)for(a=d.pop_unsafe(),m=b.begin();null!=m;)h=m.elem(),c(a,h),m=m.next;for(;!e.empty();)for(b=e.pop_unsafe(),d=f.begin();null!=d;)a=d.elem(),
c(b,a),d=d.next;for(;!f.empty();)for(e=f.pop_unsafe(),c(e,e),b=f.begin();null!=b;)d=b.elem(),c(e,d),b=b.next},CbTypeset:function(a,b,c){var d=ob.UCbType,e=ob.VCbType,f=ob.WCbType;a=a.begin();for(var m=b.begin();null!=a&&null!=m;){var h=a.elem(),q=m.elem();h==q?(f.inlined_add(h),a=a.next,m=m.next):ab.setlt(h,q)?(d.inlined_add(h),a=a.next):(e.inlined_add(q),m=m.next)}for(;null!=a;)d.inlined_add(a.elem()),a=a.next;for(;null!=m;)e.inlined_add(m.elem()),m=m.next;for(;!d.empty();)for(a=d.pop_unsafe(),m=
b.begin();null!=m;)h=m.elem(),c(a,h),m=m.next;for(;!e.empty();)for(b=e.pop_unsafe(),d=f.begin();null!=d;)a=d.elem(),c(b,a),d=d.next;for(;!f.empty();)for(e=f.pop_unsafe(),c(e,e),b=f.begin();null!=b;)d=b.elem(),c(e,d),b=b.next},with_uniquesets:function(a){var b=this;if(null==pb.zpp_pool)var c=new pb;else c=pb.zpp_pool,pb.zpp_pool=c.next,c.next=null;c.alloc();c.lt=Sb.setlt;this.CbTypeset(this.options1.includes,this.options2.includes,function(a,d){b.CbSetset(a.cbsets,d.cbsets,function(a,d){a.validate();
d.validate();Ba.single_intersection(a,d,b)&&(a=Sb.get(a,d),c.try_insert(a))})});c.clear_with(function(c){a?b.space.freshListenerType(c.a,c.b):b.space.nullListenerType(c.a,c.b);c.free();c.next=Sb.zpp_pool;Sb.zpp_pool=c});var d=c;d.free();d.next=pb.zpp_pool;pb.zpp_pool=d},with_union:function(a){for(var b=this.options1.includes.begin(),c=this.options2.includes.begin();null!=b&&null!=c;){var d=b.elem(),e=c.elem();d==e?(a(d),b=b.next,c=c.next):ab.setlt(d,e)?(a(d),b=b.next):(a(e),c=c.next)}for(;null!=b;)a(b.elem()),
b=b.next;for(;null!=c;)a(c.elem()),c=c.next},addedToSpace:function(){var a=this,b=3==this.type;this.with_union(function(c){c.addint(a);if(b)for(c=c.interactors.begin();null!=c;)c.elem().wake(),c=c.next});this.options1.handler=l(this,this.cbtype_change1);this.options2.handler=l(this,this.cbtype_change2);this.with_uniquesets(!0)},removedFromSpace:function(){var a=this;this.with_uniquesets(!1);var b=3==this.type;this.with_union(function(c){c.removeint(a);if(b)for(c=c.interactors.begin();null!=c;)c.elem().wake(),
c=c.next});this.options1.handler=null;this.options2.handler=null},cbtype_change1:function(a,b,c){this.cbtype_change(this.options1,a,b,c)},cbtype_change2:function(a,b,c){this.cbtype_change(this.options2,a,b,c)},cbtype_change:function(a,b,c,d){this.space.revoke_listener(this);this.removedFromSpace();a.effect_change(b,c,d);this.addedToSpace();this.space.unrevoke_listener(this)},__class__:ob});var hd=function(){this.outer=this.handler=this.includes=this.excludes=this.wrap_includes=this.wrap_excludes=
null;this.includes=new dd;this.excludes=new dd};k["zpp_nape.callbacks.ZPP_OptionType"]=hd;hd.__name__=["zpp_nape","callbacks","ZPP_OptionType"];hd.argument=function(a){return null==a?new If:u.is(a,If)?a:(new If).including(a)};hd.prototype={outer:null,handler:null,includes:null,excludes:null,wrap_includes:null,wrap_excludes:null,setup_includes:function(){this.wrap_includes=id.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=id.get(this.excludes,!0)},excluded:function(a){return this.nonemptyintersection(a,
this.excludes)},included:function(a){return this.nonemptyintersection(a,this.includes)},compatible:function(a){return this.included(a)?!this.excluded(a):!1},nonemptyintersection:function(a,b){var c=!1;a=a.begin();for(b=b.begin();null!=b&&null!=a;){var d=b.elem(),e=a.elem();if(d==e){c=!0;break}else ab.setlt(d,e)?b=b.next:a=a.next}return c},effect_change:function(a,b,c){if(b)if(c){b=null;for(c=this.includes.begin();null!=c;){var d=c.elem();if(ab.setlt(a,d))break;b=c;c=c.next}this.includes.inlined_insert(b,
a)}else this.includes.remove(a);else if(c){b=null;for(c=this.excludes.begin();null!=c;){d=c.elem();if(ab.setlt(a,d))break;b=c;c=c.next}this.excludes.inlined_insert(b,a)}else this.excludes.remove(a)},append_type:function(a,b){a==this.includes?this.includes.has(b)||(this.excludes.has(b)?null!=this.handler?this.handler(b,!1,!1):this.effect_change(b,!1,!1):null!=this.handler?this.handler(b,!0,!0):this.effect_change(b,!0,!0)):this.excludes.has(b)||(this.includes.has(b)?null!=this.handler?this.handler(b,
!0,!1):this.effect_change(b,!0,!1):null!=this.handler?this.handler(b,!1,!0):this.effect_change(b,!1,!0))},append:function(a,b){if(u.is(b,ua))this.append_type(a,b.zpp_inner);else if(u.is(b,Ye))for(b=b.iterator();b.hasNext();){var c=b.next();this.append_type(a,c.zpp_inner)}else if(b instanceof Array&&null==b.__enum__)for(c=0;c<b.length;){var d=b[c];++c;this.append_type(a,d.zpp_inner)}},__class__:hd};var Ma=function(){this.pre_dt=0;this.cbTypes=this.cbSet=this.wrap_cbTypes=null;this.ignore=this.__velocity=
!1;this.component=null;this.breakUnderForce=this.breakUnderError=this.removeOnBreak=!1;this.frequency=this.damping=this.maxForce=this.maxError=0;this.active=this.stiff=!1;this.compound=this.space=null;this.id=0;this.outer=null;this.__velocity=!1;this.id=Kb.Constraint();this.active=this.stiff=!0;this.ignore=!1;this.frequency=10;this.damping=1;this.maxForce=cb.POSINF();this.maxError=cb.POSINF();this.breakUnderForce=!1;this.removeOnBreak=!0;this.pre_dt=-1;this.cbTypes=new dd};k["zpp_nape.constraint.ZPP_Constraint"]=
Ma;Ma.__name__=["zpp_nape","constraint","ZPP_Constraint"];Ma.prototype={outer:null,id:null,compound:null,space:null,active:null,stiff:null,frequency:null,damping:null,maxForce:null,maxError:null,breakUnderForce:null,breakUnderError:null,removeOnBreak:null,component:null,ignore:null,__velocity:null,immutable_midstep:function(a){},cbTypes:null,cbSet:null,wrap_cbTypes:null,setupcbTypes:function(){this.wrap_cbTypes=id.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=l(this,this.wrap_cbTypes_adder);
this.wrap_cbTypes.zpp_inner.subber=l(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=!0},wrap_cbTypes_subber:function(a){a=a.zpp_inner;this.cbTypes.has(a)&&(null!=this.space&&(this.dealloc_cbSet(),a.remConstraint(this)),this.cbTypes.remove(a),null!=this.space&&(this.alloc_cbSet(),this.wake()))},wrap_cbTypes_adder:function(a){this.insert_cbtype(a.zpp_inner);return!1},insert_cbtype:function(a){if(!this.cbTypes.has(a)){null!=this.space&&(this.dealloc_cbSet(),a.addConstraint(this));
for(var b=null,c=this.cbTypes.begin();null!=c;){var d=c.elem();if(ab.setlt(a,d))break;b=c;c=c.next}this.cbTypes.inlined_insert(b,a);null!=this.space&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){null!=(this.cbSet=this.space.cbsets.get(this.cbTypes))&&(this.cbSet.increment(),this.cbSet.addConstraint(this))},dealloc_cbSet:function(){if(null!=this.cbSet){this.cbSet.remConstraint(this);if(this.cbSet.decrement()){this.space.cbsets.remove(this.cbSet);var a=this.cbSet;a.free();a.next=Ba.zpp_pool;
Ba.zpp_pool=a}this.cbSet=null}},activate:function(){null!=this.space&&this.activeInSpace()},deactivate:function(){null!=this.space&&this.inactiveOrOutSpace()},addedToSpace:function(){this.active&&this.activeInSpace();this.activeBodies();for(var a=this.cbTypes.begin();null!=a;)a.elem().addConstraint(this),a=a.next},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace();this.inactiveBodies();for(var a=this.cbTypes.begin();null!=a;)a.elem().remConstraint(this),a=a.next},activeInSpace:function(){this.alloc_cbSet();
null==Jc.zpp_pool?this.component=new Jc:(this.component=Jc.zpp_pool,Jc.zpp_pool=this.component.next,this.component.next=null);this.component.alloc();this.component.isBody=!1;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var a=this.component;a.free();a.next=Jc.zpp_pool;Jc.zpp_pool=a;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(a,b){return!1},
broken:function(){},warmStart:function(){},pre_dt:null,preStep:function(a){return!1},applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},wake:function(){null!=this.space&&this.space.wake_constraint(this)},__class__:Ma};var sh=function(){this.stepped=!1;this.kMass=this.jAcc=this.jMax=this.gamma=this.bias=0;this.b1=this.b2=null;this.scale=0;this.slack=this.equal=!1;this.ratio=this.jointMin=this.jointMax=0;this.outer_zn=null;Ma.call(this);this.ratio=1;this.jAcc=0;this.slack=!1;
this.jMax=cb.POSINF();this.stepped=!1};k["zpp_nape.constraint.ZPP_AngleJoint"]=sh;sh.__name__=["zpp_nape","constraint","ZPP_AngleJoint"];sh.__super__=Ma;sh.prototype=w(Ma.prototype,{outer_zn:null,ratio:null,jointMin:null,jointMax:null,slack:null,equal:null,scale:null,bodyImpulse:function(a){return this.stepped?a==this.b1?oa.get(0,0,-this.scale*this.jAcc):oa.get(0,0,this.ratio*this.scale*this.jAcc):oa.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this);this.b2!=this.b1&&
null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},b1:null,b2:null,kMass:null,jAcc:null,jMax:null,gamma:null,bias:null,stepped:null,wake_connected:function(){null!=this.b1&&this.b1.isDynamic()&&this.b1.wake();null!=this.b2&&this.b2.isDynamic()&&this.b2.wake()},forest:function(){if(this.b1.isDynamic()){if(this.b1.component==this.b1.component.parent)var a=this.b1.component;
else{a=this.b1.component;for(var b=null;a!=a.parent;){var c=a.parent;a.parent=b;b=a;a=c}for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;){var d=b.parent;b.parent=c;c=b;b=d}for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(this.b2.isDynamic()){if(this.b2.component==this.b2.component.parent)a=this.b2.component;else{a=this.b2.component;
for(b=null;a!=a.parent;)c=a.parent,a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}},pair_exists:function(a,b){return this.b1.id!=a||this.b2.id!=b?this.b1.id==b?this.b2.id==a:!1:!0},clearcache:function(){this.jAcc=0;this.pre_dt=-1;this.slack=
!1},preStep:function(a){-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.stepped=!0;this.equal=this.jointMin==this.jointMax;var c=this.ratio*this.b2.rot-this.b1.rot;this.equal?(c-=this.jointMax,this.slack=!1,this.scale=1):c<this.jointMin?(c=this.jointMin-c,this.scale=-1,this.slack=!1):c>this.jointMax?(c-=this.jointMax,this.scale=1,this.slack=!1):(c=this.scale=0,this.slack=!0);if(!this.slack){this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia;0!=this.kMass?this.kMass=
1/this.kMass:this.jAcc=0;if(this.stiff)this.gamma=this.bias=0;else{if(this.breakUnderError&&c*c>this.maxError*this.maxError)return!0;var d=2*Math.PI*this.frequency;this.gamma=1/(a*d*(2*this.damping+d*a));var e=1/(1+this.gamma);d=a*d*d*this.gamma;this.gamma*=e;this.kMass*=e;this.bias=-c*d;this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=b;this.jMax=this.maxForce*a}return!1},warmStart:function(){this.slack||(this.b1.angvel-=this.scale*this.b1.iinertia*
this.jAcc,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*this.jAcc)},applyImpulseVel:function(){if(this.slack)return!1;var a=this.kMass*(this.bias-this.scale*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel))-this.jAcc*this.gamma,b=this.jAcc;this.jAcc+=a;!this.equal&&0<this.jAcc&&(this.jAcc=0);if(this.breakUnderForce&&(this.jAcc>this.jMax||this.jAcc<-this.jMax))return!0;this.stiff||(this.jAcc>this.jMax?this.jAcc=this.jMax:this.jAcc<-this.jMax&&(this.jAcc=-this.jMax));
a=this.jAcc-b;this.b1.angvel-=this.scale*this.b1.iinertia*a;this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*a;return!1},applyImpulsePos:function(){var a=this.ratio*this.b2.rot-this.b1.rot;if(this.equal){a-=this.jointMax;var b=!1;this.scale=1}else a<this.jointMin?(a=this.jointMin-a,this.scale=-1,b=!1):a>this.jointMax?(a-=this.jointMax,this.scale=1,b=!1):(a=this.scale=0,b=!0);if(!b){if(this.breakUnderError&&a*a>this.maxError*this.maxError)return!0;b=-(.5*a)*this.kMass;if(this.equal||0>b)this.b1.delta_rot(-this.scale*
b*this.b1.iinertia),this.b2.delta_rot(this.ratio*this.scale*b*this.b2.iinertia)}return!1},__class__:sh});var th=function(){this.stepped=!1;this.kMass=this.jAcc=this.jMax=this.gamma=this.bias=0;this.wrap_a2=null;this.a2localx=this.a2localy=this.a2relx=this.a2rely=0;this.wrap_a1=this.b2=null;this.a1localx=this.a1localy=this.a1relx=this.a1rely=0;this.b1=null;this.nx=this.ny=this.cx1=this.cx2=0;this.slack=this.equal=!1;this.jointMin=this.jointMax=0;this.outer_zn=null;Ma.call(this);this.jAcc=this.a2rely=
this.a2relx=this.a2localy=this.a2localx=this.a1rely=this.a1relx=this.a1localy=this.a1localx=0;this.jMax=cb.POSINF();this.stepped=!1;this.cx1=this.cx2=0};k["zpp_nape.constraint.ZPP_DistanceJoint"]=th;th.__name__=["zpp_nape","constraint","ZPP_DistanceJoint"];th.__super__=Ma;th.prototype=w(Ma.prototype,{outer_zn:null,jointMin:null,jointMax:null,slack:null,equal:null,nx:null,ny:null,cx1:null,cx2:null,bodyImpulse:function(a){return this.stepped?a==this.b1?oa.get(-this.jAcc*this.nx,-this.jAcc*this.ny,-this.cx1*
this.jAcc):oa.get(this.jAcc*this.nx,this.jAcc*this.ny,this.cx2*this.jAcc):oa.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=
this.a1localy},invalidate_a1:function(a){this.immutable_midstep("Constraint::a1");this.a1localx=a.x;this.a1localy=a.y;this.wake()},setup_a1:function(){this.wrap_a1=v.get(this.a1localx,this.a1localy);this.wrap_a1.zpp_inner._inuse=!0;this.wrap_a1.zpp_inner._validate=l(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=l(this,this.invalidate_a1)},wrap_a1:null,b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=
this.a2localy},invalidate_a2:function(a){this.immutable_midstep("Constraint::a2");this.a2localx=a.x;this.a2localy=a.y;this.wake()},setup_a2:function(){this.wrap_a2=v.get(this.a2localx,this.a2localy);this.wrap_a2.zpp_inner._inuse=!0;this.wrap_a2.zpp_inner._validate=l(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=l(this,this.invalidate_a2)},wrap_a2:null,kMass:null,jAcc:null,jMax:null,gamma:null,bias:null,stepped:null,wake_connected:function(){null!=this.b1&&this.b1.isDynamic()&&this.b1.wake();
null!=this.b2&&this.b2.isDynamic()&&this.b2.wake()},forest:function(){if(this.b1.isDynamic()){if(this.b1.component==this.b1.component.parent)var a=this.b1.component;else{a=this.b1.component;for(var b=null;a!=a.parent;){var c=a.parent;a.parent=b;b=a;a=c}for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;){var d=b.parent;b.parent=c;c=b;b=d}for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=
b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(this.b2.isDynamic()){if(this.b2.component==this.b2.component.parent)a=this.b2.component;else{a=this.b2.component;for(b=null;a!=a.parent;)c=a.parent,a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=
a,a.rank++))}},pair_exists:function(a,b){return this.b1.id!=a||this.b2.id!=b?this.b1.id==b?this.b2.id==a:!1:!0},clearcache:function(){this.jAcc=0;this.pre_dt=-1},preStep:function(a){-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.stepped=!0;this.equal=this.jointMin==this.jointMax;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;
this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;this.nx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.ny=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);var c=this.nx*this.nx+this.ny*this.ny;if(c<x.epsilon)c=this.ny=this.nx=0,this.slack=!0;else{c=Ga.sqrt(c);var d=1/c;this.nx*=d;this.ny*=d;this.equal?(c-=this.jointMax,this.slack=!1):c<this.jointMin?(c=this.jointMin-c,this.nx=-this.nx,this.ny=-this.ny,this.slack=!1):c>this.jointMax?(c-=this.jointMax,this.slack=!1):
(c=this.ny=this.nx=0,this.slack=!0)}if(!this.slack){this.cx1=this.ny*this.a1relx-this.nx*this.a1rely;this.cx2=this.ny*this.a2relx-this.nx*this.a2rely;this.kMass=this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia;0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0;if(this.stiff)this.gamma=this.bias=0;else{if(this.breakUnderError&&c*c>this.maxError*this.maxError)return!0;var e=2*Math.PI*this.frequency;this.gamma=1/(a*e*(2*this.damping+e*a));d=1/(1+this.gamma);
e=a*e*e*this.gamma;this.gamma*=d;this.kMass*=d;this.bias=-c*e;this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=b;this.jMax=this.maxForce*a}return!1},warmStart:function(){if(!this.slack){var a=this.b1.imass*this.jAcc;this.b1.velx-=this.nx*a;this.b1.vely-=this.ny*a;a=this.b2.imass*this.jAcc;this.b2.velx+=this.nx*a;this.b2.vely+=this.ny*a;this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc;this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc}},
applyImpulseVel:function(){if(this.slack)return!1;var a=this.kMass*(this.bias-(this.nx*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.ny*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1))-this.jAcc*this.gamma,b=this.jAcc;this.jAcc+=a;!this.equal&&0<this.jAcc&&(this.jAcc=0);if(this.breakUnderForce&&this.jAcc<-this.jMax)return!0;!this.stiff&&this.jAcc<-this.jMax&&(this.jAcc=-this.jMax);
a=this.jAcc-b;b=this.b1.imass*a;this.b1.velx-=this.nx*b;this.b1.vely-=this.ny*b;b=this.b2.imass*a;this.b2.velx+=this.nx*b;this.b2.vely+=this.ny*b;this.b1.angvel-=this.cx1*this.b1.iinertia*a;this.b2.angvel+=this.cx2*this.b2.iinertia*a;return!1},applyImpulsePos:function(){var a=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;var b=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var c=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;var d=this.a2localx*this.b2.axisx+this.a2localy*
this.b2.axisy;var e=this.b2.posx+c-(this.b1.posx+a);var f=this.b2.posy+d-(this.b1.posy+b);var m=e*e+f*f;if(m<x.epsilon){m=f=e=0;var h=!0}else m=Ga.sqrt(m),h=1/m,e*=h,f*=h,this.equal?(m-=this.jointMax,h=!1):m<this.jointMin?(m=this.jointMin-m,e=-e,f=-f,h=!1):m>this.jointMax?(m-=this.jointMax,h=!1):(m=f=e=0,h=!0);if(!h){if(this.breakUnderError&&m*m>this.maxError*this.maxError)return!0;if(m*m<x.constraintLinearSlop*x.constraintLinearSlop)return!1;m*=.5;6<m*m&&(h=this.b1.smass+this.b2.smass,h>x.epsilon&&
(h=.75/h*-m,this.equal||0>h))&&(m=h*this.b1.imass,this.b1.posx-=e*m,this.b1.posy-=f*m,m=h*this.b2.imass,this.b2.posx+=e*m,this.b2.posy+=f*m,e=this.b2.posx+c-(this.b1.posx+a),f=this.b2.posy+d-(this.b1.posy+b),m=e*e+f*f,m<x.epsilon?m=f=e=0:(m=Ga.sqrt(m),h=1/m,e*=h,f*=h,this.equal?m-=this.jointMax:m<this.jointMin?(m=this.jointMin-m,e=-e,f=-f):m>this.jointMax?m-=this.jointMax:m=f=e=0),m*=.5);a=f*a-e*b;c=f*c-e*d;d=this.b1.smass+this.b2.smass+a*a*this.b1.sinertia+c*c*this.b2.sinertia;0!=d&&(d=1/d);h=-m*
d;if(this.equal||0>h)d=this.b1.imass*h,this.b1.posx-=e*d,this.b1.posy-=f*d,d=this.b2.imass*h,this.b2.posx+=e*d,this.b2.posy+=f*d,this.b1.delta_rot(-a*this.b1.iinertia*h),this.b2.delta_rot(c*this.b2.iinertia*h)}return!1},__class__:th});var uh=function(){this.kMassa=this.kMassb=this.kMassc=this.jAccx=this.jAccy=this.biasx=this.biasy=0;this.wrap_n=null;this.nlocalx=this.nlocaly=this.nrelx=this.nrely=0;this.wrap_a2=null;this.a2localx=this.a2localy=this.a2relx=this.a2rely=0;this.wrap_a1=null;this.dot1=
this.dot2=this.cx1=this.cx2=this.a1localx=this.a1localy=this.a1relx=this.a1rely=0;this.equal=!1;this.scale=this.jointMin=this.jointMax=0;this.outer_zn=null;Ma.call(this);this.jAccy=this.jAccx=this.nrely=this.nrelx=this.nlocaly=this.nlocalx=this.a2rely=this.a2relx=this.a2localy=this.a2localx=this.a1rely=this.a1relx=this.a1localy=this.a1localx=0;this.jMax=cb.POSINF();this.jointMin=cb.NEGINF();this.jointMax=cb.POSINF();this.stepped=!1};k["zpp_nape.constraint.ZPP_LineJoint"]=uh;uh.__name__=["zpp_nape",
"constraint","ZPP_LineJoint"];uh.__super__=Ma;uh.prototype=w(Ma.prototype,{outer_zn:null,scale:null,jointMin:null,jointMax:null,equal:null,dot1:null,dot2:null,cx1:null,cx2:null,bodyImpulse:function(a){if(this.stepped){var b=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,c=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy;return a==this.b1?oa.get(-b,-c,this.scale*this.cx1*c-this.dot1*b):oa.get(b,c,this.scale*this.cx1*c-this.dot1*b)}return oa.get(0,0,0)},activeBodies:function(){null!=this.b1&&
this.b1.constraints.add(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(a){this.immutable_midstep("Constraint::a1");this.a1localx=a.x;this.a1localy=a.y;this.wake()},
setup_a1:function(){this.wrap_a1=v.get(this.a1localx,this.a1localy);this.wrap_a1.zpp_inner._inuse=!0;this.wrap_a1.zpp_inner._validate=l(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=l(this,this.invalidate_a1)},wrap_a1:null,b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(a){this.immutable_midstep("Constraint::a2");this.a2localx=a.x;this.a2localy=a.y;this.wake()},
setup_a2:function(){this.wrap_a2=v.get(this.a2localx,this.a2localy);this.wrap_a2.zpp_inner._inuse=!0;this.wrap_a2.zpp_inner._validate=l(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=l(this,this.invalidate_a2)},wrap_a2:null,zip_n:null,nlocalx:null,nlocaly:null,nrelx:null,nrely:null,validate_n:function(){this.wrap_n.zpp_inner.x=this.nlocalx;this.wrap_n.zpp_inner.y=this.nlocaly},invalidate_n:function(a){this.immutable_midstep("Constraint::n");this.nlocalx=a.x;this.nlocaly=a.y;this.zip_n=
!0;this.wake()},setup_n:function(){this.wrap_n=v.get(this.nlocalx,this.nlocaly);this.wrap_n.zpp_inner._inuse=!0;this.wrap_n.zpp_inner._validate=l(this,this.validate_n);this.wrap_n.zpp_inner._invalidate=l(this,this.invalidate_n)},wrap_n:null,validate_norm:function(){if(this.zip_n){this.zip_n=!1;var a=1/Math.sqrt(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly);this.nlocalx*=a;this.nlocaly*=a}},kMassa:null,kMassb:null,kMassc:null,jAccx:null,jAccy:null,jMax:null,gamma:null,biasx:null,biasy:null,
stepped:null,wake_connected:function(){null!=this.b1&&this.b1.isDynamic()&&this.b1.wake();null!=this.b2&&this.b2.isDynamic()&&this.b2.wake()},forest:function(){if(this.b1.isDynamic()){if(this.b1.component==this.b1.component.parent)var a=this.b1.component;else{a=this.b1.component;for(var b=null;a!=a.parent;){var c=a.parent;a.parent=b;b=a;a=c}for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;){var d=b.parent;
b.parent=c;c=b;b=d}for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(this.b2.isDynamic()){if(this.b2.component==this.b2.component.parent)a=this.b2.component;else{a=this.b2.component;for(b=null;a!=a.parent;)c=a.parent,a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,
c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}},pair_exists:function(a,b){return this.b1.id!=a||this.b2.id!=b?this.b1.id==b?this.b2.id==a:!1:!0},clearcache:function(){this.jAccy=this.jAccx=0;this.pre_dt=-1},preStep:function(a){-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.equal=this.jointMin==this.jointMax;this.stepped=!0;this.validate_norm();this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*
this.b1.axisx+this.a1localy*this.b1.axisy;this.nrelx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly;this.nrely=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var c=this.b2.posx+this.a2relx-this.b1.posx-this.a1relx;var d=this.b2.posy+this.a2rely-this.b1.posy-this.a1rely;var e=d*this.nrelx-c*this.nrely;var f=this.nrelx*c+this.nrely*d;this.equal?(f-=this.jointMin,
this.scale=1):f>this.jointMax?(f-=this.jointMax,this.scale=1):f<this.jointMin?(f=this.jointMin-f,this.scale=-1):this.scale=f=0;c+=this.a1relx;d+=this.a1rely;this.dot1=this.nrelx*c+this.nrely*d;this.cx1=d*this.nrelx-c*this.nrely;this.dot2=this.nrelx*this.a2relx+this.nrely*this.a2rely;this.cx2=this.a2rely*this.nrelx-this.a2relx*this.nrely;this.kMassa=this.b1.smass+this.b2.smass+this.dot1*this.dot1*this.b1.sinertia+this.dot2*this.dot2*this.b2.sinertia;this.kMassb=-this.scale*(this.dot1*this.cx1*this.b1.sinertia+
this.dot2*this.cx2*this.b2.sinertia);this.kMassc=this.scale*this.scale*(this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia);d=this.kMassa*this.kMassc-this.kMassb*this.kMassb;d!=d?(this.kMassa=this.kMassb=this.kMassc=0,d=3):0==d?(d=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,d|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,d|=2),this.kMassb=0):(d=1/d,c=this.kMassc*d,this.kMassc=this.kMassa*d,this.kMassa=c,this.kMassb*=-d,d=0);
0!=(d&1)&&(this.jAccx=0);0!=(d&2)&&(this.jAccy=0);if(this.stiff)this.biasy=this.biasx=this.gamma=0;else{if(this.breakUnderError&&e*e+f*f>this.maxError*this.maxError)return!0;c=2*Math.PI*this.frequency;this.gamma=1/(a*c*(2*this.damping+c*a));d=1/(1+this.gamma);c=a*c*c*this.gamma;this.gamma*=d;this.kMassa*=d;this.kMassb*=d;this.kMassc*=d;this.biasx=e;this.biasy=f;e=-c;this.biasx*=e;this.biasy*=e;e=this.maxError;f=this.biasx*this.biasx+this.biasy*this.biasy;f>e*e&&(e*=Ga.invsqrt(f),this.biasx*=e,this.biasy*=
e)}this.jAccx*=b;this.jAccy*=b;this.jMax=this.maxForce*a;return!1},warmStart:function(){var a=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,b=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy,c=this.b1.imass;this.b1.velx-=a*c;this.b1.vely-=b*c;c=this.b2.imass;this.b2.velx+=a*c;this.b2.vely+=b*c;this.b1.angvel+=(this.scale*this.cx1*this.jAccy-this.dot1*this.jAccx)*this.b1.iinertia;this.b2.angvel+=(this.dot2*this.jAccx-this.scale*this.cx2*this.jAccy)*this.b2.iinertia},applyImpulseVel:function(){var a=
this.b2.velx-this.b1.velx;var b=this.b2.vely-this.b1.vely;a+=this.b2.kinvelx-this.b1.kinvelx;b+=this.b2.kinvely-this.b1.kinvely;var c=b*this.nrelx-a*this.nrely+(this.b2.angvel+this.b2.kinangvel)*this.dot2-(this.b1.angvel+this.b1.kinangvel)*this.dot1;a=this.scale*(this.nrelx*a+this.nrely*b-(this.b2.angvel+this.b2.kinangvel)*this.cx2+(this.b1.angvel+this.b1.kinangvel)*this.cx1);c=this.biasx-c;a=this.biasy-a;b=this.kMassa*c+this.kMassb*a;a=this.kMassb*c+this.kMassc*a;var d=this.gamma;c=b-this.jAccx*
d;a-=this.jAccy*d;b=this.jAccx;d=this.jAccy;this.jAccx+=1*c;this.jAccy+=1*a;0<this.jAccy&&(this.jAccy=0);if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else this.stiff||(c=this.jMax,a=this.jAccx*this.jAccx+this.jAccy*this.jAccy,a>c*c&&(c*=Ga.invsqrt(a),this.jAccx*=c,this.jAccy*=c));c=this.jAccx-b;a=this.jAccy-d;b=this.scale*this.nrelx*a-this.nrely*c;d=this.nrelx*c+this.scale*this.nrely*a;var e=this.b1.imass;this.b1.velx-=b*e;this.b1.vely-=d*e;
e=this.b2.imass;this.b2.velx+=b*e;this.b2.vely+=d*e;this.b1.angvel+=(this.scale*this.cx1*a-this.dot1*c)*this.b1.iinertia;this.b2.angvel+=(this.dot2*c-this.scale*this.cx2*a)*this.b2.iinertia;return!1},applyImpulsePos:function(){var a=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly;var b=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;var c=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;var d=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var e=this.b2.axisy*this.a2localx-
this.b2.axisx*this.a2localy;var f=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var m=this.b2.posx+e-this.b1.posx-c;var h=this.b2.posy+f-this.b1.posy-d;var q=h*a-m*b;var g=a*m+b*h;if(this.equal){g-=this.jointMin;var k=1}else g>this.jointMax?(g-=this.jointMax,k=1):g<this.jointMin?(g=this.jointMin-g,k=-1):k=g=0;if(this.breakUnderError&&q*q+g*g>this.maxError*this.maxError)return!0;if(q*q+g*g<x.constraintLinearSlop*x.constraintLinearSlop)return!1;q*=.5;g*=.5;if(6<q*q+g*g){var l=this.b1.smass+
this.b2.smass;l>x.epsilon&&(l=.8/l,g=l*(b*q-k*a*g),k=l*(a*q*k-b*q),q=this.b1.imass,this.b1.posx-=g*q,this.b1.posy-=k*q,q=this.b2.imass,this.b2.posx+=g*q,this.b2.posy+=k*q,m=this.b2.posx+e-this.b1.posx-c,h=this.b2.posy+f-this.b1.posy-d,g=a*m+b*h,this.equal?(g-=this.jointMin,k=1):g>this.jointMax?(g-=this.jointMax,k=1):g<this.jointMin?(g=this.jointMin-g,k=-1):k=g=0,q=.5*(h*a-m*b),g*=.5)}c=m+c;h+=d;d=a*c+b*h;h=h*a-c*b;c=a*e+b*f;e=f*a-e*b;f=this.b1.smass+this.b2.smass+d*d*this.b1.sinertia+c*c*this.b2.sinertia;
l=-k*(d*h*this.b1.sinertia+c*e*this.b2.sinertia);m=k*k*(this.b1.smass+this.b2.smass+h*h*this.b1.sinertia+e*e*this.b2.sinertia);q=-q;g=-g;var n=f*m-l*l;n!=n?q=g=0:0==n?(q=0!=f?q/f:0,g=0!=m?g/m:0):(n=1/n,m=n*(m*q-l*g),g=n*(f*g-l*q),q=m);0<g&&(g=0);f=k*a*g-b*q;a=a*q+k*b*g;b=this.b1.imass;this.b1.posx-=f*b;this.b1.posy-=a*b;b=this.b2.imass;this.b2.posx+=f*b;this.b2.posy+=a*b;this.b1.delta_rot((k*h*g-d*q)*this.b1.iinertia);this.b2.delta_rot((c*q-k*e*g)*this.b2.iinertia);return!1},__class__:uh});var vh=
function(){this.stepped=!1;this.kMass=this.jAcc=this.jMax=0;this.b1=this.b2=null;this.ratio=this.rate=0;this.outer_zn=null;Ma.call(this);this.jAcc=0;this.stepped=!1;this.__velocity=!0};k["zpp_nape.constraint.ZPP_MotorJoint"]=vh;vh.__name__=["zpp_nape","constraint","ZPP_MotorJoint"];vh.__super__=Ma;vh.prototype=w(Ma.prototype,{outer_zn:null,ratio:null,rate:null,bodyImpulse:function(a){return this.stepped?a==this.b1?oa.get(0,0,-this.jAcc):oa.get(0,0,this.ratio*this.jAcc):oa.get(0,0,0)},activeBodies:function(){null!=
this.b1&&this.b1.constraints.add(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},b1:null,b2:null,kMass:null,jAcc:null,jMax:null,stepped:null,wake_connected:function(){null!=this.b1&&this.b1.isDynamic()&&this.b1.wake();null!=this.b2&&this.b2.isDynamic()&&this.b2.wake()},forest:function(){if(this.b1.isDynamic()){if(this.b1.component==this.b1.component.parent)var a=
this.b1.component;else{a=this.b1.component;for(var b=null;a!=a.parent;){var c=a.parent;a.parent=b;b=a;a=c}for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;){var d=b.parent;b.parent=c;c=b;b=d}for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(this.b2.isDynamic()){if(this.b2.component==this.b2.component.parent)a=this.b2.component;else{a=
this.b2.component;for(b=null;a!=a.parent;)c=a.parent,a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}},pair_exists:function(a,b){return this.b1.id!=a||this.b2.id!=b?this.b1.id==b?this.b2.id==a:!1:!0},clearcache:function(){this.jAcc=0;this.pre_dt=
-1},preStep:function(a){-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.stepped=!0;this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia;this.kMass=1/this.kMass;this.jAcc*=b;this.jMax=this.maxForce*a;return!1},warmStart:function(){this.b1.angvel-=this.b1.iinertia*this.jAcc;this.b2.angvel+=this.ratio*this.b2.iinertia*this.jAcc},applyImpulseVel:function(){var a=-this.kMass*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel-this.rate),
b=this.jAcc;this.jAcc+=a;if(this.breakUnderForce){if(this.jAcc>this.jMax||this.jAcc<-this.jMax)return!0}else this.jAcc<-this.jMax?this.jAcc=-this.jMax:this.jAcc>this.jMax&&(this.jAcc=this.jMax);a=this.jAcc-b;this.b1.angvel-=this.b1.iinertia*a;this.b2.angvel+=this.ratio*this.b2.iinertia*a;return!1},applyImpulsePos:function(){return!1},__class__:vh});var wh=function(){this.stepped=!1;this.kMassa=this.kMassb=this.kMassc=this.jAccx=this.jAccy=this.jMax=this.gamma=this.biasx=this.biasy=0;this.wrap_a2=
null;this.a2localx=this.a2localy=this.a2relx=this.a2rely=0;this.wrap_a1=this.b2=null;this.a1localx=this.a1localy=this.a1relx=this.a1rely=0;this.outer_zn=this.b1=null;Ma.call(this);this.stepped=!1;this.jAccy=this.jAccx=0;this.jMax=cb.POSINF();this.a2rely=this.a2relx=this.a2localy=this.a2localx=this.a1rely=this.a1relx=this.a1localy=this.a1localx=0};k["zpp_nape.constraint.ZPP_PivotJoint"]=wh;wh.__name__=["zpp_nape","constraint","ZPP_PivotJoint"];wh.__super__=Ma;wh.prototype=w(Ma.prototype,{outer_zn:null,
bodyImpulse:function(a){return this.stepped?a==this.b1?oa.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely)):oa.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely):oa.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},
b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(a){this.immutable_midstep("Constraint::a1");this.a1localx=a.x;this.a1localy=a.y;this.wake()},setup_a1:function(){this.wrap_a1=v.get(this.a1localx,this.a1localy);this.wrap_a1.zpp_inner._inuse=!0;this.wrap_a1.zpp_inner._validate=l(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=l(this,this.invalidate_a1)},wrap_a1:null,
b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(a){this.immutable_midstep("Constraint::a2");this.a2localx=a.x;this.a2localy=a.y;this.wake()},setup_a2:function(){this.wrap_a2=v.get(this.a2localx,this.a2localy);this.wrap_a2.zpp_inner._inuse=!0;this.wrap_a2.zpp_inner._validate=l(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=l(this,this.invalidate_a2)},wrap_a2:null,
kMassa:null,kMassb:null,kMassc:null,jAccx:null,jAccy:null,jMax:null,gamma:null,biasx:null,biasy:null,stepped:null,wake_connected:function(){null!=this.b1&&this.b1.isDynamic()&&this.b1.wake();null!=this.b2&&this.b2.isDynamic()&&this.b2.wake()},forest:function(){if(this.b1.isDynamic()){if(this.b1.component==this.b1.component.parent)var a=this.b1.component;else{a=this.b1.component;for(var b=null;a!=a.parent;){var c=a.parent;a.parent=b;b=a;a=c}for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==
this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;){var d=b.parent;b.parent=c;c=b;b=d}for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(this.b2.isDynamic()){if(this.b2.component==this.b2.component.parent)a=this.b2.component;else{a=this.b2.component;for(b=null;a!=a.parent;)c=a.parent,a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;
else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}},pair_exists:function(a,b){return this.b1.id!=a||this.b2.id!=b?this.b1.id==b?this.b2.id==a:!1:!0},clearcache:function(){this.jAccy=this.jAccx=0;this.pre_dt=-1},preStep:function(a){-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.stepped=!0;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*
this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var c=this.b1.smass+this.b2.smass;this.kMassa=c;this.kMassb=0;this.kMassc=c;if(0!=this.b1.sinertia){c=this.a1relx*this.b1.sinertia;var d=this.a1rely*this.b1.sinertia;this.kMassa+=d*this.a1rely;this.kMassb+=-d*this.a1relx;this.kMassc+=c*this.a1relx}0!=this.b2.sinertia&&(c=this.a2relx*
this.b2.sinertia,d=this.a2rely*this.b2.sinertia,this.kMassa+=d*this.a2rely,this.kMassb+=-d*this.a2relx,this.kMassc+=c*this.a2relx);c=this.kMassa*this.kMassc-this.kMassb*this.kMassb;c!=c?(this.kMassa=this.kMassb=this.kMassc=0,c=3):0==c?(c=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,c|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,c|=2),this.kMassb=0):(c=1/c,d=this.kMassc*c,this.kMassc=this.kMassa*c,this.kMassa=d,this.kMassb*=-c,c=0);0!=(c&1)&&(this.jAccx=0);0!=(c&2)&&(this.jAccy=
0);if(this.stiff)this.gamma=this.biasy=this.biasx=0;else{d=2*Math.PI*this.frequency;this.gamma=1/(a*d*(2*this.damping+d*a));c=1/(1+this.gamma);d=a*d*d*this.gamma;this.gamma*=c;this.kMassa*=c;this.kMassb*=c;this.kMassc*=c;this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);if(this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy>this.maxError*this.maxError)return!0;c=-d;this.biasx*=c;this.biasy*=c;c=this.maxError;
d=this.biasx*this.biasx+this.biasy*this.biasy;d>c*c&&(c*=Ga.invsqrt(d),this.biasx*=c,this.biasy*=c)}this.jAccx*=b;this.jAccy*=b;this.jMax=this.maxForce*a;return!1},warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.jAccx*a;this.b1.vely-=this.jAccy*a;a=this.b2.imass;this.b2.velx+=this.jAccx*a;this.b2.vely+=this.jAccy*a;this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely)*this.b1.iinertia;this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely)*this.b2.iinertia},applyImpulseVel:function(){var a=
this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel));var b=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));a=this.biasx-a;b=this.biasy-b;var c=this.kMassa*a+this.kMassb*b;b=this.kMassb*a+this.kMassc*b;var d=this.gamma;a=c-this.jAccx*d;b-=this.jAccy*d;c=this.jAccx;d=this.jAccy;this.jAccx+=1*a;this.jAccy+=
1*b;if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else this.stiff||(a=this.jMax,b=this.jAccx*this.jAccx+this.jAccy*this.jAccy,b>a*a&&(a*=Ga.invsqrt(b),this.jAccx*=a,this.jAccy*=a));a=this.jAccx-c;b=this.jAccy-d;c=this.b1.imass;this.b1.velx-=a*c;this.b1.vely-=b*c;c=this.b2.imass;this.b2.velx+=a*c;this.b2.vely+=b*c;this.b1.angvel-=(b*this.a1relx-a*this.a1rely)*this.b1.iinertia;this.b2.angvel+=(b*this.a2relx-a*this.a2rely)*this.b2.iinertia;return!1},
applyImpulsePos:function(){var a=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;var b=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var c=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;var d=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var e=this.b2.posx+c-(this.b1.posx+a);var f=this.b2.posy+d-(this.b1.posy+b);if(this.breakUnderError&&e*e+f*f>this.maxError*this.maxError)return!0;if(e*e+f*f<x.constraintLinearSlop*x.constraintLinearSlop)return!1;e*=.5;f*=.5;if(6<
e*e+f*f){var m=this.b1.smass+this.b2.smass;m>x.epsilon&&(m=.75/m,e=-e*m,f=-f*m,m=e*e+f*f,400<m&&(m=20*Ga.invsqrt(m),e*=m,f*=m),m=this.b1.imass,this.b1.posx-=e*m,this.b1.posy-=f*m,m=this.b2.imass,this.b2.posx+=e*m,this.b2.posy+=f*m,e=this.b2.posx+c-(this.b1.posx+a),f=this.b2.posy+d-(this.b1.posy+b),e*=.5,f*=.5)}var h;m=h=this.b1.smass+this.b2.smass;var q=0;if(0!=this.b1.sinertia){var g=a*this.b1.sinertia,k=b*this.b1.sinertia;m+=k*b;q+=-k*a;h+=g*a}0!=this.b2.sinertia&&(g=c*this.b2.sinertia,k=d*this.b2.sinertia,
m+=k*d,q+=-k*c,h+=g*c);e=-e;f=-f;g=e*e+f*f;36<g&&(g=6*Ga.invsqrt(g),e*=g,f*=g);g=m*h-q*q;g!=g?e=f=0:0==g?(e=0!=m?e/m:0,f=0!=h?f/h:0):(g=1/g,h=g*(h*e-q*f),f=g*(m*f-q*e),e=h);m=this.b1.imass;this.b1.posx-=e*m;this.b1.posy-=f*m;m=this.b2.imass;this.b2.posx+=e*m;this.b2.posy+=f*m;this.b1.delta_rot(-(f*a-e*b)*this.b1.iinertia);this.b2.delta_rot((f*c-e*d)*this.b2.iinertia);return!1},__class__:wh});var xh=function(){this.stepped=!1;this.kMass=this.jAcc=this.jMax=this.gamma=this.bias=0;this.wrap_a4=null;
this.a4localx=this.a4localy=this.a4relx=this.a4rely=0;this.wrap_a3=this.b4=null;this.a3localx=this.a3localy=this.a3relx=this.a3rely=0;this.wrap_a2=this.b3=null;this.a2localx=this.a2localy=this.a2relx=this.a2rely=0;this.wrap_a1=this.b2=null;this.a1localx=this.a1localy=this.a1relx=this.a1rely=0;this.b1=null;this.n12x=this.n12y=this.n34x=this.n34y=this.cx1=this.cx2=this.cx3=this.cx4=0;this.slack=this.equal=!1;this.jointMin=this.jointMax=0;this.ratio=1;this.outer_zn=null;Ma.call(this);this.a4rely=this.a4relx=
this.a4localy=this.a4localx=this.a3rely=this.a3relx=this.a3localy=this.a3localx=this.a2rely=this.a2relx=this.a2localy=this.a2localx=this.a1rely=this.a1relx=this.a1localy=this.a1localx=0;this.n12x=1;this.n12y=0;this.n34x=1;this.jAcc=this.n34y=0;this.jMax=cb.POSINF();this.stepped=!1;this.cx1=this.cx2=this.cx3=this.cx4=0};k["zpp_nape.constraint.ZPP_PulleyJoint"]=xh;xh.__name__=["zpp_nape","constraint","ZPP_PulleyJoint"];xh.__super__=Ma;xh.prototype=w(Ma.prototype,{outer_zn:null,ratio:null,jointMin:null,
jointMax:null,slack:null,equal:null,n12x:null,n12y:null,n34x:null,n34y:null,cx1:null,cx2:null,cx3:null,cx4:null,bodyImpulse:function(a){if(this.stepped){var b=oa.get();a==this.b1&&(b.set_x(b.get_x()-this.jAcc*this.n12x),b.set_y(b.get_y()-this.jAcc*this.n12y),b.set_z(b.get_z()-this.cx1*this.jAcc));a==this.b2&&(b.set_x(b.get_x()+this.jAcc*this.n12x),b.set_y(b.get_y()+this.jAcc*this.n12y),b.set_z(b.get_z()+this.cx2*this.jAcc));a==this.b3&&(b.set_x(b.get_x()-this.jAcc*this.n34x),b.set_y(b.get_y()-this.jAcc*
this.n34y),b.set_z(b.get_z()-this.cx3*this.jAcc));a==this.b4&&(b.set_x(b.get_x()+this.jAcc*this.n34x),b.set_y(b.get_y()+this.jAcc*this.n34y),b.set_z(b.get_z()+this.cx4*this.jAcc));return b}return oa.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this);this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.add(this);this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.add(this)},
inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this);this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.remove(this);this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.remove(this)},b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(a){this.immutable_midstep("Constraint::a1");
this.a1localx=a.x;this.a1localy=a.y;this.wake()},setup_a1:function(){this.wrap_a1=v.get(this.a1localx,this.a1localy);this.wrap_a1.zpp_inner._inuse=!0;this.wrap_a1.zpp_inner._validate=l(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=l(this,this.invalidate_a1)},wrap_a1:null,b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(a){this.immutable_midstep("Constraint::a2");
this.a2localx=a.x;this.a2localy=a.y;this.wake()},setup_a2:function(){this.wrap_a2=v.get(this.a2localx,this.a2localy);this.wrap_a2.zpp_inner._inuse=!0;this.wrap_a2.zpp_inner._validate=l(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=l(this,this.invalidate_a2)},wrap_a2:null,b3:null,a3localx:null,a3localy:null,a3relx:null,a3rely:null,validate_a3:function(){this.wrap_a3.zpp_inner.x=this.a3localx;this.wrap_a3.zpp_inner.y=this.a3localy},invalidate_a3:function(a){this.immutable_midstep("Constraint::a3");
this.a3localx=a.x;this.a3localy=a.y;this.wake()},setup_a3:function(){this.wrap_a3=v.get(this.a3localx,this.a3localy);this.wrap_a3.zpp_inner._inuse=!0;this.wrap_a3.zpp_inner._validate=l(this,this.validate_a3);this.wrap_a3.zpp_inner._invalidate=l(this,this.invalidate_a3)},wrap_a3:null,b4:null,a4localx:null,a4localy:null,a4relx:null,a4rely:null,validate_a4:function(){this.wrap_a4.zpp_inner.x=this.a4localx;this.wrap_a4.zpp_inner.y=this.a4localy},invalidate_a4:function(a){this.immutable_midstep("Constraint::a4");
this.a4localx=a.x;this.a4localy=a.y;this.wake()},setup_a4:function(){this.wrap_a4=v.get(this.a4localx,this.a4localy);this.wrap_a4.zpp_inner._inuse=!0;this.wrap_a4.zpp_inner._validate=l(this,this.validate_a4);this.wrap_a4.zpp_inner._invalidate=l(this,this.invalidate_a4)},wrap_a4:null,kMass:null,jAcc:null,jMax:null,gamma:null,bias:null,stepped:null,wake_connected:function(){null!=this.b1&&this.b1.isDynamic()&&this.b1.wake();null!=this.b2&&this.b2.isDynamic()&&this.b2.wake();null!=this.b3&&this.b3.isDynamic()&&
this.b3.wake();null!=this.b4&&this.b4.isDynamic()&&this.b4.wake()},forest:function(){if(this.b1.isDynamic()){if(this.b1.component==this.b1.component.parent)var a=this.b1.component;else{a=this.b1.component;for(var b=null;a!=a.parent;){var c=a.parent;a.parent=b;b=a;a=c}for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;){var d=b.parent;b.parent=c;c=b;b=d}for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<
b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(this.b2.isDynamic()){if(this.b2.component==this.b2.component.parent)a=this.b2.component;else{a=this.b2.component;for(b=null;a!=a.parent;)c=a.parent,a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=
a:(b.parent=a,a.rank++))}if(this.b3.isDynamic()){if(this.b3.component==this.b3.component.parent)a=this.b3.component;else{a=this.b3.component;for(b=null;a!=a.parent;)c=a.parent,a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(this.b4.isDynamic()){if(this.b4.component==
this.b4.component.parent)a=this.b4.component;else{a=this.b4.component;for(b=null;a!=a.parent;)c=a.parent,a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}},pair_exists:function(a,b){return(this.b1.id!=a||this.b2.id!=b&&this.b3.id!=b&&this.b4.id!=
b)&&(this.b2.id!=a||this.b3.id!=b&&this.b4.id!=b&&this.b1.id!=b)&&(this.b3.id!=a||this.b4.id!=b&&this.b1.id!=b&&this.b2.id!=b)?this.b4.id==a?this.b1.id!=b&&this.b2.id!=b?this.b3.id==b:!0:!1:!0},clearcache:function(){this.jAcc=0;this.pre_dt=-1},preStep:function(a){-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.stepped=!0;this.equal=this.jointMin==this.jointMax;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*
this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy;this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy;this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var c=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);var d=this.b2.posy+this.a2rely-
(this.b1.posy+this.a1rely);var e=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx);var f=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var m=Ga.sqrt(c*c+d*d),h=Ga.sqrt(e*e+f*f);if(0!=m){var g=1/m;this.n12x=c*g;this.n12y=d*g}0!=h?(c=1/h,this.n34x=e*c,this.n34y=f*c,e=this.ratio):e=this.ratio/Ga.sqrt(this.n34x*this.n34x+this.n34y*this.n34y);this.n34x*=e;this.n34y*=e;m+=this.ratio*h;this.equal?(m-=this.jointMax,this.slack=!1):m<this.jointMin?(m=this.jointMin-m,this.n12x=-this.n12x,this.n12y=-this.n12y,
this.n34x=-this.n34x,this.n34y=-this.n34y,this.slack=!1):m>this.jointMax?(m-=this.jointMax,this.slack=!1):(m=this.n34y=this.n34x=this.n12y=this.n12x=0,this.slack=!0);if(!this.slack){this.cx1=this.n12y*this.a1relx-this.n12x*this.a1rely;this.cx2=this.n12y*this.a2relx-this.n12x*this.a2rely;this.cx3=this.n34y*this.a3relx-this.n34x*this.a3rely;this.cx4=this.n34y*this.a4relx-this.n34x*this.a4rely;h=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*this.cx1*
this.cx1+this.b2.sinertia*this.cx2*this.cx2+this.b3.sinertia*this.cx3*this.cx3+this.b4.sinertia*this.cx4*this.cx4;this.b1==this.b4&&(h-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx4*this.b1.sinertia));this.b1==this.b3&&(h+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx3*this.b1.sinertia));this.b2==this.b3&&(h-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx3*this.b2.sinertia));this.b2==this.b4&&(h+=2*((this.n12x*
this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx4*this.b2.sinertia));this.kMass=h;0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0;if(this.stiff)this.gamma=this.bias=0;else{if(this.breakUnderError&&m*m>this.maxError*this.maxError)return!0;e=2*Math.PI*this.frequency;this.gamma=1/(a*e*(2*this.damping+e*a));h=1/(1+this.gamma);e=a*e*e*this.gamma;this.gamma*=h;this.kMass*=h;this.bias=-m*e;this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=
b;this.jMax=this.maxForce*a}return!1},warmStart:function(){if(!this.slack){var a=this.b1.imass*this.jAcc;this.b1.velx-=this.n12x*a;this.b1.vely-=this.n12y*a;a=this.b2.imass*this.jAcc;this.b2.velx+=this.n12x*a;this.b2.vely+=this.n12y*a;a=this.b3.imass*this.jAcc;this.b3.velx-=this.n34x*a;this.b3.vely-=this.n34y*a;a=this.b4.imass*this.jAcc;this.b4.velx+=this.n34x*a;this.b4.vely+=this.n34y*a;this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc;this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc;this.b3.angvel-=
this.cx3*this.b3.iinertia*this.jAcc;this.b4.angvel+=this.cx4*this.b4.iinertia*this.jAcc}},applyImpulseVel:function(){if(this.slack)return!1;var a=this.kMass*(this.bias-(this.n12x*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.n12y*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+this.n34x*(this.b4.velx+this.b4.kinvelx-this.b3.velx-this.b3.kinvelx)+this.n34y*(this.b4.vely+this.b4.kinvely-this.b3.vely-this.b3.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+
this.b1.kinangvel)*this.cx1+(this.b4.angvel+this.b4.kinangvel)*this.cx4-(this.b3.angvel+this.b3.kinangvel)*this.cx3))-this.jAcc*this.gamma,b=this.jAcc;this.jAcc+=a;!this.equal&&0<this.jAcc&&(this.jAcc=0);if(this.breakUnderForce&&this.jAcc<-this.jMax)return!0;!this.stiff&&this.jAcc<-this.jMax&&(this.jAcc=-this.jMax);a=this.jAcc-b;b=this.b1.imass*a;this.b1.velx-=this.n12x*b;this.b1.vely-=this.n12y*b;b=this.b2.imass*a;this.b2.velx+=this.n12x*b;this.b2.vely+=this.n12y*b;b=this.b3.imass*a;this.b3.velx-=
this.n34x*b;this.b3.vely-=this.n34y*b;b=this.b4.imass*a;this.b4.velx+=this.n34x*b;this.b4.vely+=this.n34y*b;this.b1.angvel-=this.cx1*this.b1.iinertia*a;this.b2.angvel+=this.cx2*this.b2.iinertia*a;this.b3.angvel-=this.cx3*this.b3.iinertia*a;this.b4.angvel+=this.cx4*this.b4.iinertia*a;return!1},applyImpulsePos:function(){var a=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;var b=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var c=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;
var d=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var e=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy;var f=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;var m=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy;var h=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var g=this.n12x;var k=this.n12y;var l=this.n34x;var n=this.n34y;var p=this.b2.posx+c-(this.b1.posx+a);var r=this.b2.posy+d-(this.b1.posy+b);var t=this.b4.posx+m-(this.b3.posx+e);var u=this.b4.posy+
h-(this.b3.posy+f);var v=Ga.sqrt(p*p+r*r);var w=Ga.sqrt(t*t+u*u);0!=v&&(k=1/v,g=p*k,k*=r);0!=w?(n=1/w,p=this.ratio,l=t*n*p,n=u*n*p):(t=this.ratio/Ga.sqrt(l*l+n*n),l*=t,n*=t);w=v+this.ratio*w;this.equal?(w-=this.jointMax,v=!1):w<this.jointMin?(w=this.jointMin-w,g=-g,k=-k,l=-l,n=-n,v=!1):w>this.jointMax?(w-=this.jointMax,v=!1):(w=n=l=k=g=0,v=!0);if(!v){if(this.breakUnderError&&w*w>this.maxError*this.maxError)return!0;if(w*w<x.constraintLinearSlop*x.constraintLinearSlop)return!1;w*=.5;6<w*w&&(v=this.b1.smass+
this.b2.smass,v>x.epsilon&&(v=.75/v*-w,this.equal||0>v))&&(w=v*this.b1.imass,this.b1.posx-=g*w,this.b1.posy-=k*w,w=v*this.b2.imass,this.b2.posx+=g*w,this.b2.posy+=k*w,w=v*this.b3.imass,this.b3.posx-=l*w,this.b3.posy-=n*w,v*=this.b4.imass,this.b4.posx+=l*v,this.b4.posy+=n*v,p=this.b2.posx+c-(this.b1.posx+a),r=this.b2.posy+d-(this.b1.posy+b),t=this.b4.posx+m-(this.b3.posx+e),u=this.b4.posy+h-(this.b3.posy+f),v=Ga.sqrt(p*p+r*r),w=Ga.sqrt(t*t+u*u),0!=v&&(k=1/v,g=p*k,k*=r),0!=w?(n=1/w,p=this.ratio,l=t*
n*p,n=u*n*p):(t=this.ratio/Ga.sqrt(l*l+n*n),l*=t,n*=t),v+=this.ratio*w,this.equal?v-=this.jointMax:v<this.jointMin?(v=this.jointMin-v,g=-g,k=-k,l=-l,n=-n):v>this.jointMax?v-=this.jointMax:v=n=l=k=g=0,w=.5*v);a=k*a-g*b;c=k*c-g*d;e=n*e-l*f;m=n*m-l*h;h=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*a*a+this.b2.sinertia*c*c+this.b3.sinertia*e*e+this.b4.sinertia*m*m;this.b1==this.b4&&(h-=2*((g*l+k*n)*this.b1.smass+a*m*this.b1.sinertia));this.b1==this.b3&&
(h+=2*((g*l+k*n)*this.b1.smass+a*e*this.b1.sinertia));this.b2==this.b3&&(h-=2*((g*l+k*n)*this.b2.smass+c*e*this.b2.sinertia));this.b2==this.b4&&(h+=2*((g*l+k*n)*this.b2.smass+c*m*this.b2.sinertia));0!=h&&(h=1/h);v=-w*h;if(this.equal||0>v)h=this.b1.imass*v,this.b1.posx-=g*h,this.b1.posy-=k*h,h=this.b2.imass*v,this.b2.posx+=g*h,this.b2.posy+=k*h,g=this.b3.imass*v,this.b3.posx-=l*g,this.b3.posy-=n*g,g=this.b4.imass*v,this.b4.posx+=l*g,this.b4.posy+=n*g,this.b1.delta_rot(-a*this.b1.iinertia*v),this.b2.delta_rot(c*
this.b2.iinertia*v),this.b3.delta_rot(-e*this.b3.iinertia*v),this.b4.delta_rot(m*this.b4.iinertia*v)}return!1},__class__:xh});var yh=function(a,b){this.Keff=this.vec3=this.J=this.jOld=null;this.jMax=0;this.velonly=!1;this.soft=this.gamma=0;this.L=this.y=null;this.stepped=!1;this.jAcc=this.bias=null;this.dim=0;this.outer_zn=this.bodies=null;Ma.call(this);this.bodies=[];this.dim=a;this.velonly=b;this.jAcc=[];this.bias=[];this.L=[];this.J=[];this.jOld=[];this.y=[];this.Keff=[];this.vec3=oa.get(0,0,0);
for(b=0;b<a;){var c=b++,d=this.bias[c]=this.J[c]=this.jOld[c]=this.y[c]=0;this.jAcc[c]=d;d=0;for(var e=a;d<e;){var f=d++;this.L[c*a+f]=0}}this.stepped=!1};k["zpp_nape.constraint.ZPP_UserConstraint"]=yh;yh.__name__=["zpp_nape","constraint","ZPP_UserConstraint"];yh.__super__=Ma;yh.prototype=w(Ma.prototype,{outer_zn:null,bodies:null,dim:null,jAcc:null,bias:null,bodyImpulse:function(a){for(var b=0,c=this.dim;b<c;){var d=b++;this.J[d]=this.jAcc[d]}b=oa.get(0,0,0);this.stepped&&this.outer_zn.__impulse(this.J,
a.outer,b);return b},activeBodies:function(){for(var a=0,b=this.bodies;a<b.length;){var c=b[a];++a;null!=c.body&&c.body.constraints.add(this)}},inactiveBodies:function(){for(var a=0,b=this.bodies;a<b.length;){var c=b[a];++a;null!=c.body&&c.body.constraints.remove(this)}},stepped:null,wake_connected:function(){for(var a=0,b=this.bodies;a<b.length;){var c=b[a];++a;c.body.isDynamic()&&c.body.wake()}},forest:function(){for(var a=0,b=this.bodies;a<b.length;){var c=b[a];++a;if(c.body.isDynamic()){if(c.body.component==
c.body.component.parent)c=c.body.component;else{c=c.body.component;for(var d=null;c!=c.parent;){var e=c.parent;c.parent=d;d=c;c=e}for(;null!=d;)e=d.parent,d.parent=c,d=e}if(this.component==this.component.parent)d=this.component;else{d=this.component;for(e=null;d!=d.parent;){var f=d.parent;d.parent=e;e=d;d=f}for(;null!=e;)f=e.parent,e.parent=d,e=f}c!=d&&(c.rank<d.rank?c.parent=d:c.rank>d.rank?d.parent=c:(d.parent=c,c.rank++))}}},pair_exists:function(a,b){for(var c=!1,d=u["int"](this.bodies.length),
e=0;e<d;){var f=e++,m=this.bodies[f].body;f+=1;for(var h=d;f<h;){var g=f++;g=this.bodies[g].body;if(m.id==a&&g.id==b||m.id==b&&g.id==a){c=!0;break}}if(c)break}return c},broken:function(){this.outer_zn.__broken()},clearcache:function(){for(var a=0,b=this.dim;a<b;){var c=a++;this.jAcc[c]=0}this.pre_dt=-1},lsq:function(a){for(var b=0,c=0,d=this.dim;c<d;){var e=c++;b+=a[e]*a[e]}return b},_clamp:function(a,b){var c=this.lsq(a);if(c>b*b){b/=Math.sqrt(c);c=0;for(var d=this.dim;c<d;){var e=c++;a[e]*=b}}},
L:null,solve:function(a){for(var b=0,c=0,d=this.dim;c<d;){for(var e=c++,f=0,m=0,h=e-1;m<h;){var g=m++;f+=this.L[e*this.dim+g]*this.L[e*this.dim+g]}f=Math.sqrt(a[b++]-f);this.L[e*this.dim+e]=f;if(0!=f)for(f=1/f,m=e+1,h=this.dim;m<h;){g=m++;for(var k=0,l=0,n=e-1;l<n;){var p=l++;k+=this.L[g*this.dim+p]*this.L[e*this.dim+p]}this.L[g*this.dim+e]=f*(a[b++]-k)}else{f=e+1;for(m=this.dim;f<m;)h=f++,this.L[h*this.dim+e]=0;b+=this.dim-e-1}}return this.L},y:null,transform:function(a,b){for(var c=0,d=this.dim;c<
d;){var e=c++,f=b[e],m=a[e*this.dim+e];if(0!=m){for(var h=0,g=e;h<g;){var k=h++;f-=a[e*this.dim+k]*this.y[k]}this.y[e]=f/m}else this.y[e]=0}c=0;for(d=this.dim;c<d;)if(e=c++,e=this.dim-1-e,f=a[e*this.dim+e],0!=f){m=this.y[e];h=e+1;for(g=this.dim;h<g;)k=h++,m-=a[k*this.dim+e]*b[k];b[e]=m/f}else b[e]=0},soft:null,gamma:null,velonly:null,jMax:null,Keff:null,preStep:function(a){this.outer_zn.__validate();-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.stepped=!0;this.outer_zn.__prepare();
this.outer_zn.__eff_mass(this.Keff);this.L=this.solve(this.Keff);if(this.stiff||this.velonly){for(var c=0,d=this.dim;c<d;){var e=c++;this.bias[e]=0}this.gamma=0;this.soft=1}else{c=2*Math.PI*this.frequency;this.gamma=1/(a*c*(2*this.damping+c*a));d=1/(1+this.gamma);c=a*c*c*this.gamma;this.gamma*=d;this.soft=d;this.outer_zn.__position(this.bias);if(this.breakUnderError&&this.lsq(this.bias)>this.maxError*this.maxError)return!0;d=0;for(e=this.dim;d<e;){var f=d++;this.bias[f]*=-c}this._clamp(this.bias,
this.maxError)}c=0;for(d=this.dim;c<d;)e=c++,this.jAcc[e]*=b;this.jMax=this.maxForce*a;return!1},vec3:null,warmStart:function(){for(var a=0,b=this.bodies;a<b.length;){var c=b[a];++a;c=c.body;this.outer_zn.__impulse(this.jAcc,c.outer,this.vec3);var d=c.imass;c.velx+=this.vec3.get_x()*d;c.vely+=this.vec3.get_y()*d;c.angvel+=this.vec3.get_z()*c.iinertia}},J:null,jOld:null,applyImpulseVel:function(){this.outer_zn.__velocity(this.J);for(var a=0,b=this.dim;a<b;){var c=a++;this.J[c]=this.bias[c]-this.J[c]}this.transform(this.L,
this.J);a=0;for(b=this.dim;a<b;)c=a++,this.jOld[c]=this.jAcc[c],this.jAcc[c]+=this.J[c]=this.J[c]*this.soft-this.jAcc[c]*this.gamma;this.outer_zn.__clamp(this.jAcc);if((this.breakUnderForce||!this.stiff)&&this.lsq(this.jAcc)>this.jMax*this.jMax){if(this.breakUnderForce)return!0;this.stiff||this._clamp(this.jAcc,this.jMax)}a=0;for(b=this.dim;a<b;)c=a++,this.J[c]=this.jAcc[c]-this.jOld[c];a=0;for(b=this.bodies;a<b.length;){c=b[a];++a;c=c.body;this.outer_zn.__impulse(this.J,c.outer,this.vec3);var d=
c.imass;c.velx+=this.vec3.get_x()*d;c.vely+=this.vec3.get_y()*d;c.angvel+=this.vec3.get_z()*c.iinertia}return!1},applyImpulsePos:function(){if(this.velonly)return!1;this.outer_zn.__prepare();this.outer_zn.__position(this.J);var a=this.lsq(this.J);if(this.breakUnderError&&a>this.maxError*this.maxError)return!0;if(a<x.constraintLinearSlop*x.constraintLinearSlop)return!1;a=0;for(var b=this.dim;a<b;){var c=a++;this.J[c]*=-1}this.outer_zn.__eff_mass(this.Keff);this.transform(this.solve(this.Keff),this.J);
this.outer_zn.__clamp(this.J);a=0;for(b=this.bodies;a<b.length;){c=b[a];++a;c=c.body;this.outer_zn.__impulse(this.J,c.outer,this.vec3);var d=c.imass;c.posx+=this.vec3.get_x()*d;c.posy+=this.vec3.get_y()*d;c.delta_rot(this.vec3.get_z()*c.iinertia)}return!1},__class__:yh});var jl=function(a,b){this.body=null;this.cnt=0;this.cnt=a;this.body=b};k["zpp_nape.constraint.ZPP_UserBody"]=jl;jl.__name__=["zpp_nape","constraint","ZPP_UserBody"];jl.prototype={cnt:null,body:null,__class__:jl};var zh=function(){this.stepped=
!1;this.phase=this.kMassa=this.kMassb=this.kMassd=this.kMassc=this.kMasse=this.kMassf=this.jAccx=this.jAccy=this.jAccz=this.jMax=this.gamma=this.biasx=this.biasy=this.biasz=0;this.wrap_a2=null;this.a2localx=this.a2localy=this.a2relx=this.a2rely=0;this.wrap_a1=this.b2=null;this.a1localx=this.a1localy=this.a1relx=this.a1rely=0;this.outer_zn=this.b1=null;Ma.call(this);this.jAccz=this.jAccy=this.jAccx=this.phase=0;this.jMax=cb.POSINF();this.stepped=!1;this.a2rely=this.a2relx=this.a2localy=this.a2localx=
this.a1rely=this.a1relx=this.a1localy=this.a1localx=0};k["zpp_nape.constraint.ZPP_WeldJoint"]=zh;zh.__name__=["zpp_nape","constraint","ZPP_WeldJoint"];zh.__super__=Ma;zh.prototype=w(Ma.prototype,{outer_zn:null,bodyImpulse:function(a){return this.stepped?a==this.b1?oa.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)):oa.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz):oa.get(0,0,0)},activeBodies:function(){null!=this.b1&&this.b1.constraints.add(this);
this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},inactiveBodies:function(){null!=this.b1&&this.b1.constraints.remove(this);this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(a){this.immutable_midstep("Constraint::a1");this.a1localx=a.x;this.a1localy=a.y;this.wake()},setup_a1:function(){this.wrap_a1=
v.get(this.a1localx,this.a1localy);this.wrap_a1.zpp_inner._inuse=!0;this.wrap_a1.zpp_inner._validate=l(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=l(this,this.invalidate_a1)},wrap_a1:null,b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(a){this.immutable_midstep("Constraint::a2");this.a2localx=a.x;this.a2localy=a.y;this.wake()},setup_a2:function(){this.wrap_a2=
v.get(this.a2localx,this.a2localy);this.wrap_a2.zpp_inner._inuse=!0;this.wrap_a2.zpp_inner._validate=l(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=l(this,this.invalidate_a2)},wrap_a2:null,phase:null,kMassa:null,kMassb:null,kMassd:null,kMassc:null,kMasse:null,kMassf:null,jAccx:null,jAccy:null,jAccz:null,jMax:null,gamma:null,biasx:null,biasy:null,biasz:null,stepped:null,wake_connected:function(){null!=this.b1&&this.b1.isDynamic()&&this.b1.wake();null!=this.b2&&this.b2.isDynamic()&&this.b2.wake()},
forest:function(){if(this.b1.isDynamic()){if(this.b1.component==this.b1.component.parent)var a=this.b1.component;else{a=this.b1.component;for(var b=null;a!=a.parent;){var c=a.parent;a.parent=b;b=a;a=c}for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;){var d=b.parent;b.parent=c;c=b;b=d}for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}if(this.b2.isDynamic()){if(this.b2.component==
this.b2.component.parent)a=this.b2.component;else{a=this.b2.component;for(b=null;a!=a.parent;)c=a.parent,a.parent=b,b=a,a=c;for(;null!=b;)c=b.parent,b.parent=a,b=c}if(this.component==this.component.parent)b=this.component;else{b=this.component;for(c=null;b!=b.parent;)d=b.parent,b.parent=c,c=b,b=d;for(;null!=c;)d=c.parent,c.parent=b,c=d}a!=b&&(a.rank<b.rank?a.parent=b:a.rank>b.rank?b.parent=a:(b.parent=a,a.rank++))}},pair_exists:function(a,b){return this.b1.id!=a||this.b2.id!=b?this.b1.id==b?this.b2.id==
a:!1:!0},clearcache:function(){this.jAccz=this.jAccy=this.jAccx=0;this.pre_dt=-1},preStep:function(a){-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;this.stepped=!0;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var c=this.b1.smass+this.b2.smass;this.kMassa=
c;this.kMassb=0;this.kMassd=c;this.kMassf=this.kMasse=this.kMassc=0;if(0!=this.b1.sinertia){c=this.a1relx*this.b1.sinertia;var d=this.a1rely*this.b1.sinertia;this.kMassa+=d*this.a1rely;this.kMassb+=-d*this.a1relx;this.kMassd+=c*this.a1relx;this.kMassc+=-d;this.kMasse+=c;this.kMassf+=this.b1.sinertia}0!=this.b2.sinertia&&(c=this.a2relx*this.b2.sinertia,d=this.a2rely*this.b2.sinertia,this.kMassa+=d*this.a2rely,this.kMassb+=-d*this.a2relx,this.kMassd+=c*this.a2relx,this.kMassc+=-d,this.kMasse+=c,this.kMassf+=
this.b2.sinertia);c=this.kMassa*(this.kMassd*this.kMassf-this.kMasse*this.kMasse)+this.kMassb*(this.kMassc*this.kMasse-this.kMassb*this.kMassf)+this.kMassc*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);if(c!=c)this.kMassf=this.kMasse=this.kMassc=this.kMassd=this.kMassb=this.kMassa=0,c=7;else if(0==c)c=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,c|=1),0!=this.kMassd?this.kMassd=1/this.kMassd:(this.kMassd=0,c|=2),0!=this.kMassf?this.kMassf=1/this.kMassf:(this.kMassf=0,c|=4),this.kMassb=
this.kMassc=this.kMasse=0;else{c=1/c;d=c*(this.kMasse*this.kMassc-this.kMassb*this.kMassf);var e=c*(this.kMassa*this.kMassf-this.kMassc*this.kMassc),f=c*(this.kMassb*this.kMasse-this.kMassc*this.kMassd),m=c*(this.kMassb*this.kMassc-this.kMassa*this.kMasse),h=c*(this.kMassa*this.kMassd-this.kMassb*this.kMassb);this.kMassa=c*(this.kMassd*this.kMassf-this.kMasse*this.kMasse);this.kMassb=d;this.kMassd=e;this.kMassc=f;this.kMasse=m;this.kMassf=h;c=0}0!=(c&1)&&(this.jAccx=0);0!=(c&2)&&(this.jAccy=0);0!=
(c&4)&&(this.jAccz=0);if(this.stiff)this.gamma=this.biasz=this.biasy=this.biasx=0;else{d=2*Math.PI*this.frequency;this.gamma=1/(a*d*(2*this.damping+d*a));c=1/(1+this.gamma);d=a*d*d*this.gamma;this.gamma*=c;this.kMassa*=c;this.kMassb*=c;this.kMassd*=c;this.kMassc*=c;this.kMasse*=c;this.kMassf*=c;this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);this.biasz=this.b2.rot-this.b1.rot-this.phase;if(this.breakUnderError&&this.biasx*
this.biasx+this.biasy*this.biasy+this.biasz*this.biasz>this.maxError*this.maxError)return!0;c=-d;this.biasx*=c;this.biasy*=c;this.biasz*=c;c=this.maxError;d=this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz;d>c*c&&(c*=Ga.invsqrt(d),this.biasx*=c,this.biasy*=c,this.biasz*=c)}this.jAccx*=b;this.jAccy*=b;this.jAccz*=b;this.jMax=this.maxForce*a;return!1},warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.jAccx*a;this.b1.vely-=this.jAccy*a;a=this.b2.imass;this.b2.velx+=this.jAccx*
a;this.b2.vely+=this.jAccy*a;this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)*this.b1.iinertia;this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)*this.b2.iinertia},applyImpulseVel:function(){var a=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel));var b=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+
this.a1relx*(this.b1.angvel+this.b1.kinangvel));var c=this.b2.angvel+this.b2.kinangvel-this.b1.angvel-this.b1.kinangvel;a=this.biasx-a;b=this.biasy-b;c=this.biasz-c;var d=this.kMassa*a+this.kMassb*b+this.kMassc*c,e=this.kMassb*a+this.kMassd*b+this.kMasse*c;c=this.kMassc*a+this.kMasse*b+this.kMassf*c;var f=this.gamma;a=d-this.jAccx*f;b=e-this.jAccy*f;c-=this.jAccz*f;d=this.jAccx;e=this.jAccy;f=this.jAccz;this.jAccx+=1*a;this.jAccy+=1*b;this.jAccz+=1*c;if(this.breakUnderForce){if(this.jAccx*this.jAccx+
this.jAccy*this.jAccy+this.jAccz*this.jAccz>this.jMax*this.jMax)return!0}else this.stiff||(a=this.jMax,b=this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz,b>a*a&&(a*=Ga.invsqrt(b),this.jAccx*=a,this.jAccy*=a,this.jAccz*=a));a=this.jAccx-d;b=this.jAccy-e;c=this.jAccz-f;d=this.b1.imass;this.b1.velx-=a*d;this.b1.vely-=b*d;d=this.b2.imass;this.b2.velx+=a*d;this.b2.vely+=b*d;this.b1.angvel-=(b*this.a1relx-a*this.a1rely+c)*this.b1.iinertia;this.b2.angvel+=(b*this.a2relx-a*this.a2rely+c)*
this.b2.iinertia;return!1},applyImpulsePos:function(){var a=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;var b=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var c=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;var d=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var e=this.b2.posx+c-(this.b1.posx+a);var f=this.b2.posy+d-(this.b1.posy+b);var m=this.b2.rot-this.b1.rot-this.phase;if(this.breakUnderError&&e*e+f*f+m*m>this.maxError*this.maxError)return!0;var h=!0;
e*e+f*f<x.constraintLinearSlop*x.constraintLinearSlop&&(h=!1,f=e=0);if(Ga.sqr(m)<Ga.sqr(x.constraintAngularSlop))if(h)m=0;else return!1;e*=.5;f*=.5;m*=.5;6<e*e+f*f&&(h=this.b1.smass+this.b2.smass,h>x.epsilon&&(h=.75/h,e=-e*h,f=-f*h,h=e*e+f*f,400<h&&(h=20*Ga.invsqrt(h),e*=h,f*=h),h=this.b1.imass,this.b1.posx-=e*h,this.b1.posy-=f*h,h=this.b2.imass,this.b2.posx+=e*h,this.b2.posy+=f*h,e=this.b2.posx+c-(this.b1.posx+a),f=this.b2.posy+d-(this.b1.posy+b),m=this.b2.rot-this.b1.rot-this.phase,e*=.5,f*=.5,
m*=.5));var g,k,l,n;h=k=this.b1.smass+this.b2.smass;var p=n=l=g=0;if(0!=this.b1.sinertia){var r=a*this.b1.sinertia,t=b*this.b1.sinertia;h+=t*b;g+=-t*a;k+=r*a;l+=-t;n+=r;p+=this.b1.sinertia}0!=this.b2.sinertia&&(r=c*this.b2.sinertia,t=d*this.b2.sinertia,h+=t*d,g+=-t*c,k+=r*c,l+=-t,n+=r,p+=this.b2.sinertia);e=-e;f=-f;m=-m;r=e*e+f*f;36<r&&(r=6*Ga.invsqrt(r),e*=r,f*=r);Ga.clamp2(m,.25);r=h*(k*p-n*n)+g*(l*n-g*p)+l*(g*n-l*k);if(r!=r)e=f=m=0;else if(0==r)e=0!=h?e/h:0,f=0!=k?f/k:0,m=0!=p?m/p:0;else{r=1/r;
var u=n*l-g*p;t=g*n-l*k;var v=g*l-h*n;n=r*(e*(k*p-n*n)+f*u+m*t);l=r*(e*u+f*(h*p-l*l)+m*v);m=r*(e*t+f*v+m*(h*k-g*g));e=n;f=l}h=this.b1.imass;this.b1.posx-=e*h;this.b1.posy-=f*h;h=this.b2.imass;this.b2.posx+=e*h;this.b2.posy+=f*h;this.b1.delta_rot(-(f*a-e*b+m)*this.b1.iinertia);this.b2.delta_rot((f*c-e*d+m)*this.b2.iinertia);return!1},__class__:zh});var Ea=function(){this.colarb=this.fluidarb=this.sensorarb=null;this.type=0;this.b1=this.b2=this.ws1=this.ws2=this.pair=null;this.invalidated=!1;this.immState=
0;this.intchange=this.presentable=this.continuous=this.fresh=!1;this.present=0;this.active=this.cleared=this.sleeping=!1;this.id=this.di=this.stamp=this.up_stamp=this.sleep_stamp=this.endGenerated=0;this.outer=null};k["zpp_nape.dynamics.ZPP_Arbiter"]=Ea;Ea.__name__=["zpp_nape","dynamics","ZPP_Arbiter"];Ea.prototype={outer:null,wrapper:function(){null==this.outer&&(Ea.internal=!0,this.type==Ea.COL?(this.colarb.outer_zn=new Ah,this.outer=this.colarb.outer_zn):this.type==Ea.FLUID?(this.fluidarb.outer_zn=
new Bh,this.outer=this.fluidarb.outer_zn):this.outer=new ke,this.outer.zpp_inner=this,Ea.internal=!1);return this.outer},id:null,di:null,stamp:null,up_stamp:null,sleep_stamp:null,endGenerated:null,active:null,cleared:null,sleeping:null,present:null,intchange:null,presentable:null,continuous:null,fresh:null,immState:null,acting:function(){return this.active?0!=(this.immState&1):!1},invalidated:null,b1:null,b2:null,ws1:null,ws2:null,pair:null,type:null,colarb:null,fluidarb:null,sensorarb:null,lazyRetire:function(a,
b){this.cleared=!0;null!=b&&this.b2!=b||this.b1.arbiters.inlined_remove(this);null!=b&&this.b1!=b||this.b2.arbiters.inlined_remove(this);null!=this.pair&&(this.pair=this.pair.arb=null);this.active=!1;a.f_arbiters.modified=!0},sup_assign:function(a,b,c,d){this.b1=a.body;this.ws1=a;this.b2=b.body;this.ws2=b;this.id=c;this.di=d;this.b1.arbiters.inlined_add(this);this.b2.arbiters.inlined_add(this);this.active=!0;this.present=0;this.presentable=this.fresh=this.sleeping=this.cleared=!1},sup_retire:function(){this.cleared||
(this.b1.arbiters.inlined_remove(this),this.b2.arbiters.inlined_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1},__class__:Ea};var Wc=function(){this.next=null;Ea.call(this);this.type=Ea.SENSOR;this.sensorarb=this};k["zpp_nape.dynamics.ZPP_SensorArbiter"]=Wc;Wc.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"];Wc.__super__=Ea;Wc.prototype=w(Ea.prototype,{next:null,alloc:function(){},free:function(){},assign:function(a,b,c,d){this.sup_assign(a,
b,c,d)},retire:function(){this.sup_retire();this.free();this.next=Wc.zpp_pool;Wc.zpp_pool=this},__class__:Wc});var vc=function(){this.wMass=this.adamp=this.agamma=this.vMassa=this.vMassb=this.vMassc=this.dampx=this.dampy=this.lgamma=this.nx=this.ny=this.buoyx=this.buoyy=this.pre_dt=0;this.nodrag=!1;this.centroidx=this.centroidy=this.overlap=this.r1x=this.r1y=this.r2x=this.r2y=0;this.outer_zn=this.next=null;Ea.call(this);this.type=Ea.FLUID;this.fluidarb=this;this.buoyy=this.buoyx=0;this.pre_dt=-1};
k["zpp_nape.dynamics.ZPP_FluidArbiter"]=vc;vc.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"];vc.__super__=Ea;vc.prototype=w(Ea.prototype,{outer_zn:null,next:null,alloc:function(){},free:function(){},centroidx:null,centroidy:null,overlap:null,r1x:null,r1y:null,r2x:null,r2y:null,nodrag:null,wMass:null,adamp:null,agamma:null,vMassa:null,vMassb:null,vMassc:null,dampx:null,dampy:null,lgamma:null,nx:null,ny:null,buoyx:null,buoyy:null,assign:function(a,b,c,d){this.sup_assign(a,b,c,d);this.nx=0;this.ny=
1;this.adamp=this.dampy=this.dampx=0},retire:function(){this.sup_retire();this.free();this.next=vc.zpp_pool;vc.zpp_pool=this;this.pre_dt=-1},inject:function(a,b,c){this.overlap=a;this.centroidx=b;this.centroidy=c},pre_dt:null,preStep:function(a,b){-1==this.pre_dt&&(this.pre_dt=b);var c=b/this.pre_dt;this.pre_dt=b;this.r1x=this.centroidx-this.b1.posx;this.r1y=this.centroidy-this.b1.posy;this.r2x=this.centroidx-this.b2.posx;this.r2y=this.centroidy-this.b2.posy;if(this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity){var d=
this.ws1.fluidProperties.gravityx;var e=this.ws1.fluidProperties.gravityy}else d=a.gravityx,e=a.gravityy;if(this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity){var f=this.ws2.fluidProperties.gravityx;var m=this.ws2.fluidProperties.gravityy}else f=a.gravityx,m=a.gravityy;var h=a=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var g=this.overlap*this.ws1.fluidProperties.density,k=this.overlap*this.ws2.fluidProperties.density;g>k?(f=g+k,a-=d*f,h-=e*f):g<k?(e=g+k,a+=f*e,h+=m*e):(d=
.5*(d+f),e=.5*(e+m),this.ws1.worldCOMx*d+this.ws1.worldCOMy*e>this.ws2.worldCOMx*d+this.ws2.worldCOMy*e?(f=g+k,a-=d*f,h-=e*f):(f=g+k,a+=d*f,h+=e*f))}else this.ws1.fluidEnabled?(f=this.overlap*this.ws1.fluidProperties.density,a-=d*f,h-=e*f):this.ws2.fluidEnabled&&(e=this.overlap*this.ws2.fluidProperties.density,a+=f*e,h+=m*e);a*=b;h*=b;this.buoyx=a;this.buoyy=h;this.b1.isDynamic()&&(e=this.b1.imass,this.b1.velx-=a*e,this.b1.vely-=h*e,this.b1.angvel-=(h*this.r1x-a*this.r1y)*this.b1.iinertia);this.b2.isDynamic()&&
(e=this.b2.imass,this.b2.velx+=a*e,this.b2.vely+=h*e,this.b2.angvel+=(h*this.r2x-a*this.r2y)*this.b2.iinertia);if(this.ws1.fluidEnabled&&0!=this.ws1.fluidProperties.viscosity||this.ws2.fluidEnabled&&0!=this.ws2.fluidProperties.viscosity){this.nodrag=!1;a=0;this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),a+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area);this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),a+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/
this.ws1.area);0!=a?(h=this.b1.sinertia+this.b2.sinertia,this.wMass=0!=h?1/h:0,a*=8E-4*Math.PI,this.agamma=1/(b*a*(2+a*b)),a=1/(1+this.agamma),this.agamma*=a,this.wMass*=a):this.agamma=this.wMass=0;a=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel));h=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));a*a+
h*h<x.epsilon*x.epsilon||(e=Ga.invsqrt(a*a+h*h),this.nx=a*e,this.ny=h*e);a=0;if(this.ws1.fluidEnabled)if(h=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area,0==this.ws2.type)a-=h*this.ws2.circle.radius*x.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{d=e=0;for(f=this.ws2.polygon.edges.begin();null!=f;)m=f.elem(),e+=m.length,m=h*m.length*(m.gnormx*this.nx+m.gnormy*this.ny),0<m&&(m*=-x.fluidVacuumDrag),d-=.5*m*x.fluidLinearDrag,f=f.next;a+=d/e}if(this.ws2.fluidEnabled)if(h=-this.ws2.fluidProperties.viscosity*
this.overlap/this.ws1.area,0==this.ws1.type)a-=h*this.ws1.circle.radius*x.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{d=e=0;for(f=this.ws1.polygon.edges.begin();null!=f;)m=f.elem(),e+=m.length,m=h*m.length*(m.gnormx*this.nx+m.gnormy*this.ny),0<m&&(m*=-x.fluidVacuumDrag),d-=.5*m*x.fluidLinearDrag,f=f.next;a+=d/e}0!=a?(h=d=this.b1.smass+this.b2.smass,e=0,0!=this.b1.sinertia&&(f=this.r1x*this.b1.sinertia,m=this.r1y*this.b1.sinertia,h+=m*this.r1y,e+=-m*this.r1x,d+=f*this.r1x),0!=this.b2.sinertia&&
(f=this.r2x*this.b2.sinertia,m=this.r2y*this.b2.sinertia,h+=m*this.r2y,e+=-m*this.r2x,d+=f*this.r2x),f=h*d-e*e,f!=f?h=e=d=0:0==f?(h=0!=h?1/h:0,d=0!=d?1/d:0,e=0):(f=1/f,m=d*f,d=h*f,h=m,e*=-f),this.vMassa=h,this.vMassb=e,this.vMassc=d,a*=2*Math.PI,this.lgamma=1/(b*a*(2+a*b)),b=1/(1+this.lgamma),this.lgamma*=b,this.vMassa*=b,this.vMassb*=b,this.vMassc*=b):this.lgamma=this.vMassc=this.vMassb=this.vMassa=0}else this.nodrag=!0,this.adamp=this.dampy=this.dampx=0;this.dampx*=c;this.dampy*=c;this.adamp*=c},
warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.dampx*a;this.b1.vely-=this.dampy*a;a=this.b2.imass;this.b2.velx+=this.dampx*a;this.b2.vely+=this.dampy*a;this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y);this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y);this.b1.angvel-=this.adamp*this.b1.iinertia;this.b2.angvel+=this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var a=this.b1.angvel+this.b1.kinangvel,b=this.b2.angvel+
this.b2.kinangvel,c=this.b1.velx+this.b1.kinvelx-this.r1y*a-(this.b2.velx+this.b2.kinvelx-this.r2y*b),d=this.b1.vely+this.b1.kinvely+this.r1x*a-(this.b2.vely+this.b2.kinvely+this.r2x*b),e=this.vMassa*c+this.vMassb*d;d=this.vMassb*c+this.vMassc*d;var f=this.lgamma;c=e-this.dampx*f;d-=this.dampy*f;this.dampx+=1*c;this.dampy+=1*d;e=this.b1.imass;this.b1.velx-=c*e;this.b1.vely-=d*e;e=this.b2.imass;this.b2.velx+=c*e;this.b2.vely+=d*e;this.b1.angvel-=this.b1.iinertia*(d*this.r1x-c*this.r1y);this.b2.angvel+=
this.b2.iinertia*(d*this.r2x-c*this.r2y);a=(a-b)*this.wMass-this.adamp*this.agamma;this.adamp+=a;this.b1.angvel-=a*this.b1.iinertia;this.b2.angvel+=a*this.b2.iinertia}},__class__:vc});var Kc=function(){this.pre_dt=0;this.stat=!1;this.next=null;this.hc2=this.hpc2=!1;this.c1=this.oc1=this.c2=this.oc2=null;this.__ref_vertex=0;this.__ref_edge1=this.__ref_edge2=null;this.biasCoef=0;this.rev=!1;this.nx=this.ny=this.kMassa=this.kMassb=this.kMassc=this.Ka=this.Kb=this.Kc=this.rMass=this.jrAcc=this.rn1a=this.rt1a=
this.rn1b=this.rt1b=this.rn2a=this.rt2a=this.rn2b=this.rt2b=this.k1x=this.k1y=this.k2x=this.k2y=this.surfacex=this.surfacey=this.lnormx=this.lnormy=this.lproj=this.radius=0;this.s1=this.s2=this.contacts=this.innards=null;this.userdef_dyn_fric=this.userdef_stat_fric=this.userdef_restitution=this.userdef_rfric=!1;this.dyn_fric=this.stat_fric=this.restitution=this.rfric=0;this.outer_zn=null;Ea.call(this);this.pre_dt=-1;this.contacts=new ic;this.innards=new ji;this.type=Ea.COL;this.colarb=this};k["zpp_nape.dynamics.ZPP_ColArbiter"]=
Kc;Kc.__name__=["zpp_nape","dynamics","ZPP_ColArbiter"];Kc.__super__=Ea;Kc.prototype=w(Ea.prototype,{outer_zn:null,dyn_fric:null,stat_fric:null,restitution:null,rfric:null,userdef_dyn_fric:null,userdef_stat_fric:null,userdef_restitution:null,userdef_rfric:null,s1:null,s2:null,contacts:null,innards:null,nx:null,ny:null,kMassa:null,kMassb:null,kMassc:null,Ka:null,Kb:null,Kc:null,rMass:null,jrAcc:null,rn1a:null,rt1a:null,rn1b:null,rt1b:null,rn2a:null,rt2a:null,rn2b:null,rt2b:null,k1x:null,k1y:null,k2x:null,
k2y:null,surfacex:null,surfacey:null,ptype:null,lnormx:null,lnormy:null,lproj:null,radius:null,rev:null,biasCoef:null,__ref_edge1:null,__ref_edge2:null,__ref_vertex:null,c1:null,oc1:null,c2:null,oc2:null,hc2:null,hpc2:null,next:null,alloc:function(){},free:function(){this.userdef_rfric=this.userdef_restitution=this.userdef_stat_fric=this.userdef_dyn_fric=!1;this.__ref_edge1=this.__ref_edge2=null},stat:null,injectContact:function(a,b,c,d,e,f,m){null==m&&(m=!1);for(var h=null,g=this.contacts.begin();null!=
g;){var k=g.elem();if(f==k.hash){h=k;break}g=g.next}null==h?(null==ic.zpp_pool?h=new ic:(h=ic.zpp_pool,ic.zpp_pool=h.next,h.next=null),h.alloc(),g=h.inner,g.jnAcc=g.jtAcc=0,h.hash=f,h.fresh=!0,h.arbiter=this,this.jrAcc=0,this.contacts.inlined_add(h),this.innards.add(g)):h.fresh=!1;h.px=a;h.py=b;this.nx=c;this.ny=d;h.dist=e;h.stamp=this.stamp;h.posOnly=m;return h},assign:function(a,b,c,d){this.sup_assign(a,b,c,d);this.s1=a;this.s2=b;this.calcProperties()},calcProperties:function(){this.userdef_restitution||
(this.s1.material.elasticity<=cb.NEGINF()||this.s2.material.elasticity<=cb.NEGINF()?this.restitution=0:this.s1.material.elasticity>=cb.POSINF()||this.s2.material.elasticity>=cb.POSINF()?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,0>this.restitution&&(this.restitution=0),1<this.restitution&&(this.restitution=1));this.userdef_dyn_fric||(this.dyn_fric=Ga.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction));this.userdef_stat_fric||
(this.stat_fric=Ga.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction));this.userdef_rfric||(this.rfric=Ga.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},validate_props:function(){this.invalidated&&(this.invalidated=!1,this.calcProperties())},retire:function(){for(this.sup_retire();!this.contacts.empty();){var a=this.contacts.inlined_pop_unsafe();a.free();a.next=ic.zpp_pool;ic.zpp_pool=a;this.innards.inlined_pop()}this.free();this.next=Kc.zpp_pool;Kc.zpp_pool=
this;this.pre_dt=-1},cleanupContacts:function(){var a=!0,b=null,c=null,d=this.innards.begin();this.hc2=!1;for(var e=this.contacts.begin();null!=e;){var f=e.elem();f.stamp+x.arbiterExpirationDelay<this.stamp?(e=this.contacts.inlined_erase(b),d=this.innards.inlined_erase(c),f.free(),f.next=ic.zpp_pool,ic.zpp_pool=f):(b=f.inner,c=f.active,f.active=f.stamp==this.stamp,f.active&&(a?(a=!1,this.c1=b,this.oc1=f):(this.hc2=!0,this.c2=b,this.oc2=f)),c!=f.active&&(this.contacts.modified=!0),b=e,c=d,d=d.next,
e=e.next)}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(d=this.c1,this.c1=this.c2,this.c2=d,d=this.oc1,this.oc1=this.oc2,this.oc2=d,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;return a},pre_dt:null,preStep:function(a){this.validate_props();-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;var c=this.b1.smass+this.b2.smass;this.hc2=!1;a=!0;this.biasCoef=this.b1.isDynamic()&&this.b2.isDynamic()?this.continuous?x.contactContinuousBiasCoef:x.contactBiasCoef:
this.continuous?x.contactContinuousStaticBiasCoef:x.contactStaticBiasCoef;this.continuous=!1;for(var d=null,e=null,f=this.innards.begin(),m=this.contacts.begin();null!=m;){var h=m.elem();if(h.stamp+x.arbiterExpirationDelay<this.stamp)m=this.contacts.inlined_erase(d),f=this.innards.inlined_erase(e),h.free(),h.next=ic.zpp_pool,ic.zpp_pool=h;else{d=h.inner;e=h.active;h.active=h.stamp==this.stamp;if(h.active){a?(a=!1,this.c1=d,this.oc1=h):(this.hc2=!0,this.c2=d,this.oc2=h);d.r2x=h.px-this.b2.posx;d.r2y=
h.py-this.b2.posy;d.r1x=h.px-this.b1.posx;d.r1y=h.py-this.b1.posy;var g=c+this.b2.sinertia*Ga.sqr(d.r2x*this.nx+d.r2y*this.ny);g+=this.b1.sinertia*Ga.sqr(d.r1x*this.nx+d.r1y*this.ny);d.tMass=g<x.epsilon*x.epsilon?0:1/g;g=c+this.b2.sinertia*Ga.sqr(this.ny*d.r2x-this.nx*d.r2y);g+=this.b1.sinertia*Ga.sqr(this.ny*d.r1x-this.nx*d.r1y);d.nMass=g<x.epsilon*x.epsilon?0:1/g;var k=this.b2.angvel+this.b2.kinangvel;g=this.b2.velx+this.b2.kinvelx-d.r2y*k;var l=this.b2.vely+this.b2.kinvely+d.r2x*k;k=this.b1.angvel+
this.b1.kinangvel;g-=this.b1.velx+this.b1.kinvelx-d.r1y*k;l-=this.b1.vely+this.b1.kinvely+d.r1x*k;k=this.nx*g+this.ny*l;h.elasticity=this.restitution;d.bounce=k*h.elasticity;d.bounce>-x.elasticThreshold&&(d.bounce=0);k=l*this.nx-g*this.ny;g=x.staticFrictionThreshold;d.friction=k*k>g*g?this.dyn_fric:this.stat_fric;d.jnAcc*=b;d.jtAcc*=b}e!=h.active&&(this.contacts.modified=!0);d=m;e=f;f=f.next;m=m.next}}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(f=this.c1,this.c1=this.c2,this.c2=f,f=this.oc1,this.oc1=
this.oc2,this.oc2=f,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;this.jrAcc*=b;a||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*
this.b1.kinangvel));this.hc2&&(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=c+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*
this.rn1b*this.rn1b,this.kMassb=c+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=c+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<x.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)?(this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc,b=this.kMassa*this.kMassc-this.kMassb*this.kMassb,b!=b?this.kMassa=this.kMassb=this.kMassc=0:0==
b?(this.kMassa=0!=this.kMassa?1/this.kMassa:0,this.kMassc=0!=this.kMassc?1/this.kMassc:0,this.kMassb=0):(b=1/b,c=this.kMassc*b,this.kMassc=this.kMassa*b,this.kMassa=c,this.kMassb*=-b)):(this.hc2=!1,this.oc2.dist<this.oc1.dist&&(b=this.c1,this.c1=this.c2,this.c2=b),this.oc2.active=!1,this.contacts.modified=!0));this.surfacex=this.b2.svelx;this.surfacey=this.b2.svely;this.surfacex+=1*this.b1.svelx;this.surfacey+=1*this.b1.svely;this.surfacex=-this.surfacex;this.surfacey=-this.surfacey;this.rMass=this.b1.sinertia+
this.b2.sinertia;0!=this.rMass&&(this.rMass=1/this.rMass);return a},warmStart:function(){var a=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,b=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc,c=this.b1.imass;this.b1.velx-=a*c;this.b1.vely-=b*c;this.b1.angvel-=this.b1.iinertia*(b*this.c1.r1x-a*this.c1.r1y);c=this.b2.imass;this.b2.velx+=a*c;this.b2.vely+=b*c;this.b2.angvel+=this.b2.iinertia*(b*this.c1.r2x-a*this.c1.r2y);this.hc2&&(a=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,b=this.ny*this.c2.jnAcc+this.nx*
this.c2.jtAcc,c=this.b1.imass,this.b1.velx-=a*c,this.b1.vely-=b*c,this.b1.angvel-=this.b1.iinertia*(b*this.c2.r1x-a*this.c2.r1y),c=this.b2.imass,this.b2.velx+=a*c,this.b2.vely+=b*c,this.b2.angvel+=this.b2.iinertia*(b*this.c2.r2x-a*this.c2.r2y));this.b2.angvel+=this.jrAcc*this.b2.iinertia;this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);var b=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-
(this.b1.vely+this.c1.r1x*this.b1.angvel);var c=(b*this.nx-a*this.ny+this.surfacex)*this.c1.tMass;a=this.c1.friction*this.c1.jnAcc;var d=this.c1.jtAcc;var e=d-c;e>a?e=a:e<-a&&(e=-a);c=e-d;this.c1.jtAcc=e;d=-this.ny*c;var f=this.nx*c;this.b2.velx+=d*this.b2.imass;this.b2.vely+=f*this.b2.imass;this.b1.velx-=d*this.b1.imass;this.b1.vely-=f*this.b1.imass;this.b2.angvel+=this.rt1b*c*this.b2.iinertia;this.b1.angvel-=this.rt1a*c*this.b1.iinertia;this.hc2?(e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-
(this.b1.velx-this.c2.r1y*this.b1.angvel),f=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=(f*this.nx-e*this.ny+this.surfacex)*this.c2.tMass,a=this.c2.friction*this.c2.jnAcc,d=this.c2.jtAcc,e=d-c,e>a?e=a:e<-a&&(e=-a),c=e-d,this.c2.jtAcc=e,d=-this.ny*c,f=this.nx*c,this.b2.velx+=d*this.b2.imass,this.b2.vely+=f*this.b2.imass,this.b1.velx-=d*this.b1.imass,this.b1.vely-=f*this.b1.imass,this.b2.angvel+=this.rt2b*c*this.b2.iinertia,this.b1.angvel-=this.rt2a*
c*this.b1.iinertia,a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),b=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),f=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=this.c1.jnAcc,d=this.c2.jnAcc,a=a*this.nx+b*this.ny+this.surfacey+this.c1.bounce-(this.Ka*c+this.Kb*d),e=e*this.nx+
f*this.ny+this.surfacey+this.c2.bounce-(this.Kb*c+this.Kc*d),f=-(this.kMassa*a+this.kMassb*e),b=-(this.kMassb*a+this.kMassc*e),0<=f&&0<=b?(a=f-c,e=b-d,this.c1.jnAcc=f,this.c2.jnAcc=b):(f=-this.c1.nMass*a,0<=f&&0<=this.Kb*f+e?(a=f-c,e=-d,this.c1.jnAcc=f,this.c2.jnAcc=0):(b=-this.c2.nMass*e,0<=b&&0<=this.Kb*b+a?(a=-c,e=b-d,this.c1.jnAcc=0,this.c2.jnAcc=b):0<=a&&0<=e?(a=-c,e=-d,this.c1.jnAcc=this.c2.jnAcc=0):e=a=0)),c=a+e,d=this.nx*c,f=this.ny*c,this.b2.velx+=d*this.b2.imass,this.b2.vely+=f*this.b2.imass,
this.b1.velx-=d*this.b1.imass,this.b1.vely-=f*this.b1.imass,this.b2.angvel+=(this.rn1b*a+this.rn2b*e)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*a+this.rn2a*e)*this.b1.iinertia):(0!=this.radius&&(c=(this.b2.angvel-this.b1.angvel)*this.rMass,a=this.rfric*this.c1.jnAcc,d=this.jrAcc,this.jrAcc-=c,this.jrAcc>a?this.jrAcc=a:this.jrAcc<-a&&(this.jrAcc=-a),c=this.jrAcc-d,this.b2.angvel+=c*this.b2.iinertia,this.b1.angvel-=c*this.b1.iinertia),a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-
this.c1.r1y*this.b1.angvel),b=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),c=(this.c1.bounce+(this.nx*a+this.ny*b)+this.surfacey)*this.c1.nMass,d=this.c1.jnAcc,e=d-c,0>e&&(e=0),c=e-d,this.c1.jnAcc=e,d=this.nx*c,f=this.ny*c,this.b2.velx+=d*this.b2.imass,this.b2.vely+=f*this.b2.imass,this.b1.velx-=d*this.b1.imass,this.b1.vely-=f*this.b1.imass,this.b2.angvel+=this.rn1b*c*this.b2.iinertia,this.b1.angvel-=this.rn1a*c*this.b1.iinertia)},applyImpulsePos:function(){if(2==
this.ptype){var a=this.c1;var b=this.b2.axisy*a.lr2x-this.b2.axisx*a.lr2y;var c=a.lr2x*this.b2.axisx+a.lr2y*this.b2.axisy;b+=1*this.b2.posx;c+=1*this.b2.posy;var d=this.b1.axisy*a.lr1x-this.b1.axisx*a.lr1y;var e=a.lr1x*this.b1.axisx+a.lr1y*this.b1.axisy;d+=1*this.b1.posx;e+=1*this.b1.posy;var f=b-d;a=c-e;var m=Ga.sqrt(f*f+a*a),h=this.radius-x.collisionSlop,g=m-h;0>f*this.nx+a*this.ny&&(f=-f,a=-a,g-=this.radius);0>g&&(m<x.epsilon?0!=this.b1.smass?this.b1.posx+=10*x.epsilon:this.b2.posx+=10*x.epsilon:
(g=1/m,f*=g,a*=g,b=.5*(d+b),c=.5*(e+c),d=b-this.b1.posx,e=c-this.b1.posy,b-=this.b2.posx,c-=this.b2.posy,d=a*d-f*e,b=a*b-f*c,c=this.b2.smass+b*b*this.b2.sinertia+this.b1.smass+d*d*this.b1.sinertia,0!=c&&(m=-this.biasCoef*(m-h)/c,f*=m,a*=m,h=this.b1.imass,this.b1.posx-=f*h,this.b1.posy-=a*h,this.b1.delta_rot(-d*this.b1.iinertia*m),h=this.b2.imass,this.b2.posx+=f*h,this.b2.posy+=a*h,this.b2.delta_rot(b*this.b2.iinertia*m))))}else{var k=0;h=0;0==this.ptype?(f=this.b1.axisy*this.lnormx-this.b1.axisx*
this.lnormy,a=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,d=this.lproj+(f*this.b1.posx+a*this.b1.posy),m=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y,g=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,m+=1*this.b2.posx,g+=1*this.b2.posy,this.hpc2&&(k=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,h=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,k+=1*this.b2.posx,h+=1*this.b2.posy)):(f=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,a=this.lnormx*this.b2.axisx+
this.lnormy*this.b2.axisy,d=this.lproj+(f*this.b2.posx+a*this.b2.posy),m=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,g=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,m+=1*this.b1.posx,g+=1*this.b1.posy,this.hpc2&&(k=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,h=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,k+=1*this.b1.posx,h+=1*this.b1.posy));b=m*f+g*a-d-this.radius;b+=x.collisionSlop;c=0;this.hpc2&&(c=k*f+h*a-d-this.radius,c+=x.collisionSlop);if(0>b||0>c)if(this.rev&&
(f=-f,a=-a),d=m-this.b1.posx,e=g-this.b1.posy,m-=this.b2.posx,g-=this.b2.posy,this.hpc2){var l=k-this.b1.posx;var n=h-this.b1.posy;k-=this.b2.posx;var p=h-this.b2.posy;h=a*d-f*e;m=a*m-f*g;e=a*l-f*n;d=a*k-f*p;g=this.b1.smass+this.b2.smass;this.kMassa=g+this.b1.sinertia*h*h+this.b2.sinertia*m*m;this.kMassb=g+this.b1.sinertia*h*e+this.b2.sinertia*m*d;this.kMassc=g+this.b1.sinertia*e*e+this.b2.sinertia*d*d;n=this.kMassa;g=this.kMassb;l=this.kMassc;k=b*this.biasCoef;for(p=c*this.biasCoef;;){b=k;c=p;b=
-b;c=-c;var r=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(r!=r)b=c=0;else if(0==r)b=0!=this.kMassa?b/this.kMassa:0,c=0!=this.kMassc?c/this.kMassc:0;else{r=1/r;var t=r*(this.kMassc*b-this.kMassb*c);c=r*(this.kMassa*c-this.kMassb*b);b=t}if(0<=b&&0<=c){g=(b+c)*this.b1.imass;this.b1.posx-=f*g;this.b1.posy-=a*g;this.b1.delta_rot(-this.b1.iinertia*(h*b+e*c));h=(b+c)*this.b2.imass;this.b2.posx+=f*h;this.b2.posy+=a*h;this.b2.delta_rot(this.b2.iinertia*(m*b+d*c));break}b=-k/n;c=0;n=g*b+p;if(0<=b&&0<=
n){g=(b+c)*this.b1.imass;this.b1.posx-=f*g;this.b1.posy-=a*g;this.b1.delta_rot(-this.b1.iinertia*(h*b+e*c));h=(b+c)*this.b2.imass;this.b2.posx+=f*h;this.b2.posy+=a*h;this.b2.delta_rot(this.b2.iinertia*(m*b+d*c));break}b=0;c=-p/l;g=g*c+k;if(0<=c&&0<=g){g=(b+c)*this.b1.imass;this.b1.posx-=f*g;this.b1.posy-=a*g;this.b1.delta_rot(-this.b1.iinertia*(h*b+e*c));h=(b+c)*this.b2.imass;this.b2.posx+=f*h;this.b2.posy+=a*h;this.b2.delta_rot(this.b2.iinertia*(m*b+d*c));break}break}}else h=a*d-f*e,m=a*m-f*g,c=
this.b2.smass+m*m*this.b2.sinertia+this.b1.smass+h*h*this.b1.sinertia,0!=c&&(b=-this.biasCoef*b/c,f*=b,a*=b,c=this.b1.imass,this.b1.posx-=f*c,this.b1.posy-=a*c,this.b1.delta_rot(-h*this.b1.iinertia*b),h=this.b2.imass,this.b2.posx+=f*h,this.b2.posy+=a*h,this.b2.delta_rot(m*this.b2.iinertia*b))}},__class__:Kc});var ic=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.dist=this.elasticity=0;this.fresh=!1;this.stamp=this.hash=0;this.active=this.posOnly=!1;this.arbiter=
null;this.px=this.py=0;this.outer=null;this.inner=new ji};k["zpp_nape.dynamics.ZPP_Contact"]=ic;ic.__name__=["zpp_nape","dynamics","ZPP_Contact"];ic.prototype={outer:null,wrapper:function(){null==this.outer&&(this.outer=new sj,ic.internal=!1,this.outer.zpp_inner=this);return this.outer},px:null,py:null,arbiter:null,inner:null,active:null,posOnly:null,stamp:null,hash:null,fresh:null,dist:null,elasticity:null,free:function(){this.arbiter=null},alloc:function(){},next:null,elem:function(){return this},
begin:function(){return this.next},_inuse:null,modified:null,pushmod:null,length:null,inlined_add:function(a){a._inuse=!0;a.next=this.begin();this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.next=a.next;a.elem()._inuse=!1;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},inlined_erase:function(a){var b;if(null==a){var c=this.begin();
this.next=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);c.elem()._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},__class__:ic};var ji=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.r1x=this.r1y=this.r2x=this.r2y=this.nMass=this.tMass=this.bounce=this.friction=this.jnAcc=this.jtAcc=this.lr1x=this.lr1y=
this.lr2x=this.lr2y=0};k["zpp_nape.dynamics.ZPP_IContact"]=ji;ji.__name__=["zpp_nape","dynamics","ZPP_IContact"];ji.prototype={r1x:null,r1y:null,r2x:null,r2y:null,nMass:null,tMass:null,bounce:null,friction:null,jnAcc:null,jtAcc:null,lr1x:null,lr1y:null,lr2x:null,lr2y:null,next:null,elem:function(){return this},begin:function(){return this.next},_inuse:null,modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.begin();this.next=
a;this.modified=!0;this.length++;return a},inlined_pop:function(){var a=this.begin();this.next=a.next;a.elem()._inuse=!1;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.next=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);c.elem()._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},__class__:ji};var tj=function(){this.depth=
0;this.group=this.groups=this.interactors=null;this.ignore=!1;this.outer=null;this.depth=0;this.groups=new ki;this.interactors=new Xd};k["zpp_nape.dynamics.ZPP_InteractionGroup"]=tj;tj.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"];tj.prototype={outer:null,ignore:null,group:null,groups:null,interactors:null,depth:null,invalidate:function(a){null==a&&(a=!1);if(a||this.ignore){for(var b=this.interactors.begin();null!=b;){var c=b.elem();c.isBody()?c.ibody.wake():c.isShape()?c.ishape.body.wake():
c.icompound.wake();b=b.next}for(b=this.groups.begin();null!=b;)b.elem().invalidate(a),b=b.next}},addInteractor:function(a){this.interactors.add(a)},remInteractor:function(a,b){this.interactors.remove(a)},__class__:tj};var ek=function(){this.at_index_0=this.at_index_1=this.at_index_2=this.at_index_3=0;this.lengths=this.ite_0=this.ite_1=this.ite_2=this.ite_3=null;this.zip_length=!1;this._length=0;this.space=null;Ce.call(this);this.at_index_3=this.at_index_2=this.at_index_1=this.at_index_0=0;this.zip_length=
!0;this._length=0;this.lengths=[];for(var a=0;4>a;)a++,this.lengths.push(0)};k["zpp_nape.dynamics.ZPP_SpaceArbiterList"]=ek;ek.__name__=["zpp_nape","dynamics","ZPP_SpaceArbiterList"];ek.__super__=Ce;ek.prototype=w(Ce.prototype,{space:null,_length:null,zip_length:null,zpp_gl:function(){this.zpp_vm();if(this.zip_length){for(var a=this._length=0,b=0,c=this.space.c_arbiters_true.begin();null!=c;)c.elem().active&&++b,c=c.next;this.lengths[a++]=b;this._length+=b;b=0;for(c=this.space.c_arbiters_false.begin();null!=
c;)c.elem().active&&++b,c=c.next;this.lengths[a++]=b;this._length+=b;b=0;for(c=this.space.f_arbiters.begin();null!=c;)c.elem().active&&++b,c=c.next;this.lengths[a++]=b;this._length+=b;b=0;for(c=this.space.s_arbiters.begin();null!=c;)c.elem().active&&++b,c=c.next;this.lengths[a++]=b;this._length+=b;this.zip_length=!1}return this._length},lengths:null,ite_0:null,ite_1:null,ite_2:null,ite_3:null,at_index_0:null,at_index_1:null,at_index_2:null,at_index_3:null,zpp_vm:function(){var a=!1;this.space.c_arbiters_true.modified&&
(a=!0,this.space.c_arbiters_true.modified=!1);this.space.c_arbiters_false.modified&&(a=!0,this.space.c_arbiters_false.modified=!1);this.space.f_arbiters.modified&&(a=!0,this.space.f_arbiters.modified=!1);this.space.s_arbiters.modified&&(a=!0,this.space.s_arbiters.modified=!1);a&&(this.zip_length=!0,this._length=0,this.ite_3=this.ite_2=this.ite_1=this.ite_0=null)},at:function(a){this.zpp_vm();var b=null,c=0;if(null==b)if(a<c+this.lengths[0]){b=a-c;if(b<this.at_index_0||null==this.ite_0)for(this.at_index_0=
0,this.ite_0=this.space.c_arbiters_true.begin();!this.ite_0.elem().active;)this.ite_0=this.ite_0.next;for(;this.at_index_0!=b;)for(this.at_index_0++,this.ite_0=this.ite_0.next;!this.ite_0.elem().active;)this.ite_0=this.ite_0.next;b=this.ite_0.elem().wrapper()}else c+=this.lengths[0];if(null==b)if(a<c+this.lengths[1]){b=a-c;if(b<this.at_index_1||null==this.ite_1)for(this.at_index_1=0,this.ite_1=this.space.c_arbiters_false.begin();!this.ite_1.elem().active;)this.ite_1=this.ite_1.next;for(;this.at_index_1!=
b;)for(this.at_index_1++,this.ite_1=this.ite_1.next;!this.ite_1.elem().active;)this.ite_1=this.ite_1.next;b=this.ite_1.elem().wrapper()}else c+=this.lengths[1];if(null==b)if(a<c+this.lengths[2]){b=a-c;if(b<this.at_index_2||null==this.ite_2)for(this.at_index_2=0,this.ite_2=this.space.f_arbiters.begin();!this.ite_2.elem().active;)this.ite_2=this.ite_2.next;for(;this.at_index_2!=b;)for(this.at_index_2++,this.ite_2=this.ite_2.next;!this.ite_2.elem().active;)this.ite_2=this.ite_2.next;b=this.ite_2.elem().wrapper()}else c+=
this.lengths[2];if(null==b&&a<c+this.lengths[3]){a-=c;if(a<this.at_index_3||null==this.ite_3)for(this.at_index_3=0,this.ite_3=this.space.s_arbiters.begin();!this.ite_3.elem().active;)this.ite_3=this.ite_3.next;for(;this.at_index_3!=a;)for(this.at_index_3++,this.ite_3=this.ite_3.next;!this.ite_3.elem().active;)this.ite_3=this.ite_3.next;b=this.ite_3.elem().wrapper()}return b},__class__:ek});var Yb=function(){this.wrap_max=null;this.maxx=this.maxy=0;this.wrap_min=null;this.minx=this.miny=0;this.outer=
this.next=null;this._immutable=!1;this._invalidate=this._validate=null};k["zpp_nape.geom.ZPP_AABB"]=Yb;Yb.__name__=["zpp_nape","geom","ZPP_AABB"];Yb.get=function(a,b,c,d){if(null==Yb.zpp_pool)var e=new Yb;else e=Yb.zpp_pool,Yb.zpp_pool=e.next,e.next=null;e.alloc();e.minx=a;e.miny=b;e.maxx=c;e.maxy=d;return e};Yb.prototype={_invalidate:null,_validate:null,_immutable:null,validate:function(){null!=this._validate&&this._validate()},outer:null,next:null,alloc:function(){},free:function(){null!=this.outer&&
(this.outer=this.outer.zpp_inner=null);this._validate=this._invalidate=this.wrap_min=this.wrap_max=null},width:function(){return this.maxx-this.minx},height:function(){return this.maxy-this.miny},perimeter:function(){return 2*(this.width()+this.height())},minx:null,miny:null,wrap_min:null,maxx:null,maxy:null,wrap_max:null,intersectY:function(a){return!(a.miny>this.maxy||this.miny>a.maxy)},intersect:function(a){return a.miny<=this.maxy&&this.miny<=a.maxy&&a.minx<=this.maxx?this.minx<=a.maxx:!1},combine:function(a){a.minx<
this.minx&&(this.minx=a.minx);a.maxx>this.maxx&&(this.maxx=a.maxx);a.miny<this.miny&&(this.miny=a.miny);a.maxy>this.maxy&&(this.maxy=a.maxy)},contains:function(a){return a.minx>=this.minx&&a.miny>=this.miny&&a.maxx<=this.maxx?a.maxy<=this.maxy:!1},setCombine:function(a,b){this.minx=a.minx<b.minx?a.minx:b.minx;this.miny=a.miny<b.miny?a.miny:b.miny;this.maxx=a.maxx>b.maxx?a.maxx:b.maxx;this.maxy=a.maxy>b.maxy?a.maxy:b.maxy},setExpand:function(a,b){this.minx=a.minx-b;this.miny=a.miny-b;this.maxx=a.maxx+
b;this.maxy=a.maxy+b},toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+this.width()+" h: "+this.height()+" }"},__class__:Yb};var yg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Vec2"]=yg;yg.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"];yg.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==Lc.zpp_pool)var b=
new Lc;else b=Lc.zpp_pool,Lc.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){if(null==Lc.zpp_pool)var c=new Lc;else c=Lc.zpp_pool,Lc.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.begin();this.head=a.next;a.free();a.next=Lc.zpp_pool;Lc.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=
Lc.zpp_pool;Lc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},clear:function(){this.inlined_clear()},inlined_clear:function(){for(;!this.empty();)this.inlined_pop();this.pushmod=!0},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:yg};var W=function(){};k["zpp_nape.geom.ZPP_Collide"]=W;W.__name__=["zpp_nape","geom","ZPP_Collide"];W.contactCollide=
function(a,b,c,d){if(b.isPolygon())if(a.isPolygon()){for(var e=!0,f=-1E100,m=-1,h=null,g=null,k=a.polygon.edges.begin();null!=k;){for(var l=k.elem(),n=1E100,p=b.polygon.gverts.begin();null!=p;){var r=p.elem();r=l.gnormx*r.x+l.gnormy*r.y;r<n&&(n=r);if(n-l.gprojection<=f)break;p=p.next}n-=l.gprojection;if(0<=n){e=!1;break}n>f&&(f=n,h=l,m=1);k=k.next}if(e){for(k=b.polygon.edges.begin();null!=k;){l=k.elem();n=1E100;for(p=a.polygon.gverts.begin();null!=p;){r=p.elem();r=l.gnormx*r.x+l.gnormy*r.y;r<n&&(n=
r);if(n-l.gprojection<=f)break;p=p.next}n-=l.gprojection;if(0<=n){e=!1;break}n>f&&(f=n,g=l,m=2);k=k.next}if(e){1==m?(a=b.polygon,b=h,g=1):(a=a.polygon,b=g,g=-1);h=null;e=1E100;for(f=a.edges.begin();null!=f;)k=f.elem(),l=b.gnormx*k.gnormx+b.gnormy*k.gnormy,l<e&&(e=l,h=k),f=f.next;e=h.gp0.x;f=h.gp0.y;k=h.gp1.x;l=h.gp1.y;n=k-e;p=l-f;var t=b.gnormy*e-b.gnormx*f;r=b.gnormy*k-b.gnormx*l;var u=1/(r-t);t=(-b.tp1-t)*u;t>x.epsilon&&(e+=n*t,f+=p*t);r=(-b.tp0-r)*u;r<-x.epsilon&&(k+=n*r,l+=p*r);p=g;n=b.gnormx*
p;p*=b.gnormy;c.lnormx=b.lnormx;c.lnormy=b.lnormy;c.lproj=b.lprojection;c.radius=0;c.rev=d!=(-1==g);c.ptype=c.rev?1:0;r=e*b.gnormx+f*b.gnormy-b.gprojection;g=k*b.gnormx+l*b.gnormy-b.gprojection;if(0<r&&0<g)return!1;d&&(n=-n,p=-p);d=c.injectContact(e-b.gnormx*r*.5,f-b.gnormy*r*.5,n,p,r,c.rev?1:0,0<r);e-=1*a.body.posx;f-=1*a.body.posy;d.inner.lr1x=e*a.body.axisy+f*a.body.axisx;d.inner.lr1y=f*a.body.axisy-e*a.body.axisx;d=c.injectContact(k-b.gnormx*g*.5,l-b.gnormy*g*.5,n,p,g,c.rev?0:1,0<g);k-=1*a.body.posx;
l-=1*a.body.posy;d.inner.lr1x=k*a.body.axisy+l*a.body.axisx;d.inner.lr1y=l*a.body.axisy-k*a.body.axisx;1==m?(c.__ref_edge1=b,c.__ref_edge2=h):(c.__ref_edge2=b,c.__ref_edge1=h);return!0}}}else{h=-1E100;g=!0;e=m=null;f=b.polygon.gverts.begin();for(k=b.polygon.edges.begin();null!=k;){l=k.elem();n=l.gnormx*a.circle.worldCOMx+l.gnormy*a.circle.worldCOMy-l.gprojection-a.circle.radius;if(0<n){g=!1;break}n>h&&(h=n,m=l,e=f);f=f.next;k=k.next}if(g){g=e.elem();e=null==e.next?b.polygon.gverts.front():e.next.elem();
f=a.circle.worldCOMy*m.gnormx-a.circle.worldCOMx*m.gnormy;if(f<=g.y*m.gnormx-g.x*m.gnormy)return h=a.circle.radius,e=g.x-a.circle.worldCOMx,f=g.y-a.circle.worldCOMy,k=e*e+f*f,k>h*h?h=null:k<x.epsilon*x.epsilon?h=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-h,0):(k=Ga.invsqrt(k),l=k<x.epsilon?1E100:1/k,n=.5+(a.circle.radius-.5*h)*k,h=d?c.injectContact(a.circle.worldCOMx+e*n,a.circle.worldCOMy+f*n,-e*k,-f*k,l-h,0):c.injectContact(a.circle.worldCOMx+e*n,a.circle.worldCOMy+f*n,e*k,f*k,l-
h,0)),null!=h&&(e=h.inner,c.ptype=2,f=g.x-b.polygon.body.posx,g=g.y-b.polygon.body.posy,c.__ref_edge1=m,c.__ref_vertex=-1,d?(e.lr1x=f*b.polygon.body.axisy+g*b.polygon.body.axisx,e.lr1y=g*b.polygon.body.axisy-f*b.polygon.body.axisx,e.lr2x=a.circle.localCOMx,e.lr2y=a.circle.localCOMy):(e.lr2x=f*b.polygon.body.axisy+g*b.polygon.body.axisx,e.lr2y=g*b.polygon.body.axisy-f*b.polygon.body.axisx,e.lr1x=a.circle.localCOMx,e.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=h;if(f>=e.y*m.gnormx-e.x*
m.gnormy)return h=a.circle.radius,g=e.x-a.circle.worldCOMx,f=e.y-a.circle.worldCOMy,k=g*g+f*f,k>h*h?h=null:k<x.epsilon*x.epsilon?h=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-h,0):(k=Ga.invsqrt(k),l=k<x.epsilon?1E100:1/k,n=.5+(a.circle.radius-.5*h)*k,h=d?c.injectContact(a.circle.worldCOMx+g*n,a.circle.worldCOMy+f*n,-g*k,-f*k,l-h,0):c.injectContact(a.circle.worldCOMx+g*n,a.circle.worldCOMy+f*n,g*k,f*k,l-h,0)),null!=h&&(g=h.inner,c.ptype=2,f=e.x-b.polygon.body.posx,e=e.y-b.polygon.body.posy,
c.__ref_edge1=m,c.__ref_vertex=1,d?(g.lr1x=f*b.polygon.body.axisy+e*b.polygon.body.axisx,g.lr1y=e*b.polygon.body.axisy-f*b.polygon.body.axisx,g.lr2x=a.circle.localCOMx,g.lr2y=a.circle.localCOMy):(g.lr2x=f*b.polygon.body.axisy+e*b.polygon.body.axisx,g.lr2y=e*b.polygon.body.axisy-f*b.polygon.body.axisx,g.lr1x=a.circle.localCOMx,g.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=h;g=a.circle.radius+.5*h;b=m.gnormx*g;g*=m.gnormy;b=a.circle.worldCOMx-b;g=a.circle.worldCOMy-g;b=d?c.injectContact(b,
g,m.gnormx,m.gnormy,h,0):c.injectContact(b,g,-m.gnormx,-m.gnormy,h,0);c.ptype=d?0:1;c.lnormx=m.lnormx;c.lnormy=m.lnormy;c.rev=!d;c.lproj=m.lprojection;c.radius=a.circle.radius;b.inner.lr1x=a.circle.localCOMx;b.inner.lr1y=a.circle.localCOMy;c.__ref_edge1=m;c.__ref_vertex=0;return!0}}else if(m=a.circle.radius+b.circle.radius,h=b.circle.worldCOMx-a.circle.worldCOMx,g=b.circle.worldCOMy-a.circle.worldCOMy,e=h*h+g*g,e>m*m?m=null:e<x.epsilon*x.epsilon?m=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,
1,0,-m,0):(e=Ga.invsqrt(e),f=e<x.epsilon?1E100:1/e,k=.5+(a.circle.radius-.5*m)*e,m=d?c.injectContact(a.circle.worldCOMx+h*k,a.circle.worldCOMy+g*k,-h*e,-g*e,f-m,0):c.injectContact(a.circle.worldCOMx+h*k,a.circle.worldCOMy+g*k,h*e,g*e,f-m,0)),null!=m)return m=m.inner,d?(m.lr1x=b.circle.localCOMx,m.lr1y=b.circle.localCOMy,m.lr2x=a.circle.localCOMx,m.lr2y=a.circle.localCOMy):(m.lr1x=a.circle.localCOMx,m.lr1y=a.circle.localCOMy,m.lr2x=b.circle.localCOMx,m.lr2y=b.circle.localCOMy),c.radius=a.circle.radius+
b.circle.radius,c.ptype=2,!0;return!1};W.testCollide_safe=function(a,b){if(b.isCircle()){var c=a;a=b;b=c}return W.testCollide(a,b)};W.testCollide=function(a,b){if(b.isPolygon()){if(a.isPolygon()){for(var c=!0,d=a.polygon.edges.begin();null!=d;){for(var e=d.elem(),f=1E100,m=b.polygon.gverts.begin();null!=m;){var h=m.elem();h=e.gnormx*h.x+e.gnormy*h.y;h<f&&(f=h);m=m.next}f-=e.gprojection;if(0<f){c=!1;break}d=d.next}if(c){for(b=b.polygon.edges.begin();null!=b;){d=b.elem();e=1E100;for(f=a.polygon.gverts.begin();null!=
f;)m=f.elem(),m=d.gnormx*m.x+d.gnormy*m.y,m<e&&(e=m),f=f.next;e-=d.gprojection;if(0<e){c=!1;break}b=b.next}return c}}else{d=c=null;e=!0;f=-1E100;m=b.polygon.gverts.begin();for(h=b.polygon.edges.begin();null!=h;){var g=h.elem(),k=g.gnormx*a.circle.worldCOMx+g.gnormy*a.circle.worldCOMy-g.gprojection-a.circle.radius;if(0<k){e=!1;break}k>f&&(f=k,c=g,d=m);m=m.next;h=h.next}if(e)return e=d.elem(),b=null==d.next?b.polygon.gverts.front():d.next.elem(),d=a.circle.worldCOMy*c.gnormx-a.circle.worldCOMx*c.gnormy,
d<=e.y*c.gnormx-e.x*c.gnormy?(b=a.circle.radius,c=e.x-a.circle.worldCOMx,a=e.y-a.circle.worldCOMy,c*c+a*a<=b*b):d>=b.y*c.gnormx-b.x*c.gnormy?(c=a.circle.radius,d=b.x-a.circle.worldCOMx,a=b.y-a.circle.worldCOMy,d*d+a*a<=c*c):!0}return!1}c=a.circle.radius+b.circle.radius;d=b.circle.worldCOMx-a.circle.worldCOMx;a=b.circle.worldCOMy-a.circle.worldCOMy;return d*d+a*a<=c*c};W.flowCollide=function(a,b,c){if(b.isPolygon()){if(a.isPolygon()){for(var d=[],e=[],f=!0,m=!0,h=a.polygon.edges.begin();null!=h;){for(var g=
h.elem(),k=1E100,l=0,n=b.polygon.gverts.begin();null!=n;){var p=n.elem(),r=g.gnormx*p.x+g.gnormy*p.y;r<k&&(k=r);r>=g.gprojection+x.epsilon&&(e[l]=!0,m=!1);++l;n=n.next}k-=g.gprojection;if(0<k){f=!1;break}h=h.next}if(m)return b.polygon.validate_worldCOM(),c.inject(b.polygon.area,b.polygon.worldCOMx,b.polygon.worldCOMy),!0;if(f){m=!0;for(var t=b.polygon.edges.begin();null!=t;){for(var u=t.elem(),v=1E100,w=0,A=a.polygon.gverts.begin();null!=A;){var B=A.elem(),C=u.gnormx*B.x+u.gnormy*B.y;C<v&&(v=C);C>=
u.gprojection+x.epsilon&&(d[w]=!0,m=!1);++w;A=A.next}v-=u.gprojection;if(0<v){f=!1;break}t=t.next}if(m)return a.polygon.validate_worldCOM(),c.inject(a.polygon.area,a.polygon.worldCOMx,a.polygon.worldCOMy),!0;if(f){for(;!W.flowpoly.empty();){var D=W.flowpoly.pop_unsafe();if(!D._inuse){var E=D;E.free();E.next=Ra.zpp_pool;Ra.zpp_pool=E}}for(var J=null,G=!1,F=a.polygon.gverts.begin(),H=0,I=b.polygon.gverts.begin(),K=0,L=0,M=b.polygon.edgeCnt;L<M;){var N=L++;if(e[N])I=I.next;else{K=N;break}}if(null==I){I=
b.polygon.gverts.begin();G=!0;for(var P=0,Q=a.polygon.edgeCnt;P<Q;){var U=P++;if(d[U])F=F.next;else{H=U;break}}null==F?F=a.polygon.gverts.begin():(W.flowpoly.add(F.elem()),J=W.flowpoly.front())}else W.flowpoly.add(I.elem()),J=W.flowpoly.front();var R=1;if(W.flowpoly.empty()){for(var V=!0,T=a.polygon.gverts.begin(),O=T.elem(),X=T.next;null!=X;){for(var Y=X.elem(),aa=2,da=b.polygon.gverts.begin(),S=da.elem(),ca=da.next;null!=ca;){var ea=ca.elem(),fa=0,ha=0,ba=0;ha=O.x-S.x;ba=O.y-S.y;var ja=0,pa=0;ja=
Y.x-O.x;pa=Y.y-O.y;var ka=0,ma=0;ka=ea.x-S.x;ma=ea.y-S.y;var oa=pa*ka-ja*ma;if(oa*oa>x.epsilon*x.epsilon){oa=1/oa;var qa=(ma*ha-ka*ba)*oa;if(qa>x.epsilon&&qa<1-x.epsilon){var sa=(pa*ha-ja*ba)*oa;if(sa>x.epsilon&&sa<1-x.epsilon){fa=qa;var ia=!0}else ia=!1}else ia=!1}else ia=!1;ia&&fa<aa&&(aa=fa,I=da);da=ca;S=ea;ca=ca.next}for(;;){ca=b.polygon.gverts.begin();var ta=ca.elem(),zb=0,Aa=0,Z=0;Aa=O.x-S.x;Z=O.y-S.y;var Ba=0,xa=0;Ba=Y.x-O.x;xa=Y.y-O.y;var Fa=0,ua=0;Fa=ta.x-S.x;ua=ta.y-S.y;var ra=xa*Fa-Ba*
ua;if(ra*ra>x.epsilon*x.epsilon){ra=1/ra;var wa=(ua*Aa-Fa*Z)*ra;if(wa>x.epsilon&&wa<1-x.epsilon){var za=(xa*Aa-Ba*Z)*ra;if(za>x.epsilon&&za<1-x.epsilon){zb=wa;var va=!0}else va=!1}else va=!1}else va=!1;va&&zb<aa&&(aa=zb,I=da);break}if(2!=aa){var Da=0,Ma=0,Ha=aa;Da=O.x+(Y.x-O.x)*Ha;Ma=O.y+(Y.y-O.y)*Ha;J=Ra.get(Da,Ma);W.flowpoly.add(J);G=!0;F=T;V=!1;break}T=X;O=Y;X=X.next}if(V)for(;;){X=a.polygon.gverts.begin();for(var la=X.elem(),na=2,ya=b.polygon.gverts.begin(),Ca=ya.elem(),Ea=ya.next;null!=Ea;){var La=
Ea.elem(),Ia=0,Ja=0,Ka=0;Ja=O.x-Ca.x;Ka=O.y-Ca.y;var Na=0,Oa=0;Na=la.x-O.x;Oa=la.y-O.y;var Qa=0,Sa=0;Qa=La.x-Ca.x;Sa=La.y-Ca.y;var Pa=Oa*Qa-Na*Sa;if(Pa*Pa>x.epsilon*x.epsilon){Pa=1/Pa;var Ua=(Sa*Ja-Qa*Ka)*Pa;if(Ua>x.epsilon&&Ua<1-x.epsilon){var Va=(Oa*Ja-Na*Ka)*Pa;if(Va>x.epsilon&&Va<1-x.epsilon){Ia=Ua;var Ta=!0}else Ta=!1}else Ta=!1}else Ta=!1;Ta&&Ia<na&&(na=Ia,I=ya);ya=Ea;Ca=La;Ea=Ea.next}for(;;){Ea=b.polygon.gverts.begin();var Za=Ea.elem(),Ya=0,ab=0,db=0;ab=O.x-Ca.x;db=O.y-Ca.y;var hb=0,cb=0;hb=
la.x-O.x;cb=la.y-O.y;var kb=0,jb=0;kb=Za.x-Ca.x;jb=Za.y-Ca.y;var $a=cb*kb-hb*jb;if($a*$a>x.epsilon*x.epsilon){$a=1/$a;var bb=(jb*ab-kb*db)*$a;if(bb>x.epsilon&&bb<1-x.epsilon){var fb=(cb*ab-hb*db)*$a;if(fb>x.epsilon&&fb<1-x.epsilon){Ya=bb;var lb=!0}else lb=!1}else lb=!1}else lb=!1;lb&&Ya<na&&(na=Ya,I=ya);break}if(2!=na){var ob=0,pb=0,rb=na;ob=O.x+(la.x-O.x)*rb;pb=O.y+(la.y-O.y)*rb;J=Ra.get(ob,pb);W.flowpoly.add(J);G=!0;F=T;break}break}R=2}for(;;)if(G)if(F=F.next,++H,null==F&&(F=a.polygon.gverts.begin(),
H=0),d[H]){var eb=W.flowpoly.front(),gb=F.elem(),Xa=I.elem(),nb=I.next;null==nb&&(nb=b.polygon.gverts.begin());for(var mb=-1,ib=null,ub=0,vb=0,tb=nb,Wa=nb;;){var wb=Wa.elem(),yb=0,Bb=0,Cb=0;Bb=Xa.x-eb.x;Cb=Xa.y-eb.y;var Db=0,Eb=0;Db=wb.x-Xa.x;Eb=wb.y-Xa.y;var Fb=0,Hb=0;Fb=gb.x-eb.x;Hb=gb.y-eb.y;var xb=Eb*Fb-Db*Hb;if(xb*xb>x.epsilon*x.epsilon){xb=1/xb;var Kb=(Hb*Bb-Fb*Cb)*xb;if(Kb>x.epsilon&&Kb<1-x.epsilon){var Pb=(Eb*Bb-Db*Cb)*xb;if(Pb>x.epsilon&&Pb<1-x.epsilon){yb=Kb;var Jb=!0}else Jb=!1}else Jb=
!1}else Jb=!1;if(Jb&&yb>=mb)if(ib=I,ub=K,++vb==R){mb=yb;Wa=tb;break}else mb=yb;Xa=wb;I=Wa;++K;K>=b.polygon.edgeCnt&&(K=0);Wa=Wa.next;null==Wa&&(Wa=b.polygon.gverts.begin());break}for(;Wa!=tb;){var Mb=Wa.elem(),Lb=0,Nb=0,Ob=0;Nb=Xa.x-eb.x;Ob=Xa.y-eb.y;var Tb=0,Ub=0;Tb=Mb.x-Xa.x;Ub=Mb.y-Xa.y;var Vb=0,Wb=0;Vb=gb.x-eb.x;Wb=gb.y-eb.y;var Gb=Ub*Vb-Tb*Wb;if(Gb*Gb>x.epsilon*x.epsilon){Gb=1/Gb;var Xb=(Wb*Nb-Vb*Ob)*Gb;if(Xb>x.epsilon&&Xb<1-x.epsilon){var $b=(Ub*Nb-Tb*Ob)*Gb;if($b>x.epsilon&&$b<1-x.epsilon){Lb=
Xb;var Qb=!0}else Qb=!1}else Qb=!1}else Qb=!1;if(Qb&&Lb>=mb)if(ib=I,ub=K,++vb==R){mb=Lb;Wa=tb;break}else mb=Lb;Xa=Mb;I=Wa;++K;K>=b.polygon.edgeCnt&&(K=0);Wa=Wa.next;null==Wa&&(Wa=b.polygon.gverts.begin())}if(null==ib)break;var Rb=ib.elem(),Yb=ib.next;null==Yb&&(Yb=b.polygon.gverts.begin());var fc=Yb.elem(),ac=0,bc=0,ic=mb;ac=Rb.x+(fc.x-Rb.x)*ic;bc=Rb.y+(fc.y-Rb.y)*ic;if(null!=J&&mc.vec_dsq(ac,bc,J.x,J.y)<x.epsilon)break;W.flowpoly.add(Ra.get(ac,bc));null==J&&(J=W.flowpoly.front());I=ib;K=ub;G=!G;
R=2}else{var dc=F.elem();if(null!=J&&mc.vec_dsq(dc.x,dc.y,J.x,J.y)<x.epsilon)break;W.flowpoly.add(dc);null==J&&(J=W.flowpoly.front());R=1}else if(I=I.next,++K,null==I&&(I=b.polygon.gverts.begin(),K=0),e[K]){var Ib=W.flowpoly.front(),cc=I.elem(),Ab=F.elem(),ec=F.next;null==ec&&(ec=a.polygon.gverts.begin());for(var Sb=-1,Zb=null,oc=0,Fc=0,sc=ec,sb=ec;;){var uc=sb.elem(),nc=0,yc=0,zc=0;yc=Ab.x-Ib.x;zc=Ab.y-Ib.y;var Bc=0,Cc=0;Bc=uc.x-Ab.x;Cc=uc.y-Ab.y;var Dc=0,Hc=0;Dc=cc.x-Ib.x;Hc=cc.y-Ib.y;var hc=Cc*
Dc-Bc*Hc;if(hc*hc>x.epsilon*x.epsilon){hc=1/hc;var Ic=(Hc*yc-Dc*zc)*hc;if(Ic>x.epsilon&&Ic<1-x.epsilon){var Wc=(Cc*yc-Bc*zc)*hc;if(Wc>x.epsilon&&Wc<1-x.epsilon){nc=Ic;var vc=!0}else vc=!1}else vc=!1}else vc=!1;if(vc&&nc>=Sb)if(Zb=F,oc=H,++Fc==R){Sb=nc;sb=sc;break}else Sb=nc;Ab=uc;F=sb;++H;H>=a.polygon.edgeCnt&&(H=0);sb=sb.next;null==sb&&(sb=a.polygon.gverts.begin());break}for(;sb!=sc;){var Kc=sb.elem(),wc=0,Mc=0,Nc=0;Mc=Ab.x-Ib.x;Nc=Ab.y-Ib.y;var Oc=0,Pc=0;Oc=Kc.x-Ab.x;Pc=Kc.y-Ab.y;var Rc=0,Sc=0;
Rc=cc.x-Ib.x;Sc=cc.y-Ib.y;var kc=Pc*Rc-Oc*Sc;if(kc*kc>x.epsilon*x.epsilon){kc=1/kc;var Vc=(Sc*Mc-Rc*Nc)*kc;if(Vc>x.epsilon&&Vc<1-x.epsilon){var dd=(Pc*Mc-Oc*Nc)*kc;if(dd>x.epsilon&&dd<1-x.epsilon){wc=Vc;var Jc=!0}else Jc=!1}else Jc=!1}else Jc=!1;if(Jc&&wc>=Sb)if(Zb=F,oc=H,++Fc==R){Sb=wc;sb=sc;break}else Sb=wc;Ab=Kc;F=sb;++H;H>=a.polygon.edgeCnt&&(H=0);sb=sb.next;null==sb&&(sb=a.polygon.gverts.begin())}if(null==Zb)break;var Lc=Zb.elem(),Xc=Zb.next;null==Xc&&(Xc=a.polygon.gverts.begin());var ed=Xc.elem(),
Yc=0,Zc=0,gd=Sb;Yc=Lc.x+(ed.x-Lc.x)*gd;Zc=Lc.y+(ed.y-Lc.y)*gd;if(null!=J&&mc.vec_dsq(Yc,Zc,J.x,J.y)<x.epsilon)break;W.flowpoly.add(Ra.get(Yc,Zc));null==J&&(J=W.flowpoly.front());F=Zb;H=oc;G=!G;R=2}else{var $c=I.elem();if(null!=J&&mc.vec_dsq($c.x,$c.y,J.x,J.y)<x.epsilon)break;W.flowpoly.add($c);null==J&&(J=W.flowpoly.front());R=1}if(null!=W.flowpoly.begin()&&null!=W.flowpoly.begin().next&&null!=W.flowpoly.begin().next.next){var lc=0,pc=0,qc=0;lc=qc=pc=0;var md=W.flowpoly.begin(),Ec=md.elem();md=md.next;
var Uc=md.elem();for(md=md.next;null!=md;){var tc=md.elem();lc+=Uc.x*(tc.y-Ec.y);var od=tc.y*Uc.x-tc.x*Uc.y;pc+=(Uc.x+tc.x)*od;qc+=(Uc.y+tc.y)*od;Ec=Uc;Uc=tc;md=md.next}md=W.flowpoly.begin();var Ac=md.elem();lc+=Uc.x*(Ac.y-Ec.y);var pd=Ac.y*Uc.x-Ac.x*Uc.y;pc+=(Uc.x+Ac.x)*pd;qc+=(Uc.y+Ac.y)*pd;Ec=Uc;Uc=Ac;md=md.next;var Tc=md.elem();lc+=Uc.x*(Tc.y-Ec.y);var rd=Tc.y*Uc.x-Tc.x*Uc.y;pc+=(Uc.x+Tc.x)*rd;qc+=(Uc.y+Tc.y)*rd;lc*=.5;var sd=1/(6*lc);pc*=sd;qc*=sd;c.inject(-lc,pc,qc);return!0}}}return!1}for(var jd=
[],vd=!0,rc=null,bd=null,xd=-1E100,yd=!0,ld=b.polygon.gverts.begin(),Ed=0,fd=b.polygon.edges.begin();null!=fd;){var Qc=fd.elem(),ad=Qc.gnormx*a.circle.worldCOMx+Qc.gnormy*a.circle.worldCOMy;if(ad>Qc.gprojection+a.circle.radius){yd=!1;break}else ad+a.circle.radius>Qc.gprojection+x.epsilon&&(vd=!1,jd[Ed]=!0);ad-=Qc.gprojection+a.circle.radius;ad>xd&&(xd=ad,rc=Qc,bd=ld);ld=ld.next;++Ed;fd=fd.next}if(yd){if(vd)return c.inject(a.circle.area,a.circle.worldCOMx,a.circle.worldCOMy),!0;var hd=bd.elem(),id=
null==bd.next?b.polygon.gverts.front():bd.next.elem(),Gd=a.circle.worldCOMy*rc.gnormx-a.circle.worldCOMx*rc.gnormy;if(Gd<=hd.y*rc.gnormx-hd.x*rc.gnormy){var Id=a.circle.radius,td=0,ud=0;td=hd.x-a.circle.worldCOMx;ud=hd.y-a.circle.worldCOMy;var wd=td*td+ud*ud<=Id*Id}else if(Gd>=id.y*rc.gnormx-id.x*rc.gnormy){var Jd=a.circle.radius,zd=0,Dd=0;zd=id.x-a.circle.worldCOMx;Dd=id.y-a.circle.worldCOMy;wd=zd*zd+Dd*Dd<=Jd*Jd}else wd=!0;if(wd){for(var qd=[],Hd=0,Pd=!0,Kd=null,gc=0,kd=b.polygon.gverts.begin();null!=
kd;){var Ee=kd.elem(),cf=mc.vec_dsq(Ee.x,Ee.y,a.circle.worldCOMx,a.circle.worldCOMy);(qd[Hd]=cf<=a.circle.radius*a.circle.radius)?(gc=Hd,Kd=kd):Pd=!1;++Hd;kd=kd.next}if(Pd)return b.polygon.validate_worldCOM(),c.inject(b.polygon.area,b.polygon.worldCOMx,b.polygon.worldCOMy),!0;for(;!W.flowpoly.empty();){var Ge=W.flowpoly.pop_unsafe();if(!Ge._inuse){var me=Ge;me.free();me.next=Ra.zpp_pool;Ra.zpp_pool=me}}W.flowsegs.clear();var Gc=null,Sd=1;if(null==Kd)Kd=b.polygon.gverts.begin(),Sd=2;else{var ef=W.flowpoly;
Gc=Kd.elem();ef.add(Gc)}for(;0!=Sd;)if(1==Sd)if(Kd=Kd.next,null==Kd&&(Kd=b.polygon.gverts.begin()),++gc,gc>=b.polygon.edgeCnt&&(gc=0),qd[gc]){if(mc.vec_dsq(Gc.x,Gc.y,Kd.elem().x,Kd.elem().y)<x.epsilon)break;W.flowpoly.add(Kd.elem())}else{var cd=W.flowpoly.front(),Vd=Kd.elem(),Wd=0,Xd=0;Wd=Vd.x-cd.x;Xd=Vd.y-cd.y;var Yd=0,Zd=0;Yd=cd.x-a.circle.worldCOMx;Zd=cd.y-a.circle.worldCOMy;var Ld=Wd*Wd+Xd*Xd,$d=2*(Yd*Wd+Zd*Xd),Oe=Math.sqrt($d*$d-4*Ld*(Yd*Yd+Zd*Zd-a.circle.radius*a.circle.radius));Ld=1/(2*Ld);
var Pe=(-$d-Oe)*Ld,ue=0,ve=0,Qe=Pe<x.epsilon?(-$d+Oe)*Ld:Pe;ue=cd.x+(Vd.x-cd.x)*Qe;ve=cd.y+(Vd.y-cd.y)*Qe;if(mc.vec_dsq(Gc.x,Gc.y,ue,ve)<x.epsilon)break;W.flowpoly.add(Ra.get(ue,ve));Sd=2}else if(2==Sd){var be=Kd.next;null==be&&(be=b.polygon.gverts.begin());var qb=Kd.elem();Sd=0;for(var nd=be,Ad=be;;){var xc=Ad.elem(),ce=gc+1;ce==b.polygon.edgeCnt&&(ce=0);if(jd[gc])if(qd[ce]){var de=0,fe=0;de=xc.x-qb.x;fe=xc.y-qb.y;var he=0,ie=0;he=qb.x-a.circle.worldCOMx;ie=qb.y-a.circle.worldCOMy;var Od=de*de+fe*
fe,je=2*(he*de+ie*fe),Te=Math.sqrt(je*je-4*Od*(he*he+ie*ie-a.circle.radius*a.circle.radius));Od=1/(2*Od);var Ve=(-je-Te)*Od,ze=0,Be=0,af=Ve<x.epsilon?(-je+Te)*Od:Ve;ze=qb.x+(xc.x-qb.x)*af;Be=qb.y+(xc.y-qb.y)*af;if(mc.vec_dsq(Gc.x,Gc.y,ze,Be)<x.epsilon){Sd=0;Ad=nd;break}var bf=Ra.get(ze,Be);W.flowsegs.add(W.flowpoly.front());W.flowsegs.add(bf);W.flowpoly.add(bf);Sd=1;Ad=nd;break}else{var Qd=0,le=0,ne=0,oe=0;ne=xc.x-qb.x;oe=xc.y-qb.y;var re=0,te=0;re=qb.x-a.circle.worldCOMx;te=qb.y-a.circle.worldCOMy;
var Md=ne*ne+oe*oe,ee=2*(re*ne+te*oe),Fd=ee*ee-4*Md*(re*re+te*te-a.circle.radius*a.circle.radius);if(Fd*Fd<x.epsilon){Qd=0>Fd?10:le=-ee/(2*Md);var kf=!1}else Fd=Math.sqrt(Fd),Md=1/(2*Md),Qd=(-ee-Fd)*Md,le=(-ee+Fd)*Md,kf=!0;if(Qd<1-x.epsilon&&le>x.epsilon){var Re=0,$e=0,of=Qd;Re=qb.x+(xc.x-qb.x)*of;$e=qb.y+(xc.y-qb.y)*of;if(null!=Gc&&mc.vec_dsq(Gc.x,Gc.y,Re,$e)<x.epsilon){Sd=0;Ad=nd;break}var pf=Ra.get(Re,$e);W.flowpoly.empty()||(W.flowsegs.add(W.flowpoly.front()),W.flowsegs.add(pf));W.flowpoly.add(pf);
null==Gc&&(Gc=W.flowpoly.front());if(kf){var qf=0,sf=0,tf=le;qf=qb.x+(xc.x-qb.x)*tf;sf=qb.y+(xc.y-qb.y)*tf;W.flowpoly.add(Ra.get(qf,sf))}}}qb=xc;Kd=Ad;gc=ce;Ad=Ad.next;null==Ad&&(Ad=b.polygon.gverts.begin());break}for(;Ad!=nd;){var hg=Ad.elem(),He=gc+1;He==b.polygon.edgeCnt&&(He=0);if(jd[gc])if(qd[He]){var Ie=0,Je=0;Ie=hg.x-qb.x;Je=hg.y-qb.y;var Ke=0,Le=0;Ke=qb.x-a.circle.worldCOMx;Le=qb.y-a.circle.worldCOMy;var se=Ie*Ie+Je*Je,Ne=2*(Ke*Ie+Le*Je),Af=Math.sqrt(Ne*Ne-4*se*(Ke*Ke+Le*Le-a.circle.radius*
a.circle.radius));se=1/(2*se);var Bf=(-Ne-Af)*se,ff=0,hf=0,Cf=Bf<x.epsilon?(-Ne+Af)*se:Bf;ff=qb.x+(hg.x-qb.x)*Cf;hf=qb.y+(hg.y-qb.y)*Cf;if(mc.vec_dsq(Gc.x,Gc.y,ff,hf)<x.epsilon){Sd=0;Ad=nd;break}var Df=Ra.get(ff,hf);W.flowsegs.add(W.flowpoly.front());W.flowsegs.add(Df);W.flowpoly.add(Df);Sd=1;Ad=nd;break}else{var xe=0,Se=0,Ue=0,We=0;Ue=hg.x-qb.x;We=hg.y-qb.y;var Xe=0,Ze=0;Xe=qb.x-a.circle.worldCOMx;Ze=qb.y-a.circle.worldCOMy;var ke=Ue*Ue+We*We,De=2*(Xe*Ue+Ze*We),Rd=De*De-4*ke*(Xe*Xe+Ze*Ze-a.circle.radius*
a.circle.radius);if(Rd*Rd<x.epsilon){xe=0>Rd?10:Se=-De/(2*ke);var Kf=!1}else Rd=Math.sqrt(Rd),ke=1/(2*ke),xe=(-De-Rd)*ke,Se=(-De+Rd)*ke,Kf=!0;if(xe<1-x.epsilon&&Se>x.epsilon){var uf=0,vf=0,Mf=xe;uf=qb.x+(hg.x-qb.x)*Mf;vf=qb.y+(hg.y-qb.y)*Mf;if(null!=Gc&&mc.vec_dsq(Gc.x,Gc.y,uf,vf)<x.epsilon){Sd=0;Ad=nd;break}var Of=Ra.get(uf,vf);W.flowpoly.empty()||(W.flowsegs.add(W.flowpoly.front()),W.flowsegs.add(Of));W.flowpoly.add(Of);null==Gc&&(Gc=W.flowpoly.front());if(Kf){var Pf=0,Qf=0,Rf=Se;Pf=qb.x+(hg.x-
qb.x)*Rf;Qf=qb.y+(hg.y-qb.y)*Rf;W.flowpoly.add(Ra.get(Pf,Qf))}}}qb=hg;Kd=Ad;gc=He;Ad=Ad.next;null==Ad&&(Ad=b.polygon.gverts.begin())}}if(null==W.flowpoly.begin())return!1;if(null==W.flowpoly.begin().next){for(var Sf=!0,jf=b.polygon.edges.begin();null!=jf;){var Ff=jf.elem();if(Ff.gnormx*a.circle.worldCOMx+Ff.gnormy*a.circle.worldCOMy>Ff.gprojection){Sf=!1;break}jf=jf.next}return Sf?(c.inject(a.circle.area,a.circle.worldCOMx,a.circle.worldCOMy),!0):!1}var lf=0,mf=0,nf=0;if(null!=W.flowpoly.begin().next.next){var Nd=
0,ye=0,Ae=0;Nd=Ae=ye=0;var Me=W.flowpoly.begin(),Ye=Me.elem();Me=Me.next;var Bd=Me.elem();for(Me=Me.next;null!=Me;){var Ce=Me.elem();Nd+=Bd.x*(Ce.y-Ye.y);var Zf=Ce.y*Bd.x-Ce.x*Bd.y;ye+=(Bd.x+Ce.x)*Zf;Ae+=(Bd.y+Ce.y)*Zf;Ye=Bd;Bd=Ce;Me=Me.next}Me=W.flowpoly.begin();var Fe=Me.elem();Nd+=Bd.x*(Fe.y-Ye.y);var $f=Fe.y*Bd.x-Fe.x*Bd.y;ye+=(Bd.x+Fe.x)*$f;Ae+=(Bd.y+Fe.y)*$f;Ye=Bd;Bd=Fe;Me=Me.next;var df=Me.elem();Nd+=Bd.x*(df.y-Ye.y);var ag=df.y*Bd.x-df.x*Bd.y;ye+=(Bd.x+df.x)*ag;Ae+=(Bd.y+df.y)*ag;Nd*=.5;var bg=
1/(6*Nd);ye*=bg;Ae*=bg;var cg=-Nd;lf+=ye*cg;mf+=Ae*cg;nf-=Nd}else W.flowsegs.add(W.flowpoly.front()),W.flowsegs.add(W.flowpoly.begin().next.elem());for(;!W.flowsegs.empty();){var xf=W.flowsegs.pop_unsafe(),yf=W.flowsegs.pop_unsafe(),dg=0,eg=0;dg=yf.x-xf.x;eg=yf.y-xf.y;var Td=0,Ud=0;Td=dg;Ud=eg;var fg=Ga.invsqrt(Td*Td+Ud*Ud);Td*=fg;Ud*=fg;var vg=Td;Td=-Ud;Ud=vg;var pe=0,qe=0;pe=xf.x+yf.x;qe=xf.y+yf.y;pe*=.5;qe*=.5;pe-=1*a.circle.worldCOMx;qe-=1*a.circle.worldCOMy;var Nf=0,gg=0,ig=Td*pe+Ud*qe,zf=ig/
a.circle.radius,gf=Math.sqrt(1-zf*zf),jg=Math.acos(zf);Nf=a.circle.radius*(a.circle.radius*jg-ig*gf);gg=.6666666666666666*a.circle.radius*gf*gf*gf/(jg-zf*gf);pe=a.circle.worldCOMx;qe=a.circle.worldCOMy;var kg=gg;pe+=Td*kg;qe+=Ud*kg;var lg=Nf;lf+=pe*lg;mf+=qe*lg;nf+=Nf}var mg=1/nf;lf*=mg;mf*=mg;c.inject(nf,lf,mf);return!0}}return!1}var Cd=a.circle,ae=b.circle,Ef=0,Gf=0;Ef=ae.worldCOMx-Cd.worldCOMx;Gf=ae.worldCOMy-Cd.worldCOMy;var ng=Cd.radius+ae.radius,Vf=Ef*Ef+Gf*Gf;if(Vf>ng*ng)return!1;if(Vf<x.epsilon*
x.epsilon)Cd.radius<ae.radius?c.inject(Cd.area,Cd.worldCOMx,Cd.worldCOMy):c.inject(ae.area,ae.worldCOMx,ae.worldCOMy);else{var Hf=Math.sqrt(Vf),og=1/Hf,If=.5*(Hf-(ae.radius*ae.radius-Cd.radius*Cd.radius)*og);if(If<=-Cd.radius)c.inject(Cd.area,Cd.worldCOMx,Cd.worldCOMy);else{var Wf=Hf-If;if(Wf<=-ae.radius)c.inject(ae.area,ae.worldCOMx,ae.worldCOMy);else{var Xf=0,pg=0,Yf=0,qg=0,Jf=If/Cd.radius,rf=Math.sqrt(1-Jf*Jf),rg=Math.acos(Jf);Xf=Cd.radius*(Cd.radius*rg-If*rf);pg=.6666666666666666*Cd.radius*rf*
rf*rf/(rg-Jf*rf);var Lf=Wf/ae.radius,wf=Math.sqrt(1-Lf*Lf),sg=Math.acos(Lf);Yf=ae.radius*(ae.radius*sg-Wf*wf);qg=.6666666666666666*ae.radius*wf*wf*wf/(sg-Lf*wf);var tg=Xf+Yf,ug=(pg*Xf+(Hf-qg)*Yf)/tg*og;c.inject(tg,Cd.worldCOMx+Ef*ug,Cd.worldCOMy+Gf*ug)}}}return!0};var kl=function(){this.toiDistance=0;this.inner=!1;this.shape=null};k["zpp_nape.geom.ZPP_ConvexRayResult"]=kl;kl.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"];kl.prototype={shape:null,inner:null,toiDistance:null,__class__:kl};var pc=
function(){this.forced=!1;this.prev=this.next=null;this.x=this.y=0};k["zpp_nape.geom.ZPP_GeomVert"]=pc;pc.__name__=["zpp_nape","geom","ZPP_GeomVert"];pc.get=function(a,b){if(null==pc.zpp_pool)var c=new pc;else c=pc.zpp_pool,pc.zpp_pool=c.next,c.next=null;c.alloc();c.x=a;c.y=b;return c};pc.prototype={x:null,y:null,prev:null,next:null,forced:null,alloc:function(){this.forced=!1},__class__:pc};var uj=function(a){this.outer=this.vertices=null;this.outer=a};k["zpp_nape.geom.ZPP_GeomPoly"]=uj;uj.__name__=
["zpp_nape","geom","ZPP_GeomPoly"];uj.prototype={outer:null,vertices:null,__class__:uj};var of=function(){this._invalidate=this.next=null;this.a=this.b=this.c=this.d=this.tx=this.ty=0;this.outer=null};k["zpp_nape.geom.ZPP_Mat23"]=of;of.__name__=["zpp_nape","geom","ZPP_Mat23"];of.get=function(){if(null==of.zpp_pool)var a=new of;else a=of.zpp_pool,of.zpp_pool=a.next,a.next=null;a.alloc();return a};of.prototype={outer:null,a:null,b:null,c:null,d:null,tx:null,ty:null,_invalidate:null,invalidate:function(){null!=
this._invalidate&&this._invalidate()},next:null,alloc:function(){},__class__:of};var vj=function(a,b){this.x=null;this.n=0;this.outer=null;this.m=a;this.n=b;this.x=[];var c=0;for(a*=b;c<a;)c++,this.x.push(0)};k["zpp_nape.geom.ZPP_MatMN"]=vj;vj.__name__=["zpp_nape","geom","ZPP_MatMN"];vj.prototype={outer:null,m:null,n:null,x:null,__class__:vj};var Tb=function(){this.slipped=this.failed=this.kinematic=!1;this.c1=this.c2=this.axis=null;this.frozen1=this.frozen2=!1;this.s1=this.s2=this.arbiter=null;this.toi=
0;this.next=null;this.c1=new Ra;this.c2=new Ra;this.axis=new Ra};k["zpp_nape.geom.ZPP_ToiEvent"]=Tb;Tb.__name__=["zpp_nape","geom","ZPP_ToiEvent"];Tb.prototype={next:null,alloc:function(){this.failed=!1;this.arbiter=this.s1=this.s2=null},free:function(){},toi:null,s1:null,s2:null,arbiter:null,frozen1:null,frozen2:null,c1:null,c2:null,axis:null,slipped:null,failed:null,kinematic:null,__class__:Tb};var Dd=function(){};k["zpp_nape.geom.ZPP_SweepDistance"]=Dd;Dd.__name__=["zpp_nape","geom","ZPP_SweepDistance"];
Dd.dynamicSweep=function(a,b,c,d,e){null==e&&(e=!1);var f=a.s1,m=a.s2,h=f.body,g=m.body;var k=g.velx-h.velx;var l=g.vely-h.vely;var n=h.angvel;0>n&&(n=-n);var p=g.angvel;0>p&&(p=-p);var r=f.sweepCoef*n+m.sweepCoef*p;if(!e&&!a.kinematic&&k*k+l*l<x.dynamicSweepLinearThreshold*x.dynamicSweepLinearThreshold&&r<x.dynamicSweepAngularThreshold)a.toi=-1,a.failed=!0;else{n=a.c1;p=a.c2;for(var t=a.axis,u=0;;){h.sweepIntegrate(c*b);h.sweepValidate(f);g.sweepIntegrate(c*b);g.sweepValidate(m);var v=Dd.distance(f,
m,n,p,t)+d,w=k*t.x+l*t.y;if(v<x.distanceThresholdCCD){if(e)break;var A=n.x-h.posx;A=w-h.sweep_angvel*(t.y*A-t.x*(n.y-h.posy))+g.sweep_angvel*(t.y*(p.x-g.posx)-t.x*(p.y-g.posy));0<A&&(a.slipped=!0);if(0>=A||v<.5*x.distanceThresholdCCD)break}w=(r-w)*b;if(0>=w){c=-1;break}w=v/w;1E-6>w&&(w=1E-6);c+=w;if(1<=c){c=1;h.sweepIntegrate(c*b);h.sweepValidate(f);g.sweepIntegrate(c*b);g.sweepValidate(m);b=Dd.distance(f,m,n,p,t)+d;k=k*t.x+l*t.y;if(b<x.distanceThresholdCCD){if(e)break;e=n.x-h.posx;h=k-h.sweep_angvel*
(t.y*e-t.x*(n.y-h.posy))+g.sweep_angvel*(t.y*(p.x-g.posx)-t.x*(p.y-g.posy));0<h&&(a.slipped=!0);if(0>=h||b<.5*x.distanceThresholdCCD)break}c=-1;break}if(40<=++u){v>d&&(a.failed=!0);break}}a.toi=c}};Dd.staticSweep=function(a,b,c,d){var e=a.s1,f=a.s2,g=e.body;var h=-g.velx;var k=-g.vely;var l=g.sweep_angvel;0>l&&(l=-l);var n=e.sweepCoef*l;l=a.c1;for(var p=a.c2,r=a.axis,t=0;;){g.sweepIntegrate(c*b);g.sweepValidate(e);var u=Dd.distance(e,f,l,p,r)+d,v=h*r.x+k*r.y;if(u<x.distanceThresholdCCD){var w=v-g.sweep_angvel*
(r.y*(l.x-g.posx)-r.x*(l.y-g.posy));0<w&&(a.slipped=!0);if(0>=w||u<.5*x.distanceThresholdCCD)break}v=(n-v)*b;if(0>=v){c=-1;break}v=u/v;1E-6>v&&(v=1E-6);c+=v;if(1<=c){c=1;g.sweepIntegrate(c*b);g.sweepValidate(e);b=Dd.distance(e,f,l,p,r)+d;h=h*r.x+k*r.y;if(b<x.distanceThresholdCCD&&(g=h-g.sweep_angvel*(r.y*(l.x-g.posx)-r.x*(l.y-g.posy)),0<g&&(a.slipped=!0),0>=g||b<.5*x.distanceThresholdCCD))break;c=-1;break}if(40<=++t){u>d&&(a.failed=!0);break}}a.toi=c};Dd.distance=function(a,b,c,d,e,f){null==f&&(f=
1E100);if(a.isCircle()&&b.isCircle()){var g=a.circle,h=b.circle,k=0,l=0;k=h.worldCOMx-g.worldCOMx;l=h.worldCOMy-g.worldCOMy;var n=Ga.sqrt(k*k+l*l);var p=n-(g.radius+h.radius);if(p<f){if(0==n)k=1,l=0;else{var r=1/n;k*=r;l*=r}var t=g.radius;c.x=g.worldCOMx+k*t;c.y=g.worldCOMy+l*t;var u=-h.radius;d.x=h.worldCOMx+k*u;d.y=h.worldCOMy+l*u;e.x=k;e.y=l}return p}var v=!1;if(a.isCircle()&&b.isPolygon()){var w=a;a=b;b=w;var A=c;c=d;d=A;v=!0}if(a.isPolygon()&&b.isCircle()){for(var B=b.circle,C=-1E100,D=null,
E=a.polygon.edges.begin();null!=E;){var F=E.elem(),G=F.gnormx*B.worldCOMx+F.gnormy*B.worldCOMy-F.gprojection-B.radius;if(G>f){C=G;break}0<G?G>C&&(C=G,D=F):0>C&&G>C&&(C=G,D=F);E=E.next}if(C<f){var H=D.gp0,I=D.gp1,K=B.worldCOMy*D.gnormx-B.worldCOMx*D.gnormy;if(K<=H.y*D.gnormx-H.x*D.gnormy){var L=0,M=0;L=B.worldCOMx-H.x;M=B.worldCOMy-H.y;var N=Ga.sqrt(L*L+M*M);C=N-B.radius;if(C<f){if(0==N)L=1,M=0;else{var O=1/N;L*=O;M*=O}c.x=H.x+0*L;c.y=H.y+0*M;var P=-B.radius;d.x=B.worldCOMx+L*P;d.y=B.worldCOMy+M*P;
e.x=L;e.y=M}}else if(K>=I.y*D.gnormx-I.x*D.gnormy){var Q=0,R=0;Q=B.worldCOMx-I.x;R=B.worldCOMy-I.y;var T=Ga.sqrt(Q*Q+R*R);C=T-B.radius;if(C<f){if(0==T)Q=1,R=0;else{var U=1/T;Q*=U;R*=U}c.x=I.x+0*Q;c.y=I.y+0*R;var V=-B.radius;d.x=B.worldCOMx+Q*V;d.y=B.worldCOMy+R*V;e.x=Q;e.y=R}}else{var W=-B.radius;d.x=B.worldCOMx+D.gnormx*W;d.y=B.worldCOMy+D.gnormy*W;var X=-C;c.x=d.x+D.gnormx*X;c.y=d.y+D.gnormy*X;e.x=D.gnormx;e.y=D.gnormy}}v&&(e.x=-e.x,e.y=-e.y);return C}for(var Y=a.polygon,aa=b.polygon,S=-1E100,ca=
null,da=null,ea=0,fa=Y.edges.begin();null!=fa;){for(var ha=fa.elem(),ba=1E100,ja=aa.gverts.begin();null!=ja;){var oa=ja.elem(),pa=ha.gnormx*oa.x+ha.gnormy*oa.y;pa<ba&&(ba=pa);ja=ja.next}ba-=ha.gprojection;if(ba>f){S=ba;break}0<ba?ba>S&&(S=ba,ca=ha,ea=1):0>S&&ba>S&&(S=ba,ca=ha,ea=1);fa=fa.next}if(S<f){for(var ka=aa.edges.begin();null!=ka;){for(var ma=ka.elem(),ia=1E100,qa=Y.gverts.begin();null!=qa;){var sa=qa.elem(),ta=ma.gnormx*sa.x+ma.gnormy*sa.y;ta<ia&&(ia=ta);qa=qa.next}ia-=ma.gprojection;if(ia>
f){S=ia;break}0<ia?ia>S&&(S=ia,da=ma,ea=2):0>S&&ia>S&&(S=ia,da=ma,ea=2);ka=ka.next}if(S<f){if(1==ea){var Aa=aa;var Z=ca}else{Aa=Y;Z=da;var Ca=c;c=d;d=Ca;v=!v}for(var ra=null,Ba=1E100,xa=Aa.edges.begin();null!=xa;){var Ea=xa.elem(),Fa=Z.gnormx*Ea.gnormx+Z.gnormy*Ea.gnormy;Fa<Ba&&(Ba=Fa,ra=Ea);xa=xa.next}v?(e.x=-Z.gnormx,e.y=-Z.gnormy):(e.x=Z.gnormx,e.y=Z.gnormy);if(0<=S){var la=Z.gp0,ua=Z.gp1,na=ra.gp0,va=ra.gp1,wa=0,ya=0,za=0,Da=0;wa=ua.x-la.x;ya=ua.y-la.y;za=va.x-na.x;Da=va.y-na.y;var La=1/(wa*wa+
ya*ya),Ma=1/(za*za+Da*Da),Ha=-(wa*(la.x-na.x)+ya*(la.y-na.y))*La,Ia=-(wa*(la.x-va.x)+ya*(la.y-va.y))*La,Ja=-(za*(na.x-la.x)+Da*(na.y-la.y))*Ma,Ka=-(za*(na.x-ua.x)+Da*(na.y-ua.y))*Ma;0>Ha?Ha=0:1<Ha&&(Ha=1);0>Ia?Ia=0:1<Ia&&(Ia=1);0>Ja?Ja=0:1<Ja&&(Ja=1);0>Ka?Ka=0:1<Ka&&(Ka=1);var Na=0,Oa=0,Pa=Ha;Na=la.x+wa*Pa;Oa=la.y+ya*Pa;var Qa=0,Ra=0,Sa=Ia;Qa=la.x+wa*Sa;Ra=la.y+ya*Sa;var Ta=0,Ua=0,Ya=Ja;Ta=na.x+za*Ya;Ua=na.y+Da*Ya;var Va=0,Wa=0,Za=Ka;Va=na.x+za*Za;Wa=na.y+Da*Za;var Xa=mc.vec_dsq(Na,Oa,na.x,na.y),
ab=mc.vec_dsq(Qa,Ra,va.x,va.y),$a=mc.vec_dsq(Ta,Ua,la.x,la.y),eb=mc.vec_dsq(Va,Wa,ua.x,ua.y),db=0,hb=0,cb=null;Xa<ab?(db=Na,hb=Oa,cb=na):(db=Qa,hb=Ra,cb=va,Xa=ab);var kb=0,lb=0,jb=null;$a<eb?(kb=Ta,lb=Ua,jb=la):(kb=Va,lb=Wa,jb=ua,$a=eb);Xa<$a?(c.x=db,c.y=hb,d.x=cb.x,d.y=cb.y,S=Math.sqrt(Xa)):(d.x=kb,d.y=lb,c.x=jb.x,c.y=jb.y,S=Math.sqrt($a));if(0!=S){e.x=d.x-c.x;e.y=d.y-c.y;var mb=1/S;e.x*=mb;e.y*=mb;v&&(e.x=-e.x,e.y=-e.y)}return S}var bb=0,fb=0;bb=ra.gp0.x;fb=ra.gp0.y;var gb=0,ib=0;gb=ra.gp1.x;ib=
ra.gp1.y;var nb=0,ob=0;nb=gb-bb;ob=ib-fb;var pb=Z.gnormy*bb-Z.gnormx*fb,rb=Z.gnormy*gb-Z.gnormx*ib,ub=1/(rb-pb),sb=(-Z.tp1-pb)*ub;sb>x.epsilon&&(bb+=nb*sb,fb+=ob*sb);var tb=(-Z.tp0-rb)*ub;tb<-x.epsilon&&(gb+=nb*tb,ib+=ob*tb);var vb=bb*Z.gnormx+fb*Z.gnormy-Z.gprojection,wb=gb*Z.gnormx+ib*Z.gnormy-Z.gprojection;if(vb<wb){d.x=bb;d.y=fb;var xb=-vb;c.x=d.x+Z.gnormx*xb;c.y=d.y+Z.gnormy*xb;return vb}d.x=gb;d.y=ib;var yb=-wb;c.x=d.x+Z.gnormx*yb;c.y=d.y+Z.gnormy*yb;return wb}}return f};var wj=function(){this._validate=
null;this.immutable=!1;this.x=this.y=this.z=0;this.outer=null;this.immutable=!1;this._validate=null};k["zpp_nape.geom.ZPP_Vec3"]=wj;wj.__name__=["zpp_nape","geom","ZPP_Vec3"];wj.prototype={outer:null,x:null,y:null,z:null,immutable:null,_validate:null,validate:function(){null!=this._validate&&this._validate()},__class__:wj};var mc=function(){};k["zpp_nape.geom.ZPP_VecMath"]=mc;mc.__name__=["zpp_nape","geom","ZPP_VecMath"];mc.vec_dsq=function(a,b,c,d){a-=c;b-=d;return a*a+b*b};var Ha=function(){this.userData=
this.ishape=this.ibody=this.icompound=this.cbsets=this.group=this.cbTypes=this.cbSet=this.wrap_cbTypes=null;this.id=0;this.outer_i=null;this.id=Kb.Interactor();this.cbsets=new fk;this.cbTypes=new dd};k["zpp_nape.phys.ZPP_Interactor"]=Ha;Ha.__name__=["zpp_nape","phys","ZPP_Interactor"];Ha.get=function(a,b){var c=a.id<b.id?a.id:b.id,d=a.id<b.id?b.id:a.id,e=null;for(a=(a.cbsets.length<b.cbsets.length?a.cbsets:b.cbsets).begin();null!=a;){b=a.elem();if(b.id==c&&b.di==d){e=b;break}a=a.next}return e};Ha.int_callback=
function(a,b,c){var d=a.int1;a=a.int2;b.options1.compatible(d.cbTypes)&&b.options2.compatible(a.cbTypes)?(c.int1=d,c.int2=a):(c.int1=a,c.int2=d)};Ha.prototype={outer_i:null,id:null,userData:null,ishape:null,ibody:null,icompound:null,isShape:function(){return null!=this.ishape},isBody:function(){return null!=this.ibody},isCompound:function(){return null!=this.icompound},__iaddedToSpace:function(){null!=this.group&&this.group.addInteractor(this);for(var a=this.cbTypes.begin();null!=a;)a.elem().addInteractor(this),
a=a.next;this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.remInteractor(this);for(var a=this.cbTypes.begin();null!=a;)a.elem().remInteractor(this),a=a.next;this.dealloc_cbSet()},wake:function(){if(this.isShape()){var a=this.ishape.body;null!=a&&null!=a.space&&a.space.non_inlined_wake(a)}else this.isBody()?null!=this.ibody.space&&this.ibody.space.non_inlined_wake(this.ibody):null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound)},cbsets:null,getSpace:function(){return this.isShape()?
null==this.ishape.body?null:this.ishape.body.space:this.isBody()?this.ibody.space:this.icompound.space},group:null,cbTypes:null,cbSet:null,wrap_cbTypes:null,setupcbTypes:function(){this.wrap_cbTypes=id.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=l(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=l(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=!0},wrap_cbTypes_subber:function(a){a=a.zpp_inner;if(this.cbTypes.has(a)){var b=this.getSpace();null!=b&&(this.dealloc_cbSet(),
a.remInteractor(this));this.cbTypes.remove(a);null!=b&&(this.alloc_cbSet(),this.wake())}},wrap_cbTypes_adder:function(a){this.insert_cbtype(a.zpp_inner);return!1},insert_cbtype:function(a){if(!this.cbTypes.has(a)){var b=this.getSpace();null!=b&&(this.dealloc_cbSet(),a.addInteractor(this));for(var c=null,d=this.cbTypes.begin();null!=d;){var e=d.elem();if(ab.setlt(a,e))break;c=d;d=d.next}this.cbTypes.inlined_insert(c,a);null!=b&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var a=this.getSpace();
null!=(this.cbSet=a.cbsets.get(this.cbTypes))&&(this.cbSet.increment(),this.cbSet.addInteractor(this),this.cbSet.validate(),a.freshInteractorType(this))},dealloc_cbSet:function(){var a=this.getSpace();null!=this.cbSet&&(this.cbSet.remInteractor(this),a.nullInteractorType(this),this.cbSet.decrement()&&(a.cbsets.remove(this.cbSet),a=this.cbSet,a.free(),a.next=Ba.zpp_pool,Ba.zpp_pool=a),this.cbSet=null)},immutable_midstep:function(a){this.isBody()?this.ibody.__immutable_midstep(a):this.isShape()?this.ishape.__immutable_midstep(a):
this.icompound.__imutable_midstep(a)},lookup_group:function(){for(var a=this;null!=a&&null==a.group;)a=a.isShape()?a.ishape.body:a.isCompound()?a.icompound.compound:a.ibody.compound;return null==a?null:a.group},__class__:Ha};var pf=function(){this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_aabb=!1;this.aabb=null;this.norotate=!1;this.cinertia=this.iinertia=this.sinertia=0;this.zip_inertia=
!1;this.inertiaMode=this.inertia=0;this.zip_gravMassScale=!1;this.gravMassMode=this.gravMassScale=0;this.zip_gravMass=!1;this.gravMass=0;this.nomove=!1;this.massMode=this.imass=this.smass=this.cmass=0;this.zip_mass=!1;this.mass=0;this.zip_axis=!1;this.forcex=this.forcey=this.kinvelx=this.kinvely=this.svelx=this.svely=this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=this.axisx=this.axisy=0;this.wrap_vel=null;this.velx=this.vely=0;this.wrap_pos=null;this.pre_posx=this.pre_posy=this.posx=
this.posy=0;this.bullet=this.bulletEnabled=this.disableCCD=!1;this.sweepRadius=0;this.sweepFrozen=!1;this.sweepTime=this.sweep_angvel=0;this.compound=this.shapes=this.wrap_shapes=this.space=this.arbiters=this.wrap_arbiters=this.constraints=this.wrap_constraints=this.component=null;this.type=0;this.world=!1;this.outer=null;Ha.call(this);this.ibody=this;this.bulletEnabled=this.world=!1;this.sweep_angvel=this.sweepTime=0;this.disableCCD=this.norotate=this.nomove=!1;this.axisx=this.rot=this.posy=this.posx=
0;this.axisy=1;this.torque=this.angvel=this.kinangvel=this.forcey=this.forcex=this.kinvely=this.kinvelx=this.vely=this.velx=this.svely=this.svelx=0;this.pre_posx=cb.POSINF();this.pre_posy=cb.POSINF();this.pre_rot=cb.POSINF();this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.zip_aabb=!0;this.aabb=Yb.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=l(this,this.aabb_validate);this.gravMassMode=this.massMode=0;this.gravMassScale=1;this.inertiaMode=0;this.arbiters=new zg;this.constraints=
new re;this.shapes=new Df;this.wrap_shapes=Rd.get(this.shapes);this.wrap_shapes.zpp_inner.adder=l(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=l(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=l(this,this.shapes_invalidate);this.kinematicDelaySleep=!1};k["zpp_nape.phys.ZPP_Body"]=pf;pf.__name__=["zpp_nape","phys","ZPP_Body"];pf.__static=function(){var a=new da(Aa.get_STATIC()),b=a.zpp_inner;b.world=!0;b.wrap_shapes.zpp_inner.immutable=!0;b.smass=b.imass=b.cmass=b.mass=
b.gravMass=0;b.sinertia=b.iinertia=b.cinertia=b.inertia=0;b.cbTypes.clear();return a};pf.__super__=Ha;pf.prototype=w(Ha.prototype,{outer:null,world:null,type:null,isStatic:function(){return 1==this.type},isDynamic:function(){return 2==this.type},isKinematic:function(){return 3==this.type},invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},compound:null,shapes:null,wrap_shapes:null,invalidate_shapes:function(){this.invalidate_aabb();this.invalidate_localCOM();this.invalidate_mass();
this.invalidate_inertia()},space:null,arbiters:null,wrap_arbiters:null,constraints:null,wrap_constraints:null,component:null,atRest:function(a){if(this.isDynamic()){var b=x.linearSleepThreshold;b*=b;if(this.velx*this.velx+this.vely*this.vely>b)a=!1;else if(mc.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy)>.25*b*a*a)a=!1;else{b=this.aabb.maxx-this.aabb.minx;var c=this.aabb.maxy-this.aabb.miny;b=b*b+c*c;c=x.angularSleepThreshold;c*=c;if(4*this.angvel*this.angvel*b>c)a=!1;else{var d=this.rot-
this.pre_rot;a=d*d*b>c*a*a?!1:!0}}a||(this.component.waket=this.space.stamp);return this.component.waket+x.sleepDelay<this.space.stamp}return this.component.sleeping},refreshArbiters:function(){for(var a=this.arbiters.begin();null!=a;)a.elem().invalidated=!0,a=a.next},sweepTime:null,sweep_angvel:null,sweepFrozen:null,sweepRadius:null,bullet:null,bulletEnabled:null,disableCCD:null,sweepIntegrate:function(a){var b=a-this.sweepTime;0!=b&&(this.sweepTime=a,this.posx+=this.velx*b,this.posy+=this.vely*
b,0!=this.angvel&&this.delta_rot(this.sweep_angvel*b))},sweepValidate:function(a){if(a.isCircle())a.worldCOMx=this.posx+(this.axisy*a.localCOMx-this.axisx*a.localCOMy),a.worldCOMy=this.posy+(a.localCOMx*this.axisx+a.localCOMy*this.axisy);else{a=a.polygon;for(var b=a.lverts.begin(),c=a.gverts.begin();null!=c;){var d=c.elem(),e=b.elem();b=b.next;d.x=this.posx+(this.axisy*e.x-this.axisx*e.y);d.y=this.posy+(e.x*this.axisx+e.y*this.axisy);c=c.next}c=a.edges.begin();d=a.gverts.begin();b=d.elem();for(d=
d.next;null!=d;){e=d.elem();var f=c.elem();c=c.next;f.gnormx=this.axisy*f.lnormx-this.axisx*f.lnormy;f.gnormy=f.lnormx*this.axisx+f.lnormy*this.axisy;f.gprojection=this.posx*f.gnormx+this.posy*f.gnormy+f.lprojection;f.tp0=b.y*f.gnormx-b.x*f.gnormy;f.tp1=e.y*f.gnormx-e.x*f.gnormy;b=e;d=d.next}a=a.gverts.front();c=c.elem();c.gnormx=this.axisy*c.lnormx-this.axisx*c.lnormy;c.gnormy=c.lnormx*this.axisx+c.lnormy*this.axisy;c.gprojection=this.posx*c.gnormx+this.posy*c.gnormy+c.lprojection;c.tp0=b.y*c.gnormx-
b.x*c.gnormy;c.tp1=a.y*c.gnormx-a.x*c.gnormy}},pre_posx:null,pre_posy:null,posx:null,posy:null,wrap_pos:null,velx:null,vely:null,wrap_vel:null,forcex:null,forcey:null,kinvelx:null,kinvely:null,svelx:null,svely:null,invalidate_pos:function(){for(var a=this.shapes.begin();null!=a;){var b=a.elem();1==b.type&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.invalidate_worldCOM()},pos_invalidate:function(a){this.immutable_midstep("Body::position");if(this.posx!=
a.x||this.posy!=a.y)this.posx=a.x,this.posy=a.y,this.invalidate_pos(),this.wake()},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(a){this.velx=a.x;this.vely=a.y;this.invalidate_wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},setupPosition:function(){this.wrap_pos=v.get(this.posx,this.posy);this.wrap_pos.zpp_inner._inuse=!0;this.world?this.wrap_pos.zpp_inner._immutable=
!0:(this.wrap_pos.zpp_inner._invalidate=l(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=l(this,this.pos_validate))},setupVelocity:function(){this.wrap_vel=v.get(this.velx,this.vely);this.wrap_vel.zpp_inner._inuse=!0;this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=l(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=l(this,this.vel_validate))},angvel:null,torque:null,kinangvel:null,pre_rot:null,rot:null,invalidate_rot:function(){this.zip_axis=
!0;for(var a=this.shapes.begin();null!=a;){var b=a.elem();1==b.type&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.invalidate_worldCOM()},axisx:null,axisy:null,zip_axis:null,validate_axis:function(){this.zip_axis&&(this.zip_axis=!1,this.quick_validate_axis())},quick_validate_axis:function(){this.axisx=Math.sin(this.rot);this.axisy=Math.cos(this.rot)},delta_rot:function(a){this.rot+=a;if(1E-4<a*a)this.quick_validate_axis();else{var b=a*a,c=1-.5*b;
b=1-b*b/8;var d=(c*this.axisx+a*this.axisy)*b;this.axisy=(c*this.axisy-a*this.axisx)*b;this.axisx=d}},kinematicDelaySleep:null,mass:null,zip_mass:null,massMode:null,imass:null,smass:null,cmass:null,nomove:null,invalidate_mass:function(){this.zip_mass=!0;this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass){this.zip_mass=!1;if(0==this.massMode){this.cmass=0;for(var a=this.shapes.begin();null!=a;){var b=a.elem();b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cmass+=
b.area*b.material.density;a=a.next}}this.isDynamic()&&!this.nomove?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=cb.POSINF(),this.imass=this.smass=0)}},gravMass:null,zip_gravMass:null,gravMassMode:null,gravMassScale:null,zip_gravMassScale:null,invalidate_gravMass:function(){1!=this.gravMassMode&&(this.zip_gravMass=!0);2!=this.gravMassMode&&(this.zip_gravMassScale=!0);this.wake()},validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),0==this.gravMassMode?
(this.validate_mass(),this.gravMass=this.cmass):2==this.gravMassMode&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},inertiaMode:null,inertia:null,zip_inertia:null,cinertia:null,iinertia:null,sinertia:null,norotate:null,invalidate_inertia:function(){this.zip_inertia=!0;this.wake()},validate_inertia:function(){if(this.zip_inertia){this.zip_inertia=!1;if(0==this.inertiaMode){this.cinertia=0;for(var a=this.shapes.begin();null!=a;){var b=a.elem();b.refmaterial.density=b.material.density;
b.validate_area_inertia();this.cinertia+=b.inertia*b.area*b.material.density;a=a.next}}this.isDynamic()&&!this.norotate?(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia):(this.inertia=cb.POSINF(),this.sinertia=this.iinertia=0)}},invalidate_wake:function(){this.wake()},aabb:null,zip_aabb:null,validate_aabb:function(){if(this.zip_aabb){this.zip_aabb=!1;this.aabb.minx=cb.POSINF();this.aabb.miny=cb.POSINF();this.aabb.maxx=cb.NEGINF();this.aabb.maxy=cb.NEGINF();for(var a=this.shapes.begin();null!=
a;){var b=a.elem();b.validate_aabb();this.aabb.combine(b.aabb);a=a.next}}},invalidate_aabb:function(){this.zip_aabb=!0},localCOMx:null,localCOMy:null,zip_localCOM:null,worldCOMx:null,worldCOMy:null,zip_worldCOM:null,wrap_localCOM:null,wrap_worldCOM:null,invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_worldCOM()},invalidate_worldCOM:function(){this.zip_worldCOM=!0},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var a=0,b=0,c=0,d=this.shapes.begin();null!=
d;){var e=d.elem();e.validate_localCOM();e.validate_area_inertia();var f=e.area*e.material.density;a+=e.localCOMx*f;b+=e.localCOMy*f;c+=e.area*e.material.density;d=d.next}0!=c&&(d=1/c,this.localCOMx=a*d,this.localCOMy=b*d);null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy);this.zip_mass&&0==this.massMode&&(this.zip_mass=!1,this.cmass=c,this.isDynamic()?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=cb.POSINF(),
this.imass=this.smass=0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.validate_axis(),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},getlocalCOM:function(){this.validate_localCOM()},__immutable_midstep:function(a){},
aabb_validate:function(){this.validate_aabb()},shapes_adder:function(a){return a.zpp_inner.body!=this?(null!=a.zpp_inner.body&&a.zpp_inner.body.wrap_shapes.remove(a),a.zpp_inner.body=this,a.zpp_inner.addedToBody(),null!=this.space&&this.space.added_shape(a.zpp_inner),a.zpp_inner.isPolygon()&&(a.zpp_inner.polygon.invalidate_gaxi(),a.zpp_inner.polygon.invalidate_gverts()),!0):!1},shapes_subber:function(a){null!=this.space&&this.space.removed_shape(a.zpp_inner);a.zpp_inner.body=null;a.zpp_inner.removedFromBody()},
shapes_invalidate:function(a){this.invalidate_shapes()},addedToSpace:function(){null==Jc.zpp_pool?this.component=new Jc:(this.component=Jc.zpp_pool,Jc.zpp_pool=this.component.next,this.component.next=null);this.component.alloc();this.component.isBody=!0;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){for(;!this.arbiters.empty();)this.arbiters.pop_unsafe().lazyRetire(this.space,this);var a=this.component;a.free();a.next=Jc.zpp_pool;Jc.zpp_pool=a;this.component=null;this.__iremovedFromSpace()},
__class__:pf});var Ch=function(){this.compound=this.space=null;this.depth=0;this.outer=this.bodies=this.constraints=this.compounds=this.wrap_bodies=this.wrap_constraints=this.wrap_compounds=null;Ha.call(this);this.icompound=this;this.depth=1;this.bodies=new se;this.wrap_bodies=af.get(this.bodies);this.wrap_bodies.zpp_inner.adder=l(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=l(this,this.bodies_subber);this.constraints=new re;this.wrap_constraints=Gd.get(this.constraints);this.wrap_constraints.zpp_inner.adder=
l(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=l(this,this.constraints_subber);this.compounds=new ig;this.wrap_compounds=qf.get(this.compounds);this.wrap_compounds.zpp_inner.adder=l(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=l(this,this.compounds_subber)};k["zpp_nape.phys.ZPP_Compound"]=Ch;Ch.__name__=["zpp_nape","phys","ZPP_Compound"];Ch.__super__=Ha;Ch.prototype=w(Ha.prototype,{outer:null,bodies:null,constraints:null,compounds:null,wrap_bodies:null,wrap_constraints:null,
wrap_compounds:null,depth:null,compound:null,space:null,__imutable_midstep:function(a){},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},bodies_adder:function(a){return a.zpp_inner.compound!=this?(null!=a.zpp_inner.compound?a.zpp_inner.compound.wrap_bodies.remove(a):null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_bodies.remove(a),a.zpp_inner.compound=this,null!=this.space&&this.space.addBody(a.zpp_inner),!0):!1},bodies_subber:function(a){a.zpp_inner.compound=
null;null!=this.space&&this.space.remBody(a.zpp_inner)},constraints_adder:function(a){return a.zpp_inner.compound!=this?(null!=a.zpp_inner.compound?a.zpp_inner.compound.wrap_constraints.remove(a):null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_constraints.remove(a),a.zpp_inner.compound=this,null!=this.space&&this.space.addConstraint(a.zpp_inner),!0):!1},constraints_subber:function(a){a.zpp_inner.compound=null;null!=this.space&&this.space.remConstraint(a.zpp_inner)},compounds_adder:function(a){return a.zpp_inner.compound!=
this?(null!=a.zpp_inner.compound?a.zpp_inner.compound.wrap_compounds.remove(a):null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),a.zpp_inner.compound=this,a.zpp_inner.depth=this.depth+1,null!=this.space&&this.space.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){a.zpp_inner.compound=null;a.zpp_inner.depth=1;null!=this.space&&this.space.remCompound(a.zpp_inner)},__class__:Ch});var Zf=function(){this.wrap_gravity=null;this.viscosity=this.density=this.gravityx=this.gravityy=
0;this.next=this.outer=this.shapes=null;this.feature_cons();this.density=this.viscosity=1;this.wrap_gravity=null;this.gravityy=this.gravityx=0};k["zpp_nape.phys.ZPP_FluidProperties"]=Zf;Zf.__name__=["zpp_nape","phys","ZPP_FluidProperties"];Zf.prototype={next:null,outer:null,alloc:function(){},shapes:null,feature_cons:function(){this.shapes=new Df},addShape:function(a){this.shapes.add(a)},remShape:function(a){this.shapes.remove(a)},viscosity:null,density:null,gravityx:null,gravityy:null,wrap_gravity:null,
invalidate:function(){for(var a=this.shapes.begin();null!=a;)a.elem().invalidate_fluidprops(),a=a.next},__class__:Zf};var qa=function(){this.dynamicFriction=this.staticFriction=this.density=this.elasticity=this.rollingFriction=0;this.next=this.outer=this.shapes=null;this.feature_cons();this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=.001;this.rollingFriction=.01};k["zpp_nape.phys.ZPP_Material"]=qa;qa.__name__=["zpp_nape","phys","ZPP_Material"];qa.prototype={next:null,outer:null,
wrapper:function(){if(null==this.outer){this.outer=new Oa;var a=this.outer.zpp_inner;a.free();a.next=qa.zpp_pool;qa.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},free:function(){this.outer=null},alloc:function(){},shapes:null,feature_cons:function(){this.shapes=new Df},addShape:function(a){this.shapes.add(a)},remShape:function(a){this.shapes.remove(a)},dynamicFriction:null,staticFriction:null,density:null,elasticity:null,rollingFriction:null,set:function(a){this.dynamicFriction=a.dynamicFriction;
this.staticFriction=a.staticFriction;this.density=a.density;this.elasticity=a.elasticity;this.rollingFriction=a.rollingFriction},invalidate:function(a){for(var b=this.shapes.begin();null!=b;)b.elem().invalidate_material(a),b=b.next},__class__:qa};var te=function(a){this.zip_aabb=!1;this.sweep=this.node=this.pairs=this.aabb=null;this.fluidEnabled=this.sensorEnabled=!1;this.circle=this.polygon=this.refmaterial=this.material=this.filter=this.fluidProperties=null;this.sweepCoef=0;this.zip_sweepRadius=
!1;this.sweepRadius=0;this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_angDrag=!1;this.inertia=this.angDrag=0;this.zip_area_inertia=!1;this.type=this.area=0;this.outer=this.body=null;Ha.call(this);this.pairs=new gk;this.ishape=this;this.type=a;this.aabb=Yb.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=l(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=
this.zip_sweepRadius=!0;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.sensorEnabled=this.fluidEnabled=!1;this.body=this.fluidProperties=null;this.refmaterial=new qa;this.sweepRadius=this.sweepCoef=0};k["zpp_nape.shape.ZPP_Shape"]=te;te.__name__=["zpp_nape","shape","ZPP_Shape"];te.__super__=Ha;te.prototype=w(Ha.prototype,{outer:null,body:null,type:null,isCircle:function(){return 0==this.type},isPolygon:function(){return 1==this.type},area:null,zip_area_inertia:null,inertia:null,
angDrag:null,zip_angDrag:null,localCOMx:null,localCOMy:null,zip_localCOM:null,worldCOMx:null,worldCOMy:null,zip_worldCOM:null,wrap_localCOM:null,wrap_worldCOM:null,sweepRadius:null,zip_sweepRadius:null,sweepCoef:null,invalidate_sweepRadius:function(){this.zip_sweepRadius=!0},validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,this.isCircle()?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},circle:null,polygon:null,refmaterial:null,material:null,
filter:null,fluidProperties:null,fluidEnabled:null,sensorEnabled:null,sweep:null,node:null,pairs:null,aabb:null,zip_aabb:null,validate_aabb:function(){this.zip_aabb&&null!=this.body&&(this.zip_aabb=!1,this.isCircle()?this.circle.__validate_aabb():this.polygon.__validate_aabb())},force_validate_aabb:function(){this.isCircle()?this.circle._force_validate_aabb():this.polygon._force_validate_aabb()},invalidate_aabb:function(){this.zip_aabb=!0;null!=this.body&&this.body.invalidate_aabb()},validate_area_inertia:function(){this.zip_area_inertia&&
(this.zip_area_inertia=!1,this.isCircle()?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},validate_angDrag:function(){if(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,this.isCircle()?this.circle.__validate_angDrag():this.polygon.__validate_angDrag()},validate_localCOM:function(){this.zip_localCOM&&(this.zip_localCOM=!1,this.isPolygon()&&this.polygon.__validate_localCOM(),
null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy))},validate_worldCOM:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy))},getworldCOM:function(){this.validate_worldCOM();this.wrap_worldCOM.zpp_inner.x=
this.worldCOMx;this.wrap_worldCOM.zpp_inner.y=this.worldCOMy},invalidate_area_inertia:function(){this.zip_area_inertia=!0;null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia())},invalidate_angDrag:function(){this.zip_angDrag=!0},invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_area_inertia();this.isCircle()&&this.invalidate_sweepRadius();this.invalidate_angDrag();this.invalidate_worldCOM();null!=this.body&&this.body.invalidate_localCOM()},
invalidate_worldCOM:function(){this.zip_worldCOM=!0;this.invalidate_aabb()},invalidate_material:function(a){0!=(a&qa.WAKE)&&this.wake();0!=(a&qa.ARBITERS)&&null!=this.body&&this.body.refreshArbiters();0!=(a&qa.PROPS)&&null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia());0!=(a&qa.ANGDRAG)&&this.invalidate_angDrag();this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},invalidate_fluidprops:function(){this.fluidEnabled&&
this.wake()},aabb_validate:function(){this.validate_aabb()},setMaterial:function(a){this.material!=a&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.remShape(this),this.material=a,null!=this.body&&null!=this.body.space&&a.addShape(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},setFilter:function(a){this.filter!=a&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.remShape(this),this.filter=a,null!=this.body&&null!=this.body.space&&
a.addShape(this),this.wake())},__immutable_midstep:function(a){},addedToBody:function(){this.invalidate_worldCOM();this.invalidate_aabb()},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.addShape(this);this.filter.addShape(this);null!=this.fluidProperties&&this.fluidProperties.addShape(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.remShape(this);this.filter.remShape(this);null!=this.fluidProperties&&this.fluidProperties.remShape(this)},
__class__:te});var Dh=function(){this.radius=0;this.outer_zn=null;te.call(this,0);this.circle=this;this.zip_localCOM=!1};k["zpp_nape.shape.ZPP_Circle"]=Dh;Dh.__name__=["zpp_nape","shape","ZPP_Circle"];Dh.__super__=te;Dh.prototype=w(te.prototype,{outer_zn:null,radius:null,invalidate_radius:function(){this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_aabb();null!=this.body&&this.body.wake()},__validate_aabb:function(){this.validate_worldCOM();var a=this.radius,b=this.radius;this.aabb.minx=
this.worldCOMx-a;this.aabb.miny=this.worldCOMy-b;this.aabb.maxx=this.worldCOMx+a;this.aabb.maxy=this.worldCOMy+b},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy);this.aabb.minx=this.worldCOMx-this.radius;this.aabb.miny=this.worldCOMy-this.radius;this.aabb.maxx=this.worldCOMx+this.radius;this.aabb.maxy=this.worldCOMy+this.radius},
__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var a=this.radius*this.radius;this.area=a*Math.PI;this.inertia=.5*a+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var a=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,b=this.radius*this.radius;this.angDrag=(a+2*b)*this.material.dynamicFriction*
x.fluidAngularDragFriction+.5*x.fluidAngularDrag*(1+x.fluidVacuumDrag)*a;this.angDrag/=2*(a+.5*b)},__translate:function(a,b){this.localCOMx+=1*a;this.localCOMy+=1*b;this.invalidate_localCOM()},__class__:Dh});var mb=function(){this.tp0=this.tp1=0;this.lp0=this.gp0=this.lp1=this.gp1=null;this.length=this.lprojection=this.gprojection=0;this.wrap_gnorm=null;this.gnormx=this.gnormy=0;this.wrap_lnorm=null;this.lnormx=this.lnormy=0;this.next=this.polygon=this.outer=null;this.gprojection=this.lprojection=
this.length=this.gnormy=this.gnormx=this.lnormy=this.lnormx=0};k["zpp_nape.shape.ZPP_Edge"]=mb;mb.__name__=["zpp_nape","shape","ZPP_Edge"];mb.prototype={next:null,free:function(){this.polygon=null},alloc:function(){},polygon:null,outer:null,wrapper:function(){null==this.outer&&(this.outer=new Aj,mb.internal=!1,this.outer.zpp_inner=this);return this.outer},lnormx:null,lnormy:null,wrap_lnorm:null,gnormx:null,gnormy:null,wrap_gnorm:null,length:null,lprojection:null,gprojection:null,lp0:null,gp0:null,
lp1:null,gp1:null,tp0:null,tp1:null,__class__:mb};var Eh=function(){this.reverse_flag=this.zip_lverts=this.zip_laxi=this.zip_gverts=this.zip_gaxi=this.zip_valid=this.zip_sanitation=!1;this.edgeCnt=0;this.outer_zn=this.lverts=this.wrap_lverts=this.gverts=this.wrap_gverts=this.edges=this.wrap_edges=null;te.call(this,1);this.polygon=this;this.lverts=new Ra;this.gverts=new Ra;this.edges=new li;this.edgeCnt=0};k["zpp_nape.shape.ZPP_Polygon"]=Eh;Eh.__name__=["zpp_nape","shape","ZPP_Polygon"];Eh.__super__=
te;Eh.prototype=w(te.prototype,{outer_zn:null,lverts:null,wrap_lverts:null,gverts:null,wrap_gverts:null,edges:null,wrap_edges:null,edgeCnt:null,reverse_flag:null,lverts_pa_invalidate:function(a){this.invalidate_lverts()},gverts_pa_validate:function(){this.validate_gverts()},lverts_post_adder:function(a){a.zpp_inner._invalidate=l(this,this.lverts_pa_invalidate);for(var b=null,c=null,d=this.lverts.begin();null!=d&&d.elem()!=a.zpp_inner;)b=null==b?this.gverts.begin():b.next,c=null==c?this.edges.begin():
c.next,d=d.next;a=Ra.get(0,0,!0);this.gverts.insert(b,a);null!=this.lverts.begin().next&&(null==this.lverts.begin().next.next?(null==mb.zpp_pool?c=new mb:(c=mb.zpp_pool,mb.zpp_pool=c.next,c.next=null),c.alloc(),c.polygon=this,this.edges.add(c),null==mb.zpp_pool?c=new mb:(c=mb.zpp_pool,mb.zpp_pool=c.next,c.next=null),c.alloc(),c.polygon=this,this.edges.add(c),this.edgeCnt+=2):(null==mb.zpp_pool?b=new mb:(b=mb.zpp_pool,mb.zpp_pool=b.next,b.next=null),b.alloc(),b.polygon=this,this.edges.insert(c,b),
this.edgeCnt++));a._validate=l(this,this.gverts_pa_validate)},lverts_subber:function(a){this.cleanup_lvert(a.zpp_inner)},lverts_invalidate:function(a){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=zf.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=l(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=l(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=l(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=
l(this,this.lverts_validate);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},zip_lverts:null,invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();this.zip_sanitation=this.zip_valid=this.zip_lverts=!0;null!=this.body&&this.body.wake()},zip_laxi:null,invalidate_laxi:function(){this.invalidate_gaxi();this.invalidate_sweepRadius();this.zip_laxi=!0},zip_gverts:null,invalidate_gverts:function(){this.invalidate_aabb();
this.zip_gverts=!0},zip_gaxi:null,invalidate_gaxi:function(){this.zip_gaxi=!0},zip_valid:null,validation:null,valid:function(){if(this.zip_valid){this.zip_valid=!1;this.splice_collinear();if(3>this.lverts.size())return this.validation=Xa.get_DEGENERATE();this.validate_lverts();this.validate_area_inertia();if(this.area<x.epsilon)return this.validation=Xa.get_DEGENERATE();var a=!1,b=!1,c=!0,d=this.lverts.begin(),e=d.elem();d=d.next;var f=d.elem();for(d=d.next;null!=d;){var g=d.elem();var h=g.x-f.x;
h=(f.y-e.y)*h-(f.x-e.x)*(g.y-f.y);h>x.epsilon?b=!0:h<-x.epsilon&&(a=!0);if(b&&a){c=!1;break}e=f;f=g;d=d.next}if(c){d=this.lverts.begin();for(g=d.elem();;){h=g.x-f.x;e=(f.y-e.y)*h-(f.x-e.x)*(g.y-f.y);e>x.epsilon?b=!0:e<-x.epsilon&&(a=!0);if(b&&a){c=!1;break}break}if(c)for(e=f,f=g,d=d.next,c=d.elem();;){d=c.x-f.x;f=(f.y-e.y)*d-(f.x-e.x)*(c.y-f.y);f>x.epsilon?b=!0:f<-x.epsilon&&(a=!0);if(b&&a)break;break}}if(b&&a)return this.validation=Xa.get_CONCAVE();f=a=!0;e=this.lverts.begin();b=e.elem();for(e=e.next;null!=
e;){c=e.elem();if(!a){f=!1;break}g=!0;h=this.lverts.begin();d=h.elem();for(h=h.next;null!=h;){var k=h.elem();if(b!=d&&b!=k&&c!=d&&c!=k){var l=b.x-d.x;var n=b.y-d.y;var p=c.x-b.x;var r=c.y-b.y;var t=k.x-d.x;var u=k.y-d.y;var v=r*t-p*u;if(v*v>x.epsilon&&(v=1/v,t=(u*l-t*n)*v,t>x.epsilon&&t<1-x.epsilon&&(l=(r*l-p*n)*v,l>x.epsilon&&l<1-x.epsilon))){g=a=!1;break}}d=k;h=h.next}if(g)for(;;){n=this.lverts.front();if(b==d||b==n||c==d||c==n)break;g=b.x-d.x;h=b.y-d.y;k=c.x-b.x;b=c.y-b.y;l=n.x-d.x;n=n.y-d.y;d=
b*l-k*n;if(d*d>x.epsilon&&(d=1/d,l=(n*g-l*h)*d,l>x.epsilon&&l<1-x.epsilon&&(b=(b*g-k*h)*d,b>x.epsilon&&b<1-x.epsilon))){a=!1;break}break}b=c;e=e.next}if(f)for(;;){e=this.lverts.front();if(!a)break;c=!0;d=this.lverts.begin();f=d.elem();for(d=d.next;null!=d;){g=d.elem();if(b!=f&&b!=g&&e!=f&&e!=g&&(h=b.x-f.x,k=b.y-f.y,l=e.x-b.x,n=e.y-b.y,r=g.x-f.x,v=g.y-f.y,p=n*r-l*v,p*p>x.epsilon&&(p=1/p,r=(v*h-r*k)*p,r>x.epsilon&&r<1-x.epsilon&&(h=(n*h-l*k)*p,h>x.epsilon&&h<1-x.epsilon)))){c=a=!1;break}f=g;d=d.next}if(c)for(;;){h=
this.lverts.front();if(b==f||b==h||e==f||e==h)break;c=b.x-f.x;d=b.y-f.y;g=e.x-b.x;b=e.y-b.y;e=h.x-f.x;h=h.y-f.y;f=b*e-g*h;if(f*f>x.epsilon&&(f=1/f,e=(h*c-e*d)*f,e>x.epsilon&&e<1-x.epsilon&&(b=(b*c-g*d)*f,b>x.epsilon&&b<1-x.epsilon))){a=!1;break}break}break}return a?this.validation=Xa.get_VALID():this.validation=Xa.get_SELF_INTERSECTING()}return this.validation},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.size()&&(this.validate_area_inertia(),0>this.area&&(this.reverse_vertices(),
this.area=-this.area)))},cleanup_lvert:function(a){for(var b=null,c=null,d=this.lverts.begin();null!=d&&d.elem()!=a;)b=null==b?this.gverts.begin():b.next,c=null==c?this.edges.begin():c.next,d=d.next;a=null==b?this.gverts.front():b.next.elem();this.gverts.erase(b);a.free();a.next=Ra.zpp_pool;Ra.zpp_pool=a;2==this.edgeCnt?(c=this.edges.pop_unsafe(),c.free(),c.next=mb.zpp_pool,mb.zpp_pool=c,c=this.edges.pop_unsafe(),c.free(),c.next=mb.zpp_pool,mb.zpp_pool=c,this.edgeCnt=0):0!=this.edgeCnt&&(b=null==
c?this.edges.front():c.next.elem(),this.edges.erase(c),b.free(),b.next=mb.zpp_pool,mb.zpp_pool=b,this.edgeCnt--)},zip_sanitation:null,splice_collinear:function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},splice_collinear_real:function(){if(null!=this.lverts.begin()&&null!=this.lverts.begin().next&&null!=this.lverts.begin().next.next){for(var a=null,b=this.lverts.begin();null!=b;){var c=null==b.next?this.lverts.begin():b.next,d=b.elem();c=c.elem();mc.vec_dsq(d.x,d.y,
c.x,c.y)<x.epsilon*x.epsilon?(this.cleanup_lvert(b.elem()),b=this.lverts.erase(a)):(a=b,b=b.next)}if(!this.lverts.empty())for(;;){a=!1;for(b=this.lverts.begin();null!=b;){d=null==b.next?this.lverts.begin():b.next;var e=null==d.next?this.lverts.begin():d.next;c=b.elem();var f=d.elem();e=e.elem();var g=f.x-c.x;c=(e.y-f.y)*g-(e.x-f.x)*(f.y-c.y);c*c>=x.epsilon*x.epsilon||(this.cleanup_lvert(d.elem()),this.lverts.erase(null==b.next?null:b),a=!0);b=b.next}if(!a)break}}},reverse_vertices:function(){this.lverts.reverse();
this.gverts.reverse();this.edges.reverse();var a=this.edges.iterator_at(this.edgeCnt-1),b=this.edges.pop_unsafe();this.edges.insert(a,b);this.reverse_flag=!this.reverse_flag;null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1;this.validate_lverts();
var a=this.edges.begin(),b=this.lverts.begin(),c=b.elem();for(b=b.next;null!=b;){var d=b.elem(),e=a.elem();a=a.next;e.lp0=c;e.lp1=d;var f=c.x-d.x;var g=c.y-d.y;var h=Math.sqrt(f*f+g*g);e.length=h;h=1/h;f*=h;g*=h;h=f;f=-g;g=h;e.lprojection=f*c.x+g*c.y;e.lnormx=f;e.lnormy=g;null!=e.wrap_lnorm&&(e.wrap_lnorm.zpp_inner.x=f,e.wrap_lnorm.zpp_inner.y=g);c=d;b=b.next}d=this.lverts.front();a=a.elem();a.lp0=c;a.lp1=d;b=c.x-d.x;d=c.y-d.y;e=Math.sqrt(b*b+d*d);a.length=e;e=1/e;f=b*e;b=-(d*e);d=f;a.lprojection=
b*c.x+d*c.y;a.lnormx=b;a.lnormy=d;null!=a.wrap_lnorm&&(a.wrap_lnorm.zpp_inner.x=b,a.wrap_lnorm.zpp_inner.y=d)}},validate_gverts:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1;this.validate_lverts();this.body.validate_axis();for(var a=this.lverts.begin(),b=this.gverts.begin();null!=b;){var c=b.elem(),d=a.elem();a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);b=b.next}}},validate_gaxi:function(){if(this.zip_gaxi&&
null!=this.body){this.zip_gaxi=!1;this.validate_laxi();this.body.validate_axis();this.validate_gverts();var a=this.edges.begin(),b=this.gverts.begin(),c=b.elem();for(b=b.next;null!=b;){var d=b.elem(),e=a.elem();a=a.next;e.gp0=c;e.gp1=d;e.gnormx=this.body.axisy*e.lnormx-this.body.axisx*e.lnormy;e.gnormy=e.lnormx*this.body.axisx+e.lnormy*this.body.axisy;e.gprojection=this.body.posx*e.gnormx+this.body.posy*e.gnormy+e.lprojection;null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=
e.gnormy);e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy;e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy;c=d;b=b.next}b=this.gverts.front();a=a.elem();a.gp0=c;a.gp1=b;a.gnormx=this.body.axisy*a.lnormx-this.body.axisx*a.lnormy;a.gnormy=a.lnormx*this.body.axisx+a.lnormy*this.body.axisy;a.gprojection=this.body.posx*a.gnormx+this.body.posy*a.gnormy+a.lprojection;null!=a.wrap_gnorm&&(a.wrap_gnorm.zpp_inner.x=a.gnormx,a.wrap_gnorm.zpp_inner.y=a.gnormy);a.tp0=a.gp0.y*a.gnormx-a.gp0.x*a.gnormy;a.tp1=a.gp1.y*a.gnormx-a.gp1.x*
a.gnormy}},__validate_aabb:function(){this.validate_gverts();var a=this.gverts.front();this.aabb.minx=a.x;this.aabb.miny=a.y;this.aabb.maxx=a.x;this.aabb.maxy=a.y;for(a=this.gverts.begin().next;null!=a;){var b=a.elem();b.x<this.aabb.minx&&(this.aabb.minx=b.x);b.x>this.aabb.maxx&&(this.aabb.maxx=b.x);b.y<this.aabb.miny&&(this.aabb.miny=b.y);b.y>this.aabb.maxy&&(this.aabb.maxy=b.y);a=a.next}},_force_validate_aabb:function(){var a=this.lverts.begin(),b=this.gverts.front(),c=a.elem();a=a.next;b.x=this.body.posx+
(this.body.axisy*c.x-this.body.axisx*c.y);b.y=this.body.posy+(c.x*this.body.axisx+c.y*this.body.axisy);this.aabb.minx=b.x;this.aabb.miny=b.y;this.aabb.maxx=b.x;this.aabb.maxy=b.y;for(b=this.gverts.begin().next;null!=b;){c=b.elem();var d=a.elem();a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);c.x<this.aabb.minx&&(this.aabb.minx=c.x);c.x>this.aabb.maxx&&(this.aabb.maxx=c.x);c.y<this.aabb.miny&&(this.aabb.miny=c.y);c.y>
this.aabb.maxy&&(this.aabb.maxy=c.y);b=b.next}},__validate_sweepRadius:function(){var a=0,b=0;this.validate_laxi();for(var c=this.lverts.begin();null!=c;){var d=c.elem();d=d.x*d.x+d.y*d.y;d>a&&(a=d);c=c.next}for(c=this.edges.begin();null!=c;){d=c.elem();if(d.lprojection<b&&(b=d.lprojection,0>b))break;c=c.next}0>b&&(b=0);this.sweepRadius=Math.sqrt(a);this.sweepCoef=this.sweepRadius-b},__validate_area_inertia:function(){if(null==this.lverts.begin()||null==this.lverts.begin().next||null==this.lverts.begin().next.next)this.inertia=
this.area=0;else{var a=this.area=0,b=0,c=this.lverts.begin(),d=c.elem();c=c.next;var e=c.elem();for(c=c.next;null!=c;){var f=c.elem(),g=e.y*d.x-e.x*d.y;a+=g*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));b+=g;this.area+=e.x*(f.y-d.y);d=e;e=f;c=c.next}c=this.lverts.begin();f=c.elem();g=e.y*d.x-e.x*d.y;a+=g*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));b+=g;this.area+=e.x*(f.y-d.y);d=e;e=f;c=c.next;c=c.elem();f=e.y*d.x-e.x*d.y;g=e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y);this.area+=
e.x*(c.y-d.y);this.inertia=(a+f*g)/(6*(b+f));this.area*=.5;0>this.area&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){this.validate_area_inertia();this.validate_laxi();var a=0,b=this.edges.begin(),c=0,d=this.lverts.begin(),e=d.elem();for(d=d.next;null!=d;){var f=d.elem(),g=b.elem();b=b.next;c+=g.length;var h=f.x-e.x;var k=f.y-e.y;a+=g.length*x.fluidAngularDragFriction*this.material.dynamicFriction*g.lprojection*g.lprojection;var l=-(e.y*g.lnormx-e.x*g.lnormy)/(k*g.lnormx-
h*g.lnormy);if(0<l){var n=1<l?1:l;var p=e.x;var r=e.y;var t=n;p+=h*t;r+=k*t;t=g.lnormy*e.x-g.lnormx*e.y;p=g.lnormy*p-g.lnormx*r;a+=(p*p*p-t*t*t)/(3*(p-t))*n*g.length*x.fluidAngularDrag}1>l&&(l=0>l?0:l,n=e.x,e=e.y,p=l,n+=h*p,e+=k*p,e=g.lnormy*n-g.lnormx*e,h=g.lnormy*f.x-g.lnormx*f.y,a+=(h*h*h-e*e*e)/(3*(h-e))*x.fluidVacuumDrag*(1-l)*g.length*x.fluidAngularDrag);e=f;d=d.next}for(;;){d=this.lverts.begin();d=d.elem();b=b.elem();c+=b.length;f=d.x-e.x;g=d.y-e.y;a+=b.length*x.fluidAngularDragFriction*this.material.dynamicFriction*
b.lprojection*b.lprojection;h=-(e.y*b.lnormx-e.x*b.lnormy)/(g*b.lnormx-f*b.lnormy);0<h&&(k=1<h?1:h,l=e.x,n=e.y,p=k,l+=f*p,n+=g*p,p=b.lnormy*e.x-b.lnormx*e.y,l=b.lnormy*l-b.lnormx*n,a+=(l*l*l-p*p*p)/(3*(l-p))*k*b.length*x.fluidAngularDrag);1>h&&(h=0>h?0:h,k=e.x,e=e.y,l=h,k+=f*l,e+=g*l,e=b.lnormy*k-b.lnormx*e,d=b.lnormy*d.x-b.lnormx*d.y,a+=(d*d*d-e*e*e)/(3*(d-e))*x.fluidVacuumDrag*(1-h)*b.length*x.fluidAngularDrag);break}this.angDrag=a/(this.inertia*c)},__validate_localCOM:function(){if(null==this.lverts.begin().next)this.localCOMx=
this.lverts.front().x,this.localCOMy=this.lverts.front().y;else if(null==this.lverts.begin().next.next)this.localCOMx=this.lverts.front().x,this.localCOMy=this.lverts.front().y,this.localCOMx+=1*this.lverts.begin().next.elem().x,this.localCOMy+=1*this.lverts.begin().next.elem().y,this.localCOMx*=.5,this.localCOMy*=.5;else{var a=this.localCOMy=this.localCOMx=0,b=this.lverts.begin(),c=b.elem();b=b.next;var d=b.elem();for(b=b.next;null!=b;){var e=b.elem();a+=d.x*(e.y-c.y);c=e.y*d.x-e.x*d.y;this.localCOMx+=
(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next}b=this.lverts.begin();e=b.elem();a+=d.x*(e.y-c.y);c=e.y*d.x-e.x*d.y;this.localCOMx+=(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next;b=b.elem();a+=d.x*(b.y-c.y);c=b.y*d.x-b.x*d.y;this.localCOMx+=(d.x+b.x)*c;this.localCOMy+=(d.y+b.y)*c;a=1/(3*a);this.localCOMx*=a;this.localCOMy*=a}},__translate:function(a,b){for(var c=this.lverts.begin();null!=c;){var d=c.elem();d.x+=1*a;d.y+=1*b;c=c.next}this.invalidate_lverts()},__class__:Eh});var Ne=
function(){this.sweep=this.dynab=null;this.is_sweep=!1;this.space=null};k["zpp_nape.space.ZPP_Broadphase"]=Ne;Ne.__name__=["zpp_nape","space","ZPP_Broadphase"];Ne.prototype={space:null,is_sweep:null,sweep:null,dynab:null,insert:function(a){this.is_sweep?this.sweep.__insert(a):this.dynab.__insert(a)},remove:function(a){this.is_sweep?this.sweep.__remove(a):this.dynab.__remove(a)},sync:function(a){this.is_sweep?this.sweep.__sync(a):this.dynab.__sync(a)},broadphase:function(a,b){},clear:function(){},
__class__:Ne};var Ub=function(){this.synced=this.first_sync=!1;this.snext=null;this.moved=!1;this.next=this.mnext=null;this.height=0;this.parent=this.child1=this.child2=null;this.dyn=!1;this.aabb=this.shape=null;this.height=-1};k["zpp_nape.space.ZPP_AABBNode"]=Ub;Ub.__name__=["zpp_nape","space","ZPP_AABBNode"];Ub.prototype={aabb:null,shape:null,dyn:null,parent:null,child1:null,child2:null,height:null,next:null,alloc:function(){null==Yb.zpp_pool?this.aabb=new Yb:(this.aabb=Yb.zpp_pool,Yb.zpp_pool=
this.aabb.next,this.aabb.next=null);this.aabb.alloc();this.first_sync=this.synced=this.moved=!1},free:function(){this.height=-1;var a=this.aabb;a.free();a.next=Yb.zpp_pool;Yb.zpp_pool=a;this.mnext=this.snext=this.next=this.child1=this.child2=this.parent=null},mnext:null,moved:null,snext:null,synced:null,first_sync:null,isLeaf:function(){return null==this.child1},__class__:Ub};var eb=function(){this.arb=this.next=null;this.id=this.di=0;this.first=this.sleeping=!1;this.n1=this.n2=null};k["zpp_nape.space.ZPP_AABBPair"]=
eb;eb.__name__=["zpp_nape","space","ZPP_AABBPair"];eb.prototype={n1:null,n2:null,first:null,sleeping:null,id:null,di:null,arb:null,next:null,alloc:function(){},free:function(){this.n1=this.n2=null;this.sleeping=!1},__class__:eb};var nc=function(){this.root=null};k["zpp_nape.space.ZPP_AABBTree"]=nc;nc.__name__=["zpp_nape","space","ZPP_AABBTree"];nc.prototype={root:null,clear:function(){if(null!=this.root){var a;this.root.next=null;for(a=this.root;null!=a;){var b=a;a=b.next;b.next=null;b.isLeaf()?(b.shape.node=
null,b.shape.removedFromSpace(),b.shape=null):(null!=b.child1&&(b.child1.next=a,a=b.child1),null!=b.child2&&(b.child2.next=a,a=b.child2));b.free();b.next=Ub.zpp_pool;Ub.zpp_pool=b}this.root=null}},inlined_insertLeaf:function(a){if(null==this.root)this.root=a,this.root.parent=null;else{for(var b=a.aabb,c=this.root;!c.isLeaf();){var d=c.child1,e=c.child2,f=c.aabb.perimeter();nc.tmpaabb.setCombine(c.aabb,b);var g=nc.tmpaabb.perimeter(),h=2*g;f=2*(g-f);nc.tmpaabb.setCombine(b,d.aabb);d.isLeaf()?g=nc.tmpaabb.perimeter()+
f:(g=d.aabb.perimeter(),g=nc.tmpaabb.perimeter()-g+f);nc.tmpaabb.setCombine(b,e.aabb);if(e.isLeaf())f=nc.tmpaabb.perimeter()+f;else{var k=e.aabb.perimeter();f=nc.tmpaabb.perimeter()-k+f}if(h<g&&h<f)break;else c=g<f?d:e}d=c.parent;null==Ub.zpp_pool?e=new Ub:(e=Ub.zpp_pool,Ub.zpp_pool=e.next,e.next=null);e.alloc();e.parent=d;e.aabb.setCombine(b,c.aabb);e.height=c.height+1;null!=d?(d.child1==c?d.child1=e:d.child2=e,e.child1=c,e.child2=a,c.parent=e,a.parent=e):(e.child1=c,e.child2=a,c.parent=e,this.root=
a.parent=e);for(c=a.parent;null!=c;)c=this.balance(c),a=c.child1,b=c.child2,d=a.height,e=b.height,c.height=1+(d>e?d:e),c.aabb.setCombine(a.aabb,b.aabb),c=c.parent}},removeLeaf:function(a){this.inlined_removeLeaf(a)},inlined_removeLeaf:function(a){if(a==this.root)this.root=null;else{var b=a.parent,c=b.parent;a=b.child1==a?b.child2:b.child1;if(null!=c)for(c.child1==b?c.child1=a:c.child2=a,a.parent=c,b.free(),b.next=Ub.zpp_pool,Ub.zpp_pool=b,b=c;null!=b;)b=this.balance(b),a=b.child1,c=b.child2,b.aabb.setCombine(a.aabb,
c.aabb),a=a.height,c=c.height,b.height=1+(a>c?a:c),b=b.parent;else this.root=a,a.parent=null,b.free(),b.next=Ub.zpp_pool,Ub.zpp_pool=b}},balance:function(a){if(a.isLeaf()||2>a.height)return a;var b=a.child1,c=a.child2,d=c.height-b.height;if(1<d){d=c.child1;var e=c.child2;c.child1=a;c.parent=a.parent;a.parent=c;null!=c.parent?c.parent.child1==a?c.parent.child1=c:c.parent.child2=c:this.root=c;d.height>e.height?(c.child2=d,a.child2=e,e.parent=a,a.aabb.setCombine(b.aabb,e.aabb),c.aabb.setCombine(a.aabb,
d.aabb),b=b.height,e=e.height,a.height=1+(b>e?b:e),a=a.height,b=d.height):(c.child2=e,a.child2=d,d.parent=a,a.aabb.setCombine(b.aabb,d.aabb),c.aabb.setCombine(a.aabb,e.aabb),b=b.height,d=d.height,a.height=1+(b>d?b:d),a=a.height,b=e.height);c.height=1+(a>b?a:b);return c}return-1>d?(d=b.child1,e=b.child2,b.child1=a,b.parent=a.parent,a.parent=b,null!=b.parent?b.parent.child1==a?b.parent.child1=b:b.parent.child2=b:this.root=b,d.height>e.height?(b.child2=d,a.child1=e,e.parent=a,a.aabb.setCombine(c.aabb,
e.aabb),b.aabb.setCombine(a.aabb,d.aabb),c=c.height,e=e.height,a.height=1+(c>e?c:e),a=a.height,c=d.height):(b.child2=e,a.child1=d,d.parent=a,a.aabb.setCombine(c.aabb,d.aabb),b.aabb.setCombine(a.aabb,e.aabb),c=c.height,d=d.height,a.height=1+(c>d?c:d),a=a.height,c=e.height),b.height=1+(a>c?a:c),b):a},__class__:nc};var mi=function(a){this.stree=this.dtree=this.pairs=this.syncs=this.moves=null;Ne.call(this);this.space=a;this.is_sweep=!1;this.dynab=this;this.stree=new nc;this.dtree=new nc};k["zpp_nape.space.ZPP_DynAABBPhase"]=
mi;mi.__name__=["zpp_nape","space","ZPP_DynAABBPhase"];mi.__super__=Ne;mi.prototype=w(Ne.prototype,{stree:null,dtree:null,pairs:null,syncs:null,moves:null,dyn:function(a){return a.body.isStatic()?!1:!a.body.component.sleeping},__insert:function(a){if(null==Ub.zpp_pool)var b=new Ub;else b=Ub.zpp_pool,Ub.zpp_pool=b.next,b.next=null;b.alloc();b.shape=a;a.node=b;b.synced=!0;b.first_sync=!0;b.snext=this.syncs;this.syncs=b},__remove:function(a){var b=a.node;b.first_sync||(b.dyn?this.dtree.removeLeaf(b):
this.stree.removeLeaf(b));a.node=null;if(b.synced){for(var c=null,d=this.syncs;null!=d&&d!=b;)c=d,d=d.snext;null==c?this.syncs=d.snext:c.snext=d.snext;d.snext=null;b.synced=!1}if(b.moved){c=null;for(d=this.moves;null!=d&&d!=b;)c=d,d=d.mnext;null==c?this.moves=d.mnext:c.mnext=d.mnext;d.mnext=null;b.moved=!1}c=null;for(var e=this.pairs;null!=e;)d=e.next,e.n1==b||e.n2==b?(null==c?this.pairs=d:c.next=d,null!=e.arb&&(e.arb.pair=null),e.arb=null,e.n1.shape.pairs.remove(e),e.n2.shape.pairs.remove(e),e.free(),
e.next=eb.zpp_pool,eb.zpp_pool=e):c=e,e=d;for(;!a.pairs.empty();)c=a.pairs.pop_unsafe(),c.n1==b?c.n2.shape.pairs.remove(c):c.n1.shape.pairs.remove(c),null!=c.arb&&(c.arb.pair=null),c.arb=null,c.free(),c.next=eb.zpp_pool,eb.zpp_pool=c;b.free();b.next=Ub.zpp_pool;Ub.zpp_pool=b},__sync:function(a){var b=a.node;b.synced||(this.space.continuous||a.validate_aabb(),b.dyn==this.dyn(a)&&b.aabb.contains(a.aabb)||(b.synced=!0,b.snext=this.syncs,this.syncs=b))},broadphase:function(a,b){for(var c=this.syncs;null!=
c;){var d=c.shape;c.first_sync?c.first_sync=!1:(c.dyn?this.dtree:this.stree).inlined_removeLeaf(c);var e=c.aabb;a.continuous||d.validate_aabb();e.setExpand(d.aabb,3);((c.dyn=this.dyn(d))?this.dtree:this.stree).inlined_insertLeaf(c);c.synced=!1;c=c.snext}for(;null!=this.syncs;)if(c=this.syncs,this.syncs=c.snext,c.snext=null,!c.moved&&(c.moved=!1,d=c.shape,!d.body.component.sleeping)){e=c.aabb;var f=null;null!=this.dtree.root&&(this.dtree.root.next=f,f=this.dtree.root);for(;null!=f;){var g=f;f=g.next;
g.next=null;if(g!=c)if(g.isLeaf()){var h=g.shape;if(!(h.body==d.body||h.body.isStatic()&&d.body.isStatic())&&e.intersect(g.aabb)){if(d.id<h.id){var k=d.id;var l=h.id}else k=h.id,l=d.id;for(var n=null,p=(d.pairs.length<h.pairs.length?d:h).pairs.begin();null!=p;){var r=p.elem();if(r.id==k&&r.di==l){n=r;break}p=p.next}null!=n?n.sleeping&&(n.sleeping=!1,n.next=this.pairs,this.pairs=n,n.first=!0):(null==eb.zpp_pool?n=new eb:(n=eb.zpp_pool,eb.zpp_pool=n.next,n.next=null),n.alloc(),n.n1=c,n.n2=g,n.id=k,
n.di=l,n.next=this.pairs,this.pairs=n,n.first=!0,d.pairs.inlined_add(n),h.pairs.inlined_add(n))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=f,f=g.child1),null!=g.child2&&(g.child2.next=f,f=g.child2))}null!=this.stree.root&&(this.stree.root.next=f,f=this.stree.root);for(;null!=f;)if(g=f,f=g.next,g.next=null,g!=c)if(g.isLeaf()){if(h=g.shape,!(h.body==d.body||h.body.isStatic()&&d.body.isStatic())&&e.intersect(g.aabb)){d.id<h.id?(k=d.id,l=h.id):(k=h.id,l=d.id);n=null;for(p=(d.pairs.length<
h.pairs.length?d:h).pairs.begin();null!=p;){r=p.elem();if(r.id==k&&r.di==l){n=r;break}p=p.next}null!=n?n.sleeping&&(n.sleeping=!1,n.next=this.pairs,this.pairs=n,n.first=!0):(null==eb.zpp_pool?n=new eb:(n=eb.zpp_pool,eb.zpp_pool=n.next,n.next=null),n.alloc(),n.n1=c,n.n2=g,n.id=k,n.di=l,n.next=this.pairs,this.pairs=n,n.first=!0,d.pairs.inlined_add(n),h.pairs.inlined_add(n))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=f,f=g.child1),null!=g.child2&&(g.child2.next=f,f=g.child2))}for(;null!=
this.moves;)if(c=this.moves,this.moves=c.mnext,c.mnext=null,c.moved=!1,d=c.shape,!d.body.component.sleeping){e=c.aabb;f=null;null!=this.dtree.root&&(this.dtree.root.next=f,f=this.dtree.root);for(;null!=f;)if(g=f,f=g.next,g.next=null,g!=c)if(g.isLeaf()){if(h=g.shape,!(h.body==d.body||h.body.isStatic()&&d.body.isStatic())&&e.intersect(g.aabb)){d.id<h.id?(k=d.id,l=h.id):(k=h.id,l=d.id);n=null;for(p=(d.pairs.length<h.pairs.length?d:h).pairs.begin();null!=p;){r=p.elem();if(r.id==k&&r.di==l){n=r;break}p=
p.next}null!=n?n.sleeping&&(n.sleeping=!1,n.next=this.pairs,this.pairs=n,n.first=!0):(null==eb.zpp_pool?n=new eb:(n=eb.zpp_pool,eb.zpp_pool=n.next,n.next=null),n.alloc(),n.n1=c,n.n2=g,n.id=k,n.di=l,n.next=this.pairs,this.pairs=n,n.first=!0,d.pairs.inlined_add(n),h.pairs.inlined_add(n))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=f,f=g.child1),null!=g.child2&&(g.child2.next=f,f=g.child2));null!=this.stree.root&&(this.stree.root.next=f,f=this.stree.root);for(;null!=f;)if(g=f,f=g.next,
g.next=null,g!=c)if(g.isLeaf()){if(h=g.shape,!(h.body==d.body||h.body.isStatic()&&d.body.isStatic())&&e.intersect(g.aabb)){d.id<h.id?(k=d.id,l=h.id):(k=h.id,l=d.id);n=null;for(p=(d.pairs.length<h.pairs.length?d:h).pairs.begin();null!=p;){r=p.elem();if(r.id==k&&r.di==l){n=r;break}p=p.next}null!=n?n.sleeping&&(n.sleeping=!1,n.next=this.pairs,this.pairs=n,n.first=!0):(null==eb.zpp_pool?n=new eb:(n=eb.zpp_pool,eb.zpp_pool=n.next,n.next=null),n.alloc(),n.n1=c,n.n2=g,n.id=k,n.di=l,n.next=this.pairs,this.pairs=
n,n.first=!0,d.pairs.inlined_add(n),h.pairs.inlined_add(n))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=f,f=g.child1),null!=g.child2&&(g.child2.next=f,f=g.child2))}c=null;for(d=this.pairs;null!=d;)d.first||d.n1.aabb.intersect(d.n2.aabb)?(e=d.n1.shape,f=e.body,g=d.n2.shape,h=g.body,d.first||!f.component.sleeping&&!f.isStatic()||!h.component.sleeping&&!h.isStatic()?(d.first=!1,e.aabb.intersect(g.aabb)&&(c=d.arb,d.arb=b?a.narrowPhase(e,g,!f.isDynamic()||!h.isDynamic(),d.arb,!1):a.continuousEvent(e,
g,!f.isDynamic()||!h.isDynamic(),d.arb,!1),null==d.arb?null!=c&&(c.pair=null):d.arb.pair=d),c=d):(d.sleeping=!0,null==c?this.pairs=d.next:c.next=d.next),d=d.next):(null==c?this.pairs=d.next:c.next=d.next,d.n1.shape.pairs.inlined_remove(d),d.n2.shape.pairs.inlined_remove(d),e=d.next,null!=d.arb&&(d.arb.pair=null),d.arb=null,d.free(),d.next=eb.zpp_pool,eb.zpp_pool=d,d=e)},clear:function(){for(;null!=this.syncs;){var a=this.syncs.snext;this.syncs.snext=null;this.syncs.first_sync&&(this.syncs.shape.node=
null,this.syncs.shape.removedFromSpace(),this.syncs.shape=null);this.syncs=a}for(;null!=this.moves;)a=this.moves.mnext,this.moves.mnext=null,this.moves.first_sync&&(this.moves.shape.node=null,this.moves.shape.removedFromSpace(),this.moves.shape=null),this.moves=a;for(;null!=this.pairs;){a=this.pairs.next;null!=this.pairs.arb&&(this.pairs.arb.pair=null);this.pairs.arb=null;this.pairs.n1.shape.pairs.inlined_remove(this.pairs);this.pairs.n2.shape.pairs.inlined_remove(this.pairs);var b=this.pairs;b.free();
b.next=eb.zpp_pool;eb.zpp_pool=b;this.pairs=a}this.dtree.clear();this.stree.clear()},__class__:mi});var Mb=function(){this.waket=0;this.sleep=!1;this.comps=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.comps=new hk};k["zpp_nape.space.ZPP_Island"]=Mb;Mb.__name__=["zpp_nape","space","ZPP_Island"];Mb.prototype={next:null,elem:function(){return this},begin:function(){return this.next},_inuse:null,modified:null,pushmod:null,length:null,inlined_add:function(a){a._inuse=
!0;a.next=this.begin();this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.next=a.next;a.elem()._inuse=!1;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},comps:null,sleep:null,waket:null,free:function(){},alloc:function(){this.waket=0},__class__:Mb};
var Jc=function(){this.woken=!1;this.waket=0;this.sleeping=!1;this.body=this.constraint=this.island=null;this.isBody=!1;this.rank=0;this.next=this.parent=null;this.reset();this.woken=!1};k["zpp_nape.space.ZPP_Component"]=Jc;Jc.__name__=["zpp_nape","space","ZPP_Component"];Jc.prototype={next:null,parent:null,rank:null,isBody:null,body:null,constraint:null,island:null,sleeping:null,waket:null,woken:null,free:function(){this.constraint=this.body=null},alloc:function(){},reset:function(){this.sleeping=
!1;this.island=null;this.parent=this;this.rank=0},__class__:Jc};var Vb=function(){this.freed=this.lazydel=!1;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.int1=this.int2=this.next=null;this.id=this.di=0;this.arbiters=new zg};k["zpp_nape.space.ZPP_CallbackSet"]=Vb;Vb.__name__=["zpp_nape","space","ZPP_CallbackSet"];Vb.get=function(a,b){if(null==Vb.zpp_pool)var c=new Vb;else c=Vb.zpp_pool,Vb.zpp_pool=c.next,c.next=null;c.alloc();a.id<b.id?(c.int1=a,c.int2=b):(c.int1=b,c.int2=a);c.id=c.int1.id;
c.di=c.int2.id;return c};Vb.prototype={id:null,di:null,int1:null,int2:null,arbiters:null,COLLISIONstate:null,COLLISIONstamp:null,SENSORstate:null,SENSORstamp:null,FLUIDstate:null,FLUIDstamp:null,next:null,elem:function(){return this},begin:function(){return this.next},_inuse:null,modified:null,pushmod:null,length:null,inlined_add:function(a){a._inuse=!0;a.next=this.begin();this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();
this.next=a.next;a.elem()._inuse=!1;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.next=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);c.elem()._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==
this.begin()},front:function(){return this.begin().elem()},freed:null,lazydel:null,free:function(){this.int1=this.int2=null;this.id=this.di=-1;this.freed=!0},alloc:function(){this.lazydel=this.freed=!1;this.COLLISIONstate=1;this.COLLISIONstamp=0;this.SENSORstate=1;this.SENSORstamp=0;this.FLUIDstate=1;this.FLUIDstamp=0},add_arb:function(a){if(this.arbiters.inlined_has(a))return!1;this.arbiters.inlined_add(a);return!0},remove_arb:function(a){this.arbiters.inlined_remove(a)},empty_arb:function(a){var b=
!0;for(var c=this.arbiters.begin();null!=c;)if(0==(c.elem().type&a))c=c.next;else{b=!1;break}return b},really_empty:function(){return this.arbiters.empty()},sleeping:function(){var a=!0;for(var b=this.arbiters.begin();null!=b;)if(b.elem().sleeping)b=b.next;else{a=!1;break}return a},__class__:Vb};var ik=function(a){this.cbsets=this.space=null;null==Xc.zpp_pool?this.cbsets=new Xc:(this.cbsets=Xc.zpp_pool,Xc.zpp_pool=this.cbsets.next,this.cbsets.next=null);this.cbsets.alloc();this.cbsets.lt=Ba.setlt;
this.space=a};k["zpp_nape.space.ZPP_CbSetManager"]=ik;ik.__name__=["zpp_nape","space","ZPP_CbSetManager"];ik.prototype={cbsets:null,space:null,get:function(a){if(a.empty())return null;if(null==Ba.zpp_pool)var b=new Ba;else b=Ba.zpp_pool,Ba.zpp_pool=b.next,b.next=null;b.alloc();var c=b.cbTypes;b.cbTypes=a;var d=this.cbsets.find_weak(b);null!=d?a=d.data:(a=Ba.get(a),this.cbsets.insert(a),a.manager=this);b.cbTypes=c;b.free();b.next=Ba.zpp_pool;Ba.zpp_pool=b;return a},remove:function(a){for(this.cbsets.remove(a);!a.cbpairs.empty();){var b=
a.cbpairs.pop_unsafe();b.a!=b.b&&(a==b.a?b.b.cbpairs.remove(b):b.a.cbpairs.remove(b));b.free();b.next=Sb.zpp_pool;Sb.zpp_pool=b}a.manager=null},clear:function(){},validate:function(){if(!this.cbsets.empty()){for(var a=this.cbsets.parent;null!=a.prev;)a=a.prev;for(;null!=a;)if(a.data.validate(),null!=a.next)for(a=a.next;null!=a.prev;)a=a.prev;else{for(;null!=a.parent&&a==a.parent.next;)a=a.parent;a=a.parent}}},pair:function(a,b){for(var c=null,d=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).begin();null!=
d;){var e=d.elem();if(e.a==a&&e.b==b||e.a==b&&e.b==a){c=e;break}d=d.next}null==c&&(c=Sb.get(a,b),a.cbpairs.add(c),b!=a&&b.cbpairs.add(c));c.validate();return c},valid_listener:function(a){return a.space==this.space},__class__:ik};var Cj=function(a,b){this.precb=this.prelisteners=null;this.continuous=!1;this.toiEvents=null;this.pre_dt=0;this.c_arbiters_true=this.c_arbiters_false=this.f_arbiters=this.s_arbiters=this.live=this.wrap_live=this.live_constraints=this.wrap_livecon=this.staticsleep=this.islands=
this.listeners=this.wrap_listeners=this.callbacks=this.callbackset_list=this.cbsets=null;this.sortcontacts=!1;this.time=0;this.midstep=!1;this.stamp=0;this.bodies=this.wrap_bodies=this.compounds=this.wrap_compounds=this.constraints=this.wrap_constraints=this.kinematics=this.bphase=this.__static=null;this.gravityx=this.gravityy=0;this.outer=null;this.toiEvents=new jk;this.global_ang_drag=this.global_lin_drag=.015;this.precb=new rh;this.precb.zpp_inner=new Wd;this.sortcontacts=!0;this.pre_dt=0;null==
b||b==wd.get_DYNAMIC_AABB_TREE()?this.bphase=new mi(this):b==wd.get_SWEEP_AND_PRUNE()&&(this.bphase=new ni(this));this.time=0;null!=a?(this.gravityx=a.x,this.gravityy=a.y):this.gravityy=this.gravityx=0;this.bodies=new se;this.wrap_bodies=af.get(this.bodies);this.wrap_bodies.zpp_inner.adder=l(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=l(this,this.bodies_subber);this.compounds=new ig;this.wrap_compounds=qf.get(this.compounds);this.wrap_compounds.zpp_inner.adder=l(this,this.compounds_adder);
this.wrap_compounds.zpp_inner.subber=l(this,this.compounds_subber);this.kinematics=new se;this.c_arbiters_true=new oi;this.c_arbiters_false=new oi;this.f_arbiters=new kk;this.s_arbiters=new lk;this.islands=new Mb;this.live=new se;this.wrap_live=af.get(this.live,!0);this.staticsleep=new se;this.constraints=new re;this.wrap_constraints=Gd.get(this.constraints);this.wrap_constraints.zpp_inner.adder=l(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=l(this,this.constraints_subber);
this.live_constraints=new re;this.wrap_livecon=Gd.get(this.live_constraints,!0);this.__static=pf.__static();this.__static.zpp_inner.space=this;this.callbacks=new Wd;this.midstep=!1;this.listeners=new pi;this.wrap_listeners=Ze.get(this.listeners);this.wrap_listeners.zpp_inner.adder=l(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=l(this,this.listeners_subber);this.callbackset_list=new Vb;this.mrca1=new Xd;this.mrca2=new Xd;this.prelisteners=new Nf;this.cbsets=new ik(this)};k["zpp_nape.space.ZPP_Space"]=
Cj;Cj.__name__=["zpp_nape","space","ZPP_Space"];Cj.prototype={outer:null,gravityx:null,gravityy:null,bodies:null,wrap_bodies:null,compounds:null,wrap_compounds:null,constraints:null,wrap_constraints:null,kinematics:null,bphase:null,__static:null,global_lin_drag:null,global_ang_drag:null,stamp:null,midstep:null,time:null,sortcontacts:null,c_arbiters_true:null,c_arbiters_false:null,f_arbiters:null,s_arbiters:null,live:null,wrap_live:null,live_constraints:null,wrap_livecon:null,staticsleep:null,islands:null,
listeners:null,wrap_listeners:null,callbacks:null,callbackset_list:null,cbsets:null,clear:function(){for(;!this.listeners.empty();){var a=this.listeners.pop_unsafe();this.remListener(a)}for(;!this.callbackset_list.empty();)a=this.callbackset_list.pop_unsafe(),a.arbiters.clear(),a.free(),a.next=Vb.zpp_pool,Vb.zpp_pool=a;for(;!this.c_arbiters_true.empty();)this.c_arbiters_true.pop_unsafe().retire();for(;!this.c_arbiters_false.empty();)this.c_arbiters_false.pop_unsafe().retire();for(;!this.s_arbiters.empty();)this.s_arbiters.pop_unsafe().retire();
for(;!this.f_arbiters.empty();)this.f_arbiters.pop_unsafe().retire();for(this.bphase.clear();!this.bodies.empty();){a=this.bodies.pop_unsafe();if(null!=a.component){var b=a.component.island;if(null!=b){for(;!b.comps.empty();)b.comps.pop_unsafe().reset();b.free();b.next=Mb.zpp_pool;Mb.zpp_pool=b}}a.removedFromSpace();a.space=null}for(;!this.constraints.empty();){a=this.constraints.pop_unsafe();if(null!=a.component&&(b=a.component.island,null!=b)){for(;!b.comps.empty();)b.comps.pop_unsafe().reset();
b.free();b.next=Mb.zpp_pool;Mb.zpp_pool=b}a.removedFromSpace();a.space=null}this.kinematics.clear();for(a=new ig;!this.compounds.empty();)b=this.compounds.pop_unsafe(),a.add(b);for(;!a.empty();){b=a.pop_unsafe();b.removedFromSpace();b.space=null;for(var c=b.bodies.begin();null!=c;){var d=c.elem();if(null!=d.component){var e=d.component.island;if(null!=e){for(;!e.comps.empty();)e.comps.pop_unsafe().reset();e.free();e.next=Mb.zpp_pool;Mb.zpp_pool=e}}d.removedFromSpace();d.space=null;c=c.next}for(c=
b.constraints.begin();null!=c;){d=c.elem();if(null!=d.component&&(e=d.component.island,null!=e)){for(;!e.comps.empty();)e.comps.pop_unsafe().reset();e.free();e.next=Mb.zpp_pool;Mb.zpp_pool=e}d.removedFromSpace();d.space=null;c=c.next}for(b=b.compounds.begin();null!=b;)c=b.elem(),a.add(c),b=b.next}this.staticsleep.clear();this.live.clear();this.live_constraints.clear();this.time=this.stamp=0;this.mrca1.clear();this.mrca2.clear();this.prelisteners.clear();this.cbsets.clear()},bodies_adder:function(a){return a.zpp_inner.space!=
this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.get_bodies().remove(a),this.addBody(a.zpp_inner),!0):!1},bodies_subber:function(a){this.remBody(a.zpp_inner)},compounds_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),this.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){this.remCompound(a.zpp_inner)},constraints_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.get_constraints().remove(a),
this.addConstraint(a.zpp_inner),!0):!1},constraints_subber:function(a){this.remConstraint(a.zpp_inner)},listeners_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.get_listeners().remove(a),this.addListener(a.zpp_inner),!0):!1},listeners_subber:function(a){this.remListener(a.zpp_inner)},revoke_listener:function(a){},unrevoke_listener:function(a){},addListener:function(a){a.space=this;a.addedToSpace();null!=a.interaction&&this.unrevoke_listener(a.interaction)},
remListener:function(a){null!=a.interaction&&this.revoke_listener(a.interaction);a.removedFromSpace();a.space=null},add_callbackset:function(a){a.int1.cbsets.inlined_add(a);a.int2.cbsets.inlined_add(a);this.callbackset_list.inlined_add(a)},remove_callbackset:function(a){a.lazydel=!0;a.int1.cbsets.inlined_remove(a);a.int2.cbsets.inlined_remove(a)},transmitType:function(a,b){a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.isKinematic()&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,
!1));2==a.type?this.live.remove(a):3==a.type?(this.kinematics.remove(a),this.staticsleep.remove(a)):1==a.type&&this.staticsleep.remove(a);a.type=b;3==a.type&&this.kinematics.add(a);1==a.type&&this.static_validation(a);a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.isKinematic()&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0))},added_shape:function(a,b){null==b&&(b=!1);b||(b=a.body,b.world||(b.component.waket=this.stamp+(this.midstep?0:
1),b.isKinematic()&&(b.kinematicDelaySleep=!0),b.component.sleeping&&this.really_wake(b,!1)));this.bphase.insert(a);a.addedToSpace()},removed_shape:function(a,b){null==b&&(b=!1);var c=this,d=a.body;b||d.wake();b=null;for(var e=d.arbiters.begin();null!=e;){var f=[e.elem()];if(f[0].ws1==a||f[0].ws2==a){if(0!=f[0].present)for(this.MRCA_chains(f[0].ws1,f[0].ws2),e=this.mrca1.begin();null!=e;){for(var g=e.elem(),h=this.mrca2.begin();null!=h;){var k=h.elem(),l=g.cbSet,n=k.cbSet;l.validate();n.validate();
Ba.empty_intersection(l,n)||(k=[Ha.get(g,k)],k[0].remove_arb(f[0]),f[0].present--,Ba.find_all(l,n,1,function(a,b){return function(d){if(0!=(d.itype&b[0].type)&&a[0].empty_arb(d.itype)){var e=c.push_callback(d);e.event=1;Ha.int_callback(a[0],d,e);e.set=a[0]}}}(k,f)),k[0].really_empty()&&this.remove_callbackset(k[0]));h=h.next}e=e.next}f[0].b1!=d&&f[0].b1.isDynamic()&&(e=f[0].b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&
this.really_wake(e,!1)));f[0].b2!=d&&f[0].b2.isDynamic()&&(e=f[0].b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1)));f[0].lazyRetire(this,d);e=d.arbiters.erase(b)}else b=e,e=e.next}this.bphase.remove(a);a.removedFromSpace()},addConstraint:function(a){a.space=this;a.addedToSpace();a.active&&(a.component.sleeping=!0,this.wake_constraint(a,!0))},remConstraint:function(a){a.active&&(this.wake_constraint(a,
!0),this.live_constraints.remove(a));a.removedFromSpace();a.space=null},addCompound:function(a){a.space=this;a.addedToSpace();for(var b=a.bodies.begin();null!=b;){var c=b.elem();this.addBody(c);b=b.next}for(b=a.constraints.begin();null!=b;)c=b.elem(),this.addConstraint(c),b=b.next;for(a=a.compounds.begin();null!=a;)b=a.elem(),this.addCompound(b),a=a.next},remCompound:function(a){for(var b=a.bodies.begin();null!=b;){var c=b.elem();this.remBody(c);b=b.next}for(b=a.constraints.begin();null!=b;)c=b.elem(),
this.remConstraint(c),b=b.next;for(b=a.compounds.begin();null!=b;)c=b.elem(),this.remCompound(c),b=b.next;a.removedFromSpace();a.space=null},addBody:function(a,b){null==b&&(b=-1);a.space=this;a.addedToSpace();a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.isKinematic()&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0));for(var c=a.shapes.begin();null!=c;){var d=c.elem();this.added_shape(d,!0);c=c.next}a.isStatic()?this.static_validation(a):
a.isDynamic()||3!=b&&this.kinematics.add(a)},remBody:function(a,b){null==b&&(b=-1);a.isStatic()?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.isKinematic()&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a)):a.isDynamic()?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.isKinematic()&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.live.remove(a)):(3!=b&&this.kinematics.remove(a),a.world||(a.component.waket=
this.stamp+(this.midstep?0:1),a.isKinematic()&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a));for(b=a.shapes.begin();null!=b;){var c=b.elem();this.removed_shape(c,!0);b=b.next}a.removedFromSpace();a.space=null},push_callback:function(a){if(null==Wd.zpp_pool)var b=new Wd;else b=Wd.zpp_pool,Wd.zpp_pool=b.next,b.next=null;b.alloc();this.callbacks.push(b);b.listener=a;return b},pre_dt:null,step:function(a,b,c){var d=this;this.time+=a;this.pre_dt=a;
this.midstep=!0;this.stamp++;this.validation();this.bphase.broadphase(this,!0);this.prestep(a);if(this.sortcontacts){var e=this.c_arbiters_false;if(!e.empty()&&null!=e.begin().next){for(var f=e.begin(),g=null,h=null,k=null,l=null,n=1,p,r,t;;){p=0;h=f;for(g=f=null;null!=h;){++p;k=h;r=0;for(t=n;null!=k&&r<n;)++r,k=k.next;for(;0<r||0<t&&null!=k;)0==r?(l=k,k=k.next,--t):0==t||null==k?(l=h,h=h.next,--r):(h.elem().active&&k.elem().active?h.elem().oc1.dist<k.elem().oc1.dist:1)?(l=h,h=h.next,--r):(l=k,k=
k.next,--t),null!=g?g.next=l:f=l,g=l;h=k}g.next=null;n<<=1;if(!(1<p))break}e.setbegin(f)}}this.updateVel(a);this.warmStart();this.iterateVel(b);for(b=this.kinematics.begin();null!=b;)e=b.elem(),e.pre_posx=e.posx,e.pre_posy=e.posy,e.pre_rot=e.rot,b=b.next;for(b=this.live.begin();null!=b;)e=b.elem(),e.pre_posx=e.posx,e.pre_posy=e.posy,e.pre_rot=e.rot,b=b.next;this.updatePos(a);this.continuous=!0;this.continuousCollisions(a);this.continuous=!1;this.iteratePos(c);for(c=this.kinematics.begin();null!=c;)b=
c.elem(),e=b.pre_rot!=b.rot,b.posx==b.pre_posx&&b.posy==b.pre_posy||b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;for(c=this.live.begin();null!=c;)b=c.elem(),e=b.pre_rot!=b.rot,b.posx==b.pre_posx&&b.posy==b.pre_posy||b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;c=null;for(b=this.staticsleep.begin();null!=b;)e=b.elem(),!e.isKinematic()||0==e.velx&&0==e.vely&&0==e.angvel?e.kinematicDelaySleep?(e.kinematicDelaySleep=!1,b=b.next):(e.component.sleeping=!0,b=this.staticsleep.inlined_erase(c)):
(c=b,b=b.next);this.doForests(a);this.sleepArbiters();this.midstep=!1;c=null;for(a=this.callbackset_list.begin();null!=a;)b=[a.elem()],b[0].really_empty()?(a=this.callbackset_list.inlined_erase(c),b=b[0],b.free(),b.next=Vb.zpp_pool,Vb.zpp_pool=b):(c=[b[0].sleeping()],Ba.find_all(b[0].int1.cbSet,b[0].int2.cbSet,6,function(a,b){return function(c){if((!a[0]||c.allowSleepingCallbacks)&&!b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=6;Ha.int_callback(b[0],c,e);e.set=b[0]}}}(c,b)),c=a,a=a.next);
for(;!this.callbacks.empty();)a=this.callbacks.pop(),0==a.listener.type?a.listener.body.handler(a.wrapper_body()):1==a.listener.type?a.listener.constraint.handler(a.wrapper_con()):2==a.listener.type&&a.listener.interaction.handleri(a.wrapper_int()),a.free(),a.next=Wd.zpp_pool,Wd.zpp_pool=a},toiEvents:null,continuousCollisions:function(a){var b=2*Math.PI/a;this.bphase.broadphase(this,!1);for(var c=0;1>c&&!this.toiEvents.empty();){var d=null;c=2;for(var e=!1,f=null,g=null,h=this.toiEvents.begin();null!=
h;){var k=h.elem(),l=k.s1.body,n=k.s2.body;if(l.sweepFrozen&&n.sweepFrozen)if(0!=k.toi&&W.testCollide_safe(k.s1,k.s2))k.toi=0;else{h=this.toiEvents.erase(g);k.free();k.next=Tb.zpp_pool;Tb.zpp_pool=k;continue}if(k.frozen1!=l.sweepFrozen||k.frozen2!=n.sweepFrozen)if(k.kinematic){h=this.toiEvents.erase(g);k.free();k.next=Tb.zpp_pool;Tb.zpp_pool=k;continue}else if(k.frozen1=l.sweepFrozen,k.frozen2=n.sweepFrozen,k.frozen1&&(l=k.s1,k.s1=k.s2,k.s2=l,k.frozen1=!1,k.frozen2=!0),Dd.staticSweep(k,a,0,x.collisionSlopCCD),
0>k.toi){h=this.toiEvents.erase(g);k.free();k.next=Tb.zpp_pool;Tb.zpp_pool=k;continue}0<=k.toi&&(k.toi<c||!e&&k.kinematic)&&(d=k,c=k.toi,e=k.kinematic,f=g);g=h;h=h.next}if(null==d)break;this.toiEvents.erase(f);c=d.toi;f=d.s1.body;e=d.s2.body;f.sweepFrozen||(f.sweepIntegrate(c*a),f.sweepValidate(d.s1));e.sweepFrozen||(e.sweepIntegrate(c*a),e.sweepValidate(d.s2));g=this.narrowPhase(d.s1,d.s2,!0,d.arbiter,!0);null==g?null!=d.arbiter&&null!=d.arbiter.pair&&(d.arbiter.pair.arb=null,d.arbiter.pair=null):
!this.presteparb(g,a,!0)&&g.type==Ea.COL&&g.acting()&&(g.colarb.warmStart(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),f.sweep_angvel=f.angvel%b,e.sweep_angvel=e.angvel%b);null!=g&&g.acting()&&g.type==Ea.COL&&(f.sweepFrozen||f.isKinematic()||(f.sweepFrozen=!0,d.failed?f.angvel=f.sweep_angvel=0:d.slipped?(g=f,g.sweep_angvel*=x.angularCCDSlipScale,f.angvel=g.sweep_angvel):f.angvel=f.sweep_angvel),e.sweepFrozen||e.isKinematic()||(e.sweepFrozen=
!0,d.failed?e.angvel=e.sweep_angvel=0:d.slipped?(f=e,f.sweep_angvel*=x.angularCCDSlipScale,e.angvel=f.sweep_angvel):e.angvel=e.sweep_angvel));d.free();d.next=Tb.zpp_pool;Tb.zpp_pool=d}for(;!this.toiEvents.empty();)b=this.toiEvents.pop_unsafe(),b.free(),b.next=Tb.zpp_pool,Tb.zpp_pool=b;for(b=this.kinematics.begin();null!=b;)d=b.elem(),d.sweepIntegrate(a),d.sweepTime=0,b=b.next;for(b=this.live.begin();null!=b;)d=b.elem(),d.sweepFrozen||d.sweepIntegrate(a),d.sweepTime=0,b=b.next},continuousEvent:function(a,
b,c,d,e){if(a.body.sweepFrozen&&b.body.sweepFrozen||a.body.disableCCD||b.body.disableCCD||null!=d&&null==d.colarb||0>=this.interactionType(a,b,a.body,b.body))return d;var f=a.body,g=b.body;if(c||f.bullet||g.bullet)null==Tb.zpp_pool?e=new Tb:(e=Tb.zpp_pool,Tb.zpp_pool=e.next,e.next=null),e.alloc(),f=f.isKinematic()||g.isKinematic(),c&&!f?(a.body.isDynamic()?(e.s1=a,e.s2=b):(e.s2=a,e.s1=b),e.kinematic=!1,Dd.staticSweep(e,this.pre_dt,0,x.collisionSlopCCD)):(e.s1=a,e.s2=b,e.kinematic=f,e.s1.body.sweepFrozen||
e.s2.body.sweepFrozen?(e.s1.body.sweepFrozen&&(a=e.s1,e.s1=e.s2,e.s2=a,e.frozen1=!1,e.frozen2=!0),Dd.staticSweep(e,this.pre_dt,0,x.collisionSlopCCD)):Dd.dynamicSweep(e,this.pre_dt,0,x.collisionSlopCCD)),c&&0>e.toi||e.failed?(c=e,c.free(),c.next=Tb.zpp_pool,Tb.zpp_pool=c):(this.toiEvents.add(e),e.frozen1=e.s1.body.sweepFrozen,e.frozen2=e.s2.body.sweepFrozen,e.arbiter=null!=d?d.colarb:null);return d},bodyCbWake:function(a){if(a.isDynamic()&&null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.bodylisteners.begin();null!=
b;){var c=b.elem();2==c.event&&(c=this.push_callback(c),c.event=2,c.body=a);b=b.next}else a.component.woken=!0},bodyCbSleep:function(a){if(a.isDynamic()&&null!=a.cbSet)for(var b=a.cbSet.bodylisteners.begin();null!=b;){var c=b.elem();3==c.event&&(c=this.push_callback(c),c.event=3,c.body=a);b=b.next}},constraintCbWake:function(a){if(null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.conlisteners.begin();null!=b;){var c=b.elem();2==c.event&&(c=this.push_callback(c),c.event=2,c.constraint=a);b=b.next}else a.component.woken=
!0},constraintCbSleep:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.begin();null!=b;){var c=b.elem();3==c.event&&(c=this.push_callback(c),c.event=3,c.constraint=a);b=b.next}},constraintCbBreak:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.begin();null!=b;){var c=b.elem();4==c.event&&(c=this.push_callback(c),c.event=4,c.constraint=a);b=b.next}},nullListenerType:function(a,b){for(var c=new Xd,d=a.interactors.begin();null!=d;){var e=d.elem();c.add(e);d=d.next}if(a!=b)for(d=
b.interactors.begin();null!=d;)e=d.elem(),c.add(e),d=d.next;for(;!c.empty();)if(d=c.pop_unsafe(),d.isCompound()){d=d.icompound;for(e=d.bodies.begin();null!=e;){var f=e.elem();c.add(f);e=e.next}for(d=d.compounds.begin();null!=d;)e=d.elem(),c.add(e),d=d.next}else for(e=d.isBody()?d.ibody:d.ishape.body,d=d.isShape()?d.ishape:null,e=e.arbiters.begin();null!=e;){f=e.elem();if(0!=f.present&&(null==d||f.ws1==d||f.ws2==d))for(this.MRCA_chains(f.ws1,f.ws2),f=this.mrca1.begin();null!=f;){var g=f.elem();if(g.cbSet==
a||g.cbSet==b)for(var h=this.mrca2.begin();null!=h;){var k=h.elem();if(!(g.cbSet==a&&k.cbSet!=b||g.cbSet==b&&k.cbSet!=a)&&(k=Ha.get(g,k),null!=k)){for(;!k.arbiters.empty();)k.arbiters.pop_unsafe().present--;this.remove_callbackset(k)}h=h.next}f=f.next}e=e.next}},nullInteractorType:function(a,b){null==b&&(b=a);if(a.isCompound()){a=a.icompound;for(var c=a.bodies.begin();null!=c;){var d=c.elem();this.nullInteractorType(d,b);c=c.next}for(a=a.compounds.begin();null!=a;)c=a.elem(),this.nullInteractorType(c,
b),a=a.next}else for(c=a.isBody()?a.ibody:a.ishape.body,a=a.isShape()?a.ishape:null,c=c.arbiters.begin();null!=c;){d=c.elem();if(0!=d.present&&(null==a||d.ws1==a||d.ws2==a)){this.MRCA_chains(d.ws1,d.ws2);for(var e=this.mrca1.begin();null!=e;){for(var f=e.elem(),g=this.mrca2.begin();null!=g;){var h=g.elem();if(f==b||h==b)h=Ha.get(f,h),null!=h&&(d.present--,h.remove_arb(d),h.really_empty()&&this.remove_callbackset(h));g=g.next}e=e.next}}c=c.next}},freshListenerType:function(a,b){for(var c=new Xd,d=
a.interactors.begin();null!=d;){var e=d.elem();c.add(e);d=d.next}if(a!=b)for(d=b.interactors.begin();null!=d;)e=d.elem(),c.add(e),d=d.next;for(;!c.empty();)if(d=c.pop_unsafe(),d.isCompound()){d=d.icompound;for(e=d.bodies.begin();null!=e;){var f=e.elem();c.add(f);e=e.next}for(d=d.compounds.begin();null!=d;)e=d.elem(),c.add(e),d=d.next}else for(e=d.isBody()?d.ibody:d.ishape.body,d=d.isShape()?d.ishape:null,e=e.arbiters.begin();null!=e;){f=e.elem();if(f.presentable&&(null==d||f.ws1==d||f.ws2==d)){this.MRCA_chains(f.ws1,
f.ws2);for(var g=this.mrca1.begin();null!=g;){var h=g.elem();if(h.cbSet==a||h.cbSet==b)for(var k=this.mrca2.begin();null!=k;){var l=k.elem();if(!(h.cbSet==a&&l.cbSet!=b||h.cbSet==b&&l.cbSet!=a)){var n=Ha.get(h,l);null==n&&(n=Vb.get(h,l),this.add_callbackset(n));n.add_arb(f)&&f.present++}k=k.next}g=g.next}}e=e.next}},freshInteractorType:function(a,b){null==b&&(b=a);if(a.isCompound()){a=a.icompound;for(var c=a.bodies.begin();null!=c;){var d=c.elem();this.freshInteractorType(d,b);c=c.next}for(a=a.compounds.begin();null!=
a;)c=a.elem(),this.freshInteractorType(c,b),a=a.next}else for(c=a.isBody()?a.ibody:a.ishape.body,a=a.isShape()?a.ishape:null,c=c.arbiters.begin();null!=c;){d=c.elem();if(d.presentable&&(null==a||d.ws1==a||d.ws2==a)){this.MRCA_chains(d.ws1,d.ws2);for(var e=this.mrca1.begin();null!=e;){for(var f=e.elem(),g=this.mrca2.begin();null!=g;){var h=g.elem();if(f==b||h==b){var k=f.cbSet,l=h.cbSet;k.validate();l.validate();Ba.empty_intersection(k,l)||(k=Ha.get(f,h),null==k&&(k=Vb.get(f,h),this.add_callbackset(k)),
k.add_arb(d)&&d.present++)}g=g.next}e=e.next}}c=c.next}},wakeCompound:function(a){for(var b=a.bodies.begin();null!=b;){var c=b.elem();c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.isKinematic()&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=a.constraints.begin();null!=b;)c=b.elem(),this.wake_constraint(c),b=b.next;for(a=a.compounds.begin();null!=a;)b=a.elem(),this.wakeCompound(b),a=a.next},wakeIsland:function(a){for(;!a.comps.empty();){var b=
a.comps.pop_unsafe();b.waket=this.stamp+(this.midstep?0:1);if(b.isBody){var c=b.body;this.live.add(c);for(var d=c.arbiters.begin();null!=d;){var e=d.elem();e.sleeping&&(e.sleeping=!1,e.up_stamp+=this.stamp-e.sleep_stamp,e.type==Ea.COL?(e=e.colarb,e.stat?this.c_arbiters_true.inlined_add(e):this.c_arbiters_false.inlined_add(e)):e.type==Ea.FLUID?this.f_arbiters.inlined_add(e.fluidarb):this.s_arbiters.inlined_add(e.sensorarb));d=d.next}this.bodyCbWake(c);b.reset();if(!c.isStatic())for(b=c.shapes.begin();null!=
b;)c=b.elem(),null!=c.node&&this.bphase.sync(c),b=b.next}else c=b.constraint,this.live_constraints.inlined_add(c),this.constraintCbWake(c),b.reset()}a.free();a.next=Mb.zpp_pool;Mb.zpp_pool=a},non_inlined_wake:function(a,b){null==b&&(b=!1);a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.isKinematic()&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,b))},really_wake:function(a,b){null==b&&(b=!1);if(null==a.component.island){a.component.sleeping=!1;a.isKinematic()||a.isStatic()?
this.staticsleep.inlined_add(a):this.live.inlined_add(a);for(var c=a.constraints.begin();null!=c;){var d=c.elem();d.space==this&&this.wake_constraint(d);c=c.next}for(c=a.arbiters.begin();null!=c;){d=c.elem();if(d.sleeping)if(d.sleeping=!1,d.up_stamp+=this.stamp+(this.midstep?0:1)-d.sleep_stamp,d.type==Ea.COL){var e=d.colarb;e.stat?this.c_arbiters_true.inlined_add(e):this.c_arbiters_false.inlined_add(e)}else d.type==Ea.FLUID?this.f_arbiters.inlined_add(d.fluidarb):this.s_arbiters.inlined_add(d.sensorarb);
d.type!=Ea.SENSOR&&!d.cleared&&d.up_stamp>=this.stamp&&0!=(d.immState&1)&&(d.b1.isDynamic()&&d.b1.component.sleeping&&(e=d.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),d.b2.isDynamic()&&d.b2.component.sleeping&&(d=d.b2,d.world||(d.component.waket=this.stamp+(this.midstep?0:1),d.isKinematic()&&(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1))));c=c.next}!b&&a.isDynamic()&&
this.bodyCbWake(a);if(!b&&!this.bphase.is_sweep&&!a.isStatic())for(a=a.shapes.begin();null!=a;)b=a.elem(),null!=b.node&&this.bphase.sync(b),a=a.next}else this.wakeIsland(a.component.island)},wake_constraint:function(a,b){null==b&&(b=!1);return a.active&&(a.component.waket=this.stamp+(this.midstep?0:1),a.component.sleeping)?(null==a.component.island?(a.component.sleeping=!1,this.live_constraints.inlined_add(a),a.wake_connected(),b||this.constraintCbWake(a)):this.wakeIsland(a.component.island),!0):
!1},doForests:function(a){for(var b=this.c_arbiters_false.begin();null!=b;){var c=b.elem();if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&1)&&c.b1.isDynamic()&&c.b2.isDynamic()){if(c.b1.component==c.b1.component.parent)var d=c.b1.component;else{d=c.b1.component;for(var e=null;d!=d.parent;){var f=d.parent;d.parent=e;e=d;d=f}for(;null!=e;)f=e.parent,e.parent=d,e=f}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)f=c.parent,c.parent=e,e=c,
c=f;for(;null!=e;)f=e.parent,e.parent=c,e=f}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.f_arbiters.begin();null!=b;){c=b.elem();if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&1)&&c.b1.isDynamic()&&c.b2.isDynamic()){if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(e=null;d!=d.parent;)f=d.parent,d.parent=e,e=d,d=f;for(;null!=e;)f=e.parent,e.parent=d,e=f}if(c.b2.component==c.b2.component.parent)c=c.b2.component;
else{c=c.b2.component;for(e=null;c!=c.parent;)f=c.parent,c.parent=e,e=c,c=f;for(;null!=e;)f=e.parent,e.parent=c,e=f}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.live_constraints.begin();null!=b;)b.elem().forest(),b=b.next;for(;!this.live.empty();){d=this.live.inlined_pop_unsafe();b=d.component;if(b==b.parent)c=b;else{c=b;for(e=null;c!=c.parent;)f=c.parent,c.parent=e,e=c,c=f;for(;null!=e;)f=e.parent,e.parent=c,e=f}null==c.island&&(null==Mb.zpp_pool?
c.island=new Mb:(c.island=Mb.zpp_pool,Mb.zpp_pool=c.island.next,c.island.next=null),c.island.alloc(),this.islands.inlined_add(c.island),c.island.sleep=!0);b.island=c.island;b.island.comps.inlined_add(b);d=d.atRest(a);b.island.sleep=b.island.sleep&&d;b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;!this.live_constraints.empty();){a=this.live_constraints.inlined_pop_unsafe().component;if(a==a.parent)b=a;else{b=a;for(d=null;b!=b.parent;)c=b.parent,b.parent=d,d=b,b=c;for(;null!=d;)c=d.parent,d.parent=
b,d=c}a.island=b.island;a.island.comps.inlined_add(a);a.waket>a.island.waket&&(a.island.waket=a.waket)}for(;!this.islands.empty();)if(a=this.islands.inlined_pop_unsafe(),a.sleep)for(a=a.comps.begin();null!=a;){d=a.elem();if(d.isBody){b=d.body;b.velx=0;b.vely=0;b.angvel=0;d.sleeping=!0;for(d=b.shapes.begin();null!=d;)c=d.elem(),this.bphase.sync(c),d=d.next;this.bodyCbSleep(b)}else this.constraintCbSleep(d.constraint),d.sleeping=!0;a=a.next}else{for(;!a.comps.empty();)b=a.comps.inlined_pop_unsafe(),
b.waket=a.waket,b.isBody?this.live.inlined_add(b.body):this.live_constraints.inlined_add(b.constraint),b.reset();a.free();a.next=Mb.zpp_pool;Mb.zpp_pool=a}},sleepArbiters:function(){var a=null,b=this.c_arbiters_true,c=b.begin(),d=null!=this.c_arbiters_false;d&&null==c&&(d=!1,c=this.c_arbiters_false.begin(),b=this.c_arbiters_false,a=null);for(;null!=c;){var e=c.elem();e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next);d&&null==
c&&(d=!1,c=this.c_arbiters_false.begin(),b=this.c_arbiters_false,a=null)}a=null;b=this.f_arbiters;c=b.begin();d=!1;for(;null!=c;)e=c.elem(),e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=!1,a=b=null);a=null;b=this.s_arbiters;c=b.begin();d=!1;for(;null!=c;)e=c.elem(),e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=
!1,a=b=null)},static_validation:function(a){a.shapes.empty()||a.validate_aabb();a.validate_mass();a.validate_inertia();for(var b=a.shapes.begin();null!=b;){var c=b.elem();c.isPolygon()&&(c.polygon.splice_collinear(),c.polygon.validate_gaxi());b=b.next}a.sweepFrozen=!0},validation:function(){this.cbsets.validate();for(var a=this.live.begin();null!=a;){var b=a.elem();b.sweepRadius=0;for(var c=b.shapes.begin();null!=c;){var d=c.elem();d.isPolygon()&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi());
d.validate_sweepRadius();d.sweepRadius>b.sweepRadius&&(b.sweepRadius=d.sweepRadius);c=c.next}b.validate_mass();b.validate_inertia();b.shapes.empty()||(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.validate_axis();if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.bodylisteners.begin();null!=c;)d=c.elem(),2==d.event&&(d=this.push_callback(d),d.event=2,d.body=b),c=c.next;b.component.woken=!1;for(b=b.shapes.begin();null!=b;)c=b.elem(),this.bphase.sync(c),b=b.next;a=a.next}for(a=this.kinematics.begin();null!=
a;){b=a.elem();b.sweepRadius=0;for(c=b.shapes.begin();null!=c;)d=c.elem(),d.isPolygon()&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi()),d.validate_sweepRadius(),d.sweepRadius>b.sweepRadius&&(b.sweepRadius=d.sweepRadius),c=c.next;b.validate_mass();b.validate_inertia();b.shapes.empty()||(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.validate_axis();for(b=b.shapes.begin();null!=b;)c=b.elem(),this.bphase.sync(c),b=b.next;a=a.next}for(a=this.live_constraints.begin();null!=
a;){b=a.elem();if(b.active){if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.conlisteners.begin();null!=c;)d=c.elem(),2==d.event&&(d=this.push_callback(d),d.event=2,d.constraint=b),c=c.next;b.component.woken=!1}a=a.next}},updateVel:function(a){for(var b=1-a*this.global_lin_drag,c=1-a*this.global_ang_drag,d=this.live.begin();null!=d;){var e=d.elem();if(0!=e.smass){var f=a*e.imass;e.velx=b*e.velx+(e.forcex+this.gravityx*e.gravMass)*f;e.vely=b*e.vely+(e.forcey+this.gravityy*e.gravMass)*f}0!=e.sinertia&&
(e.angvel=c*e.angvel+(e.torque+(this.gravityy*(e.worldCOMx-e.posx)-this.gravityx*(e.worldCOMy-e.posy))*e.gravMass)*a*e.iinertia);d=d.next}},updatePos:function(a){for(var b=2*Math.PI/a,c=this.live.begin();null!=c;){var d=c.elem();d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else{var e=x.staticCCDLinearThreshold*d.sweepRadius,f=x.staticCCDAngularThreshold;if((d.velx*d.velx+d.vely*d.vely)*
a*a>e*e||d.angvel*d.angvel*a*a>f*f||d.isKinematic()){e=d.sweep_angvel;0>e&&(e=-e);f=1/e;for(var g=d.shapes.begin();null!=g;){var h=g.elem(),k=h.aabb,l=k.minx,n=k.miny,p=k.maxx,r=k.maxy,t=u["int"](e*a*h.sweepCoef*.008333333333333333);8<t&&(t=8);var v=e*a/t;d.sweepIntegrate(a);h.force_validate_aabb();l<k.minx?k.minx=l:l=k.minx;n<k.miny?k.miny=n:n=k.miny;p>k.maxx?k.maxx=p:p=k.maxx;r>k.maxy?k.maxy=r:r=k.maxy;for(var w=1;w<t;){var A=w++;d.sweepIntegrate(v*A*f);h.force_validate_aabb();l<k.minx?k.minx=l:
l=k.minx;n<k.miny?k.miny=n:n=k.miny;p>k.maxx?k.maxx=p:p=k.maxx;r>k.maxy?k.maxy=r:r=k.maxy}this.bphase.sync(h);g=g.next}d.sweepFrozen=!1;d.isDynamic()&&d.bulletEnabled&&(e=x.bulletCCDLinearThreshold*d.sweepRadius,f=x.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>f*f)&&(d.bullet=!0)}else d.sweepFrozen=!0,d.bullet=!1}c=c.next}for(c=this.kinematics.begin();null!=c;){d=c.elem();d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=d.angvel%
b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else if(e=x.staticCCDLinearThreshold*d.sweepRadius,f=x.staticCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>f*f||d.isKinematic()){e=d.sweep_angvel;0>e&&(e=-e);f=1/e;for(g=d.shapes.begin();null!=g;){h=g.elem();k=h.aabb;l=k.minx;n=k.miny;p=k.maxx;r=k.maxy;t=u["int"](e*a*h.sweepCoef*.008333333333333333);8<t&&(t=8);v=e*a/t;d.sweepIntegrate(a);h.force_validate_aabb();l<k.minx?k.minx=l:l=k.minx;n<k.miny?
k.miny=n:n=k.miny;p>k.maxx?k.maxx=p:p=k.maxx;r>k.maxy?k.maxy=r:r=k.maxy;for(w=1;w<t;)A=w++,d.sweepIntegrate(v*A*f),h.force_validate_aabb(),l<k.minx?k.minx=l:l=k.minx,n<k.miny?k.miny=n:n=k.miny,p>k.maxx?k.maxx=p:p=k.maxx,r>k.maxy?k.maxy=r:r=k.maxy;this.bphase.sync(h);g=g.next}d.sweepFrozen=!1;d.isDynamic()&&d.bulletEnabled&&(e=x.bulletCCDLinearThreshold*d.sweepRadius,f=x.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>f*f)&&(d.bullet=!0)}else d.sweepFrozen=!0,
d.bullet=!1;c=c.next}},continuous:null,presteparb:function(a,b,c){null==c&&(c=!1);var d=this;if(!a.cleared&&a.b1.component.sleeping&&a.b2.component.sleeping)return a.sleep_stamp=this.stamp,a.sleeping=!0;if(!a.cleared||0!=a.present||a.intchange){var e=!c&&a.up_stamp==this.stamp-1&&!a.cleared&&!a.intchange;c=a.fresh&&!a.cleared&&!a.intchange;e&&(a.endGenerated=this.stamp);if(c||e||a.cleared||a.intchange)for(this.inlined_MRCA_chains(a.ws1,a.ws2),e=this.mrca1.begin();null!=e;){for(var f=e.elem(),g=this.mrca2.begin();null!=
g;){var h=g.elem(),k=f.cbSet,l=h.cbSet;if(!Ba.empty_intersection(k,l)){var n=[Ha.get(f,h)];c||a.intchange?(null==n[0]&&(h=Vb.get(f,h),n[0]=h,this.add_callbackset(n[0])),Ba.find_all(k,l,0,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=0;Ha.int_callback(b[0],c,e);e.set=b[0]}}}(n)),n[0].add_arb(a)&&a.present++):(a.present--,n[0].remove_arb(a),Ba.find_all(k,l,1,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=
d.push_callback(c);e.event=1;Ha.int_callback(b[0],c,e);e.set=b[0]}}}(n)),n[0].really_empty()&&this.remove_callbackset(n[0]))}g=g.next}e=e.next}a.fresh=!1;a.intchange=!1}if(a.cleared||a.up_stamp+(a.type==Ea.COL?x.arbiterExpirationDelay:0)<this.stamp)return a.type==Ea.SENSOR?a.sensorarb.retire():a.type==Ea.FLUID?a.fluidarb.retire():a.colarb.retire(),!0;c=a.active;a.active=a.presentable=a.up_stamp==this.stamp;0!=(a.immState&1)?a.active&&a.type!=Ea.SENSOR&&(null!=a.colarb?a.colarb.preStep(b)&&(a.active=
!1):a.fluidarb.preStep(this,b)):null!=a.colarb&&a.colarb.cleanupContacts()&&(a.active=!1);c!=a.active&&(a.b1.arbiters.modified=!0,a.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0);return!1},prestep:function(a){for(var b=null,c=this.live_constraints.begin();null!=c;){var d=c.elem();d.preStep(a)?(c=this.live_constraints.erase(b),d.broken(),this.constraintCbBreak(d),d.removeOnBreak?(d.component.sleeping=!0,
this.midstep=!1,null!=d.compound?d.compound.wrap_constraints.remove(d.outer):this.wrap_constraints.remove(d.outer),this.midstep=!0):d.active=!1,d.clearcache()):(b=c,c=c.next)}b=null;c=this.c_arbiters_true;d=c.begin();var e=null!=this.c_arbiters_false;e&&null==d&&(e=!1,d=this.c_arbiters_false.begin(),c=this.c_arbiters_false,b=null);for(;null!=d;){var f=d.elem();this.presteparb(f,a)?d=c.inlined_erase(b):(b=d,d=d.next);e&&null==d&&(e=!1,d=this.c_arbiters_false.begin(),c=this.c_arbiters_false,b=null)}b=
null;c=this.f_arbiters;d=c.begin();e=!1;for(;null!=d;)f=d.elem(),this.presteparb(f,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,b=c=null);b=null;c=this.s_arbiters;d=c.begin();e=!1;for(;null!=d;)f=d.elem(),this.presteparb(f,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,b=c=null)},warmStart:function(){for(var a=this.f_arbiters.begin();null!=a;){var b=a.elem();b.acting()&&b.warmStart();a=a.next}a=this.c_arbiters_false.begin();b=!0;null==a&&(a=this.c_arbiters_true.begin(),b=!1);
for(;null!=a;){var c=a.elem();c.acting()&&c.warmStart();a=a.next;b&&null==a&&(a=this.c_arbiters_true.begin(),b=!1)}for(a=this.live_constraints.begin();null!=a;)a.elem().warmStart(),a=a.next},iterateVel:function(a){for(var b=0;b<a;){b++;for(var c=this.f_arbiters.begin();null!=c;){var d=c.elem();d.acting()&&d.applyImpulseVel();c=c.next}c=null;for(d=this.live_constraints.begin();null!=d;){var e=d.elem();e.applyImpulseVel()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?
(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}c=this.c_arbiters_false.begin();d=!0;null==c&&(c=this.c_arbiters_true.begin(),d=!1);for(;null!=c;)e=c.elem(),e.acting()&&e.applyImpulseVel(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.begin(),d=!1)}},iteratePos:function(a){for(var b=0;b<a;){b++;for(var c=null,d=this.live_constraints.begin();null!=d;){var e=
d.elem();!e.__velocity&&e.stiff&&e.applyImpulsePos()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}c=this.c_arbiters_false.begin();d=!0;null==c&&(c=this.c_arbiters_true.begin(),d=!1);for(;null!=c;)e=c.elem(),e.acting()&&e.applyImpulsePos(),c=c.next,d&&null==c&&
(c=this.c_arbiters_true.begin(),d=!1)}},group_ignore:function(a,b){a=a.lookup_group();if(null==a)return!1;b=b.lookup_group();if(null==b)return!1;for(var c=!1;null!=a&&null!=b;){if(a==b){c=a.ignore;break}a.depth<b.depth?b=b.group:a=a.group}return c},interactionType:function(a,b,c,d){var e=!1;for(var f=c.constraints.begin();null!=f;){var g=f.elem();if(g.ignore&&g.pair_exists(c.id,d.id)){e=!0;break}f=f.next}return e||this.group_ignore(a,b)?-1:(a.sensorEnabled||b.sensorEnabled)&&a.filter.shouldSense(b.filter)?
2:!a.fluidEnabled&&!b.fluidEnabled||!a.filter.shouldFlow(b.filter)||0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia?!a.filter.shouldCollide(b.filter)||0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia?-1:1:0},precb:null,prelisteners:null,narrowPhase:function(a,b,c,d,e){var f=this,g=null,h=a.body,k=b.body,l=this.interactionType(a,b,h,k);if(-1!=l){if(a.type>b.type){g=b;var n=a}else a.type==b.type?a.id<b.id?(g=a,n=b):(n=a,g=b):(g=a,n=b);var p=g==b;if(0==l){if(null==d)for(l=null,h=(h.arbiters.length<
k.arbiters.length?h:k).arbiters.begin();null!=h;){c=h.elem();if(c.id==g.id&&c.di==n.id){l=c;break}h=h.next}else l=d;h=null==l;c=!1;h?(null==vc.zpp_pool?l=new vc:(l=vc.zpp_pool,vc.zpp_pool=l.next,l.next=null),l.alloc()):null==l.fluidarb?(l.lazyRetire(this,null),null==vc.zpp_pool?l=new vc:(l=vc.zpp_pool,vc.zpp_pool=l.next,l.next=null),l.alloc(),c=h=l.intchange=!0):l=l.fluidarb;if(h||l.stamp!=this.stamp||e)if(l.stamp=this.stamp,W.flowCollide(g,n,l)){h?(l.assign(a,b,g.id,n.id),this.f_arbiters.inlined_add(l),
l.fresh=!c):l.fresh=l.up_stamp<this.stamp-1||l.endGenerated==this.stamp&&e;l.up_stamp=l.stamp;if(l.fresh||0==(l.immState&4)){l.immState=1;var r=!1;this.inlined_MRCA_chains(l.ws1.id>l.ws2.id?l.ws2:l.ws1,l.ws1.id>l.ws2.id?l.ws1:l.ws2);for(a=this.mrca1.begin();null!=a;){b=a.elem();for(g=this.mrca2.begin();null!=g;){h=g.elem();c=b.cbSet;p=h.cbSet;if(!Ba.empty_intersection(c,p)&&(k=n=null,this.prelisteners.inlined_clear(),Ba.find_all(c,p,5,function(a){return function(b){if(0!=(b.itype&4)){var c=f.prelisteners.inlined_insert(a[0],
b);a[0]=c;r=r?!0:!b.pure}}}([null])),!this.prelisteners.empty()))if(n=Ha.get(b,h),null==n&&(k=Vb.get(b,h),this.add_callbackset(k)),null==n||(n.FLUIDstamp!=this.stamp||e)&&0==(n.FLUIDstate&4)){null!=k&&(n=k);if(null!=n)for(h=this.prelisteners.begin();null!=h;)7==h.elem().itype&&(n.COLLISIONstamp=this.stamp,n.SENSORstamp=this.stamp),n.FLUIDstamp=this.stamp,h=h.next;h=l.active;l.active=!0;this.precb.zpp_inner.pre_arbiter=l;this.precb.zpp_inner.set=n;for(c=this.prelisteners.begin();null!=c;)p=c.elem(),
this.precb.zpp_inner.listener=p,Ha.int_callback(n,p,this.precb.zpp_inner),this.precb.zpp_inner.pre_swapped=b!=this.precb.zpp_inner.int1,p=p.handlerp(this.precb),null!=p&&(l.immState=p==$a.get_ACCEPT()?5:p==$a.get_ACCEPT_ONCE()?1:p==$a.get_IGNORE()?6:2),c=c.next;l.active=h;if(null!=n)for(h=this.prelisteners.begin();null!=h;)7==h.elem().itype&&(n.COLLISIONstate=l.immState,n.SENSORstate=l.immState),n.FLUIDstate=l.immState,h=h.next}else null==n?0==(l.immState&4)&&(l.immState=1):l.immState=n.FLUIDstate;
g=g.next}a=a.next}r&&0==(l.immState&4)&&(l.b1.isDynamic()&&(e=l.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),l.b1.isDynamic()&&(e=l.b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))))}0!=(l.immState&1)&&(l.b1.isDynamic()&&l.b1.component.sleeping&&(e=l.b1,e.world||(e.component.waket=this.stamp+
(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),l.b2.isDynamic()&&l.b2.component.sleeping&&(e=l.b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))));l.sleeping&&(l.sleeping=!1,this.f_arbiters.inlined_add(l));g=l}else h?(e=l,e.free(),e.next=vc.zpp_pool,vc.zpp_pool=e,g=null):g=l;else g=l}else if(1==l){l=c?this.c_arbiters_true:this.c_arbiters_false;
if(null==d)for(d=null,h=(h.arbiters.length<k.arbiters.length?h:k).arbiters.begin();null!=h;){k=h.elem();if(k.id==g.id&&k.di==n.id){d=k;break}h=h.next}h=d;k=null==h;d=!1;k?(null==Kc.zpp_pool?h=new Kc:(h=Kc.zpp_pool,Kc.zpp_pool=h.next,h.next=null),h.alloc(),h.stat=c):null==h.colarb?(h.lazyRetire(this,null),null==Kc.zpp_pool?h=new Kc:(h=Kc.zpp_pool,Kc.zpp_pool=h.next,h.next=null),h.alloc(),h.intchange=!0,h.stat=c,d=k=!0):(h=h.colarb,p=g!=h.s1,h.stat!=c&&(h.stat=c,h.sleeping||((c?this.c_arbiters_false:
this.c_arbiters_true).remove(h),l.add(h))));if(k||h.stamp!=this.stamp||e)if(h.stamp=this.stamp,W.contactCollide(g,n,h,p)){k?(h.assign(a,b,g.id,n.id),l.inlined_add(h),h.fresh=!d):h.fresh=h.up_stamp<this.stamp-1||h.endGenerated==this.stamp&&e;h.up_stamp=h.stamp;if(h.fresh||0==(h.immState&4)){h.immState=1;var t=!1;this.inlined_MRCA_chains(h.ws1.id>h.ws2.id?h.ws2:h.ws1,h.ws1.id>h.ws2.id?h.ws1:h.ws2);for(a=this.mrca1.begin();null!=a;){b=a.elem();for(g=this.mrca2.begin();null!=g;){c=g.elem();p=b.cbSet;
k=c.cbSet;if(!Ba.empty_intersection(p,k)&&(d=n=null,this.prelisteners.inlined_clear(),Ba.find_all(p,k,5,function(a){return function(b){if(0!=(b.itype&1)){var c=f.prelisteners.inlined_insert(a[0],b);a[0]=c;t=t?!0:!b.pure}}}([null])),!this.prelisteners.empty()))if(n=Ha.get(b,c),null==n&&(d=Vb.get(b,c),this.add_callbackset(d)),null==n||(n.COLLISIONstamp!=this.stamp||e)&&0==(n.COLLISIONstate&4)){null!=d&&(n=d);if(null!=n)for(c=this.prelisteners.begin();null!=c;)7==c.elem().itype?(n.COLLISIONstamp=this.stamp,
n.SENSORstamp=this.stamp,n.FLUIDstamp=this.stamp):n.COLLISIONstamp=this.stamp,c=c.next;c=h.active;h.active=!0;h.cleanupContacts();this.precb.zpp_inner.pre_arbiter=h;this.precb.zpp_inner.set=n;for(p=this.prelisteners.begin();null!=p;)k=p.elem(),this.precb.zpp_inner.listener=k,Ha.int_callback(n,k,this.precb.zpp_inner),this.precb.zpp_inner.pre_swapped=b!=this.precb.zpp_inner.int1,k=k.handlerp(this.precb),null!=k&&(h.immState=k==$a.get_ACCEPT()?5:k==$a.get_ACCEPT_ONCE()?1:k==$a.get_IGNORE()?6:2),p=p.next;
h.active=c;if(null!=n)for(c=this.prelisteners.begin();null!=c;)7==c.elem().itype?(n.COLLISIONstate=h.immState,n.SENSORstate=h.immState,n.FLUIDstate=h.immState):n.COLLISIONstate=h.immState,c=c.next}else null==n?0==(h.immState&4)&&(h.immState=1):h.immState=n.COLLISIONstate;g=g.next}a=a.next}t&&0==(h.immState&4)&&(h.b1.isDynamic()&&(e=h.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),h.b1.isDynamic()&&
(e=h.b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))))}0!=(h.immState&1)&&(h.b1.isDynamic()&&h.b1.component.sleeping&&(e=h.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),h.b2.isDynamic()&&h.b2.component.sleeping&&(e=h.b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&
(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))));h.sleeping&&(h.sleeping=!1,l.inlined_add(h));g=h}else k?(e=h,e.free(),e.next=Kc.zpp_pool,Kc.zpp_pool=e,g=null):g=h;else g=h}else{if(null==d)for(l=null,h=(h.arbiters.length<k.arbiters.length?h:k).arbiters.begin();null!=h;){c=h.elem();if(c.id==g.id&&c.di==n.id){l=c;break}h=h.next}else l=d;h=null==l;c=!1;h?(null==Wc.zpp_pool?l=new Wc:(l=Wc.zpp_pool,Wc.zpp_pool=l.next,l.next=null),l.alloc()):null==l.sensorarb?(l.lazyRetire(this,
null),null==Wc.zpp_pool?l=new Wc:(l=Wc.zpp_pool,Wc.zpp_pool=l.next,l.next=null),l.alloc(),c=h=l.intchange=!0):l=l.sensorarb;if(h||l.stamp!=this.stamp||e)if(l.stamp=this.stamp,W.testCollide(g,n)){h?(l.assign(a,b,g.id,n.id),this.s_arbiters.inlined_add(l),l.fresh=!c):l.fresh=l.up_stamp<this.stamp-1||l.endGenerated==this.stamp&&e;l.up_stamp=l.stamp;if(l.fresh||0==(l.immState&4)){l.immState=1;var u=!1;this.inlined_MRCA_chains(l.ws1.id>l.ws2.id?l.ws2:l.ws1,l.ws1.id>l.ws2.id?l.ws1:l.ws2);for(a=this.mrca1.begin();null!=
a;){b=a.elem();for(g=this.mrca2.begin();null!=g;){h=g.elem();c=b.cbSet;p=h.cbSet;if(!Ba.empty_intersection(c,p)&&(k=n=null,this.prelisteners.inlined_clear(),Ba.find_all(c,p,5,function(a){return function(b){if(0!=(b.itype&2)){var c=f.prelisteners.inlined_insert(a[0],b);a[0]=c;u=u?!0:!b.pure}}}([null])),!this.prelisteners.empty()))if(n=Ha.get(b,h),null==n&&(k=Vb.get(b,h),this.add_callbackset(k)),null==n||(n.SENSORstamp!=this.stamp||e)&&0==(n.SENSORstate&4)){null!=k&&(n=k);if(null!=n)for(h=this.prelisteners.begin();null!=
h;)7==h.elem().itype?(n.COLLISIONstamp=this.stamp,n.SENSORstamp=this.stamp,n.FLUIDstamp=this.stamp):n.SENSORstamp=this.stamp,h=h.next;h=l.active;l.active=!0;this.precb.zpp_inner.pre_arbiter=l;this.precb.zpp_inner.set=n;for(c=this.prelisteners.begin();null!=c;)p=c.elem(),this.precb.zpp_inner.listener=p,Ha.int_callback(n,p,this.precb.zpp_inner),this.precb.zpp_inner.pre_swapped=b!=this.precb.zpp_inner.int1,p=p.handlerp(this.precb),null!=p&&(l.immState=p==$a.get_ACCEPT()?5:p==$a.get_ACCEPT_ONCE()?1:p==
$a.get_IGNORE()?6:2),c=c.next;l.active=h;if(null!=n)for(h=this.prelisteners.begin();null!=h;)7==h.elem().itype?(n.COLLISIONstate=l.immState,n.SENSORstate=l.immState,n.FLUIDstate=l.immState):n.SENSORstate=l.immState,h=h.next}else null==n?0==(l.immState&4)&&(l.immState=1):l.immState=n.SENSORstate;g=g.next}a=a.next}u&&0==(l.immState&4)&&(l.b1.isStatic()||(e=l.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,
!1))),l.b2.isStatic()||(e=l.b2,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.isKinematic()&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))))}l.sleeping&&(l.sleeping=!1,this.s_arbiters.inlined_add(l));g=l}else h?(e=l,e.free(),e.next=Wc.zpp_pool,Wc.zpp_pool=e,g=null):g=l;else g=l}}return g},mrca1:null,mrca2:null,MRCA_chains:function(a,b){this.inlined_MRCA_chains(a,b)},inlined_MRCA_chains:function(a,b){this.mrca1.inlined_clear();this.mrca2.inlined_clear();null!=
a.cbSet&&this.mrca1.inlined_add(a);null!=a.body.cbSet&&this.mrca1.inlined_add(a.body);null!=b.cbSet&&this.mrca2.inlined_add(b);null!=b.body.cbSet&&this.mrca2.inlined_add(b.body);a=a.body.compound;for(b=b.body.compound;a!=b;)(null==a?0:a.depth)<(null==b?0:b.depth)?(null!=b.cbSet&&this.mrca2.inlined_add(b),b=b.compound):(null!=a.cbSet&&this.mrca1.inlined_add(a),a=a.compound)},__class__:Cj};var Af=function(){this.next=this.prev=this.shape=this.aabb=null};k["zpp_nape.space.ZPP_SweepData"]=Af;Af.__name__=
["zpp_nape","space","ZPP_SweepData"];Af.prototype={next:null,prev:null,shape:null,aabb:null,free:function(){this.aabb=this.shape=this.prev=null},alloc:function(){},gt:function(a){return this.aabb.minx>a.aabb.minx},__class__:Af};var ni=function(a){this.list=null;Ne.call(this);this.space=a;this.is_sweep=!0;this.sweep=this};k["zpp_nape.space.ZPP_SweepPhase"]=ni;ni.__name__=["zpp_nape","space","ZPP_SweepPhase"];ni.__super__=Ne;ni.prototype=w(Ne.prototype,{list:null,__insert:function(a){if(null==Af.zpp_pool)var b=
new Af;else b=Af.zpp_pool,Af.zpp_pool=b.next,b.next=null;b.alloc();a.sweep=b;b.shape=a;b.aabb=a.aabb;b.next=this.list;null!=this.list&&(this.list.prev=b);this.list=b},__remove:function(a){var b=a.sweep;null==b.prev?this.list=b.next:b.prev.next=b.next;null!=b.next&&(b.next.prev=b.prev);a.sweep=null;b.free();b.next=Af.zpp_pool;Af.zpp_pool=b},__sync:function(a){this.space.continuous||a.validate_aabb()},sync_broadphase_fast:function(){for(var a=this.list.next;null!=a;){var b=a.next,c=a.prev;if(!a.gt(c)){for(;null!=
c.prev&&c.prev.gt(a);)c=c.prev;var d=a.prev;d.next=a.next;null!=a.next&&(a.next.prev=d);null==c.prev?(a.prev=null,this.list=a,a.next=c,c.prev=a):(a.prev=c.prev,c.prev=a,a.prev.next=a,a.next=c)}a=b}},broadphase:function(a,b){if(null!=this.list){this.sync_broadphase_fast();for(var c=this.list;null!=c;){for(var d=c.next,e=c.shape,f=e.body,g=c.aabb.maxx;null!=d&&!(d.aabb.minx>g);){var h=d.shape,k=h.body;k!=f&&(f.isStatic()&&k.isStatic()||f.component.sleeping&&k.component.sleeping||e.aabb.intersectY(h.aabb)&&
(b?a.narrowPhase(e,h,!f.isDynamic()||!k.isDynamic(),null,!1):a.continuousEvent(e,h,!f.isDynamic()||!k.isDynamic(),null,!1)));d=d.next}c=c.next}}},clear:function(){for(;null!=this.list;)this.list.shape.removedFromSpace(),this.__remove(this.list.shape)},__class__:ni});var fk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=fk;fk.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"];fk.prototype={head:null,begin:function(){return this.head},
modified:null,pushmod:null,length:null,inlined_add:function(a){if(null==Bf.zpp_pool)var b=new Bf;else b=Bf.zpp_pool,Bf.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},inlined_remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();
this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Bf.zpp_pool;Bf.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},__class__:fk};var Df=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Shape"]=Df;Df.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"];Df.prototype={head:null,begin:function(){return this.head},modified:null,
pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==Ed.zpp_pool)var b=new Ed;else b=Ed.zpp_pool,Ed.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){if(null==Ed.zpp_pool)var c=new Ed;else c=Ed.zpp_pool,Ed.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=
a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Ed.zpp_pool;Ed.zpp_pool=a;this.modified=!0;
this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:Df};var se=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Body"]=se;se.__name__=["zpp_nape","util","ZNPList_ZPP_Body"];se.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==
wc.zpp_pool)var b=new wc;else b=wc.zpp_pool,wc.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){if(null==wc.zpp_pool)var c=new wc;else c=wc.zpp_pool,wc.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=wc.zpp_pool;wc.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},
inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=wc.zpp_pool;wc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},clear:function(){this.inlined_clear()},inlined_clear:function(){for(;!this.empty();)this.inlined_pop();this.pushmod=!0},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},iterator_at:function(a){for(var b=
this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:se};var ig=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Compound"]=ig;ig.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"];ig.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==Oe.zpp_pool)var b=new Oe;else b=Oe.zpp_pool,Oe.zpp_pool=b.next,b.next=null;b.alloc();b.elt=
a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=Oe.zpp_pool;Oe.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),
d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Oe.zpp_pool;Oe.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},iterator_at:function(a){for(var b=this.begin();0<
a--&&null!=b;)b=b.next;return b},__class__:ig};var zg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Arbiter"]=zg;zg.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"];zg.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,inlined_add:function(a){if(null==Pe.zpp_pool)var b=new Pe;else b=Pe.zpp_pool,Pe.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;
return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=Pe.zpp_pool;Pe.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},inlined_remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);
d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Pe.zpp_pool;Pe.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},clear:function(){this.inlined_clear()},inlined_clear:function(){for(;!this.empty();)this.inlined_pop();this.pushmod=!0},empty:function(){return null==
this.begin()},inlined_has:function(a){var b=!1;for(var c=this.begin();null!=c;){if(c.elem()==a){b=!0;break}c=c.next}return b},front:function(){return this.begin().elem()},__class__:zg};var dk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=dk;dk.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"];dk.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},
inlined_add:function(a){if(null==ue.zpp_pool)var b=new ue;else b=ue.zpp_pool,ue.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=ue.zpp_pool;ue.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();
this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=ue.zpp_pool;ue.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==
this.begin()},front:function(){return this.begin().elem()},__class__:dk};var gk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_AABBPair"]=gk;gk.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"];gk.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,inlined_add:function(a){if(null==ve.zpp_pool)var b=new ve;else b=ve.zpp_pool,ve.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=
b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=ve.zpp_pool;ve.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=
null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=ve.zpp_pool;ve.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},__class__:gk};var li=function(){this.length=
0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Edge"]=li;li.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"];li.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==ed.zpp_pool)var b=new ed;else b=ed.zpp_pool,ed.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,
b)},inlined_insert:function(a,b){if(null==ed.zpp_pool)var c=new ed;else c=ed.zpp_pool,ed.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=ed.zpp_pool;ed.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=ed.zpp_pool;ed.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},reverse:function(){for(var a=this.begin(),b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=
this.modified=!0},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:li};var hk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Component"]=hk;hk.__name__=["zpp_nape","util","ZNPList_ZPP_Component"];hk.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,inlined_add:function(a){if(null==
ff.zpp_pool)var b=new ff;else b=ff.zpp_pool,ff.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=ff.zpp_pool;ff.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},empty:function(){return null==
this.begin()},front:function(){return this.begin().elem()},__class__:hk};var kk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=kk;kk.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"];kk.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,inlined_add:function(a){if(null==Qe.zpp_pool)var b=new Qe;else b=Qe.zpp_pool,Qe.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();
this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=Qe.zpp_pool;Qe.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,
b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Qe.zpp_pool;Qe.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},__class__:kk};var lk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=lk;lk.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"];lk.prototype={head:null,begin:function(){return this.head},modified:null,
pushmod:null,length:null,inlined_add:function(a){if(null==be.zpp_pool)var b=new be;else b=be.zpp_pool,be.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=be.zpp_pool;be.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=
this.front();this.pop();return a},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=be.zpp_pool;be.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},__class__:lk};var pi=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_Listener"]=
pi;pi.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"];pi.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==Zb.zpp_pool)var b=new Zb;else b=Zb.zpp_pool,Zb.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){if(null==Zb.zpp_pool)var c=
new Zb;else c=Zb.zpp_pool,Zb.zpp_pool=c.next,c.next=null;c.alloc();c.elt=b;b=c;null==a?(b.next=this.begin(),this.head=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=Zb.zpp_pool;Zb.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();
this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=Zb.zpp_pool;Zb.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==
this.begin()},front:function(){return this.begin().elem()},iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:pi};var oi=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=oi;oi.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"];oi.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,setbegin:function(a){this.head=a;this.pushmod=this.modified=!0},add:function(a){return this.inlined_add(a)},
inlined_add:function(a){if(null==nd.zpp_pool)var b=new nd;else b=nd.zpp_pool,nd.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=nd.zpp_pool;nd.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();
this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.begin(),d=!1;null!=c;){if(c.elem()==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=!0);a=c;a.free();a.next=nd.zpp_pool;nd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==
this.begin()},front:function(){return this.begin().elem()},__class__:oi};var ki=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=ki;ki.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionGroup"];ki.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:ki};var jk=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=jk;jk.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"];jk.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,add:function(a){return this.inlined_add(a)},inlined_add:function(a){if(null==xc.zpp_pool)var b=new xc;else b=xc.zpp_pool,xc.zpp_pool=b.next,b.next=null;b.alloc();b.elt=a;b.next=this.begin();this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.begin();this.head=a.next;a.free();a.next=xc.zpp_pool;xc.zpp_pool=a;this.empty()&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.front();this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b;if(null==a){var c=this.begin();this.head=b=c.next;this.empty()&&(this.pushmod=!0)}else c=a.next,b=c.next,a.next=b,null==b&&(this.pushmod=
!0);a=c;a.free();a.next=xc.zpp_pool;xc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return b},empty:function(){return null==this.begin()},front:function(){return this.begin().elem()},__class__:jk};var mk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ConvexResult"]=mk;mk.__name__=["zpp_nape","util","ZNPList_ConvexResult"];mk.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,iterator_at:function(a){for(var b=
this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:mk};var nk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};k["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=nk;nk.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"];nk.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:nk};var ok=function(){this.length=0;this.modified=this.pushmod=!1;this.head=
null};k["zpp_nape.util.ZNPList_RayResult"]=ok;ok.__name__=["zpp_nape","util","ZNPList_RayResult"];ok.prototype={head:null,begin:function(){return this.head},modified:null,pushmod:null,length:null,iterator_at:function(a){for(var b=this.begin();0<a--&&null!=b;)b=b.next;return b},__class__:ok};var Ic=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_CbType"]=Ic;Ic.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"];Ic.prototype={next:null,alloc:function(){},free:function(){this.elt=null},
elt:null,elem:function(){return this.elt},__class__:Ic};var Bf=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=Bf;Bf.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"];Bf.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:Bf};var Ed=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Shape"]=Ed;Ed.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"];Ed.prototype={next:null,alloc:function(){},
free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:Ed};var wc=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Body"]=wc;wc.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"];wc.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:wc};var uc=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Constraint"]=uc;uc.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"];uc.prototype=
{next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:uc};var Oe=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Compound"]=Oe;Oe.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"];Oe.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:Oe};var Pe=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=Pe;Pe.__name__=["zpp_nape","util",
"ZNPNode_ZPP_Arbiter"];Pe.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:Pe};var hc=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=hc;hc.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"];hc.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:hc};var $d=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_CbSet"]=
$d;$d.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"];$d.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:$d};var Ld=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Interactor"]=Ld;Ld.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"];Ld.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:Ld};var Yd=function(){this.next=this.elt=null};
k["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=Yd;Yd.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"];Yd.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:Yd};var ue=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=ue;ue.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"];ue.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:ue};
var Zd=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=Zd;Zd.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"];Zd.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:Zd};var Lc=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Vec2"]=Lc;Lc.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"];Lc.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,
elem:function(){return this.elt},__class__:Lc};var ve=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=ve;ve.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"];ve.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:ve};var ed=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Edge"]=ed;ed.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"];ed.prototype={next:null,alloc:function(){},free:function(){this.elt=
null},elt:null,elem:function(){return this.elt},__class__:ed};var ff=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Component"]=ff;ff.__name__=["zpp_nape","util","ZNPNode_ZPP_Component"];ff.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:ff};var Qe=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=Qe;Qe.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"];Qe.prototype={next:null,
alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:Qe};var be=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=be;be.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"];be.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:be};var Zb=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_Listener"]=Zb;Zb.__name__=["zpp_nape","util",
"ZNPNode_ZPP_Listener"];Zb.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:Zb};var nd=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=nd;nd.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"];nd.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:nd};var ll=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=
ll;ll.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"];ll.prototype={next:null,elt:null,elem:function(){return this.elt},__class__:ll};var xc=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=xc;xc.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"];xc.prototype={next:null,alloc:function(){},free:function(){this.elt=null},elt:null,elem:function(){return this.elt},__class__:xc};var ml=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ConvexResult"]=ml;
ml.__name__=["zpp_nape","util","ZNPNode_ConvexResult"];ml.prototype={next:null,elt:null,elem:function(){return this.elt},__class__:ml};var nl=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=nl;nl.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"];nl.prototype={next:null,elt:null,elem:function(){return this.elt},__class__:nl};var ol=function(){this.next=this.elt=null};k["zpp_nape.util.ZNPNode_RayResult"]=ol;ol.__name__=["zpp_nape","util","ZNPNode_RayResult"];ol.prototype=
{next:null,elt:null,elem:function(){return this.elt},__class__:ol};var zf=function(){this.at_index=0;this.at_ite=null;this.zip_length=!1;this._length=0;this.inner=null;Nb.call(this);this.at_ite=null;this.at_index=0;this.zip_length=!0;this._length=0};k["zpp_nape.util.ZPP_MixVec2List"]=zf;zf.__name__=["zpp_nape","util","ZPP_MixVec2List"];zf.get=function(a,b){null==b&&(b=!1);var c=new zf;c.inner=a;c.zpp_inner.immutable=b;return c};zf.__super__=Nb;zf.prototype=w(Nb.prototype,{inner:null,_length:null,
zip_length:null,at_ite:null,at_index:null,zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;for(var a=this.inner.begin();null!=a;)a.elem(),this._length++,a=a.next;this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate();this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.at_index||null==this.at_ite)for(this.at_index=0,this.at_ite=this.inner.begin();;){this.at_ite.elem();
break}for(;this.at_index!=a;)for(this.at_index++,this.at_ite=this.at_ite.next;;){this.at_ite.elem();break}return this.at_ite.elem().wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0;if(b){if(this.zpp_inner.reverse_flag)this.inner.add(a.zpp_inner);else{var c=this.inner.iterator_at(this.get_length()-1);this.inner.insert(c,a.zpp_inner)}this.zpp_inner.invalidate();null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a)}return b},
__class__:zf});var Gd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=!1;this.outer=null;this.inner=new re;this._invalidated=!0};k["zpp_nape.util.ZPP_ConstraintList"]=Gd;Gd.__name__=["zpp_nape","util","ZPP_ConstraintList"];Gd.get=function(a,b){null==b&&(b=!1);var c=new oj;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=
!0;return c};Gd.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=
!0;null!=this._invalidate&&this._invalidate(this)},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:Gd};var af=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=!1;this.outer=null;this.inner=new se;this._invalidated=!0};k["zpp_nape.util.ZPP_BodyList"]=af;af.__name__=["zpp_nape","util","ZPP_BodyList"];
af.get=function(a,b){null==b&&(b=!1);var c=new xj;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};af.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},
validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:af};var rf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this.outer=this._validate=null;this.inner=new Xd;this._invalidated=!0};k["zpp_nape.util.ZPP_InteractorList"]=
rf;rf.__name__=["zpp_nape","util","ZPP_InteractorList"];rf.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:rf};
var qf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=!1;this.outer=null;this.inner=new ig;this._invalidated=!0};k["zpp_nape.util.ZPP_CompoundList"]=qf;qf.__name__=["zpp_nape","util","ZPP_CompoundList"];qf.get=function(a,b){null==b&&(b=!1);var c=new zj;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};qf.prototype=
{outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=
this._invalidate&&this._invalidate(this)},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:qf};var Ze=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=!1;this.outer=null;this.inner=new pi;this._invalidated=!0};k["zpp_nape.util.ZPP_ListenerList"]=Ze;Ze.__name__=["zpp_nape","util","ZPP_ListenerList"];
Ze.get=function(a,b){null==b&&(b=!1);var c=new lj;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Ze.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},
validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:Ze};var id=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=
!1;this.outer=null;this.inner=new dd;this._invalidated=!0};k["zpp_nape.util.ZPP_CbTypeList"]=id;id.__name__=["zpp_nape","util","ZPP_CbTypeList"];id.get=function(a,b){null==b&&(b=!1);var c=new Ye;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};id.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&
(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:id};var Jf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=!1;this.outer=null;this.inner=new yg;this._invalidated=!0};k["zpp_nape.util.ZPP_Vec2List"]=Jf;Jf.__name__=["zpp_nape","util","ZPP_Vec2List"];Jf.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&
(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:Jf};var Yf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=
0;this.reverse_flag=!1;this.outer=this._validate=null;this.inner=new nk;this._invalidated=!0};k["zpp_nape.util.ZPP_GeomPolyList"]=Yf;Yf.__name__=["zpp_nape","util","ZPP_GeomPolyList"];Yf.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=
!1,null!=this._validate&&this._validate())},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:Yf};var qg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this.outer=this._validate=null;this.inner=new ok;this._invalidated=!0};k["zpp_nape.util.ZPP_RayResultList"]=qg;qg.__name__=["zpp_nape","util","ZPP_RayResultList"];qg.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,
valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:qg};var pg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this.outer=
this._validate=null;this.inner=new mk;this._invalidated=!0};k["zpp_nape.util.ZPP_ConvexResultList"]=pg;pg.__name__=["zpp_nape","util","ZPP_ConvexResultList"];pg.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&
this._validate())},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:pg};var rg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this.outer=this._validate=null;this.inner=new li;this._invalidated=!0};k["zpp_nape.util.ZPP_EdgeList"]=rg;rg.__name__=["zpp_nape","util","ZPP_EdgeList"];rg.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();
this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:rg};var Rd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=
this.adder=this.post_adder=this.subber=null;this.immutable=!1;this.outer=null;this.inner=new Df;this._invalidated=!0};k["zpp_nape.util.ZPP_ShapeList"]=Rd;Rd.__name__=["zpp_nape","util","ZPP_ShapeList"];Rd.get=function(a,b){null==b&&(b=!1);var c=new Bj;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Rd.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,dontremove:null,reverse_flag:null,
valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:Rd};var Xf=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this.outer=this._validate=null;this.inner=new ki;this._invalidated=!0};k["zpp_nape.util.ZPP_InteractionGroupList"]=Xf;Xf.__name__=["zpp_nape","util","ZPP_InteractionGroupList"];Xf.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=
!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:Xf};var $e=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=!1;this.outer=null;this.inner=new zg;this._invalidated=!0};k["zpp_nape.util.ZPP_ArbiterList"]=$e;$e.__name__=["zpp_nape","util","ZPP_ArbiterList"];
$e.get=function(a,b){null==b&&(b=!1);var c=new Ce;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};$e.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&
this._validate())},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:$e};var Wf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this.outer=this._validate=null;this.inner=new ic;this._invalidated=!0};k["zpp_nape.util.ZPP_ContactList"]=Wf;Wf.__name__=["zpp_nape","util","ZPP_ContactList"];Wf.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();
this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:Wf};var Ga=function(){};k["zpp_nape.util.ZPP_Math"]=Ga;Ga.__name__=["zpp_nape","util","ZPP_Math"];Ga.sqrt=function(a){return Math.sqrt(a)};Ga.invsqrt=function(a){return 1/
Ga.sqrt(a)};Ga.sqr=function(a){return a*a};Ga.clamp2=function(a,b){return Ga.clamp(a,-b,b)};Ga.clamp=function(a,b,c){return a<b?b:a>c?c:a};var pb=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};k["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=pb;pb.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"];pb.prototype={free:function(){this.swapped=this.lt=this.data=null},alloc:function(){},lt:null,swapped:null,data:null,prev:null,next:null,parent:null,colour:null,
clear_with:function(a){if(null!=this.parent){for(var b=this.parent;null!=b;)b=null!=b.prev?b.prev:null!=b.next?b.next:this.clear_node(b,a);this.parent=null}},clear_node:function(a,b){b(a.data);b=a.parent;null!=b&&(a==b.prev?b.prev=null:b.next=null,a.parent=null);a.free();a.next=pb.zpp_pool;pb.zpp_pool=a;return b},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}if(b==c.prev){var d=c;var e=c.next;if(a==b.prev){var f=a;var g=b;var h=a.prev;var k=a.next;var l=
b.next}else f=b,g=a,h=b.prev,k=a.prev,l=a.next}else f=c,h=c.prev,a==b.prev?(g=a,d=b,k=a.prev,l=a.next,e=b.next):(g=b,d=a,k=b.prev,l=a.prev,e=a.next);a=c.parent;null==a?this.parent=g:a.prev==c?a.prev=g:a.next=g;null!=g&&(g.parent=a);f.prev=h;null!=h&&(h.parent=f);f.next=k;null!=k&&(k.parent=f);g.prev=f;null!=f&&(f.parent=g);g.next=d;null!=d&&(d.parent=g);d.prev=l;null!=l&&(l.parent=d);d.next=e;null!=e&&(e.parent=d);g.colour=c.colour-1;f.colour=1;d.colour=1;if(g==this.parent)this.parent.colour=1;else if(0==
g.colour&&0==g.parent.colour){a=g;continue}break}},try_insert:function(a){var b=null,c=null;if(null==this.parent)null==pb.zpp_pool?b=new pb:(b=pb.zpp_pool,pb.zpp_pool=b.next,b.next=null),b.alloc(),b.data=a,this.parent=b;else for(c=this.parent;;)if(this.lt(a,c.data))if(null==c.prev){null==pb.zpp_pool?b=new pb:(b=pb.zpp_pool,pb.zpp_pool=b.next,b.next=null);b.alloc();b.data=a;c.prev=b;b.parent=c;break}else c=c.prev;else if(this.lt(c.data,a))if(null==c.next){null==pb.zpp_pool?b=new pb:(b=pb.zpp_pool,
pb.zpp_pool=b.next,b.next=null);b.alloc();b.data=a;c.next=b;b.parent=c;break}else c=c.next;else break;if(null==b)return c;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:pb};var Xc=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};k["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=Xc;Xc.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSet"];Xc.prototype={free:function(){this.swapped=this.lt=this.data=null},alloc:function(){},
lt:null,swapped:null,data:null,prev:null,next:null,parent:null,colour:null,empty:function(){return null==this.parent},find:function(a){for(var b=this.parent;null!=b&&b.data!=a;)b=this.lt(a,b.data)?b.prev:b.next;return b},find_weak:function(a){for(var b=this.parent;null!=b;)if(this.lt(a,b.data))b=b.prev;else if(this.lt(b.data,a))b=b.next;else break;return b},remove:function(a){a=this.find(a);this.remove_node(a)},remove_node:function(a){if(null!=a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=
b.prev;var c=a.data;a.data=b.data;b.data=c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var d=c.prev;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}d=c.next;if(-1==d.colour){this.__fix_neg_red(d);
break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.free();a.next=Xc.zpp_pool;Xc.zpp_pool=a},__fix_neg_red:function(a){var b=a.parent;if(b.prev==a){var c=a.prev,d=a.next,e=d.prev,f=d.next;c.colour=0;a.colour=
b.colour=1;a.next=e;null!=e&&(e.parent=a);a=b.data;b.data=d.data;d.data=a;null!=this.swapped&&this.swapped(b.data,d.data);d.prev=f;null!=f&&(f.parent=d);d.next=b.next;null!=b.next&&(b.next.parent=d);b.next=d}else c=a.next,d=a.prev,e=d.next,f=d.prev,c.colour=0,a.colour=b.colour=1,a.prev=e,null!=e&&(e.parent=a),a=b.data,b.data=d.data,d.data=a,null!=this.swapped&&this.swapped(b.data,d.data),d.next=f,null!=f&&(f.parent=d),d.prev=b.prev,null!=b.prev&&(b.prev.parent=d),b.prev=d;null!=d&&(d.parent=b);b=
c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}if(b==c.prev){var d=c;var e=c.next;if(a==b.prev){var f=a;var g=b;var h=a.prev;var k=a.next;var l=b.next}else f=b,g=a,h=b.prev,k=a.prev,l=a.next}else f=c,h=c.prev,a==b.prev?(g=a,d=b,k=a.prev,l=a.next,e=b.next):(g=b,d=a,k=b.prev,l=a.prev,e=a.next);a=c.parent;null==a?this.parent=g:a.prev==c?a.prev=
g:a.next=g;null!=g&&(g.parent=a);f.prev=h;null!=h&&(h.parent=f);f.next=k;null!=k&&(k.parent=f);g.prev=f;null!=f&&(f.parent=g);g.next=d;null!=d&&(d.parent=g);d.prev=l;null!=l&&(l.parent=d);d.next=e;null!=e&&(e.parent=d);g.colour=c.colour-1;f.colour=1;d.colour=1;if(g==this.parent)this.parent.colour=1;else if(0==g.colour&&0==g.parent.colour){a=g;continue}break}},insert:function(a){if(null==Xc.zpp_pool)var b=new Xc;else b=Xc.zpp_pool,Xc.zpp_pool=b.next,b.next=null;b.alloc();b.data=a;if(null==this.parent)this.parent=
b;else for(a=this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:Xc};var Rb,Ol=0;k.Math=Math;String.prototype.__class__=k.String=String;String.__name__=["String"];k.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=k.Date=Date;Date.__name__=["Date"];var Sl=k.Int={__name__:["Int"]},
Rl=k.Dynamic={__name__:["Dynamic"]},Bl=k.Float=Number;Bl.__name__=["Float"];var Al=k.Bool=Boolean;Al.__ename__=["Bool"];var rl=k.Class={__name__:["Class"]},zl={},Ql={},Ji=bb.ArrayBuffer||zc;null==Ji.prototype.slice&&(Ji.prototype.slice=zc.sliceImpl);var Zc=bb.Float32Array||kf._new,Hb=bb.Uint8Array||Re._new,Tl=new Uint32Array(256);E.__alpha16=Tl;for(var Jl=0;256>Jl;){var Kl=Jl++;E.__alpha16[Kl]=Math.ceil(257.00392156862745*Kl)}var Ul=new Hb(510);E.__clamp=Ul;for(var Ll=0;255>Ll;){var Ml=Ll++;E.__clamp[Ml]=
Ml}for(var Nl=255;511>Nl;){var Vl=Nl++;E.__clamp[Vl]=255}Pa.level=3;"undefined"==typeof console&&(console={});null==console.log&&(console.log=function(){});Pa.throwErrors=!0;rb.count=0;xa.__broadcastEvents=new ea;xa.__instanceCount=0;xa.__tempStack=new ti(function(){return hb.toObjectVector(null)},function(a){a.data.set_length(0)});od.DEGREE=180/Math.PI;B.pause=!1;B.position=0;B.audioArray=[];B.loopPaused=!1;B.soundsPaused=!1;B.loopPauseAds=!1;B.soundsPauseAds=!1;sa.__identity=new sa;sa.__pool=new Gi(function(){return new sa},
function(a){a.identity()});g.arrayWall=[9,4,7,9,10,9,8,12,13,8,13,8,7,12,11,10,12,9,15,11,9,6,9,10,12,11,9,9,11,9];g.offsetBack=[[0,0],[0,0],[0,-61],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,-50.4],[0,0],[0,0],[0,-29],[0,-77],[0,0],[0,-21.5],[0,0],[0,0],[0,0],[0,0],[0,-104],[0,0],[0,0],[0,-64],[-115.2,-256],[0,-84]];g.theMenu=new ia;g.theGame=new ia;g.soundFirst=!1;g.maskesAddedM=!1;g.currentDigitInPassword=0;g.tweenCompleted=0;g.starCounter=0;g.currentHintNumber=0;g.reward=!1;
g.arrowCounter=0;g.currentSprite=new ia;g.levelState="none";g.run=!1;g.currentLevel=1;g.offSetX=0;g.offSetY=0;g.addKoef=0;g.addKoef2=0;g.ballonPushed=0;g.balkaPushed=0;g.adsInited=!1;g.resumeType="none";g.commonSpriteArray="gfx_ftc_ItemHint_EffectAnimation gfx_hintFingerSwipe1_Y Button_silver gfx_ftc_lvl4_Rope ftc_w_gfx_Fly ftc_w_gfx_Starry3 ftc_w_gfx_WoodenCar ftc_w_gfx_WoodenCarWheel gfx_ftc_k_Woodensqure ftc_w_gfx_Oscar gfx_ftc_k_lvl14_gun_stand gfx_ftc_k_lvl14_gun gfx_ftc_lvl13_Valve gfx_ftc_k_Ball gfx_ftc_lvl16_MadBalloon1 LevelItem_Lock3 ftc_w_gfx_Lock3 ftc_w_gfx_Starry spider_up ftc_w_gfx_hedgehog ftc_w_gfx_FanBtn ftc_w_gfx_Fan ftc_w_gfx_HedgehogScarying ftc_w_gfx_GreenBoxPart1 ftc_w_gfx_GreenBoxPart2 ftc_w_gfx_Apple ftc_w_gfx_Ice ftc_w_gfx_IceBlocker1 ftc_w_gfx_IceBlocker ftc_w_gfx_hedgehog ftc_w_gfx_SnowBlock ftc_w_gfx_SnowBlock2 ftc_w_gfx_SnowBlock3 ftc_w_gfx_Creature2_Animation2 ftc_w_gfx_Energysource ftc_w_gfx_EnergyFog ftc_w_gfx_LongBox3 ftc_w_gfx_LongBox4 ftc_w_gfx_LongBox5 ftc_w_gfx_LongBox7 ftc_w_gfx_LongBox8 ftc_w_gfx_LongBox11 ftc_w_gfx_Gift01_2 ftc_w_gfx_Gift02 ftc_w_gfx_Gift04 ftc_w_gfx_Gift04_2 ftc_w_gfx_Gift05 ftc_w_gfx_Gift05_1 ftc_w_gfx_Gift06 ftc_w_gfx_Gift7 gfx_ftc_candy ftc_w_gfx_Snow1_1 gfx_ftc_lvl2_Lamp gfx_ftc_lvl17_btnGoo gfx_ftc_lvl17_BtnRight gfx_ftc_lvl17_BtnUp gfx_ftc_lvl17_BtnLeft gfx_ftc_lvl2_LampLight gfx_hintFingerPush gfx_ftc_lvl12_VaultPart1 gfx_ftc_lvl14_GoldenKey gfx_ftc_lv6_BeerBox2 gfx_ftc_lvl3_Alarm gfx_ftc_lvl3_IronBox gfx_ftc_lvl16_SmallMadBalloon1 gfx_ftc_lvl9_Wire1Part gfx_ftc_lvl9_Wire2Part ftc_w_gfx_Wire3Part gfx_ftc_lvl17_Creature1_Animation gfx_ftc_lvl8_UpperDoorPart2 gfx_ftc_lvl8_IronChainCell1 gfx_ftc_lvl8_IronChainCell2 gfx_ftc_lvl8_IronChainCell3 gfx_ftc_Creature2_Animation4 gfx_ftc_lvl1_lock1 gfx_ftc_lvl1_lock2 gfx_ftc_Creature4_Animation1 gfx_ftc_Creature4_Animation2 gfx_ftc_lvl7_Git05_1 gfx_ftc_Creature2_Animation3_Reverse gfx_ftc_Creature2_Animation2_Reverse complAcorn ftc_w_gfx_Rope gfx_ftc_CandyCollect_Effect gfx_ftc_Creature4_Animation2 ftc_w_gfx_Creature2_Animation1 gfx_ftc_GlassBall gfx_ftc_GiftCollect_Effect1 gfx_hintFingerSwipe1_X gfx_hintFingerSwipe1_X gfx_ftc_StarCollect_Effect gfx_btnGameMenuSlider acIcons ftc_w_gfx_Candy gfx_ftc_star gfx_hintFingerSwipe1_X lIcons gfx_ftc_Creature3_Animation1 gfx_ftc_Creature3_Animation2".split(" ");
g.scoreKoef=1.1;g.mousePoint=new v(0,0);g.scoresArray=[];g.currentIcon=-1;g.isMobileCheck=isMobile.any;g.isAppleCheck=isMobile.apple.device;ac.USE_CACHE=!1;ac.USE_ENUM_INDEX=!1;ac.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Bb.DEFAULT_RESOLVER=new Tg;Bb.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";ie.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";ie.BYTES=ya.ofString(ie.CHARS);Oc.i64tmp=new Ii(0,0);n.__toStr={}.toString;
kf.BYTES_PER_ELEMENT=4;Re.BYTES_PER_ELEMENT=1;O.activeRequests=0;O.requestLimit=4;O.requestQueue=new Db;fa.dummyCharacter="\u007f";fa.windowID=0;ja.__base64Chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";S.__identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Ib.onUpdate=new ub;tb.devices=new Cb;tb.onConnect=new Vi;fb.devices=new Cb;fb.onConnect=new Wi;gb.onCancel=new Nd;gb.onEnd=new Nd;gb.onMove=new Nd;gb.onStart=new Nd;aa.cache=new $i;aa.onChange=new ub;aa.libraries=new ea;aa.libraryPaths=
new ea;Pa.throwErrors=!0;Ka.actuators=[];Ka.actuatorsLength=0;Ka.addedEvent=!1;zk.easeOut=new kh;Ja.defaultActuator=Ka;Ja.defaultEase=zk.easeOut;Ja.targetLibraries=new rb;x.epsilon=1E-8;x.fluidAngularDragFriction=2.5;x.fluidAngularDrag=100;x.fluidVacuumDrag=.5;x.fluidLinearDrag=.5;x.collisionSlop=.2;x.collisionSlopCCD=.5;x.distanceThresholdCCD=.05;x.staticCCDLinearThreshold=.05;x.staticCCDAngularThreshold=.005;x.bulletCCDLinearThreshold=.125;x.bulletCCDAngularThreshold=.0125;x.dynamicSweepLinearThreshold=
17;x.dynamicSweepAngularThreshold=.6;x.angularCCDSlipScale=.75;x.arbiterExpirationDelay=6;x.staticFrictionThreshold=2;x.elasticThreshold=20;x.sleepDelay=60;x.linearSleepThreshold=.2;x.angularSleepThreshold=.4;x.contactBiasCoef=.3;x.contactStaticBiasCoef=.6;x.contactContinuousBiasCoef=.4;x.contactContinuousStaticBiasCoef=.5;x.constraintLinearSlop=.1;x.constraintAngularSlop=.001;x.illConditionedThreshold=2E8;H.current=new xd;cc.empty=new cc;p.SIN45=.7071067811865476;p.TAN22=.41421356237309503;p.fillCommands=
new cc;p.strokeCommands=new cc;p.hitTestCanvas=M.get_document().createElement("canvas");p.hitTestContext=p.hitTestCanvas.getContext("2d");Ge.scale=1;kb.__regexColor=new ma("color=(\"#([^\"]+)\"|'#([^']+)')","i");kb.__regexFace=new ma("face=(\"([^\"]+)\"|'([^']+)')","i");kb.__regexFont=new ma("<font ([^>]+)>","gi");kb.__regexCloseFont=new ma("</font>","gi");kb.__regexSize=new ma("size=(\"([^\"]+)\"|'([^']+)')","i");db.debug=!1;ef.instances=new ea;N.__regexAlign=new ma("align=(\"([^\"]+)\"|'([^']+)')",
"i");N.__regexBreakTag=new ma("<br\\s*/?>","gi");N.__regexBlockIndent=new ma("blockindent=(\"([^\"]+)\"|'([^']+)')","i");N.__regexColor=new ma("color=(\"#([^\"]+)\"|'#([^']+)')","i");N.__regexEntities=[new ma("&quot;","g"),new ma("&apos;","g"),new ma("&amp;","g"),new ma("&lt;","g"),new ma("&gt;","g"),new ma("&nbsp;","g")];N.__regexFace=new ma("face=(\"([^\"]+)\"|'([^']+)')","i");N.__regexHTMLTag=new ma("<.*?>","g");N.__regexHref=new ma("href=(\"([^\"]+)\"|'([^']+)')","i");N.__regexIndent=new ma(" indent=(\"([^\"]+)\"|'([^']+)')",
"i");N.__regexLeading=new ma("leading=(\"([^\"]+)\"|'([^']+)')","i");N.__regexLeftMargin=new ma("leftmargin=(\"([^\"]+)\"|'([^']+)')","i");N.__regexRightMargin=new ma("rightmargin=(\"([^\"]+)\"|'([^']+)')","i");N.__regexSize=new ma("size=(\"([^\"]+)\"|'([^']+)')","i");N.__regexTabStops=new ma("tabstops=(\"([^\"]+)\"|'([^']+)')","i");ba.__bufferStride=26;ba.__tempVector=new ye;oe.__rootURL=M.get_document().URL;Fc.TEXTURE_MAX_ANISOTROPY_EXT=0;Fc.DEPTH_STENCIL=0;Fc.__stateCache=new Fj;ci.__lowMemoryMode=
!1;Fa.CLICK="click";Fa.DOUBLE_CLICK="doubleClick";Fa.MIDDLE_CLICK="middleClick";Fa.MIDDLE_MOUSE_DOWN="middleMouseDown";Fa.MIDDLE_MOUSE_UP="middleMouseUp";Fa.MOUSE_DOWN="mouseDown";Fa.MOUSE_MOVE="mouseMove";Fa.MOUSE_OUT="mouseOut";Fa.MOUSE_OVER="mouseOver";Fa.MOUSE_UP="mouseUp";Fa.MOUSE_WHEEL="mouseWheel";Fa.RELEASE_OUTSIDE="releaseOutside";Fa.RIGHT_CLICK="rightClick";Fa.RIGHT_MOUSE_DOWN="rightMouseDown";Fa.RIGHT_MOUSE_UP="rightMouseUp";Fa.ROLL_OUT="rollOut";Fa.ROLL_OVER="rollOver";Eb.TOUCH_BEGIN=
"touchBegin";Eb.TOUCH_END="touchEnd";Eb.TOUCH_MOVE="touchMove";Eb.TOUCH_OUT="touchOut";Eb.TOUCH_OVER="touchOver";Eb.TOUCH_ROLL_OUT="touchRollOut";Eb.TOUCH_ROLL_OVER="touchRollOver";Eb.TOUCH_TAP="touchTap";za.__pool=new aj(function(){return new za},function(a){a.setTo(0,0)});X.__pool=new bj(function(){return new X},function(a){a.setTo(0,0,0,0)});zd.__soundChannels=[];zd.__soundTransform=new Xe;xf.currentDomain=new xf(null);Vd.__registeredFonts=[];Lb.__missingFontWarning=new ea;La.numDevices=0;La.__deviceList=
[];La.__devices=new rb;La.__instances=[];al.__cursor="auto";Na.cache=new gi;Td.__pool=new cj(function(){return new Td},function(a){a.reset()});t.uniqueID=0;fe.OBJECT_REFERENCE_PREFIX="@~obRef#";Kb._Constraint=0;Kb._Interactor=0;Kb._CbType=0;Kb._CbSet=0;Kb._Listener=0;ab.ANY_SHAPE=new ua;ab.ANY_BODY=new ua;ab.ANY_COMPOUND=new ua;ab.ANY_CONSTRAINT=new ua;r.internal=!1;ob.UCbSet=new gg;ob.VCbSet=new gg;ob.WCbSet=new gg;ob.UCbType=new dd;ob.VCbType=new dd;ob.WCbType=new dd;Ea.internal=!1;Ea.COL=1;Ea.FLUID=
4;Ea.SENSOR=2;ic.internal=!1;W.flowpoly=new yg;W.flowsegs=new yg;pf.types=[null,Aa.get_STATIC(),Aa.get_DYNAMIC(),Aa.get_KINEMATIC()];qa.WAKE=1;qa.PROPS=2;qa.ANGDRAG=4;qa.ARBITERS=8;mb.internal=!1;nc.tmpaabb=new Yb;Gd.internal=!1;af.internal=!1;rf.internal=!1;qf.internal=!1;Ze.internal=!1;id.internal=!1;Jf.internal=!1;Yf.internal=!1;qg.internal=!1;pg.internal=!1;rg.internal=!1;Rd.internal=!1;Xf.internal=!1;$e.internal=!1;Wf.internal=!1;Qf.main()})("undefined"!=typeof exports?exports:"undefined"!=typeof window?
window:"undefined"!=typeof self?self:this,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
